<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Advanced Notifications PRO</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f0f0f0;
        }
        
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .debug-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .btn {
            padding: 8px 16px;
            border: 1px solid #ccc;
            background: #f8f9fa;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        
        .btn:hover {
            background: #e9ecef;
        }
        
        .btn.primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .settings-block {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .settings-block.disabled {
            opacity: 0.6;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <h1>Advanced Notifications PRO Test</h1>
    
    <div class="debug-info" id="debugInfo">
        Testing advanced notifications PRO gating...
    </div>
    
    <div class="test-card">
        <h2>PRO Status Control</h2>
        <button class="btn" onclick="togglePro()">Toggle PRO Status</button>
        <button class="btn" onclick="toggleAdvanced()">Toggle Advanced Notifications</button>
        <div id="proStatus">PRO: OFF</div>
    </div>
    
    <div class="test-card">
        <h2>Advanced Notifications Settings (PRO)</h2>
        <div class="settings-block" id="settingsBlock">
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="advOn" disabled>
                        <span>Enable advanced notifications</span>
                    </label>
                </div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                    <label for="advLead" style="font-weight: 500;">Lead time (hours):</label>
                    <select id="advLead" disabled>
                        <option value="6">6</option>
                        <option value="12">12</option>
                        <option value="24" selected>24</option>
                        <option value="48">48</option>
                        <option value="custom">Customâ€¦</option>
                    </select>
                    <input type="number" id="advLeadCustom" min="1" step="1" value="24" style="width:88px;padding: 4px 8px;border: 1px solid #ccc;border-radius: 4px;" hidden disabled>
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="font-weight: 500;">Lists to monitor:</div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="advL_tvWatching" checked disabled>
                            <span>TV â€” Watching</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="advL_tvWishlist" disabled>
                            <span>TV â€” Wishlist</span>
                        </label>
                    </div>
                </div>
                <div id="proMessage" style="font-size: 0.8rem; color: #666; font-style: italic;">PRO subscription required to use advanced notifications.</div>
            </div>
        </div>
    </div>
    
    <div class="test-card">
        <h2>Storage Keys Test</h2>
        <button class="btn" onclick="checkStorage()">Check Storage Keys</button>
        <div id="storageInfo">Click to check storage...</div>
    </div>

    <script>
        // Mock flags
        window.FLAGS = {
            proEnabled: false,
            notifAdvancedEnabled: true
        };

        // Mock app data
        window.FlickletApp = {
            data: {
                tv: {
                    watching: [],
                    wishlist: []
                }
            }
        };

        // Mock notification function
        window.showNotification = function(msg, type) {
            console.log('ðŸ”” Advanced Notification:', msg, type);
            alert(`ðŸ”” ${msg}`);
        };

        function togglePro() {
            window.FLAGS.proEnabled = !window.FLAGS.proEnabled;
            updateUI();
            console.log('PRO status toggled:', window.FLAGS.proEnabled);
        }

        function toggleAdvanced() {
            window.FLAGS.notifAdvancedEnabled = !window.FLAGS.notifAdvancedEnabled;
            updateUI();
            console.log('Advanced notifications toggled:', window.FLAGS.notifAdvancedEnabled);
        }

        function updateUI() {
            const isPro = window.FLAGS.proEnabled;
            const isAdvanced = window.FLAGS.notifAdvancedEnabled;
            
            document.getElementById('proStatus').textContent = `PRO: ${isPro ? 'ON' : 'OFF'}`;
            
            const settingsBlock = document.getElementById('settingsBlock');
            const inputs = settingsBlock.querySelectorAll('input, select');
            const proMessage = document.getElementById('proMessage');
            
            if (isPro && isAdvanced) {
                settingsBlock.classList.remove('disabled');
                inputs.forEach(input => input.disabled = false);
                proMessage.style.display = 'none';
            } else {
                settingsBlock.classList.add('disabled');
                inputs.forEach(input => input.disabled = true);
                proMessage.style.display = 'block';
            }
        }

        function checkStorage() {
            const keys = [
                'flicklet:notif:adv:on',
                'flicklet:notif:adv:leadHours',
                'flicklet:notif:adv:lists',
                'flicklet:notif:seen'
            ];
            
            const storage = {};
            keys.forEach(key => {
                storage[key] = localStorage.getItem(key) || 'not set';
            });
            
            document.getElementById('storageInfo').innerHTML = 
                Object.entries(storage).map(([key, value]) => 
                    `<div><strong>${key}:</strong> ${value}</div>`
                ).join('');
        }

        // Initialize
        updateUI();
        console.log('ðŸ”” Advanced Notifications PRO test initialized');
    </script>
</body>
</html>






