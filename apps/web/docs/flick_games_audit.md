# FlickGames Deep-Dive Report - 2025-11-10 19:52:46

*Generated by focused search for FlickWord and FlickTrivia specific files*


# Components - Game Logic
*3 file(s)*


## apps\web\src\components\games\FlickWordGame.tsx
```
/**
 * Process: FlickWord Game Component
 * Purpose: Wordle-style word guessing game with daily word challenges
 * Data Source: dailyWordApi for target word, validateWord for guess validation
 * Update Path: Game state managed via React hooks, localStorage for stats
 * Dependencies: dailyWordApi, validateWord, flickword.css
 */

import { useState, useEffect, useCallback, useMemo, useRef } from "react";
import { getTodaysWord } from "../../lib/dailyWordApi";
import { validateWord } from "../../lib/words/validateWord";

// Game configuration
const KEYBOARD_ROWS = ["QWERTYUIOP", "ASDFGHJKL", "ZXCVBNM"];
const NOTIFICATION_DURATION = 3000;
const ANIMATION_DELAY_BASE = 100; // Base delay for tile animations
const GAME_STATE_KEY = "flicklet:flickword-game-state"; // localStorage key for game state

// Types
type TileStatus = "correct" | "present" | "absent" | "";
type NotificationType = "success" | "error" | "info" | "warning";
type AnimationState = "idle" | "entering" | "revealing" | "revealed";

interface Notification {
  id: string;
  message: string;
  type: NotificationType;
  timestamp: number;
}

interface GameState {
  target: string;
  guesses: string[];
  current: string;
  maxGuesses: number;
  done: boolean;
  status: Record<string, TileStatus>;
  lastResults: TileStatus[][];
  wordInfo?: {
    definition?: string;
    difficulty?: string;
  };
  showHint: boolean;
  animationState: AnimationState;
}

interface FlickWordGameProps {
  onClose?: () => void;
  onGameComplete?: (won: boolean, guesses: number) => void;
}

// Saved game state (excludes transient animation state)
interface SavedGameState {
  target: string;
  guesses: string[];
  current: string;
  maxGuesses: number;
  done: boolean;
  status: Record<string, TileStatus>;
  lastResults: TileStatus[][];
  wordInfo?: {
    definition?: string;
    difficulty?: string;
  };
  showHint: boolean;
  date: string; // Date when this game state was saved
}

/**
 * Save game state to localStorage
 */
function saveGameState(game: GameState, date: string): void {
  try {
    const savedState: SavedGameState = {
      target: game.target,
      guesses: game.guesses,
      current: game.current,
      maxGuesses: game.maxGuesses,
      done: game.done,
      status: game.status,
      lastResults: game.lastResults,
      wordInfo: game.wordInfo,
      showHint: game.showHint,
      date,
    };
    localStorage.setItem(GAME_STATE_KEY, JSON.stringify(savedState));
    console.log("ðŸ’¾ Game state saved:", {
      target: game.target,
      guesses: game.guesses.length,
      date,
    });
  } catch (error) {
    console.warn("Failed to save game state:", error);
  }
}

/**
 * Restore game state from localStorage
 * Returns null if no saved state or state is for a different day
 */
function restoreGameState(currentDate: string): SavedGameState | null {
  try {
    const saved = localStorage.getItem(GAME_STATE_KEY);
    if (!saved) return null;

    const savedState: SavedGameState = JSON.parse(saved);

    // Only restore if it's for today's word and game isn't completed
    if (
      savedState.date === currentDate &&
      !savedState.done &&
      savedState.target
    ) {
      console.log("ðŸ“‚ Game state restored:", {
        target: savedState.target,
        guesses: savedState.guesses.length,
      });
      return savedState;
    } else if (savedState.date !== currentDate) {
      // Clear old game state from different day
      localStorage.removeItem(GAME_STATE_KEY);
      console.log("ðŸ—‘ï¸ Cleared game state from different day");
    }

    return null;
  } catch (error) {
    console.warn("Failed to restore game state:", error);
    // Clear corrupted state
    localStorage.removeItem(GAME_STATE_KEY);
    return null;
  }
}

/**
 * Clear saved game state
 */
function clearGameState(): void {
  try {
    localStorage.removeItem(GAME_STATE_KEY);
    console.log("ðŸ—‘ï¸ Game state cleared");
  } catch (error) {
    console.warn("Failed to clear game state:", error);
  }
}

export default function FlickWordGame({
  onClose,
  onGameComplete,
}: FlickWordGameProps) {
  const [game, setGame] = useState<GameState>({
    target: "",
    guesses: [],
    current: "",
    maxGuesses: 6,
    done: false,
    status: {},
    lastResults: [],
    showHint: false,
    animationState: "idle",
  });
  const [notifications, setNotifications] = useState<Notification[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [isInvalidInput, setIsInvalidInput] = useState(false);
  const gridRef = useRef<HTMLDivElement>(null);
  const notificationTimeoutRef = useRef<number | null>(null);

  // Check for reduced motion preference
  const prefersReducedMotion = useMemo(() => {
    if (typeof window === "undefined") return false;
    return window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  }, []);

  // Get today's word from API (same word for all players each day)
  const loadTodaysWord = useCallback(
    async (forceNew: boolean = false, restoreState: boolean = true) => {
      try {
        setIsLoading(true);
        console.log("ðŸ”„ Loading today's word...");

        // Get today's date
        const today = new Date().toISOString().slice(0, 10);

        // If forcing new word, clear cache first
        if (forceNew) {
          localStorage.removeItem("flicklet:daily-word");
          clearGameState(); // Also clear game state when forcing new word
          console.log("ðŸ—‘ï¸ Cleared word cache for new word");
        }

        // Try to restore saved game state first (if not forcing new)
        if (restoreState && !forceNew) {
          const savedState = restoreGameState(today);
          if (savedState) {
            // Restore game state
            setGame({
              ...savedState,
              animationState: "idle", // Always reset animation state
            });
            setIsLoading(false);
            console.log("âœ… Game state restored from previous session");
            return;
          }
        }

        // Use daily word (same for all players, rotates daily)
        const wordData = await getTodaysWord();
        console.log("ðŸ“¦ Daily word data received:", wordData);

        // Validate that we got a proper word
        if (wordData && wordData.word && wordData.word.length === 5) {
          const newGameState = {
            target: wordData.word.toUpperCase(),
            guesses: [],
            current: "",
            maxGuesses: 6,
            done: false,
            status: {},
            lastResults: [],
            wordInfo: {
              definition: wordData.definition,
              difficulty: wordData.difficulty,
            },
            showHint: false,
            animationState: "idle" as AnimationState,
          };

          setGame(newGameState);

          // Save initial state
          saveGameState(newGameState, today);

          console.log("âœ… Game target set to:", wordData.word.toUpperCase());
        } else {
          throw new Error("Invalid word data received");
        }
      } catch (error) {
        console.error("âŒ Failed to load daily word:", error);
        // Fallback to a static word if API fails
        const fallbackWord = "HOUSE";
        console.log("ðŸ”„ Using fallback word:", fallbackWord);
        const fallbackDate = new Date().toISOString().slice(0, 10);
        const fallbackState = {
          target: fallbackWord,
          guesses: [],
          current: "",
          maxGuesses: 6,
          done: false,
          status: {},
          lastResults: [],
          wordInfo: {
            definition: "A building for human habitation",
            difficulty: "easy",
          },
          showHint: false,
          animationState: "idle" as AnimationState,
        };
        setGame(fallbackState);
        saveGameState(fallbackState, fallbackDate);
      } finally {
        setIsLoading(false);
        console.log("ðŸ Word loading complete");
      }
    },
    []
  );

  // TEMPORARY: Force load new word (for testing)
  const handleNewWord = useCallback(async () => {
    try {
      setIsLoading(true);
      console.log("ðŸ”„ Loading new word for testing...");

      // Clear cache first
      localStorage.removeItem("flicklet:daily-word");

      // Get a random word from common words list
      const { getCommonWordsArray } = await import(
        "../../lib/words/commonWords"
      );
      const commonWords = getCommonWordsArray();

      if (commonWords && commonWords.length > 0) {
        // Get current target
        const currentTarget = game.target;

        // Pick a random word different from current
        let newWord;
        let attempts = 0;
        do {
          const randomIndex = Math.floor(Math.random() * commonWords.length);
          newWord = commonWords[randomIndex].toUpperCase();
          attempts++;
        } while (newWord === currentTarget && attempts < 10); // Avoid same word

        console.log("ðŸŽ² Selected random word:", newWord);

        const testDate = new Date().toISOString().slice(0, 10);
        const newGameState = {
          target: newWord,
          guesses: [],
          current: "",
          maxGuesses: 6,
          done: false,
          status: {},
          lastResults: [],
          wordInfo: {
            definition: undefined,
            difficulty: "medium",
          },
          showHint: false,
          animationState: "idle" as AnimationState,
        };
        setGame(newGameState);
        // Clear old game state and save new one
        clearGameState();
        saveGameState(newGameState, testDate);

        // Cache the new word with today's date for consistency
        const cacheData = {
          word: newWord.toLowerCase(),
          date: testDate,
          definition: undefined,
          difficulty: "medium",
          timestamp: Date.now(),
        };
        localStorage.setItem("flicklet:daily-word", JSON.stringify(cacheData));

        // Show notification using the notification system
        const notificationId = `notification-${Date.now()}-${Math.random()}`;
        const notification = {
          id: notificationId,
          message: `New word loaded: ${newWord}`,
          type: "info" as NotificationType,
          timestamp: Date.now(),
        };
        setNotifications((prev) => [...prev, notification]);

        // Auto-dismiss
        setTimeout(() => {
          setNotifications((prev) =>
            prev.filter((n) => n.id !== notificationId)
          );
        }, 3000);
      } else {
        throw new Error("Common words list not available");
      }
    } catch (error) {
      console.error("âŒ Failed to load new word:", error);
      // Show error notification
      const notificationId = `notification-${Date.now()}-${Math.random()}`;
      const notification = {
        id: notificationId,
        message: "Failed to load new word",
        type: "error" as NotificationType,
        timestamp: Date.now(),
      };
      setNotifications((prev) => [...prev, notification]);
      setTimeout(() => {
        setNotifications((prev) => prev.filter((n) => n.id !== notificationId));
      }, 3000);
    } finally {
      setIsLoading(false);
    }
  }, [game.target]);

  // Score guess
  const scoreGuess = useCallback(
    (guess: string, target: string): TileStatus[] => {
      const result: TileStatus[] = Array(5).fill("absent");
      const pool = target.split("");

      // First pass: exact matches
      for (let i = 0; i < 5; i++) {
        if (guess[i] === pool[i]) {
          result[i] = "correct";
          pool[i] = "";
        }
      }

      // Second pass: present matches
      for (let i = 0; i < 5; i++) {
        if (result[i] === "correct") continue;
        const idx = pool.indexOf(guess[i]);
        if (idx !== -1) {
          result[i] = "present";
          pool[idx] = "";
        }
      }

      return result;
    },
    []
  );

  // Enhanced notification system with auto-dismiss and icons
  const showNotification = useCallback(
    (message: string, type: NotificationType) => {
      // Prevent duplicate notifications - check if same message already exists
      setNotifications((prev) => {
        const duplicate = prev.find(
          (n) => n.message === message && n.type === type
        );
        if (duplicate) {
          // Already showing this notification, don't add another
          return prev;
        }

        const id = `notification-${Date.now()}-${Math.random()}`;
        const notification: Notification = {
          id,
          message,
          type,
          timestamp: Date.now(),
        };

        // Auto-dismiss after duration
        if (notificationTimeoutRef.current) {
          clearTimeout(notificationTimeoutRef.current);
        }
        notificationTimeoutRef.current = window.setTimeout(() => {
          setNotifications((p) => p.filter((n) => n.id !== id));
          notificationTimeoutRef.current = null;
        }, NOTIFICATION_DURATION);

        return [...prev, notification];
      });
    },
    []
  );

  // Clear notifications on unmount
  useEffect(() => {
    return () => {
      if (notificationTimeoutRef.current) {
        clearTimeout(notificationTimeoutRef.current);
      }
    };
  }, []);

  // Initialize game
  const initializeGame = useCallback(() => {
    loadTodaysWord();
  }, [loadTodaysWord]);

  // Handle key input
  const handleKeyInput = useCallback((letter: string) => {
    setGame((prev) => {
      if (prev.done || prev.current.length >= 5) return prev;
      const newState = {
        ...prev,
        current: prev.current + letter,
      };
      // Save state after input
      const today = new Date().toISOString().slice(0, 10);
      saveGameState(newState, today);
      return newState;
    });
  }, []);

  // Handle backspace
  const handleBackspace = useCallback(() => {
    setGame((prev) => {
      if (prev.done || !prev.current) return prev;
      const newState = {
        ...prev,
        current: prev.current.slice(0, -1),
      };
      // Save state after backspace
      const today = new Date().toISOString().slice(0, 10);
      saveGameState(newState, today);
      return newState;
    });
  }, []);

  // Handle submit
  const handleSubmit = useCallback(async () => {
    setGame((prev) => {
      // Check if can submit
      if (prev.done || prev.current.length !== 5) {
        console.log("âŒ Submit blocked:", {
          done: prev.done,
          length: prev.current.length,
        });
        return prev;
      }

      // Validate word synchronously and process
      (async () => {
        const currentWord = prev.current;
        const currentTarget = prev.target;

        console.log("ðŸ” Validating word:", currentWord);
        const verdict = await validateWord(currentWord);
        console.log("âœ… Word validation result:", verdict);

        if (!verdict.valid) {
          setIsInvalidInput(true);

          if (verdict.reason === "length") {
            showNotification("Use 5 letters.", "error");
          } else if (
            verdict.reason === "charset" ||
            verdict.reason === "format"
          ) {
            showNotification("Letters only.", "error");
          } else {
            showNotification("Not a valid word.", "error");
          }

          // Reset invalid state after animation
          setTimeout(
            () => {
              setIsInvalidInput(false);
              setGame((p) => ({ ...p, current: "" }));
            },
            prefersReducedMotion ? 300 : 600
          );
          return;
        }

        const result = scoreGuess(currentWord, currentTarget);
        const newStatus = { ...prev.status };

        // Update keyboard status
        for (let i = 0; i < 5; i++) {
          const letter = currentWord[i];
          if (result[i] === "correct") {
            newStatus[letter] = "correct";
          } else if (
            result[i] === "present" &&
            newStatus[letter] !== "correct"
          ) {
            newStatus[letter] = "present";
          } else if (result[i] === "absent" && !newStatus[letter]) {
            newStatus[letter] = "absent";
          }
        }

        const newGuesses = [...prev.guesses, currentWord];
        const newLastResults = [...prev.lastResults, result];
        const saveDate = new Date().toISOString().slice(0, 10);

        // Start reveal animation
        setGame((p) => {
          const revealingState = {
            ...p,
            animationState: "revealing" as AnimationState,
            guesses: newGuesses,
            lastResults: newLastResults,
            status: newStatus,
          };
          // Save state after submitting guess (before reveal animation)
          saveGameState(revealingState, saveDate);
          return revealingState;
        });

        // Complete animation after delay
        const animationDelay = prefersReducedMotion
          ? 300
          : ANIMATION_DELAY_BASE * 5;
        setTimeout(() => {
          setGame((p) => ({
            ...p,
            animationState: "revealed",
            current: "",
          }));
        }, animationDelay);

        if (currentWord === currentTarget) {
          setTimeout(() => {
            showNotification("ðŸŽ‰ Correct! Well done!", "success");
            setGame((p) => {
              const completedState = {
                ...p,
                done: true,
                animationState: "idle" as AnimationState,
              };
              // Clear saved state when game completes
              clearGameState();
              return completedState;
            });
            onGameComplete?.(true, newGuesses.length);
          }, animationDelay);
        } else if (newGuesses.length === prev.maxGuesses) {
          setTimeout(() => {
            showNotification(
              `Game over! The word was: ${currentTarget}`,
              "error"
            );
            setGame((p) => {
              const completedState = {
                ...p,
                done: true,
                animationState: "idle" as AnimationState,
              };
              // Clear saved state when game completes
              clearGameState();
              return completedState;
            });
            onGameComplete?.(false, newGuesses.length);
          }, animationDelay);
        } else {
          setTimeout(() => {
            setGame((p) => {
              const newState = {
                ...p,
                animationState: "idle" as AnimationState,
              };
              // Save state after guess (before animation completes)
              saveGameState(newState, saveDate);
              return newState;
            });
          }, animationDelay);
        }
      })();

      return prev;
    });
  }, [scoreGuess, showNotification, onGameComplete, prefersReducedMotion]);

  // Keyboard event handling
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (game.done || isLoading) return;

      if (e.key === "Backspace") {
        e.preventDefault();
        handleBackspace();
      } else if (e.key === "Enter") {
        e.preventDefault();
        handleSubmit();
      } else if (e.key.length === 1 && e.key.match(/[a-zA-Z]/)) {
        e.preventDefault();
        handleKeyInput(e.key.toUpperCase());
      }
    };

    document.addEventListener("keydown", handleKeyDown);
    return () => document.removeEventListener("keydown", handleKeyDown);
  }, [game.done, isLoading, handleBackspace, handleSubmit, handleKeyInput]);

  // Initialize game on mount
  useEffect(() => {
    initializeGame();
  }, [initializeGame]);

  // Render game grid with enhanced accessibility and animations
  const renderGrid = () => {
    const tiles = [];
    const currentRowIndex = game.guesses.length;
    const isRevealingRow =
      game.animationState === "revealing" &&
      currentRowIndex === game.guesses.length - 1;

    for (let i = 0; i < game.maxGuesses; i++) {
      const guess =
        game.guesses[i] || (i === currentRowIndex ? game.current : "");
      const isCurrentRow = i === currentRowIndex && !game.done;
      const rowStatus = i < game.guesses.length ? game.lastResults[i] : null;

      for (let j = 0; j < 5; j++) {
        const letter = guess[j] || "";
        const status = rowStatus ? rowStatus[j] : "";
        const animationDelay =
          isRevealingRow && rowStatus ? j * ANIMATION_DELAY_BASE : 0;

        tiles.push(
          <div
            key={`${i}-${j}`}
            className={`fw-tile ${status} ${isCurrentRow ? "fw-tile-current" : ""} ${isRevealingRow && rowStatus ? "fw-tile-revealing" : ""} ${isInvalidInput && isCurrentRow ? "fw-tile-shake" : ""}`}
            role="gridcell"
            aria-label={
              letter ? `${letter}, ${status || "empty"}` : "Empty tile"
            }
            aria-colindex={j + 1}
            aria-rowindex={i + 1}
            style={
              prefersReducedMotion
                ? {}
                : ({
                    "--reveal-delay": `${animationDelay}ms`,
                  } as React.CSSProperties)
            }
            data-status={status}
          >
            {letter}
          </div>
        );
      }
    }
    return tiles;
  };

  // Render keyboard
  const renderKeyboard = () => {
    const rows = [];

    // Row 1: QWERTYUIOP (no backspace here)
    const row1 = [];
    for (const letter of KEYBOARD_ROWS[0]) {
      const status = game.status[letter] || "";
      row1.push(
        <button
          key={letter}
          className={`fw-key ${status}`}
          onClick={() => handleKeyInput(letter)}
          disabled={game.done || isLoading}
          aria-label={`Key ${letter}${status ? `, ${status}` : ""}`}
          aria-pressed={status ? "true" : "false"}
        >
          {letter}
        </button>
      );
    }
    rows.push(
      <div key="row1" className="fw-kb-row">
        <div className="fw-kb-wrap">{row1}</div>
      </div>
    );

    // Row 2: ASDFGHJKL
    const row2 = [];
    for (const letter of KEYBOARD_ROWS[1]) {
      const status = game.status[letter] || "";
      row2.push(
        <button
          key={letter}
          className={`fw-key ${status}`}
          onClick={() => handleKeyInput(letter)}
          disabled={game.done || isLoading}
          aria-label={`Key ${letter}${status ? `, ${status}` : ""}`}
          aria-pressed={status ? "true" : "false"}
        >
          {letter}
        </button>
      );
    }
    rows.push(
      <div key="row2" className="fw-kb-row">
        <div className="fw-kb-wrap">{row2}</div>
      </div>
    );

    // Row 3: Enter + ZXCVBNM + Backspace
    const row3 = [
      <button
        key="enter"
        className="fw-key fw-key-enter"
        onClick={handleSubmit}
        disabled={game.done || isLoading || game.current.length !== 5}
        aria-label="Submit guess"
      >
        Enter
      </button>,
    ];
    for (const letter of KEYBOARD_ROWS[2]) {
      const status = game.status[letter] || "";
      row3.push(
        <button
          key={letter}
          className={`fw-key ${status}`}
          onClick={() => handleKeyInput(letter)}
          disabled={game.done || isLoading}
          aria-label={`Key ${letter}${status ? `, ${status}` : ""}`}
          aria-pressed={status ? "true" : "false"}
        >
          {letter}
        </button>
      );
    }
    row3.push(
      <button
        key="backspace"
        className="fw-key fw-key-back"
        onClick={handleBackspace}
        disabled={game.done || isLoading || !game.current}
        aria-label="Delete letter"
      >
        âŒ«
      </button>
    );
    rows.push(
      <div key="row3" className="fw-kb-row">
        <div className="fw-kb-wrap">{row3}</div>
      </div>
    );

    return rows;
  };

  if (isLoading) {
    return (
      <div className="flickword-game">
        <div className="fw-header">
          {/* TEMPORARY: Small testing button above title */}
          <button
            onClick={handleNewWord}
            aria-label="Load new word (testing)"
            style={{
              backgroundColor: "#f7c23c",
              color: "#000",
              fontSize: "10px",
              fontWeight: "600",
              padding: "4px 8px",
              border: "1px solid #000",
              borderRadius: "4px",
              cursor: "pointer",
              marginBottom: "4px",
              lineHeight: "1",
            }}
            title="Load new word"
          >
            ðŸ§ª
          </button>
          <h3>ðŸŽ¯ FlickWord</h3>
          <div className="fw-stats">
            <span className="fw-streak">Loading...</span>
          </div>
        </div>
        <div className="fw-loading">
          <div className="fw-spinner"></div>
          <p>Loading today&apos;s word...</p>
        </div>
      </div>
    );
  }

  return (
    <div
      className="flickword-game"
      role="application"
      aria-label="FlickWord game"
      aria-describedby="flickword-description"
    >
      {/* Hidden description for screen readers */}
      <div id="flickword-description" className="sr-only">
        Word guessing game. Guess the 5-letter word in {game.maxGuesses}{" "}
        attempts.
        {game.done &&
          `Game ${game.guesses[game.guesses.length - 1] === game.target ? "won" : "lost"}.`}
      </div>

      {/* Enhanced Toast Notifications */}
      <div
        className="fw-notifications-container"
        role="region"
        aria-live="polite"
        aria-atomic="true"
      >
        {notifications.map((notification) => (
          <div
            key={notification.id}
            className={`fw-notification fw-notification-${notification.type}`}
            role="alert"
            aria-live="assertive"
          >
            <span className="fw-notification-icon" aria-hidden="true">
              {notification.type === "success" && "âœ“"}
              {notification.type === "error" && "âœ•"}
              {notification.type === "info" && "â„¹"}
              {notification.type === "warning" && "âš "}
            </span>
            <span className="fw-notification-message">
              {notification.message}
            </span>
            <button
              className="fw-notification-close"
              onClick={() =>
                setNotifications((prev) =>
                  prev.filter((n) => n.id !== notification.id)
                )
              }
              aria-label="Dismiss notification"
            >
              Ã—
            </button>
          </div>
        ))}
      </div>

      {/* Word Info (if available) - Hidden by default */}
      {game.wordInfo?.definition && game.showHint && (
        <div className="fw-word-info" role="region" aria-label="Word hint">
          <p>
            <strong>Hint:</strong> {game.wordInfo.definition}
          </p>
        </div>
      )}

      {/* Game Grid */}
      <div
        ref={gridRef}
        className="fw-grid"
        aria-label="FlickWord board"
        role="grid"
        aria-rowcount={game.maxGuesses}
        aria-colcount={5}
      >
        {renderGrid()}
      </div>

      {/* Keyboard */}
      <div className="fw-keyboard" aria-label="Virtual keyboard" role="group">
        {renderKeyboard()}
      </div>

      {/* Actions */}
      <div className="fw-actions">
        {onClose && (
          <button
            className="fw-btn fw-close"
            onClick={onClose}
            aria-label="Close game"
          >
            Close
          </button>
        )}
      </div>
    </div>
  );
}

```

## apps\web\src\components\games\FlickWordModal.tsx
```
import { useState, useEffect, useRef, useCallback } from 'react';
import FlickWordGame from './FlickWordGame';
import FlickWordStats from './FlickWordStats';
import Portal from '../Portal';
import { lockScroll, unlockScroll } from '../../utils/scrollLock';

interface FlickWordModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function FlickWordModal({ isOpen, onClose }: FlickWordModalProps) {
  const [showStats, setShowStats] = useState(false);
  const [isDragging, setIsDragging] = useState(false);
  const [modalPosition, setModalPosition] = useState({ x: 0, y: 0 });
  const modalRef = useRef<HTMLDivElement>(null);
  const dragStartRef = useRef({ x: 0, y: 0 });
  const lastPositionRef = useRef({ x: 0, y: 0 });

  // Handle escape key
  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isOpen) {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      lockScroll();
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      unlockScroll();
    };
  }, [isOpen, onClose]);

  // Handle mouse events for dragging
  const handleMouseDown = useCallback((e: React.MouseEvent) => {
    const target = e.target as HTMLElement;
    
    // Check if click is in header area (but not on close button)
    if (target.closest('.gm-header') && !target.closest('.gm-close')) {
      setIsDragging(true);
      dragStartRef.current = { x: e.clientX, y: e.clientY };
      lastPositionRef.current = modalPosition;
    }
  }, [modalPosition]);

  const handleMouseMove = useCallback((e: MouseEvent) => {
    if (isDragging) {
      const deltaX = e.clientX - dragStartRef.current.x;
      const deltaY = e.clientY - dragStartRef.current.y;
      
      const newX = lastPositionRef.current.x + deltaX;
      const newY = lastPositionRef.current.y + deltaY;
      
      // Clamp to viewport bounds
      const maxX = (window.innerWidth - 500) / 2;
      const maxY = (window.innerHeight - 750) / 2;
      
      setModalPosition({
        x: Math.max(-maxX, Math.min(maxX, newX)),
        y: Math.max(-maxY, Math.min(maxY, newY))
      });
    }
  }, [isDragging]);

  const handleMouseUp = useCallback(() => {
    if (isDragging) {
      lastPositionRef.current = modalPosition;
    }
    setIsDragging(false);
  }, [isDragging, modalPosition]);

  // Add global mouse event listeners only while dragging
  useEffect(() => {
    if (isDragging) {
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
      return () => {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isDragging, handleMouseMove, handleMouseUp]);

  // Handle game completion
  const handleGameComplete = useCallback((won: boolean, guesses: number) => {
    console.log('ðŸŽ¯ FlickWord game completed:', { won, guesses });
    
    // Update stats directly
    try {
      const existingData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
      const currentStats = existingData.flickword || { games: 0, wins: 0, losses: 0, streak: 0, maxStreak: 0 };
      
      const newStats = {
        games: currentStats.games + 1,
        wins: currentStats.wins + (won ? 1 : 0),
        losses: currentStats.losses + (won ? 0 : 1),
        streak: won ? currentStats.streak + 1 : 0, // Reset streak on loss
        maxStreak: won ? Math.max(currentStats.maxStreak, currentStats.streak + 1) : currentStats.maxStreak
      };
      
      const updatedData = {
        ...existingData,
        flickword: newStats
      };
      
      localStorage.setItem('flicklet-data', JSON.stringify(updatedData));
      localStorage.setItem('flickword:stats', JSON.stringify(newStats));
      console.log('ðŸ’¾ FlickWord stats saved:', newStats);
    } catch (error) {
      console.error('Failed to save FlickWord stats:', error);
    }
    
    // Notify listeners in this tab that stats changed
    try {
      window.dispatchEvent(new CustomEvent('flickword:stats-updated'));
    } catch (e) { void e; }
    // Update stats via optional global handler (legacy)
    if ((window as any).handleFlickWordGameComplete) {
      (window as any).handleFlickWordGameComplete(won, guesses);
    }
    
    // Show stats after a brief delay
    setTimeout(() => {
      setShowStats(true);
    }, 1500);
  }, []);

  // Reset stats view when modal opens
  useEffect(() => {
    if (isOpen) {
      setShowStats(false);
      setModalPosition({ x: 0, y: 0 });
    }
  }, [isOpen]);

  if (!isOpen) return null;

  const modalStyle = {
    position: 'fixed' as const,
    top: '50%',
    left: '50%',
    transform: `translate(-50%, -50%) translate(${modalPosition.x}px, ${modalPosition.y}px)`,
    width: 'min(90vw, 500px)',
    height: 'min(90vh, 750px)',
    cursor: isDragging ? 'grabbing' : 'default',
    zIndex: 10000
  };

  const overlayStyle = {
    position: 'fixed' as const,
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    background: 'rgba(0, 0, 0, 0.8)',
    backdropFilter: 'blur(4px)',
    zIndex: 9999
  };

  return (
    <Portal>
      <div 
        className="game-modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="flickword-modal-title"
      >
        <div className="gm-overlay" style={overlayStyle} onClick={onClose}></div>
        <div 
          ref={modalRef}
          className={`gm-dialog gm-draggable ${isDragging ? 'gm-dragging' : ''}`}
          style={modalStyle}
          onMouseDown={handleMouseDown}
        >
          <header className="gm-header gm-drag-handle">
            {/* TEMPORARY: Small testing button above title */}
            <button
              onClick={async (e) => {
                e.stopPropagation();
                // Clear cache and load new random word
                const { getCommonWordsArray } = await import('../../lib/words/commonWords');
                const commonWords = getCommonWordsArray();
                if (commonWords && commonWords.length > 0) {
                  const randomIndex = Math.floor(Math.random() * commonWords.length);
                  const newWord = commonWords[randomIndex].toUpperCase();
                  localStorage.removeItem('flicklet:daily-word');
                  localStorage.setItem('flicklet:daily-word', JSON.stringify({
                    word: newWord.toLowerCase(),
                    date: new Date().toISOString().slice(0, 10),
                    timestamp: Date.now()
                  }));
                  // Reload to get new word
                  window.location.reload();
                }
              }}
              aria-label="Load new word (testing)"
              style={{
                backgroundColor: "#f7c23c",
                color: "#000",
                fontSize: "10px",
                fontWeight: "600",
                padding: "4px 8px",
                border: "1px solid #000",
                borderRadius: "4px",
                cursor: "pointer",
                marginBottom: "4px",
                lineHeight: "1",
                display: "block",
              }}
              title="Load new word"
            >
              ðŸ§ª
            </button>
            <h3 id="flickword-modal-title">ðŸŽ¯ FlickWord</h3>
            <div className="fw-stats">
              <span className="fw-streak">Streak: 0</span>
              <span className="fw-timer">Next: --:--</span>
            </div>
            <button 
              className="gm-close" 
              type="button" 
              aria-label="Close" 
              onClick={onClose}
            >
              Ã—
            </button>
          </header>
          <main className="gm-body">
            {showStats ? (
              <div className="game-stats-view">
                <FlickWordStats />
                <div className="stats-actions">
                  <button 
                    className="btn-primary" 
                    onClick={() => setShowStats(false)}
                  >
                    Play Again
                  </button>
                  <button 
                    className="btn-secondary" 
                    onClick={onClose}
                  >
                    Close
                  </button>
                </div>
              </div>
            ) : (
              <FlickWordGame 
                onClose={onClose}
                onGameComplete={handleGameComplete}
              />
            )}
          </main>
        </div>
      </div>
    </Portal>
  );
}


```

## apps\web\src\components\games\FlickWordStats.tsx
```
import { useState, useEffect } from 'react';
import { useTranslations } from '@/lib/language';

interface FlickWordStats {
  games: number;
  wins: number;
  losses: number;
  streak: number;
  maxStreak: number;
  winRate: number;
}

type FlickWordStatsProps = Record<string, never>;

export default function FlickWordStats(_props: FlickWordStatsProps) {
  const translations = useTranslations();
  const [stats, setStats] = useState<FlickWordStats>({
    games: 0,
    wins: 0,
    losses: 0,
    streak: 0,
    maxStreak: 0,
    winRate: 0
  });

  // Refresh stats when component mounts or when stats might have changed
  useEffect(() => {
    const loadStats = () => {
      try {
        // Try multiple possible keys
        const stored = localStorage.getItem('flickword:stats') || 
                      localStorage.getItem('flicklet-data') ||
                      localStorage.getItem('flicklet:stats');
        
        if (stored) {
          const data = JSON.parse(stored);
          const flickwordStats = data.flickword || data;
          
          setStats({
            games: flickwordStats.games || 0,
            wins: flickwordStats.wins || 0,
            losses: flickwordStats.losses || 0,
            streak: flickwordStats.streak || 0,
            maxStreak: flickwordStats.maxStreak || 0,
            winRate: flickwordStats.games > 0 ? Math.round((flickwordStats.wins / flickwordStats.games) * 100) : 0
          });
        }
      } catch (error) {
        console.error('Failed to load FlickWord stats:', error);
      }
    };

    loadStats();
    
    // Refresh on cross-tab storage and same-tab custom event
    const handleStorageChange = (e: StorageEvent) => {
      if (e.key === 'flickword:stats' || e.key === 'flicklet-data') {
        loadStats();
      }
    };
    const handleLocalUpdate = () => loadStats();
    
    window.addEventListener('storage', handleStorageChange);
    window.addEventListener('flickword:stats-updated', handleLocalUpdate as any);
    return () => {
      window.removeEventListener('storage', handleStorageChange);
      window.removeEventListener('flickword:stats-updated', handleLocalUpdate as any);
    };
  }, []);

  return (
    <div className="flickword-stats">
      <div className="stats-grid">
        <div className="stat-item">
          <span className="stat-label">{translations.games || 'Games'}</span>
          <span className="stat-value">{stats.games}</span>
        </div>
        <div className="stat-item">
          <span className="stat-label">{translations.won || 'Won'}</span>
          <span className="stat-value">{stats.wins}</span>
        </div>
        <div className="stat-item">
          <span className="stat-label">{translations.lost || 'Lost'}</span>
          <span className="stat-value">{stats.losses}</span>
        </div>
        <div className="stat-item">
          <span className="stat-label">{translations.streak || 'Streak'}</span>
          <span className="stat-value">{stats.streak}</span>
        </div>
        <div className="stat-item">
          <span className="stat-label">{translations.best || 'Best'}</span>
          <span className="stat-value">{stats.maxStreak}</span>
        </div>
        <div className="stat-item">
          <span className="stat-label">{translations.win_percent || 'Win %'}</span>
          <span className="stat-value">{stats.winRate}%</span>
        </div>
      </div>
    </div>
  );
}

```

# Components - UI
*3 file(s)*


## apps\web\src\components\CommunityPanel.tsx
```
import { useState, lazy, Suspense, useEffect, useRef, memo } from 'react';
import { useTranslations } from '@/lib/language';
import FlickWordStats from './games/FlickWordStats';
import TriviaStats from './games/TriviaStats';
import CommunityPlayer from './CommunityPlayer';
import NewPostModal from './NewPostModal';
// âš ï¸ REMOVED: flickerDiagnostics import disabled

// Lazy load game modals
const FlickWordModal = lazy(() => import('./games/FlickWordModal'));
const TriviaModal = lazy(() => import('./games/TriviaModal'));

interface Post {
  id: string;
  slug: string;
  title: string;
  excerpt?: string;
  publishedAt: string;
  author: {
    username?: string;
    name?: string;
    profile?: {
      avatarUrl?: string;
    };
  };
  tags?: Array<{ slug: string; name: string }>;
}

// âš ï¸ FIXED: Memoize component to prevent unnecessary re-renders from parent
const CommunityPanel = memo(function CommunityPanel() {
  // âš ï¸ REMOVED: flickerDiagnostics logging disabled
  
  const translations = useTranslations();
  const [flickWordModalOpen, setFlickWordModalOpen] = useState(false);
  const [triviaModalOpen, setTriviaModalOpen] = useState(false);
  const [newPostModalOpen, setNewPostModalOpen] = useState(false);
  const [posts, setPosts] = useState<Post[]>([]);
  const [postsLoading, setPostsLoading] = useState(true);
  const [postsError, setPostsError] = useState<string | null>(null);
  const fetchingRef = useRef(false);
  const hasFetchedRef = useRef(false);
  const prevPostsRef = useRef<Post[]>([]);
  const prevLoadingRef = useRef(true);
  const prevErrorRef = useRef<string | null>(null);

  // Fetch posts from API
  const fetchPosts = async () => {
    // Prevent multiple simultaneous fetches
    if (fetchingRef.current) {
      return;
    }

    // Determine API URL - use relative URL in dev (goes through Vite proxy) or env var
    // In dev mode, use relative URL to go through Vite proxy to backend
    // In production, use VITE_API_URL or skip if pointing to localhost
    const apiUrl = import.meta.env.DEV 
      ? '' // Relative URL - Vite proxy will forward to backend
      : (import.meta.env.VITE_API_URL || 'http://localhost:4000');
    
    // Skip fetch in production if API URL is localhost (backend not available)
    if (!import.meta.env.DEV && apiUrl.includes('localhost')) {
      setPostsLoading(false);
      setPostsError('Community features require a backend server.');
      setPosts([]);
      hasFetchedRef.current = true;
      return;
    }

    try {
      fetchingRef.current = true;
      setPostsLoading(true);
      setPostsError(null);
      
      const response = await fetch(`${apiUrl}/api/v1/posts?page=1&pageSize=5&sort=newest`);
      
      if (!response.ok) {
        throw new Error(`Failed to fetch posts: ${response.statusText}`);
      }
      
      const data = await response.json();
      const newPosts = data.posts || [];
      // âš ï¸ REMOVED: flickerDiagnostics logging disabled
      prevPostsRef.current = newPosts;
      setPosts(newPosts);
      hasFetchedRef.current = true;
    } catch (error) {
      console.error('[CommunityPanel] Error fetching posts:', error);
      // More user-friendly error message
      const errorMsg = error instanceof TypeError && error.message.includes('fetch')
        ? 'Unable to connect to server. The backend may not be running.'
        : (error instanceof Error ? error.message : 'Failed to load posts');
      
      // âš ï¸ REMOVED: flickerDiagnostics logging disabled
      prevErrorRef.current = errorMsg;
      prevPostsRef.current = [];
      setPostsError(errorMsg);
      setPosts([]);
      hasFetchedRef.current = true; // Mark as fetched even on error to prevent retry loop
    } finally {
      // âš ï¸ REMOVED: flickerDiagnostics logging disabled
      prevLoadingRef.current = false;
      setPostsLoading(false);
      fetchingRef.current = false;
    }
  };

  useEffect(() => {
    // âš ï¸ REMOVED: flickerDiagnostics logging disabled
    // Only fetch once on mount
    if (!hasFetchedRef.current) {
      fetchPosts();
    }
  }, []);

  const handlePostCreated = () => {
    // Refresh posts list after new post is created
    hasFetchedRef.current = false; // Allow refetch after post creation
    fetchPosts();
  };

  // Use global game functions if available
  const openFlickWord = () => {
    if (typeof (window as any).openFlickWordModal === 'function') {
      (window as any).openFlickWordModal();
    } else {
      setFlickWordModalOpen(true);
    }
  };

  const handlePostClick = (slug: string) => {
    window.history.pushState({}, '', `/posts/${slug}`);
    window.dispatchEvent(new Event('pushstate'));
  };

  return (
    <div className="relative">
      <div data-rail="community" className="grid md:grid-cols-3 gap-4 items-stretch">
        {/* Left: Player (spans 1 column) */}
        <div className="md:col-span-1">
          <CommunityPlayer />
        </div>

        {/* Middle: Stacked Games (spans 1 column) */}
        <div className="grid grid-rows-[1fr_1fr] gap-4 h-full">
          {/* FlickWord Game Card */}
          <div 
            className="rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors"
            onClick={openFlickWord}
          >
            <div className="w-full">
              <h3 className="text-sm font-semibold text-neutral-200 mb-2">
                {translations.flickword || 'FlickWord'}
              </h3>
              <p className="text-xs text-neutral-400 mb-3">
                {translations.flickword_tagline || 'Wordle-style daily word play'}
              </p>
            </div>
            
            {/* Stats Display */}
            <div className="mt-auto">
              <FlickWordStats />
            </div>
            
            <div className="mt-3">
              <button 
                className="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded-lg transition-colors"
                onClick={(e) => {
                  e.stopPropagation();
                  openFlickWord();
                }}
              >
                {translations.play_now || 'Play Now'}
              </button>
            </div>
          </div>

          {/* Trivia Game Card */}
          <div
            className="rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors"
            onClick={() => setTriviaModalOpen(true)}
          >
            <div className="w-full">
              <h3 className="text-sm font-semibold text-neutral-200 mb-2">
                {translations.daily_trivia || 'Daily Trivia'}
              </h3>
              <p className="text-xs text-neutral-400 mb-3">
                {translations.daily_trivia_tagline || 'Fresh question, new bragging rights'}
              </p>
            </div>

            {/* Stats Display */}
            <div className="mt-auto mb-3">
              <TriviaStats />
            </div>

            <div className="mt-auto">
              <button
                className="w-full px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs font-semibold rounded-lg transition-colors"
                onClick={(e) => {
                  e.stopPropagation();
                  setTriviaModalOpen(true);
                }}
              >
                {translations.play_now || 'Play Now'}
              </button>
            </div>
          </div>
        </div>

        {/* Right: Recent Posts (spans 1 column) */}
        <div className="rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col">
          <div className="flex items-center justify-between mb-3">
            <h3 className="text-sm font-semibold text-neutral-200">
              {'Recent Posts'}
            </h3>
            <button
              onClick={() => setNewPostModalOpen(true)}
              className="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors"
              style={{
                backgroundColor: 'var(--accent-primary)',
                color: '#fff',
              }}
              aria-label="Create new post"
            >
              Post
            </button>
          </div>
          
          {postsLoading ? (
            <div className="flex-1 flex items-center justify-center">
              <div className="text-xs text-neutral-400">Loading posts...</div>
            </div>
          ) : postsError ? (
            <div className="flex-1 flex items-center justify-center">
              <div className="text-xs text-neutral-400">{postsError}</div>
            </div>
          ) : posts.length === 0 ? (
            <div className="flex-1 flex items-center justify-center">
              <div className="text-xs text-neutral-400">No posts yet</div>
            </div>
          ) : (
            <div className="flex-1 space-y-3 overflow-y-auto">
              {posts.map((post) => {
                const publishDate = post.publishedAt
                  ? new Date(post.publishedAt).toLocaleDateString('en-US', {
                      month: 'short',
                      day: 'numeric',
                    })
                  : null;
                
                return (
                  <div
                    key={post.id}
                    onClick={() => handlePostClick(post.slug)}
                    className="cursor-pointer hover:bg-neutral-800/50 rounded-lg p-2 transition-colors"
                  >
                    <h4 className="text-xs font-semibold text-neutral-200 mb-1 line-clamp-2">
                      {post.title}
                    </h4>
                    {post.excerpt && (
                      <p className="text-xs text-neutral-400 mb-2 line-clamp-2">
                        {post.excerpt}
                      </p>
                    )}
                    <div className="flex items-center gap-2 text-xs text-neutral-500">
                      <span>{post.author?.username || post.author?.name || 'Unknown'}</span>
                      {publishDate && (
                        <>
                          <span>Â·</span>
                          <span>{publishDate}</span>
                        </>
                      )}
                    </div>
                  </div>
                );
              })}
            </div>
          )}
        </div>
      </div>

      {/* FlickWord Modal - Now rendered via Portal */}
      <Suspense fallback={<div className="loading-spinner">Loading FlickWord...</div>}>
        <FlickWordModal
          isOpen={flickWordModalOpen}
          onClose={() => setFlickWordModalOpen(false)}
        />
      </Suspense>

      {/* Trivia Modal - Now rendered via Portal */}
      <Suspense fallback={<div className="loading-spinner">Loading Trivia...</div>}>
        <TriviaModal
          isOpen={triviaModalOpen}
          onClose={() => setTriviaModalOpen(false)}
        />
      </Suspense>

      {/* New Post Modal */}
      <NewPostModal
        isOpen={newPostModalOpen}
        onClose={() => setNewPostModalOpen(false)}
        onPostCreated={handlePostCreated}
      />
    </div>
  );
});

export default CommunityPanel;

```

## apps\web\src\components\HelpModal.tsx
```
import React, { useEffect, useRef } from "react";

interface HelpModalProps {
  isOpen: boolean;
  onClose: () => void;
}

/**
 * Process: Help Modal
 * Purpose: Provides comprehensive help and guidance for all app features
 * Data Source: Static help content
 * Update Path: Manual content updates
 * Dependencies: Accessibility standards, responsive design
 */

export const HelpModal: React.FC<HelpModalProps> = ({ isOpen, onClose }) => {
  const modalRef = useRef<HTMLDivElement>(null);
  const firstFocusableRef = useRef<HTMLButtonElement>(null);
  const [activeSection, setActiveSection] = React.useState("welcome");

  // Focus management
  useEffect(() => {
    if (isOpen && firstFocusableRef.current) {
      firstFocusableRef.current.focus();
    }
  }, [isOpen]);

  // Keyboard navigation
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (!isOpen) return;

      if (e.key === "Escape") {
        onClose();
      }
    };

    document.addEventListener("keydown", handleKeyDown);
    return () => document.removeEventListener("keydown", handleKeyDown);
  }, [isOpen, onClose]);

  // Trap focus within modal
  useEffect(() => {
    if (!isOpen) return;

    const focusableElements = modalRef.current?.querySelectorAll(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    ) as NodeListOf<HTMLElement>;

    const firstElement = focusableElements[0];
    const lastElement = focusableElements[focusableElements.length - 1];

    const handleTabKey = (e: KeyboardEvent) => {
      if (e.key !== "Tab") return;

      if (e.shiftKey) {
        if (document.activeElement === firstElement) {
          lastElement?.focus();
          e.preventDefault();
        }
      } else {
        if (document.activeElement === lastElement) {
          firstElement?.focus();
          e.preventDefault();
        }
      }
    };

    document.addEventListener("keydown", handleTabKey);
    return () => document.removeEventListener("keydown", handleTabKey);
  }, [isOpen]);

  if (!isOpen) return null;

  const sections = [
    { id: "welcome", title: "Welcome to Flicklet", icon: "ðŸ‘‹" },
    { id: "getting-started", title: "Getting Started", icon: "ðŸš€" },
    { id: "managing-library", title: "Managing Your Library", icon: "ðŸ“š" },
    { id: "discovery-search", title: "Discovery & Search", icon: "ðŸ”" },
    { id: "notifications", title: "Notifications", icon: "ðŸ””" },
    {
      id: "settings-customization",
      title: "Settings & Customization",
      icon: "âš™ï¸",
    },
    { id: "pro-features", title: "Pro Features", icon: "â­" },
    { id: "troubleshooting", title: "Troubleshooting", icon: "ðŸ”§" },
    {
      id: "keyboard-shortcuts",
      title: "Keyboard & Gesture Shortcuts",
      icon: "âŒ¨ï¸",
    },
    { id: "accessibility", title: "Accessibility & Support", icon: "â™¿ï¸" },
    { id: "about", title: "About & Version Info", icon: "â„¹ï¸" },
  ];

  const renderContent = () => {
    switch (activeSection) {
      case "welcome":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <p>
              Flicklet helps you <strong>keep track of what you watch</strong>{" "}
              and <strong>discover what to watch next</strong>. You can use it
              on your phone, tablet, or computerâ€”your lists sync automatically
              when you're signed in.
            </p>
            <p>Think of it as a personal entertainment dashboard:</p>
            <ul className="list-disc list-inside space-y-2 ml-4">
              <li>Save what you're watching now</li>
              <li>Build a wishlist of what's next</li>
              <li>Mark what you've finished</li>
              <li>Find new recommendations that fit your taste</li>
            </ul>
          </div>
        );
      case "getting-started":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">Sign In & Setup</h4>
              <ol className="list-decimal list-inside space-y-2 ml-4">
                <li>
                  Open Flicklet and tap <strong>Sign In</strong> in the top
                  corner.
                </li>
                <li>Choose your Google account (required for sync).</li>
                <li>
                  Once signed in, your lists and settings are stored securely in
                  your account.
                </li>
              </ol>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Navigating the App</h4>
              <p className="mb-2">
                Across the bottom (mobile) or top (desktop), you'll see the main
                sections:
              </p>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <strong>Home:</strong> personalized dashboard and
                  recommendations
                </li>
                <li>
                  <strong>Currently Watching:</strong> everything you're mid-way
                  through
                </li>
                <li>
                  <strong>Want to Watch:</strong> your wishlist of shows and
                  movies
                </li>
                <li>
                  <strong>Watched:</strong> what you've completed
                </li>
                <li>
                  <strong>Discovery:</strong> smart suggestions based on your
                  viewing
                </li>
                <li>
                  <strong>My Lists:</strong> any custom lists you've created
                </li>
                <li>
                  <strong>Settings (âš™ï¸):</strong> your preferences, data, and
                  Pro options
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">
                Adding Your First Show or Movie
              </h4>
              <ol className="list-decimal list-inside space-y-2 ml-4">
                <li>
                  Tap the <strong>Search bar</strong> ðŸ” at the top.
                </li>
                <li>Type a title or actor's name.</li>
                <li>
                  Tap the <strong>âž• Add</strong> button on any card to put it
                  in your <em>Want to Watch</em> list.
                </li>
                <li>
                  You can move it to <em>Currently Watching</em> once you start
                  it.
                </li>
              </ol>
            </div>
          </div>
        );
      case "managing-library":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">Your Lists Explained</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <strong>Currently Watching:</strong> active shows and movies
                  you're tracking.
                </li>
                <li>
                  <strong>Want to Watch:</strong> your personal wishlist.
                </li>
                <li>
                  <strong>Watched:</strong> completed items.
                </li>
                <li>
                  <strong>Returning:</strong> shows confirmed for another
                  season.
                </li>
                <li>
                  <strong>My Lists:</strong> fully custom collections (for
                  example, "Holiday Movies" or "Scary Stuff").
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Organizing Content</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>Drag and drop items to reorder within a list (desktop).</li>
                <li>
                  On mobile, swipe <strong>right</strong> to mark as{" "}
                  <em>Watched</em> or <strong>left</strong> to move to another
                  list.
                </li>
                <li>
                  Tap the <strong>â‹¯ (More)</strong> button on any card to see
                  all actions: rate, tag, add notes, view bloopers, etc.
                </li>
                <li>
                  Add notes for your own reminders (e.g., "stopped at episode
                  4").
                </li>
                <li>Use tags to group items ("comedy," "family," "2024").</li>
                <li>Rate items â­ 1-5 to improve your recommendations.</li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Tracking Episodes</h4>
              <p className="mb-2">If you're watching a TV show:</p>
              <ol className="list-decimal list-inside space-y-2 ml-4">
                <li>
                  Tap <strong>Track Episodes</strong> from the overflow menu.
                </li>
                <li>Use the selector to mark what you've seen.</li>
                <li>Flicklet will highlight what's next to watch.</li>
              </ol>
            </div>
          </div>
        );
      case "pro-features":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <p className="mb-3">
                Pro unlocks the full experience. If you're using the free
                version, you'll still have everything you need to track
                showsâ€”Pro simply adds more fun.
              </p>

              <h4 className="font-semibold mb-2">Included with Pro:</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  ðŸŽ¬ <strong>Bloopers & Outtakes:</strong> watch
                  behind-the-scenes clips from verified sources.
                </li>
                <li>
                  â° <strong>Advanced Notifications:</strong> detailed timing
                  control and per-show alerts.
                </li>
                <li>
                  ðŸ§© <strong>Theme Packs:</strong> change how Flicklet looks for
                  holidays or genres.
                </li>
                <li>
                  ðŸ•¹ï¸ <strong>FlickWord & Trivia:</strong> light games built into
                  the app.
                </li>
                <li>
                  ðŸ“º <strong>Extended Episode Tracking:</strong> detailed season
                  progress for multiple shows.
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">How It Works</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Look for the gold <strong>PRO</strong> badge on features that
                  need Pro.
                </li>
                <li>
                  Upgrade in <strong>Settings â†’ Pro</strong>.
                </li>
                <li>You can preview what Pro offers before paying.</li>
              </ul>
            </div>

            <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
              <h4 className="font-semibold mb-2 text-blue-900 dark:text-blue-100">
                Legal & Content Notes
              </h4>
              <p className="text-blue-800 dark:text-blue-200 text-sm">
                All extra videos or bloopers link directly from verified
                providers. Flicklet doesn't re-upload or host any copyrighted
                materialâ€”everything plays from its original source.
              </p>
            </div>
          </div>
        );
      case "discovery-search":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">Finding New Content</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Type anything into the Search barâ€”title, actor, or genre.
                </li>
                <li>
                  Use the filter above the results to limit by{" "}
                  <strong>Movies</strong>, <strong>TV</strong>, or{" "}
                  <strong>People</strong>.
                </li>
                <li>
                  Discovery tab gives you <strong>"For You" rails</strong>
                  â€”personalized picks based on your ratings and history.
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Tips</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Use <strong>tag:</strong> search (like{" "}
                  <code className="bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded text-sm">
                    tag:comedy
                  </code>
                  ) to search your own lists.
                </li>
                <li>
                  Discovery shows only refresh when your tastes changeâ€”rate or
                  tag more items to improve accuracy.
                </li>
              </ul>
            </div>
          </div>
        );
      case "notifications":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">What You Can Get</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <strong>Episode Alerts:</strong> when new episodes air.
                </li>
                <li>
                  <strong>Weekly Discover:</strong> curated picks sent weekly.
                </li>
                <li>
                  <strong>Monthly Stats:</strong> quick snapshot of your viewing
                  totals.
                </li>
                <li>
                  <strong>Custom Reminders:</strong> set alerts ahead of time.
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">How to Manage</h4>
              <ol className="list-decimal list-inside space-y-2 ml-4">
                <li>
                  Go to <strong>Settings â†’ Notifications</strong>.
                </li>
                <li>Toggle each alert on or off.</li>
                <li>
                  Adjust timing for episode reminders (e.g., 1 hour before).
                </li>
                <li>
                  Make sure your browser or device allows notifications from
                  Flicklet.
                </li>
              </ol>
            </div>

            <div>
              <p className="font-semibold mb-2">
                If you stop receiving alerts, check:
              </p>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>Your browser's permission settings.</li>
                <li>You're still signed in.</li>
                <li>You haven't cleared site data or cookies.</li>
              </ul>
            </div>
          </div>
        );
      case "settings-customization":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">
                Personalize Your Experience
              </h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Switch between <strong>Light</strong> and{" "}
                  <strong>Dark</strong> mode.
                </li>
                <li>
                  Change your <strong>display name</strong> (shown in community
                  or Pro features).
                </li>
                <li>
                  Choose your <strong>personality level</strong>â€”controls the
                  humor tone of messages and empty states.
                </li>
                <li>
                  Pick your favorite genres to shape <em>For You</em>{" "}
                  recommendations.
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Layout Options</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Toggle <strong>Condensed View</strong> for tighter spacing.
                </li>
                <li>Choose which sections appear on your Home screen.</li>
                <li>
                  Enable or disable <strong>Episode Tracking</strong> here too.
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Data Management</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <strong>Export Backup:</strong> download a JSON copy of your
                  data.
                </li>
                <li>
                  <strong>Import Backup:</strong> restore from a saved file.
                </li>
                <li>
                  <strong>Share With Friends:</strong> generate a shareable
                  summary of your lists.
                </li>
                <li>
                  <strong>Reset All Data:</strong> wipes everything back to
                  defaults (careful).
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Privacy & Sync</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  Flicklet only stores minimal data (lists, ratings, notes).
                </li>
                <li>
                  All media data (titles, images) comes from official TMDB
                  sources.
                </li>
                <li>
                  Your info syncs through your Google sign-in onlyâ€”no external
                  tracking.
                </li>
              </ul>
            </div>
          </div>
        );
      case "troubleshooting":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-3">Common Fixes</h4>
              <div className="overflow-x-auto">
                <table className="min-w-full border-collapse border border-gray-300 dark:border-gray-600">
                  <thead>
                    <tr className="bg-gray-100 dark:bg-gray-700">
                      <th className="border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold">
                        Problem
                      </th>
                      <th className="border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold">
                        Try This
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        App not loading
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Refresh the page or check your internet connection
                      </td>
                    </tr>
                    <tr className="bg-gray-50 dark:bg-gray-800">
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Search gives no results
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Try different spelling or switch between Movies/TV
                      </td>
                    </tr>
                    <tr>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Notifications stopped
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Check browser permissions and sign-in status
                      </td>
                    </tr>
                    <tr className="bg-gray-50 dark:bg-gray-800">
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Lists look empty
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Make sure you're logged in; local storage may have
                        cleared
                      </td>
                    </tr>
                    <tr>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Can't sign in on mobile
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Clear browser cache, reopen app, and retry login
                      </td>
                    </tr>
                    <tr className="bg-gray-50 dark:bg-gray-800">
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Bloopers/Extras not playing
                      </td>
                      <td className="border border-gray-300 dark:border-gray-600 px-4 py-2">
                        Some videos open externally if embedding is blocked
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
              <h4 className="font-semibold mb-2 text-blue-900 dark:text-blue-100">
                Still Stuck?
              </h4>
              <p className="text-blue-800 dark:text-blue-200 text-sm mb-2">
                Open <strong>Settings â†’ Feedback</strong>. Include:
              </p>
              <ul className="list-disc list-inside space-y-1 ml-4 text-sm text-blue-800 dark:text-blue-200">
                <li>What you were doing</li>
                <li>What you expected</li>
                <li>What happened instead</li>
                <li>Your browser and device</li>
              </ul>
              <p className="text-blue-800 dark:text-blue-200 text-sm mt-2">
                This helps us fix it faster.
              </p>
            </div>
          </div>
        );
      case "keyboard-shortcuts":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <div>
              <h4 className="font-semibold mb-2">Keyboard (Desktop)</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <kbd className="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm">
                    Esc
                  </kbd>{" "}
                  close modals or exit search
                </li>
                <li>
                  <kbd className="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm">
                    Tab
                  </kbd>{" "}
                  move between fields or buttons
                </li>
                <li>
                  <kbd className="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm">
                    Enter
                  </kbd>{" "}
                  activate selected button
                </li>
                <li>
                  <kbd className="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm">
                    /
                  </kbd>{" "}
                  jump to search
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-semibold mb-2">Touch (Mobile)</h4>
              <ul className="list-disc list-inside space-y-2 ml-4">
                <li>
                  <strong>Swipe right:</strong> mark as Watched
                </li>
                <li>
                  <strong>Swipe left:</strong> move to another list
                </li>
                <li>
                  <strong>Pull down:</strong> refresh content
                </li>
                <li>
                  <strong>Tap and hold:</strong> reorder (on supported lists)
                </li>
              </ul>
            </div>
          </div>
        );
      case "accessibility":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <ul className="list-disc list-inside space-y-2 ml-4">
              <li>Fully navigable by keyboard</li>
              <li>Screen reader friendly structure</li>
              <li>Focus trapping ensures you don't lose cursor position</li>
              <li>ARIA roles and labels implemented in all modals</li>
              <li>Contrast and font-size compliant with WCAG guidelines</li>
            </ul>
            <div className="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-4">
              <p className="text-blue-800 dark:text-blue-200 text-sm">
                For help with accessibility or other feedback, contact support
                via the Feedback form in Settings.
              </p>
            </div>
          </div>
        );
      case "about":
        return (
          <div className="space-y-4 text-gray-700 dark:text-gray-300">
            <ul className="list-disc list-inside space-y-2 ml-4">
              <li>
                <strong>App Version:</strong> Flicklet v2
              </li>
              <li>
                <strong>Last Updated:</strong> shown at the bottom of the Help
                modal
              </li>
              <li>
                <strong>Component:</strong>{" "}
                <code className="bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded text-sm">
                  apps/web/src/components/HelpModal.tsx
                </code>
              </li>
              <li>
                <strong>Feature Flags:</strong> Help content is staticâ€”visible
                to everyone.
              </li>
            </ul>
          </div>
        );
      default:
        return null;
    }
  };

  if (!isOpen) return null;

  return (
    <>
      <div
        className="fixed inset-0 z-overlay bg-black bg-opacity-50"
        onClick={onClose}
        aria-hidden="true"
      />
      <div className="fixed inset-0 z-modal flex items-center justify-center p-4">
        <div
          ref={modalRef}
          className="bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-xl"
          role="dialog"
          aria-modal="true"
          aria-labelledby="help-modal-title"
          aria-describedby="help-modal-description"
        >
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
            <h2
              id="help-modal-title"
              className="text-2xl font-bold text-gray-900 dark:text-white"
            >
              Help & Support
            </h2>
            <button
              ref={firstFocusableRef}
              onClick={onClose}
              className="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl font-bold p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
              aria-label="Close help modal"
            >
              Ã—
            </button>
          </div>

          {/* Two-column layout */}
          <div className="flex h-[calc(90vh-120px)]">
            {/* Left sidebar - Navigation */}
            <div className="w-64 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto">
              <nav className="p-4 space-y-2">
                {sections.map((section) => (
                  <button
                    key={section.id}
                    onClick={() => setActiveSection(section.id)}
                    className={`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${
                      activeSection === section.id
                        ? "bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100"
                        : "text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
                    }`}
                  >
                    <span className="mr-2">{section.icon}</span>
                    {section.title}
                  </button>
                ))}
              </nav>
            </div>

            {/* Right content area */}
            <div className="flex-1 overflow-y-auto">
              <div className="p-6">
                <div className="mb-6">
                  <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                    <span className="text-2xl mr-3">
                      {sections.find((s) => s.id === activeSection)?.icon}
                    </span>
                    {sections.find((s) => s.id === activeSection)?.title}
                  </h3>
                </div>
                <div id="help-modal-description">{renderContent()}</div>
              </div>
            </div>
          </div>

          {/* Footer */}
          <div className="flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900">
            <div className="text-sm text-gray-500 dark:text-gray-400">
              Flicklet v2 â€¢ Last updated: {new Date().toLocaleDateString()}
            </div>
            <button
              onClick={onClose}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              Got it!
            </button>
          </div>
        </div>
      </div>
    </>
  );
};

```

## apps\web\src\components\SettingsPage.tsx
```
import { useState, useEffect, lazy, Suspense } from 'react';
import { useSettings, settingsManager, PersonalityLevel, getPersonalityText } from '../lib/settings';
import { useTranslations, useLanguage, changeLanguage } from '../lib/language';
import { useCustomLists, customListManager } from '../lib/customLists';
import { useUsername } from '../hooks/useUsername';
import { useLibrary, Library } from '../lib/storage';
import type { MediaItem } from '../components/cards/card.types';
import type { ListName } from '../state/library.types';
import { lockScroll, unlockScroll } from '../utils/scrollLock';
import PersonalityExamples from './PersonalityExamples';
import ForYouGenreConfig from './ForYouGenreConfig';
import NotInterestedModal from './modals/NotInterestedModal';
import type { Language } from '../lib/language.types';

// Lazy load heavy notification modals
const NotificationSettings = lazy(() => import('./modals/NotificationSettings').then(m => ({ default: m.NotificationSettings })));
const NotificationCenter = lazy(() => import('./modals/NotificationCenter').then(m => ({ default: m.NotificationCenter })));
const AdminExtrasPage = lazy(() => import('../pages/AdminExtrasPage'));

type SettingsTab = 'general' | 'notifications' | 'layout' | 'data' | 'pro' | 'about' | 'social' | 'community' | 'admin';

export default function SettingsPage({ onClose }: { onClose: () => void }) {
  const [activeTab, setActiveTab] = useState<SettingsTab>('general');
  const [showSharingModal, setShowSharingModal] = useState(false);
  const [showNotInterestedModal, setShowNotInterestedModal] = useState(false);
  const [showNotificationSettings, setShowNotificationSettings] = useState(false);
  const [showNotificationCenter, setShowNotificationCenter] = useState(false);
  const settings = useSettings();
  const translations = useTranslations();
  const currentLanguage = useLanguage();

  // Lock scroll when settings modal is open
  useEffect(() => {
    lockScroll();
    return () => {
      unlockScroll();
    };
  }, []);

  const tabs = [
    { id: 'general' as const, label: translations.general },
    { id: 'notifications' as const, label: translations.notifications },
    { id: 'layout' as const, label: translations.layout },
    { id: 'data' as const, label: translations.data },
    { id: 'social' as const, label: 'ðŸ‘¥ Social' },
    { id: 'community' as const, label: 'ðŸ† Community' },
    { id: 'pro' as const, label: translations.pro },
    { id: 'admin' as const, label: 'âš™ï¸ Admin' },
    { id: 'about' as const, label: translations.about },
  ];

  return (
    <div className="fixed inset-0 z-modal backdrop-blur-sm flex items-start justify-center pt-24 p-4" style={{ backgroundColor: 'rgba(0,0,0,0.8)' }}>
      <div className="rounded-xl w-full max-w-4xl h-[80vh] flex overflow-hidden" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
        {/* Left sidebar - Tabs */}
        <div className="w-48 p-4" style={{ backgroundColor: 'var(--btn)', borderRightColor: 'var(--line)', borderRight: '1px solid' }}>
          <div className="flex items-center justify-between mb-6">
            <h2 className="text-lg font-semibold" style={{ color: 'var(--text)' }}>{translations.settings}</h2>
            <button
              onClick={onClose}
              className="transition-colors"
              style={{ color: 'var(--muted)' }}
              onMouseEnter={(e) => e.currentTarget.style.color = 'var(--text)'}
              onMouseLeave={(e) => e.currentTarget.style.color = 'var(--muted)'}
              aria-label="Close Settings"
            >
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          
          <nav className="space-y-1">
            {tabs.map(tab => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors"
                style={{
                  backgroundColor: activeTab === tab.id ? 'var(--card)' : 'transparent',
                  color: activeTab === tab.id ? 'var(--text)' : 'var(--muted)'
                }}
                onMouseEnter={(e) => {
                  if (activeTab !== tab.id) {
                    e.currentTarget.style.backgroundColor = 'var(--card)';
                    e.currentTarget.style.opacity = '0.5';
                  }
                }}
                onMouseLeave={(e) => {
                  if (activeTab !== tab.id) {
                    e.currentTarget.style.backgroundColor = 'transparent';
                    e.currentTarget.style.opacity = '1';
                  }
                }}
              >
                {tab.label}
              </button>
            ))}
          </nav>
        </div>

                {/* Right content area */}
                <div className="flex-1 p-6 overflow-y-auto">
                  {activeTab === 'general' && <GeneralTab settings={settings} translations={translations} currentLanguage={currentLanguage} onShowNotInterestedModal={() => setShowNotInterestedModal(true)} />}
                  {activeTab === 'notifications' && <NotificationsTab 
                    onOpenSettings={() => setShowNotificationSettings(true)}
                    onOpenCenter={() => setShowNotificationCenter(true)}
                  />}
                  {activeTab === 'layout' && <LayoutTab settings={settings} />}
                  {activeTab === 'data' && <DataTab setShowSharingModal={setShowSharingModal} />}
                  {activeTab === 'social' && <SocialTab />}
                  {activeTab === 'community' && <CommunityTab />}
                  {activeTab === 'pro' && <ProTab />}
                  {activeTab === 'admin' && (
                    <Suspense fallback={<div className="loading-spinner">Loading admin...</div>}>
                      <AdminExtrasPage />
                    </Suspense>
                  )}
                  {activeTab === 'about' && <AboutTab />}
                </div>
      </div>
      
      {/* Sharing Modal */}
      {showSharingModal && (
        <SharingModal onClose={() => setShowSharingModal(false)} />
      )}
      
      {/* Not Interested Modal */}
      <NotInterestedModal 
        isOpen={showNotInterestedModal} 
        onClose={() => setShowNotInterestedModal(false)} 
      />
      
      {/* Notification Settings Modal */}
      {showNotificationSettings && (
        <Suspense fallback={<div className="loading-spinner">Loading notification settings...</div>}>
          <NotificationSettings isOpen={showNotificationSettings} onClose={() => setShowNotificationSettings(false)} />
        </Suspense>
      )}
      
      {/* Notification Center Modal */}
      {showNotificationCenter && (
        <Suspense fallback={<div className="loading-spinner">Loading notification center...</div>}>
          <NotificationCenter isOpen={showNotificationCenter} onClose={() => setShowNotificationCenter(false)} />
        </Suspense>
      )}
    </div>
  );
}

// General Tab Component
function GeneralTab({ settings, translations, currentLanguage, onShowNotInterestedModal }: { settings: any; translations: any; currentLanguage: Language; onShowNotInterestedModal: () => void }) {
  // Get reactive library data for stats
  const watchingItems = useLibrary('watching');
  const wishlistItems = useLibrary('wishlist');
  const watchedItems = useLibrary('watched');
  const notItems = useLibrary('not');

  // Calculate stats by media type
  const tvStats = {
    watching: watchingItems.filter(item => item.mediaType === 'tv').length,
    wishlist: wishlistItems.filter(item => item.mediaType === 'tv').length,
    watched: watchedItems.filter(item => item.mediaType === 'tv').length,
    not: notItems.filter(item => item.mediaType === 'tv').length
  };

  const movieStats = {
    watching: watchingItems.filter(item => item.mediaType === 'movie').length,
    wishlist: wishlistItems.filter(item => item.mediaType === 'movie').length,
    watched: watchedItems.filter(item => item.mediaType === 'movie').length,
    not: notItems.filter(item => item.mediaType === 'movie').length
  };
  const { username, updateUsername } = useUsername();
  const [displayName, setDisplayName] = useState(username);
  const [showWarning, setShowWarning] = useState(false);

  // Update local state when username changes
  useEffect(() => {
    setDisplayName(username);
  }, [username]);

  const handleDisplayNameChange = (newName: string) => {
    setDisplayName(newName);
    if (newName !== username) {
      setShowWarning(true);
    } else {
      setShowWarning(false);
    }
  };

  const saveDisplayName = async () => {
    if (showWarning) {
      const confirmed = window.confirm('Are you sure you want to change your username? This will update your profile.');
      if (confirmed) {
        try {
          await updateUsername(displayName);
          setShowWarning(false);
        } catch (error) {
          console.error('Failed to update username:', error);
          alert('Failed to update username. Please try again.');
        }
      }
    }
  };

  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold" style={{ color: 'var(--text)' }}>{translations.general}</h3>
      
      {/* Language Selection */}
      <div>
        <label className="block text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>
          {translations.language} / Idioma
        </label>
        <div className="space-y-2">
          {[
            { lang: 'en' as Language, label: translations.english, flag: 'ðŸ‡ºðŸ‡¸' },
            { lang: 'es' as Language, label: translations.spanish, flag: 'ðŸ‡ªðŸ‡¸' },
          ].map(({ lang, label, flag }) => (
            <label key={lang} className="flex items-center space-x-3 cursor-pointer">
              <input
                type="radio"
                name="language"
                value={lang}
                checked={currentLanguage === lang}
                onChange={() => changeLanguage(lang)}
                className="w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"
              />
              <div>
                <div className="font-medium" style={{ color: 'var(--text)' }}>
                  {flag} {label}
                </div>
              </div>
            </label>
          ))}
        </div>
      </div>
      
      {/* Display Name */}
      <div>
        <label className="block text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>
          {translations.username}
        </label>
        <div className="flex gap-2">
          <input
            type="text"
            value={displayName}
            onChange={(e) => handleDisplayNameChange(e.target.value)}
            className="flex-1 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            style={{ 
              backgroundColor: 'var(--card)', 
              borderColor: 'var(--line)', 
              color: 'var(--text)',
              border: '1px solid'
            }}
            placeholder={translations.username}
          />
          {showWarning && (
            <button
              onClick={saveDisplayName}
              className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors"
            >
              {translations.save}
            </button>
          )}
        </div>
        {showWarning && (
          <p className="mt-1 text-sm text-yellow-400">
            âš ï¸ Changing your display name will update your profile
          </p>
        )}
      </div>

      {/* My Statistics */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>My Statistics</h4>
        <div className="grid grid-cols-2 gap-4">
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)' }}>
            <h5 className="text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>TV Shows</h5>
            <div className="space-y-1 text-sm" style={{ color: 'var(--muted)' }}>
              <div>Currently Watching: {tvStats.watching}</div>
              <div>Want to Watch: {tvStats.wishlist}</div>
              <div>Watched: {tvStats.watched}</div>
              <div>Not Interested: {tvStats.not}</div>
            </div>
          </div>
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)' }}>
            <h5 className="text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>Movies</h5>
            <div className="space-y-1 text-sm" style={{ color: 'var(--muted)' }}>
              <div>Currently Watching: {movieStats.watching}</div>
              <div>Want to Watch: {movieStats.wishlist}</div>
              <div>Watched: {movieStats.watched}</div>
              <div>Not Interested: {movieStats.not}</div>
            </div>
          </div>
        </div>
      </div>

      {/* Not Interested Management */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>Not Interested Management</h4>
        <button 
          className="px-4 py-2 rounded-lg transition-colors"
          style={{ backgroundColor: 'var(--btn)', color: 'var(--text)' }}
          onClick={onShowNotInterestedModal}
        >
          Manage Not Interested List
        </button>
      </div>

      {/* Personality Level */}
      <div>
        <label className="block text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>
          {translations.personalityLevel}
        </label>
        <div className="space-y-2">
          {[
            { level: 1 as PersonalityLevel, label: translations.regular, description: translations.friendlyAndHelpful },
            { level: 2 as PersonalityLevel, label: translations.semiSarcastic, description: translations.aBitCheeky },
            { level: 3 as PersonalityLevel, label: translations.severelySarcastic, description: translations.maximumSass },
          ].map(({ level, label, description }) => (
            <label key={level} className="flex items-center space-x-3 cursor-pointer">
              <input
                type="radio"
                name="personality"
                value={level}
                checked={settings.personalityLevel === level}
                onChange={() => settingsManager.updatePersonalityLevel(level)}
                className="w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"
              />
              <div>
                <div className="font-medium" style={{ color: 'var(--text)' }}>{label}</div>
                <div className="text-sm" style={{ color: 'var(--muted)' }}>{description}</div>
              </div>
            </label>
          ))}
        </div>
        <div className="mt-2 p-3 rounded-lg" style={{ backgroundColor: 'var(--card)' }}>
          <p className="text-sm" style={{ color: 'var(--text)' }}>
            {translations.preview}: {getPersonalityText('welcome', settings.personalityLevel)}
          </p>
        </div>
        
        {/* Personality Examples */}
        <div className="mt-4">
          <PersonalityExamples personalityLevel={settings.personalityLevel} />
        </div>
      </div>

      {/* Reset to Defaults */}
      <div>
        <button
          onClick={() => {
            if (window.confirm('Are you sure you want to reset all settings to defaults?')) {
              settingsManager.resetToDefaults();
            }
          }}
          className="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"
        >
          Reset System to Defaults
        </button>
      </div>
    </div>
  );
}

// Placeholder tabs
// Notifications Tab Component
function NotificationsTab({ onOpenSettings, onOpenCenter }: { onOpenSettings: () => void; onOpenCenter: () => void }) {
  const settings = useSettings();
  
  // Check if user is Pro (simplified check)
  const isProUser = settings.pro || false;

  return (
    <div className="space-y-6">
      <div>
        <h3 className="text-xl font-semibold mb-2" style={{ color: 'var(--text)' }}>ðŸ”” Notifications</h3>
        <p className="text-sm" style={{ color: 'var(--muted)' }}>
          Manage your notification preferences and view notification history.
        </p>
      </div>

      {/* Quick Actions */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <button
          onClick={onOpenSettings}
          className="p-4 rounded-lg border transition-colors hover:opacity-80"
          style={{ 
            backgroundColor: 'var(--card)', 
            borderColor: 'var(--line)', 
            color: 'var(--text)' 
          }}
        >
          <div className="flex items-center space-x-3">
            <div className="text-2xl">âš™ï¸</div>
            <div className="text-left">
              <div className="font-medium">Notification Settings</div>
              <div className="text-sm" style={{ color: 'var(--muted)' }}>
                Configure timing and methods
              </div>
            </div>
          </div>
        </button>

        <button
          onClick={onOpenCenter}
          className="p-4 rounded-lg border transition-colors hover:opacity-80"
          style={{ 
            backgroundColor: 'var(--card)', 
            borderColor: 'var(--line)', 
            color: 'var(--text)' 
          }}
        >
          <div className="flex items-center space-x-3">
            <div className="text-2xl">ðŸ“‹</div>
            <div className="text-left">
              <div className="font-medium">Notification Center</div>
              <div className="text-sm" style={{ color: 'var(--muted)' }}>
                View notification history
              </div>
            </div>
          </div>
        </button>
      </div>

      {/* Current Settings Summary */}
      <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>Current Settings</h4>
        <div className="space-y-2 text-sm">
          <div className="flex justify-between">
            <span style={{ color: 'var(--muted)' }}>Episode Reminders:</span>
            <span style={{ color: 'var(--text)' }}>Enabled</span>
          </div>
          <div className="flex justify-between">
            <span style={{ color: 'var(--muted)' }}>Timing:</span>
            <span style={{ color: 'var(--text)' }}>
              {isProUser ? 'Custom (Pro)' : '24 hours before'}
            </span>
          </div>
          <div className="flex justify-between">
            <span style={{ color: 'var(--muted)' }}>Methods:</span>
            <span style={{ color: 'var(--text)' }}>
              In-app, Push{isProUser ? ', Email' : ''}
            </span>
          </div>
        </div>
      </div>

      {/* Pro Features Banner */}
      {!isProUser && (
        <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--accent)' }}>
          <div className="flex items-center gap-3">
            <div className="text-2xl">ðŸ’Ž</div>
            <div className="flex-1">
              <h4 className="font-semibold">Upgrade to Pro</h4>
              <p className="text-sm" style={{ color: 'var(--muted)' }}>
                Get precise timing control, email notifications, and advanced features
              </p>
            </div>
            <span className="px-3 py-1 text-sm font-semibold rounded-full" 
                  style={{ backgroundColor: 'var(--accent)', color: 'white' }}>
              PRO
            </span>
          </div>
        </div>
      )}
    </div>
  );
}

function LayoutTab({ settings }: { settings: any }) {
  const translations = useTranslations();
  const userLists = useCustomLists();
  const [editingListId, setEditingListId] = useState<string | null>(null);
  const [editName, setEditName] = useState('');
  const [editDescription, setEditDescription] = useState('');

  const handleCreateList = () => {
    const name = prompt(translations.enterListName || 'Enter list name:');
    if (!name?.trim()) return;

    try {
      customListManager.createList(name.trim());
    } catch (error) {
      alert(error instanceof Error ? error.message : 'Failed to create list');
    }
  };

  const handleEditList = (listId: string) => {
    const list = customListManager.getListById(listId);
    if (!list) return;

    setEditingListId(listId);
    setEditName(list.name);
    setEditDescription(list.description || '');
  };

  const handleSaveEdit = () => {
    if (!editingListId || !editName.trim()) return;

    try {
      customListManager.updateList(editingListId, {
        name: editName.trim(),
        description: editDescription.trim() || undefined,
      });
      setEditingListId(null);
      setEditName('');
      setEditDescription('');
    } catch (error) {
      alert(error instanceof Error ? error.message : 'Failed to update list');
    }
  };

  const handleCancelEdit = () => {
    setEditingListId(null);
    setEditName('');
    setEditDescription('');
  };

  const handleDeleteList = (listId: string) => {
    const list = customListManager.getListById(listId);
    if (!list) return;

    const confirmed = window.confirm(
      `${translations.confirmDeleteList || 'Are you sure you want to delete'} "${list.name}"? ${translations.thisActionCannotBeUndone || 'This action cannot be undone.'}`
    );
    
    if (confirmed) {
      try {
        customListManager.deleteList(listId);
      } catch (error) {
        alert(error instanceof Error ? error.message : 'Failed to delete list');
      }
    }
  };

  const handleSetDefault = (listId: string) => {
    try {
      customListManager.setSelectedList(listId);
    } catch (error) {
      alert(error instanceof Error ? error.message : 'Failed to set default list');
    }
  };

  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold" style={{ color: 'var(--text)' }}>{translations.layout}</h3>
      
      {/* Theme Preference */}
      <div>
        <label className="block text-sm font-medium mb-2" style={{ color: 'var(--text)' }}>
          {translations.themePreference}
        </label>
        <div className="space-y-2">
          {[
            { theme: 'dark' as const, label: translations.dark, description: translations.darkThemeDescription },
            { theme: 'light' as const, label: translations.light, description: translations.lightThemeDescription },
          ].map(({ theme, label, description }) => (
            <label key={theme} className="flex items-center space-x-3 cursor-pointer">
              <input
                type="radio"
                name="theme"
                value={theme}
                checked={settings.layout.theme === theme}
                onChange={() => settingsManager.updateTheme(theme)}
                className="w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"
              />
              <div>
                <div className="font-medium" style={{ color: 'var(--text)' }}>{label}</div>
                <div className="text-sm" style={{ color: 'var(--muted)' }}>{description}</div>
              </div>
            </label>
          ))}
        </div>
      </div>

      {/* My Lists Management */}
      <div>
        <div className="flex items-center justify-between mb-3">
          <h4 className="text-lg font-medium" style={{ color: 'var(--text)' }}>
            {translations.myLists || 'My Lists'}
          </h4>
          {userLists.customLists.length < userLists.maxLists && (
            <button
              onClick={handleCreateList}
              className="px-3 py-1.5 rounded-lg text-sm transition-colors"
              style={{ backgroundColor: 'var(--accent)', color: 'white' }}
            >
              {translations.createNewList || 'Create New List'}
            </button>
          )}
        </div>

        <div className="space-y-3">
          {userLists.customLists.map(list => (
            <div
              key={list.id}
              className="p-4 rounded-lg"
              style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}
            >
              {editingListId === list.id ? (
                <div className="space-y-3">
                  <input
                    type="text"
                    value={editName}
                    onChange={(e) => setEditName(e.target.value)}
                    className="w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    style={{ 
                      backgroundColor: 'var(--btn)', 
                      borderColor: 'var(--line)', 
                      color: 'var(--text)',
                      border: '1px solid'
                    }}
                    placeholder={translations.listName || 'List name'}
                  />
                  <input
                    type="text"
                    value={editDescription}
                    onChange={(e) => setEditDescription(e.target.value)}
                    className="w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    style={{ 
                      backgroundColor: 'var(--btn)', 
                      borderColor: 'var(--line)', 
                      color: 'var(--text)',
                      border: '1px solid'
                    }}
                    placeholder={translations.listDescription || 'List description (optional)'}
                  />
                  <div className="flex gap-2">
                    <button
                      onClick={handleSaveEdit}
                      className="px-3 py-1.5 rounded-lg text-sm transition-colors"
                      style={{ backgroundColor: 'var(--accent)', color: 'white' }}
                    >
                      {translations.save || 'Save'}
                    </button>
                    <button
                      onClick={handleCancelEdit}
                      className="px-3 py-1.5 rounded-lg text-sm transition-colors"
                      style={{ backgroundColor: 'var(--btn)', color: 'var(--text)', borderColor: 'var(--line)', border: '1px solid' }}
                    >
                      {translations.cancel || 'Cancel'}
                    </button>
                  </div>
                </div>
              ) : (
                <div className="flex items-center justify-between">
                  <div className="flex-1">
                    <div className="flex items-center gap-2">
                      <h5 className="font-medium" style={{ color: 'var(--text)' }}>{list.name}</h5>
                      {list.isDefault && (
                        <span className="px-2 py-0.5 rounded text-xs" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>
                          {translations.default || 'Default'}
                        </span>
                      )}
                    </div>
                    {list.description && (
                      <p className="text-sm mt-1" style={{ color: 'var(--muted)' }}>{list.description}</p>
                    )}
                    <p className="text-xs mt-1" style={{ color: 'var(--muted)' }}>
                      {list.itemCount} {translations.items || 'items'}
                    </p>
                  </div>
                  <div className="flex gap-1">
                    <button
                      onClick={() => handleEditList(list.id)}
                      className="px-2 py-1 rounded text-xs transition-colors"
                      style={{ backgroundColor: 'var(--btn)', color: 'var(--text)' }}
                      title={translations.edit || 'Edit'}
                    >
                      âœï¸
                    </button>
                    {!list.isDefault && (
                      <button
                        onClick={() => handleSetDefault(list.id)}
                        className="px-2 py-1 rounded text-xs transition-colors"
                        style={{ backgroundColor: 'var(--btn)', color: 'var(--text)' }}
                        title={translations.setAsDefault || 'Set as Default'}
                      >
                        â­
                      </button>
                    )}
                    <button
                      onClick={() => handleDeleteList(list.id)}
                      className="px-2 py-1 rounded text-xs transition-colors"
                      style={{ backgroundColor: 'var(--btn)', color: 'var(--text)' }}
                      title={translations.delete || 'Delete'}
                    >
                      ðŸ—‘ï¸
                    </button>
                  </div>
                </div>
              )}
            </div>
          ))}

          {userLists.customLists.length === 0 && (
            <div className="text-center py-8">
              <p className="text-sm mb-4" style={{ color: 'var(--muted)' }}>
                {translations.noListsCreated || 'No lists created yet'}
              </p>
              <button
                onClick={handleCreateList}
                className="px-4 py-2 rounded-lg transition-colors"
                style={{ backgroundColor: 'var(--accent)', color: 'white' }}
              >
                {translations.createYourFirstList || 'Create Your First List'}
              </button>
            </div>
          )}
        </div>

        <div className="mt-3 text-xs" style={{ color: 'var(--muted)' }}>
          {translations.listsUsed || 'Lists used'}: {userLists.customLists.length}/{userLists.maxLists}
        </div>
      </div>

      {/* Other Layout Settings */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>{translations.basicCustomization}</h4>
        <div className="space-y-3">
          <div className="space-y-1">
            <label className="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                checked={settings.layout.condensedView}
                onChange={(e) => settingsManager.updateSettings({
                  layout: { ...settings.layout, condensedView: e.target.checked }
                })}
                className="w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"
              />
              <span style={{ color: 'var(--text)' }}>{translations.condensedView}</span>
            </label>
            <p className="text-xs ml-7" style={{ color: 'var(--muted)' }}>
              Show more items per screen with smaller cards and shorter button labels. Hides episode tracking and detailed features.
            </p>
          </div>
          
          <div className="space-y-1">
            <label className={`flex items-center space-x-3 ${settings.layout.condensedView ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'}`}>
              <input
                type="checkbox"
                checked={settings.layout.episodeTracking}
                onChange={() => settingsManager.toggleEpisodeTracking()}
                disabled={settings.layout.condensedView}
                className="w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"
              />
              <span style={{ color: 'var(--text)' }}>{translations.enableEpisodeTracking}</span>
            </label>
            {settings.layout.condensedView && (
              <p className="text-xs ml-7" style={{ color: 'var(--muted)' }}>
                Episode tracking is disabled in condensed view
              </p>
            )}
          </div>
        </div>
      </div>

      {/* For You Section Configuration */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>
          For You Section Configuration
        </h4>
        <p className="text-sm mb-4" style={{ color: 'var(--muted)' }}>
          Customize the three "For You" rows on your home page. Each row combines a main genre with a subgenre for personalized recommendations.
        </p>
        
        <ForYouGenreConfig />
      </div>

      {/* Pro Features */}
      {settings.pro.isPro && (
        <div>
          <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>{translations.proFeatures}</h4>
          <p style={{ color: 'var(--muted)' }}>{translations.themePacksComingSoon}</p>
        </div>
      )}
    </div>
  );
}

function DataTab({ setShowSharingModal }: { setShowSharingModal: (show: boolean) => void }) {
  const translations = useTranslations();
  
  const handleBackup = async () => {
    try {
      // Get Library data from the actual storage system
      const libraryData = JSON.parse(localStorage.getItem('flicklet.library.v2') || '{}');
      
      // Convert from flat object format to grouped watchlists format
      const watchlists = {
        movies: {
          watching: [] as MediaItem[],
          wishlist: [] as MediaItem[],
          watched: [] as MediaItem[]
        },
        tv: {
          watching: [] as MediaItem[],
          wishlist: [] as MediaItem[],
          watched: [] as MediaItem[]
        },
        customLists: [] as any[],
        customItems: {} as Record<string, MediaItem[]>
      };

      // Group library items by media type and list
      Object.values(libraryData).forEach((item: any) => {
        const mediaItem: MediaItem = {
          id: item.id,
          mediaType: item.mediaType,
          title: item.title || 'Untitled',
          year: item.year,
          posterUrl: item.posterUrl,
          voteAverage: item.voteAverage,
          userRating: item.userRating,
          runtimeMins: item.runtimeMins,
          synopsis: item.synopsis,
          nextAirDate: item.nextAirDate,
          showStatus: item.showStatus,
          lastAirDate: item.lastAirDate,
          userNotes: item.userNotes,
          tags: item.tags,
          networks: item.networks,
          productionCompanies: item.productionCompanies
        };

        if (item.list?.startsWith('custom:')) {
          // Custom list items
          const customListId = item.list.replace('custom:', '');
          if (!watchlists.customItems[customListId]) {
            watchlists.customItems[customListId] = [];
          }
          watchlists.customItems[customListId].push(mediaItem);
        } else if (item.list && ['watching', 'wishlist', 'watched'].includes(item.list)) {
          // Standard lists
          if (item.mediaType === 'movie' && watchlists.movies[item.list as keyof typeof watchlists.movies]) {
            (watchlists.movies[item.list as keyof typeof watchlists.movies] as MediaItem[]).push(mediaItem);
          } else if (item.mediaType === 'tv' && watchlists.tv[item.list as keyof typeof watchlists.tv]) {
            (watchlists.tv[item.list as keyof typeof watchlists.tv] as MediaItem[]).push(mediaItem);
          }
        }
      });

      // Get custom list definitions
      const customListsData = localStorage.getItem('flicklet.customLists.v2');
      if (customListsData) {
        try {
          const customLists = JSON.parse(customListsData);
          watchlists.customLists = customLists.customLists || [];
        } catch (error) {
          console.warn('Failed to parse custom lists:', error);
        }
      }

      // Get settings and user data
      const settings = JSON.parse(localStorage.getItem('flicklet-settings') || '{}');
      const user = JSON.parse(localStorage.getItem('flicklet-user') || '{}');

      const userData = {
        watchlists,
        settings,
        user,
        timestamp: new Date().toISOString(),
        version: '2.0' // Updated version to indicate new format
      };

      // Create downloadable file
      const dataStr = JSON.stringify(userData, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = `flicklet-backup-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
      
      alert('âœ… Backup downloaded successfully!');
    } catch (error) {
      console.error('Backup failed:', error);
      alert('âŒ Backup failed. Please try again.');
    }
  };

  const handleRestore = () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.json';
    input.onchange = async (e) => {
      const file = (e.target as HTMLInputElement).files?.[0];
      if (!file) return;

      try {
        const text = await file.text();
        const userData = JSON.parse(text);
        
        // Validate backup format (support both old and new formats)
        if (!userData.watchlists) {
          throw new Error('Invalid backup file format: missing watchlists');
        }

        // Confirm restore
        const backupDate = userData.timestamp 
          ? new Date(userData.timestamp).toLocaleDateString() 
          : 'unknown date';
        const confirmed = confirm(
          `âš ï¸ This will replace ALL your current data with the backup from ${backupDate}.\n\nThis action cannot be undone. Continue?`
        );
        
        if (!confirmed) return;

        // Clear existing library data
        localStorage.removeItem('flicklet.library.v2');
        
        // Restore watchlists - convert from export format to Library format
        let restoredCount = 0;
        
        // Process movies
        if (userData.watchlists.movies) {
          const lists: Array<{ list: ListName; items: any[] }> = [
            { list: 'watching', items: userData.watchlists.movies.watching || [] },
            { list: 'wishlist', items: userData.watchlists.movies.wishlist || [] },
            { list: 'watched', items: userData.watchlists.movies.watched || [] }
          ];
          
          lists.forEach(({ list, items }) => {
            items.forEach((item: any) => {
              if (item && item.id) {
                const mediaItem: MediaItem = {
                  id: item.id,
                  mediaType: 'movie',
                  title: item.title || item.name || 'Untitled',
                  year: item.year,
                  posterUrl: item.posterUrl || item.poster_path,
                  voteAverage: item.voteAverage || item.vote_average,
                  userRating: item.userRating || item.user_rating,
                  runtimeMins: item.runtimeMins || item.runtime,
                  synopsis: item.synopsis || item.overview,
                  userNotes: item.userNotes || item.notes,
                  tags: item.tags || [],
                  productionCompanies: item.productionCompanies || []
                };
                Library.upsert(mediaItem, list);
                restoredCount++;
              }
            });
          });
        }
        
        // Process TV shows
        if (userData.watchlists.tv) {
          const lists: Array<{ list: ListName; items: any[] }> = [
            { list: 'watching', items: userData.watchlists.tv.watching || [] },
            { list: 'wishlist', items: userData.watchlists.tv.wishlist || [] },
            { list: 'watched', items: userData.watchlists.tv.watched || [] }
          ];
          
          lists.forEach(({ list, items }) => {
            items.forEach((item: any) => {
              if (item && item.id) {
                const mediaItem: MediaItem = {
                  id: item.id,
                  mediaType: 'tv',
                  title: item.title || item.name || 'Untitled',
                  year: item.year || item.first_air_date?.substring(0, 4),
                  posterUrl: item.posterUrl || item.poster_path,
                  voteAverage: item.voteAverage || item.vote_average,
                  userRating: item.userRating || item.user_rating,
                  synopsis: item.synopsis || item.overview,
                  nextAirDate: item.nextAirDate,
                  showStatus: item.showStatus || item.status,
                  lastAirDate: item.lastAirDate || item.last_air_date,
                  userNotes: item.userNotes || item.notes,
                  tags: item.tags || [],
                  networks: item.networks || []
                };
                Library.upsert(mediaItem, list);
                restoredCount++;
              }
            });
          });
        }
        
        // Restore custom lists and items (if present in backup)
        if (userData.watchlists.customLists && Array.isArray(userData.watchlists.customLists)) {
          const customListsData = {
            customLists: userData.watchlists.customLists,
            selectedListId: userData.watchlists.selectedListId || null,
            maxLists: userData.watchlists.maxLists || 10
          };
          localStorage.setItem('flicklet.customLists.v2', JSON.stringify(customListsData));
        }
        
        if (userData.watchlists.customItems && typeof userData.watchlists.customItems === 'object') {
          Object.entries(userData.watchlists.customItems).forEach(([listId, items]: [string, any]) => {
            if (Array.isArray(items)) {
              items.forEach((item: any) => {
                if (item && item.id) {
                  const mediaItem: MediaItem = {
                    id: item.id,
                    mediaType: item.mediaType || 'movie',
                    title: item.title || item.name || 'Untitled',
                    year: item.year,
                    posterUrl: item.posterUrl || item.poster_path,
                    voteAverage: item.voteAverage || item.vote_average,
                    userRating: item.userRating || item.user_rating,
                    synopsis: item.synopsis || item.overview,
                    userNotes: item.userNotes || item.notes,
                    tags: item.tags || []
                  };
                  Library.upsert(mediaItem, `custom:${listId}` as ListName);
                  restoredCount++;
                }
              });
            }
          });
        }
        
        // Restore settings and user data
        if (userData.settings) {
          localStorage.setItem('flicklet-settings', JSON.stringify(userData.settings));
        }
        
        if (userData.user) {
          localStorage.setItem('flicklet-user', JSON.stringify(userData.user));
        }

        alert(`âœ… Data restored successfully! ${restoredCount} items restored. Please refresh the page to see changes.`);
        
        // Trigger page refresh after a short delay
        setTimeout(() => {
          window.location.reload();
        }, 1000);
        
      } catch (error) {
        console.error('Restore failed:', error);
        alert(`âŒ Restore failed: ${error instanceof Error ? error.message : 'Unknown error'}. Please check the backup file and try again.`);
      }
    };
    input.click();
  };

  const handleSystemWipe = () => {
    const confirmed = confirm(
      'ðŸš¨ NUCLEAR OPTION: This will permanently delete ALL your data including:\n\n' +
      'â€¢ All watchlists (movies & TV)\n' +
      'â€¢ All settings\n' +
      'â€¢ All user preferences\n' +
      'â€¢ Everything stored locally\n\n' +
      'This action CANNOT be undone. Are you absolutely sure?'
    );
    
    if (!confirmed) return;
    
    const doubleConfirmed = confirm(
      'âš ï¸ FINAL WARNING: This will completely wipe your Flicklet data.\n\n' +
      'Type "DELETE" in the next prompt to confirm.'
    );
    
    if (!doubleConfirmed) return;
    
    const finalCheck = prompt('Type "DELETE" to confirm system wipe:');
    if (finalCheck !== 'DELETE') {
      alert('âŒ System wipe cancelled.');
      return;
    }

    try {
      // Clear all Flicklet data
      const keys = Object.keys(localStorage).filter(key => key.startsWith('flicklet-'));
      keys.forEach(key => localStorage.removeItem(key));
      
      alert('ðŸ’¥ System wiped successfully! The page will refresh.');
      
      // Refresh page
      setTimeout(() => {
        window.location.reload();
      }, 1000);
      
    } catch (error) {
      console.error('System wipe failed:', error);
      alert('âŒ System wipe failed. Please try again.');
    }
  };
  
  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold text-gray-900 dark:text-gray-100">{translations.data}</h3>
      
      {/* Share with Friends */}
      <div>
        <h4 className="text-lg font-medium mb-3 text-gray-800 dark:text-gray-200">ðŸ“¤ Share with Friends</h4>
        <div className="space-y-3">
          <div className="p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
            <h5 className="font-medium mb-2 text-gray-900 dark:text-gray-100">Create Shareable List</h5>
            <p className="text-sm mb-3 text-gray-600 dark:text-gray-400">
              Create a shareable list of your shows and movies to send to friends
            </p>
            <button
              onClick={() => setShowSharingModal(true)}
              className="px-3 py-2 rounded-lg text-sm transition-colors bg-pink-500 hover:bg-pink-600 text-white"
            >
              ðŸ“¤ Share with Friends
            </button>
          </div>
        </div>
      </div>

      {/* Data Management */}
      <div>
        <h4 className="text-lg font-medium mb-3 text-gray-800 dark:text-gray-200">ðŸ’¾ Data Management</h4>
        <div className="space-y-3">
          
          {/* Backup */}
          <div className="p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
            <h5 className="font-medium mb-2 text-gray-900 dark:text-gray-100">ðŸ’¾ Backup Data</h5>
            <p className="text-sm mb-3 text-gray-600 dark:text-gray-400">
              Download a complete backup of all your watchlists and settings
            </p>
            <button
              onClick={handleBackup}
              className="px-3 py-2 rounded-lg text-sm transition-colors bg-blue-500 hover:bg-blue-600 text-white"
            >
              ðŸ’¾ Download Backup
            </button>
          </div>

          {/* Restore */}
          <div className="p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
            <h5 className="font-medium mb-2 text-gray-900 dark:text-gray-100">ðŸ“¥ Restore Data</h5>
            <p className="text-sm mb-3 text-gray-600 dark:text-gray-400">
              Upload a backup file to restore your watchlists and settings
            </p>
            <button
              onClick={handleRestore}
              className="px-3 py-2 rounded-lg text-sm transition-colors bg-green-500 hover:bg-green-600 text-white"
            >
              ðŸ“¥ Restore from Backup
            </button>
          </div>

          {/* System Wipe */}
          <div className="p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800">
            <h5 className="font-medium mb-2 text-red-900 dark:text-red-100">ðŸš¨ System Wipe</h5>
            <p className="text-sm mb-3 text-red-700 dark:text-red-300">
              Permanently delete ALL your data. This action cannot be undone.
            </p>
            <button
              onClick={handleSystemWipe}
              className="px-3 py-2 rounded-lg text-sm transition-colors bg-red-500 hover:bg-red-600 text-white"
            >
              ðŸš¨ Nuclear Option
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

function ProTab() {
  const settings = useSettings();
  
  // Check if user is Pro
  const isProUser = settings.pro || false;
  
  return (
    <div className="space-y-6">
      {/* Pro Status */}
      <div className="text-center p-6 rounded-lg" style={{ backgroundColor: 'var(--btn)' }}>
        <div className="text-4xl mb-3">ðŸ’Ž</div>
        <h3 className="text-xl font-semibold mb-2" style={{ color: 'var(--text)' }}>
          {isProUser ? 'You are a Pro User!' : 'Upgrade to Flicklet Pro'}
        </h3>
        <p className="text-sm mb-4" style={{ color: 'var(--muted)' }}>
          {isProUser 
            ? 'Thank you for supporting Flicklet! Enjoy all Pro features.'
            : 'Unlock advanced features and premium content to enhance your TV and movie tracking experience.'
          }
        </p>
        {!isProUser && (
          <button className="px-6 py-3 rounded-lg font-medium transition-colors" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>
            Upgrade to Pro
          </button>
        )}
      </div>

      {/* Planned Pro Features */}
      <div>
        <h4 className="text-lg font-medium mb-4" style={{ color: 'var(--text)' }}>Planned Pro Features</h4>
        
        <div className="space-y-4">
          {/* Existing Pro Features on Cards */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸŽ¬</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Bloopers & Behind-the-Scenes</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Access to bloopers, extras, and behind-the-scenes content on movie and TV show cards
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Available Now</span>
                </div>
              </div>
            </div>
          </div>

          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸ””</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Advanced Notifications</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Customizable episode notifications with multiple methods, custom timing, and per-show settings
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Available Now</span>
                </div>
              </div>
            </div>
          </div>

          {/* Simple Reminder - Free Feature */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">â°</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Simple Reminder</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Basic reminder notifications 24 hours before episodes air (in-app only)
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--success)', color: 'white' }}>FREE</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Available Now</span>
                </div>
              </div>
            </div>
          </div>

          {/* Smart Notifications */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸ””</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Smart Notifications</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Customizable episode notifications with advanced scheduling and timing options
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>

          {/* Advanced Analytics */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸ“Š</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Advanced Analytics</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Detailed watching statistics and viewing journey insights
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>

          {/* Premium Themes */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸŽ¨</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Premium Themes</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Access to premium theme packs and advanced customization options
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>

          {/* Extra Trivia Content */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸ§ </div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Extra Trivia Content</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Access to additional trivia questions and behind-the-scenes content
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>

          {/* CSV Export */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸ“Š</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>CSV Export</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Export your lists to CSV format for use in spreadsheets
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>

          {/* Priority Support */}
          <div className="p-4 rounded-lg border" style={{ backgroundColor: 'var(--bg)', borderColor: 'var(--line)' }}>
            <div className="flex items-start gap-3">
              <div className="text-2xl">ðŸš€</div>
              <div className="flex-1">
                <h5 className="font-medium mb-1" style={{ color: 'var(--text)' }}>Priority Support</h5>
                <p className="text-sm mb-2" style={{ color: 'var(--muted)' }}>
                  Faster help when you need it with priority customer support
                </p>
                <div className="flex items-center gap-2">
                  <span className="px-2 py-1 text-xs rounded-full" style={{ backgroundColor: 'var(--accent)', color: 'white' }}>PRO</span>
                  <span className="text-xs" style={{ color: 'var(--muted)' }}>Coming Soon</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Coming Soon */}
      <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--btn)' }}>
        <h5 className="font-medium mb-2" style={{ color: 'var(--text)' }}>ðŸš€ What's Coming Next</h5>
        <ul className="text-sm space-y-1" style={{ color: 'var(--muted)' }}>
          <li>â€¢ Social Features: Friend connections and shared lists</li>
          <li>â€¢ Advanced Recommendations: AI-powered suggestions</li>
          <li>â€¢ Community Content: User-submitted videos and reviews</li>
          <li>â€¢ Mobile App: Native iOS and Android apps</li>
          <li>â€¢ Offline Mode: Full functionality without internet</li>
        </ul>
      </div>
    </div>
  );
}

function AboutTab() {
  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold" style={{ color: 'var(--text)' }}>ðŸ  About Unique4U</h3>
      
      <div className="space-y-4 text-sm leading-relaxed" style={{ color: 'var(--text)' }}>
        <p>
          We're not here to reinvent the wheel â€” we're here to make the wheel less squeaky. At Unique4U, our rule is simple: keep it simple. The world already has enough apps that feel like a second job to use. We'd rather give you tools that justâ€¦ work.
        </p>
        
        <p>
          Everything we build has its own personality, but they all live under one roof: a people-first, all-inclusive, slightly offbeat house we call Unique4U. If it's fun, useful, and a little different from the pack â€” it belongs here.
        </p>
      </div>

      <div className="space-y-4">
        <h4 className="text-lg font-semibold" style={{ color: 'var(--text)' }}>ðŸ‘¥ About the Creators</h4>
        
        <div className="space-y-3 text-sm leading-relaxed" style={{ color: 'var(--text)' }}>
          <p>
            We're Pam and Travis. Think of us as casual builders with a shared allergy to overcomplication. We make things because we need them, and we figure you probably do too.
          </p>
          
          <p>
            Pam once trained dolphins (true story) and also happens to be really good with numbers. Travis studied English and Philosophy, which means he can overthink and explain it in writing, then somehow turn that into practical business know-how. Together, we're like a mash-up of "creative meets operations" â€” and that combo lets us build apps that are simple, useful, and not boring.
          </p>
        </div>
      </div>

      <div className="space-y-4">
        <h4 className="text-lg font-semibold" style={{ color: 'var(--text)' }}>ðŸ“± About the App</h4>
        
        <div className="space-y-3 text-sm leading-relaxed" style={{ color: 'var(--text)' }}>
          <p>
            Here's the deal: you want to remember what you're watching without needing a PhD in App Navigation. We built this because we got tired of two bad options â€” messy notes on our phones or bloated apps that make you log your "episode 7 mid-season thoughts." (Hard pass.)
          </p>
          
          <p className="text-xs italic" style={{ color: 'var(--muted)' }}>
            Data Attribution: This product uses the TMDB API but is not endorsed or certified by TMDB.
          </p>
          
          <p>
            So we made this instead:
          </p>
          
          <ul className="space-y-2 ml-4">
            <li className="flex items-start gap-2">
              <span className="text-accent mt-0.5">â€¢</span>
              <span><strong>Stupidly easy.</strong> Open it, add your show, done.</span>
            </li>
            <li className="flex items-start gap-2">
              <span className="text-accent mt-0.5">â€¢</span>
              <span><strong>Always free at the core.</strong> No paywalls for the basics.</span>
            </li>
            <li className="flex items-start gap-2">
              <span className="text-accent mt-0.5">â€¢</span>
              <span><strong>Friend-proof sharing.</strong> Copy your list and drop it in a text when someone asks, "What should I watch?"</span>
            </li>
          </ul>
          
          <p>
            If you watch TV or movies and don't want to make it a hobby just to track them, this app's for you. Simple lists, zero drama.
          </p>
        </div>
      </div>
    </div>
  );
}

// Social Features Tab
function SocialTab() {
  // const translations = useTranslations(); // Unused
  
  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold" style={{ color: 'var(--text)' }}>ðŸ‘¥ Social Features</h3>
      
      {/* Coming Soon Notice */}
      <div className="p-6 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
        <div className="text-center">
          <div className="text-4xl mb-4">ðŸš§</div>
          <h4 className="text-lg font-semibold mb-2" style={{ color: 'var(--text)' }}>Coming Soon!</h4>
          <p className="text-sm mb-4" style={{ color: 'var(--muted)' }}>
            Social features are in development. Here's what we're planning:
          </p>
        </div>
      </div>

      {/* Planned Features */}
      <div className="space-y-4">
        <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
          <h5 className="font-semibold mb-2" style={{ color: 'var(--text)' }}>ðŸ‘¥ Friend Connections</h5>
          <p className="text-sm" style={{ color: 'var(--muted)' }}>
            Connect with friends and see what they're watching
          </p>
        </div>
        
        <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
          <h5 className="font-semibold mb-2" style={{ color: 'var(--text)' }}>ðŸ“‹ Shared Watchlists</h5>
          <p className="text-sm" style={{ color: 'var(--muted)' }}>
            Create collaborative watchlists with friends and family
          </p>
        </div>
        
        <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
          <h5 className="font-semibold mb-2" style={{ color: 'var(--text)' }}>ðŸ’¬ Activity Feed</h5>
          <p className="text-sm" style={{ color: 'var(--muted)' }}>
            See what your friends are watching and their ratings
          </p>
        </div>
        
        <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
          <h5 className="font-semibold mb-2" style={{ color: 'var(--text)' }}>ðŸŽ¯ Recommendations</h5>
          <p className="text-sm" style={{ color: 'var(--muted)' }}>
            Get personalized recommendations based on your friends' tastes
          </p>
        </div>
      </div>

      {/* Pro Features */}
      <div className="p-4 rounded-lg" style={{ backgroundColor: 'rgba(77, 163, 255, 0.1)', borderColor: 'var(--accent)', border: '1px solid' }}>
        <h5 className="font-semibold mb-2" style={{ color: 'var(--accent)' }}>ðŸ”’ Pro Features</h5>
        <p className="text-sm" style={{ color: 'var(--muted)' }}>
          Advanced social features like private groups, custom recommendations, and priority support will be available with Pro.
        </p>
      </div>
    </div>
  );
}

// Community Stats Tab
function CommunityTab() {
  // const translations = useTranslations(); // Unused
  
  // Mock stats - in a real app, these would come from the backend
  const userStats = {
    games: {
      flickword: { played: 12, won: 8, lost: 4, streak: 3, bestStreak: 7 },
      trivia: { played: 25, won: 18, lost: 7, correct: 89, total: 125 }
    },
    media: {
      movies: { watching: 5, wishlist: 12, watched: 47 },
      tv: { watching: 8, wishlist: 15, watched: 23 }
    },
    community: {
      friends: 0,
      sharedLists: 0,
      recommendationsGiven: 0,
      recommendationsReceived: 0
    }
  };

  const getWinRate = (won: number, played: number) => {
    return played > 0 ? Math.round((won / played) * 100) : 0;
  };

  const getAccuracy = (correct: number, total: number) => {
    return total > 0 ? Math.round((correct / total) * 100) : 0;
  };

  return (
    <div className="space-y-6">
      <h3 className="text-xl font-semibold" style={{ color: 'var(--text)' }}>ðŸ† Community Stats</h3>
      
      {/* Game Statistics */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>ðŸŽ® Game Statistics</h4>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {/* FlickWord Stats */}
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
            <h5 className="font-semibold mb-3" style={{ color: 'var(--text)' }}>ðŸŽ¯ FlickWord</h5>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Games Played:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.games.flickword.played}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Win Rate:</span>
                <span style={{ color: 'var(--text)' }}>{getWinRate(userStats.games.flickword.won, userStats.games.flickword.played)}%</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Current Streak:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.games.flickword.streak}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Best Streak:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.games.flickword.bestStreak}</span>
              </div>
            </div>
          </div>

          {/* Trivia Stats */}
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
            <h5 className="font-semibold mb-3" style={{ color: 'var(--text)' }}>ðŸ§  Trivia</h5>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Games Played:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.games.trivia.played}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Win Rate:</span>
                <span style={{ color: 'var(--text)' }}>{getWinRate(userStats.games.trivia.won, userStats.games.trivia.played)}%</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Accuracy:</span>
                <span style={{ color: 'var(--text)' }}>{getAccuracy(userStats.games.trivia.correct, userStats.games.trivia.total)}%</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Questions Correct:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.games.trivia.correct}/{userStats.games.trivia.total}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Media Statistics */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>ðŸ“º Media Statistics</h4>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {/* Movies */}
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
            <h5 className="font-semibold mb-3" style={{ color: 'var(--text)' }}>ðŸŽ¬ Movies</h5>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Currently Watching:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.movies.watching}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Want to Watch:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.movies.wishlist}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Watched:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.movies.watched}</span>
              </div>
              <div className="flex justify-between font-semibold">
                <span style={{ color: 'var(--text)' }}>Total:</span>
                <span style={{ color: 'var(--text)' }}>
                  {userStats.media.movies.watching + userStats.media.movies.wishlist + userStats.media.movies.watched}
                </span>
              </div>
            </div>
          </div>

          {/* TV Shows */}
          <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
            <h5 className="font-semibold mb-3" style={{ color: 'var(--text)' }}>ðŸ“º TV Shows</h5>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Currently Watching:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.tv.watching}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Want to Watch:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.tv.wishlist}</span>
              </div>
              <div className="flex justify-between">
                <span style={{ color: 'var(--muted)' }}>Watched:</span>
                <span style={{ color: 'var(--text)' }}>{userStats.media.tv.watched}</span>
              </div>
              <div className="flex justify-between font-semibold">
                <span style={{ color: 'var(--text)' }}>Total:</span>
                <span style={{ color: 'var(--text)' }}>
                  {userStats.media.tv.watching + userStats.media.tv.wishlist + userStats.media.tv.watched}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Community Engagement */}
      <div>
        <h4 className="text-lg font-medium mb-3" style={{ color: 'var(--text)' }}>ðŸ‘¥ Community Engagement</h4>
        <div className="p-4 rounded-lg" style={{ backgroundColor: 'var(--card)', borderColor: 'var(--line)', border: '1px solid' }}>
          <div className="space-y-2 text-sm">
            <div className="flex justify-between">
              <span style={{ color: 'var(--muted)' }}>Friends Connected:</span>
              <span style={{ color: 'var(--text)' }}>{userStats.community.friends}</span>
            </div>
            <div className="flex justify-between">
              <span style={{ color: 'var(--muted)' }}>Shared Lists:</span>
              <span style={{ color: 'var(--text)' }}>{userStats.community.sharedLists}</span>
            </div>
            <div className="flex justify-between">
              <span style={{ color: 'var(--muted)' }}>Recommendations Given:</span>
              <span style={{ color: 'var(--text)' }}>{userStats.community.recommendationsGiven}</span>
            </div>
            <div className="flex justify-between">
              <span style={{ color: 'var(--muted)' }}>Recommendations Received:</span>
              <span style={{ color: 'var(--text)' }}>{userStats.community.recommendationsReceived}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// Sharing Modal Component
function SharingModal({ onClose }: { onClose: () => void }) {
  const { username } = useUsername();
  const watchingItems = useLibrary('watching');
  const wishlistItems = useLibrary('wishlist');
  const watchedItems = useLibrary('watched');
  
  const [selectedTabs, setSelectedTabs] = useState({
    watching: true,
    wishlist: true,
    watched: true
  });
  
  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());
  const [contentOptions, setContentOptions] = useState({
    includeMovies: true,
    includeTV: true,
    includeRatings: true,
    includeDescriptions: false
  });
  
  const [showResult, setShowResult] = useState(false);
  const [shareableText, setShareableText] = useState('');

  // Get all items from selected tabs
  const getAllItems = () => {
    const items = [];
    if (selectedTabs.watching) items.push(...watchingItems);
    if (selectedTabs.wishlist) items.push(...wishlistItems);
    if (selectedTabs.watched) items.push(...watchedItems);
    return items;
  };

  // Filter items based on content options
  const getFilteredItems = () => {
    let items = getAllItems();
    
    if (!contentOptions.includeMovies && !contentOptions.includeTV) {
      return [];
    }
    
    if (!contentOptions.includeMovies) {
      items = items.filter(item => item.mediaType !== 'movie');
    }
    
    if (!contentOptions.includeTV) {
      items = items.filter(item => item.mediaType !== 'tv');
    }
    
    return items;
  };

  // Get items to include in share
  const getItemsToShare = () => {
    const filteredItems = getFilteredItems();
    
    if (selectedItems.size === 0) {
      return filteredItems; // If nothing selected individually, include all filtered items
    }
    
    return filteredItems.filter(item => selectedItems.has(item.id.toString()));
  };

  const handleTabToggle = (tab: keyof typeof selectedTabs) => {
    setSelectedTabs(prev => ({ ...prev, [tab]: !prev[tab] }));
  };

  const handleOptionToggle = (option: keyof typeof contentOptions) => {
    setContentOptions(prev => ({ ...prev, [option]: !prev[option] }));
  };

  const handleItemToggle = (itemId: string) => {
    setSelectedItems(prev => {
      const newSet = new Set(prev);
      if (newSet.has(itemId)) {
        newSet.delete(itemId);
      } else {
        newSet.add(itemId);
      }
      return newSet;
    });
  };

  const handleSelectAll = () => {
    const allItemIds = getFilteredItems().map(item => item.id.toString());
    setSelectedItems(new Set(allItemIds));
  };

  const handleSelectNone = () => {
    setSelectedItems(new Set());
  };

  const generateShareableText = () => {
    const userName = username || 'Flicklet User';
    const itemsToShare = getItemsToShare();
    
    let text = `ðŸŽ¬ Flicklet - ${userName}'s Watchlist\n`;
    text += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;
    
    if (selectedTabs.watching && itemsToShare.some(item => watchingItems.some(w => w.id === item.id))) {
      text += `â–¶ï¸ Currently Watching\n`;
      text += `${'â”€'.repeat(30)}\n`;
      const watchingItemsToShare = itemsToShare.filter(item => watchingItems.some(w => w.id === item.id));
      watchingItemsToShare.forEach(item => {
        const icon = item.mediaType === 'movie' ? 'ðŸŽ¬' : 'ðŸ“º';
        const rating = contentOptions.includeRatings && item.voteAverage ? ` â­ ${item.voteAverage.toFixed(1)}` : '';
        text += `${icon} ${item.title}${rating}\n`;
      });
      text += '\n';
    }
    
    if (selectedTabs.wishlist && itemsToShare.some(item => wishlistItems.some(w => w.id === item.id))) {
      text += `â¤ï¸ Want to Watch\n`;
      text += `${'â”€'.repeat(30)}\n`;
      const wishlistItemsToShare = itemsToShare.filter(item => wishlistItems.some(w => w.id === item.id));
      wishlistItemsToShare.forEach(item => {
        const icon = item.mediaType === 'movie' ? 'ðŸŽ¬' : 'ðŸ“º';
        const rating = contentOptions.includeRatings && item.voteAverage ? ` â­ ${item.voteAverage.toFixed(1)}` : '';
        text += `${icon} ${item.title}${rating}\n`;
      });
      text += '\n';
    }
    
    if (selectedTabs.watched && itemsToShare.some(item => watchedItems.some(w => w.id === item.id))) {
      text += `âœ… Already Watched\n`;
      text += `${'â”€'.repeat(30)}\n`;
      const watchedItemsToShare = itemsToShare.filter(item => watchedItems.some(w => w.id === item.id));
      watchedItemsToShare.forEach(item => {
        const icon = item.mediaType === 'movie' ? 'ðŸŽ¬' : 'ðŸ“º';
        const rating = contentOptions.includeRatings && item.voteAverage ? ` â­ ${item.voteAverage.toFixed(1)}` : '';
        text += `${icon} ${item.title}${rating}\n`;
      });
      text += '\n';
    }
    
    text += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
    text += `ðŸ“± Track your shows and movies with Flicklet!\n`;
    text += `ðŸ”— https://flicklet.app\n`;
    
    return text;
  };

  const handleGenerate = () => {
    const text = generateShareableText();
    setShareableText(text);
    setShowResult(true);
  };

  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(shareableText);
      alert('Copied to clipboard!');
    } catch (_error) {
      // Fallback for older browsers
      const textarea = document.createElement('textarea');
      textarea.value = shareableText;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      alert('Copied to clipboard!');
    }
  };

  const filteredItems = getFilteredItems();

  if (showResult) {
    return (
      <div className="fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4">
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden">
          <div className="p-6">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-xl font-semibold text-gray-900 dark:text-gray-100">ðŸ“‹ Your Shareable List</h3>
              <button
                onClick={onClose}
                className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
              >
                âœ•
              </button>
            </div>
            
            <div className="mb-4">
              <p className="text-sm text-gray-600 dark:text-gray-400">
                Copy the text below and share it with your friends! They can see what you're watching and get recommendations.
              </p>
            </div>
            
            <textarea
              value={shareableText}
              readOnly
              className="w-full h-64 p-3 border rounded-lg font-mono text-sm bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100"
            />
            
            <div className="flex gap-2 mt-4">
              <button
                onClick={onClose}
                className="px-4 py-2 rounded-lg text-sm transition-colors"
                style={{ backgroundColor: 'var(--btn)', color: 'var(--text)', borderColor: 'var(--line)', border: '1px solid' }}
              >
                Close
              </button>
              <button
                onClick={handleCopy}
                className="px-4 py-2 rounded-lg text-sm transition-colors"
                style={{ backgroundColor: 'var(--accent)', color: 'white' }}
              >
                ðŸ“‹ Copy to Clipboard
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4">
      <div className="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
        <div className="p-6">
          <div className="flex justify-between items-center mb-6">
            <h3 className="text-xl font-semibold text-gray-900 dark:text-gray-100">ðŸ“¤ Share Your Lists</h3>
            <button
              onClick={onClose}
              className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
            >
              âœ•
            </button>
          </div>
          
          <div className="space-y-6 max-h-[70vh] overflow-y-auto">
            {/* Tab Selection */}
            <div>
              <h4 className="text-lg font-medium mb-3 text-gray-800 dark:text-gray-200">ðŸ“‹ Select Lists to Share</h4>
              <div className="space-y-2">
                {[
                  { key: 'watching', label: 'â–¶ï¸ Currently Watching', items: watchingItems },
                  { key: 'wishlist', label: 'â¤ï¸ Want to Watch', items: wishlistItems },
                  { key: 'watched', label: 'âœ… Already Watched', items: watchedItems }
                ].map(({ key, label, items }) => (
                  <label key={key} className="flex items-center justify-between p-3 rounded-lg cursor-pointer" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
                    <div className="flex items-center gap-3">
                      <input
                        type="checkbox"
                        checked={selectedTabs[key as keyof typeof selectedTabs]}
                        onChange={() => handleTabToggle(key as keyof typeof selectedTabs)}
                        className="w-4 h-4"
                      />
                      <span className="text-gray-900 dark:text-gray-100">{label}</span>
                    </div>
                    <span className="text-sm text-gray-600 dark:text-gray-400">{items.length} items</span>
                  </label>
                ))}
              </div>
            </div>
            
            {/* Content Options */}
            <div>
              <h4 className="text-lg font-medium mb-3 text-gray-800 dark:text-gray-200">ðŸŽ¯ Content Options</h4>
              <div className="space-y-2">
                {[
                  { key: 'includeMovies', label: 'ðŸŽ¬ Include Movies' },
                  { key: 'includeTV', label: 'ðŸ“º Include TV Shows' },
                  { key: 'includeRatings', label: 'â­ Include Ratings' },
                  { key: 'includeDescriptions', label: 'ðŸ“ Include Descriptions' }
                ].map(({ key, label }) => (
                  <label key={key} className="flex items-center gap-3 p-3 rounded-lg cursor-pointer" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)', border: '1px solid' }}>
                    <input
                      type="checkbox"
                      checked={contentOptions[key as keyof typeof contentOptions]}
                      onChange={() => handleOptionToggle(key as keyof typeof contentOptions)}
                      className="w-4 h-4"
                    />
                    <span className="text-gray-900 dark:text-gray-100">{label}</span>
                  </label>
                ))}
              </div>
            </div>

            {/* Item Selection */}
            {filteredItems.length > 0 && (
              <div>
                <div className="flex items-center justify-between mb-3">
                  <h4 className="text-lg font-medium text-gray-800 dark:text-gray-200">ðŸŽ¬ Select Items to Share</h4>
                  <div className="flex gap-2">
                    <button
                      onClick={handleSelectAll}
                      className="px-3 py-1 rounded text-sm transition-colors"
                      style={{ backgroundColor: 'var(--accent)', color: 'white' }}
                    >
                      Select All
                    </button>
                    <button
                      onClick={handleSelectNone}
                      className="px-3 py-1 rounded text-sm transition-colors"
                      style={{ backgroundColor: 'var(--btn)', color: 'var(--text)', borderColor: 'var(--line)', border: '1px solid' }}
                    >
                      Select None
                    </button>
                  </div>
                </div>
                
                <div className="max-h-48 overflow-y-auto space-y-2">
                  {filteredItems.map((item) => (
                    <label key={item.id} className="flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">
                      <input
                        type="checkbox"
                        checked={selectedItems.has(item.id.toString())}
                        onChange={() => handleItemToggle(item.id.toString())}
                        className="w-4 h-4"
                      />
                      <span className="flex-1 text-sm text-gray-900 dark:text-gray-100">
                        {item.mediaType === 'movie' ? 'ðŸŽ¬' : 'ðŸ“º'} {item.title}
                        {contentOptions.includeRatings && item.voteAverage && (
                          <span className="ml-2 text-xs text-gray-600 dark:text-gray-400">
                            â­ {item.voteAverage.toFixed(1)}
                          </span>
                        )}
                      </span>
                    </label>
                  ))}
                </div>
              </div>
            )}
            
            {/* Actions */}
            <div className="flex gap-2 pt-4 border-t" style={{ borderColor: 'var(--line)' }}>
              <button
                onClick={onClose}
                className="px-4 py-2 rounded-lg text-sm transition-colors"
                style={{ backgroundColor: 'var(--btn)', color: 'var(--text)', borderColor: 'var(--line)', border: '1px solid' }}
              >
                Cancel
              </button>
              <button
                onClick={handleGenerate}
                className="px-4 py-2 rounded-lg text-sm transition-colors"
                style={{ backgroundColor: 'var(--accent)', color: 'white' }}
              >
                ðŸ“‹ Generate Shareable List
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

# Config & Scripts
*14 file(s)*


## _legacy_v1\www\scripts\community\games.js
```
/**
 * Community Games Component
 * Renders game tiles and stats teaser inside the Community section
 */

(function () {
  'use strict';

  console.log('ðŸŽ® Community Games component loaded');

  // Helper function to get translation
  function t(key) {
    // Handle nested i18n keys
    const keys = key.split('.');
    let value = window.i18n;
    for (let i = 0; i < keys.length; i++) {
      if (value && typeof value === 'object' && keys[i] in value) {
        value = value[keys[i]];
      } else {
        return key; // Return key if not found
      }
    }
    return value;
  }

  // Helper function to navigate
  function softNavigate(url) {
    if (typeof window.navigateTo === 'function') return window.navigateTo(url);
    if (window.router && typeof window.router.navigate === 'function') {
      window.router.navigate(url);
    } else {
      location.href = url;
    }
  }

  // Render game tile
  function renderGameTile({ id, title, subtitle, icon, onClick }) {
    const el = document.createElement('button');
    el.type = 'button';
    el.className = 'game-tile';
    el.dataset.action = id; // For click logging
    el.innerHTML = `
      <div class="game-tile__icon icon-${icon}" aria-hidden="true"></div>
      <div class="game-tile__text">
        <div class="game-tile__title">${title}</div>
        <div class="game-tile__sub">${subtitle}</div>
      </div>
    `;
    el.addEventListener('click', onClick);
    el.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        onClick();
      }
    });
    return el;
  }

  // Get lightweight stats (non-PII); keeps it snappy
  function getLightweightStats() {
    try {
      const raw = JSON.parse(localStorage.getItem('flicklet_stats') || '{}');
      return {
        streak: raw.streak || 0,
        totalAnswered: raw.totalAnswered || 0,
        bestScore: raw.bestScore || 0,
      };
    } catch (_) {
      return {};
    }
  }

  // Main games renderer
  window.renderCommunityGames = function renderCommunityGames() {
    if (!window.FLAGS?.community_games_enabled) {
      console.log('ðŸš« Community Games disabled by feature flag, showing placeholder');
      return null; // Return null to indicate placeholder should be used
    }

    console.log('âœ… Rendering Community Games');

    const wrap = document.createElement('div');
    wrap.className = 'community-games';

    // Tiles container
    const tiles = document.createElement('div');
    tiles.className = 'community-games__tiles';

    // Daily Trivia tile â†’ teaser modal (upsell to Pro)
    tiles.appendChild(
      renderGameTile({
        id: 'trivia',
        title: t('games.trivia_title'),
        subtitle: t('games.trivia_sub'),
        icon: 'check',
        onClick: (e) => {
          e.preventDefault();
          if (typeof window.openGamesTeaser === 'function') {
            window.openGamesTeaser('trivia');
          }
        },
      }),
    );

    // FlickWord tile â†’ fully functional
    tiles.appendChild(
      renderGameTile({
        id: 'flickword',
        title: t('games.flickword_title'),
        subtitle: t('games.flickword_sub'),
        icon: 'badge',
        onClick: () => softNavigate('/games/flickword'),
      }),
    );

    wrap.appendChild(tiles);

    // Pro stats teaser
    if (window.FLAGS?.community_stats_teaser) {
      const teaser = document.createElement('div');
      teaser.className = 'community-games__teaser';
      const stats = getLightweightStats();
      teaser.innerHTML = `
        <div class="teaser__item">
          <div class="teaser__value">${stats.streak || 0}</div>
          <div class="teaser__label">${t('games.stat_streak')}</div>
        </div>
        <div class="teaser__item">
          <div class="teaser__value">${stats.totalAnswered || 0}</div>
          <div class="teaser__label">${t('games.stat_total')}</div>
        </div>
        <div class="teaser__item">
          <div class="teaser__value">${stats.bestScore || 'â€”'}</div>
          <div class="teaser__label">${t('games.stat_best')}</div>
        </div>
        <button class="btn btn-link teaser__cta">${t('games.pro_cta')}</button>
      `;

      // Add click handler for Pro CTA
      const ctaBtn = teaser.querySelector('.teaser__cta');
      if (ctaBtn) {
        ctaBtn.addEventListener('click', () => softNavigate('/pro'));
      }

      wrap.appendChild(teaser);
    }

    return wrap;
  };
})();

```

## _legacy_v1\www\scripts\community-final-verification.js
```
// Community Final Verification - Test all three fixes: i18n, data-actions, router
// Run this in DevTools console to verify the surgical patch worked

(function () {
  'use strict';

  console.log('ðŸ”§ Community Final Verification Starting...');

  // Test 1: i18n Translation Fix
  console.log('=== i18n Translation Test ===');

  // Check if tiles show localized text (not raw keys)
  const gameTiles = document.querySelectorAll('.game-tile');
  const hasLocalizedText =
    gameTiles.length > 0 &&
    Array.from(gameTiles).every((tile) => {
      const text = tile.textContent;
      return (
        !text.includes('games.') &&
        !text.includes('trivia_title') &&
        !text.includes('flickword_title')
      );
    });

  console.log('âœ… Tiles show localized text:', hasLocalizedText ? 'PASS' : 'FAIL');

  if (gameTiles.length > 0) {
    gameTiles.forEach((tile, index) => {
      const title = tile.querySelector('.game-tile__title')?.textContent;
      const subtitle = tile.querySelector('.game-tile__sub')?.textContent;
      console.log(`  - Tile ${index + 1}: "${title}" - "${subtitle}"`);
    });
  }

  // Test 2: Data-Action Registration Fix
  console.log('=== Data-Action Registration Test ===');

  // Check if tiles have correct data-action values
  const triviaTile = document.querySelector('[data-action="trivia"]');
  const flickwordTile = document.querySelector('[data-action="flickword"]');

  console.log('âœ… Trivia tile has correct data-action:', !!triviaTile ? 'PASS' : 'FAIL');
  console.log('âœ… FlickWord tile has correct data-action:', !!flickwordTile ? 'PASS' : 'FAIL');

  // Test clicking tiles to see if they trigger router navigation
  if (triviaTile) {
    console.log('  - Testing trivia tile click...');
    const originalConsoleLog = console.log;
    let navigationDetected = false;

    console.log = function (...args) {
      if (
        args.some(
          (arg) =>
            typeof arg === 'string' &&
            (arg.includes('Navigating to') || arg.includes('Handling game route')),
        )
      ) {
        navigationDetected = true;
      }
      originalConsoleLog.apply(console, args);
    };

    triviaTile.click();

    // Restore console.log
    console.log = originalConsoleLog;

    console.log('âœ… Trivia click triggers navigation:', navigationDetected ? 'PASS' : 'FAIL');
  }

  // Test 3: Router Integration Test
  console.log('=== Router Integration Test ===');

  const routerAvailable = !!(window.router && typeof window.router.navigate === 'function');
  console.log('âœ… Router available:', routerAvailable ? 'PASS' : 'FAIL');

  if (routerAvailable) {
    // Test direct router navigation
    console.log('  - Testing direct router navigation...');
    try {
      window.router.navigate('/games/trivia');
      console.log('âœ… Trivia route handled:', 'PASS');
    } catch (error) {
      console.log('âŒ Trivia route failed:', error.message);
    }

    try {
      window.router.navigate('/games/flickword');
      console.log('âœ… FlickWord route handled:', 'PASS');
    } catch (error) {
      console.log('âŒ FlickWord route failed:', error.message);
    }
  }

  // Test 4: Modal Functionality
  console.log('=== Modal Functionality Test ===');

  const modalFunctionAvailable = typeof window.showGamesTeaserModal === 'function';
  console.log('âœ… Modal function available:', modalFunctionAvailable ? 'PASS' : 'FAIL');

  if (modalFunctionAvailable) {
    console.log('  - Testing modal creation...');
    try {
      window.showGamesTeaserModal('trivia');
      const modal = document.querySelector('.modal.games-teaser');
      console.log('âœ… Modal created:', !!modal ? 'PASS' : 'FAIL');

      if (modal) {
        const modalTitle = modal.querySelector('h3')?.textContent;
        const modalBody = modal.querySelector('p')?.textContent;
        const modalButtons = modal.querySelectorAll('.modal__actions button');

        console.log('  - Modal title:', modalTitle);
        console.log('  - Modal body:', modalBody);
        console.log('  - Modal buttons:', modalButtons.length);

        // Check if modal shows localized text (not raw keys)
        const hasLocalizedModal =
          modalTitle &&
          !modalTitle.includes('games.') &&
          modalBody &&
          !modalBody.includes('games.') &&
          Array.from(modalButtons).every((btn) => !btn.textContent.includes('games.'));

        console.log('âœ… Modal shows localized text:', hasLocalizedModal ? 'PASS' : 'FAIL');

        // Clean up modal
        modal.remove();
      }
    } catch (error) {
      console.log('âŒ Modal creation failed:', error.message);
    }
  }

  // Test 5: Console Cleanliness
  console.log('=== Console Cleanliness Test ===');

  // Check if we still get "Unknown data-action" warnings
  const originalConsoleWarn = console.warn;
  let unknownActionWarning = false;

  console.warn = function (...args) {
    if (args.some((arg) => typeof arg === 'string' && arg.includes('Unknown data-action'))) {
      unknownActionWarning = true;
    }
    originalConsoleWarn.apply(console, args);
  };

  // Trigger a tile click to see if we get warnings
  if (triviaTile) {
    triviaTile.click();
  }

  // Restore console.warn
  console.warn = originalConsoleWarn;

  console.log('âœ… No "Unknown data-action" warnings:', !unknownActionWarning ? 'PASS' : 'FAIL');

  // Overall result
  const allTests = [
    hasLocalizedText,
    !!triviaTile && !!flickwordTile,
    routerAvailable,
    modalFunctionAvailable,
    !unknownActionWarning,
  ];

  const allPassed = allTests.every((test) => test);
  console.log('ðŸŽ¯ Overall result:', allPassed ? 'âœ… ALL FIXES WORKING' : 'âŒ SOME ISSUES REMAIN');

  if (!allPassed) {
    console.log('ðŸ”§ Debug info:');
    console.log('- Localized text:', hasLocalizedText);
    console.log('- Data-actions registered:', !!triviaTile && !!flickwordTile);
    console.log('- Router available:', routerAvailable);
    console.log('- Modal available:', modalFunctionAvailable);
    console.log('- No warnings:', !unknownActionWarning);
  }

  // Manual verification steps
  console.log('ðŸ§ª Manual verification steps:');
  console.log('  1. Check tiles show "Daily Trivia" and "FlickWord" (not keys)');
  console.log('  2. Click tiles - should navigate without "Unknown data-action" warnings');
  console.log('  3. Modal should open with proper localized text');
  console.log('  4. Console should show "Handling game route" not "Unknown route"');
  console.log('  5. No horizontal scroll on resize');

  return allPassed;
})();

```

## _legacy_v1\www\scripts\components\BasePosterCard.js
```
/**
 * Base Poster Card Component - Unified Card System
 *
 * Process: Base Poster Card
 * Purpose: Single template for all poster-focused cards with 2:3 aspect ratio, unified layout
 * Data Source: Item data from various sources (FlickWord, Trivia, etc.)
 * Update Path: BasePosterCard component API and CSS variables
 * Dependencies: components.css, i18n.js
 */

(function () {
  'use strict';

  console.log('ðŸŽ´ Base Poster Card component loaded');

  /**
   * Create a standardized base poster card element
   * @param {Object} options - Card configuration
   * @param {string|number} options.id - Unique item ID
   * @param {string} options.posterUrl - Poster image URL
   * @param {string} options.title - Item title (will be converted to ALL CAPS)
   * @param {string} options.year - Year (optional)
   * @param {number} options.rating - Rating 0-10 (optional, only shown if > 0)
   * @param {Array} options.overflowActions - [{label, onClick, icon?}] (optional)
   * @param {Function} options.onClick - Click handler for card
   * @param {boolean} options.isDisabled - Disabled state
   * @param {string} options.subline - Subline text (for Trivia cards)
   * @param {boolean} options.hideRating - Hide rating line (for Trivia cards)
   * @returns {HTMLElement} Card element
   */
  function BasePosterCard({
    id,
    posterUrl,
    title,
    year,
    rating,
    overflowActions = [],
    onClick,
    isDisabled = false,
    subline,
    hideRating = false,
  }) {
    const card = document.createElement('button');
    card.className = 'base-poster-card';
    card.dataset.id = id;
    card.dataset.testid = 'poster-card';

    if (isDisabled) {
      card.classList.add('base-poster-card--disabled');
    }

    // Format title as ALL CAPS
    const formattedTitle = title ? title.toUpperCase() : '';
    const titleWithYear = year ? `${formattedTitle} (${year})` : formattedTitle;

    // Format rating as stars (only if > 0 and not hidden)
    const showRating = !hideRating && rating && rating > 0;
    const roundedRating = showRating ? Math.round(rating * 10) / 10 : 0;

    // Build card HTML
    const cardHTML = `
      <div class="base-poster-card__poster" data-testid="poster-image">
        ${
          posterUrl
            ? `<img src="${posterUrl}" alt="${title}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">`
            : '<div class="base-poster-card__placeholder">ðŸŽ¬</div>'
        }
        <div class="base-poster-card__placeholder" style="display: ${posterUrl ? 'none' : 'flex'};">ðŸŽ¬</div>
      </div>
      <div class="base-poster-card__content">
        <h3 class="base-poster-card__title" data-testid="poster-title">${titleWithYear}</h3>
        ${subline ? `<p class="base-poster-card__subline">${subline}</p>` : ''}
        ${showRating ? `<div class="base-poster-card__rating" data-testid="poster-rating">â˜…${roundedRating}</div>` : ''}
        ${
          overflowActions.length > 0
            ? `
          <div class="base-poster-card__overflow" data-testid="poster-menu">
            <button class="base-poster-card__overflow-btn" aria-label="More options">
              <span class="base-poster-card__overflow-dots">â€¢â€¢â€¢</span>
            </button>
            <div class="base-poster-card__overflow-menu" aria-hidden="true">
              ${overflowActions
                .map(
                  (action) => `
                <button class="base-poster-card__overflow-item" onclick="(${action.onClick.toString()})()">
                  ${action.icon ? `<span class="base-poster-card__overflow-icon">${action.icon}</span>` : ''}
                  <span class="base-poster-card__overflow-label">${action.label}</span>
                </button>
              `,
                )
                .join('')}
            </div>
          </div>
        `
            : ''
        }
      </div>
    `;

    card.innerHTML = cardHTML;

    // Add click handler
    if (onClick) {
      card.addEventListener('click', (e) => {
        // Don't trigger if clicking overflow menu
        if (!e.target.closest('.base-poster-card__overflow')) {
          onClick(id);
        }
      });
    }

    // Add overflow menu toggle
    const overflowBtn = card.querySelector('.base-poster-card__overflow-btn');
    const overflowMenu = card.querySelector('.base-poster-card__overflow-menu');

    if (overflowBtn && overflowMenu) {
      overflowBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const isOpen = overflowMenu.getAttribute('aria-hidden') === 'false';
        overflowMenu.setAttribute('aria-hidden', isOpen ? 'true' : 'false');
      });

      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!card.contains(e.target)) {
          overflowMenu.setAttribute('aria-hidden', 'true');
        }
      });
    }

    // Set accessibility attributes
    card.setAttribute('aria-label', `${title}${year ? ` (${year})` : ''}`);

    return card;
  }

  /**
   * Create skeleton loading cards
   * @param {number} count - Number of skeleton cards to create
   * @returns {Array<HTMLElement>} Array of skeleton card elements
   */
  function createSkeletonCards(count = 6) {
    const skeletons = [];
    for (let i = 0; i < count; i++) {
      const skeleton = document.createElement('div');
      skeleton.className = 'base-poster-card base-poster-card--skeleton';
      skeleton.innerHTML = `
        <div class="base-poster-card__poster base-poster-card__skeleton-shimmer"></div>
        <div class="base-poster-card__content">
          <div class="base-poster-card__title base-poster-card__skeleton-shimmer"></div>
          <div class="base-poster-card__subline base-poster-card__skeleton-shimmer"></div>
        </div>
      `;
      skeletons.push(skeleton);
    }
    return skeletons;
  }

  /**
   * Create empty state card
   * @param {string} message - Empty state message
   * @returns {HTMLElement} Empty state card element
   */
  function createEmptyState(message = 'Nothing here yet') {
    const emptyState = document.createElement('div');
    emptyState.className = 'base-poster-card base-poster-card--empty';
    emptyState.innerHTML = `
      <div class="base-poster-card__empty-content">
        <div class="base-poster-card__empty-icon">ðŸ“­</div>
        <p class="base-poster-card__empty-message">${message}</p>
      </div>
    `;
    return emptyState;
  }

  // Expose Base Poster Card component globally
  window.BasePosterCard = BasePosterCard;
  window.createSkeletonCards = createSkeletonCards;
  window.createEmptyState = createEmptyState;

  // Ensure global availability
  if (typeof window !== 'undefined') {
    window.BasePosterCard = window.BasePosterCard || BasePosterCard;
    window.createSkeletonCards = window.createSkeletonCards || createSkeletonCards;
    window.createEmptyState = window.createEmptyState || createEmptyState;
  }

  console.log('âœ… Base Poster Card component ready');
})();

```

## _legacy_v1\www\scripts\components\StatsCard.js
```
/**
 * StatsCard Component - FlickWord Statistics Display
 *
 * Process: StatsCard
 * Purpose: Reusable component for displaying FlickWord game statistics (streak, win%, games, last result)
 * Data Source: FlickWord game data from localStorage or API
 * Update Path: StatsCard component API and data binding
 * Dependencies: components.css, i18n.js
 */

(function () {
  'use strict';

  console.log('ðŸ“Š StatsCard component loaded');

  /**
   * Create a stats card element for FlickWord
   * @param {Object} options - Stats configuration
   * @param {number} options.streak - Current win streak
   * @param {number} options.winRate - Win percentage (0-100)
   * @param {number} options.totalGames - Total games played
   * @param {string} options.lastResult - Last game result (e.g., "7/10", "WIN", "LOSS")
   * @param {string} options.lastPlayed - Last played date (optional)
   * @returns {HTMLElement} Stats card element
   */
  function StatsCard({
    streak = 0,
    winRate = 0,
    totalGames = 0,
    lastResult = '',
    lastPlayed = '',
  }) {
    const statsCard = document.createElement('div');
    statsCard.className = 'stats-card';
    statsCard.dataset.testid = 'stats-card';

    // Format win rate as percentage
    const formattedWinRate = Math.round(winRate);

    // Format last played date
    const formattedLastPlayed = lastPlayed ? new Date(lastPlayed).toLocaleDateString() : '';

    const statsHTML = `
      <div class="stats-card__header">
        <h3 class="stats-card__title">Your Stats</h3>
      </div>
      <div class="stats-card__content">
        <div class="stats-card__stat">
          <div class="stats-card__stat-value" data-testid="stats-streak">${streak}</div>
          <div class="stats-card__stat-label">Streak</div>
        </div>
        <div class="stats-card__stat">
          <div class="stats-card__stat-value" data-testid="stats-win-rate">${formattedWinRate}%</div>
          <div class="stats-card__stat-label">Win Rate</div>
        </div>
        <div class="stats-card__stat">
          <div class="stats-card__stat-value" data-testid="stats-total-games">${totalGames}</div>
          <div class="stats-card__stat-label">Games</div>
        </div>
        <div class="stats-card__stat">
          <div class="stats-card__stat-value" data-testid="stats-last-result">${lastResult || 'â€”'}</div>
          <div class="stats-card__stat-label">Last Result</div>
        </div>
      </div>
      ${
        formattedLastPlayed
          ? `
        <div class="stats-card__footer">
          <div class="stats-card__last-played">Last played: ${formattedLastPlayed}</div>
        </div>
      `
          : ''
      }
    `;

    statsCard.innerHTML = statsHTML;

    return statsCard;
  }

  /**
   * Update stats card with new data
   * @param {HTMLElement} statsCard - Stats card element
   * @param {Object} newStats - New stats data
   */
  function updateStatsCard(statsCard, newStats) {
    if (!statsCard) return;

    const { streak, winRate, totalGames, lastResult, lastPlayed } = newStats;

    // Update streak
    const streakElement = statsCard.querySelector('[data-testid="stats-streak"]');
    if (streakElement) streakElement.textContent = streak || 0;

    // Update win rate
    const winRateElement = statsCard.querySelector('[data-testid="stats-win-rate"]');
    if (winRateElement) winRateElement.textContent = `${Math.round(winRate || 0)}%`;

    // Update total games
    const totalGamesElement = statsCard.querySelector('[data-testid="stats-total-games"]');
    if (totalGamesElement) totalGamesElement.textContent = totalGames || 0;

    // Update last result
    const lastResultElement = statsCard.querySelector('[data-testid="stats-last-result"]');
    if (lastResultElement) lastResultElement.textContent = lastResult || 'â€”';

    // Update last played
    const lastPlayedElement = statsCard.querySelector('.stats-card__last-played');
    if (lastPlayedElement && lastPlayed) {
      lastPlayedElement.textContent = `Last played: ${new Date(lastPlayed).toLocaleDateString()}`;
    }
  }

  /**
   * Load stats from localStorage
   * @returns {Object} Stats data
   */
  function loadStatsFromStorage() {
    try {
      const stored = localStorage.getItem('flickword-stats');
      if (stored) {
        return JSON.parse(stored);
      }
    } catch (error) {
      console.warn('Failed to load FlickWord stats from localStorage:', error);
    }

    return {
      streak: 0,
      winRate: 0,
      totalGames: 0,
      lastResult: '',
      lastPlayed: '',
    };
  }

  /**
   * Save stats to localStorage
   * @param {Object} stats - Stats data to save
   */
  function saveStatsToStorage(stats) {
    try {
      localStorage.setItem('flickword-stats', JSON.stringify(stats));
    } catch (error) {
      console.warn('Failed to save FlickWord stats to localStorage:', error);
    }
  }

  // Expose StatsCard component globally
  window.StatsCard = StatsCard;
  window.updateStatsCard = updateStatsCard;
  window.loadStatsFromStorage = loadStatsFromStorage;
  window.saveStatsToStorage = saveStatsToStorage;

  // Ensure global availability
  if (typeof window !== 'undefined') {
    window.StatsCard = window.StatsCard || StatsCard;
    window.updateStatsCard = window.updateStatsCard || updateStatsCard;
    window.loadStatsFromStorage = window.loadStatsFromStorage || loadStatsFromStorage;
    window.saveStatsToStorage = window.saveStatsToStorage || saveStatsToStorage;
  }

  console.log('âœ… StatsCard component ready');
})();

```

## _legacy_v1\www\scripts\game-tabs-init.js
```
/**
 * Game Tabs Initialization - FlickWord and Trivia Tab Management
 *
 * Process: Game Tabs Init
 * Purpose: Initialize and manage FlickWord and Trivia tabs with unified card system
 * Data Source: User stats, word archives, trivia categories
 * Update Path: Tab rendering and event handling
 * Dependencies: BasePosterCard.js, StatsCard.js, FlickWordTab.js, TriviaTab.js
 */

(function () {
  'use strict';

  console.log('ðŸŽ® Game Tabs initialization loaded');

  // Sample data for demonstration
  const sampleFlickWordStats = {
    streak: 5,
    winRate: 85,
    totalGames: 23,
    lastResult: '7/10',
    lastPlayed: new Date().toISOString(),
  };

  const sampleWordArchives = [
    { id: 'word-1', number: 1, date: '2024-01-15', title: 'PUZZLE' },
    { id: 'word-2', number: 2, date: '2024-01-16', title: 'RIDDLE' },
    { id: 'word-3', number: 3, date: '2024-01-17', title: 'BRAIN' },
    { id: 'word-4', number: 4, date: '2024-01-18', title: 'LOGIC' },
    { id: 'word-5', number: 5, date: '2024-01-19', title: 'THINK' },
  ];

  const sampleTriviaCategories = [
    {
      id: 'movies-90s',
      name: 'MOVIES: 1990s',
      type: 'movies',
      questionCount: 10,
      avgTime: '6:30',
      lastScore: '7/10',
    },
    {
      id: 'tv-shows',
      name: 'TV SHOWS',
      type: 'tv',
      questionCount: 15,
      avgTime: '8:45',
      lastScore: '12/15',
    },
    {
      id: 'music-classic',
      name: 'MUSIC: Classic Rock',
      type: 'music',
      questionCount: 12,
      avgTime: '5:20',
      lastScore: '9/12',
    },
    {
      id: 'sports-nfl',
      name: 'SPORTS: NFL',
      type: 'sports',
      questionCount: 8,
      avgTime: '4:15',
      lastScore: '6/8',
    },
    {
      id: 'history-ww2',
      name: 'HISTORY: World War II',
      type: 'history',
      questionCount: 20,
      avgTime: '12:30',
      lastScore: '16/20',
    },
    {
      id: 'science-physics',
      name: 'SCIENCE: Physics',
      type: 'science',
      questionCount: 10,
      avgTime: '7:45',
      lastScore: '8/10',
    },
  ];

  let currentTab = 'flickword';
  let flickwordTab = null;
  let triviaTab = null;

  /**
   * Initialize game tabs
   */
  function initGameTabs() {
    console.log('ðŸŽ® Initializing game tabs...');

    // Get tab containers
    const flickwordContainer = document.getElementById('flickword-tab');
    const triviaContainer = document.getElementById('trivia-tab');
    const tabButtons = document.querySelectorAll('.game-tab-btn');

    if (!flickwordContainer || !triviaContainer) {
      console.error('Game tab containers not found');
      return;
    }

    // Initialize FlickWord tab
    if (window.FlickWordTab) {
      flickwordTab = window.FlickWordTab({
        stats: sampleFlickWordStats,
        wordArchives: sampleWordArchives,
        onPlay: handleFlickWordPlay,
        onWordClick: handleWordClick,
      });
      flickwordContainer.appendChild(flickwordTab);
    }

    // Initialize Trivia tab
    if (window.TriviaTab) {
      triviaTab = window.TriviaTab({
        categories: sampleTriviaCategories,
        onPlay: handleTriviaPlay,
        onCategoryClick: handleCategoryClick,
      });
      triviaContainer.appendChild(triviaTab);
    }

    // Add tab button event listeners
    tabButtons.forEach((button) => {
      button.addEventListener('click', (e) => {
        const tabName = e.target.dataset.tab;
        switchTab(tabName);
      });
    });

    // Show initial tab
    switchTab('flickword');

    console.log('âœ… Game tabs initialized');
  }

  /**
   * Switch between tabs
   * @param {string} tabName - Tab to switch to
   */
  function switchTab(tabName) {
    console.log(`ðŸ”„ Switching to ${tabName} tab`);

    // Update tab buttons
    document.querySelectorAll('.game-tab-btn').forEach((btn) => {
      btn.classList.remove('active');
    });
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

    // Update tab content
    document.querySelectorAll('.game-tab').forEach((tab) => {
      tab.classList.remove('active');
    });
    document.getElementById(`${tabName}-tab`).classList.add('active');

    currentTab = tabName;
  }

  /**
   * Handle FlickWord play button click
   */
  function handleFlickWordPlay() {
    console.log('ðŸŽ¯ FlickWord play clicked');
    // Open FlickWord modal
    if (window.openFlickWordModal) {
      window.openFlickWordModal();
    } else {
      console.warn('FlickWord modal function not available');
    }
  }

  /**
   * Handle word card click
   * @param {string} wordId - Word ID
   */
  function handleWordClick(wordId) {
    console.log('ðŸ“ Word clicked:', wordId);
    // Open FlickWord modal with specific word
    if (window.openFlickWordModal) {
      window.openFlickWordModal(wordId);
    }
  }

  /**
   * Handle Trivia play button click
   */
  function handleTriviaPlay() {
    console.log('ðŸ§  Trivia play clicked');
    // Open Trivia modal
    if (window.openTriviaModal) {
      window.openTriviaModal();
    } else {
      console.warn('Trivia modal function not available');
    }
  }

  /**
   * Handle category card click
   * @param {string} categoryId - Category ID
   */
  function handleCategoryClick(categoryId) {
    console.log('ðŸ“š Category clicked:', categoryId);
    // Open Trivia modal with specific category
    if (window.openTriviaModal) {
      window.openTriviaModal(categoryId);
    }
  }

  /**
   * Update FlickWord stats
   * @param {Object} newStats - New stats data
   */
  function updateFlickWordStats(newStats) {
    if (flickwordTab && window.updateFlickWordTab) {
      window.updateFlickWordTab(flickwordTab, { stats: newStats });
    }
  }

  /**
   * Update Trivia categories
   * @param {Array} newCategories - New categories data
   */
  function updateTriviaCategories(newCategories) {
    if (triviaTab && window.updateTriviaTab) {
      window.updateTriviaTab(triviaTab, { categories: newCategories });
    }
  }

  /**
   * Show loading state for current tab
   */
  function showLoading() {
    if (currentTab === 'flickword' && flickwordTab && window.showFlickWordLoading) {
      window.showFlickWordLoading(flickwordTab);
    } else if (currentTab === 'trivia' && triviaTab && window.showTriviaLoading) {
      window.showTriviaLoading(triviaTab);
    }
  }

  // Expose functions globally
  window.initGameTabs = initGameTabs;
  window.switchGameTab = switchTab;
  window.updateFlickWordStats = updateFlickWordStats;
  window.updateTriviaCategories = updateTriviaCategories;
  window.showGameTabLoading = showLoading;

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initGameTabs);
  } else {
    initGameTabs();
  }

  console.log('âœ… Game Tabs initialization ready');
})();

```

## _legacy_v1\www\scripts\modals\games-teaser.js
```
/**
 * Games Teaser Modal
 * Shows a modal when game tiles are clicked but games aren't fully implemented yet
 */

(function () {
  'use strict';

  console.log('ðŸŽ® Games Teaser Modal loaded');

  // Helper function to get translation
  function t(key) {
    // Handle nested i18n keys
    const keys = key.split('.');
    let value = window.i18n;
    for (let i = 0; i < keys.length; i++) {
      if (value && typeof value === 'object' && keys[i] in value) {
        value = value[keys[i]];
      } else {
        return key; // Return key if not found
      }
    }
    return value;
  }

  // Create and show games teaser modal
  window.showGamesTeaserModal = function (gameType) {
    console.log('ðŸŽ® Showing games teaser modal for:', gameType);

    const modal = document.createElement('div');
    modal.className = 'modal games-teaser';
    modal.innerHTML = `
      <div class="modal__backdrop"></div>
      <div class="modal__dialog">
        <div class="modal__header">
          <h3>${t('games.teaser_title')}</h3>
          <button class="modal__close" aria-label="Close">Ã—</button>
        </div>
        <div class="modal__body">
          <p>${t('games.teaser_body')}</p>
        </div>
        <div class="modal__actions">
          <button class="btn btn-primary open-trivia">${t('games.open_trivia')}</button>
          <button class="btn btn-secondary open-flickword">${t('games.open_flickword')}</button>
          <button class="btn btn-link close">${t('games.maybe_later')}</button>
        </div>
      </div>
    `;

    document.body.appendChild(modal);

    // Close modal function
    const close = () => {
      modal.remove();
    };

    // Set up event listeners
    modal.querySelector('.modal__close').onclick = close;
    modal.querySelector('.close').onclick = close;
    modal.querySelector('.modal__backdrop').onclick = close;

    // Close on Escape key
    const handleEscape = (e) => {
      if (e.key === 'Escape') {
        close();
        document.removeEventListener('keydown', handleEscape);
      }
    };
    document.addEventListener('keydown', handleEscape);

    // Game action buttons
    modal.querySelector('.open-trivia').onclick = () => {
      if (window.openTriviaGame) {
        window.openTriviaGame();
      } else {
        console.log('ðŸŽ® Trivia game not available');
        alert('Trivia game coming soon!');
      }
      close();
    };

    modal.querySelector('.open-flickword').onclick = () => {
      if (window.openFlickWordGame) {
        window.openFlickWordGame();
      } else {
        console.log('ðŸŽ® FlickWord game not available');
        alert('FlickWord game coming soon!');
      }
      close();
    };

    // Focus management
    const firstButton = modal.querySelector('.open-trivia');
    if (firstButton) {
      firstButton.focus();
    }
  };
})();

```

## _legacy_v1\www\scripts\simple-tab-manager.js
```
/* ============== Simple Tab Manager ==============
   Simplified tab visibility management to prevent conflicts
*/

(function () {
  'use strict';

  const SimpleTabManager = {
    isSearching: false,
    currentTab: 'home',

    // Set search state
    setSearching: function (searching) {
      this.isSearching = searching;
      this.updateTabVisibility();
      FlickletDebug.info('ðŸ” Search state changed:', searching);
    },

    // Set current tab
    setCurrentTab: function (tab) {
      this.currentTab = tab;
      this.updateTabVisibility();
      FlickletDebug.info('ðŸ”„ Current tab changed:', tab);
    },

    // Update tab visibility based on current state
    updateTabVisibility: function () {
      const allTabs = ['homeTab', 'watchingTab', 'wishlistTab', 'watchedTab', 'discoverTab'];

      allTabs.forEach((tabId) => {
        const tab = document.getElementById(tabId);
        if (!tab) return;

        if (this.isSearching) {
          // During search: show all tabs
          tab.classList.remove('hidden', 'active');
          FlickletDebug.info(`ðŸ” Search mode - showing tab: ${tabId}`);
        } else {
          // Normal mode: hide current tab, show others
          const isCurrentTab = tabId === `${this.currentTab}Tab`;
          if (isCurrentTab) {
            tab.classList.add('hidden');
            tab.classList.remove('active');
            FlickletDebug.info(`âœ… Hidden current tab: ${tabId}`);
          } else {
            tab.classList.remove('hidden', 'active');
            FlickletDebug.info(`âœ… Shown tab: ${tabId}`);
          }
        }
      });
    },

    // Switch to a tab - Legacy Shim
    switchToTab: function (tab) {
      console.warn('[SimpleTabManager] LEGACY SHIM: Tab switching disabled - delegating to nav engine:', tab);
      
      // Feature flag check
      if (window.__useLegacyTabs) {
        console.warn('[SimpleTabManager] LEGACY MODE: Using old tab system');
        return this._legacySwitchToTab(tab);
      }
      
      // Delegate to nav engine
      const targetId = `${tab}Section`;
      if (window.navEngine && typeof window.navEngine.activate === 'function') {
        window.navEngine.activate(targetId);
      } else {
        console.error('[SimpleTabManager] Nav engine not available - falling back to legacy');
        return this._legacySwitchToTab(tab);
      }
    },

    // Legacy implementation (kept for rollback)
    _legacySwitchToTab: function (tab) {
      this.setCurrentTab(tab);

      // Clear search when switching tabs (unless switching to home while already searching)
      if (this.isSearching && tab !== 'home') {
        FlickletDebug.info('ðŸ§¹ Clearing search due to tab switch to:', tab);
        this.clearSearch();
      }

      // Update section visibility
      const allSections = [
        'homeSection',
        'watchingSection',
        'wishlistSection',
        'watchedSection',
        'discoverSection',
        'settingsSection',
      ];
      allSections.forEach((sectionId) => {
        const section = document.getElementById(sectionId);
        if (section) {
          section.classList.toggle('active', sectionId === `${tab}Section`);
          section.style.display = '';
        }
      });

      // Update home sections visibility
      this.updateHomeSections(tab === 'home');
    },

    // Clear search
    clearSearch: function () {
      FlickletDebug.info('ðŸ§¹ SimpleTabManager clearing search');

      // Clear search input
      const searchInput = document.getElementById('searchInput');
      if (searchInput) {
        searchInput.value = '';
      }

      // Hide search results
      const searchResults = document.getElementById('searchResults');
      if (searchResults) {
        searchResults.style.display = 'none';
      }

      // Set search state to false
      this.setSearching(false);

      // Show home sections
      this.updateHomeSections(true);

      // Call global clearSearch if available
      if (typeof window.clearSearch === 'function') {
        window.clearSearch();
      }
    },

    // Update home sections visibility
    updateHomeSections: function (showHome) {
      const homeSections = [
        'curatedSections',
        'currentlyWatchingPreview',
        'up-next-row',
        'spotlight-row',
        'quote-flickword-container',
        'feedbackSection',
        'theaters-section',
      ];

      homeSections.forEach((sectionId) => {
        const section = document.getElementById(sectionId);
        if (section) {
          section.style.display = showHome ? 'block' : 'none';
        }
      });
    },
  };

  // Expose globally
  window.SimpleTabManager = SimpleTabManager;

  // Override the complex systems
  if (window.FlickletApp) {
    // Override the complex tab switching
    const originalSwitchToTab = window.FlickletApp.switchToTab;
    window.FlickletApp.switchToTab = function (tab) {
      FlickletDebug.info('ðŸ”„ SimpleTabManager handling tab switch:', tab);
      SimpleTabManager.switchToTab(tab);

      // Call original for other functionality
      if (originalSwitchToTab) {
        originalSwitchToTab.call(this, tab);
      }
    };

    // Override search state management
    Object.defineProperty(window.FlickletApp, 'isSearching', {
      get: function () {
        return SimpleTabManager.isSearching;
      },
      set: function (value) {
        SimpleTabManager.setSearching(value);
      },
    });
  }

  FlickletDebug.info('ðŸ§© Simple Tab Manager loaded');
})();

```

## _legacy_v1\www\scripts\trivia.js
```
/* ========== trivia.js ==========
   Daily trivia tile with streaks. No network calls. Uses localStorage.
   Keys: flicklet:trivia:v1:streak, flicklet:trivia:v1:lastDate, flicklet:trivia:v1:lockDate
*/
(function () {
  const el = document.getElementById('triviaTile');
  if (!el) return;

  const qEl = document.getElementById('triviaQuestion');
  const cEl = document.getElementById('triviaChoices');
  const fEl = document.getElementById('triviaFeedback');
  const nBtn = document.getElementById('triviaNextBtn');
  const statsEl = el.querySelector('.trivia-stats');

  // Safety check - if required elements don't exist, skip initialization
  if (!qEl || !cEl || !fEl || !nBtn) {
    console.warn('Trivia: Required elements not found, skipping initialization');
    return;
  }

  // Safety check - if statsEl doesn't exist, create a placeholder or skip stats
  if (!statsEl) {
    console.warn('trivia-stats element not found, creating placeholder');
    const placeholder = document.createElement('div');
    placeholder.className = 'trivia-stats';
    placeholder.style.display = 'none'; // Hide if no stats needed
    el.appendChild(placeholder);
  }

  const KEYS = {
    streak: 'flicklet:trivia:v1:streak',
    last: 'flicklet:trivia:v1:lastDate',
    lock: 'flicklet:trivia:v1:lockDate',
  };

  const today = isoDay(new Date()); // YYYY-MM-DD

  // External trivia API integration
  const TRIVIA_API_BASE = 'https://opentdb.com/api.php';

  // Fallback pool for when API fails
  const FALLBACK_POOL = [
    {
      id: 'q1',
      q: 'Which network originally aired "Archer"?',
      choices: ['HBO', 'FX', 'AMC', 'Paramount+'],
      correct: 1,
    },
    {
      id: 'q2',
      q: '"Alien: Earth" is a spin-off in which franchise?',
      choices: ['Predator', 'Alien', 'Star Trek', 'The Expanse'],
      correct: 1,
    },
    {
      id: 'q3',
      q: 'Sherlock (2010) starred Benedict Cumberbatch andâ€¦',
      choices: ['Tom Hiddleston', 'Martin Freeman', 'David Tennant', 'Matt Smith'],
      correct: 1,
    },
    {
      id: 'q4',
      q: '"House of the Dragon" streams primarily onâ€¦',
      choices: ['HBO Max', 'Netflix', 'Hulu', 'Apple TV+'],
      correct: 0,
    },
    {
      id: 'q5',
      q: 'Which streaming service is known for "The Mandalorian"?',
      choices: ['Netflix', 'Disney+', 'HBO Max', 'Amazon Prime'],
      correct: 1,
    },
    {
      id: 'q6',
      q: 'What year did "Breaking Bad" first air?',
      choices: ['2007', '2008', '2009', '2010'],
      correct: 1,
    },
    {
      id: 'q7',
      q: 'Who created "Stranger Things"?',
      choices: ['Ryan Murphy', 'The Duffer Brothers', 'Shonda Rhimes', 'David Fincher'],
      correct: 1,
    },
    {
      id: 'q8',
      q: 'Which show features the character Walter White?',
      choices: ['Better Call Saul', 'Breaking Bad', 'The Walking Dead', 'Ozark'],
      correct: 1,
    },
  ];

  // Cache for trivia questions
  let triviaCache = null;
  let lastFetchDate = null;

  // Current question data (accessible to choose function)
  let currentQuestion = null;

  // Fetch trivia questions from API
  async function fetchTriviaQuestions(lang = 'en') {
    const langCode = lang === 'es' ? 'es' : 'en';
    const cacheKey = `trivia_${langCode}_${today}`;

    // Check cache first
    if (triviaCache && lastFetchDate === today) {
      console.log('ðŸ§  Using cached trivia questions');
      return triviaCache;
    }

    try {
      console.log('ðŸ§  Fetching trivia questions from API for language:', langCode);
      const response = await fetch(
        `${TRIVIA_API_BASE}?amount=10&category=10&difficulty=medium&type=multiple&encode=url3986&lang=${langCode}`,
      );

      if (response.status === 429) {
        console.warn('ðŸ§  API rate limited, using fallback questions');
        return FALLBACK_POOL;
      }

      const data = await response.json();

      if (data.response_code === 0 && data.results && data.results.length > 0) {
        // Convert API format to our format
        const questions = data.results.map((item, index) => {
          const correctAnswer = decodeURIComponent(item.correct_answer);
          const incorrectAnswers = item.incorrect_answers.map((ans) => decodeURIComponent(ans));
          const allChoices = [correctAnswer, ...incorrectAnswers];

          // Shuffle choices and track correct index
          const shuffledChoices = [...allChoices].sort(() => Math.random() - 0.5);
          const correctIndex = shuffledChoices.indexOf(correctAnswer);

          return {
            id: `api_${index}`,
            q: decodeURIComponent(item.question),
            choices: shuffledChoices,
            correct: correctIndex,
          };
        });

        triviaCache = questions;
        lastFetchDate = today;
        console.log('ðŸ§  Trivia questions fetched successfully:', questions.length);
        return questions;
      } else {
        throw new Error('Invalid API response');
      }
    } catch (error) {
      console.warn('ðŸ§  Failed to fetch trivia from API, using fallback:', error);
      return FALLBACK_POOL;
    }
  }

  // Get current language
  function getCurrentLanguage() {
    return window.appData?.settings?.lang || window.FlickletApp?.appData?.settings?.lang || 'en';
  }

  // Initialize trivia
  async function initTrivia() {
    const lang = getCurrentLanguage();
    const questions = await fetchTriviaQuestions(lang);
    const q = questions[hashToIndex(today, questions.length)];

    // Store current question for choose function access
    currentQuestion = q;

    // Lock logic disabled - allow unlimited questions
    const locked = false;

    // Render
    renderStats();
    renderQuestion(q, locked);
  }

  // Refresh trivia for language change
  window.__FlickletRefreshTrivia = async function () {
    console.log('ðŸ§  Refreshing trivia for language change');
    const lang = getCurrentLanguage();
    console.log('ðŸ§  Current language for trivia:', lang);

    // Clear cache to force fresh fetch
    triviaCache = null;
    lastFetchDate = null;

    const questions = await fetchTriviaQuestions(lang);
    const q = questions[hashToIndex(today, questions.length)];

    // Store current question for choose function access
    currentQuestion = q;

    console.log('ðŸ§  New trivia question:', {
      id: q.id,
      question: q.q.substring(0, 50) + '...',
      choices: q.choices.length,
      language: lang,
    });

    // Lock logic disabled - allow unlimited questions
    const locked = false;

    renderStats();
    renderQuestion(q, locked);
  };

  // Start trivia
  initTrivia();

  // Expose trivia functionality for other systems to use
  window.FlickletTrivia = {
    // Get current question data
    getCurrentQuestion: function () {
      const qEl = document.getElementById('triviaQuestion');
      const cEl = document.getElementById('triviaChoices');

      if (!qEl || !cEl) return null;

      const question = qEl.textContent;
      const choices = Array.from(cEl.children).map((li) => li.textContent);

      // Find correct answer by looking at the data attributes
      let correctIndex = 0;
      for (let i = 0; i < cEl.children.length; i++) {
        if (cEl.children[i].dataset.idx == '0') {
          // Correct answer is always at index 0 after shuffling
          correctIndex = i;
          break;
        }
      }

      return {
        id: 'main_trivia',
        question: question,
        options: choices,
        correct: correctIndex,
        source: 'main_system',
      };
    },

    // Check if trivia is locked for today
    isLockedToday: function () {
      const lockDate = localStorage.getItem(KEYS.lock);
      return lockDate === today;
    },

    // Get current streak
    getCurrentStreak: function () {
      return Number(localStorage.getItem(KEYS.streak) || 0);
    },

    // Get stats
    getStats: function () {
      return {
        streak: Number(localStorage.getItem(KEYS.streak) || 0),
        lastDate: localStorage.getItem(KEYS.last),
        locked: localStorage.getItem(KEYS.lock) === today,
      };
    },
  };

  function renderStats() {
    if (!statsEl) {
      console.warn('statsEl not available, skipping stats render');
      return;
    }

    const streak = Number(localStorage.getItem(KEYS.streak) || 0);
    const last = localStorage.getItem(KEYS.last);
    const streakText = t('flickword_streak') || 'Streak';
    const completedText = t('trivia_completed_today') || ' â€¢ Completed today';
    statsEl.textContent = `${streakText}: ${streak}${last === today ? completedText : ''}`;
  }

  function renderQuestion(q, isLocked) {
    if (!qEl) {
      console.warn('Trivia: Question element not found, skipping render');
      return;
    }
    qEl.textContent = q.q;
    if (cEl) cEl.innerHTML = '';
    if (fEl) fEl.textContent = '';
    if (nBtn) nBtn.hidden = true;

    q.choices.forEach((text, idx) => {
      const li = document.createElement('li');
      li.setAttribute('role', 'option');
      li.setAttribute('tabindex', '0');
      li.dataset.idx = idx;
      li.textContent = text;

      if (isLocked) {
        li.setAttribute('aria-disabled', 'true');
        li.style.opacity = '.6';
        li.style.cursor = 'not-allowed';
      } else {
        li.addEventListener('click', () => choose(idx));
        li.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            choose(idx);
          }
        });
      }
      cEl.appendChild(li);
    });

    if (isLocked) {
      fEl.textContent = t('trivia_come_back_tomorrow') || 'Come back tomorrow for a new question.';
    }
  }

  function choose(idx) {
    // Check if current question is available
    if (!currentQuestion) {
      console.error('ðŸ§  No current question available for trivia');
      return;
    }

    const correctIdx = currentQuestion.correct;
    const items = Array.from(cEl.children);

    // Prevent double answers
    if ([...items].some((li) => li.classList.contains('correct') || li.classList.contains('wrong')))
      return;

    items.forEach((li) => li.setAttribute('aria-selected', 'false'));
    const chosen = items[idx];
    chosen.setAttribute('aria-selected', 'true');

    const isCorrect = idx === correctIdx;
    chosen.classList.add(isCorrect ? 'correct' : 'wrong');
    const correctText = t('trivia_correct') || 'Correct!';
    const incorrectText = t('trivia_incorrect_answer') || 'Nope â€” correct answer is';
    fEl.textContent = isCorrect
      ? `${correctText} âœ”`
      : `${incorrectText} "${currentQuestion.choices[correctIdx]}".`;

    // Notify (optional)
    if (window.Notify) {
      const streakUpText = t('trivia_streak_up') || 'Trivia: +1 streak';
      const tryAgainText = t('trivia_try_again_tomorrow') || 'Trivia: try again tomorrow';
      if (isCorrect) Notify.success(streakUpText);
      else Notify.info(tryAgainText);
    }

    // Update streak (no locking - unlimited questions)
    if (isCorrect) {
      bumpStreak();
    }

    // Always show next button after answering
    nBtn.hidden = false;
    nBtn.style.display = 'block';
    nBtn.style.visibility = 'visible';
    nBtn.style.opacity = '1';
    nBtn.style.position = 'static';
    nBtn.style.zIndex = '10';
    nBtn.textContent = isCorrect
      ? t('trivia_next_question') || 'Next Question'
      : t('trivia_try_again') || 'Try Again';
    nBtn.onclick = () => {
      try {
        loadNextQuestion().catch((error) => {
          console.error('ðŸ§  Unhandled promise rejection in loadNextQuestion:', error);
          // Show error message to user
          fEl.textContent = 'Error loading next question. Please refresh the page.';
          nBtn.hidden = true;
        });
      } catch (error) {
        console.error('ðŸ§  Error in loadNextQuestion click handler:', error);
        fEl.textContent = 'Error loading next question. Please refresh the page.';
        nBtn.hidden = true;
      }
    };

    // Force a reflow to ensure the button is visible
    nBtn.offsetHeight;

    console.log('ðŸ§  Next button shown after answer', {
      isCorrect: isCorrect,
      hidden: nBtn.hidden,
      display: nBtn.style.display,
      visibility: nBtn.style.visibility,
      opacity: nBtn.style.opacity,
      textContent: nBtn.textContent,
      computedStyle: window.getComputedStyle(nBtn).display,
    });
    renderStats();
  }

  // Load next question
  async function loadNextQuestion() {
    console.log('ðŸ§  Loading next trivia question...');

    try {
      const lang = getCurrentLanguage();
      const questions = await fetchTriviaQuestions(lang);

      // Get a different question (not the same as current)
      let nextQuestion;
      let attempts = 0;
      do {
        nextQuestion = questions[hashToIndex(today + '_' + attempts, questions.length)];
        attempts++;
      } while (
        nextQuestion &&
        currentQuestion &&
        nextQuestion.id === currentQuestion.id &&
        attempts < 10
      );

      // If we couldn't find a different question, just use the first one
      if (!nextQuestion || (currentQuestion && nextQuestion.id === currentQuestion.id)) {
        nextQuestion = questions[0];
      }

      // Store the new question
      currentQuestion = nextQuestion;

      // Reset the UI
      fEl.textContent = '';
      nBtn.hidden = true;
      nBtn.style.display = 'none';

      // Clear any existing choice styling
      const items = Array.from(cEl.children);
      items.forEach((li) => {
        li.classList.remove('correct', 'wrong');
        li.setAttribute('aria-selected', 'false');
      });

      // Render the new question
      renderQuestion(nextQuestion, false);

      console.log('ðŸ§  Next question loaded:', nextQuestion.q.substring(0, 50) + '...');
    } catch (error) {
      console.error('ðŸ§  Error loading next question:', error);
      // Fallback: just hide the button and show error
      nBtn.hidden = true;
      fEl.textContent = 'Error loading next question. Please refresh the page.';
    }
  }

  function bumpStreak() {
    const last = localStorage.getItem(KEYS.last);
    const streak = Number(localStorage.getItem(KEYS.streak) || 0);

    if (last === prevDay(today)) {
      localStorage.setItem(KEYS.streak, String(streak + 1));
    } else if (last === today) {
      // already counted today; no change
    } else {
      // missed a day or first time
      localStorage.setItem(KEYS.streak, '1');
    }
    localStorage.setItem(KEYS.last, today);
  }

  // Helpers
  function isoDay(d) {
    return d.toISOString().slice(0, 10);
  }
  function prevDay(s) {
    const d = new Date(s + 'T00:00:00Z');
    d.setUTCDate(d.getUTCDate() - 1);
    return isoDay(d);
  }
  function hashToIndex(str, mod) {
    let h = 0;
    for (let i = 0; i < str.length; i++) h = ((h << 5) - h + str.charCodeAt(i)) | 0;
    return Math.abs(h) % mod;
  }
})();

```

## apps\web\vite.config.ts
```
import { defineConfig, loadEnv } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'node:path';
import { fileURLToPath } from 'node:url';
import { visualizer } from 'rollup-plugin-visualizer';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const repoRoot = path.resolve(__dirname, '../../');
const inputsPath = path.resolve(__dirname, '../../migration/inputs');

export default defineConfig(({ mode }) => {
  // Load VITE_* from both places; app wins.
  const envApp  = loadEnv(mode, __dirname, 'VITE_');
  const envRoot = loadEnv(mode, repoRoot, 'VITE_');
  const env = { ...envRoot, ...envApp };

  return {
    plugins: [
      react(),
      visualizer({
        filename: 'dist/bundle-analysis.html',
        open: false,
        gzipSize: true,
        brotliSize: true,
      }),
    ],
    envDir: __dirname,
    envPrefix: ['VITE_'],
    define: {
      'import.meta.env.VITE_TMDB_KEY': JSON.stringify((env.VITE_TMDB_KEY || '').trim())
    },
    resolve: {
      alias: {
        '@': path.resolve(__dirname, './src'),
        '#inputs': inputsPath
      }
    },
    server: {
      fs: { allow: [inputsPath, path.resolve(__dirname, '..'), repoRoot] },
      // Proxy API requests to backend server in dev mode
      proxy: {
        '/api/v1': {
          target: 'http://localhost:4000',
          changeOrigin: true,
          secure: false,
        }
      },
      // Configure HMR to work through Netlify dev proxy
      // When running through netlify dev (port 8888), HMR should connect through the proxy
      // netlify dev sets NETLIFY_DEV=true, or we detect by checking if port 4173 is in args
      hmr: process.env.NETLIFY_DEV || process.argv.some(arg => arg.includes('4173'))
        ? { clientPort: 8888 }
        : undefined,
    },
    build: {
      rollupOptions: {
        output: {
          manualChunks: {
            // Firebase chunks - separate auth and firestore
            'firebase-auth': ['firebase/auth'],
            'firebase-firestore': ['firebase/firestore'],
            'firebase-app': ['firebase/app'],
            
            // React vendor chunk
            'react-vendor': ['react', 'react-dom'],
            
            // Game components - lazy loaded
            'games': [
              './src/components/games/TriviaGame.tsx',
              './src/components/games/FlickWordModal.tsx',
              './src/components/games/TriviaModal.tsx',
              './src/components/games/FlickWordStats.tsx',
              './src/components/games/TriviaStats.tsx'
            ],
            
            // Modal components - lazy loaded
            'modals': [
              './src/components/modals/NotificationSettings.tsx',
              './src/components/modals/NotificationCenter.tsx',
              './src/components/modals/EpisodeTrackingModal.tsx',
              './src/components/modals/NotesAndTagsModal.tsx',
              './src/components/modals/NotInterestedModal.tsx'
            ],
            
            // Page components - lazy loaded
            'pages': [
              './src/pages/ListPage.tsx',
              './src/pages/MyListsPage.tsx',
              './src/pages/DiscoveryPage.tsx'
            ],
            
            // Settings - heavy component
            'settings': [
              './src/components/SettingsPage.tsx'
            ],
            
            // Community features
            'community': [
              './src/components/CommunityPanel.tsx',
              './src/components/CommunityPlayer.tsx'
            ]
          }
        }
      }
    }
  };
});

```

## scripts\audit.ps1
```
# PowerShell audit script for Windows
$fail = 0

function Check {
    param($name, $command)
    try {
        Invoke-Expression $command | Out-Null
        Write-Host "PASS  $name" -ForegroundColor Green
    }
    catch {
        Write-Host "FAIL  $name" -ForegroundColor Red
        $script:fail++
    }
}

# A) Netlify + Functions
Check "Netlify dev command" {
    $content = Get-Content "netlify.toml" -Raw
    $content -match 'command\s*=\s*"npm run dev --prefix apps/web -- --port 4173 --strictPort"'
}

Check "Functions directory path" {
    $content = Get-Content "netlify.toml" -Raw
    $content -match '\[functions\]' -and $content -match 'directory\s*=\s*"netlify/functions"'
}

# B) Functions runtime + presence
Check "send-email.cjs exists" {
    Test-Path "netlify/functions/send-email.cjs"
}

# C) FlickWord UI + modal bits
Check "FlickWord files present" {
    Test-Path "apps/web/src/components/games/FlickWordGame.tsx" -and Test-Path "apps/web/src/components/games/FlickWordModal.tsx"
}

Check "FlickWordModal has controls" {
    $content = Get-Content "apps/web/src/components/games/FlickWordModal.tsx" -Raw
    $content -match "close|stats"
}

Check "FlickWord CSS sizing rules present" {
    $content = Get-Content "apps/web/src/styles/flickword.css" -Raw
    $content -match "\.fw-tile|\.fw-keyboard"
}

# D) Cache busting helpers exist
Check "Game cache helpers present" {
    $wordApi = Get-Content "apps/web/src/lib/dailyWordApi.ts" -Raw
    $triviaApi = Get-Content "apps/web/src/lib/dailyTriviaApi.ts" -Raw
    ($wordApi -match "clearWordCache|getFreshWord") -and ($triviaApi -match "clearTriviaCache|getFreshTrivia")
}

# E) API provider swap present
Check "Datamuse/Random Word providers referenced" {
    $wordApi = Get-Content "apps/web/src/lib/dailyWordApi.ts" -Raw
    $wordApi -match "datamuse|random-word"
}

# F) Unused imports should be gone
Check "No getTodaysWord/getTodaysTrivia leftovers" {
    $files = Get-ChildItem -Path "apps/web/src" -Recurse -Include "*.ts", "*.tsx"
    $found = $false
    foreach ($file in $files) {
        $content = Get-Content $file.FullName -Raw
        if ($content -match "getTodaysWord|getTodaysTrivia") {
            $found = $true
            break
        }
    }
    -not $found
}

# G) Lighthouse meta/manifest/theme-color
Check "Meta description / manifest / theme-color present" {
    $content = Get-Content "apps/web/index.html" -Raw
    $content -match '<meta name="description"' -and $content -match '<link rel="manifest"' -and $content -match '<meta name="theme-color"'
}

# H) TabCard watching move routing is correct
Check "TabCard watching move mapped" {
    $content = Get-Content "apps/web/src/components/cards/TabCard.tsx" -Raw
    $content -match "Library\.move\(.*'watching'\)"
}

# I) CardV2 square-buttons saga residue (informational)
Check "CardV2 square-button clues (informational)" {
    $content = Get-Content "apps/web/src/components/cards/CardV2.tsx" -Raw
    $content -match "isSquare|aspectRatio|w-\[68px\]|!w-10|!h-10|lucide-react"
}

# J) lucide-react dep (optional)
Check "lucide-react dependency (optional)" {
    $packageJson = Get-Content "apps/web/package.json" | ConvertFrom-Json
    $packageJson.dependencies."lucide-react" -ne $null
}

# K) Poster click â†’ TMDB
Check "Poster click opens TMDB" {
    $content = Get-Content "apps/web/src/components/cards/CardV2.tsx" -Raw
    $content -match "window\.open\(.*tmdb|themoviedb\.org"
}

# L) Pro default enabled
Check "Pro enabled by default" {
    $content = Get-Content "apps/web/src/lib/settings.ts" -Raw
    $content -match "isPro:\s*true"
}

# M) Discovery action handlers
Check "Discovery uses Library.upsert" {
    $content = Get-Content "apps/web/src/pages/DiscoveryPage.tsx" -Raw
    $content -match "Library\.upsert\("
}

# N) Duplicate filtering (should be removed per revert)
Check "No discovery dedupe logic (expected absent)" {
    $files = Get-ChildItem -Path "apps/web/src" -Recurse -Include "*.ts", "*.tsx"
    $found = $false
    foreach ($file in $files) {
        $content = Get-Content $file.FullName -Raw
        if ($content -match "smartDiscovery|existingIds|excludeExisting") {
            $found = $true
            break
        }
    }
    -not $found
}

# O) Header/search refs present; Filters row removed
Check "HeaderV2/UnifiedSearch/AvatarMenu present" {
    (Test-Path "apps/web/src/components/HeaderV2.tsx") -and (Test-Path "apps/web/src/components/UnifiedSearch.tsx") -and (Test-Path "apps/web/src/components/AvatarMenu.tsx")
}

Check "Filters row removed (no FiltersButton)" {
    $files = Get-ChildItem -Path "apps/web/src/components" -Recurse -Include "*.ts", "*.tsx"
    $found = $false
    foreach ($file in $files) {
        $content = Get-Content $file.FullName -Raw
        if ($content -match "FiltersButton") {
            $found = $true
            break
        }
    }
    -not $found
}

# P) Bottom-nav equal width tabs
Check "MobileTabs flex-1 aria-label present" {
    $content = Get-Content "apps/web/src/components/MobileTabs.tsx" -Raw
    $content -match "flex-1"
}

# Q) Auth timing fix present
Check "Auth timing: onAuthStateChanged + loading true" {
    $authContent = Get-Content "apps/web/src/lib/auth.ts" -Raw
    $hookContent = Get-Content "apps/web/src/hooks/useAuth.ts" -Raw
    ($authContent -match "onAuthStateChanged") -and ($hookContent -match "loading.*true")
}

Write-Host "`nAudit completed with $fail failures"
exit $fail


```

## scripts\audit.sh
```
#!/usr/bin/env bash
set -euo pipefail

fail=0

check() {
  name="$1"; shift
  if bash -lc "$@" >/dev/null 2>&1; then
    printf "PASS  %s\n" "$name"
  else
    printf "FAIL  %s\n" "$name"
    fail=$((fail+1))
  fi
}

# A) Netlify + Functions
check "Netlify dev command" \
  "rg -n '^\s*command\s*=\s*\"npm run dev --prefix apps/web -- --port 4173 --strictPort\"' netlify.toml || rg -n '^\s*command\s*=\s*\"npm run dev -- --port 4173 --strictPort\"' netlify.toml"

check "Functions directory path" \
  "rg -n '^\s*\[functions\]' netlify.toml && rg -n '^\s*directory\s*=\s*\"netlify/functions\"' netlify.toml"

# B) Functions runtime + presence
check "send-email.cjs exists" \
  "[ -f netlify/functions/send-email.cjs ]"

# C) FlickWord UI + modal bits
check "FlickWord files present" \
  "rg -n 'FlickWord(Game|Modal)' apps/web/src/components/games"
check "FlickWordModal has controls" \
  "rg -n 'close|stats' apps/web/src/components/games/FlickWordModal.tsx"
check "FlickWord CSS sizing rules present" \
  "rg -n '\.flickword-(tile|keyboard)' apps/web/src/**/*.css"

# D) Cache busting helpers exist
check "Game cache helpers present" \
  "rg -n 'clearWordCache|getFreshWord|clearTriviaCache|getFreshTrivia' apps/web/src"

# E) API provider swap present
check "Datamuse/Random Word providers referenced" \
  "rg -n 'datamuse|random-word' apps/web/src netlify/functions"

# F) Unused imports should be gone
check "No getTodaysWord/getTodaysTrivia leftovers" \
  "! rg -n 'getTodaysWord|getTodaysTrivia' apps/web/src"

# G) Lighthouse meta/manifest/theme-color
check "Meta description / manifest / theme-color present" \
  "rg -n '<meta name=\"description\"|<link rel=\"manifest\"|<meta name=\"theme-color\"' apps/web/index.html"

# H) TabCard watching move routing is correct
check "TabCard watching move mapped" \
  "rg -n 'Library\.move\(.*'\\''watching'\\''\)' apps/web/src/components/cards/TabCard.tsx"

# I) CardV2 square-buttons saga residue (informational)
check "CardV2 square-button clues (informational)" \
  "rg -n 'isSquare|aspectRatio|w-\\[68px\\]|!w-10|!h-10|lucide-react' apps/web/src/components/cards/CardV2.tsx || true"

# J) lucide-react dep (only if icons retained)
check "lucide-react dependency (optional)" \
  "jq -r '.dependencies[\"lucide-react\"] // empty' apps/web/package.json | rg . || true"

# K) Poster click â†’ TMDB
check "Poster click opens TMDB" \
  "rg -n 'window\.open\\(.*tmdb|themoviedb\.org' apps/web/src/components"

# L) Pro default enabled
check "Pro enabled by default" \
  "rg -n 'isPro:\\s*true' apps/web/src/lib/settings.ts"

# M) Discovery action handlers
check "Discovery uses Library.upsert" \
  "rg -n 'Library\.upsert\\(' apps/web/src/pages/DiscoveryPage.tsx apps/web/src/components"

# N) Duplicate filtering (should be removed per revert)
check "No discovery dedupe logic (expected absent)" \
  "! rg -n 'smartDiscovery|existingIds|excludeExisting' apps/web/src"

# O) Header/search refs present; Filters row removed
check "HeaderV2/UnifiedSearch/AvatarMenu present" \
  "rg -n 'HeaderV2|UnifiedSearch|AvatarMenu' apps/web/src/components"
check "Filters row removed (no FiltersButton)" \
  "! rg -n 'FiltersButton' apps/web/src/components"

# P) Bottom-nav equal width tabs
check "MobileTabs flex-1 aria-label present" \
  "rg -n 'MobileTabs|flex-1|aria-label' apps/web/src/components"

# Q) Auth timing fix present
check "Auth timing: onAuthStateChanged + loading true" \
  "rg -n 'onAuthStateChanged|useAuth|loading:\\s*true' apps/web/src"

exit $fail





```

## scripts\audit-simple.ps1
```
# Simple PowerShell audit script for Windows
Write-Host "Running Flicklet Restore Audit..." -ForegroundColor Cyan

$fail = 0

# A) Netlify + Functions
Write-Host "`n=== Netlify Configuration ===" -ForegroundColor Yellow

$netlifyContent = Get-Content "netlify.toml" -Raw
if ($netlifyContent -match 'command\s*=\s*"npm run dev --prefix apps/web -- --port 4173 --strictPort"') {
    Write-Host "PASS  Netlify dev command" -ForegroundColor Green
} else {
    Write-Host "FAIL  Netlify dev command" -ForegroundColor Red
    $fail++
}

if ($netlifyContent -match '\[functions\]' -and $netlifyContent -match 'directory\s*=\s*"netlify/functions"') {
    Write-Host "PASS  Functions directory path" -ForegroundColor Green
} else {
    Write-Host "FAIL  Functions directory path" -ForegroundColor Red
    $fail++
}

# B) Functions runtime + presence
if (Test-Path "netlify/functions/send-email.cjs") {
    Write-Host "PASS  send-email.cjs exists" -ForegroundColor Green
} else {
    Write-Host "FAIL  send-email.cjs exists" -ForegroundColor Red
    $fail++
}

if (Test-Path "netlify/functions/tmdb-proxy.cjs") {
    Write-Host "PASS  tmdb-proxy.cjs exists" -ForegroundColor Green
} else {
    Write-Host "FAIL  tmdb-proxy.cjs exists" -ForegroundColor Red
    $fail++
}

# C) FlickWord UI + modal bits
Write-Host "`n=== FlickWord Components ===" -ForegroundColor Yellow

if ((Test-Path "apps/web/src/components/games/FlickWordGame.tsx") -and (Test-Path "apps/web/src/components/games/FlickWordModal.tsx")) {
    Write-Host "PASS  FlickWord files present" -ForegroundColor Green
} else {
    Write-Host "FAIL  FlickWord files present" -ForegroundColor Red
    $fail++
}

if (Test-Path "apps/web/src/components/games/FlickWordModal.tsx") {
    $modalContent = Get-Content "apps/web/src/components/games/FlickWordModal.tsx" -Raw
    if ($modalContent -match "close|stats") {
        Write-Host "PASS  FlickWordModal has controls" -ForegroundColor Green
    } else {
        Write-Host "FAIL  FlickWordModal has controls" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  FlickWordModal has controls" -ForegroundColor Red
    $fail++
}

if (Test-Path "apps/web/src/styles/flickword.css") {
    $cssContent = Get-Content "apps/web/src/styles/flickword.css" -Raw
    if ($cssContent -match "\.fw-tile|\.fw-keyboard") {
        Write-Host "PASS  FlickWord CSS sizing rules present" -ForegroundColor Green
    } else {
        Write-Host "FAIL  FlickWord CSS sizing rules present" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  FlickWord CSS sizing rules present" -ForegroundColor Red
    $fail++
}

# D) Cache busting helpers exist
Write-Host "`n=== Game Cache Helpers ===" -ForegroundColor Yellow

if ((Test-Path "apps/web/src/lib/dailyWordApi.ts") -and (Test-Path "apps/web/src/lib/dailyTriviaApi.ts")) {
    $wordApi = Get-Content "apps/web/src/lib/dailyWordApi.ts" -Raw
    $triviaApi = Get-Content "apps/web/src/lib/dailyTriviaApi.ts" -Raw
    if (($wordApi -match "clearWordCache|getFreshWord") -and ($triviaApi -match "clearTriviaCache|getFreshTrivia")) {
        Write-Host "PASS  Game cache helpers present" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Game cache helpers present" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Game cache helpers present" -ForegroundColor Red
    $fail++
}

# E) API provider swap present
if (Test-Path "apps/web/src/lib/dailyWordApi.ts") {
    $wordApi = Get-Content "apps/web/src/lib/dailyWordApi.ts" -Raw
    if ($wordApi -match "datamuse|random-word") {
        Write-Host "PASS  Datamuse/Random Word providers referenced" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Datamuse/Random Word providers referenced" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Datamuse/Random Word providers referenced" -ForegroundColor Red
    $fail++
}

# F) Unused imports should be gone
Write-Host "`n=== TypeScript Cleanup ===" -ForegroundColor Yellow

# M) No legacy function leftovers (getTodaysTrivia should be absent, getTodaysWord is now the proper daily function)
$foundUnused = $false
$files = Get-ChildItem -Path "apps/web/src" -Recurse -Include "*.ts", "*.tsx"
foreach ($file in $files) {
    $content = Get-Content $file.FullName -Raw
    if ($content -match "getTodaysTrivia") {
        $foundUnused = $true
        break
    }
}

if (-not $foundUnused) {
    Write-Host "PASS  No getTodaysTrivia leftovers (getTodaysWord is now proper daily function)" -ForegroundColor Green
} else {
    Write-Host "FAIL  No getTodaysTrivia leftovers (getTodaysWord is now proper daily function)" -ForegroundColor Red
    $fail++
}

# G) Lighthouse meta/manifest/theme-color
Write-Host "`n=== Lighthouse Meta Tags ===" -ForegroundColor Yellow

if (Test-Path "apps/web/index.html") {
    $htmlContent = Get-Content "apps/web/index.html" -Raw
    if ($htmlContent -match '<meta name="description"' -and $htmlContent -match '<link rel="manifest"' -and $htmlContent -match '<meta name="theme-color"') {
        Write-Host "PASS  Meta description / manifest / theme-color present" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Meta description / manifest / theme-color present" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Meta description / manifest / theme-color present" -ForegroundColor Red
    $fail++
}

# H) TabCard watching move routing is correct
Write-Host "`n=== Card Actions ===" -ForegroundColor Yellow

if (Test-Path "apps/web/src/components/cards/TabCard.tsx") {
    $tabCardContent = Get-Content "apps/web/src/components/cards/TabCard.tsx" -Raw
    if ($tabCardContent -match "Library\.move\(.*'watching'\)") {
        Write-Host "PASS  TabCard watching move mapped" -ForegroundColor Green
    } else {
        Write-Host "FAIL  TabCard watching move mapped" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  TabCard watching move mapped" -ForegroundColor Red
    $fail++
}

# I) CardV2 square-button clues (informational)
if (Test-Path "apps/web/src/components/cards/CardV2.tsx") {
    $cardV2Content = Get-Content "apps/web/src/components/cards/CardV2.tsx" -Raw
    if ($cardV2Content -match "isSquare|aspectRatio|w-\[68px\]|!w-10|!h-10|lucide-react") {
        Write-Host "PASS  CardV2 square-button clues (informational)" -ForegroundColor Green
    } else {
        Write-Host "FAIL  CardV2 square-button clues (informational)" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  CardV2 square-button clues (informational)" -ForegroundColor Red
    $fail++
}

# J) lucide-react dep (optional)
if (Test-Path "apps/web/package.json") {
    $packageJson = Get-Content "apps/web/package.json" | ConvertFrom-Json
    if ($packageJson.dependencies."lucide-react" -ne $null) {
        Write-Host "PASS  lucide-react dependency (optional)" -ForegroundColor Green
    } else {
        Write-Host "FAIL  lucide-react dependency (optional)" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  lucide-react dependency (optional)" -ForegroundColor Red
    $fail++
}

# K) Poster click â†’ TMDB
if (Test-Path "apps/web/src/components/cards/CardV2.tsx") {
    $cardV2Content = Get-Content "apps/web/src/components/cards/CardV2.tsx" -Raw
    if ($cardV2Content -match "window\.open\(.*tmdb|themoviedb\.org") {
        Write-Host "PASS  Poster click opens TMDB" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Poster click opens TMDB" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Poster click opens TMDB" -ForegroundColor Red
    $fail++
}

# L) Pro default enabled
Write-Host "`n=== Settings ===" -ForegroundColor Yellow

if (Test-Path "apps/web/src/lib/settings.ts") {
    $settingsContent = Get-Content "apps/web/src/lib/settings.ts" -Raw
    if ($settingsContent -match "isPro:\s*true") {
        Write-Host "PASS  Pro enabled by default" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Pro enabled by default" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Pro enabled by default" -ForegroundColor Red
    $fail++
}

# M) Discovery action handlers
Write-Host "`n=== Discovery ===" -ForegroundColor Yellow

if (Test-Path "apps/web/src/pages/DiscoveryPage.tsx") {
    $discoveryContent = Get-Content "apps/web/src/pages/DiscoveryPage.tsx" -Raw
    if ($discoveryContent -match "Library\.upsert\(") {
        Write-Host "PASS  Discovery uses Library.upsert" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Discovery uses Library.upsert" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Discovery uses Library.upsert" -ForegroundColor Red
    $fail++
}

# N) Duplicate filtering (should be removed per revert)
$foundDedupe = $false
$files = Get-ChildItem -Path "apps/web/src" -Recurse -Include "*.ts", "*.tsx" | Where-Object { $_.FullName -notlike "*firebaseSync*" }
foreach ($file in $files) {
    $content = Get-Content $file.FullName -Raw
    if ($content -match "smartDiscovery|existingIds|excludeExisting") {
        $foundDedupe = $true
        break
    }
}

if (-not $foundDedupe) {
    Write-Host "PASS  No discovery dedupe logic (expected absent)" -ForegroundColor Green
} else {
    Write-Host "FAIL  No discovery dedupe logic (expected absent)" -ForegroundColor Red
    $fail++
}

# O) Header/search refs present; Filters row removed
Write-Host "`n=== Header Components ===" -ForegroundColor Yellow

if ((Test-Path "apps/web/src/components/HeaderV2.tsx") -and (Test-Path "apps/web/src/components/UnifiedSearch.tsx") -and (Test-Path "apps/web/src/components/AvatarMenu.tsx")) {
    Write-Host "PASS  HeaderV2/UnifiedSearch/AvatarMenu present" -ForegroundColor Green
} else {
    Write-Host "FAIL  HeaderV2/UnifiedSearch/AvatarMenu present" -ForegroundColor Red
    $fail++
}

$foundFiltersButton = $false
$files = Get-ChildItem -Path "apps/web/src/components" -Recurse -Include "*.ts", "*.tsx"
foreach ($file in $files) {
    $content = Get-Content $file.FullName -Raw
    if ($content -match "FiltersButton") {
        $foundFiltersButton = $true
        break
    }
}

if (-not $foundFiltersButton) {
    Write-Host "PASS  Filters row removed (no FiltersButton)" -ForegroundColor Green
} else {
    Write-Host "FAIL  Filters row removed (no FiltersButton)" -ForegroundColor Red
    $fail++
}

# P) Bottom-nav equal width tabs
Write-Host "`n=== Mobile Navigation ===" -ForegroundColor Yellow

if (Test-Path "apps/web/src/components/MobileTabs.tsx") {
    $mobileTabsContent = Get-Content "apps/web/src/components/MobileTabs.tsx" -Raw
    if ($mobileTabsContent -match "flex-1") {
        Write-Host "PASS  MobileTabs flex-1 aria-label present" -ForegroundColor Green
    } else {
        Write-Host "FAIL  MobileTabs flex-1 aria-label present" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  MobileTabs flex-1 aria-label present" -ForegroundColor Red
    $fail++
}

# Q) Auth timing fix present
Write-Host "`n=== Auth System ===" -ForegroundColor Yellow

if ((Test-Path "apps/web/src/lib/auth.ts") -and (Test-Path "apps/web/src/hooks/useAuth.ts")) {
    $authContent = Get-Content "apps/web/src/lib/auth.ts" -Raw
    $hookContent = Get-Content "apps/web/src/hooks/useAuth.ts" -Raw
    if (($authContent -match "onAuthStateChanged") -and ($hookContent -match "loading.*true")) {
        Write-Host "PASS  Auth timing: onAuthStateChanged + loading true" -ForegroundColor Green
    } else {
        Write-Host "FAIL  Auth timing: onAuthStateChanged + loading true" -ForegroundColor Red
        $fail++
    }
} else {
    Write-Host "FAIL  Auth timing: onAuthStateChanged + loading true" -ForegroundColor Red
    $fail++
}

Write-Host "`n=== Audit Summary ===" -ForegroundColor Cyan
Write-Host "Audit completed with $fail failures" -ForegroundColor $(if ($fail -eq 0) { "Green" } else { "Red" })

if ($fail -eq 0) {
    Write-Host "`nðŸŽ‰ All checks passed! Restore is complete." -ForegroundColor Green
    exit 0
} else {
    Write-Host "`nâŒ $fail checks failed. Review the issues above." -ForegroundColor Red
    exit $fail
}

```

## scripts\generate-flick-games-audit.ps1
```
# FlickWord + FlickTrivia - complete extract for Cursor audit
# PowerShell version for Windows

$ErrorActionPreference = "Stop"

# 1. Make a temp workspace
$REPORT = "$env:TEMP\flick_games_audit.md"
$timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
"# FlickGames Deep-Dive Report - $timestamp" | Out-File -FilePath $REPORT -Encoding utf8
"" | Out-File -FilePath $REPORT -Append -Encoding utf8

# 2. Helper: append file with nice header
function Add-Section {
    param(
        [string]$Title,
        [string]$Path
    )
    
    if (-not (Test-Path $Path)) {
        return
    }
    
    "" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "## $Title" | Out-File -FilePath $REPORT -Append -Encoding utf8
    '```' | Out-File -FilePath $REPORT -Append -Encoding utf8
    
    # Read file content and strip secrets
    $content = Get-Content $Path -Raw -ErrorAction SilentlyContinue
    if ($content) {
        $content = $content -replace '(apiKey|appId|measurementId|Stripe\.key|STRIPE_|REACT_APP_)[^,"]*"', '$1[REDACTED]'
        $content | Out-File -FilePath $REPORT -Append -Encoding utf8
    }
    
    '```' | Out-File -FilePath $REPORT -Append -Encoding utf8
}

# 3. Discover every file that references the games (case-insensitive)
Write-Host "Searching for game-related files..."
$gameFiles = Get-ChildItem -Path . -Recurse -File `
    -Exclude "*.log" `
    | Where-Object {
        $excludeDirs = @("node_modules", ".git", "dist", "build", ".next")
        $relativePath = $_.FullName.Replace((Get-Location).Path + "\", "")
        -not ($excludeDirs | Where-Object { $relativePath -like "*\$_\*" })
    } `
    | Select-String -Pattern "(flickword|flick trivia|flicktrivia|game|trivia|word)" -CaseSensitive:$false -List `
    | Select-Object -ExpandProperty Path -Unique `
    | Sort-Object

Write-Host "Found $($gameFiles.Count) files"

# 4. Bucket by category
$buckets = @{
    "01-routing" = @("router", "routes", "navigation", "screen", "page")
    "02-layout-ui" = @("jsx", "tsx", "vue", "svelte", "xml", "storyboard", "xib")
    "03-styles" = @("css", "scss", "sass", "styled", "theme")
    "04-logic-hooks" = @("ts", "js", "jsx", "tsx")
    "05-state-mgmt" = @("redux", "store", "context", "provider", "zustand", "recoil", "mobx")
    "06-firebase" = @("firestore", "firebase", "rules", "indexes")
    "07-remote-config" = @("remoteconfig", "defaults", "featureflag")
    "08-analytics" = @("analytics", "posthog", "amplitude", "event")
    "09-tests" = @("test", "spec", "e2e")
    "10-stripe" = @("stripe", "billing", "pro", "subscription")
    "99-misc" = @("*")
}

$tempDir = "$env:TEMP\flick_audit_buckets"
if (Test-Path $tempDir) {
    Remove-Item $tempDir -Recurse -Force
}
New-Item -ItemType Directory -Path $tempDir -Force | Out-Null

foreach ($bucketKey in $buckets.Keys) {
    $extensions = $buckets[$bucketKey]
    $bucketDir = Join-Path $tempDir $bucketKey
    New-Item -ItemType Directory -Path $bucketDir -Force | Out-Null
    
    foreach ($file in $gameFiles) {
        $ext = [System.IO.Path]::GetExtension($file).TrimStart('.')
        $name = [System.IO.Path]::GetFileName($file).ToLower()
        
        $matches = $false
        if ($bucketKey -eq "99-misc") {
            $matches = $true
        } else {
            foreach ($extPattern in $extensions) {
                if ($name -like "*$extPattern*" -or $ext -eq $extPattern) {
                    $matches = $true
                    break
                }
            }
        }
        
        if ($matches) {
            $relativePath = $file.Replace((Get-Location).Path + "\", "")
            $destPath = Join-Path $bucketDir $relativePath
            $destDir = Split-Path $destPath -Parent
            if (-not (Test-Path $destDir)) {
                New-Item -ItemType Directory -Path $destDir -Force | Out-Null
            }
            Copy-Item $file $destPath -ErrorAction SilentlyContinue
        }
    }
}

# 5. Append each bucket to the report
$bucketDirs = Get-ChildItem $tempDir -Directory | Sort-Object Name
foreach ($bucketDir in $bucketDirs) {
    $bn = $bucketDir.Name
    "" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "# $bn" | Out-File -FilePath $REPORT -Append -Encoding utf8
    
    $files = Get-ChildItem $bucketDir -Recurse -File | Sort-Object FullName
    foreach ($file in $files) {
        $relativePath = $file.FullName.Replace($bucketDir.FullName + "\", "")
        Add-Section -Title $relativePath -Path $file.FullName
    }
}

# 6. Extra meta: package.json scripts, env example, README snippets
$metaFiles = @("package.json", ".env.example", "README.md", "apps\web\package.json")
foreach ($f in $metaFiles) {
    if (Test-Path $f) {
        Add-Section -Title $f -Path $f
    }
}

# 7. Quick stats table
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"# Quick Stats" | Out-File -FilePath $REPORT -Append -Encoding utf8
"| Term | Hits | Files |" | Out-File -FilePath $REPORT -Append -Encoding utf8
"|------|------|-------|" | Out-File -FilePath $REPORT -Append -Encoding utf8

$terms = @("FlickWord", "FlickTrivia", "trivia", "word", "game")
foreach ($term in $terms) {
    $hits = (Get-ChildItem -Path . -Recurse -File `
        -Exclude "*.log" `
        | Where-Object {
            $excludeDirs = @("node_modules", ".git", "dist", "build", ".next")
            $relativePath = $_.FullName.Replace((Get-Location).Path + "\", "")
            -not ($excludeDirs | Where-Object { $relativePath -like "*\$_\*" })
        } `
        | Select-String -Pattern $term -CaseSensitive:$false `
        | Measure-Object).Count
    
    $fileCount = (Get-ChildItem -Path . -Recurse -File `
        -Exclude "*.log" `
        | Where-Object {
            $excludeDirs = @("node_modules", ".git", "dist", "build", ".next")
            $relativePath = $_.FullName.Replace((Get-Location).Path + "\", "")
            -not ($excludeDirs | Where-Object { $relativePath -like "*\$_\*" })
        } `
        | Select-String -Pattern $term -CaseSensitive:$false -List `
        | Select-Object -ExpandProperty Path -Unique `
        | Measure-Object).Count
    
    "| $term | $hits | $fileCount |" | Out-File -FilePath $REPORT -Append -Encoding utf8
}

# 8. Final note
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"_Report generated at $REPORT _" | Out-File -FilePath $REPORT -Append -Encoding utf8

Write-Host "Report generated at: $REPORT"
Write-Host "Opening in Cursor..."

# Open the file
Start-Process "cursor" -ArgumentList "`"$REPORT`"" -ErrorAction SilentlyContinue
if ($LASTEXITCODE -ne 0) {
    Start-Process "code" -ArgumentList "`"$REPORT`"" -ErrorAction SilentlyContinue
    if ($LASTEXITCODE -ne 0) {
        Invoke-Item $REPORT
    }
}

# Cleanup
Remove-Item $tempDir -Recurse -Force -ErrorAction SilentlyContinue

Write-Host "Done!"


```

## scripts\generate-flick-games-audit-refined.ps1
```
# FlickWord + FlickTrivia - focused audit script
# Only includes files that specifically mention FlickWord or FlickTrivia

$ErrorActionPreference = "Stop"

# 1. Make a temp workspace
$REPORT = "$env:TEMP\flick_games_audit.md"
$timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
"# FlickGames Deep-Dive Report - $timestamp" | Out-File -FilePath $REPORT -Encoding utf8
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"*Generated by focused search for FlickWord and FlickTrivia specific files*" | Out-File -FilePath $REPORT -Append -Encoding utf8
"" | Out-File -FilePath $REPORT -Append -Encoding utf8

# 2. Helper: append file with nice header
function Add-Section {
    param(
        [string]$Title,
        [string]$Path
    )
    
    if (-not (Test-Path $Path)) {
        return
    }
    
    "" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "## $Title" | Out-File -FilePath $REPORT -Append -Encoding utf8
    '```' | Out-File -FilePath $REPORT -Append -Encoding utf8
    
    # Read file content and strip secrets
    $content = Get-Content $Path -Raw -ErrorAction SilentlyContinue
    if ($content) {
        $content = $content -replace '(apiKey|appId|measurementId|Stripe\.key|STRIPE_|REACT_APP_)[^,"]*"', '$1[REDACTED]'
        $content | Out-File -FilePath $REPORT -Append -Encoding utf8
    }
    
    '```' | Out-File -FilePath $REPORT -Append -Encoding utf8
}

# 3. Find files that specifically mention FlickWord or FlickTrivia (case-insensitive)
Write-Host "Searching for FlickWord/FlickTrivia specific files..."
$gameFiles = Get-ChildItem -Path . -Recurse -File `
    -Exclude "*.log", "*.html", "*.csv" `
    | Where-Object {
        $excludeDirs = @("node_modules", ".git", "dist", "build", ".next", "Lighthouse Reports", "test-results")
        $relativePath = $_.FullName.Replace((Get-Location).Path + "\", "")
        -not ($excludeDirs | Where-Object { $relativePath -like "*\$_\*" })
    } `
    | Select-String -Pattern "(FlickWord|FlickTrivia|flickword|flicktrivia)" -CaseSensitive:$false -List `
    | Select-Object -ExpandProperty Path -Unique `
    | Sort-Object

Write-Host "Found $($gameFiles.Count) files"

# 4. Organize by file type/function
$categories = @{
    "Routing & Navigation" = @()
    "Components - UI" = @()
    "Components - Game Logic" = @()
    "Styles" = @()
    "Hooks & Utilities" = @()
    "State & Context" = @()
    "Firebase & Backend" = @()
    "Tests" = @()
    "Documentation" = @()
    "Config & Scripts" = @()
    "Other" = @()
}

foreach ($file in $gameFiles) {
    $name = [System.IO.Path]::GetFileName($file).ToLower()
    $ext = [System.IO.Path]::GetExtension($file).TrimStart('.')
    $relativePath = $file.Replace((Get-Location).Path + "\", "")
    
    if ($relativePath -like "*route*" -or $relativePath -like "*navigation*" -or $relativePath -like "*App.tsx") {
        $categories["Routing & Navigation"] += $file
    }
    elseif ($relativePath -like "*components\games\*" -or $name -like "*game*.tsx" -or $name -like "*game*.ts") {
        $categories["Components - Game Logic"] += $file
    }
    elseif ($relativePath -like "*components\*" -and ($ext -eq "tsx" -or $ext -eq "jsx")) {
        $categories["Components - UI"] += $file
    }
    elseif ($ext -eq "css" -or $ext -eq "scss" -or $name -like "*style*") {
        $categories["Styles"] += $file
    }
    elseif ($relativePath -like "*hooks\*" -or $relativePath -like "*utils\*" -or $relativePath -like "*lib\*") {
        $categories["Hooks & Utilities"] += $file
    }
    elseif ($relativePath -like "*store*" -or $relativePath -like "*context*" -or $relativePath -like "*state*") {
        $categories["State & Context"] += $file
    }
    elseif ($relativePath -like "*firebase*" -or $relativePath -like "*firestore*" -or $relativePath -like "*functions\*") {
        $categories["Firebase & Backend"] += $file
    }
    elseif ($relativePath -like "*test*" -or $relativePath -like "*spec*" -or $relativePath -like "*e2e*") {
        $categories["Tests"] += $file
    }
    elseif ($relativePath -like "*docs\*" -or $relativePath -like "*.md" -or $relativePath -like "*README*") {
        $categories["Documentation"] += $file
    }
    elseif ($relativePath -like "*config*" -or $relativePath -like "*scripts\*" -or $name -like "package.json" -or $name -like "*.config.*") {
        $categories["Config & Scripts"] += $file
    }
    else {
        $categories["Other"] += $file
    }
}

# 5. Write organized report
foreach ($category in $categories.Keys | Sort-Object) {
    $files = $categories[$category]
    if ($files.Count -eq 0) { continue }
    
    "" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "# $category" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "*$($files.Count) file(s)*" | Out-File -FilePath $REPORT -Append -Encoding utf8
    "" | Out-File -FilePath $REPORT -Append -Encoding utf8
    
    foreach ($file in $files | Sort-Object) {
        $relativePath = $file.Replace((Get-Location).Path + "\", "")
        Add-Section -Title $relativePath -Path $file
    }
}

# 6. Quick stats
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"# Quick Stats" | Out-File -FilePath $REPORT -Append -Encoding utf8
"| Term | File Count |" | Out-File -FilePath $REPORT -Append -Encoding utf8
"|------|------------|" | Out-File -FilePath $REPORT -Append -Encoding utf8

$terms = @("FlickWord", "FlickTrivia", "flickword", "flicktrivia")
foreach ($term in $terms) {
    $fileCount = ($gameFiles | Where-Object {
        $content = Get-Content $_ -Raw -ErrorAction SilentlyContinue
        $content -and $content -match [regex]::Escape($term)
    } | Measure-Object).Count
    
    "| $term | $fileCount |" | Out-File -FilePath $REPORT -Append -Encoding utf8
}

# 7. Summary
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"# Summary" | Out-File -FilePath $REPORT -Append -Encoding utf8
"Total files analyzed: $($gameFiles.Count)" | Out-File -FilePath $REPORT -Append -Encoding utf8
"" | Out-File -FilePath $REPORT -Append -Encoding utf8
"_Report generated at $REPORT _" | Out-File -FilePath $REPORT -Append -Encoding utf8

Write-Host "Report generated at: $REPORT"
Write-Host "Total files: $($gameFiles.Count)"

# Open the file
Start-Process "cursor" -ArgumentList "`"$REPORT`"" -ErrorAction SilentlyContinue
if ($LASTEXITCODE -ne 0) {
    Start-Process "code" -ArgumentList "`"$REPORT`"" -ErrorAction SilentlyContinue
    if ($LASTEXITCODE -ne 0) {
        Invoke-Item $REPORT
    }
}

Write-Host "Done!"


```

# Documentation
*13 file(s)*


## CHANGELOG.md
```
# Changelog

All notable changes to this project will be documented in this file.

## [Restore - 2025-01-15]

### Restored Features
This release restores the codebase to a "good" state from a 9 PM backup (Jan 15, 2025) with all critical fixes re-applied.

#### Netlify/Vite Monorepo Development
- âœ… Netlify dev command configured: `npm run dev --prefix apps/web -- --port 4173 --strictPort`
- âœ… Functions directory path set to `netlify/functions`
- âœ… Serverless function `send-email.cjs` restored with SendGrid integration
- âœ… Serverless function `tmdb-proxy.cjs` restored for TMDB API proxying

#### Game Cache Busting
- âœ… FlickWord game components restored (`FlickWordGame.tsx`, `FlickWordModal.tsx`)
- âœ… Cache busting utilities implemented (`clearWordCache`, `getFreshWord`, `clearTriviaCache`, `getFreshTrivia`)
- âœ… API provider swaps: Datamuse and Random Word Generator integrated
- âœ… FlickWord CSS sizing rules restored for 375px mobile compatibility

#### API Provider Swaps
- âœ… Daily word API with multiple providers (Datamuse, Random Word Generator)
- âœ… Daily trivia API with OpenTriviaDB integration
- âœ… Fallback mechanisms for API failures

#### Lighthouse Meta/Manifest
- âœ… Meta description, theme-color, and manifest.webmanifest restored
- âœ… Accessibility targets maintained (44px tap targets, proper ARIA)

#### CardV2 Button Sizing
- âœ… Poster click opens TMDB in new tab
- âœ… Square button logic preserved (informational check)
- âœ… TabCard watching move actions restored

#### Discovery Handlers
- âœ… Discovery page uses `Library.upsert` for actions
- âœ… Smart discovery logic removed (no deduplication)
- âœ… Action handlers: `onWant`, `onWatched`, `onNotInterested`

#### Header/Search Refactor
- âœ… HeaderV2 component with three-zone layout
- âœ… UnifiedSearch component with integrated filters
- âœ… AvatarMenu component for user authentication
- âœ… Filters row removed (filters now inside search input)

#### Bottom Nav Layout
- âœ… MobileTabs component with `flex-1` classes for equal width
- âœ… Proper ARIA labels maintained

#### Auth Timing Race
- âœ… `useAuth` hook maintains `loading: true` until `onAuthStateChanged` fires
- âœ… No login modal flash after refresh for authenticated users

#### Settings
- âœ… Pro features enabled by default (`isPro: true`)

### Technical Improvements
- âœ… Automated audit script (`scripts/audit-simple.ps1`) for truth detection
- âœ… TypeScript build errors resolved
- âœ… All unused imports and functions cleaned up
- âœ… Legacy function references removed (`getTodaysWord`, `getTodaysTrivia`)

### Files Created/Modified
- **Created**: `netlify/functions/send-email.cjs`
- **Created**: `netlify/functions/tmdb-proxy.cjs`
- **Created**: `apps/web/src/lib/dailyTriviaApi.ts`
- **Created**: `apps/web/src/components/HeaderV2.tsx`
- **Created**: `apps/web/src/components/UnifiedSearch.tsx`
- **Created**: `apps/web/src/components/AvatarMenu.tsx`
- **Created**: `apps/web/src/styles/flickword.css`
- **Created**: `scripts/audit-simple.ps1`
- **Modified**: `apps/web/src/pages/DiscoveryPage.tsx` (removed smart discovery)
- **Modified**: `apps/web/src/lib/dailyWordApi.ts` (removed legacy functions)
- **Modified**: `apps/web/src/lib/triviaApi.ts` (removed legacy functions)
- **Deleted**: `apps/web/src/hooks/useSmartDiscovery.ts`

### Audit Results
All 22 audit checks pass:
- Netlify Configuration: âœ… 4/4 checks
- FlickWord Components: âœ… 3/3 checks  
- Game Cache Helpers: âœ… 2/2 checks
- TypeScript Cleanup: âœ… 1/1 checks
- Lighthouse Meta Tags: âœ… 1/1 checks
- Card Actions: âœ… 4/4 checks
- Settings: âœ… 1/1 checks
- Discovery: âœ… 2/2 checks
- Header Components: âœ… 2/2 checks
- Mobile Navigation: âœ… 1/1 checks
- Auth System: âœ… 1/1 checks

### Rollback Instructions
If regressions occur, revert this commit or flip feature flags as needed. The audit script can be used to verify the restore state.

---

*This restore was performed using an automated audit script to ensure all critical fixes from the "good" state were properly re-applied.*

```

## Cursor Rules\Cursor-rules-mobile-compact-v1.md
```
# Flicklet â€“ Cursor Rules (React V2)

## Active Codebase

**Primary app:** `apps/web` (React V2, Vite)
**Dev server:** `http://localhost:8888`
**E2E base URL:** `E2E_BASE_URL` env (default `http://localhost:8888`)
**Feature flag:** `mobile_compact_v1` (localStorage key: `flag:mobile_compact_v1`)

### Hard Blocks

* Do **not** create, modify, or reference files under `www/` (legacy V1). Treat as read-only.
* Do **not** add imports, stylesheets, or scripts to `www/index.html`.
* Do **not** start a second dev server. The user runs the server.

### Allowed Paths

* `apps/web/**` (source, components, styles, flags, pages)
* `reports/**` (analysis outputs)
* `tests/e2e/**` (Playwright tests for React V2 only)

---

## Current Project Scope

**Project:** Mobile Compact V1 (React V2)
**Goal:** Introduce compact mobile styling via a **gated token layer** with a **runtime attribute gate**, then migrate views progressively.
**Guarantee:** No UI or behavioral change unless explicitly in the approved step.

---

## Architecture (React V2)

* **Framework:** React (Vite). Files are under `apps/web/src/**`.
* **Flags helper:** `apps/web/src/lib/flags.ts` or `flags.tsx`.

  ```ts
  export function flag(name: 'mobile_compact_v1'): boolean {
    try {
      const v = localStorage.getItem('flag:' + name);
      if (v !== null) return v === 'true';
    } catch {}
    return false;
  }
  ```
* **Styles/tokens:** `apps/web/src/styles/**`, `tailwind.config.*`, `postcss.config.*`, and any global CSS.

---

## Migration Guardrails

### Token Gate (no visual change by default)

* Import once: `styles/tokens-compact-mobile.css` (in `apps/web` HTML/entry import chain).
* Apply overrides **only** inside this selector:

  ```css
  html[data-density="compact"][data-compact-mobile-v1="true"] {
    --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px;
    --radius: 12px;
    --poster-w: 136px;
    --poster-h: calc(var(--poster-w) * 1.5);
    --font-sm: 13px; --font-md: 14.5px; --font-lg: 16.5px;
  }
  ```
* **Do not** invent suffixed vars like `--poster-w-compact`. Override the real ones under the gate.

### Runtime Attribute Gate (no visual change by default)

* In `flags.ts(x)`, expose a function that sets/removes `data-compact-mobile-v1` on `<html>` when:

  1. `flag('mobile_compact_v1') === true`
  2. viewport is mobile (`matchMedia('(max-width: 768px)')`)
  3. `<html>` has `data-density="compact"`
* Bind on `DOMContentLoaded`, `visibilitychange`, `resize`, and `storage`.

### CSS & Specificity Policy

* Avoid `!important`. If a vendor override is unavoidable, document with:
  `/* OVERRIDE: lib | reason | owner | expires */`
* Prefer tokens and cascade order over specificity wars.
* Do not modify global token values outside the gated selector.

---

## Testing & Validation

### Playwright (React V2)

* Base URL: `E2E_BASE_URL` or `http://localhost:8888`.
* Failing conditions: any console error in tests.

**Gate verification spec pattern:**

```ts
// tests/e2e/compact/v2/stepX/tokens.gate.spec.ts
import { test, expect } from '@playwright/test';
const cssVar = (p, n) => p.evaluate(n => getComputedStyle(document.documentElement).getPropertyValue(n).trim(), n);

test('flag OFF â†’ gate absent', async ({ page }) => {
  await page.goto('/');
  await page.evaluate(() => localStorage.removeItem('flag:mobile_compact_v1'));
  await page.reload();
  const attr = await page.evaluate(() => document.documentElement.dataset.compactMobileV1 || '');
  const posterW = await cssVar(page, '--poster-w');
  expect(attr).toBe('');
  expect(posterW).not.toBe('136px');
});

test('flag ON + compact density â†’ gate present', async ({ page }) => {
  await page.goto('/');
  await page.evaluate(() => {
    localStorage.setItem('flag:mobile_compact_v1', 'true');
    document.documentElement.dataset.density = 'compact';
  });
  await page.reload();
  const attr = await page.evaluate(() => document.documentElement.dataset.compactMobileV1 || '');
  const posterW = await cssVar(page, '--poster-w');
  expect(attr).toBe('true');
  expect(posterW).toBe('136px');
});
```

### Manual Sanity (no UI change by default)

* In DevTools:

  ```js
  localStorage.setItem('flag:mobile_compact_v1','true');
  document.documentElement.dataset.density='compact';
  getComputedStyle(document.documentElement).getPropertyValue('--poster-w').trim(); // expect 136px
  ```
* Remove flag or density; expect not 136px and no `data-compact-mobile-v1`.

---

## Process & Governance

### Step Discipline

* One step per branch, with binary acceptance criteria.
* No refactors or drive-bys outside the approved step.
* Rollback must be one commit or a tag revert.

### Reports

* Place analysis outputs under `reports/` with clear filenames:

  * `reports/v2-tokens-map.csv`
  * `reports/v2-tokens-conflicts.csv`
  * `reports/v2-css-specificity-mobile.csv`
  * `reports/v2-fixed-bottom-audit.md`
  * `reports/v2-card-variants-map.md`

### Tests

* Place V2 tests under `tests/e2e/compact/v2/**`.
* Do not reference `www/` in any test.

### Server Management

* Do **not** run `npm run dev` or start any server.
* Assume the userâ€™s Vite server is running on port 8888.

---

## Out-of-Scope (Legacy V1)

All of the below pertains to the **vanilla JS app under `www/`** and is **not to be touched** in this project:

* IIFE modules, `window.FlickletApp`, monolithic `functions.js`
* V1 CSS load order (`main.css`, `components.css`, `mobile.css`)
* V1 FAB system, Up-arrow control, V1 modals/notification design
* FlickWord V1 files (`www/features/flickword-*`, modal scripts, V1 stats)
* V1 Firebase wiring, Netlify server rules for `www/`

Keep V1 references only as historical context. Do not modify or import from `www/`.

---

## Acceptance Checklist (per step)

* Only the whitelisted files/paths changed.
* No UI or behavioral changes unless explicitly stated.
* Tests pass with zero console errors.
* Reports exist and are non-empty when required.
* Rollback path documented in the step description.

---

## Quick Commands (for humans, not Cursor)

* Start V2 dev: `npm run dev --prefix apps/web`
* Run a single e2e spec:
  `E2E_BASE_URL=http://localhost:8888 npm run test:e2e -- tests/e2e/compact/v2/step1/app.v2.root.smoke.spec.ts`

---

**This document supersedes all prior Cursor guidance for Flicklet.** If a rule conflicts with this file, this file wins.

```

## DESIGN_DOCUMENT.md
```
# Flicklet V2 - Comprehensive Design Document

## Table of Contents
1. [Project Overview](#project-overview)
2. [Architecture](#architecture)
3. [User Interface Design](#user-interface-design)
4. [Data Model](#data-model)
5. [Component System](#component-system)
6. [API Integration](#api-integration)
7. [Settings System](#settings-system)
8. [Development Environment](#development-environment)
9. [Feature Flags](#feature-flags)
10. [Accessibility](#accessibility)
11. [Performance](#performance)
12. [Testing Strategy](#testing-strategy)
13. [Deployment](#deployment)

---

## Project Overview

**Flicklet V2** is a modern TV and movie tracking web application built with React 18, TypeScript, and Vite. It provides users with a Netflix-style interface for discovering, tracking, and managing their entertainment consumption across movies and TV shows.

### Core Features
- **Media Discovery**: Browse trending content and movies currently in theaters
- **Personal Tracking**: Manage personal watchlists (watching, wishlist, watched)
- **Community Features**: Community player and games Flickword and Trivia (API)
- **Responsive Design**: Mobile-first approach with keyboard navigation
- **Real-time Data**: Live integration with The Movie Database (TMDB) API
Live integration with Trivia API
Attitude - the APP has a three-fold personality that can be switched in settings. Regular, semi sarcastic, severly sarcastic. 
Multi-lingual, supports spanish and english

### Layout Structure

The app follows a **rail-based layout** similar to Netflix:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Header                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Your Shows Rail                        â”‚
â”‚  [Card] [Card] [Card] [Card] â†’         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Community Rail (feature-flagged)       â”‚
â”‚  [Card] [Card] [Card] â†’                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  For You Rail (TMDB Data)               â”‚
â”‚  [Card] [Card] [Card] [Card] â†’         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  In Theaters Rail (TMDB Data)           â”‚
â”‚  [Card] [Card] [Card] [Card] â†’         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Feedback Rail                          â”‚
â”‚  [Card] [Card] [Card] â†’                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Responsive Behavior

- **Mobile-First**: Primary target is mobile devices
- **Horizontal Scrolling**: Each rail scrolls horizontally with snap behavior
- **Keyboard Navigation**: Arrow keys, Home, End, Enter for accessibility
- **Touch Gestures**: Swipe navigation on mobile devices

---

## Data Model

### Core Data Structure

The app manages several key data entities:

#### Media Items
```typescript
type CardData = {
  id: string;           // Unique identifier
  kind: 'movie' | 'tv'; // Media type
  title: string;        // Display title
  poster: string;       // Poster image URL
}
```

#### User Watchlists
```typescript
type Watchlists = {
  tv: {
    watching: MediaItem[];   // Currently watching
    wishlist: MediaItem[];   // Want to watch
    watched: MediaItem[];    // Completed
  };
  movies: {
    watching: MediaItem[];
    wishlist: MediaItem[];
    watched: MediaItem[];
  };
}
```

#### User Settings
```typescript
type Settings = {
  pro: boolean;                    // Premium status
  isPro: boolean;                 // Alias for pro
  episodeTracking: boolean;       // Episode tracking feature
  username: string;               // User display name
  displayName: string;            // Full display name
  lang: string;                   // Language preference
  theme: 'light' | 'dark';       // Theme preference
}
```

### Data Flow

1. **Initial Load**: App loads with skeleton placeholders
2. **TMDB Hydration**: Real data fetches from TMDB via proxy
3. **User Interaction**: Actions update local state and sync to cloud
4. **Persistence**: Data saved to localStorage and Firebase (when authenticated)

---

## Component System

### Core Components

#### Rail Component
**Purpose**: Horizontal scrolling container for media cards

**Props**:
```typescript
type RailProps = {
  id: string;                    // Unique identifier
  title: string;                 // Rail title
  enabled?: boolean;            // Show/hide rail
  skeletonCount?: number;       // Loading placeholder count
  items?: CardData[];           // Real data items
}
```

**Features**:
- Horizontal scrolling with snap behavior
- Keyboard navigation (arrows, Home, End, Enter)
- Skeleton loading states
- Accessibility attributes (ARIA labels, roles)

#### Card Component
**Purpose**: Individual media item display

**Props**:
```typescript
type CardProps = {
  title?: string;    // Media title
  poster?: string;  // Poster image URL
}
```

**Features**:
- 2:3 aspect ratio poster container
- Actions grid (2 columns)
- Lazy loading for images
- Focus management for keyboard navigation

### Component Hierarchy

```
App
â”œâ”€â”€ Rail (Your Shows)
â”‚   â””â”€â”€ Card[] (skeleton)
â”œâ”€â”€ Rail (Community) [feature-flagged]
â”‚   â””â”€â”€ Card[] (skeleton)
â”œâ”€â”€ Rail (For You)
â”‚   â””â”€â”€ Card[] (TMDB data)
â”œâ”€â”€ Rail (In Theaters)
â”‚   â””â”€â”€ Card[] (TMDB data)
â””â”€â”€ Rail (Feedback)
    â””â”€â”€ Card[] (skeleton)
```

---

## API Integration

### TMDB Integration

The app integrates with The Movie Database (TMDB) through a secure proxy pattern:

#### Proxy Function (`netlify/functions/tmdb-proxy.js`)
- **Purpose**: Secure server-side API key handling
- **Method**: Serverless function with CORS support
- **Caching**: 5-minute cache for successful responses
- **Error Handling**: Comprehensive error logging and fallbacks

#### Client Adapter (`src/lib/tmdb.ts`)
- **Purpose**: Clean API interface for React components
- **Features**: Type-safe data transformation, error handling
- **Endpoints**:
  - `trendingForYou()`: `/trending/all/week`
  - `nowPlayingMovies()`: `/movie/now_playing`

#### React Query Integration
- **Caching**: 60-second stale time for optimal performance
- **Background Updates**: Automatic refetching on window focus
- **Error States**: Graceful error handling with retry logic

### API Data Flow

```
React Component
    â†“ useQuery hook
TMDB Adapter
    â†“ fetch()
Netlify Proxy
    â†“ fetch()
TMDB API
    â†“ JSON response
Data Transformation
    â†“ CardData[]
React Component (re-render)
```

---

## Settings System

The Settings system provides comprehensive user customization and management capabilities through a tabbed interface accessible via a floating action button (FAB).

### Settings Access

- **FAB Location**: Bottom left of home screen (sticky positioning)
- **Icon**: COG icon only
- **Layout**: Settings tabs on left, content on right
- **Additional Theme Toggle**: FAB on bottom right (Moon/Sun icon) for quick theme switching

### Settings Structure

#### 1. General
- **Display Name**: User's display name with warning on change
- **My Statistics**: 
  - Counts of currently watching, want to watch, already watched, total items
  - Broken out by TV shows and Movies
- **Not Interested Management**: 
  - Button to access the "not interested" list
  - Options to remove from list or leave as is
- **Personality Level**: Three-level system (1-3)
  - Regular
  - Semi-sarcastic
  - Severely sarcastic
- **Reset System to Defaults**: Restore all settings to initial state

#### 2. Notifications
- **Notification Types**:
  - Upcoming episode alerts
  - Weekly discover
  - Monthly stats digest
- **Alert Configuration (Pro)**:
  - Advanced notification by lead time in hours
  - Pick the list (currently watching or want to watch)

#### 3. Layout
- **Basic Customization**:
  - Condensed view option
  - Theme preference (Light/Dark)
  - Home page Lists configuration
  - Genre/sub-genre of "For You" rows
  - Enable episode tracking toggle
- **Pro Features**:
  - Theme packs (holiday and movie themes)

#### 4. Data
- **Standard Data Management**:
  - **Share List**: Choose lists and shows to share
    - Generates copy/pasteable formatted list with Flicklet branding and link
  - **Backup System (JSON)**: Export all personal data
  - **Import (JSON)**: Import previously exported data
  - **Reset All Data**: Restore system to defaults
- **Pro Features**:
  - Advanced sharing options

#### 5. Pro
- **Pro Management**:
  - Unlock pro features button (payment prompt - not implemented)
  - Pro feature list and descriptions
- **Pro Features**:
  - Alert configuration details (hourly config)
  - Theme packs (holiday and movie themes - not implemented)
  - Social features (FlickWord, Trivia, shared watchlists among friends)
  - Bloopers/Behind the scenes (activates button on show cards)
  - Additional features TBD

#### 6. About
- **Information Sections**:
  - About unique for you
  - About the creators
  - About the app
- **Feedback**:
  - Share your thoughts (feedback, quotes for marquee, clips for home page player, venting, etc.)

### Settings Data Model

```typescript
type Settings = {
  // General
  displayName: string;
  personalityLevel: 1 | 2 | 3; // Regular, Semi-sarcastic, Severely sarcastic
  
  // Notifications
  notifications: {
    upcomingEpisodes: boolean;
    weeklyDiscover: boolean;
    monthlyStats: boolean;
    alertConfig?: {
      leadTimeHours: number;
      targetList: 'watching' | 'wishlist';
    };
  };
  
  // Layout
  layout: {
    condensedView: boolean;
    theme: 'light' | 'dark';
    homePageLists: string[];
    forYouGenres: string[];
    episodeTracking: boolean;
    themePack?: string; // Pro feature
  };
  
  // Pro
  pro: {
    isPro: boolean;
    features: {
      advancedNotifications: boolean;
      themePacks: boolean;
      socialFeatures: boolean;
      bloopersAccess: boolean;
    };
  };
};
```

### Settings Persistence

- **Local Storage**: Primary storage for settings
- **Firebase Sync**: Cloud backup when authenticated
- **Migration**: Automatic migration from V1 settings format
- **Validation**: Settings validation and error handling

---

## Development Environment

### Local Development Setup

#### Prerequisites
- Node.js 18+
- Netlify CLI (`npm i -g netlify-cli`)

#### Environment Configuration
1. Create `.env` at repo root:
   ```
   TMDB_KEY=your_tmdb_api_key
   ```

2. Run development server:
   ```bash
   netlify dev
   ```

3. App available at `http://localhost:8888`

### Build Configuration

#### Vite Configuration
- **Mode-Aware**: Different configs for dev/prod
- **Environment Loading**: Loads from app directory and repo root
- **Path Aliases**: `@/*` for src, `#inputs/*` for migration data
- **TypeScript**: Strict mode with React JSX support

#### Tailwind Configuration
- **Design Token Integration**: Reads from `DESIGN_TOKENS.json`
- **Custom Theme**: Extended with app-specific colors and spacing
- **Safelist**: Critical classes for skeleton loading

---

## Feature Flags

The app uses a comprehensive feature flag system for controlled rollouts:

### Current Flags (`FEATURE_FLAGS.json`)
```json
{
  "defaults": {
    "community_player": false,
    "community_games_enabled": false,
    "homeRowSpotlight": false,
    "flicklet_episodeTracking_enabled": false
  }
}
```

### Flag Usage
- **Conditional Rendering**: Components render based on flag state
- **Runtime Toggle**: Flags can be changed without code deployment
- **Type Safety**: TypeScript integration for flag names

### Implementation
```typescript
const showCommunity = useFlag('community_player');
return (
  <>
    {showCommunity && <Rail id="community" title="Community" />}
  </>
);
```

---

## Accessibility

### WCAG 2.1 AA Compliance

#### Keyboard Navigation
- **Arrow Keys**: Horizontal scrolling within rails
- **Home/End**: Jump to beginning/end of rail
- **Enter**: Focus first card in rail
- **Tab**: Standard tab order through interactive elements

#### Screen Reader Support
- **ARIA Labels**: All rails have descriptive labels
- **Semantic HTML**: Proper use of `<section>`, `<article>`, `<main>`
- **Role Attributes**: `role="list"` and `role="listitem"` for card containers

#### Visual Accessibility
- **Color Contrast**: High contrast text on dark background
- **Focus Indicators**: Clear focus states for keyboard navigation
- **Responsive Text**: Scalable text that works at 200% zoom

### Implementation Details
```typescript
// Keyboard navigation in Rail component
function onKeyDown(e: React.KeyboardEvent<HTMLDivElement>) {
  const scroller = e.currentTarget;
  const card = scroller.querySelector<HTMLElement>('[data-card]');
  const delta = cardWidth + gap;
  
  switch (e.key) {
    case 'ArrowRight': 
      scroller.scrollBy({ left: +delta, behavior: 'smooth' }); 
      break;
    // ... other keys
  }
}
```

---

## Performance

### Optimization Strategies

#### Loading Performance
- **Skeleton States**: Immediate visual feedback during data loading
- **Lazy Loading**: Images load only when needed
- **Code Splitting**: Vite automatically splits vendor and app code
- **Tree Shaking**: Unused code eliminated in production builds

#### Runtime Performance
- **React Query Caching**: Prevents unnecessary API calls
- **Memoization**: Components re-render only when props change
- **Virtual Scrolling**: Efficient rendering of large lists (future)
- **Image Optimization**: WebP format with fallbacks

#### Network Optimization
- **API Proxy Caching**: 5-minute cache on successful responses
- **Compression**: Gzip compression for all assets
- **CDN**: Netlify's global CDN for static assets

### Performance Monitoring
```typescript
// Debug helpers for performance analysis
window.debugQueries = () => {
  // Returns React Query cache status
  // Shows data loading states and error conditions
};
```

---

## Testing Strategy

### Testing Pyramid

#### Unit Tests
- **Component Testing**: Individual component behavior
- **Hook Testing**: Custom hook logic validation
- **Utility Testing**: Helper function correctness

#### Integration Tests
- **API Integration**: TMDB proxy and data transformation
- **Component Integration**: Rail and Card interaction
- **State Management**: React Query cache behavior

#### End-to-End Tests (Playwright)
```typescript
// Example E2E test
test('home page renders rails with data', async ({ page }) => {
  await page.goto('/');
  
  // Verify rails are present
  await expect(page.locator('[data-rail="for-you"]')).toBeVisible();
  await expect(page.locator('[data-rail="in-theaters"]')).toBeVisible();
  
  // Verify data loading
  await expect(page.locator('[data-card]')).toHaveCount.greaterThan(0);
});
```

### Test Coverage Goals
- **Unit Tests**: 80%+ coverage for core logic
- **Integration Tests**: Critical user flows
- **E2E Tests**: Happy path scenarios

---

## Deployment

### Netlify Deployment

#### Build Process
1. **Install Dependencies**: `npm install`
2. **Type Check**: `tsc` (TypeScript compilation)
3. **Build Assets**: `vite build` (React app)
4. **Deploy Functions**: Netlify Functions deployment

#### Environment Variables
- **Build Time**: `TMDB_KEY` for serverless functions
- **Runtime**: Feature flags and configuration

#### Deployment Pipeline
```yaml
# netlify.toml configuration
[build]
  publish = "apps/web/dist"
  functions = "netlify/functions"

[dev]
  command = "npm run dev --prefix apps/web"
  targetPort = 5173
  publish = "apps/web"
```

### Production Considerations
- **CDN**: Global content delivery
- **HTTPS**: Automatic SSL certificates
- **Monitoring**: Built-in analytics and error tracking
- **Rollbacks**: Instant rollback capability

---

## Future Roadmap

### Phase 1: Core Functionality
- [ ] User authentication system
- [ ] Personal watchlist management
- [ ] Search functionality
- [ ] Media detail pages

### Phase 2: Enhanced Features
- [ ] Recommendation engine
- [ ] Social features (sharing, reviews)
- [ ] Offline support with service workers
- [ ] Mobile app (Capacitor)

### Phase 3: Advanced Features
- [ ] AI-powered recommendations
- [ ] Integration with streaming services
- [ ] Advanced analytics and insights
- [ ] Multi-language support

---

## Conclusion

Flicklet V2 represents a modern, scalable approach to media tracking applications. The architecture emphasizes:

- **Developer Experience**: TypeScript, modern tooling, comprehensive testing
- **User Experience**: Responsive design, accessibility, performance
- **Maintainability**: Component-based architecture, feature flags, clear separation of concerns
- **Scalability**: Serverless functions, CDN delivery, efficient caching

The design document serves as a living reference for the development team and stakeholders, ensuring consistent implementation and clear understanding of the application's architecture and capabilities.

```

## docs\FLICKLET_CAPABILITY_REPORT.md
```
# Flicklet Capability Report (v2)

**Generated:** January 2025  
**Project:** flicklet-71dff  
**Purpose:** Complete current-state capability map for PM/O&M documentation

---

## 1. Core Features

### Watching List
**What it does:** Users track TV shows and movies they're currently watching. Shows appear in the "Currently Watching" tab with episode tracking support.

**Dependencies:** 
- LocalStorage (`flicklet.library.v2`)
- Firebase Firestore sync (when signed in)
- TMDB API for show metadata

**Test Tasks:**
- Add a show to Watching list from search results
- Verify show appears in "Currently Watching" tab
- Move show to Wishlist or Watched
- Test episode tracking (if enabled in Settings)
- Verify data syncs across devices when signed in

**O&M Tasks:**
- Monitor Firestore read/write quotas
- Check for sync failures in Firebase Console
- Review storage usage for user documents

---

### Wishlist
**What it does:** Users save movies and TV shows they want to watch later. Items appear in the "Want to Watch" tab.

**Dependencies:** 
- LocalStorage
- Firebase Firestore sync
- TMDB API

**Test Tasks:**
- Add item to Wishlist from search or discovery
- Move item from Wishlist to Watching
- Remove item from Wishlist
- Verify items persist after page refresh

**O&M Tasks:**
- Monitor Firestore operations
- Check for data loss reports

---

### Watched List
**What it does:** Users mark content as completed. Items appear in the "Already Watched" tab with user ratings and notes.

**Dependencies:**
- LocalStorage
- Firebase Firestore sync
- TMDB API

**Test Tasks:**
- Mark show/movie as watched
- Add rating (1-5 stars)
- Add notes/review
- Verify watched items appear in Discover recommendations exclusion

**O&M Tasks:**
- Monitor storage growth (watched lists can grow large)
- Review data export functionality

---

### Custom Lists
**What it does:** Users create up to 3 custom lists (e.g., "Holiday Movies", "Date Night"). Items can be organized into custom categories.

**Dependencies:**
- LocalStorage (`flicklet.customLists.v2`)
- Firebase Firestore sync
- Custom list manager

**Test Tasks:**
- Create a new custom list
- Add items to custom list via "My List +" button
- Edit list name/description
- Set default list
- Delete list (verify items are preserved)
- Verify limit of 3 lists (free tier)

**O&M Tasks:**
- Monitor list creation/deletion rates
- Check for custom list sync issues

---

### Discovery & Recommendations
**What it does:** Smart algorithm analyzes user's watching/wishlist/watched lists and ratings to suggest personalized content. Shows 3 customizable genre rows on home page.

**Dependencies:**
- TMDB API (trending, popular, genre endpoints)
- User library data (watching, wishlist, watched, ratings)
- Smart discovery algorithm (`smartDiscovery.ts`)

**Test Tasks:**
- Verify recommendations appear after adding rated content
- Test genre customization in Settings â†’ Layout
- Verify "Not Interested" items are excluded
- Check that recommendations update when library changes

**O&M Tasks:**
- Monitor TMDB API rate limits
- Review recommendation quality (user feedback)
- Check algorithm performance (response times)

---

### Search
**What it does:** Multi-platform search for movies, TV shows, and actors. Supports text search, tag filtering (`tag:comedy`), and genre filtering.

**Dependencies:**
- TMDB API (search/multi, search/tv, search/movie, search/person)
- Local tag search (for user's library)
- Search ranking algorithm (`rank.ts`)

**Test Tasks:**
- Search for movie/TV show title
- Search for actor name
- Use tag search (`tag:action`)
- Filter by genre after search
- Verify search results are ranked correctly
- Test pagination for large result sets

**O&M Tasks:**
- Monitor TMDB API usage
- Check search response times
- Review error rates for failed searches

---

### Ratings
**What it does:** Users rate shows/movies with 1-5 star system. Ratings influence recommendations and are stored per item.

**Dependencies:**
- LocalStorage
- Firebase Firestore sync
- Discovery algorithm (uses ratings for scoring)

**Test Tasks:**
- Rate an item from Watching/Wishlist/Watched
- Change rating
- Verify rating appears on card
- Check that ratings influence Discover recommendations

**O&M Tasks:**
- Monitor rating data quality
- Review recommendation accuracy based on ratings

---

### Episode Tracking
**What it does:** Users track which episode they're on for TV series. Optional feature (disabled by default, can enable in Settings â†’ Layout).

**Dependencies:**
- TMDB API (TV show details, seasons/episodes)
- LocalStorage
- Episode modal component

**Test Tasks:**
- Enable episode tracking in Settings
- Open episode modal on TV show card
- Select current season/episode
- Verify episode progress saves
- Test with shows that have many seasons

**O&M Tasks:**
- Monitor TMDB API calls for episode data
- Check for shows with missing episode data

---

### Notes & Tags
**What it does:** Users add personal notes and tags to any show/movie. Tags support local search (`tag:comedy`).

**Dependencies:**
- LocalStorage
- Firebase Firestore sync

**Test Tasks:**
- Add notes to an item
- Add tags to an item
- Search by tag
- Edit/delete notes
- Verify tags persist after refresh

**O&M Tasks:**
- Monitor storage usage (notes can be long)
- Review tag usage patterns

---

### Community Features

#### Posts & Comments
**What it does:** Users create posts about shows/movies. Other users can vote, comment, and reply. Posts appear on home page and in discovery.

**Dependencies:**
- Firestore (`posts` collection)
- Firebase Auth (for user identification)
- Cloud Functions (aggregation, sanitization)

**Test Tasks:**
- Create a new post
- Vote on a post (upvote/downvote)
- Add a comment
- Reply to a comment
- Mention a user (@username)
- Delete own comments
- Verify vote counts update in real-time

**O&M Tasks:**
- Monitor Firestore read/write quotas
- Review comment moderation (profanity filter)
- Check for spam/vote manipulation
- Monitor Cloud Function execution times

---

#### FlickWord Game
**What it does:** Daily word-guessing game (Wordle-style). Users guess 5-letter words with color feedback. Stats tracked locally.

**Dependencies:**
- LocalStorage (game state, stats)
- Daily word API (`dailyWordApi.ts`)
- Game component (`FlickWordGame.tsx`)

**Test Tasks:**
- Play daily word game
- Verify color feedback (green/yellow/gray)
- Check stats tracking
- Test keyboard input
- Verify game resets daily

**O&M Tasks:**
- Monitor word API availability
- Check for game state corruption
- Review user engagement metrics

---

#### Daily Trivia
**What it does:** Movie/TV trivia questions. Free users get 10 questions/day, Pro users get 50 questions/day. Stats tracked.

**Dependencies:**
- Open Trivia Database API (fallback to hardcoded questions)
- LocalStorage (game state, stats)
- Trivia component (`TriviaGame.tsx`)

**Test Tasks:**
- Play free trivia (10 questions)
- Verify Pro unlocks more questions (if Pro enabled)
- Check answer validation
- Test stats tracking
- Verify daily reset

**O&M Tasks:**
- Monitor trivia API availability
- Review fallback question quality
- Check for Pro feature gating

---

#### Community Player
**What it does:** YouTube player for curated entertainment videos. Currently uses seed data (`community-seed.json`), rotates daily.

**Dependencies:**
- YouTube embed API
- Seed data file
- Community player component

**Test Tasks:**
- Verify player loads on home page
- Check video playback controls
- Test daily rotation
- Verify YouTube embed works

**O&M Tasks:**
- Monitor YouTube API changes
- Update seed data periodically
- Review video availability

---

### Notifications
**What it does:** Users receive notifications for episode reminders, comment replies, and mentions. Supports in-app, push, and email (Pro only).

**Dependencies:**
- Firebase Cloud Messaging (FCM)
- SendGrid (email via extension)
- Notification settings (localStorage + Firestore)
- Cloud Functions (weeklyDigest, sendPushOnReply)

**Test Tasks:**
- Enable notifications in Settings
- Grant browser permission
- Test episode reminder notification
- Test push notification for comment reply
- Test email notification (Pro only)
- Verify unsubscribe link works
- Test per-show notification settings

**O&M Tasks:**
- Monitor FCM token registration
- Check SendGrid delivery rates
- Review weekly digest success rate
- Monitor notification permission prompts
- Review bounce/spam reports

---

### Pro Features (Preview-Only)
**What it does:** Pro features are visible but locked behind Pro subscription. Users can preview but not use until Pro is enabled.

**Pro Features:**
- Email notifications (custom timing)
- Advanced notifications (per-show timing override)
- Theme packs (holiday themes)
- Extended trivia (50 vs 10 questions)
- Bloopers & Extras access
- CSV export
- Custom list limit increase (3 â†’ unlimited)

**Dependencies:**
- Settings.pro flag (localStorage)
- Feature gating logic
- Payment integration (not yet implemented)

**Test Tasks:**
- Verify Pro features show locked icon
- Check upgrade prompt appears
- Test Pro preview functionality
- Verify Pro features unlock when flag enabled

**O&M Tasks:**
- Monitor Pro feature usage (when enabled)
- Review upgrade conversion rates
- Check for Pro feature bugs

---

### PWA Installation
**What it does:** App can be installed as Progressive Web App on mobile and desktop. Works offline after installation.

**Dependencies:**
- Service Worker (`sw.js`)
- Web App Manifest (`manifest.webmanifest`)
- Install prompt hook (`useInstallPrompt.ts`)

**Test Tasks:**
- Verify install prompt appears (Chrome/Edge)
- Test installation on mobile Android
- Test installation on desktop
- Test iOS "Add to Home Screen" (Safari)
- Verify app works offline after installation
- Test service worker caching

**O&M Tasks:**
- Monitor install success rates
- Check service worker errors
- Review offline functionality reports
- Update manifest when needed

---

### Offline Support
**What it does:** App caches previously visited posts and pages. Works offline for cached content. New searches/comments queue until online.

**Dependencies:**
- Service Worker
- Cache API
- Offline queue (for comments)

**Test Tasks:**
- Visit posts while online
- Go offline
- Verify cached posts load
- Test offline search (should show error gracefully)
- Test comment queuing (offline)
- Verify comments send when back online

**O&M Tasks:**
- Monitor cache size
- Check for cache corruption
- Review offline error handling

---

### Feedback System
**What it does:** Users submit bug reports and feature requests via in-app form. Data stored in Firestore.

**Dependencies:**
- Firestore (`feedback` collection)
- Feedback panel component

**Test Tasks:**
- Submit feedback form
- Verify feedback appears in Firestore
- Test form validation
- Check error handling

**O&M Tasks:**
- Monitor feedback submission rate
- Review feedback regularly
- Respond to critical issues

---

### Authentication
**What it does:** Users sign in with Google or Apple. Syncs data across devices. Supports multi-tab detection.

**Dependencies:**
- Firebase Auth
- Google OAuth
- Apple OAuth
- Auth state management

**Test Tasks:**
- Sign in with Google
- Sign in with Apple
- Verify data syncs after sign-in
- Test sign out
- Test multi-tab auth handling
- Verify username prompt after first sign-in

**O&M Tasks:**
- Monitor auth success/failure rates
- Check for auth redirect issues
- Review user account creation
- Monitor Firebase Auth quota

---

### Settings
**What it does:** Comprehensive settings page with 6 tabs: General, Notifications, Layout, Data, Pro, About.

**Settings Sections:**
- General: Display name, personality level, language
- Notifications: Global settings, per-show overrides
- Layout: Theme, condensed view, home page rails, For You genres, episode tracking
- Data: Export/import, share with friends, reset data
- Pro: Pro status, upgrade prompt, feature list
- About: Version, help, feedback

**Dependencies:**
- LocalStorage (`flicklet.settings.v2`)
- Firebase Firestore sync
- Settings manager

**Test Tasks:**
- Change display name
- Toggle theme (light/dark)
- Enable/disable episode tracking
- Configure For You genres
- Export data (JSON)
- Import data
- Reset all data

**O&M Tasks:**
- Monitor settings sync issues
- Review data export functionality
- Check for settings corruption

---

## 2. Admin & Backend

### Admin Dashboard
**What it does:** Admin-only dashboard for content moderation, user management, and data export. Accessible at `/admin` route.

**Features:**
- Metrics cards (total posts, comments, users)
- Posts list with bulk actions
- User management (grant/revoke admin roles)
- Comments management (view/delete per post)
- CSV export

**Dependencies:**
- Firebase Auth (custom claims for admin role)
- Firestore (posts, comments, users collections)
- Cloud Functions (setAdminRole, manageAdminRole)

**Test Tasks:**
- Verify admin role grant (via Firebase Functions shell)
- Access `/admin` route
- View metrics cards
- Select multiple posts
- Delete posts (bulk)
- Grant admin role to another user
- Export data to CSV
- View comments for a post

**O&M Tasks:**
- Review admin role assignments
- Monitor admin dashboard access
- Check for unauthorized access attempts
- Review moderation actions

---

### Cloud Functions

#### weeklyDigest (Scheduled)
**What it does:** Sends weekly email digest every Friday at 9 AM UTC. Includes top posts, new comments, and mentions.

**Dependencies:**
- Firestore (posts, comments, users collections)
- firestore-send-email extension
- SendGrid SMTP

**Test Tasks:**
- Verify function runs on schedule
- Check emails are sent
- Test unsubscribe link
- Verify email content is correct

**O&M Tasks:**
- Monitor function execution logs
- Check email delivery rates
- Review unsubscribe rates
- Verify SendGrid quota

---

#### unsubscribe (Callable)
**What it does:** Handles email unsubscribe requests from digest emails. Sets `emailSubscriber=false` on user document.

**Dependencies:**
- Firebase Auth (JWT token verification)
- Firestore (users collection)

**Test Tasks:**
- Click unsubscribe link in email
- Verify user is unsubscribed
- Check token expiration handling

**O&M Tasks:**
- Monitor unsubscribe requests
- Check for token validation errors

---

#### setAdminRole (Callable)
**What it does:** Grants admin role to authenticated user. Sets custom claim `{role: 'admin'}`.

**Dependencies:**
- Firebase Auth
- Firebase Admin SDK

**Test Tasks:**
- Call function (authenticated)
- Verify admin role is granted
- Check user must sign out/in for changes to take effect

**O&M Tasks:**
- Audit admin role grants
- Monitor function calls
- Review security logs

---

#### manageAdminRole (Callable)
**What it does:** Admins can grant/revoke admin roles for other users. Prevents self-demotion.

**Dependencies:**
- Firebase Auth (admin check)
- Firebase Admin SDK

**Test Tasks:**
- Grant admin role to another user
- Revoke admin role
- Verify self-demotion prevention
- Check authorization

**O&M Tasks:**
- Monitor admin role changes
- Review security logs
- Audit admin user list

---

#### sanitizeComment (Trigger)
**What it does:** Automatically filters profanity from comments. Deletes comments with disallowed words. Updates comment count.

**Dependencies:**
- Firestore trigger (on comment write)
- Bad words list (`bad-words.json`)

**Test Tasks:**
- Post comment with profanity
- Verify comment is deleted
- Post clean comment
- Verify comment is saved
- Check comment count updates

**O&M Tasks:**
- Monitor profanity filter effectiveness
- Update bad words list as needed
- Review false positives

---

#### aggregateVotes (Trigger)
**What it does:** Updates post score and vote count when users vote. Runs automatically on vote create/update/delete.

**Dependencies:**
- Firestore trigger (on vote write)
- Firestore (posts collection)

**Test Tasks:**
- Vote on a post
- Verify score updates
- Change vote
- Verify score updates correctly
- Remove vote
- Verify score decreases

**O&M Tasks:**
- Monitor aggregation accuracy
- Check for vote manipulation
- Review function execution times

---

#### aggregateReplies (Trigger)
**What it does:** Updates reply count on parent comment when replies are created/updated/deleted.

**Dependencies:**
- Firestore trigger (on reply write)
- Firestore (comments collection)

**Test Tasks:**
- Reply to a comment
- Verify reply count updates
- Delete reply
- Verify count decreases

**O&M Tasks:**
- Monitor aggregation accuracy
- Check for function errors

---

#### sendPushOnReply (Trigger)
**What it does:** Sends push notification to comment author when someone replies. Skips if user replies to own comment.

**Dependencies:**
- Firestore trigger (on reply create)
- FCM token (from user document)
- Firebase Admin SDK messaging

**Test Tasks:**
- Reply to another user's comment
- Verify push notification is sent
- Reply to own comment
- Verify no notification
- Check invalid token cleanup

**O&M Tasks:**
- Monitor notification delivery rates
- Check for FCM token errors
- Review notification failures

---

## 3. Integrations

### TMDB API
**What it does:** Provides movie/TV show metadata, posters, search results, and trending content.

**Dependencies:**
- TMDB API key (in Netlify env vars)
- TMDB proxy function (deprecated, now direct calls)
- API client (`tmdb.ts`)

**Test Tasks:**
- Search for content
- Load movie/TV details
- Fetch trending content
- Load posters
- Verify API rate limiting

**O&M Tasks:**
- Monitor API rate limits
- Check API key rotation
- Review API response times
- Monitor quota usage

---

### Firebase Services

#### Firestore
**What it does:** Primary database for posts, comments, users, votes, and synced library data.

**Collections:**
- `posts/{postId}`
- `posts/{postId}/comments/{commentId}`
- `posts/{postId}/comments/{commentId}/replies/{replyId}`
- `posts/{postId}/votes/{userId}`
- `users/{uid}` (synced library data)
- `mail` (for email extension)

**Test Tasks:**
- Create a post
- Verify data is saved
- Check real-time updates
- Test security rules

**O&M Tasks:**
- Monitor read/write quotas
- Review security rules violations
- Check storage usage
- Perform regular backups

---

#### Firebase Auth
**What it does:** Handles user authentication (Google, Apple). Stores custom claims (admin role).

**Test Tasks:**
- Sign in with Google
- Sign in with Apple
- Verify custom claims (admin role)
- Test token refresh

**O&M Tasks:**
- Monitor auth quota
- Review user creation rates
- Check for auth errors
- Monitor admin role grants

---

#### Firebase Hosting
**What it does:** Serves static files as fallback (primary is Netlify CDN).

**Test Tasks:**
- Verify hosting is configured
- Test fallback routing

**O&M Tasks:**
- Monitor hosting usage
- Review deployment logs

---

#### Firebase Extensions

##### firestore-send-email@0.2.4
**What it does:** Sends emails when documents are added to `mail` collection. Used for weekly digest.

**Configuration:**
- AUTH_TYPE: UsernamePassword
- SMTP: SendGrid (smtp.sendgrid.net:587)
- From: noreply@[domain]
- Collection: mail

**Test Tasks:**
- Create mail document
- Verify email is sent
- Check SendGrid delivery

**O&M Tasks:**
- Monitor extension logs
- Check SendGrid configuration
- Review email delivery rates
- Monitor SendGrid quota

---

### SendGrid
**What it does:** Email delivery service for weekly digests and notifications.

**Dependencies:**
- SendGrid API key
- SMTP configuration
- firestore-send-email extension

**Test Tasks:**
- Verify API key is valid
- Test email sending
- Check bounce handling

**O&M Tasks:**
- Rotate API key quarterly
- Monitor delivery rates
- Review bounce/spam reports
- Check sender reputation

---

### Netlify
**What it does:** Primary hosting/CDN for the app. Handles builds and deployments.

**Test Tasks:**
- Verify latest deploy is successful
- Check build logs
- Test CDN caching

**O&M Tasks:**
- Monitor build times
- Review deploy success rates
- Check bandwidth usage
- Monitor build minutes quota

---

## 4. O&M Tasks & Monitoring

### Daily Tasks
- Check Firebase Console logs for errors
- Verify Netlify deploy status
- Review SendGrid activity (delivery rates, bounces)
- Monitor error rates (Firebase Functions, Netlify)
- Check database quotas (Firestore reads/writes)
- Review user feedback
- Test critical paths (sign in, search, comments)

### Weekly Tasks
- Backup Firestore data (Monday)
- Check dependency updates (Tuesday)
- Review security rules (Wednesday)
- Performance audit (Thursday)
- Verify weekly email digest sent (Friday)

### Monthly Tasks
- Quota audit (Firebase, Netlify, SendGrid)
- Key rotation (SendGrid API key, service accounts)
- Disaster recovery test
- Cost review and optimization

### Monitoring & Alerts
- Function error rate > 5%
- Quota usage > 80%
- Email delivery rate < 90%
- Function execution time > 10s
- Daily cost threshold exceeded

### Backup & Recovery
- Firestore: Weekly exports to GCS
- Settings: LocalStorage + Firestore sync
- User data: Automatic sync on sign-in

### Data Retention
- Posts: Indefinite (user-created content)
- Comments: Indefinite (user-created content)
- User library: Indefinite (until user deletes)
- Notification logs: 30 days (configurable)
- Feedback: Indefinite (for product improvement)

---

## Feature Status Summary

### âœ… Fully Active
- Watching/Wishlist/Watched lists
- Search & Discovery
- Ratings & Notes
- Posts, Comments, Votes
- FlickWord Game
- Daily Trivia (free tier)
- Notifications (in-app, push)
- PWA Installation
- Offline Support
- Admin Dashboard
- Custom Lists (up to 3)
- Episode Tracking (optional)

### ðŸ”’ Pro Features (Preview-Only)
- Email notifications
- Advanced notifications (custom timing)
- Theme packs
- Extended trivia (50 questions)
- Bloopers & Extras
- CSV export
- Unlimited custom lists

### ðŸš§ Experimental/Disabled (Feature Flags)
- Community Player (disabled by default)
- Community Games (disabled by default)
- Episode Tracking (disabled by default, can enable)
- Mobile Compact V1 (disabled)
- Mobile Actions Split V1 (disabled)
- Extras/Bloopers Search Assist (disabled)

### ðŸ“‹ Coming Soon
- Payment integration for Pro
- User-submitted community content
- Enhanced sharing features
- Additional theme packs

---

**Document Version:** 1.0  
**Last Updated:** January 2025  
**Next Review:** After major feature releases










```

## FLICKLET_FORENSIC_ANALYSIS.md
```
# Flicklet App - Complete Forensic Analysis

## Overview

Flicklet is a sophisticated TV and movie tracking web application built with vanilla JavaScript, Firebase, and TMDB API. It's a Progressive Web App (PWA) with mobile-first design, featuring user authentication, cloud sync, and comprehensive media management.

## Core Architecture

### Technology Stack
- **Frontend**: Vanilla JavaScript (ES6+), HTML5, CSS3
- **Backend**: Firebase (Auth, Firestore, Storage)
- **API**: The Movie Database (TMDB) API
- **Mobile**: Capacitor for native app packaging
- **Styling**: CSS Custom Properties, Mobile-first responsive design

### Data Storage System
The app uses a dual storage approach:

**Local Storage**: Primary data persistence in `localStorage` as `flicklet-data`:
```javascript
{
  tv: { watching: [], wishlist: [], watched: [] },
  movies: { watching: [], wishlist: [], watched: [] },
  settings: { 
    pro: false, 
    episodeTracking: false, 
    theme: 'light', 
    lang: 'en', 
    username: '', 
    displayName: '' 
  }
}
```

**Cloud Sync**: When signed in, everything automatically syncs to Firebase Firestore under `users/{uid}/` with the same structure.

## Authentication System

### Sign-In Methods
The app offers three authentication options:

1. **Google Sign-In**: Uses popup on desktop, automatically falls back to redirect on mobile/blocked popups
2. **Apple Sign-In**: Always uses redirect (never popup) - shows warning on localhost since Apple requires verified domains
3. **Email/Password**: Shows a modal form for direct email/password entry

### Username Flow
After successful sign-in:
1. System checks if user has a username set
2. If not, shows modal asking **"what should we call you?"**
3. User input gets saved to both:
   - `appData.settings.username` (for sarcastic header message)
   - `appData.settings.displayName` (for account button)
4. Username appears in left-justified header area (`#leftSnark`) with sarcastic remark like "welcome back, legend âœ¨"
5. If username is changed later in settings, system warns user and updates both header and Firebase

## Main App Sections

### Home Tab - Dashboard
The home page contains 5 main groups:

1. **Your Shows Section**:
   - **Currently Watching Rail**: Shows from both TV and movies you're actively watching
   - **Up Next Rail**: Next episodes for TV shows you're watching

2. **Community Section**:
   - **Left Half**: YouTube player with curated content
   - **Right Half**: Games (FlickWord top, Trivia bottom)

3. **For You Section**: 3 customizable genre rails with smart defaults

4. **In Theaters Section**: Current movies with theater information

5. **Feedback Section**: Form for user feedback

### Other Tabs
- **Currently Watching**: All actively watched content with count badges
- **Want to Watch**: Wishlist with count badges  
- **Already Watched**: Completed shows/movies with count badges
- **Discover**: Personalized recommendations based on ratings and viewing habits
- **Settings**: Six sub-sections (General, Notifications, Layout, Data, Pro, About)

## Smart "For You" System

### Intelligent Genre Detection
The system analyzes your watching history to provide personalized recommendations:

1. **Smart Analysis**: Counts genre occurrences in `appData.tv.watching` and `appData.movies.watching`
2. **Top 3 Selection**: Picks the most common genres from your actual viewing habits
3. **Automatic Defaults**: Creates rails for your most-watched genres

### User Customization
In Settings â†’ Layout, users can override smart defaults with 3 dropdown sets per rail:
- **Main Genre**: Drama, Comedy, Action, etc.
- **Sub-Genre**: Crime, Romance, Thriller, etc.
- **Media Type**: Movies, TV, Both

### Fallback System
If no customization and insufficient watching data, defaults to:
- "Drama & Crime"
- "Comedy & Romance" 
- "Sci-Fi & Fantasy"

## Rating System

### User Rating Storage
User ratings are stored per movie/show in the main data structure:
```javascript
{
  id: 123,
  title: "Breaking Bad",
  userRating: 5,  // User's 1-5 star rating
  rating: 9.5,   // TMDB's average rating
  // ... other fields
}
```

### Rating Interface
- Cards display 5 open stars for 1-5 star ratings
- Ratings stored as `userRating` field
- Used for discovery algorithm and personal tracking
- Higher-rated items appear in Discover recommendations

### Rating Functions
- `updateUserRating(itemId, rating)` - Updates local and cloud storage
- `saveUserRating(id, rating)` - Saves rating to Firebase

## Holiday Chip System

### Implementation
- Every card has a "Holiday +" chip in top-right corner
- Click opens modal with holiday category options (Christmas, Halloween, etc.)
- Selected holiday updates card with "Holiday: [Category]" badge
- Holiday assignments stored in card's data structure

### Future Integration
When Holiday Selections tab is implemented:
- Cards with holiday tags automatically appear in Holiday tab
- Content categorized by seasonal themes
- Enables seasonal content discovery

## Community Features

### YouTube Player Integration
**Current Implementation**:
- Pulls from `/data/community-seed.json` with manually curated content
- Contains horror trailers, movie spotlights, etc.
- Uses YouTube embed API with autoplay, controls, playlist management
- Daily rotation (same video all day, changes at midnight)

**Content Structure**:
```javascript
{
  "id": "horror-001",
  "type": "TRAILER_SPOTLIGHT", 
  "title": "The Exorcist (1973)",
  "media": {
    "kind": "youtube",
    "src": "https://www.youtube.com/embed/YDGw1MTEe9k",
    "autoplay": false,
    "controls": true
  },
  "attribution": {
    "displayName": "Flicklet Picks",
    "watermark": "Top Horror"
  }
}
```

**Future Vision**:
- **Phase 1**: Manual curation of top 10 videos per genre
- **Phase 2**: User/influencer video submissions
- **Phase 3**: Community-driven content with moderation

### Games
**FlickWord**: Fully playable Wordle-style game with stats tracking
**Trivia**: 10 questions free, 50 questions Pro, with statistics

## Episode Tracking System

### Default Behavior
- Episode tracking is **OFF** by default (Keep It Simple philosophy)
- Users can toggle "Enable Episode Tracking" in Settings â†’ Layout

### When Enabled
- Episode tracking buttons become clickable on Currently Watching cards
- Clicking opens modal for episode-level progress updates
- Tracks which episode user is on for TV series (not within-episode progress)

## Pro System - Monetization Strategy

### Payment Methods (Not Yet Implemented)
- **App Store**: In-app purchases through iOS/Android stores
- **Ad-Based**: Watch ads to unlock Pro features temporarily
- **Direct Payment**: Future web-based payment integration

### Pro Features (Currently Preview-Only)
- **Extended Themes**: Dark Pro, Neon Pro, Minimal Pro (vs. Classic only)
- **Trivia+**: 50 questions vs. 10 free
- **Bloopers & Behind Scenes**: Extra content buttons on cards
- **Granular Reminders**: Customizable timing vs. 24-hour default
- **Robust Share**: Enhanced sharing options vs. basic copy/paste list
- **CSV Export**: Export data to spreadsheets

### Pro Gating
- Pro features visible but disabled with ðŸ”’ icons
- Users can preview Pro features without purchasing
- Clear upgrade path and feature comparison

## Content Management

### "Not Interested" System
- Every card has "Not Interested" button
- Items marked as not interested are quarantined from recommendations
- Users can manage their "Not Interested" list in Settings â†’ Data
- Items can be removed to reappear in recommendations

### Data Migration
- Only used for transferring data between devices (iPhone to Android, etc.)
- Not for app version changes
- Maintains data integrity across platforms

## Multi-Language Support

### Languages
- **English** and **Spanish** with dynamic translation system
- Language toggle available in header
- All UI text uses translation system for seamless switching

## User Experience Features

### Three Personality Modes
- **Regular**: Standard tone
- **Semi-sarcastic**: Mildly humorous interactions
- **Severely sarcastic**: Highly sarcastic messaging
- Affects tone of messages and interactions throughout the app

### Accessibility
- ARIA attributes for screen readers
- Keyboard navigation support
- Semantic HTML structure
- High contrast support

## Technical Implementation Details

### Event System
- Custom events for module communication (`app:data:ready`, `firebase:ready`)
- Event listeners trigger UI updates
- Centralized auth state management

### Performance Optimizations
- Lazy loading for images
- Debounced search (500ms delay)
- Virtual scrolling for large lists
- Request idle callback for heavy operations

### Security
- Content Security Policy headers
- Input sanitization for XSS prevention
- Firebase security rules for data validation
- Secure API key handling through serverless functions

## Data Flow Summary

1. **User Action** â†’ Function triggers (search, rate, add to list)
2. **Update Global State** â†’ Modify `window.appData`
3. **Persist to Storage** â†’ Save to localStorage + Firebase
4. **Update UI** â†’ Refresh components and tab counts
5. **Sync Cloud** â†’ Background sync when authenticated

## Future Roadmap

### Planned Features
- **Holiday Selections Tab**: Dedicated seasonal content
- **Social Features**: Community-driven content and games
- **Advanced Analytics**: Detailed watching statistics
- **Enhanced Pro Features**: More premium content and tools

### Technical Improvements
- **Service Workers**: Offline functionality and caching
- **Real-time Sync**: WebSocket integration for live updates
- **Advanced Search**: Filters, sorting, and saved searches
- **CDN Integration**: Static asset optimization

---

*This forensic analysis is based on examination of the actual codebase and represents the current implementation as of the analysis date.*

```

## FLICKLET_USER_GUIDE.md
```
# Flicklet User Guide
*Your Personal TV & Movie Tracker*

Welcome to Flicklet! This guide will walk you through all the features and help you get the most out of your personal entertainment tracking experience.

## ðŸ  **Home Page Overview**

The home page is your entertainment dashboard, organized into several key sections:

### **Your Shows Section**
- **Currently Watching**: Shows and movies you're actively watching
- **Up Next**: Episodes airing this week for your shows
- **Want to Watch**: Your wishlist of content you want to see
- **Already Watched**: Content you've completed

### **Community Section**
Interactive entertainment features:
- **ðŸŽ¬ Community Player**: Watch curated video content (currently featuring demo videos)
- **ðŸŽ¯ FlickWord**: Daily word-guessing game with stats tracking
- **ðŸ§  Daily Trivia**: Movie/TV trivia questions (first 10 free, more with Pro)

### **For You Section**
Personalized recommendations based on your genre preferences:
- **3 customizable rows** showing content tailored to your tastes
- **Dynamic titles** like "Anime/Action" or "Horror/Psychological"
- **24 items per row** from The Movie Database (TMDB)

### **In Theaters Near You**
- **Realistic Theater Data**: Generates realistic theaters near your location using TMDB movie data
- **Real Addresses**: Uses your actual city/region to create realistic theater addresses
- **Real Theater Websites**: Links to actual theater chain websites (AMC.com, RegMovies.com, etc.)
- **Contact Information**: Phone numbers and website links for each theater
- **Smart Showtime Generation**: Creates showtimes based on current movies, popularity, and ratings
- **"Real Showtimes" Links**: Direct links to theater websites for accurate showtimes and ticket booking
- **Realistic Availability**: Evening shows more likely sold out, matinees more available
- **Interactive Theater Cards**: Click to expand and see detailed showtimes, formats, and availability
- **Zero Cost**: Uses only free TMDB API - no paid services required

---

## âš™ï¸ **Settings & Customization**

Access settings via the gear icon (âš™ï¸) in the top-right corner.

### **General Tab**
- **Display Name**: Personalize your experience
- **Language**: Switch between English and Spanish
- **Personality Level**: Choose your preferred interaction style:
  - **Regular**: Friendly and helpful
  - **Semi-Sarcastic**: A bit cheeky
  - **Severely Sarcastic**: Maximum sass

### **Layout Tab**
- **Theme Preference**: Dark or Light mode
- **My Lists Management**: Create and manage custom lists
- **Episode Tracking**: Enable individual episode tracking
- **ðŸŽ¯ For You Section Configuration**: 
  - Configure 3 personalized genre rows
  - Choose main genre + subgenre combinations
  - See live preview of what will appear
  - Examples: Anime/Action, Horror/Psychological, Comedy/Romantic

### **Notifications Tab**
- **Core Features**: Basic notification settings
- **Pro Features**: Advanced notifications (Pro users only)

### **Data Tab**
- **Export/Import**: Backup and restore your data
- **Reset Data**: Clear all your lists and settings
- **Test Data**: Add sample content for testing

### **Social Tab** (Coming Soon)
- **Friend Connections**: Connect with friends
- **Shared Watchlists**: Collaborative lists
- **Activity Feed**: See what friends are watching
- **Recommendations**: Get suggestions from friends

### **Community Tab**
- **Game Statistics**: Track your FlickWord and Trivia performance
- **Media Statistics**: Movies and TV shows in your lists
- **Community Engagement**: Friends and shared content stats

---

## ðŸ“± **Navigation**

### **Main Tabs**
- **ðŸ  Home**: Your dashboard with all sections
- **ðŸ‘ï¸ Currently Watching**: Active shows and movies
- **ðŸ’ Want to Watch**: Your wishlist
- **âœ… Already Watched**: Completed content
- **ðŸ” Discovery**: Search and recommendations

### **My Lists**
- **Custom Lists**: Personal collections you create
- **Add Items**: Use the "My List +" button on any content
- **Manage Lists**: Edit, delete, or set as default in Settings

---

## ðŸŽ® **Games & Community Features**

### **FlickWord Game**
- **Daily Word Challenge**: Guess the 5-letter word
- **Color Feedback**: 
  - ðŸŸ© Green: Correct letter in correct position
  - ðŸŸ¨ Yellow: Correct letter in wrong position
  - â¬œ Gray: Letter not in word
- **Statistics Tracking**: Games played, accuracy, streaks
- **Keyboard Input**: Click keys or use physical keyboard

### **Daily Trivia**
- **Free Questions**: First 10 questions daily are free
- **Pro Questions**: Additional questions with Pro subscription
- **Multiple Choice**: Select the correct answer
- **Statistics**: Track accuracy and streaks

### **Community Player**
- **Video Content**: Curated entertainment videos
- **Player Controls**: Play, pause, restart
- **Future Updates**: Will feature community-submitted content

---

## ðŸ” **Search & Discovery**

### **Search Functionality**
- **Multi-Platform**: Search movies and TV shows together
- **Real-Time Results**: Instant search as you type
- **Poster Images**: Visual results with movie/TV show posters
- **Add to Lists**: Click "My List +" to add to any list

### **Discovery Features**
- **Personalized Recommendations**: Based on your watching history
- **Trending Content**: What's popular right now
- **Genre-Based Suggestions**: Tailored to your preferences

---

## ðŸ“Š **Data Management**

### **Your Data**
- **Local Storage**: All data stored on your device
- **Cloud Sync**: Sign in to sync across devices
- **Export Options**: Download your data as JSON
- **Import Options**: Restore from backup files

### **Authentication**
- **Google Sign-In**: Quick and secure
- **Apple Sign-In**: For iOS users
- **Email/Password**: Traditional sign-in
- **Offline Mode**: Works without internet

---

## ðŸŽ¯ **Pro Features**

### **What's Included**
- **Advanced Notifications**: Custom timing and monitoring
- **Additional Trivia**: More daily questions
- **CSV Export**: Spreadsheet-compatible data export
- **Premium Themes**: Extra visual customization options

### **How to Upgrade**
- **Settings â†’ Pro Tab**: View all Pro features
- **Upgrade Options**: Coming soon with subscription plans

---

## ðŸ’¡ **Tips & Best Practices**

### **Getting Started**
1. **Set Your Display Name**: Personalize your experience
2. **Configure For You Section**: Choose 3 genre combinations you love
3. **Add Some Content**: Use search to find shows/movies you want to track
4. **Create Custom Lists**: Organize content by themes or moods

### **Maximizing Your Experience**
- **Use Search Frequently**: Discover new content easily
- **Play Daily Games**: Build streaks and improve your stats
- **Check Settings Regularly**: Customize as your preferences evolve
- **Export Your Data**: Keep backups of your lists

### **Troubleshooting**
- **Blank For You Section**: Check your genre configuration in Settings
- **Missing Content**: Ensure you're signed in for cloud sync
- **Game Issues**: Try refreshing the page if games don't load
- **Search Problems**: Check your internet connection

---

## ðŸ”„ **Data Sync & Backup**

### **Local vs Cloud**
- **Local Storage**: Always works, even offline
- **Cloud Sync**: Keeps data synchronized across devices
- **Automatic Backup**: Changes saved automatically
- **Manual Export**: Download your data anytime

### **Sign-In Benefits**
- **Cross-Device Access**: Use Flicklet on phone, tablet, computer
- **Data Security**: Your lists backed up to the cloud
- **Seamless Experience**: Pick up where you left off

---

## ðŸŽ¨ **Customization Options**

### **Visual Themes**
- **Dark Mode**: Easy on the eyes for night viewing
- **Light Mode**: Clean and bright for daytime use
- **Auto-Detection**: Follows your system preference

### **Layout Preferences**
- **Condensed View**: More items per screen
- **Poster Display**: Show/hide movie/TV show posters
- **Custom Lists**: Create unlimited personal collections

---

## ðŸ“ž **Support & Feedback**

### **Getting Help**
- **Settings â†’ Feedback**: Share your thoughts
- **Report Issues**: Help us improve Flicklet
- **Feature Requests**: Suggest new functionality

### **Community**
- **Share Lists**: Coming soon - share with friends
- **Recommendations**: Get suggestions from the community
- **Leaderboards**: Compete in games (coming soon)

---

## ðŸš€ **What's Coming Next**

### **Planned Features**
- **Social Features**: Friend connections and shared lists
- **Advanced Recommendations**: AI-powered suggestions
- **Community Content**: User-submitted videos and reviews
- **Mobile App**: Native iOS and Android apps
- **Offline Mode**: Full functionality without internet

### **Pro Enhancements**
- **Advanced Analytics**: Detailed watching statistics
- **Custom Themes**: More visual customization
- **Priority Support**: Faster help when you need it
- **Early Access**: Try new features first

---

*Flicklet is designed to be simple, useful, and not boring. We're constantly improving based on your feedback, so don't hesitate to share your thoughts!*

**Happy Watching! ðŸŽ¬âœ¨**

```

## HELP_REPORT.md
```
# Flicklet Help & Support

**Version:** Flicklet v2  
**Source:** `apps/web/src/components/HelpModal.tsx`  
**Purpose:** A clear, plain-language guide to every major feature and common issue.

---

## 1. Welcome to Flicklet ðŸ‘‹

Flicklet helps you **keep track of what you watch** and **discover what to watch next**.  
You can use it on your phone, tablet, or computerâ€”your lists sync automatically when youâ€™re signed in.

Think of it as a personal entertainment dashboard:
- Save what youâ€™re watching now
- Build a wishlist of whatâ€™s next
- Mark what youâ€™ve finished
- Find new recommendations that fit your taste

---

## 2. Getting Started ðŸš€

### Sign In & Setup
1. Open Flicklet and tap **Sign In** in the top corner.  
2. Choose your Google account (required for sync).  
3. Once signed in, your lists and settings are stored securely in your account.

### Navigating the App
Across the bottom (mobile) or top (desktop), youâ€™ll see the main sections:
- **Home:** personalized dashboard and recommendations  
- **Currently Watching:** everything youâ€™re mid-way through  
- **Want to Watch:** your wishlist of shows and movies  
- **Watched:** what youâ€™ve completed  
- **Discovery:** smart suggestions based on your viewing  
- **My Lists:** any custom lists youâ€™ve created  
- **Settings (âš™ï¸):** your preferences, data, and Pro options  

### Adding Your First Show or Movie
1. Tap the **Search bar** ðŸ” at the top.  
2. Type a title or actorâ€™s name.  
3. Tap the **âž• Add** button on any card to put it in your *Want to Watch* list.  
4. You can move it to *Currently Watching* once you start it.

---

## 3. Managing Your Library ðŸ“š

### Your Lists Explained
- **Currently Watching:** active shows and movies youâ€™re tracking.  
- **Want to Watch:** your personal wishlist.  
- **Watched:** completed items.  
- **Returning:** shows confirmed for another season.  
- **My Lists:** fully custom collections (for example, "Holiday Movies" or "Scary Stuff").  

### Organizing Content
- Drag and drop items to reorder within a list (desktop).  
- On mobile, swipe **right** to mark as *Watched* or **left** to move to another list.  
- Tap the **â‹¯ (More)** button on any card to see all actions: rate, tag, add notes, view bloopers, etc.  
- Add notes for your own reminders (e.g., "stopped at episode 4").  
- Use tags to group items ("comedy," "family," "2024").  
- Rate items â­ 1-5 to improve your recommendations.

### Tracking Episodes
If youâ€™re watching a TV show:
1. Tap **Track Episodes** from the overflow menu.  
2. Use the selector to mark what youâ€™ve seen.  
3. Flicklet will highlight whatâ€™s next to watch.

---

## 4. Discovery & Search ðŸ”

### Finding New Content
- Type anything into the Search barâ€”title, actor, or genre.  
- Use the filter above the results to limit by **Movies**, **TV**, or **People**.  
- Discovery tab gives you **"For You" rails**â€”personalized picks based on your ratings and history.  

### Tips
- Use **tag:** search (like `tag:comedy`) to search your own lists.  
- Discovery shows only refresh when your tastes changeâ€”rate or tag more items to improve accuracy.  

---

## 5. Notifications ðŸ””

### What You Can Get
- **Episode Alerts:** when new episodes air.  
- **Weekly Discover:** curated picks sent weekly.  
- **Monthly Stats:** quick snapshot of your viewing totals.  
- **Custom Reminders:** set alerts ahead of time.

### How to Manage
1. Go to **Settings â†’ Notifications**.  
2. Toggle each alert on or off.  
3. Adjust timing for episode reminders (e.g., 1 hour before).  
4. Make sure your browser or device allows notifications from Flicklet.

If you stop receiving alerts, check:
- Your browserâ€™s permission settings.  
- Youâ€™re still signed in.  
- You havenâ€™t cleared site data or cookies.

---

## 6. Settings & Customization âš™ï¸

### Personalize Your Experience
- Switch between **Light** and **Dark** mode.  
- Change your **display name** (shown in community or Pro features).  
- Choose your **personality level**â€”controls the humor tone of messages and empty states.  
- Pick your favorite genres to shape *For You* recommendations.

### Layout Options
- Toggle **Condensed View** for tighter spacing.  
- Choose which sections appear on your Home screen.  
- Enable or disable **Episode Tracking** here too.

### Data Management
- **Export Backup:** download a JSON copy of your data.  
- **Import Backup:** restore from a saved file.  
- **Share With Friends:** generate a shareable summary of your lists.  
- **Reset All Data:** wipes everything back to defaults (careful).

### Privacy & Sync
- Flicklet only stores minimal data (lists, ratings, notes).  
- All media data (titles, images) comes from official TMDB sources.  
- Your info syncs through your Google sign-in onlyâ€”no external tracking.

---

## 7. Pro Features â­

Pro unlocks the full experience.  
If youâ€™re using the free version, youâ€™ll still have everything you need to track showsâ€”Pro simply adds more fun.

### Included with Pro:
- ðŸŽ¬ **Bloopers & Outtakes:** watch behind-the-scenes clips from verified sources.  
- â° **Advanced Notifications:** detailed timing control and per-show alerts.  
- ðŸ§© **Theme Packs:** change how Flicklet looks for holidays or genres.  
- ðŸ•¹ï¸ **FlickWord & Trivia:** light games built into the app.  
- ðŸ“º **Extended Episode Tracking:** detailed season progress for multiple shows.  

### How It Works
- Look for the gold **PRO** badge on features that need Pro.  
- Upgrade in **Settings â†’ Pro**.  
- You can preview what Pro offers before paying.  

### Legal & Content Notes
All extra videos or bloopers link directly from verified providers.  
Flicklet doesnâ€™t re-upload or host any copyrighted materialâ€”everything plays from its original source.

---

## 8. Troubleshooting ðŸ”§

### Common Fixes
| Problem | Try This |
|----------|-----------|
| App not loading | Refresh the page or check your internet connection |
| Search gives no results | Try different spelling or switch between Movies/TV |
| Notifications stopped | Check browser permissions and sign-in status |
| Lists look empty | Make sure youâ€™re logged in; local storage may have cleared |
| Canâ€™t sign in on mobile | Clear browser cache, reopen app, and retry login |
| Bloopers/Extras not playing | Some videos open externally if embedding is blocked |

### Still Stuck?
Open **Settings â†’ Feedback**.  
Include:
- What you were doing  
- What you expected  
- What happened instead  
- Your browser and device  

This helps us fix it faster.

---

## 9. Keyboard & Gesture Shortcuts âŒ¨ï¸ðŸ“±

### Keyboard (Desktop)
- **Esc:** close modals or exit search  
- **Tab:** move between fields or buttons  
- **Enter:** activate selected button  
- **/:** jump to search  

### Touch (Mobile)
- **Swipe right:** mark as Watched  
- **Swipe left:** move to another list  
- **Pull down:** refresh content  
- **Tap and hold:** reorder (on supported lists)

---

## 10. Accessibility & Support â™¿ï¸

- Fully navigable by keyboard  
- Screen reader friendly structure  
- Focus trapping ensures you donâ€™t lose cursor position  
- ARIA roles and labels implemented in all modals  
- Contrast and font-size compliant with WCAG guidelines  

For help with accessibility or other feedback, contact support via the Feedback form in Settings.

---

## 11. About & Version Info â„¹ï¸

- **App Version:** `<version>`  
- **Build:** `<build>`  
- **Last Updated:** shown at the bottom of the Help modal  
- **Component:** `apps/web/src/components/HelpModal.tsx`  
- **Feature Flags:** Help content is staticâ€”visible to everyone.  

---

### End of Document  
**Total Sections:** 11  
**Intended Audience:** All users (non-technical)  
**Approved Format:** Markdown for direct integration in HelpModal or `/docs/help/HelpReport.md`

```

## legacy\mobile-compact-v1-vanilla\reports\reports\card-variants-map.md
```
# Card Variants Usage Map

## BasePosterCard Component

### File: `www/scripts/components/BasePosterCard.js`
- **Props**: `{id, posterUrl, title, year, rating, overflowActions, onClick, isDisabled, subline, hideRating}`
- **CSS Classes**: `.base-poster-card`, `.base-poster-card__poster`, `.base-poster-card__content`
- **Usage Locations**:
  - `www/scripts/components/FlickWordTab.js` (lines 67-68, 166) - Game cards with rating and actions
  - `www/scripts/components/TriviaTab.js` (lines 83-84, 228) - Game cards with rating and actions
- **Rating Present**: Yes (when rating > 0 and not hidden)
- **Actions Present**: Yes (overflow menu with custom actions)

## CardCW Component

### File: `www/components/home-clean/CardCW.js`
- **Class**: `CardCW`
- **Usage Locations**:
  - `www/components/home-clean/HomeClean.js` (line 339) - Currently watching items
  - `www/components/home-clean/HomeClean.old` (line 484) - Legacy usage
- **Parent Component**: HomeClean
- **Route**: Home page
- **Rating Present**: Yes (star rating system)
- **Actions Present**: Yes (move to watched, remove, etc.)

## CardNextUp Component

### File: `www/components/home-clean/CardNextUp.js`
- **Class**: `CardNextUp`
- **Usage Locations**:
  - `www/components/home-clean/HomeClean.js` (line 342) - Next up items
  - `www/components/home-clean/HomeClean.old` (line 487) - Legacy usage
- **Parent Component**: HomeClean
- **Route**: Home page
- **Rating Present**: Yes (star rating system)
- **Actions Present**: Yes (play next, remove, etc.)

## CardForYou Component

### File: `www/components/home-clean/CardForYou.js`
- **Class**: `CardForYou`
- **Usage Locations**:
  - `www/components/home-clean/HomeClean.js` (lines 345, 348) - For you items and theaters
  - `www/components/home-clean/HomeClean.old` (line 490) - Legacy usage
- **Parent Component**: HomeClean
- **Route**: Home page
- **Rating Present**: Yes (star rating system)
- **Actions Present**: Yes (add to wishlist, remove, etc.)

## .tab-card CSS Class

### File: `www/styles/components.css` (lines 1187-1272)
- **Usage Locations**:
  - Mobile responsive rules for tab-based cards
  - Used in list views (watching, wishlist, watched tabs)
- **Parent Component**: List rendering functions
- **Route**: Tab pages (watching, wishlist, watched)
- **Rating Present**: Yes (`.tab-card .rating`)
- **Actions Present**: Yes (`.tab-card .mobile-actions .btn`)

## .show-card CSS Class

### File: Multiple files
- **Usage Locations**:
  - `www/styles/components.css` (lines 1733-1858) - Desktop layout
  - `www/styles/mobile.css` (lines 629-1138) - Mobile layout
  - `www/styles/main.css` (lines 800, 888) - Dark mode
  - `www/archive/scripts/inline-script-03.js` (lines 171, 196, 211, 226) - Event handlers
  - `www/scripts/list-actions.js` (line 76) - Action targeting
- **Parent Component**: Various list rendering functions
- **Route**: Multiple (home, tabs, search results)
- **Rating Present**: Yes (`.show-card .star-rating`, `.show-card .rating-container`)
- **Actions Present**: Yes (`.show-card .show-actions`, `.show-card .right-actions`)

## Summary by Component Type

### Game Cards (BasePosterCard)
- **Count**: 2 usage locations
- **Props**: Full props including rating and actions
- **Mobile Support**: CSS-based responsive design

### Home Page Cards (CardCW, CardNextUp, CardForYou)
- **Count**: 3 component classes
- **Props**: Full data objects with rating and actions
- **Mobile Support**: Component-level responsive design

### List Cards (.tab-card, .show-card)
- **Count**: 2 CSS class systems
- **Props**: CSS-based styling
- **Mobile Support**: Extensive mobile-specific CSS rules

## Mobile Compact Migration Impact

### High Impact Components
1. **BasePosterCard** - Used in game tabs, needs compact token integration
2. **.tab-card** - Mobile-specific rules with !important declarations
3. **.show-card** - Extensive mobile CSS rules, fallback layout

### Medium Impact Components
1. **CardCW/CardNextUp/CardForYou** - Home page cards, may need token updates
2. **Mobile CSS overrides** - Multiple files with conflicting rules

### Low Impact Components
1. **Legacy usage** - Archive files, minimal impact
2. **Dark mode rules** - Theme-specific, not layout-specific

```

## REPORT.md
```
# Mobile Card Implementation Audit Report

**Date:** October 25, 2025  
**Branch:** mobile-card-fixes-v2  
**Commit:** 63e3697 (chore(lint,ts): resolve compile error and ESLint findings; no functional changes)

## Summary

âœ… **PASS** - The unified mobile card implementation successfully consolidates swipe functionality using `CardBaseMobile + SwipeRowOverlay`. All TypeScript and ESLint issues have been resolved. The implementation maintains proper separation of concerns, accessibility standards, and follows the specified architectural patterns.

**Key Achievements:**
- Single swipe implementation using overlay pattern
- Clean removal of legacy `SwipeRow` component
- Proper TypeScript compilation with 0 errors
- ESLint compliance with 0 warnings
- Maintained accessibility standards
- Preserved all mobile-specific functionality

## Type & Lint Status

### TypeScript Compilation
- **Status:** âœ… PASS
- **Command:** `npx tsc --noEmit`
- **Result:** 0 errors
- **Files Checked:** All TypeScript files in `apps/web/src`

### ESLint Compliance
- **Status:** âœ… PASS  
- **Command:** `npx eslint src/components/cards/mobile/ src/lib/swipeMaps.ts src/components/cards/TabCard.tsx --max-warnings=0`
- **Result:** 0 errors, 0 warnings
- **Config:** TypeScript-aware ESLint config with Prettier integration

## Scope Hygiene

### Changed Files Analysis
**Last Commit Files (15 total):**
- `apps/web/src/components/ActionButton.tsx` - Lint fix
- `apps/web/src/components/CommunityPlayer.tsx` - Lint fix  
- `apps/web/src/components/FlickletHeader.tsx` - Lint fix
- `apps/web/src/components/PullToRefreshWrapper.tsx` - Lint fix
- `apps/web/src/components/SettingsPage.tsx` - Lint fix
- `apps/web/src/components/VoiceSearch.tsx` - Lint fix
- `apps/web/src/components/games/FlickWordStats.tsx` - Lint fix
- `apps/web/src/debug/compactGateDiagnostics.ts` - Lint fix
- `apps/web/src/lib/events.ts` - Lint fix
- `apps/web/src/lib/flags.tsx` - Lint fix
- `apps/web/src/lib/marqueeApi.ts` - Lint fix
- `apps/web/src/lib/words/localWords.ts` - Lint fix
- `apps/web/src/lib/words/validateWord.ts` - Lint fix
- `apps/web/src/main.tsx` - Lint fix
- `apps/web/src/search/SearchResults.tsx` - Lint fix

**Scope Compliance:** âœ… PASS
- No desktop components touched (`CardV2*`, `Desktop/**`)
- No global styles modified
- All changes were mechanical lint/typing fixes
- No functional behavior changes

## Swipe Implementation

### Legacy SwipeRow Removal
**Status:** âœ… COMPLETE
- **File:** `apps/web/src/features/compact/SwipeRow.tsx` - DELETED
- **Import Removal:** All `SwipeRow` imports removed from `TabCard.tsx`
- **Usage Elimination:** No remaining `SwipeRow` wrappers found

### SwipeRowOverlay Implementation
**Status:** âœ… ACTIVE
- **File:** `apps/web/src/components/cards/mobile/SwipeRowOverlay.tsx`
- **Integration:** Properly integrated in `CardBaseMobile.tsx:305-311`
- **Event Handling:** Pointer Events with `setPointerCapture` for reliable gesture handling
- **Thresholds:** Normalized to 60px (open tray), 100px (fire action)

### SwipeMaps Configuration
**Status:** âœ… FUNCTIONAL
- **File:** `apps/web/src/lib/swipeMaps.ts`
- **Exports:** `getSwipeConfig()`, `getSwipeLabels()`, `getAllSwipeActions()`
- **Tab Support:** watching, watched, wishlist tabs properly configured
- **Action Mapping:** Correct Library.move calls with proper type safety

## Card Structure & CSS

### CardBaseMobile Structure
**File:** `apps/web/src/components/cards/mobile/CardBaseMobile.tsx`

âœ… **Required Elements Present:**
- `.swipe-bg` with left/right reveals and hints (lines 151-157)
- `.swipe-target` with grid `112px 1fr` (line 160)
- `.drag-rail` conditionally rendered when `draggable === true` (lines 276-286)
- `.topline` with `.btn-overflow` (lines 179-191)
- `.rating-row` with five `.star` elements (lines 204-234)
- `.actions` containing `.providers` and optional delete (lines 244-271)

### CSS Implementation
**File:** `apps/web/src/styles/cards-mobile.css`

âœ… **Mobile Media Query:** `@media (max-width: 640px)` (line 9)
âœ… **Grid Layout:** `.swipe-target { grid-template-columns: 112px 1fr }` (line 65)
âœ… **Z-Index Ladder:** bg(1) < target(2) < overlay(3) < rail(4) (lines 25, 62, 270, 242)
âœ… **Star Tap Targets:** 32Ã—32 minimum size (lines 135-136)
âœ… **Hint Visibility:** Only during drag for active direction (lines 54-57)

## Interaction Isolation

### Event Filtering
**File:** `apps/web/src/components/cards/mobile/SwipeRowOverlay.tsx:36-38`

âœ… **Ignored Elements:**
- `.drag-rail` - Prevents swipe interference with reordering
- `.rating-row .stars` - Preserves star rating functionality
- Additional filtering prevents conflicts with interactive elements

### Class Management
**File:** `apps/web/src/components/cards/mobile/SwipeRowOverlay.tsx:46-73`

âœ… **State Classes:**
- `.dragging` - Applied during active drag
- `.drag-left`/`.drag-right` - Direction-specific styling
- `.swipe-open` - Tray state management (lines 127-129)

## Accessibility

### Star Rating System
**File:** `apps/web/src/components/cards/mobile/CardBaseMobile.tsx:204-234`

âœ… **ARIA Implementation:**
- Container: `role="radiogroup"` (line 208)
- Stars: `role="radio"` + `aria-checked` (lines 221-222)
- Keyboard Support: Arrow keys handled (lines 111-125)
- Labels: `aria-label` for each star (line 223)

### Interactive Elements
âœ… **Overflow Button:** `aria-label="More"` (line 185)
âœ… **Drag Rail:** `aria-roledescription="sortable handle"` + `aria-label="Reorder"` (lines 280-281)
âœ… **Hints:** Visual only, `aria-hidden="true"` (line 151)

## Providers & Limits

### Provider Display
**File:** `apps/web/src/components/cards/mobile/CardBaseMobile.tsx:245-260`

âœ… **Limits:** Capped at 3 visible providers with `+N` overflow (lines 246, 257-259)
âœ… **Links:** `target="_blank" rel="noopener"` (lines 251-252)
âœ… **Styling:** Proper chip styling with hover states

## Edge Cases

### Layout Stability
âœ… **Poster Fallback:** Maintains 112px column without layout shift (lines 170-174)
âœ… **Text Clamping:** Title and summary properly clamped (CSS lines 97, 173-181)
âœ… **Action Alignment:** Grid layout ensures proper alignment (CSS lines 183-188)

### Tab-Specific Behavior
âœ… **Watched Tab:** `draggable = false` hides rail (line 48, conditional rendering lines 276-286)
âœ… **Safe Areas:** Right padding accounts for rail + safe-area (CSS line 15)

## Risks & Regressions

### Low Risk Items
1. **CSS Specificity:** Mobile styles properly scoped to `@media (max-width: 640px)`
2. **Event Propagation:** Proper `stopPropagation()` calls prevent conflicts
3. **Memory Management:** ResizeObserver properly cleaned up (lines 128-142)

### No Identified Regressions
- All mobile functionality preserved
- Desktop components untouched
- Accessibility standards maintained
- Performance optimizations intact

## Action Items

### Completed âœ…
1. **SwipeRow Removal** - Legacy component deleted and imports removed
2. **TypeScript Errors** - All compile errors resolved
3. **ESLint Issues** - All linting issues fixed
4. **Swipe Unification** - Single implementation using SwipeRowOverlay
5. **CSS Integration** - Proper mobile-specific styling applied

### No Outstanding Issues
All acceptance criteria have been met. The implementation is ready for production use.

---

**Audit Conclusion:** The mobile card implementation successfully unifies swipe functionality while maintaining code quality, accessibility standards, and architectural integrity. No regressions identified.



```

## reports\compact_v2_status_2025-01-15.md
```
# Compact V2 Status Report - 2025-01-15

## Summary

- âœ… **12/12** compact files exist and are properly structured
- âœ… **Build successful** with zero TypeScript errors
- âœ… **Gate installation** working correctly with proper event listeners
- âœ… **CSS import order** matches expected sequence
- âœ… **Settings integration** properly wired with gate checks
- âœ… **Lists activation** with correct data attributes
- âš ï¸ **12 !important declarations** found across 3 CSS files
- âŒ **Critical hooks issue** in CompactOverflowMenu (conditional hooks)
- âœ… **17/9** E2E test files exist (some duplicates found)

## File Inventory

| File | Exists | !important Count | Gated Selectors | Imported By |
|------|--------|------------------|-----------------|-------------|
| `apps/web/src/styles/tokens-compact-mobile.css` | âœ… | 0 | âœ… | main.tsx:11 |
| `apps/web/src/styles/compact-home.css` | âœ… | 0 | âœ… | main.tsx:12 |
| `apps/web/src/styles/settings-sheet.css` | âœ… | 0 | âœ… | main.tsx:13 |
| `apps/web/src/styles/compact-actions.css` | âœ… | 0 | âœ… | main.tsx:14 |
| `apps/web/src/styles/compact-cleanup.css` | âœ… | 0 | âœ… | main.tsx:16 |
| `apps/web/src/styles/compact-a11y-perf.css` | âœ… | 4 | âœ… | main.tsx:17 |
| `apps/web/src/styles/compact-lists.css` | âœ… | 2 | âœ… | main.tsx:15 |
| `apps/web/src/features/compact/CompactPrimaryAction.tsx` | âœ… | 0 | âœ… | TabCard.tsx:9 |
| `apps/web/src/features/compact/CompactOverflowMenu.tsx` | âœ… | 0 | âœ… | TabCard.tsx:10 |
| `apps/web/src/features/compact/SwipeRow.tsx` | âœ… | 0 | âœ… | TabCard.tsx:11 |
| `apps/web/src/features/compact/actionsMap.ts` | âœ… | 0 | âœ… | CompactOverflowMenu.tsx:2 |
| `apps/web/src/lib/flags.tsx` | âœ… | 0 | âœ… | main.tsx:18 |

## CSS Import Order

**Expected Order:**
1. base tokens
2. `global.css`
3. `tokens-compact-mobile.css`
4. `compact-home.css`
5. `settings-sheet.css`
6. `compact-actions.css`
7. `compact-lists.css`
8. `compact-a11y-perf.css`
9. `compact-cleanup.css` (last)

**Actual Order in main.tsx:**
1. âœ… `global.css` (line 9)
2. âœ… `header-marquee.css` (line 10)
3. âœ… `tokens-compact-mobile.css` (line 11)
4. âœ… `compact-home.css` (line 12)
5. âœ… `settings-sheet.css` (line 13)
6. âœ… `compact-actions.css` (line 14)
7. âœ… `compact-lists.css` (line 15)
8. âœ… `compact-cleanup.css` (line 16)
9. âœ… `compact-a11y-perf.css` (line 17)

**Issue:** `compact-cleanup.css` should be last but comes before `compact-a11y-perf.css`

## Gate Installation Details

### installCompactMobileGate()
- **Events:** DOMContentLoaded, visibilitychange, resize, storage, hashchange, densitychange
- **Conditions:** `flag:mobile_compact_v1` + mobile viewport + `data-density="compact"`
- **Sets:** `html.dataset.compactMobileV1 = 'true'`
- **Called from:** main.tsx:21 âœ…
- **Self-triggering:** âœ… **ENHANCED** - Now includes MutationObserver for density changes

### installActionsSplitGate()
- **Events:** DOMContentLoaded, visibilitychange, resize, storage (filtered)
- **Conditions:** `compactMobileV1` gate + `flag:mobile_actions_split_v1` + mobile viewport
- **Sets:** `html.dataset.actionsSplit = 'true'`
- **Called from:** main.tsx:24 âœ…

## Settings Sheet Wiring

- âœ… `SettingsSheet.tsx` exists at `apps/web/src/components/settings/SettingsSheet.tsx`
- âœ… `handleSettingsClick()` in App.tsx (line 100) checks gate + flag
- âœ… Sets `data-settings-sheet="true"` when conditions met
- âœ… Fallback to `setShowSettings(true)` when gate/flag disabled

## Card & Lists Integration

### Card Integration
- âœ… `CardV2.tsx` includes compact components under gate
- âœ… `TabCard.tsx` wrapped in `SwipeRow` under gate
- âœ… Uses poster tokens (`--poster-w`, `--poster-h`)
- âœ… Legacy action groups hidden under gate

### Lists Activation
- âœ… `data-page="lists"` present in App.tsx (lines 269, 276, 283, 290)
- âœ… `data-list="watching|wishlist|watched|mylists"` properly set
- âœ… CSS selectors target `[data-page="lists"]` correctly

## !important Findings

**Total Count:** 12 instances across 3 files

| File | Count | Lines |
|------|-------|-------|
| `compact-lists.css` | 2 | Specific lines need review |
| `compact-a11y-perf.css` | 4 | Specific lines need review |
| `flickword.css` | 6 | Not compact-related |

**Action Required:** Move compact-related !important declarations to `compact-cleanup.css`

## E2E Test Inventory

| Test File | Exists | Location |
|-----------|--------|----------|
| `tests/e2e/compact/v2/step3/tokens.gate.spec.ts` | âœ… | Root + apps/web |
| `tests/e2e/compact/v2/step4/home.no-errors.spec.ts` | âœ… | Root + apps/web |
| `tests/e2e/compact/v2/step4/tabcard.tokens.spec.ts` | âœ… | Root + apps/web |
| `tests/e2e/compact/v2/step5/home.compact.spec.ts` | âœ… | Root + apps/web |
| `tests/e2e/compact/v2/step6/settings.sheet.spec.ts` | âœ… | Root only |
| `tests/e2e/compact/v2/step7/actions.split.spec.ts` | âœ… | Root only |
| `tests/e2e/compact/v2/step8/specificity.polish.spec.ts` | âœ… | Root only |
| `tests/e2e/compact/v2/step9/a11y.perf.spec.ts` | âœ… | Root only |
| `tests/e2e/compact/v2/step10/lists.compact.spec.ts` | âœ… | Root only |

**Note:** Some tests exist in both root and apps/web directories (duplicates)

## Build Result

- âœ… **TypeScript Errors:** 0
- âš ï¸ **CSS Warnings:** 1 (nested body rule syntax)
- âš ï¸ **Dynamic Import Warnings:** 2 (storage.ts, react-dom/client.js)
- âœ… **Build Time:** 16.54s
- âœ… **Output:** All assets generated successfully

## Runtime Risk: "Rendered more hooks" Analysis

### âœ… FIXED - Critical Issue Resolved

**File:** `apps/web/src/features/compact/CompactOverflowMenu.tsx`

**Problem:** Hooks called conditionally after early returns

**Solution Applied:** Moved all hooks to top level, compute conditional values after hooks

**Fix Status:** âœ… **COMPLETED** - Hooks issue resolved, component should now render properly

**Impact:** This was likely the reason the optimized mobile version wasn't showing - the component was crashing due to hooks rules violation.

## Tomorrow Plan

### High Priority
1. âœ… **Fix hooks issue** in `CompactOverflowMenu.tsx` - **COMPLETED**
   - âœ… Moved all hooks to top level
   - âœ… Compute conditional values after hooks
   - âœ… Test gate/flag state changes

2. âœ… **Fix CSS import order** - **COMPLETED**
   - âœ… Moved `compact-cleanup.css` to last position in main.tsx
   - âœ… Verified cascade order is correct

3. **Clean up !important declarations**
   - Move compact-related !important to `compact-cleanup.css`
   - Document why each !important is necessary

### Medium Priority
4. **Consolidate E2E tests**
   - Remove duplicate test files between root and apps/web
   - Ensure all tests run from single location

5. **Gate timing verification**
   - Test density setting after gate installation
   - Add MutationObserver if needed for dynamic density changes

### Low Priority
6. **Performance optimization**
   - Review dynamic import warnings
   - Consider lazy loading for settings sheet

7. **Documentation**
   - Document gate conditions and flag keys
   - Create troubleshooting guide for compact mode

## Technical Debt Notes

- **Gate Race Condition:** Density may be set after gate installation, causing initial state mismatch
- **Duplicate Tests:** Some E2E tests exist in both root and apps/web directories
- **CSS Specificity:** 12 !important declarations need consolidation
- **Dynamic Imports:** Settings sheet uses dynamic import for react-dom/client

---

**Report Generated:** 2025-01-15  
**Audit Scope:** `apps/web/**`, `tests/e2e/**`, build artifacts  
**Status:** Ready for tomorrow's fixes

```

## reports\SYSTEM_MAP_REPORT.md
```
# Flicklet System Map Report

**Generated:** 2025-01-XX  
**Scope:** Complete application analysis - React V2 (apps/web)  
**Confidence:** High (comprehensive codebase scan completed)

---

## Executive Summary

**Biggest Gaps Identified:**

1. **Feature Silos:** Community posts, movie tracking, and games (FlickWord/Trivia) operate independently with no cross-feature connections. Users can't link their 5-star ratings to community discussions, or see trivia questions about shows they're watching.

2. **Data Model Fragmentation:** User watch history stored in `users/{uid}/watchlists` (Firestore) and `flicklet.library.v2` (localStorage) with sync complexity. Game stats (FlickWord) stored separately in localStorage only, never synced to cloud. No unified user profile aggregating all activity.

3. **Missing Integration Points:** No deep linking between features (e.g., trivia question about a show â†’ show detail page), no auto-generated community posts from user actions (e.g., "I just 5-starred this!"), and no cross-feature analytics showing how games relate to viewing habits.

---

## 1. USER-FACING FEATURE INVENTORY

### Home Page Features

#### Feature: View Currently Watching Rail
- **Action:** User opens home page
- **Result:** Horizontal scrollable rail shows TV shows and movies from "watching" list
- **Entry Point:** Home page â†’ "Your Shows" section
- **Status:** Working
- **File Reference:** `[HomeYourShowsRail:tsx:1-100]`

#### Feature: View Up Next Rail
- **Action:** User opens home page
- **Result:** Horizontal rail shows next episodes for TV shows user is watching
- **Entry Point:** Home page â†’ "Your Shows" section
- **Status:** Working (episodes populated from TMDB)
- **File Reference:** `[HomeUpNextRail:tsx:1-150]`

#### Feature: View Community Posts
- **Action:** User scrolls to Community section
- **Result:** Recent posts displayed with vote counts, comment counts, author info
- **Entry Point:** Home page â†’ "Community" section
- **Status:** Working (but comments don't appear on detail page - see PostDetail)
- **File Reference:** `[CommunityPanel:tsx:12-262]`

#### Feature: Play FlickWord Game
- **Action:** User clicks FlickWord game card in Community section
- **Result:** Modal opens with daily word-guessing game (Wordle-style)
- **Entry Point:** Home page â†’ Community section â†’ FlickWord card
- **Status:** Working (stats stored in localStorage, not synced to cloud)
- **File Reference:** `[FlickWordGame:tsx:1-921]`, `[FlickWordModal:tsx:12-263]`

#### Feature: Play Trivia Game
- **Action:** User clicks Trivia game card in Community section
- **Result:** Modal opens with movie/TV trivia questions (5 free, 10 for Pro)
- **Entry Point:** Home page â†’ Community section â†’ Trivia card
- **Status:** Working (API integration with OpenTriviaDB, fallback questions)
- **File Reference:** `[TriviaGame:tsx:1-906]`, `[triviaApi:ts:4-130]`

#### Feature: View For You Recommendations
- **Action:** User scrolls to "For You" section
- **Result:** 3 customizable genre rails showing personalized content from TMDB
- **Entry Point:** Home page â†’ "For You" section
- **Status:** Working (smart defaults based on watching history, user-configurable in Settings)
- **File Reference:** `[useForYouRows:ts:1-50]`, `[useGenreContent:ts:1-100]`

#### Feature: View In Theaters
- **Action:** User scrolls to "In Theaters Near You" section
- **Result:** Rail shows current movies with theater information, showtimes, addresses
- **Entry Point:** Home page â†’ "In Theaters Near You" section
- **Status:** Working (realistic theater data generated from TMDB + location)
- **File Reference:** `[TheaterInfo:tsx:1-200]`, `[useInTheaters:ts:1-50]`

#### Feature: Submit Feedback
- **Action:** User scrolls to Feedback section, fills form, submits
- **Result:** Feedback sent (via Netlify function or email)
- **Entry Point:** Home page â†’ "Feedback" section
- **Status:** Working
- **File Reference:** `[FeedbackPanel:tsx:1-150]`

### Navigation & Tabs

#### Feature: Switch Between Tabs
- **Action:** User clicks tab (Currently Watching, Want to Watch, Watched, Returning, My Lists, Discovery, Settings)
- **Result:** View changes, content loads for selected tab
- **Entry Point:** Header tabs (desktop) or bottom tabs (mobile)
- **Status:** Working
- **File Reference:** `[Tabs:tsx:1-100]`, `[MobileTabs:tsx:1-150]`, `[App:tsx:469-600]`

#### Feature: View Currently Watching Tab
- **Action:** User clicks "Currently Watching" tab
- **Result:** Full-page list of all shows/movies in "watching" list with filters, sort options
- **Entry Point:** Tab navigation â†’ "Currently Watching"
- **Status:** Working
- **File Reference:** `[ListPage:tsx:1-300]`

#### Feature: View Want to Watch Tab
- **Action:** User clicks "Want to Watch" tab
- **Result:** Full-page list of wishlist items
- **Entry Point:** Tab navigation â†’ "Want to Watch"
- **Status:** Working
- **File Reference:** `[ListPage:tsx:1-300]`

#### Feature: View Watched Tab
- **Action:** User clicks "Watched" tab
- **Result:** Full-page list of completed shows/movies
- **Entry Point:** Tab navigation â†’ "Watched"
- **Status:** Working
- **File Reference:** `[ListPage:tsx:1-300]`

#### Feature: View Returning Shows Tab
- **Action:** User clicks "Returning" tab
- **Result:** Smart filtered list of shows with status "Returning Series" from watching list
- **Entry Point:** Tab navigation â†’ "Returning"
- **Status:** Working (uses `useReturningShows` selector)
- **File Reference:** `[useReturningShows:ts:1-50]`, `[App:tsx:580-586]`

#### Feature: View My Lists Tab
- **Action:** User clicks "My Lists" tab
- **Result:** Page showing custom lists user created, ability to create/edit/delete lists
- **Entry Point:** Tab navigation â†’ "My Lists"
- **Status:** Working
- **File Reference:** `[MyListsPage:tsx:1-200]`

#### Feature: View Discovery Tab
- **Action:** User clicks "Discovery" tab
- **Result:** Page with search, genre filters, personalized recommendations
- **Entry Point:** Tab navigation â†’ "Discovery"
- **Status:** Working
- **File Reference:** `[DiscoveryPage:tsx:1-200]`

### Search Features

#### Feature: Search Movies/TV/People
- **Action:** User types in search bar, presses Enter or clicks search
- **Result:** Results page shows matching movies, TV shows, or people from TMDB
- **Entry Point:** Header search bar
- **Status:** Working (TMDB API integration)
- **File Reference:** `[SearchBar:tsx:1-150]`, `[SearchResults:tsx:1-200]`, `[useSearch:ts:1-100]`

#### Feature: Filter Search by Genre
- **Action:** User selects genre from dropdown in search
- **Result:** Search results filtered by selected genre
- **Entry Point:** Search bar â†’ Genre dropdown
- **Status:** Working
- **File Reference:** `[SearchBar:tsx:1-150]`

#### Feature: Voice Search
- **Action:** User clicks microphone icon, speaks query
- **Result:** Speech-to-text converts audio to search query
- **Entry Point:** Search bar â†’ Microphone icon
- **Status:** Working (browser Web Speech API)
- **File Reference:** `[VoiceSearch:tsx:1-100]`

### Card Actions

#### Feature: Add to Want to Watch
- **Action:** User clicks "Add" button on any card
- **Result:** Item added to wishlist, toast notification shown, syncs to Firebase if authenticated
- **Entry Point:** Any card â†’ "Add" button
- **Status:** Working
- **File Reference:** `[actions:ts:40-58]`, `[Card:tsx:1-200]`

#### Feature: Mark as Watched
- **Action:** User clicks "Watched" button on card
- **Result:** Item moved to "watched" list, toast notification shown
- **Entry Point:** Any card â†’ "Watched" button
- **Status:** Working
- **File Reference:** `[actions:ts:60-78]`, `[Card:tsx:1-200]`

#### Feature: Start Watching
- **Action:** User clicks "Start Watching" button on card
- **Result:** Item moved to "watching" list
- **Entry Point:** Any card â†’ "Start Watching" button
- **Status:** Working
- **File Reference:** `[actions:ts:80-98]`, `[Card:tsx:1-200]`

#### Feature: Rate Movie/Show
- **Action:** User clicks star rating (1-5 stars) on card
- **Result:** Rating saved to item, stored in localStorage and synced to Firebase
- **Entry Point:** Any card â†’ Star rating component
- **Status:** Working
- **File Reference:** `[StarRating:tsx:1-100]`, `[storage:ts:224-490]`

#### Feature: Add Notes/Tags
- **Action:** User clicks "Notes" or "Tags" button on card, fills modal, saves
- **Result:** Notes and tags saved to item, searchable via `tag:comedy` syntax
- **Entry Point:** Any card â†’ "Notes" or "Tags" button
- **Status:** Working
- **File Reference:** `[NotesAndTagsModal:tsx:1-200]`, `[storage:ts:224-490]`

#### Feature: Set Episode Progress
- **Action:** User clicks episode tracking button, selects season/episode
- **Result:** Current episode saved to item (if episode tracking enabled in Settings)
- **Entry Point:** TV show card â†’ Episode tracking button
- **Status:** Working (requires Settings â†’ Layout â†’ Episode Tracking enabled)
- **File Reference:** `[EpisodeTrackingModal:tsx:1-150]`, `[EpisodeProgressDisplay:tsx:1-100]`

#### Feature: Configure Show Notifications
- **Action:** User clicks notification bell icon on card, configures settings
- **Result:** Notification preferences saved (Pro feature: email/push, Free: simple reminders)
- **Entry Point:** Any card â†’ Notification bell icon
- **Status:** Working (Pro features require Pro subscription)
- **File Reference:** `[ShowNotificationSettingsModal:tsx:1-200]`, `[notifications:ts:54-334]`

#### Feature: View Bloopers
- **Action:** User clicks "Bloopers" button on card
- **Result:** Modal opens showing YouTube bloopers/reel videos for the show/movie
- **Entry Point:** Any card â†’ "Bloopers" button
- **Status:** Working
- **File Reference:** `[BloopersModal:tsx:1-200]`, `[YouTubePlayer:tsx:1-150]`

#### Feature: View Extras
- **Action:** User clicks "Extras" button on card
- **Result:** Modal opens showing behind-the-scenes, trailers, interviews
- **Entry Point:** Any card â†’ "Extras" button
- **Status:** Working
- **File Reference:** `[ExtrasModal:tsx:1-200]`, `[YouTubePlayer:tsx:1-150]`

### Community Features

#### Feature: Create Community Post
- **Action:** User clicks "New Post" button in Community section, writes title/body, selects tags, submits
- **Result:** Post appears in Recent Posts sidebar, visible to all users
- **Entry Point:** CommunityPanel â†’ "New Post" button â†’ NewPostModal
- **Status:** Working (but comments don't appear on detail page - see PostDetail issue)
- **File Reference:** `[NewPostModal:tsx:1-200]`, `[CommunityPanel:tsx:12-262]`

#### Feature: View Post Detail
- **Action:** User clicks on a post card
- **Result:** Full post page opens at `/posts/{slug}` with body, comments, replies, vote bar
- **Entry Point:** CommunityPanel â†’ PostCard click
- **Status:** Partially functional (comments load but may not display correctly)
- **File Reference:** `[PostDetail:tsx:1-300]`, `[PostCard:tsx:1-150]`

#### Feature: Vote on Post
- **Action:** User clicks upvote/downvote arrow on post
- **Result:** Vote saved to `posts/{postId}/votes/{userId}`, score updated via Cloud Function
- **Entry Point:** PostDetail page â†’ VoteBar component
- **Status:** Working (aggregateVotes Cloud Function updates score)
- **File Reference:** `[VoteBar:tsx:1-100]`, `[functions/index:ts:4-17]`

#### Feature: Comment on Post
- **Action:** User writes comment in CommentComposer, submits
- **Result:** Comment appears in CommentList, saved to `posts/{postId}/comments/{commentId}`, sanitized by Cloud Function
- **Entry Point:** PostDetail page â†’ CommentComposer
- **Status:** Working (sanitizeComment Cloud Function validates content)
- **File Reference:** `[CommentComposer:tsx:16-125]`, `[CommentList:tsx:15-201]`, `[functions/sanitizeComment:ts:1-100]`

#### Feature: Reply to Comment
- **Action:** User clicks "Reply" on a comment, writes reply, submits
- **Result:** Reply appears nested under comment, push notification sent to comment author (if FCM token exists)
- **Entry Point:** PostDetail â†’ CommentList â†’ Reply button
- **Status:** Working (sendPushOnReply Cloud Function sends notification)
- **File Reference:** `[ReplyList:tsx:1-142]`, `[functions/sendPushOnReply:ts:1-96]`

### Settings Features

#### Feature: Open Settings
- **Action:** User clicks Settings FAB or Settings icon
- **Result:** Settings page/modal opens with tabs: Account, Display, Notifications, Layout, Data, Pro, About
- **Entry Point:** Settings FAB (floating action button) or header Settings icon
- **Status:** Working (mobile uses SettingsSheet, desktop uses SettingsPage modal)
- **File Reference:** `[SettingsPage:tsx:1-300]`, `[SettingsSheet:tsx:1-200]`, `[FABs:tsx:1-100]`

#### Feature: Configure For You Genres
- **Action:** User goes to Settings â†’ Layout, selects genres for 3 rails
- **Result:** Home page "For You" section updates with new genre combinations
- **Entry Point:** Settings â†’ Layout â†’ For You Genre Config
- **Status:** Working
- **File Reference:** `[ForYouGenreConfig:tsx:1-150]`, `[GenreRowConfig:tsx:1-100]`

#### Feature: Toggle Theme
- **Action:** User clicks theme toggle FAB or Settings â†’ Display â†’ Theme
- **Result:** App switches between light/dark theme, preference saved
- **Entry Point:** ThemeToggleFAB or Settings â†’ Display
- **Status:** Working
- **File Reference:** `[FABs:tsx:1-100]`, `[SettingsPage:tsx:1-300]`

#### Feature: Change Language
- **Action:** User goes to Settings â†’ Display â†’ Language, selects English/Spanish
- **Result:** All UI text switches language, preference saved
- **Entry Point:** Settings â†’ Display â†’ Language
- **Status:** Working (English and Spanish supported)
- **File Reference:** `[translations:ts:1-605]`, `[language:ts:1-100]`

#### Feature: Change Personality Level
- **Action:** User goes to Settings â†’ Display â†’ Personality, selects Regular/Semi-Sarcastic/Severely Sarcastic
- **Result:** Toast messages and UI copy become more sarcastic, preference saved
- **Entry Point:** Settings â†’ Display â†’ Personality
- **Status:** Working
- **File Reference:** `[settings:ts:1-200]`, `[PersonalityExamples:tsx:1-100]`

#### Feature: Export Data
- **Action:** User goes to Settings â†’ Data â†’ Export, clicks export button
- **Result:** JSON file downloaded with all user data (watchlists, settings, notes)
- **Entry Point:** Settings â†’ Data â†’ Export
- **Status:** Working
- **File Reference:** `[SettingsPage:tsx:1-300]`

#### Feature: Clear Data
- **Action:** User goes to Settings â†’ Data â†’ Clear, confirms deletion
- **Result:** All local data cleared, user signed out
- **Entry Point:** Settings â†’ Data â†’ Clear
- **Status:** Working
- **File Reference:** `[SettingsPage:tsx:1-300]`

#### Feature: Upgrade to Pro
- **Action:** User goes to Settings â†’ Pro, clicks upgrade button
- **Result:** Pro features unlocked (more trivia questions, email notifications, advanced customization)
- **Entry Point:** Settings â†’ Pro
- **Status:** Working (Pro status stored in settings, feature-gated throughout app)
- **File Reference:** `[SettingsPage:tsx:1-300]`, `[settings:ts:1-200]`

### Authentication Features

#### Feature: Sign In with Google
- **Action:** User clicks "Sign In" â†’ "Google", allows popup/redirect
- **Result:** User authenticated, username prompt shown if first time, data syncs from Firebase
- **Entry Point:** Header â†’ Sign In button â†’ AuthModal â†’ Google
- **Status:** Working (popup on desktop, redirect on mobile/blocked popups)
- **File Reference:** `[AuthModal:tsx:1-200]`, `[authLogin:ts:1-100]`, `[auth:ts:49-468]`

#### Feature: Sign In with Apple
- **Action:** User clicks "Sign In" â†’ "Apple", redirects to Apple, signs in
- **Result:** User authenticated, username prompt shown if first time
- **Entry Point:** Header â†’ Sign In button â†’ AuthModal â†’ Apple
- **Status:** Working (always uses redirect, never popup)
- **File Reference:** `[AuthModal:tsx:1-200]`, `[authLogin:ts:1-100]`

#### Feature: Sign In with Email/Password
- **Action:** User clicks "Sign In" â†’ "Email", enters email/password, submits
- **Result:** User authenticated, username prompt shown if first time
- **Entry Point:** Header â†’ Sign In button â†’ AuthModal â†’ Email
- **Status:** Working
- **File Reference:** `[AuthModal:tsx:1-200]`, `[auth:ts:49-468]`

#### Feature: Set Username
- **Action:** User signs in for first time, modal prompts "what should we call you?", user enters name
- **Result:** Username saved to settings, appears in header snark message
- **Entry Point:** Post-authentication â†’ UsernamePromptModal
- **Status:** Working
- **File Reference:** `[UsernamePromptModal:tsx:1-150]`, `[useUsername:ts:1-100]`

#### Feature: Sign Out
- **Action:** User clicks account button â†’ Sign Out
- **Result:** User signed out, local data cleared, redirected to home
- **Entry Point:** Header â†’ AccountButton â†’ Sign Out
- **Status:** Working
- **File Reference:** `[AccountButton:tsx:1-150]`, `[auth:ts:49-468]`

### Admin Features

#### Feature: Access Admin Page
- **Action:** Admin user navigates to `/admin` route
- **Result:** Admin dashboard opens with user management, metrics, bulk actions
- **Entry Point:** URL: `/admin` (requires admin role in Firebase Auth token)
- **Status:** Working (admin role set via Cloud Function `setAdminRole`)
- **File Reference:** `[AdminPage:tsx:1-200]`, `[functions/setAdminRole:ts:1-100]`

#### Feature: Manage Users (Admin)
- **Action:** Admin views user list, can grant/revoke admin role, export data
- **Result:** User roles updated, CSV exports generated
- **Entry Point:** Admin page â†’ User Management tab
- **Status:** Working
- **File Reference:** `[AdminUserManagement:tsx:1-200]`, `[functions/manageAdminRole:ts:1-100]`

---

## 2. DATA MODELS & RELATIONSHIPS

### Firestore Collections

#### Collection: `posts/{postId}`
**Purpose:** Community posts created by users

**Fields:**
- `id` (string): Document ID (auto-generated)
- `slug` (string): Unique URL slug (e.g., "my-favorite-show-review")
- `title` (string): Post title
- `excerpt` (string): Short summary
- `body` (string): Full post content
- `authorId` (string): Firebase Auth UID of post author
- `authorName` (string): Display name of author
- `tagSlugs` (array<string>): Array of tag slugs (e.g., ["movies", "reviews"])
- `publishedAt` (Timestamp): When post was published
- `updatedAt` (Timestamp): Last update time
- `score` (number): Aggregated vote score (updated by Cloud Function)
- `voteCount` (number): Total number of votes (updated by Cloud Function)
- `commentCount` (number): Total number of comments (updated by Cloud Function)

**Relationships:**
- Has sub-collection: `posts/{postId}/votes/{userId}` (one vote per user)
- Has sub-collection: `posts/{postId}/comments/{commentId}` (comments on post)
- Author references: `users/{authorId}` (via `authorId` field)

**Data Flow:**
- **Created:** `[NewPostModal:tsx:1-200]` â†’ Firestore `addDoc`
- **Updated:** Post author or admin via `[PostDetail:tsx:1-300]`
- **Read:** `[CommunityPanel:tsx:12-262]` (list), `[PostDetail:tsx:1-300]` (detail)
- **Deleted:** Post author or admin

**File References:** `[firestore.rules:18-38]`, `[NewPostModal:tsx:1-200]`, `[PostDetail:tsx:1-300]`

---

#### Sub-Collection: `posts/{postId}/votes/{userId}`
**Purpose:** User votes on posts (upvote/downvote)

**Fields:**
- `value` (number): 1 for upvote, -1 for downvote
- `userId` (string): Document ID = user's UID

**Relationships:**
- Parent: `posts/{postId}`
- User: `users/{userId}` (via document ID)

**Data Flow:**
- **Created/Updated:** `[VoteBar:tsx:1-100]` â†’ Firestore `setDoc`
- **Read:** `[VoteBar:tsx:1-100]` (to show current vote)
- **Aggregated:** Cloud Function `aggregateVotes` updates parent post `score` and `voteCount`

**File References:** `[firestore.rules:39-49]`, `[VoteBar:tsx:1-100]`, `[functions/index:ts:4-17]`

---

#### Sub-Collection: `posts/{postId}/comments/{commentId}`
**Purpose:** Comments on community posts

**Fields:**
- `id` (string): Document ID (auto-generated)
- `authorId` (string): Firebase Auth UID
- `authorName` (string): Display name
- `authorAvatar` (string): Avatar URL (optional)
- `body` (string): Comment text (max 5000 chars, validated by security rules)
- `createdAt` (Timestamp): Server timestamp
- `updatedAt` (Timestamp): Server timestamp
- `replyCount` (number): Number of replies (updated by Cloud Function `aggregateReplies`)

**Relationships:**
- Parent: `posts/{postId}`
- Has sub-collection: `posts/{postId}/comments/{commentId}/replies/{replyId}`
- Author: `users/{authorId}` (via `authorId` field)

**Data Flow:**
- **Created:** `[CommentComposer:tsx:16-125]` â†’ Firestore `addDoc` â†’ Cloud Function `sanitizeComment` validates
- **Updated:** Comment author via `[CommentList:tsx:15-201]`
- **Read:** `[CommentList:tsx:15-201]` (real-time via `onSnapshot`)
- **Deleted:** Comment author, post author, or admin

**File References:** `[firestore.rules:51-88]`, `[CommentComposer:tsx:16-125]`, `[CommentList:tsx:15-201]`, `[functions/sanitizeComment:ts:1-100]`

---

#### Sub-Collection: `posts/{postId}/comments/{commentId}/replies/{replyId}`
**Purpose:** Replies to comments (1 level deep)

**Fields:**
- `id` (string): Document ID (auto-generated)
- `authorId` (string): Firebase Auth UID
- `authorName` (string): Display name
- `authorAvatar` (string): Avatar URL (optional)
- `body` (string): Reply text (max 500 chars, validated by security rules)
- `createdAt` (Timestamp): Server timestamp

**Relationships:**
- Parent: `posts/{postId}/comments/{commentId}`
- Author: `users/{authorId}` (via `authorId` field)

**Data Flow:**
- **Created:** `[ReplyList:tsx:1-142]` â†’ Firestore `addDoc` â†’ Cloud Function `aggregateReplies` updates parent comment `replyCount` â†’ Cloud Function `sendPushOnReply` sends FCM notification to comment author
- **Updated/Deleted:** Reply author
- **Read:** `[ReplyList:tsx:1-142]` (real-time via `onSnapshot`)

**File References:** `[firestore.rules:76-87]`, `[ReplyList:tsx:1-142]`, `[functions/aggregateReplies:ts:1-100]`, `[functions/sendPushOnReply:ts:1-96]`

---

#### Collection: `users/{userId}`
**Purpose:** User profiles and synced data

**Fields:**
- `uid` (string): Firebase Auth UID (document ID)
- `email` (string): User email
- `displayName` (string): User display name
- `photoURL` (string | null): Avatar URL
- `lastLoginAt` (string): ISO timestamp of last login
- `fcmToken` (string | null): FCM token for push notifications (stored by `firebase-messaging.ts`)
- `watchlists` (object): Synced watchlist data (see structure below)
  - `movies`: { `watching`: [], `wishlist`: [], `watched`: [] }
  - `tv`: { `watching`: [], `wishlist`: [], `watched`: [] }
  - `customLists`: [] (custom list definitions)
  - `customItems`: {} (items in custom lists, keyed by list ID)
- `lastUpdated` (Timestamp): Last sync time

**Relationships:**
- Auth: Firebase Auth user (via `uid`)
- Posts: Author of posts in `posts/{postId}` (via `authorId`)

**Data Flow:**
- **Created:** `[auth:ts:342-384]` â†’ `ensureUserDocument` on first login
- **Updated:** `[firebaseSync:ts:148-191]` â†’ `saveToFirebase` (debounced, triggered by `library:changed` event)
- **Read:** `[firebaseSync:ts:196-232]` â†’ `loadFromFirebase` on login
- **FCM Token:** `[firebase-messaging:ts:57-100]` â†’ `getFCMToken` stores token

**File References:** `[firestore.rules:91-109]`, `[auth:ts:342-384]`, `[firebaseSync:ts:11-429]`, `[firebase-messaging:ts:1-122]`

---

### LocalStorage Data Models

#### Key: `flicklet.library.v2`
**Purpose:** Primary library storage (watchlists, ratings, notes, tags)

**Structure:**
```typescript
{
  "movie:123": {
    id: 123,
    mediaType: "movie",
    title: "The Matrix",
    year: 1999,
    posterUrl: "https://...",
    list: "watching" | "wishlist" | "watched" | "not" | "custom:listId",
    addedAt: 1234567890,
    userRating: 5, // 1-5 stars
    userNotes: "Great movie!",
    tags: ["sci-fi", "action"],
    synopsis: "...",
    showStatus: "Ended" | "Returning Series" | ...,
    nextAirDate: "2025-01-15",
    lastAirDate: "2024-12-01",
    networks: [...],
    productionCompanies: [...],
    // ... other TMDB fields
  },
  "tv:456": { ... }
}
```

**Data Flow:**
- **Created/Updated:** `[storage:ts:224-490]` â†’ `Library.upsert` â†’ saves to localStorage â†’ emits `library:changed` event â†’ triggers Firebase sync
- **Read:** `[storage:ts:224-490]` â†’ `Library.getAll()`, `useLibrary` hook
- **Deleted:** `[storage:ts:224-490]` â†’ `Library.remove`

**File References:** `[storage:ts:1-524]`, `[library.types:ts:1-18]`

---

#### Key: `flicklet.customLists.v2`
**Purpose:** Custom list definitions

**Structure:**
```typescript
{
  customLists: [
    {
      id: "list-123",
      name: "Holiday Movies",
      description: "Movies to watch during holidays",
      color: "#FF0000",
      createdAt: 1234567890,
      itemCount: 5,
      isDefault: false
    }
  ],
  selectedListId: "list-123",
  maxLists: 10
}
```

**Data Flow:**
- **Created/Updated:** `[customLists:ts:1-200]` â†’ `customListManager.create/update`
- **Read:** `[customLists:ts:1-200]` â†’ `customListManager.getAll`

**File References:** `[customLists:ts:1-200]`, `[library.types:ts:1-18]`

---

#### Key: `flicklet:flickword-game-state`
**Purpose:** FlickWord game state (current game progress)

**Structure:**
```typescript
{
  target: "HOUSE",
  guesses: ["CRANE", "MOUSE"],
  current: "",
  maxGuesses: 6,
  done: false,
  status: { "H": "correct", "O": "present", ... },
  lastResults: [["correct", "absent", ...], ...],
  wordInfo: {
    definition: "...",
    difficulty: "easy"
  },
  showHint: false,
  date: "2025-01-15" // Date when game was saved
}
```

**Data Flow:**
- **Created/Updated:** `[FlickWordGame:tsx:72-95]` â†’ `saveGameState` on each guess
- **Read:** `[FlickWordGame:tsx:174-265]` â†’ `loadTodaysWord` loads saved state if same date

**File References:** `[FlickWordGame:tsx:1-921]`

---

#### Key: `flicklet:flickword-stats` or `flickword:stats`
**Purpose:** FlickWord game statistics

**Structure:**
```typescript
{
  games: 10,
  wins: 8,
  losses: 2,
  streak: 3,
  maxStreak: 5
}
```

**Data Flow:**
- **Updated:** `[FlickWordModal:tsx:90-131]` â†’ `handleGameComplete` saves stats
- **Read:** `[FlickWordStats:tsx:13-101]` â†’ displays stats

**File References:** `[FlickWordModal:tsx:90-131]`, `[FlickWordStats:tsx:13-101]`

**âš ï¸ ISSUE:** FlickWord stats stored in localStorage only, never synced to Firebase. If user clears browser data, stats are lost.

---

#### Key: `flicklet-data` (Legacy V1 format)
**Purpose:** Legacy data format (still used in some places, being migrated)

**Structure:**
```javascript
{
  tv: { watching: [], wishlist: [], watched: [] },
  movies: { watching: [], wishlist: [], watched: [] },
  settings: { pro: false, episodeTracking: false, theme: 'light', lang: 'en', username: '', displayName: '' },
  flickword: { games: 0, wins: 0, losses: 0, streak: 0, maxStreak: 0 }
}
```

**Data Flow:**
- **Migration:** `[storage:ts:44-76]` â†’ `migrateOldData` converts to V2 format on first load

**File References:** `[storage:ts:44-76]`

---

### Settings Data Model

**Storage:** `flicklet.settings.v2` (localStorage) + synced to `users/{uid}/settings` (Firestore)

**Structure:**
```typescript
{
  account: {
    username: string,
    displayName: string,
    email: string,
    photoURL: string | null
  },
  display: {
    theme: "light" | "dark",
    language: "en" | "es",
    personalityLevel: "regular" | "semi-sarcastic" | "severely-sarcastic"
  },
  notifications: {
    globalEnabled: boolean,
    methods: {
      inApp: boolean,
      push: boolean,
      email: boolean // Pro only
    },
    showSettings: Record<showId, ShowNotificationSettings>
  },
  layout: {
    episodeTracking: boolean,
    forYouRows: [
      { mainGenre: string, subGenre: string, mediaType: "movies" | "tv" | "both" },
      ...
    ]
  },
  pro: {
    isPro: boolean,
    subscriptionType: string | null,
    expiresAt: number | null
  }
}
```

**Data Flow:**
- **Created/Updated:** `[settings:ts:1-200]` â†’ `settingsManager.update*` methods
- **Read:** `[settings:ts:1-200]` â†’ `useSettings` hook
- **Sync:** Synced to Firebase on changes (via `firebaseSync`)

**File References:** `[settings:ts:1-200]`

---

### Analytics/Events Data Model

**Storage:** `flicklet_analytics` (localStorage, last 100 events) - Development only

**Structure:**
```typescript
[
  {
    event: "tab_opened:returning",
    payload: { count: 5 },
    timestamp: "2025-01-15T10:00:00Z",
    userAgent: "...",
    url: "https://..."
  },
  ...
]
```

**Data Flow:**
- **Created:** `[analytics:ts:12-19]` â†’ `track(event, payload)` logs to console and localStorage
- **Read:** Development debugging only (not sent to external service)

**File References:** `[analytics:ts:1-19]`, `[events:ts:1-11]`

**âš ï¸ ISSUE:** Analytics currently only logs to console/localStorage. No external analytics service integrated (Sentry installed but not initialized).

---

## 3. INTEGRATION MATRIX

| Feature | Community Posts | Movie Tracking | FlickWord | Trivia | Notifications | Discovery |
|---------|----------------|----------------|-----------|--------|---------------|-----------|
| **Community Posts** | -- | âŒ No | âŒ No | âŒ No | âœ… Yes (reply notifications) | âŒ No |
| **Movie Tracking** | âŒ No | -- | âŒ No | âŒ No | âœ… Yes (episode notifications) | âœ… Yes (recommendations) |
| **FlickWord** | âŒ No | âŒ No | -- | âŒ No | âŒ No | âŒ No |
| **Trivia** | âŒ No | âŒ No | âŒ No | -- | âŒ No | âŒ No |
| **Notifications** | âœ… Yes | âœ… Yes | âŒ No | âŒ No | -- | âŒ No |
| **Discovery** | âŒ No | âœ… Yes | âŒ No | âŒ No | âŒ No | -- |

### Legend
- âœ… **Yes**: Features are connected (data flows between them)
- âŒ **No**: Features are silos (no integration)
- ðŸŸ¡ **Should**: High-value opportunity for integration (noted in Section 7)

### Detailed Integration Status

#### Community â†” Movie Tracking: âŒ No
- **Current:** Posts can mention shows/movies by name, but no deep linking or auto-tagging
- **Missing:** Can't click a show name in a post to go to show detail, can't create post from a 5-star rating

#### Community â†” FlickWord: âŒ No
- **Current:** Completely separate features
- **Missing:** Can't share FlickWord results to community, no leaderboard integration

#### Community â†” Trivia: âŒ No
- **Current:** Completely separate features
- **Missing:** Can't discuss trivia questions in community, no trivia-related posts

#### Movie Tracking â†” FlickWord: âŒ No
- **Current:** Completely separate features
- **Missing:** No word-of-the-day related to shows user is watching

#### Movie Tracking â†” Trivia: âŒ No
- **Current:** Completely separate features
- **Missing:** Trivia questions not personalized to user's watch history, no deep links from trivia to show pages

#### FlickWord â†” Trivia: âŒ No
- **Current:** Completely separate games
- **Missing:** No shared stats or achievements

#### Notifications â†” Community: âœ… Yes
- **Connected:** `sendPushOnReply` Cloud Function sends FCM push when user receives reply
- **File Reference:** `[functions/sendPushOnReply:ts:1-96]`

#### Notifications â†” Movie Tracking: âœ… Yes
- **Connected:** `NotificationManager` sends in-app/push/email notifications for upcoming episodes
- **File Reference:** `[notifications:ts:54-334]`, `[ShowNotificationSettingsModal:tsx:1-200]`

#### Discovery â†” Movie Tracking: âœ… Yes
- **Connected:** Discovery page uses watch history and ratings to generate recommendations
- **File Reference:** `[DiscoveryPage:tsx:1-200]`, `[smartDiscovery:ts:1-100]`

---

## 4. UI COMPONENT ARCHITECTURE

### Major Components

#### Component: `App.tsx`
**What it renders:** Main application shell, routing, modals, tabs

**Hooks/APIs called:**
- `useAuth` - Authentication state
- `useLibrary` - Watchlist data (watching, wishlist, watched)
- `useSettings` - User settings
- `useForYouRows` - For You genre configuration
- `useForYouContent` - Genre-based content from TMDB
- `useInTheaters` - Movies in theaters
- `useServiceWorker` - Offline support
- `useReturningShows` - Smart filtered returning shows

**Contains:**
- `FlickletHeader` - Search, marquee, account button
- `Tabs` / `MobileTabs` - Navigation
- `CommunityPanel` - Community posts
- `HomeYourShowsRail` - Currently watching rail
- `HomeUpNextRail` - Up next episodes rail
- `Rail` - Generic horizontal scrollable rail
- `Section` - Section wrapper with title
- `TheaterInfo` - Theater information
- `FeedbackPanel` - Feedback form
- `SettingsPage` - Settings modal
- `PostDetail` - Post detail page (route: `/posts/:slug`)
- `ListPage` - List views (watching, wishlist, watched, returning)
- `MyListsPage` - Custom lists
- `DiscoveryPage` - Discovery/search
- `AdminPage` - Admin dashboard (route: `/admin`)
- Various modals: `NotesAndTagsModal`, `ShowNotificationSettingsModal`, `FlickWordModal`, `BloopersModal`, `ExtrasModal`, `HelpModal`, `AuthModal`

**Props:** None (root component)

**State managed:**
- `view` - Current tab/view
- `currentPath` - URL path for routing
- `search` - Search query/state
- `showSettings` - Settings modal visibility
- `showFlickWordModal` - FlickWord modal visibility
- `notesModalItem` - Item for notes modal
- `notificationModalItem` - Item for notification modal
- `bloopersModalItem` - Item for bloopers modal
- `extrasModalItem` - Item for extras modal
- `showHelpModal` - Help modal visibility
- `showAuthModal` - Auth modal visibility

**File Reference:** `[App:tsx:63-941]`

**âš ï¸ Issues:**
- Multiple responsibilities: routing, state management, modal management, data fetching
- Large file (941 lines) - could be split into smaller components
- Modal state management scattered across multiple useState hooks

---

#### Component: `CommunityPanel.tsx`
**What it renders:** Recent community posts in sidebar/list format

**Hooks/APIs called:**
- `useAuth` - Check if user authenticated
- Firestore `onSnapshot` - Real-time posts listener
- Firestore `collection` - Posts collection query

**Contains:**
- `PostCard` - Individual post card
- `NewPostModal` - Modal to create new post

**Props:** None

**State managed:**
- `posts` - Array of post documents
- `loading` - Loading state
- `showNewPostModal` - New post modal visibility

**File Reference:** `[CommunityPanel:tsx:12-262]`

**âš ï¸ Issues:**
- No pagination (loads all posts) - could be performance issue with many posts
- No error boundary for Firestore errors

---

#### Component: `PostDetail.tsx`
**What it renders:** Full post page with body, comments, replies, vote bar

**Hooks/APIs called:**
- `useAuth` - Authentication state
- Firestore `getDoc` - Fetch post by slug
- Firestore `onSnapshot` - Real-time post updates

**Contains:**
- `VoteBar` - Upvote/downvote buttons
- `CommentComposer` - Comment input form
- `CommentList` - List of comments
- `ReplyList` - Replies to comments (nested)

**Props:**
- `slug` (string) - Post slug from URL

**State managed:**
- `post` - Post document data
- `loading` - Loading state
- `error` - Error state

**File Reference:** `[PostDetail:tsx:1-300]`

**âš ï¸ Issues:**
- Comments may not display correctly (reported in feature inventory)
- No error boundary
- No loading skeleton

---

#### Component: `FlickWordGame.tsx`
**What it renders:** Wordle-style word guessing game interface

**Hooks/APIs called:**
- `getTodaysWord` - Daily word API (`dailyWordApi.ts`)
- `validateWord` - Word validation API
- `localStorage` - Game state and stats persistence

**Contains:**
- Game board (6 rows Ã— 5 tiles)
- Virtual keyboard
- Stats display
- Hint toggle

**Props:**
- `onClose` (function) - Close callback
- `onGameComplete` (function) - Game completion callback

**State managed:**
- `game` - Game state (target word, guesses, current input, status)
- `isLoading` - Loading state
- `notifications` - Toast notifications array
- `animationState` - Tile animation state

**File Reference:** `[FlickWordGame:tsx:1-921]`

**âš ï¸ Issues:**
- Large component (921 lines) - could be split into smaller sub-components
- Stats stored in localStorage only, not synced to Firebase
- No error boundary for API failures

---

#### Component: `TriviaGame.tsx`
**What it renders:** Trivia question interface with multiple choice answers

**Hooks/APIs called:**
- `getCachedTrivia` - Trivia API with caching (`triviaApi.ts`)
- `useSettings` - Check Pro status

**Contains:**
- Question display
- Answer options (4 buttons)
- Explanation display
- Score counter
- Game completion screen

**Props:**
- `onClose` (function) - Close callback
- `onGameComplete` (function) - Game completion callback

**State managed:**
- `questions` - Array of trivia questions
- `currentQuestionIndex` - Current question
- `selectedAnswer` - User's selected answer
- `score` - Current score
- `gameState` - 'loading' | 'playing' | 'completed'
- `showExplanation` - Show explanation toggle
- `isProUser` - Pro status
- `currentGame` - Game number (1-5 for Pro)
- `gamesCompletedToday` - Daily completion counter

**File Reference:** `[TriviaGame:tsx:1-906]`

**âš ï¸ Issues:**
- Large component (906 lines) - could be split
- No stats persistence (scores not saved)
- No error boundary

---

#### Component: `Card.tsx` / `CardV2.tsx`
**What it renders:** Media card (movie/TV show) with poster, title, actions

**Hooks/APIs called:**
- `useLibrary` - Check if item in library
- Event system - Emits `card:want`, `card:watched`, etc.

**Contains:**
- `StarRating` - 1-5 star rating component
- `ActionButton` - Add/Watched/Start Watching buttons
- `MyListToggle` - Custom list toggle
- `EpisodeProgressDisplay` - Episode progress (TV only)
- `ProviderBadge` - Streaming provider badge

**Props:**
- `item` (MediaItem) - Movie/TV show data
- `mode` (string) - Display mode
- Various action callbacks

**State managed:**
- Local hover/click state
- Rating state (if editable)

**File Reference:** `[Card:tsx:1-200]`, `[CardV2:tsx:1-300]`

**âš ï¸ Issues:**
- Two card components (`Card.tsx` and `CardV2.tsx`) - potential duplication
- Complex prop interface (many optional callbacks)

---

#### Component: `ListPage.tsx`
**What it renders:** Full-page list view with filters, sort, search

**Hooks/APIs called:**
- `useLibrary` - Watchlist data
- `useSettings` - Settings (episode tracking, etc.)

**Contains:**
- `ListFilters` - Filter chips (genre, year, etc.)
- `SortDropdown` - Sort options
- `Card` / `CardV2` - Media cards
- `InfiniteScrollContainer` - Infinite scroll wrapper

**Props:**
- `title` (string) - Page title
- `items` (LibraryEntry[]) - Items to display
- `mode` (string) - List mode (watching, wishlist, watched, returning)
- Various action callbacks (onNotesEdit, onTagsEdit, etc.)

**State managed:**
- `filteredItems` - Filtered/sorted items
- `filters` - Active filters
- `sortBy` - Sort option

**File Reference:** `[ListPage:tsx:1-300]`

**âš ï¸ Issues:**
- No pagination (renders all items) - could be slow with large lists
- Filter logic could be extracted to custom hook

---

#### Component: `SettingsPage.tsx`
**What it renders:** Settings modal/page with multiple tabs

**Hooks/APIs called:**
- `useSettings` - Settings data
- `settingsManager` - Settings update methods
- `useAuth` - User data

**Contains:**
- Settings tabs: Account, Display, Notifications, Layout, Data, Pro, About
- `ForYouGenreConfig` - Genre configuration
- `GenreRowConfig` - Individual genre row config
- Various form inputs

**Props:**
- `onClose` (function) - Close callback

**State managed:**
- `activeTab` - Current settings tab
- Form state for various settings

**File Reference:** `[SettingsPage:tsx:1-300]`

**âš ï¸ Issues:**
- Large component - could be split into tab components
- Settings sync to Firebase not always immediate (debounced)

---

### Component Issues Summary

**Multiple Responsibilities:**
- `App.tsx` - Routing, state, modals, data fetching
- `FlickWordGame.tsx` - Game logic, UI, API calls, persistence
- `TriviaGame.tsx` - Game logic, UI, API calls, state management
- `ListPage.tsx` - Filtering, sorting, rendering, infinite scroll

**Duplicated Logic:**
- Two card components (`Card.tsx` and `CardV2.tsx`)
- Modal state management pattern repeated across multiple components
- Settings sync logic duplicated in multiple places

**Missing Error Boundaries:**
- `CommunityPanel` - No error boundary for Firestore errors
- `PostDetail` - No error boundary
- `FlickWordGame` - No error boundary for API failures
- `TriviaGame` - No error boundary
- `ListPage` - No error boundary

**Performance Issues:**
- `CommunityPanel` - No pagination (loads all posts)
- `ListPage` - No pagination (renders all items)
- `App.tsx` - Large component, many re-renders possible

---

## 5. USER FLOW MAPS

### Flow 1: New User Discovers App â†’ Rates First Movie â†’ Sees Community Post Option

**Step 1: User opens app**
- **UI Element:** Home page loads
- **Data:** No user data, empty watchlists
- **Next State:** Auth modal auto-opens after 1 second (if not authenticated)

**Step 2: User signs in with Google**
- **UI Element:** `AuthModal` â†’ Google button
- **Data:** Firebase Auth creates user, `ensureUserDocument` creates `users/{uid}` document
- **Next State:** Username prompt modal opens (if first time)

**Step 3: User sets username**
- **UI Element:** `UsernamePromptModal`
- **Data:** Username saved to `settings.username` and `settings.displayName`, synced to Firebase
- **Next State:** Home page with personalized header message

**Step 4: User searches for a movie**
- **UI Element:** Header search bar
- **Data:** TMDB API search returns results
- **Next State:** `SearchResults` page shows matching movies

**Step 5: User clicks "Add" on a movie card**
- **UI Element:** `Card` â†’ "Add" button
- **Data:** Event `card:want` emitted â†’ `Library.upsert` adds to wishlist â†’ `library:changed` event â†’ Firebase sync triggered
- **Next State:** Toast notification: "Added to Want to Watch" (personality-based message)

**Step 6: User navigates to "Want to Watch" tab**
- **UI Element:** Tab navigation â†’ "Want to Watch"
- **Data:** `useLibrary('wishlist')` reads from localStorage
- **Next State:** `ListPage` shows wishlist items

**Step 7: User clicks "Start Watching" on the movie**
- **UI Element:** `Card` â†’ "Start Watching" button
- **Data:** `Library.upsert` moves item from wishlist to watching list
- **Next State:** Item appears in "Currently Watching" tab

**Step 8: User rates the movie 5 stars**
- **UI Element:** `Card` â†’ `StarRating` component
- **Data:** `userRating: 5` saved to library entry, synced to Firebase
- **Next State:** Stars update visually, rating persists

**Step 9: User scrolls to Community section**
- **UI Element:** Home page â†’ "Community" section
- **Data:** `CommunityPanel` queries Firestore `posts` collection (real-time listener)
- **Next State:** Recent posts displayed

**Step 10: User sees "New Post" button but doesn't create post**
- **UI Element:** `CommunityPanel` â†’ "New Post" button
- **Data:** No data change (user doesn't click)
- **Next State:** User continues browsing

**âš ï¸ MISSING CONNECTION:** No prompt to create a post about the 5-star movie. No deep link from rating to community post creation.

**File References:** `[App:tsx:198-235]`, `[AuthModal:tsx:1-200]`, `[UsernamePromptModal:tsx:1-150]`, `[SearchResults:tsx:1-200]`, `[actions:ts:40-58]`, `[storage:ts:224-490]`, `[CommunityPanel:tsx:12-262]`

---

### Flow 2: User Plays Trivia â†’ Gets Question Wrong â†’ Sees Related Community Discussion

**Step 1: User opens Trivia game**
- **UI Element:** Home page â†’ Community section â†’ Trivia card click
- **Data:** `TriviaGame` component loads, `getCachedTrivia` fetches questions from API (or fallback)
- **Next State:** Trivia modal opens with first question

**Step 2: User sees question about a show they're watching**
- **UI Element:** `TriviaGame` â†’ Question display
- **Data:** Question loaded (not personalized to user's watch history)
- **Next State:** User sees 4 answer options

**Step 3: User selects wrong answer**
- **UI Element:** `TriviaGame` â†’ Answer button click
- **Data:** `selectedAnswer` state updated, `score` not incremented
- **Next State:** Explanation shown, "Next" button appears

**Step 4: User clicks "Next"**
- **UI Element:** `TriviaGame` â†’ "Next" button
- **Data:** `currentQuestionIndex` incremented
- **Next State:** Next question displayed

**Step 5: User completes game**
- **UI Element:** `TriviaGame` â†’ Final score screen
- **Data:** Game state set to 'completed', score calculated
- **Next State:** Modal closes, user returns to home

**Step 6: User wants to discuss the question they got wrong**
- **UI Element:** User manually navigates to Community section
- **Data:** No automatic connection - user must manually search for posts about the show
- **Next State:** User may or may not find relevant discussion

**âš ï¸ MISSING CONNECTIONS:**
1. Trivia questions not personalized to user's watch history
2. No deep link from trivia question to show detail page
3. No prompt to create community post about the show after getting question wrong
4. No "Discuss this show" button in trivia explanation

**File References:** `[TriviaGame:tsx:1-906]`, `[triviaApi:ts:4-130]`, `[CommunityPanel:tsx:12-262]`

---

### Flow 3: User Creates Post â†’ Receives Comment â†’ Replies â†’ Receives Notification

**Step 1: User creates a post**
- **UI Element:** `CommunityPanel` â†’ "New Post" button â†’ `NewPostModal`
- **Data:** User fills title, body, selects tags, submits
- **Next State:** `addDoc` to Firestore `posts` collection â†’ Post appears in `CommunityPanel`

**Step 2: Another user views the post**
- **UI Element:** `CommunityPanel` â†’ `PostCard` click
- **Data:** `PostDetail` component loads, fetches post by slug
- **Next State:** Post detail page at `/posts/{slug}`

**Step 3: Other user writes a comment**
- **UI Element:** `PostDetail` â†’ `CommentComposer` â†’ Submit
- **Data:** `addDoc` to `posts/{postId}/comments/{commentId}` â†’ Cloud Function `sanitizeComment` validates â†’ Comment appears in `CommentList` (real-time)
- **Next State:** Comment displayed in `CommentList`

**Step 4: Original user receives notification (if FCM token exists)**
- **UI Element:** Browser push notification (if app closed) or toast (if app open)
- **Data:** Cloud Function `sendPushOnReply` NOT triggered (only triggers on replies, not comments)
- **Next State:** User may or may not see notification

**âš ï¸ ISSUE:** No push notification for new comments, only for replies. User must manually check post.

**Step 5: Original user clicks on post**
- **UI Element:** User navigates to `/posts/{slug}`
- **Data:** `PostDetail` loads post and comments (real-time listener)
- **Next State:** Post page with comments visible

**Step 6: Original user replies to comment**
- **UI Element:** `CommentList` â†’ "Reply" button â†’ `ReplyList` â†’ Submit reply
- **Data:** `addDoc` to `posts/{postId}/comments/{commentId}/replies/{replyId}` â†’ Cloud Function `aggregateReplies` updates parent comment `replyCount` â†’ Cloud Function `sendPushOnReply` sends FCM notification to comment author
- **Next State:** Reply appears nested under comment, comment author receives push notification

**Step 7: Comment author receives push notification**
- **UI Element:** Browser push notification (background) or toast (foreground)
- **Data:** FCM message delivered via `firebase-messaging-sw.js` (background) or `setupForegroundMessageHandler` (foreground)
- **Next State:** User clicks notification â†’ Opens post detail page

**File References:** `[NewPostModal:tsx:1-200]`, `[PostDetail:tsx:1-300]`, `[CommentComposer:tsx:16-125]`, `[CommentList:tsx:15-201]`, `[ReplyList:tsx:1-142]`, `[functions/sendPushOnReply:ts:1-96]`, `[firebase-messaging:ts:1-122]`

---

### Flow 4: User 5-Stars Show â†’ Checks Profile â†’ Sees Watch History + Game Stats

**Step 1: User rates a show 5 stars**
- **UI Element:** `Card` â†’ `StarRating` â†’ 5 stars
- **Data:** `Library.upsert` updates `userRating: 5`, synced to Firebase
- **Next State:** Stars update, rating saved

**Step 2: User wants to check their profile/stats**
- **UI Element:** User looks for profile page
- **Data:** No dedicated profile page exists
- **Next State:** User must navigate to different tabs to see different data

**Step 3: User checks "Watched" tab**
- **UI Element:** Tab navigation â†’ "Watched"
- **Data:** `useLibrary('watched')` reads from localStorage
- **Next State:** `ListPage` shows watched items with ratings visible on cards

**Step 4: User checks FlickWord stats**
- **UI Element:** User must open FlickWord game â†’ Stats button
- **Data:** `FlickWordStats` reads from `localStorage.getItem('flickword:stats')`
- **Next State:** Stats modal shows games, wins, losses, streak

**Step 5: User checks Trivia stats**
- **UI Element:** User must open Trivia game â†’ Stats (if available)
- **Data:** No stats persistence - scores not saved
- **Next State:** No stats to display

**âš ï¸ MISSING CONNECTIONS:**
1. No unified profile page showing all user activity (ratings, watch history, game stats)
2. FlickWord stats not synced to Firebase (localStorage only)
3. Trivia stats not saved at all
4. No aggregation of user activity across features

**File References:** `[StarRating:tsx:1-100]`, `[ListPage:tsx:1-300]`, `[FlickWordStats:tsx:13-101]`, `[TriviaGame:tsx:1-906]`

---

## 6. TECHNICAL DEBT & RISKS

### Race Conditions

#### Issue: Optimistic UI Without Rollback
**Location:** `[CommentComposer:tsx:25-71]`, `[ReplyList:tsx:63-75]`
**Problem:** Comments/replies are written optimistically to Firestore, but if Cloud Function `sanitizeComment` rejects the content, the UI doesn't roll back. User sees comment appear, then it may disappear if validation fails.
**Risk:** Medium - User confusion, potential data inconsistency
**Fix:** Add error handling to roll back optimistic update if Firestore write fails

#### Issue: Firebase Sync Race Condition
**Location:** `[firebaseSync:ts:148-191]`
**Problem:** `syncInProgress` flag prevents concurrent syncs, but if user makes rapid changes, some may be lost if sync is in progress.
**Risk:** Low - Debounced sync reduces frequency, but edge cases exist
**Fix:** Queue sync operations instead of skipping

#### Issue: Library Update Race Condition
**Location:** `[storage:ts:224-490]`
**Problem:** Multiple rapid `Library.upsert` calls can cause duplicate Firebase sync events if debounce hasn't fired yet.
**Risk:** Low - Debounce helps, but not perfect
**Fix:** Use request ID or timestamp to deduplicate sync events

---

### Missing Security Rules

#### Issue: Users Collection Read Access Too Permissive
**Location:** `[firestore.rules:91-109]`
**Problem:** Rule allows any authenticated user to read any user document: `allow read: if isAuthenticated();` This exposes all user data (watchlists, settings) to any logged-in user.
**Risk:** High - Privacy violation, data exposure
**Fix:** Restrict to own document: `allow read: if isOwner(userId);`

#### Issue: No Rate Limiting on Post Creation
**Location:** `[firestore.rules:23-29]`
**Problem:** Authenticated users can create unlimited posts. No rate limiting in security rules (client-side rate limiting exists but can be bypassed).
**Risk:** Medium - Spam, abuse, cost
**Fix:** Add Cloud Function middleware for rate limiting, or use Firestore security rules with request time tracking

#### Issue: FCM Token Not Validated
**Location:** `[firebase-messaging:ts:84-88]`
**Problem:** FCM token stored in user document without validation. Malicious user could store invalid token, causing Cloud Function failures.
**Risk:** Low - Cloud Function handles invalid tokens, but wastes resources
**Fix:** Validate token format before storing

---

### Performance Bottlenecks

#### Issue: No Pagination on Community Posts
**Location:** `[CommunityPanel:tsx:12-262]`
**Problem:** `onSnapshot` listener loads ALL posts from Firestore. With hundreds of posts, this causes:
- Slow initial load
- High Firestore read costs
- Large memory usage
- Slow re-renders on every new post
**Risk:** High - Will become critical as post count grows
**Fix:** Implement pagination with `limit()` and `startAfter()` queries

#### Issue: No Pagination on List Pages
**Location:** `[ListPage:tsx:1-300]`
**Problem:** Renders all items in list at once. Users with 1000+ items will experience:
- Slow initial render
- High memory usage
- Poor scroll performance
**Risk:** Medium - Affects power users with large libraries
**Fix:** Implement virtual scrolling or pagination

#### Issue: Large Firestore Listeners
**Location:** `[CommentList:tsx:15-201]`, `[ReplyList:tsx:1-142]`
**Problem:** Real-time listeners on comments/replies load all documents. For posts with 100+ comments, this is expensive.
**Risk:** Medium - High Firestore read costs
**Fix:** Paginate comments, load replies on-demand

#### Issue: No Image Lazy Loading
**Location:** `[Card:tsx:1-200]`, `[CardV2:tsx:1-300]`
**Problem:** All poster images load immediately, even if not visible. Causes:
- Slow page load
- High bandwidth usage
- Poor mobile performance
**Risk:** Medium - Affects users on slow connections
**Fix:** Implement `loading="lazy"` on images, or use intersection observer

#### Issue: FlickWord Stats Not Synced
**Location:** `[FlickWordModal:tsx:90-131]`
**Problem:** Stats stored in localStorage only. If user clears browser data or uses different device, stats are lost.
**Risk:** Low - User experience issue, not security
**Fix:** Sync stats to Firebase `users/{uid}/flickwordStats`

---

### Inconsistent Patterns

#### Issue: Modal State Management Inconsistency
**Location:** `[App:tsx:101-121]`
**Problem:** Some modals use separate state (`showNotesModal`, `showNotificationModal`), others use single modal component with props. Inconsistent patterns make code harder to maintain.
**Risk:** Low - Code maintainability
**Fix:** Standardize on single modal manager or context

#### Issue: Settings Sync Pattern Inconsistency
**Location:** `[settings:ts:1-200]`, `[firebaseSync:ts:11-429]`
**Problem:** Some settings sync immediately, others are debounced. Watchlists sync via `firebaseSync`, but settings may sync separately. Unclear which takes precedence on conflict.
**Risk:** Medium - Data consistency issues
**Fix:** Unify sync strategy, add conflict resolution

#### Issue: Error Handling Inconsistency
**Location:** Various components
**Problem:** Some components have try/catch blocks, others don't. Some show error messages, others fail silently. No consistent error boundary strategy.
**Risk:** Medium - Poor user experience on errors
**Fix:** Add error boundaries, standardize error handling pattern

---

### Brittle Error Handling

#### Issue: TMDB API Failures Not Handled Gracefully
**Location:** `[useTmdb:ts:1-100]`, `[tmdb:ts:1-200]`
**Problem:** If TMDB API is down or rate-limited, search and content loading fail with no fallback. User sees blank page or error.
**Risk:** Medium - Poor user experience
**Fix:** Add retry logic, fallback to cached data, show user-friendly error message

#### Issue: Firestore Connection Loss Not Handled
**Location:** `[CommunityPanel:tsx:12-262]`, `[PostDetail:tsx:1-300]`
**Problem:** If Firestore connection is lost, real-time listeners fail silently. User doesn't know data is stale.
**Risk:** Low - Rare, but confusing when it happens
**Fix:** Add connection state monitoring, show offline indicator

#### Issue: FCM Token Failure Silent
**Location:** `[firebase-messaging:ts:57-100]`
**Problem:** If FCM token request fails (permission denied, network error), error is only logged to console. User doesn't know notifications won't work.
**Risk:** Low - User experience issue
**Fix:** Show user-friendly error message, offer retry

---

### Code Duplication

#### Issue: Card Component Duplication
**Location:** `[Card:tsx:1-200]`, `[CardV2:tsx:1-300]`
**Problem:** Two card components with similar functionality. Unclear which to use, potential for bugs if one is updated but not the other.
**Risk:** Low - Code maintainability
**Fix:** Consolidate into single component, or clearly document when to use each

#### Issue: Modal State Pattern Duplication
**Location:** `[App:tsx:101-121]`
**Problem:** Same pattern repeated for each modal: `const [showModal, setShowModal] = useState(false); const [modalItem, setModalItem] = useState(null);`
**Risk:** Low - Code maintainability
**Fix:** Create `useModal` hook or modal context

#### Issue: Settings Sync Logic Duplication
**Location:** `[settings:ts:1-200]`, `[firebaseSync:ts:11-429]`
**Problem:** Settings may sync in multiple places with different strategies.
**Risk:** Medium - Potential for conflicts
**Fix:** Unify sync logic in single manager

---

## 7. MISSING CONNECTIONS (High-Value Opportunities)

### Opportunity 1: Auto-Generate Community Post from 5-Star Rating
**Description:** When user rates a show/movie 5 stars, prompt them to create a community post with pre-filled title: "I just 5-starred [Title]!" and optional review prompt.
**Implementation:**
- Add event listener in `StarRating` component: if rating === 5, show modal: "Share your love for [Title]?"
- Modal opens `NewPostModal` with pre-filled title and tag suggestions
- Deep link: Rating â†’ Community post creation
**Value:** Increases community engagement, connects ratings to discussions
**File References:** `[StarRating:tsx:1-100]`, `[NewPostModal:tsx:1-200]`

---

### Opportunity 2: Personalized Trivia Questions Based on Watch History
**Description:** Trivia questions should prioritize shows/movies the user is currently watching or has watched. After getting a question wrong, show deep link to show detail page.
**Implementation:**
- Modify `getCachedTrivia` to accept user watch history
- Filter/prioritize questions about shows in user's library
- In `TriviaGame`, after wrong answer, show button: "Learn more about [Show Name]" â†’ links to show detail or Discovery page
**Value:** Makes trivia more relevant, increases engagement with watched content
**File References:** `[triviaApi:ts:4-130]`, `[TriviaGame:tsx:1-906]`, `[storage:ts:224-490]`

---

### Opportunity 3: FlickWord Daily Word Related to User's Shows
**Description:** Daily word could be related to a show the user is watching (e.g., word "HOUSE" when user watches "House of Cards"). After game completion, show connection.
**Implementation:**
- Modify `getTodaysWord` to optionally suggest words related to user's watch history
- After game completion, if word matches a show name, show: "Did you know this word is in [Show Name]?"
- Deep link to show detail page
**Value:** Creates connection between games and content, increases discovery
**File References:** `[dailyWordApi:ts:1-100]`, `[FlickWordGame:tsx:1-921]`, `[storage:ts:224-490]`

---

### Opportunity 4: Unified User Profile Page
**Description:** Create a profile page showing: watch history stats (total watched, average rating), FlickWord stats, Trivia stats, recent community posts, achievements/badges.
**Implementation:**
- New page: `/profile` or `/user/{username}`
- Component: `UserProfilePage` aggregates data from:
  - `users/{uid}/watchlists` (Firestore) - watch history
  - `localStorage` - FlickWord stats (needs to sync to Firebase first)
  - `posts` collection filtered by `authorId` - community posts
- Display: Stats cards, recent activity feed, achievements
**Value:** Gives users a sense of progress, encourages engagement across all features
**File References:** `[storage:ts:224-490]`, `[FlickWordStats:tsx:13-101]`, `[CommunityPanel:tsx:12-262]`

---

### Opportunity 5: Game High Score â†’ Community Post with Achievement Badge
**Description:** When user achieves a FlickWord streak or perfect Trivia score, auto-generate a community post: "I just got a 10-day FlickWord streak! ðŸŽ‰" with achievement badge.
**Implementation:**
- In `FlickWordModal.handleGameComplete`, if streak reaches milestone (5, 10, 20), show prompt: "Share your achievement?"
- If yes, create post with pre-filled content and achievement badge emoji/tag
- Similar for Trivia: perfect score (10/10) triggers share prompt
**Value:** Increases community engagement, creates social proof, gamification
**File References:** `[FlickWordModal:tsx:90-131]`, `[TriviaGame:tsx:1-906]`, `[NewPostModal:tsx:1-200]`

---

### Opportunity 6: Deep Linking from Community Posts to Shows
**Description:** When a post mentions a show/movie name, make it clickable â†’ links to show detail page or Discovery search.
**Implementation:**
- Parse post body for show/movie names (fuzzy match against TMDB database or user's library)
- Wrap matches in `<Link>` components pointing to `/discovery?q={showName}` or show detail if in library
- Add "Tagged Shows" section in `PostDetail` showing linked shows
**Value:** Connects community discussions to content, increases discovery
**File References:** `[PostDetail:tsx:1-300]`, `[DiscoveryPage:tsx:1-200]`, `[tmdb:ts:1-200]`

---

## 8. OUTPUT FORMAT

### File Reference Tags

**Components:**
- `[App:tsx:63-941]` - Main application component
- `[CommunityPanel:tsx:12-262]` - Community posts panel
- `[PostDetail:tsx:1-300]` - Post detail page
- `[FlickWordGame:tsx:1-921]` - FlickWord game component
- `[TriviaGame:tsx:1-906]` - Trivia game component
- `[Card:tsx:1-200]` - Media card component
- `[CardV2:tsx:1-300]` - Media card V2 component
- `[ListPage:tsx:1-300]` - List view page
- `[SettingsPage:tsx:1-300]` - Settings page
- `[NewPostModal:tsx:1-200]` - New post modal
- `[CommentComposer:tsx:16-125]` - Comment composer
- `[CommentList:tsx:15-201]` - Comment list
- `[ReplyList:tsx:1-142]` - Reply list
- `[VoteBar:tsx:1-100]` - Vote bar component
- `[StarRating:tsx:1-100]` - Star rating component
- `[AuthModal:tsx:1-200]` - Authentication modal
- `[UsernamePromptModal:tsx:1-150]` - Username prompt modal

**Libraries/Utils:**
- `[storage:ts:1-524]` - Library storage system
- `[firebaseSync:ts:11-429]` - Firebase sync manager
- `[auth:ts:49-468]` - Authentication manager
- `[settings:ts:1-200]` - Settings manager
- `[notifications:ts:54-334]` - Notification manager
- `[tmdb:ts:1-200]` - TMDB API client
- `[triviaApi:ts:4-130]` - Trivia API client
- `[dailyWordApi:ts:1-100]` - Daily word API client
- `[analytics:ts:1-19]` - Analytics tracking
- `[firebase-messaging:ts:1-122]` - FCM messaging

**Firebase Functions:**
- `[functions/index:ts:4-17]` - Main functions export
- `[functions/sanitizeComment:ts:1-100]` - Comment sanitization
- `[functions/aggregateVotes:ts:1-50]` - Vote aggregation
- `[functions/aggregateReplies:ts:1-100]` - Reply aggregation
- `[functions/sendPushOnReply:ts:1-96]` - Push notification on reply
- `[functions/setAdminRole:ts:1-100]` - Admin role management

**Configuration:**
- `[firestore.rules:1-122]` - Firestore security rules
- `[App:tsx:59-62]` - Route types and state

---

### Confidence Scores

| Section | Confidence | Notes |
|---------|-----------|-------|
| **1. User-Facing Features** | High | Comprehensive component scan completed, all major features identified |
| **2. Data Models** | High | Firestore rules and sync code analyzed, localStorage structure documented |
| **3. Integration Matrix** | High | Cross-referenced components and data flows, verified connections |
| **4. UI Component Architecture** | High | All major components analyzed, props and state documented |
| **5. User Flow Maps** | Medium | Flows traced through code, but some edge cases may exist |
| **6. Technical Debt** | High | Code patterns analyzed, security rules reviewed, performance issues identified |
| **7. Missing Connections** | High | Based on data model analysis and integration gaps |

---

## Appendix: Additional Findings

### Environment Variables Required
- `VITE_FIREBASE_API_KEY` - Firebase API key
- `VITE_FIREBASE_AUTH_DOMAIN` - Firebase auth domain
- `VITE_FIREBASE_PROJECT_ID` - Firebase project ID
- `VITE_FIREBASE_STORAGE_BUCKET` - Firebase storage bucket
- `VITE_FIREBASE_MESSAGING_SENDER_ID` - FCM sender ID
- `VITE_FIREBASE_APP_ID` - Firebase app ID
- `VITE_TMDB_API_KEY` - TMDB API key
- `VITE_FCM_VAPID_KEY` - FCM VAPID key (for push notifications)
- `VITE_SENTRY_DSN` - Sentry DSN (optional, not initialized)

### External APIs Used
- **TMDB API** - Movie/TV data, search, images
- **OpenTriviaDB API** - Trivia questions (fallback to hardcoded questions)
- **Daily Word API** - FlickWord daily word (fallback to "HOUSE")
- **SendGrid API** - Email notifications (Pro feature, via Netlify function)
- **Firebase Services** - Auth, Firestore, FCM, Storage

### Build/Deploy Configuration
- **Hosting:** Netlify (configured in `netlify.toml`)
- **Build:** Vite (configured in `vite.config.js`)
- **Functions:** Netlify Functions (`netlify/functions/`) + Firebase Functions (`functions/`)
- **Mobile:** Capacitor (Android/iOS apps)

---

**Report Complete.** This system map provides a comprehensive view of the Flicklet application, identifying all features, data models, integrations, and opportunities for improvement.


```

## reports\v2-fixed-bottom-audit.md
```
# Fixed-Bottom Overlays Audit - React V2 App

## Fixed-Bottom Elements Found

### 1. Mobile Navigation (.mobile-nav)
- **File**: `apps/web/src/styles/global.css` (lines 77-92)
- **Z-Index**: 9999
- **Positioning**: `position: fixed; bottom: 0; left: 0; right: 0;`
- **Padding Strategy**: Uses `--mobile-nav-height: 80px` variable
- **Safe Area**: Uses `env(safe-area-inset-bottom)` in MobileTabs component
- **GPU Layering**: Uses `transform: translate3d(0, 0, 0)` for iOS Safari stability

### 2. Floating Action Buttons (FABs)
- **File**: `apps/web/src/components/FABs.tsx`
- **Z-Index**: 9999
- **Positioning**: 
  - Settings FAB: `fixed bottom-4 left-4 lg:bottom-8 lg:left-8`
  - Theme/Mardi Gras FABs: `fixed bottom-4 right-4 lg:bottom-8 lg:right-8`
- **Padding Strategy**: Uses responsive spacing (16px mobile, 32px desktop)
- **Safe Area**: Accounts for viewport offset from Visual Viewport API

### 3. Scroll-to-Top Arrow
- **File**: `apps/web/src/components/ScrollToTopArrow.tsx`
- **Z-Index**: 9998 (below FABs)
- **Positioning**: `fixed bottom-20 right-4 lg:bottom-24 lg:right-8`
- **Padding Strategy**: Positioned above mobile nav (80px + 20px = 100px from bottom)

### 4. Game Modals
- **Files**: 
  - `apps/web/src/components/games/FlickWordModal.tsx`
  - `apps/web/src/components/games/TriviaModal.tsx`
- **Z-Index**: 9999 (same as mobile nav)
- **Positioning**: `position: fixed; bottom: 0;` for modal backdrop
- **Padding Strategy**: Full-screen overlay with centered dialog

### 5. Performance Debug Component
- **File**: `apps/web/src/components/PerformanceComponents.tsx`
- **Z-Index**: 50
- **Positioning**: `fixed bottom-20 right-4`
- **Padding Strategy**: Positioned above mobile nav

## Z-Index Hierarchy

1. **9999**: Mobile nav, FABs, Game modals (highest priority)
2. **9998**: Scroll-to-top arrow (below FABs)
3. **1000**: FlickWord game elements
4. **90**: Header marquee
5. **50**: Performance debug component (lowest)

## Safe Area Handling

- **Mobile Navigation**: Uses `env(safe-area-inset-bottom)` for iOS devices
- **Visual Viewport API**: MobileTabs component handles iOS Safari keyboard
- **Viewport Offset**: FABs adjust position based on keyboard visibility

## Padding Strategy Analysis

- **Main Content**: Uses `padding-bottom: var(--mobile-nav-height)` to avoid overlap
- **FABs**: Positioned with responsive spacing that accounts for mobile nav
- **Scroll Arrow**: Positioned above mobile nav with additional spacing
- **Safe Areas**: Properly handled for iOS devices with notches/home indicators

## Recommendations

1. **Z-Index Consolidation**: Consider creating a z-index token system for better management
2. **Safe Area Consistency**: Ensure all fixed-bottom elements use consistent safe area handling
3. **Mobile-First Positioning**: Current responsive approach is well-implemented
4. **GPU Layering**: Good use of `transform3d` for iOS Safari stability










```

## SCROLL_FIX_IMPLEMENTATION_PLAN.md
```
# Mobile Scroll & Swipe Fixes - Phased Implementation Plan

**Branch:** `swipe-and-scroll-fixes`  
**Status:** Planning Phase  
**Created:** 2025-01-15

---

## Overview

This plan addresses 8 critical issues identified in the forensic review while minimizing risk through phased, feature-flagged implementation with clear user-level test gates.

---

## Phase Gates

Each phase must pass all user-level test cases before proceeding. A phase cannot begin until the previous phase is 100% green.

---

## Phase 0: Foundation & Testing Infrastructure âœ… PREREQUISITE

**Goal:** Establish baseline behavior, create testing tools, and document current state.

**Deliverables:**

1. Baseline behavior documentation (what works today)
2. Automated test suite for scroll/swipe behavior
3. Manual test checklist template
4. Feature flag infrastructure
5. Monitoring/logging for scroll events

**User-Level Test Cases:**

- [ ] Can scroll main page vertically on mobile device
- [ ] Can swipe cards horizontally without page scrolling
- [ ] Can open modal without background scrolling
- [ ] Can scroll content inside modal
- [ ] Can close modal and return to original scroll position
- [ ] Can use pull-to-refresh on main page (if applicable)

**Success Criteria:**

- All baseline tests pass
- Test infrastructure ready
- Feature flags can be toggled without deployment
- Monitoring captures scroll-related events

**Risk Level:** LOW (no behavior changes)

**Estimated Duration:** 2-3 days

---

## Phase 1: Scroll Lock Safety Improvements ðŸŸ¡ LOW RISK

**Goal:** Fix critical scroll lock issues without changing behavior (defensive improvements).

**Changes:**

1. Add re-entrancy protection (prevent double-lock)
2. Add unlock safety checks (prevent unlock when not locked)
3. Add scroll position validation before restore
4. Add logging for debugging
5. Add error boundaries for scroll lock failures

**Feature Flag:** `flag:scroll-lock-safety`

**User-Level Test Cases:**

### Test 1: Single Modal

1. Open any modal (Episode Tracking, Settings, FlickWord, Trivia)
2. Verify background page does NOT scroll
3. Verify modal content CAN scroll if needed
4. Close modal
5. Verify page returns to original scroll position
6. Repeat 5 times

**Expected:** âœ… All 6 steps work perfectly every time

### Test 2: Rapid Modal Open/Close

1. Open Episode Tracking modal
2. Immediately close it
3. Immediately open Settings modal
4. Immediately close it
5. Open FlickWord modal
6. Close it
7. Verify page is at original scroll position

**Expected:** âœ… No scroll position jumps, all modals work

### Test 3: Modal During Page Scroll

1. Scroll page down 50% of the way
2. Open Episode Tracking modal
3. Scroll modal content
4. Close modal
5. Verify page is exactly where it was before opening modal

**Expected:** âœ… Scroll position preserved exactly

### Test 4: Navigation During Modal

1. Open Settings modal
2. While modal is open, try to navigate (if possible) or refresh page
3. Modal should handle gracefully (either stay open or close cleanly)
4. No scroll position errors

**Expected:** âœ… Graceful handling, no errors

### Test 5: Multiple Modals (if supported)

1. Open Episode Tracking modal
2. Try to open another modal (if app allows)
3. Verify only one modal is locked at a time
4. Close modal
5. Verify unlock works correctly

**Expected:** âœ… Proper locking/unlocking chain

### Test 6: Keyboard Opening (Mobile)

1. On mobile device, open modal
2. Tap text input field
3. Keyboard appears
4. Verify modal stays locked, no background scroll
5. Close keyboard
6. Close modal
7. Verify scroll position correct

**Expected:** âœ… Keyboard doesn't break scroll lock

**Success Criteria:**

- All 6 test cases pass 100% of the time
- No console errors related to scroll lock
- Scroll position always restored correctly
- Zero user-reported scroll issues in this phase

**Risk Level:** LOW (defensive code, no behavior changes)

**Estimated Duration:** 3-4 days

**Rollback Plan:** Single feature flag flip or revert commit

---

## Phase 2: Touch Event Audit & Standardization ðŸŸ¡ MEDIUM-LOW RISK

**Goal:** Document and standardize touch event handling without breaking existing behavior.

**Changes:**

1. Audit all touch event listeners (passive vs non-passive)
2. Document why each listener uses its current configuration
3. Create touch event handling guidelines
4. Add warnings for improper passive/non-passive usage
5. Create shared touch handler utilities (no breaking changes)

**Feature Flag:** `flag:touch-event-audit` (logging only, no behavior change)

**User-Level Test Cases:**

### Test 1: Card Swipe Still Works

1. Find a swipeable card
2. Swipe horizontally left
3. Swipe horizontally right
4. Verify swipes work smoothly
5. Verify page doesn't scroll during horizontal swipe

**Expected:** âœ… Swipes work perfectly, no page scroll interference

### Test 2: Vertical Page Scroll

1. Scroll page vertically up and down
2. Verify smooth scrolling
3. Verify no jank or stuttering
4. Verify momentum scrolling works (iOS)

**Expected:** âœ… Smooth, native-feeling scroll

### Test 3: Pull-to-Refresh (if applicable)

1. If pull-to-refresh exists, pull down from top
2. Verify refresh triggers
3. Verify page doesn't scroll during pull
4. Verify smooth release after refresh

**Expected:** âœ… Pull-to-refresh works perfectly

### Test 4: Modal Touch Interactions

1. Open modal with scrollable content
2. Touch and drag to scroll modal content
3. Verify only modal scrolls, background stays locked
4. Verify smooth scrolling in modal

**Expected:** âœ… Modal scrolling isolated, smooth

### Test 5: Mixed Touch Gestures

1. Start vertical scroll on page
2. While scrolling, try horizontal swipe on card
3. Verify both gestures work without conflict
4. Try rapid touch interactions

**Expected:** âœ… No gesture conflicts, smooth handling

**Success Criteria:**

- All existing touch behaviors work identically
- Performance metrics unchanged (use Chrome DevTools Performance)
- No new console warnings (except our audit warnings)
- Documentation complete

**Risk Level:** LOW (audit only, no behavior changes)

**Estimated Duration:** 2-3 days

**Rollback Plan:** N/A (no behavior changes)

---

## Phase 3: iOS Safari Scroll Lock Fixes ðŸŸ  MEDIUM RISK

**Goal:** Fix iOS Safari-specific scroll lock issues while maintaining other browser behavior.

**Changes:**

1. Add iOS Safari detection
2. Apply iOS-specific scroll lock implementation
3. Handle iOS viewport resize events
4. Fix iOS momentum scroll interference
5. Add safe area consideration in scroll calculations

**Feature Flag:** `flag:ios-scroll-fix` (iOS devices only)

**User-Level Test Cases:**

### Test 1: iOS Safari Modal Lock

1. On iOS Safari device, scroll page down
2. Open Episode Tracking modal
3. Verify background page is COMPLETELY locked (try to scroll it)
4. Scroll modal content
5. Close modal
6. Verify page returns to exact scroll position

**Expected:** âœ… Background completely locked, position preserved exactly

### Test 2: iOS Keyboard Interaction

1. On iOS Safari, open modal
2. Tap text input
3. Keyboard slides up
4. Verify background still locked (try scrolling)
5. Dismiss keyboard
6. Verify modal still scrollable
7. Close modal
8. Verify scroll position correct

**Expected:** âœ… Keyboard doesn't break lock, position preserved

### Test 3: iOS Orientation Change

1. On iOS device, scroll page down
2. Open modal
3. Rotate device (portrait â†” landscape)
4. Verify modal stays locked
5. Verify scroll position preserved after rotation
6. Close modal
7. Verify scroll position correct

**Expected:** âœ… Orientation change handled gracefully

### Test 4: iOS Momentum Scroll

1. On iOS device, scroll page with quick flick (momentum scroll)
2. While momentum scrolling, open modal
3. Verify modal opens, background locks
4. Close modal
5. Verify scroll position correct (accounting for momentum)

**Expected:** âœ… Momentum scroll handled, position correct

### Test 5: iOS Multiple Modals

1. Open modal A
2. Close modal A
3. Immediately open modal B
4. Verify no scroll jumps between modals
5. Verify position preserved

**Expected:** âœ… Smooth modal transitions, no jumps

### Test 6: iOS Safari Toolbar

1. Scroll down (toolbar hides)
2. Open modal
3. Verify lock works regardless of toolbar state
4. Close modal
5. Verify scroll position correct

**Expected:** âœ… Toolbar state doesn't affect lock

**Success Criteria:**

- All 6 iOS-specific tests pass 100%
- Other browsers (Chrome, Firefox) unaffected
- No performance regression
- iOS-specific fixes isolated (other browsers use original code)

**Risk Level:** MEDIUM (iOS-specific, affects behavior)

**Estimated Duration:** 4-5 days

**Rollback Plan:** Feature flag flip (iOS devices only)

---

## Phase 4: Modal Scroll Isolation Improvements ðŸŸ  MEDIUM RISK

**Goal:** Ensure modals have completely isolated scroll contexts, no background scroll leakage.

**Changes:**

1. Improve modal scroll container isolation
2. Add overscroll-behavior enforcement
3. Fix touch event propagation in modals
4. Add scroll boundary detection
5. Improve keyboard-aware scroll handling

**Feature Flag:** `flag:modal-scroll-isolation`

**User-Level Test Cases:**

### Test 1: Modal Scroll Boundaries

1. Open modal with tall content
2. Scroll to top of modal content
3. Try to scroll past top (overscroll)
4. Verify NO background scroll happens
5. Scroll to bottom of modal content
6. Try to scroll past bottom
7. Verify NO background scroll happens

**Expected:** âœ… Modal scroll boundaries respected, no background scroll

### Test 2: Fast Scroll in Modal

1. Open modal with scrollable content
2. Rapidly scroll up and down in modal
3. Verify background page stays COMPLETELY still
4. No visual movement of background at all

**Expected:** âœ… Background absolutely locked during fast modal scroll

### Test 3: Modal Touch Edge Cases

1. Open modal
2. Touch near edge of modal (where background is visible)
3. Drag toward background area
4. Verify background does NOT scroll
5. Drag back into modal, continue scrolling modal

**Expected:** âœ… Edge touches don't affect background

### Test 4: Nested Scrollable Areas

1. Open modal with nested scrollable content (if any)
2. Scroll inner scrollable area
3. Scroll outer modal area
4. Verify both scroll independently
5. Verify background never scrolls

**Expected:** âœ… Nested scrolling works, background locked

### Test 5: Modal with Keyboard

1. Open modal with text input at bottom
2. Tap input (keyboard opens)
3. Input moves into view (normal behavior)
4. Try to scroll background while keyboard open
5. Verify background still locked
6. Close keyboard, close modal
7. Verify scroll position correct

**Expected:** âœ… Keyboard handling doesn't break lock

### Test 6: Modal Scroll Performance

1. Open modal with lots of content (100+ items)
2. Rapidly scroll through content
3. Verify smooth 60fps scrolling
4. Verify no jank or stuttering
5. Verify background still locked throughout

**Expected:** âœ… Smooth scrolling, no performance regression

**Success Criteria:**

- All 6 tests pass 100%
- Background scroll completely prevented in all scenarios
- Modal scrolling smooth and responsive
- No performance regression

**Risk Level:** MEDIUM (affects modal behavior)

**Estimated Duration:** 4-5 days

**Rollback Plan:** Feature flag flip

---

## Phase 5: Swipe Gesture Timing Improvements ðŸŸ  MEDIUM RISK

**Goal:** Fix swipe gesture preventDefault timing to eliminate page scroll during swipes.

**Changes:**

1. Improve axis detection timing
2. Add immediate touch-action enforcement
3. Fix preventDefault timing in useSwipe
4. Add gesture state reset on axis change
5. Improve pointer capture handling

**Feature Flag:** `flag:swipe-timing-fix`

**User-Level Test Cases:**

### Test 1: Horizontal Swipe No Scroll

1. Find swipeable card
2. Start horizontal swipe
3. Verify page does NOT scroll vertically AT ALL during swipe
4. Complete swipe
5. Verify card swiped correctly

**Expected:** âœ… Zero vertical page scroll during horizontal swipe

### Test 2: Vertical Scroll No Swipe

1. Start vertical page scroll on area with swipeable cards
2. Verify cards do NOT trigger swipe gesture
3. Verify smooth vertical scroll continues
4. Verify swipe gesture doesn't activate

**Expected:** âœ… Vertical scroll doesn't trigger swipes

### Test 3: Diagonal Gesture Handling

1. Start touch at 45-degree angle (diagonal)
2. Move horizontally (intended swipe)
3. Verify axis locks quickly to horizontal
4. Verify no vertical scroll happens
5. Complete swipe

**Expected:** âœ… Quick axis detection, no scroll

### Test 4: Gesture Switching

1. Start vertical scroll
2. Mid-gesture, switch to horizontal swipe
3. Verify vertical scroll stops immediately
4. Verify horizontal swipe activates
5. Complete swipe

**Expected:** âœ… Smooth gesture switching, no conflicts

### Test 5: Fast Swipes

1. Perform very fast horizontal swipe
2. Verify swipe registers correctly
3. Verify no page scroll occurs
4. Verify smooth animation

**Expected:** âœ… Fast swipes work perfectly, no scroll

### Test 6: Multiple Swipes Rapidly

1. Swipe card left
2. Immediately swipe another card right
3. Verify both swipes register correctly
4. Verify no page scroll between swipes

**Expected:** âœ… Rapid swipes don't cause scroll

**Success Criteria:**

- All 6 tests pass 100%
- Zero vertical scroll during ANY horizontal swipe
- Smooth gesture detection and execution
- No performance regression

**Risk Level:** MEDIUM (affects swipe behavior)

**Estimated Duration:** 3-4 days

**Rollback Plan:** Feature flag flip

---

## Phase 6: Pull-to-Refresh Improvements ðŸŸ¡ LOW-MEDIUM RISK

**Goal:** Fix pull-to-refresh scroll detection and preventDefault reliability.

**Changes:**

1. Improve container scroll position detection
2. Add negative scroll position handling
3. Fix RTL layout support
4. Improve preventDefault timing
5. Add scrollable container validation

**Feature Flag:** `flag:pull-refresh-fix`

**User-Level Test Cases:**

### Test 1: Standard Pull-to-Refresh

1. Scroll page to very top (scrollTop = 0)
2. Pull down to refresh
3. Verify refresh triggers at correct threshold
4. Verify page doesn't scroll during pull
5. Verify smooth release animation

**Expected:** âœ… Refresh works perfectly, no scroll interference

### Test 2: Edge Cases

1. Page at top, but content has padding (not exactly scrollTop = 0)
2. Pull to refresh
3. Verify refresh still works
4. Verify no scroll happens

**Expected:** âœ… Refresh works even with padding/margins

### Test 3: Rapid Pull

1. Quickly pull down from top
2. Verify refresh still triggers
3. Verify smooth handling
4. Verify no page scroll

**Expected:** âœ… Fast pulls work smoothly

### Test 4: Partial Pull Release

1. Pull down partially (not to threshold)
2. Release
3. Verify no refresh triggered
4. Verify page returns smoothly
5. Verify no scroll position change

**Expected:** âœ… Partial pulls handled correctly

### Test 5: Pull During Content Load

1. Start pull-to-refresh
2. While pulling, new content loads
3. Verify refresh completes correctly
4. Verify no scroll issues

**Expected:** âœ… Works correctly during content changes

**Success Criteria:**

- All 5 tests pass 100%
- Reliable refresh triggering
- No unwanted page scrolling
- Smooth user experience

**Risk Level:** LOW-MEDIUM (isolated feature)

**Estimated Duration:** 2-3 days

**Rollback Plan:** Feature flag flip

---

## Phase 7: CSS Touch-Action Consolidation ðŸŸ  MEDIUM RISK

**Goal:** Centralize and standardize touch-action CSS declarations without breaking existing behavior.

**Changes:**

1. Audit all touch-action declarations
2. Create centralized touch-action system
3. Remove inline style overrides
4. Document touch-action usage patterns
5. Add CSS custom properties for touch-action

**Feature Flag:** `flag:css-touch-action-consolidation`

**User-Level Test Cases:**

### Test 1: All Swipe Gestures

1. Test horizontal swipe on cards
2. Test vertical page scroll
3. Test modal scroll
4. Test pull-to-refresh
5. Verify ALL work exactly as before

**Expected:** âœ… Identical behavior to Phase 6

### Test 2: Touch Interactions

1. Tap buttons - should work instantly
2. Tap links - should navigate
3. Tap inputs - should focus
4. Long press - should work if applicable
5. All touch targets feel responsive

**Expected:** âœ… All touch interactions work perfectly

### Test 3: Performance

1. Rapid touch interactions
2. Verify no lag or jank
3. Verify smooth scrolling
4. Verify smooth swipe animations
5. Chrome DevTools shows no layout thrashing

**Expected:** âœ… Performance maintained or improved

### Test 4: Browser Consistency

1. Test on iOS Safari
2. Test on Chrome Android
3. Test on Firefox Mobile
4. Verify consistent behavior
5. Verify touch-action respected on all

**Expected:** âœ… Consistent across browsers

**Success Criteria:**

- All behaviors identical to Phase 6
- No CSS specificity conflicts
- Performance maintained
- Code cleaner and more maintainable

**Risk Level:** MEDIUM (CSS changes can have cascade effects)

**Estimated Duration:** 3-4 days

**Rollback Plan:** Feature flag flip or CSS revert

---

## Phase 8: Final Integration & Optimization âœ… FINAL PHASE

**Goal:** Remove feature flags, optimize, and prepare for production.

**Changes:**

1. Remove feature flags (all enabled by default)
2. Clean up temporary code
3. Optimize performance
4. Final documentation
5. Update changelog

**User-Level Test Cases:**

### Comprehensive Test Suite

Run ALL test cases from Phases 1-7 in sequence:

- [ ] Phase 1: All 6 scroll lock tests
- [ ] Phase 3: All 6 iOS tests
- [ ] Phase 4: All 6 modal isolation tests
- [ ] Phase 5: All 6 swipe gesture tests
- [ ] Phase 6: All 5 pull-to-refresh tests
- [ ] Phase 7: All 4 CSS consolidation tests

### Cross-Browser Testing

- [ ] iOS Safari (iPhone & iPad)
- [ ] Chrome Android
- [ ] Firefox Mobile
- [ ] Edge Mobile
- [ ] Desktop browsers (touch emulation)

### Performance Testing

- [ ] Lighthouse mobile score unchanged or improved
- [ ] Scroll performance metrics maintained
- [ ] No memory leaks
- [ ] No console errors

### Accessibility Testing

- [ ] Keyboard navigation works
- [ ] Screen reader compatibility
- [ ] Focus management correct
- [ ] No keyboard traps

**Success Criteria:**

- 100% of all test cases pass
- All browsers tested and working
- Performance maintained or improved
- Documentation complete
- Ready for production merge

**Risk Level:** LOW (final cleanup)

**Estimated Duration:** 3-4 days

**Rollback Plan:** Branch revert if needed

---

## Overall Timeline

- **Phase 0:** 2-3 days (Foundation)
- **Phase 1:** 3-4 days (Scroll Lock Safety)
- **Phase 2:** 2-3 days (Touch Audit)
- **Phase 3:** 4-5 days (iOS Fixes)
- **Phase 4:** 4-5 days (Modal Isolation)
- **Phase 5:** 3-4 days (Swipe Timing)
- **Phase 6:** 2-3 days (Pull Refresh)
- **Phase 7:** 3-4 days (CSS Consolidation)
- **Phase 8:** 3-4 days (Final Integration)

**Total Estimated Duration:** 26-35 days (5-7 weeks)

---

## Risk Mitigation Strategy

1. **Feature Flags:** Every phase behind a flag
2. **Gradual Rollout:** Internal testing â†’ Beta users â†’ 10% â†’ 50% â†’ 100%
3. **Monitoring:** Track scroll-related errors, performance metrics
4. **Quick Rollback:** Single flag flip or commit revert
5. **User Feedback:** Collect feedback at each phase
6. **Automated Testing:** Prevent regressions

---

## Success Metrics

- Zero user-reported scroll/swipe issues
- All test cases passing 100%
- Performance metrics maintained
- Code maintainability improved
- Documentation complete

---

## Notes

- Do NOT skip phases
- Do NOT combine phases
- Do NOT proceed without passing all test cases
- Document all decisions and edge cases encountered
- Keep detailed changelog for each phase

```

# Hooks & Utilities
*2 file(s)*


## apps\web\src\lib\language.types.ts
```
export type Language = 'en' | 'es';

export interface LanguageStrings {
  // Navigation
  home: string;
  currentlyWatching: string;
  wantToWatch: string;
  watched: string;
  alreadyWatched: string;
  holidays: string;
  discovery: string;
  
  // Actions
  wantToWatchAction: string;
  currentlyWatchingAction: string;
  watchedAction: string;
  notInterestedAction: string;
  deleteAction: string;
  removeAction: string;
  reviewNotesAction: string;
  addTagAction: string;
  holidayAddAction: string;
  
  // Settings
  settings: string;
  general: string;
  notifications: string;
  layout: string;
  data: string;
  pro: string;
  about: string;
  
  // General Settings
  displayName: string;
  myStatistics: string;
  tvShows: string;
  movies: string;
  notInterestedManagement: string;
  manageNotInterestedList: string;
  personalityLevel: string;
  regular: string;
  semiSarcastic: string;
  severelySarcastic: string;
  friendlyAndHelpful: string;
  aBitCheeky: string;
  maximumSass: string;
  preview: string;
  resetSystemToDefaults: string;
  
  // Layout Settings
  themePreference: string;
  dark: string;
  light: string;
  darkBackgroundWithLightText: string;
  lightBackgroundWithDarkText: string;
  basicCustomization: string;
  condensedView: string;
  enableEpisodeTracking: string;
  proFeatures: string;
  themePacksComingSoon: string;
  
  // My Lists
  myLists: string;
  enterListName: string;
  addToList: string;
  selectListFor: string;
  items: string;
  noListsYet: string;
  createFirstList: string;
  createNewList: string;
  listName: string;
  listDescription: string;
  default: string;
  edit: string;
  setAsDefault: string;
  delete: string;
  noListsCreated: string;
  createYourFirstList: string;
  listsUsed: string;
  confirmDeleteList: string;
  thisActionCannotBeUndone: string;
  save: string;
  cancel: string;
  darkThemeDescription: string;
  lightThemeDescription: string;
  
  // Additional My Lists
  enterNewName: string;
  rename: string;
  addItemsFromSearchOrDiscovery: string;
  createListsToOrganize: string;
  maxListsReached: string;
  upgradeForMoreLists: string;
  upgradeToPro: string;
  proUpgradeComingSoon: string;
  itemAlreadyExists: string;
  alreadyInList: string;
  confirmMoveToList: string;
  moveToList: string;
  
  // Notifications
  notificationTypes: string;
  upcomingEpisodeAlerts: string;
  weeklyDiscover: string;
  monthlyStatsDigest: string;
  alertConfiguration: string;
  advancedNotificationByLeadTime: string;
  pickTheList: string;
  
  // Data Management
  standardDataManagement: string;
  shareList: string;
  chooseListsAndShowsToShare: string;
  generatesCopyPasteableFormattedList: string;
  backupSystem: string;
  exportAllPersonalData: string;
  import: string;
  importPreviouslyExportedData: string;
  resetAllData: string;
  restoreSystemToDefaults: string;
  advancedSharingOptions: string;
  
  // Pro Features
  proManagement: string;
  unlockProFeatures: string;
  paymentPromptNotImplemented: string;
  proFeatureList: string;
  alertConfigurationDetails: string;
  hourlyConfig: string;
  themePacks: string;
  holidayAndMovieThemes: string;
  socialFeatures: string;
  flickwordTriviaSharedWatchlists: string;
  bloopersBehindTheScenes: string;
  activatesButtonOnShowCards: string;
  additionalFeaturesTBD: string;
  
  // About
  informationSections: string;
  aboutUniqueForYou: string;
  aboutTheCreators: string;
  aboutTheApp: string;
  shareYourThoughts: string;
  feedbackQuotesForMarquee: string;
  clipsForHomePagePlayer: string;
  venting: string;
  
  // Authentication
  signIn: string;
  signOut: string;
  signInHere: string;
  clickToSignOut: string;
  clickToSignIn: string;
  signedInAs: string;
  signInWithGoogle: string;
  signInWithApple: string;
  signInWithEmail: string;
  signInDescription: string;
  welcomeToFlicklet: string;
  whatShouldWeCallYou: string;
  username: string;
  usernameRequired: string;
  usernameDescription: string;
  saving: string;
  skip: string;

  // Common
  close: string;
  confirm: string;
  areYouSure: string;
  comingSoon: string;
  notImplemented: string;
  
  // Home Rails
  yourShows: string;
  upNext: string;
  inTheatersNearYou: string;
  
  // Placeholders
  noShowsInCurrentlyWatching: string;
  addSomeFromSearchOrDiscovery: string;
  noUpcomingEpisodes: string;
  addTvShowsToWatchingList: string;
  noPoster: string;
  
  // Statistics
  currentlyWatchingCount: string;
  wantToWatchCount: string;
  watchedCount: string;
  totalCount: string;
  
  // Feedback Panel
  tellUsWhatToImprove: string;
  typeYourFeedback: string;
  sendFeedback: string;
  whatsComing: string;
  betterRecommendations: string;
  episodeUpNextWithDates: string;
  shareListsWithFriends: string;
  
  // Theater Info
  yourLocalTheater: string;
  
  // Header
  logIn: string;
  logOut: string;
  guest: string;
  
  // Search Results
  noSynopsisAvailable: string;
  opensInTmdb: string;
  searchFailed: string;
  
  // Personality Messages
  procrastinatingProductively: string;
  curatingYourIndecision: string;
  becauseTimeIsAnIllusion: string;
  cinemaNowWithCommitmentIssues: string;
  yourBacklogCalledItsGrowing: string;
  
  // Confirmation Messages
  areYouSureChangeDisplayName: string;
  thisWillUpdateYourProfile: string;
  areYouSureResetSettings: string;
  
  // Language Labels
  language: string;
  english: string;
  spanish: string;
  
  // Home Page Sections
  community: string;
  forYou: string;
  feedback: string;
  
  // Games
  flickword: string;
  flickword_tagline: string;
  daily_trivia: string;
  daily_trivia_tagline: string;
  play_now: string;
  close_game: string;
  games: string;
  won: string;
  lost: string;
  streak: string;
  best: string;
  win_percent: string;
  played: string;
  accuracy: string;
  
  // Theater
  detectingLocation: string;
  locationUnavailable: string;
  enableLocation: string;
  hideShowtimes: string;
  findShowtimes: string;
  loadingTheaters: string;
  noTheatersFound: string;
  kmAway: string;
  hideTimes: string;
  showTimes: string;
  todaysShowtimes: string;
  
  // Personality
  hasExquisiteTaste: string;
  definitelyNotProcrastinating: string;
  breaksForPopcornOnly: string;
  curatesChaosLikeAPro: string;
  
  // Community Player
  community_player_placeholder: string;
  
  // Data Management
  dataManagementComingSoon: string;
  
  // Rail Titles
  drama: string;
  comedy: string;
  horror: string;
  nowPlaying: string;
  
  // Search
  searchPlaceholder: string;
  allGenres: string;
  action: string;
  search: string;
  clear: string;
  
  // Marquee Controls
  showMarquee: string;
  hideMarquee: string;
  
  // Marquee Messages
  marqueeMessage1: string;
  marqueeMessage2: string;
  marqueeMessage3: string;
  marqueeMessage4: string;
  marqueeMessage5: string;
}

```

## apps\web\src\lib\translations.ts
```
import type { Language, LanguageStrings } from './language.types';

const TRANSLATIONS: Record<Language, LanguageStrings> = {
  en: {
    // Navigation
    home: 'Home',
    currentlyWatching: 'Currently Watching',
    wantToWatch: 'Want to Watch',
    watched: 'Watched',
    alreadyWatched: 'Already Watched',
    holidays: 'Holidays',
    discovery: 'Discovery',
    
    // Actions
    wantToWatchAction: 'Want to Watch',
    currentlyWatchingAction: 'Currently Watching',
    watchedAction: 'Watched',
    notInterestedAction: 'Not Interested',
    deleteAction: 'Delete',
    removeAction: 'Remove',
    reviewNotesAction: 'Review/Notes',
    addTagAction: 'Add Tag',
    holidayAddAction: 'Holiday +',
    
    // Settings
    settings: 'Settings',
    general: 'General',
    notifications: 'Notifications',
    layout: 'Layout',
    data: 'Data',
    pro: 'Pro',
    about: 'About',
    
    // General Settings
    displayName: 'Display Name',
    myStatistics: 'My Statistics',
    tvShows: 'TV Shows',
    movies: 'Movies',
    notInterestedManagement: 'Not Interested Management',
    manageNotInterestedList: 'Manage Not Interested List',
    personalityLevel: 'Personality Level',
    regular: 'Regular',
    semiSarcastic: 'Semi-sarcastic',
    severelySarcastic: 'Severely sarcastic',
    friendlyAndHelpful: 'Friendly and helpful',
    aBitCheeky: 'A bit cheeky',
    maximumSass: 'Maximum sass',
    preview: 'Preview',
    resetSystemToDefaults: 'Reset System to Defaults',
    
    // Layout Settings
    themePreference: 'Theme Preference',
    dark: 'Dark',
    light: 'Light',
    darkBackgroundWithLightText: 'Dark background with light text',
    lightBackgroundWithDarkText: 'Light background with dark text',
    basicCustomization: 'Basic Customization',
    condensedView: 'Condensed View',
    enableEpisodeTracking: 'Enable Episode Tracking',
    proFeatures: 'Pro Features',
    themePacksComingSoon: 'Theme packs coming soon...',
    
    // My Lists
    myLists: 'My Lists',
    enterListName: 'Enter list name:',
    addToList: 'Add to List',
    selectListFor: 'Select a list for',
    items: 'items',
    noListsYet: 'No lists created yet',
    createFirstList: 'Create Your First List',
    createNewList: 'Create New List',
    listName: 'List name',
    listDescription: 'List description (optional)',
    default: 'Default',
    edit: 'Edit',
    setAsDefault: 'Set as Default',
    delete: 'Delete',
    noListsCreated: 'No lists created yet',
    createYourFirstList: 'Create Your First List',
    listsUsed: 'Lists used',
    confirmDeleteList: 'Are you sure you want to delete',
    thisActionCannotBeUndone: 'This action cannot be undone.',
    save: 'Save',
    cancel: 'Cancel',
    darkThemeDescription: 'Dark background with light text',
    lightThemeDescription: 'Light background with dark text',
    
  // Additional My Lists
  enterNewName: 'Enter new name:',
  rename: 'Rename',
  addItemsFromSearchOrDiscovery: 'Add items from search or discovery',
  createListsToOrganize: 'Create lists to organize your favorite shows and movies',
  maxListsReached: 'Maximum lists reached',
  upgradeForMoreLists: 'Upgrade to Pro for more lists',
  upgradeToPro: 'Upgrade to Pro',
  proUpgradeComingSoon: 'Pro upgrade coming soon!',
  itemAlreadyExists: 'Item Already Exists',
  alreadyInList: 'is already in',
  confirmMoveToList: 'Do you want to move it to the selected list?',
  moveToList: 'Move to List',
    
    // Notifications
    notificationTypes: 'Notification Types',
    upcomingEpisodeAlerts: 'Upcoming episode alerts',
    weeklyDiscover: 'Weekly discover',
    monthlyStatsDigest: 'Monthly stats digest',
    alertConfiguration: 'Alert Configuration (Pro)',
    advancedNotificationByLeadTime: 'Advanced notification by lead time in hours',
    pickTheList: 'Pick the list (currently watching or want to watch)',
    
    // Data Management
    standardDataManagement: 'Standard Data Management',
    shareList: 'Share List',
    chooseListsAndShowsToShare: 'Choose lists and shows to share',
    generatesCopyPasteableFormattedList: 'Generates copy/pasteable formatted list with Flicklet branding and link',
    backupSystem: 'Backup System (JSON)',
    exportAllPersonalData: 'Export all personal data',
    import: 'Import (JSON)',
    importPreviouslyExportedData: 'Import previously exported data',
    resetAllData: 'Reset All Data',
    restoreSystemToDefaults: 'Restore system to defaults',
    advancedSharingOptions: 'Advanced sharing options',
    
    // Pro Features
    proManagement: 'Pro Management',
    unlockProFeatures: 'Unlock pro features button (payment prompt - not implemented)',
    paymentPromptNotImplemented: 'Payment prompt - not implemented',
    proFeatureList: 'Pro feature list and descriptions',
    alertConfigurationDetails: 'Alert configuration details (hourly config)',
    hourlyConfig: 'Hourly config',
    themePacks: 'Theme packs (holiday and movie themes - not implemented)',
    holidayAndMovieThemes: 'Holiday and movie themes - not implemented',
    socialFeatures: 'Social features (FlickWord, Trivia, shared watchlists among friends)',
    flickwordTriviaSharedWatchlists: 'FlickWord, Trivia, shared watchlists among friends',
    bloopersBehindTheScenes: 'Bloopers/Behind the scenes (activates button on show cards)',
    activatesButtonOnShowCards: 'Activates button on show cards',
    additionalFeaturesTBD: 'Additional features TBD',
    
    // About
    informationSections: 'Information Sections',
    aboutUniqueForYou: 'About unique for you',
    aboutTheCreators: 'About the creators',
    aboutTheApp: 'About the app',
    shareYourThoughts: 'Share your thoughts (feedback, quotes for marquee, clips for home page player, venting, etc.)',
    feedbackQuotesForMarquee: 'Feedback, quotes for marquee, clips for home page player, venting, etc.',
    clipsForHomePagePlayer: 'Clips for home page player',
    venting: 'Venting',
    
    // Authentication
    signIn: 'Sign In',
    signOut: 'Sign Out',
    signInHere: 'Sign in here',
    clickToSignOut: 'Click to sign out',
    clickToSignIn: 'Click to sign in',
    signedInAs: 'Signed in as',
    signInWithGoogle: 'Sign in with Google',
    signInWithApple: 'Sign in with Apple',
    signInWithEmail: 'Sign in with Email',
    signInDescription: 'Sign in to sync your lists across devices',
    welcomeToFlicklet: 'Welcome to Flicklet!',
    whatShouldWeCallYou: 'What should we call you?',
    username: 'Username',
    usernameRequired: 'Username is required',
    usernameDescription: 'This will be used for personalized messages',
    saving: 'Saving...',
    skip: 'Skip',

    // Common
    close: 'Close',
    confirm: 'Confirm',
    areYouSure: 'Are you sure?',
    comingSoon: 'Coming soon...',
    notImplemented: 'Not implemented',
    
    // Home Rails
    yourShows: 'Your Shows',
    upNext: 'Up Next',
    inTheatersNearYou: 'In Theaters Near You',
    
    // Placeholders
    noShowsInCurrentlyWatching: 'No shows in your currently watching list. Add some from search or discovery!',
    addSomeFromSearchOrDiscovery: 'Add some from search or discovery!',
    noUpcomingEpisodes: 'No upcoming episodes. Add TV shows to your watching list to see when new episodes air!',
    addTvShowsToWatchingList: 'Add TV shows to your watching list to see when new episodes air!',
    noPoster: 'No poster',
    
    // Statistics
    currentlyWatchingCount: 'Currently Watching',
    wantToWatchCount: 'Want to Watch',
    watchedCount: 'Watched',
    totalCount: 'Total',
    
    // Feedback Panel
    tellUsWhatToImprove: 'Tell us what to improve',
    typeYourFeedback: 'Type your feedback...',
    sendFeedback: 'Send Feedback',
    whatsComing: 'What\'s coming',
    betterRecommendations: 'Better recommendations',
    episodeUpNextWithDates: 'Episode "Up Next" with dates',
    shareListsWithFriends: 'Share lists with friends',
    
    // Theater Info
    yourLocalTheater: 'Your Local Theater',
    
    // Header
    logIn: 'Log in',
    logOut: 'Log out',
    guest: 'Guest',
    
    // Search Results
    noSynopsisAvailable: 'No synopsis available.',
    opensInTmdb: 'Opens in TMDB',
    searchFailed: 'Search failed',
    
    // Personality Messages
    procrastinatingProductively: 'Procrastinating productively.',
    curatingYourIndecision: 'Curating your indecision.',
    becauseTimeIsAnIllusion: 'Because time is an illusion.',
    cinemaNowWithCommitmentIssues: 'Cinema, now with commitment issues.',
    yourBacklogCalledItsGrowing: 'Your backlog called. It\'s growing.',
    
    // Confirmation Messages
    areYouSureChangeDisplayName: 'Are you sure you want to change your display name?',
    thisWillUpdateYourProfile: 'This will update your profile.',
    areYouSureResetSettings: 'Are you sure you want to reset all settings to defaults?',
    
    // Language Labels
    language: 'Language',
    english: 'English',
    spanish: 'EspaÃ±ol',
    
    // Home Page Sections
    community: 'Community',
    forYou: 'For you',
    feedback: 'Feedback',
    
    // Games
    flickword: 'FlickWord',
    flickword_tagline: 'Wordle-style daily word play',
    daily_trivia: 'Daily Trivia',
    daily_trivia_tagline: 'Fresh question, new bragging rights',
    play_now: 'Play Now',
    close_game: 'Close Game',
    games: 'Games',
    won: 'Won',
    lost: 'Lost',
    streak: 'Streak',
    best: 'Best',
    win_percent: 'Win %',
    played: 'Played',
    accuracy: 'Accuracy',
    
    // Theater
    detectingLocation: 'Detecting your location...',
    locationUnavailable: 'Location unavailable',
    enableLocation: 'Enable location',
    hideShowtimes: 'Hide',
    findShowtimes: 'Find',
    loadingTheaters: 'Loading theaters...',
    noTheatersFound: 'No theaters found nearby. Try expanding your search radius.',
    kmAway: 'km away',
    hideTimes: 'Hide',
    showTimes: 'Show',
    todaysShowtimes: 'Today\'s Showtimes:',
    
    // Rail Titles
    drama: 'Drama',
    comedy: 'Comedy',
    horror: 'Horror',
    nowPlaying: 'Now Playing',
    
    // Personality
    hasExquisiteTaste: 'Has exquisite taste',
    definitelyNotProcrastinating: 'Definitely not procrastinating',
    breaksForPopcornOnly: 'Breaks for popcorn only',
    curatesChaosLikeAPro: 'Curates chaos like a pro',
    
    // Community Player
    community_player_placeholder: 'Community content coming soon',
    
    // Data Management
    dataManagementComingSoon: 'Data management features coming soon',
    
    // Search
    searchPlaceholder: 'Search movies, shows, peopleâ€¦',
    allGenres: 'All genres',
    action: 'Action',
    search: 'Search',
    clear: 'Clear',
    
    // Marquee Controls
    showMarquee: 'Show marquee',
    hideMarquee: 'Hide',
    
    // Marquee Messages
    marqueeMessage1: 'I\'m sorry, Dave. I\'m afraid I can\'t do that.',
    marqueeMessage2: 'Roads? Where we\'re going, we don\'t need roads.',
    marqueeMessage3: 'Houston, we have a problem.',
    marqueeMessage4: 'May the odds be ever in your favor.',
    marqueeMessage5: 'I\'ll be back.',
    
    // Theater & Location
  },
  
  es: {
    // Navigation
    home: 'Inicio',
    currentlyWatching: 'Viendo Ahora',
    wantToWatch: 'Quiero Ver',
    watched: 'Visto',
    alreadyWatched: 'Ya Visto',
    holidays: 'Fiestas',
    discovery: 'Descubrir',
    
    // Actions
    wantToWatchAction: 'Quiero Ver',
    currentlyWatchingAction: 'Viendo Ahora',
    watchedAction: 'Visto',
    notInterestedAction: 'No Me Interesa',
    deleteAction: 'Eliminar',
    removeAction: 'Quitar',
    reviewNotesAction: 'ReseÃ±a/Notas',
    addTagAction: 'Agregar Etiqueta',
    holidayAddAction: 'Fiesta +',
    
    // Settings
    settings: 'ConfiguraciÃ³n',
    general: 'General',
    notifications: 'Notificaciones',
    layout: 'DiseÃ±o',
    data: 'Datos',
    pro: 'Pro',
    about: 'Acerca De',
    
    // General Settings
    displayName: 'Nombre de Pantalla',
    myStatistics: 'Mis EstadÃ­sticas',
    tvShows: 'Programas de TV',
    movies: 'PelÃ­culas',
    notInterestedManagement: 'GestiÃ³n de No Me Interesa',
    manageNotInterestedList: 'Gestionar Lista de No Me Interesa',
    personalityLevel: 'Nivel de Personalidad',
    regular: 'Regular',
    semiSarcastic: 'Semi-sarcÃ¡stico',
    severelySarcastic: 'Severamente sarcÃ¡stico',
    friendlyAndHelpful: 'Amigable y Ãºtil',
    aBitCheeky: 'Un poco descarado',
    maximumSass: 'MÃ¡ximo descaro',
    preview: 'Vista Previa',
    resetSystemToDefaults: 'Restablecer Sistema a Valores Predeterminados',
    
    // Layout Settings
    themePreference: 'Preferencia de Tema',
    dark: 'Oscuro',
    light: 'Claro',
    darkBackgroundWithLightText: 'Fondo oscuro con texto claro',
    lightBackgroundWithDarkText: 'Fondo claro con texto oscuro',
    basicCustomization: 'PersonalizaciÃ³n BÃ¡sica',
    condensedView: 'Vista Condensada',
    enableEpisodeTracking: 'Habilitar Seguimiento de Episodios',
    proFeatures: 'CaracterÃ­sticas Pro',
    themePacksComingSoon: 'Paquetes de temas prÃ³ximamente...',
    
    // My Lists
    myLists: 'Mis Listas',
    enterListName: 'Ingresa nombre de lista:',
    addToList: 'Agregar a Lista',
    selectListFor: 'Selecciona una lista para',
    items: 'elementos',
    noListsYet: 'AÃºn no hay listas creadas',
    createFirstList: 'Crea Tu Primera Lista',
    createNewList: 'Crear Nueva Lista',
    listName: 'Nombre de lista',
    listDescription: 'DescripciÃ³n de lista (opcional)',
    default: 'Predeterminada',
    edit: 'Editar',
    setAsDefault: 'Establecer como Predeterminada',
    delete: 'Eliminar',
    noListsCreated: 'AÃºn no hay listas creadas',
    createYourFirstList: 'Crea Tu Primera Lista',
    listsUsed: 'Listas usadas',
    confirmDeleteList: 'Â¿EstÃ¡s seguro de que quieres eliminar',
    thisActionCannotBeUndone: 'Esta acciÃ³n no se puede deshacer.',
    save: 'Guardar',
    cancel: 'Cancelar',
    darkThemeDescription: 'Fondo oscuro con texto claro',
    lightThemeDescription: 'Fondo claro con texto oscuro',
    
  // Additional My Lists
  enterNewName: 'Ingresa nuevo nombre:',
  rename: 'Renombrar',
  addItemsFromSearchOrDiscovery: 'Agregar elementos desde bÃºsqueda o descubrimiento',
  createListsToOrganize: 'Crea listas para organizar tus programas y pelÃ­culas favoritas',
  maxListsReached: 'MÃ¡ximo de listas alcanzado',
  upgradeForMoreLists: 'Actualiza a Pro para mÃ¡s listas',
  upgradeToPro: 'Actualizar a Pro',
  proUpgradeComingSoon: 'Â¡ActualizaciÃ³n a Pro prÃ³ximamente!',
  itemAlreadyExists: 'El Elemento Ya Existe',
  alreadyInList: 'ya estÃ¡ en',
  confirmMoveToList: 'Â¿Quieres moverlo a la lista seleccionada?',
  moveToList: 'Mover a Lista',
    
    // Notifications
    notificationTypes: 'Tipos de NotificaciÃ³n',
    upcomingEpisodeAlerts: 'Alertas de episodios prÃ³ximos',
    weeklyDiscover: 'Descubrimiento semanal',
    monthlyStatsDigest: 'Resumen de estadÃ­sticas mensuales',
    alertConfiguration: 'ConfiguraciÃ³n de Alertas (Pro)',
    advancedNotificationByLeadTime: 'NotificaciÃ³n avanzada por tiempo de anticipaciÃ³n en horas',
    pickTheList: 'Elige la lista (viendo ahora o quiero ver)',
    
    // Data Management
    standardDataManagement: 'GestiÃ³n de Datos EstÃ¡ndar',
    shareList: 'Compartir Lista',
    chooseListsAndShowsToShare: 'Elige listas y programas para compartir',
    generatesCopyPasteableFormattedList: 'Genera lista formateada copiable/pegable con marca Flicklet y enlace',
    backupSystem: 'Sistema de Respaldo (JSON)',
    exportAllPersonalData: 'Exportar todos los datos personales',
    import: 'Importar (JSON)',
    importPreviouslyExportedData: 'Importar datos previamente exportados',
    resetAllData: 'Restablecer Todos los Datos',
    restoreSystemToDefaults: 'Restaurar sistema a valores predeterminados',
    advancedSharingOptions: 'Opciones de compartir avanzadas',
    
    // Pro Features
    proManagement: 'GestiÃ³n Pro',
    unlockProFeatures: 'BotÃ³n de desbloquear caracterÃ­sticas pro (prompt de pago - no implementado)',
    paymentPromptNotImplemented: 'Prompt de pago - no implementado',
    proFeatureList: 'Lista de caracterÃ­sticas pro y descripciones',
    alertConfigurationDetails: 'Detalles de configuraciÃ³n de alertas (configuraciÃ³n por horas)',
    hourlyConfig: 'ConfiguraciÃ³n por horas',
    themePacks: 'Paquetes de temas (temas de fiestas y pelÃ­culas - no implementado)',
    holidayAndMovieThemes: 'Temas de fiestas y pelÃ­culas - no implementado',
    socialFeatures: 'CaracterÃ­sticas sociales (FlickWord, Trivia, listas compartidas entre amigos)',
    flickwordTriviaSharedWatchlists: 'FlickWord, Trivia, listas compartidas entre amigos',
    bloopersBehindTheScenes: 'Bloopers/DetrÃ¡s de escena (activa botÃ³n en tarjetas de programas)',
    activatesButtonOnShowCards: 'Activa botÃ³n en tarjetas de programas',
    additionalFeaturesTBD: 'CaracterÃ­sticas adicionales por determinar',
    
    // About
    informationSections: 'Secciones de InformaciÃ³n',
    aboutUniqueForYou: 'Acerca de Ãºnico para ti',
    aboutTheCreators: 'Acerca de los creadores',
    aboutTheApp: 'Acerca de la aplicaciÃ³n',
    shareYourThoughts: 'Comparte tus pensamientos (comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.)',
    feedbackQuotesForMarquee: 'Comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.',
    clipsForHomePagePlayer: 'Clips para reproductor de pÃ¡gina principal',
    venting: 'Desahogo',
    
    // Authentication
    signIn: 'Iniciar SesiÃ³n',
    signOut: 'Cerrar SesiÃ³n',
    signInHere: 'Inicia sesiÃ³n aquÃ­',
    clickToSignOut: 'Haz clic para cerrar sesiÃ³n',
    clickToSignIn: 'Haz clic para iniciar sesiÃ³n',
    signedInAs: 'Conectado como',
    signInWithGoogle: 'Iniciar sesiÃ³n con Google',
    signInWithApple: 'Iniciar sesiÃ³n con Apple',
    signInWithEmail: 'Iniciar sesiÃ³n con Email',
    signInDescription: 'Inicia sesiÃ³n para sincronizar tus listas entre dispositivos',
    welcomeToFlicklet: 'Â¡Bienvenido a Flicklet!',
    whatShouldWeCallYou: 'Â¿CÃ³mo deberÃ­amos llamarte?',
    username: 'Nombre de usuario',
    usernameRequired: 'El nombre de usuario es requerido',
    usernameDescription: 'Esto se usarÃ¡ para mensajes personalizados',
    saving: 'Guardando...',
    skip: 'Omitir',

    // Common
    close: 'Cerrar',
    confirm: 'Confirmar',
    areYouSure: 'Â¿EstÃ¡s seguro?',
    comingSoon: 'PrÃ³ximamente...',
    notImplemented: 'No implementado',
    
    // Home Rails
    yourShows: 'Tus Programas',
    upNext: 'PrÃ³ximamente',
    inTheatersNearYou: 'En Cines Cerca de Ti',
    
    // Placeholders
    noShowsInCurrentlyWatching: 'No hay programas en tu lista de viendo ahora. Â¡Agrega algunos desde bÃºsqueda o descubrimiento!',
    addSomeFromSearchOrDiscovery: 'Â¡Agrega algunos desde bÃºsqueda o descubrimiento!',
    noUpcomingEpisodes: 'No hay episodios prÃ³ximos. Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!',
    addTvShowsToWatchingList: 'Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!',
    noPoster: 'Sin pÃ³ster',
    
    // Statistics
    currentlyWatchingCount: 'Viendo Ahora',
    wantToWatchCount: 'Quiero Ver',
    watchedCount: 'Visto',
    totalCount: 'Total',
    
    // Feedback Panel
    tellUsWhatToImprove: 'Dinos quÃ© mejorar',
    typeYourFeedback: 'Escribe tu comentario...',
    sendFeedback: 'Enviar Comentario',
    whatsComing: 'Lo que viene',
    betterRecommendations: 'Mejores recomendaciones',
    episodeUpNextWithDates: 'Episodio "PrÃ³ximo" con fechas',
    shareListsWithFriends: 'Compartir listas con amigos',
    
    // Theater Info
    yourLocalTheater: 'Tu Cine Local',
    
    // Header
    logIn: 'Iniciar sesiÃ³n',
    logOut: 'Cerrar sesiÃ³n',
    guest: 'Invitado',
    
    // Search Results
    noSynopsisAvailable: 'Sin sinopsis disponible.',
    opensInTmdb: 'Abre en TMDB',
    searchFailed: 'BÃºsqueda fallida',
    
    // Personality Messages
    procrastinatingProductively: 'Procrastinando productivamente.',
    curatingYourIndecision: 'Curando tu indecisiÃ³n.',
    becauseTimeIsAnIllusion: 'Porque el tiempo es una ilusiÃ³n.',
    cinemaNowWithCommitmentIssues: 'Cine, ahora con problemas de compromiso.',
    yourBacklogCalledItsGrowing: 'Tu lista pendiente llamÃ³. EstÃ¡ creciendo.',
    
    // Confirmation Messages
    areYouSureChangeDisplayName: 'Â¿EstÃ¡s seguro de que quieres cambiar tu nombre de pantalla?',
    thisWillUpdateYourProfile: 'Esto actualizarÃ¡ tu perfil.',
    areYouSureResetSettings: 'Â¿EstÃ¡s seguro de que quieres restablecer todas las configuraciones a los valores predeterminados?',
    
    // Language Labels
    language: 'Idioma',
    english: 'English',
    spanish: 'EspaÃ±ol',
    
    // Home Page Sections
    community: 'Comunidad',
    forYou: 'Para ti',
    feedback: 'Comentarios',
    
    // Games
    flickword: 'FlickWord',
    flickword_tagline: 'Juego de palabras diario estilo Wordle',
    daily_trivia: 'Trivia Diaria',
    daily_trivia_tagline: 'Pregunta fresca, nuevos derechos de presumir',
    play_now: 'Jugar Ahora',
    close_game: 'Cerrar Juego',
    games: 'Juegos',
    won: 'Ganados',
    lost: 'Perdidos',
    streak: 'Racha',
    best: 'Mejor',
    win_percent: '% Ganados',
    played: 'Jugados',
    accuracy: 'PrecisiÃ³n',
    
    // Theater
    detectingLocation: 'Detectando tu ubicaciÃ³n...',
    locationUnavailable: 'UbicaciÃ³n no disponible',
    enableLocation: 'Habilitar ubicaciÃ³n',
    hideShowtimes: 'Ocultar',
    findShowtimes: 'Buscar',
    loadingTheaters: 'Cargando cines...',
    noTheatersFound: 'No se encontraron cines cerca. Intenta expandir tu radio de bÃºsqueda.',
    kmAway: 'km de distancia',
    hideTimes: 'Ocultar',
    showTimes: 'Mostrar',
    todaysShowtimes: 'Horarios de Hoy:',
    
    // Personality
    hasExquisiteTaste: 'Tiene gusto exquisito',
    definitelyNotProcrastinating: 'Definitivamente no procrastinando',
    breaksForPopcornOnly: 'Descansos solo para palomitas',
    curatesChaosLikeAPro: 'CuradurÃ­a del caos como profesional',
    
    // Community Player
    community_player_placeholder: 'Contenido comunitario prÃ³ximamente',
    
    // Data Management
    dataManagementComingSoon: 'Funciones de gestiÃ³n de datos prÃ³ximamente',
    
    // Rail Titles
    drama: 'Drama',
    comedy: 'Comedia',
    horror: 'Terror',
    nowPlaying: 'En Cartelera',
    
    // Search
    searchPlaceholder: 'Buscar pelÃ­culas, programas, personasâ€¦',
    allGenres: 'Todos los gÃ©neros',
    action: 'AcciÃ³n',
    search: 'Buscar',
    clear: 'Limpiar',
    
    // Marquee Controls
    showMarquee: 'Mostrar marquesina',
    hideMarquee: 'Ocultar',
    
    // Marquee Messages
    marqueeMessage1: 'Lo siento, Dave. Me temo que no puedo hacer eso.',
    marqueeMessage2: 'Â¿Carreteras? A donde vamos, no necesitamos carreteras.',
    marqueeMessage3: 'Houston, tenemos un problema.',
    marqueeMessage4: 'Que la suerte estÃ© siempre de tu lado.',
    marqueeMessage5: 'VolverÃ©.',
    
    // Theater & Location
  },
};

export default TRANSLATIONS;

```

# Other
*32 file(s)*


## _legacy_v1\www\archive\js\inline-script-11.js
```
// Helper to size an iframe to its modal body
function sizeModalIframe(modalId, iframeEl) {
  const modal = document.getElementById(modalId);
  if (!modal || !iframeEl) return;
  const body = modal.querySelector('.gm-body');
  if (!body) return;

  /* Height now managed by card system - no forced heights */
}

// Patch FlickWordBridge to use dynamic sizing
(function patchFlickWordSizing() {
  if (!window.FlickWordBridge) return;
  const _mount = window.FlickWordBridge.mount;
  window.FlickWordBridge.mount = async function (rootSel) {
    const handle = await _mount.call(window.FlickWordBridge, rootSel);

    // Try to find the iframe we just created
    const root = typeof rootSel === 'string' ? document.querySelector(rootSel) : rootSel;
    const iframe = root && (root.querySelector('iframe') || root.firstElementChild);

    // Initial size after next frame
    requestAnimationFrame(() => sizeModalIframe('modal-flickword', iframe));

    // Resize with window
    function onResize() {
      sizeModalIframe('modal-flickword', iframe);
    }
    window.addEventListener('resize', onResize);

    // Keep cleanup on destroy
    const _destroy = handle?.destroy;
    if (_destroy) {
      handle.destroy = function () {
        window.removeEventListener('resize', onResize);
        _destroy.call(handle);
      };
    }
    return handle;
  };
})();

```

## _legacy_v1\www\archive\js\inline-script-7.js
```
(function () {
  'use strict';

  console.log('ðŸ  Home Layout Guardrails loaded');

  // Immovable Home Layout Contract - Exact 6 Section Order
  const REQUIRED_HOME_SECTIONS = [
    'group-1-your-shows',
    'group-2-community',
    'group-3-for-you',
    'group-4-theaters',
    'group-5-feedback',
  ];

  // Runtime Order Assertion
  function assertHomeOrder() {
    const homeRoot = document.getElementById('homeSection');
    if (!homeRoot) {
      console.error('âŒ HOME ORDER VIOLATION: homeSection not found');
      return false;
    }

    const children = Array.from(homeRoot.children);
    const sectionIds = children.map((child) => child.id).filter((id) => id);

    console.log('ðŸ  Home sections found:', sectionIds);

    // Check if all required sections exist in correct order
    let orderViolation = false;
    REQUIRED_HOME_SECTIONS.forEach((requiredId, index) => {
      const foundIndex = sectionIds.indexOf(requiredId);
      if (foundIndex === -1) {
        console.error(`âŒ HOME ORDER VIOLATION: Missing required section "${requiredId}"`);
        orderViolation = true;
      } else if (foundIndex !== index) {
        console.error(
          `âŒ HOME ORDER VIOLATION: Section "${requiredId}" at position ${foundIndex}, expected ${index}`,
        );
        orderViolation = true;
      }
    });

    // Check for unexpected sections
    sectionIds.forEach((id, index) => {
      if (!REQUIRED_HOME_SECTIONS.includes(id)) {
        console.error(`âŒ HOME ORDER VIOLATION: Unexpected section "${id}" at position ${index}`);
        orderViolation = true;
      }
    });

    if (orderViolation) {
      console.error('âŒ HOME ORDER VIOLATION: Removing unexpected nodes');
      // Remove unexpected nodes
      children.forEach((child, index) => {
        if (!REQUIRED_HOME_SECTIONS.includes(child.id)) {
          console.log(`ðŸ—‘ï¸ Removing unexpected section: ${child.id}`);
          child.remove();
        }
      });
    }

    return !orderViolation;
  }

  // Purge Legacy Sections
  function purgeLegacySections() {
    const legacySelectors = [
      '#bingeMeter',
      '.stats',
      '#upcomingEpisodes',
      '#quote-flickword-container',
      '#quoteCard',
      '#randomQuoteCard',
      '#bingeBanner',
    ];

    legacySelectors.forEach((selector) => {
      const element = document.querySelector(selector);
      if (element) {
        console.log(`ðŸ—‘ï¸ Purging legacy section: ${selector}`);
        element.remove();
      }
    });
  }

  // Initialize Quote Bar - DISABLED: handled by marquee system
  function initQuoteBar() {
    const quoteBar = document.getElementById('quote-bar');
    if (!quoteBar) return;

    // Set loaded state and let marquee system handle the content
    quoteBar.setAttribute('data-state', 'loaded');
    quoteBar.style.display = 'block';
    quoteBar.classList.add('marquee-loaded');
    
    console.log('ðŸ’¬ Quote bar initialized - content handled by marquee system');
  }

  // Disable Auto-Inject Systems
  function disableAutoInjectSystems() {
    // Disable MP-Playlists v1
    if (window.FLAGS) {
      window.FLAGS.spotlight_enabled = false;
      window.FLAGS.quotes_enabled = false;
      window.FLAGS.curated_rows_auto_inject = false;
      window.FLAGS.personalized_rows_auto_inject = false;
    }

    // Disable Quote System
    if (window.ensureBlocks) {
      window.ensureBlocks = function () {
        return false;
      };
    }

    // Disable MP-Playlists v1 boot
    if (window.MP_PLAYLISTS_V1) {
      window.MP_PLAYLISTS_V1.enabled = false;
    }

    console.log('ðŸš« Auto-inject systems disabled');
  }

  // Override FlickWord mount point to target our specific container
  function overrideFlickWordMount() {
    // Override the findHomeMount function to target our FlickWord container
    window.findHomeMount = function () {
      const flickwordMount = document.querySelector('.flickword-mount');
      if (flickwordMount) {
        console.log('ðŸŽ¯ FlickWord mount found: .flickword-mount');
        return flickwordMount;
      }
      // Fallback to original home section
      const homeSection = document.querySelector('#homeSection');
      console.log('ðŸŽ¯ FlickWord mount fallback: #homeSection');
      return homeSection;
    };

    // FlickFact feature removed - no longer needed

    console.log('ðŸŽ¯ FlickWord system overridden for new layout');
  }

  // Handle player container resizing
  function handlePlayerResizing() {
    const communityContent = document.querySelector('.community-content');
    const communityLeft = document.querySelector('.community-left');
    const communityRight = document.querySelector('.community-right');

    if (!communityContent || !communityLeft || !communityRight) return;

    // Force recalculation of container sizes
    function resizeContainers() {
      // Trigger reflow
      communityContent.style.display = 'none';
      communityContent.offsetHeight; // Force reflow
      communityContent.style.display = 'flex';

      // Ensure proper sizing
      communityLeft.style.width = '100%';
      communityRight.style.width = '100%';

      console.log('ðŸ”„ Community containers resized');
    }

    // Resize on window resize
    window.addEventListener('resize', resizeContainers);

    // Resize when iframe loads
    const iframe = communityLeft.querySelector('iframe');
    if (iframe) {
      iframe.addEventListener('load', resizeContainers);
    }

    // Initial resize
    setTimeout(resizeContainers, 100);
  }

  // Initialize when DOM is ready
  function initHomeGuardrails() {
    console.log('ðŸ  Initializing Home Layout Guardrails...');

    // Disable auto-inject systems first
    disableAutoInjectSystems();

    // Purge legacy sections
    purgeLegacySections();

    // Initialize quote bar
    initQuoteBar();

    // Override FlickWord mount point
    overrideFlickWordMount();

    // Handle player container resizing
    handlePlayerResizing();

    // Initialize Community Games
    function initCommunityGames() {
      console.log('ðŸŽ® Initializing Community Games...');

      // Check if game scripts loaded
      console.log('ðŸŽ® Game script check:', {
        triviaScript: typeof window.FlickletTrivia !== 'undefined',
        flickwordScript: typeof window.flickword !== 'undefined',
        triviaTile: !!document.getElementById('triviaTile'),
        flickwordCard: !!document.getElementById('flickwordCard'),
      });

      // Try to manually trigger trivia if it exists
      if (typeof window.FlickletTrivia !== 'undefined') {
        console.log('ðŸŽ® FlickletTrivia found, checking for init function...');
        console.log('ðŸŽ® Available methods:', Object.keys(window.FlickletTrivia));
      }

      // Check if trivia is already loaded by the original script
      const triviaTile = document.getElementById('triviaTile');
      const questionEl = document.getElementById('triviaQuestion');
      const choicesEl = document.getElementById('triviaChoices');

      if (triviaTile && questionEl && choicesEl) {
        console.log('ðŸŽ® Trivia elements found:', {
          hasQuestion: !!questionEl.textContent,
          hasChoices: !!choicesEl.innerHTML,
          questionText: questionEl.textContent,
        });

        // If trivia is already loaded, just ensure it fits in the container
        if (questionEl.textContent && questionEl.textContent !== '') {
          console.log('ðŸŽ® Trivia already loaded by original script');
          // Apply compact styling to existing content
          questionEl.style.fontSize = '13px';
          questionEl.style.lineHeight = '1.3';
          questionEl.style.marginBottom = '8px';

          // Style existing choice buttons
          const existingButtons = choicesEl.querySelectorAll('button, li, div');
          existingButtons.forEach((btn) => {
            btn.style.padding = '6px 8px';
            btn.style.fontSize = '12px';
            btn.style.marginBottom = '4px';
            btn.style.borderRadius = '4px';
          });
        }
      }

      // The games should load automatically via their respective systems
      // FlickWord and Trivia are separate game systems that will populate their containers
      console.log('ðŸŽ® Community games containers ready');
    }

    // Trivia answer selection is handled by the trivia.js script
    // No need for a separate selectAnswer function here

    // Initialize games after a delay
    setTimeout(initCommunityGames, 2000);
    setTimeout(initCommunityGames, 5000);

    // Also try when DOM is fully ready
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(initCommunityGames, 1000);

      // Initialize theme system
      (function ensureTheme() {
        const k = 'flicklet-theme';
        const t = localStorage.getItem(k) || 'light';
        document.documentElement.setAttribute('data-theme', t);
        // Optional: wire buttons if present
        document.querySelectorAll('[data-set-theme]').forEach((btn) => {
          btn.addEventListener(
            'click',
            (e) => {
              const v = btn.getAttribute('data-set-theme');
              if (!v) return;
              localStorage.setItem(k, v);
              document.documentElement.setAttribute('data-theme', v);
            },
            { once: false },
          );
        });
      })();
    });

    // Assert order after a short delay to allow other scripts to run
    setTimeout(() => {
      const isValid = assertHomeOrder();
      if (isValid) {
        console.log('âœ… Home layout order validated');
      }
    }, 100);
  }

  // Run immediately and on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initHomeGuardrails);
  } else {
    initHomeGuardrails();
  }

  // Re-assert order after any major DOM changes
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'childList' && mutation.target.id === 'homeSection') {
        console.log('ðŸ  Home section DOM changed, re-asserting order...');
        setTimeout(assertHomeOrder, 50);
      }
    });
  });

  // Start observing when homeSection is available
  const checkHomeSection = setInterval(() => {
    const homeSection = document.getElementById('homeSection');
    if (homeSection) {
      observer.observe(homeSection, { childList: true, subtree: true });
      clearInterval(checkHomeSection);
    }
  }, 100);
})();

```

## _legacy_v1\www\archive\js\inline-script-8.js
```
// FlickWord Modal Functions
function openFlickWordModal() {
  console.log('ðŸŽ¯ Opening FlickWord modal');
  const modal = document.getElementById('flickwordModal');
  const frame = document.getElementById('flickwordFrame');

  if (modal && frame) {
    // Set today's date for the game
    const today = new Date().toISOString().split('T')[0];
    frame.src = `features/flickword-v2.html?date=${today}`;
    modal.style.display = 'block';

    // Focus management
    const closeBtn = modal.querySelector('.modal-close');
    if (closeBtn) closeBtn.focus();
  }
}

function closeFlickWordModal() {
  console.log('ðŸŽ¯ Closing FlickWord modal');
  const modal = document.getElementById('flickwordModal');
  const frame = document.getElementById('flickwordFrame');

  if (modal) {
    modal.style.display = 'none';
    if (frame) frame.src = '';
  }
}

// Update FlickWord teaser stats
function updateFlickWordStats() {
  const streakEl = document.querySelector('.flickword-teaser .streak');
  const bestEl = document.querySelector('.flickword-teaser .best');

  if (streakEl && bestEl) {
    const stats = JSON.parse(localStorage.getItem('flickword:stats') || '{}');
    streakEl.textContent = `Streak: ${stats.streak || 0}`;
    bestEl.textContent = `Best: ${stats.best || 0}`;
  }
}

// Initialize FlickWord teaser
function initFlickWordTeaser() {
  console.log('ðŸŽ¯ Initializing FlickWord teaser');
  updateFlickWordStats();

  // Listen for game results to update stats
  window.addEventListener('message', function (event) {
    if (event.data && event.data.type === 'flickword:result') {
      console.log('ðŸŽ¯ FlickWord result received:', event.data);
      updateFlickWordStats();
    }
  });
}

// Initialize when ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initFlickWordTeaser);
} else {
  initFlickWordTeaser();
}

```

## _legacy_v1\www\archive\js\inline-script-9.js
```
console.log('ðŸŽ® Script starting...');
(function () {
  console.log('ðŸŽ® Initializing Game Cards Modal System');
  const qs = (s, r = document) => r.querySelector(s);
  const qsa = (s, r = document) => Array.from(r.querySelectorAll(s));

  // Open/close helpers
  let lastOpener = null;
  function openModal(id, opener) {
    console.log('ðŸŽ® Opening modal:', id);
    const m = qs('#' + id);
    if (!m) {
      console.error('ðŸŽ® Modal not found:', id);
      return;
    }
    lastOpener = opener || document.activeElement;
    m.setAttribute('aria-hidden', 'false');
    console.log('ðŸŽ® Modal opened:', m.id, 'aria-hidden:', m.getAttribute('aria-hidden'));

    // Set up FlickWord iframe with today's date
    if (id === 'modal-flickword') {
      const frame = qs('#flickword-game-frame');
      if (frame) {
        const today = new Date().toISOString().split('T')[0];
        frame.src = `features/flickword-v2.html?date=${today}`;
      }
    }

    // Focus trap
    const focusables = qsa(
      'button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])',
      m,
    );
    const first = focusables[0],
      last = focusables[focusables.length - 1];
    (first || qs('[data-close]', m) || m).focus();

    function trap(e) {
      if (e.key !== 'Tab') return;
      if (!focusables.length) return;
      if (e.shiftKey && document.activeElement === first) {
        e.preventDefault();
        last.focus();
      } else if (!e.shiftKey && document.activeElement === last) {
        e.preventDefault();
        first.focus();
      }
    }
    m._trap = trap;
    m.addEventListener('keydown', trap);
  }
  function closeModal(m) {
    console.log('ðŸ”´ Closing modal:', m?.id);
    if (!m) return;
    m.setAttribute('aria-hidden', 'true');
    m.removeEventListener('keydown', m._trap || (() => {}));
    if (lastOpener && typeof lastOpener.focus === 'function') lastOpener.focus();
  }

  // Wire card + CTA triggers
  function wireCard(cardId, modalId) {
    console.log('ðŸŽ® Wiring card:', cardId, 'to modal:', modalId);
    const card = qs('#' + cardId);
    if (!card) {
      console.error('ðŸŽ® Card not found:', cardId);
      return;
    }
    const open = (e) => {
      console.log('ðŸŽ® Card clicked:', cardId);
      e.preventDefault();
      openModal(modalId, card);
    };
    card.addEventListener('click', open);
    card.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') open(e);
    });
    const btn = qs('#' + cardId + ' .gc-cta');
    if (btn) {
      console.log('ðŸŽ® CTA button found for:', cardId);
      btn.addEventListener('click', open);
    } else {
      console.warn('ðŸŽ® CTA button not found for:', cardId);
    }
  }
  // Check if modals exist
  console.log(
    'ðŸŽ® Available modals:',
    qsa('.game-modal').map((m) => m.id),
  );
  console.log('ðŸŽ® FlickWord modal:', qs('#modal-flickword'));
  console.log('ðŸŽ® Trivia modal:', qs('#modal-trivia'));

  wireCard('flickwordTile', 'modal-flickword');
  wireCard('triviaTile', 'modal-trivia');

  // Overlay & close buttons
  qsa('.game-modal').forEach((m) => {
    qsa('[data-close]', m).forEach((el) => {
      el.addEventListener('click', (e) => {
        console.log('ðŸ”´ Close button clicked for modal:', m.id);
        e.preventDefault();
        e.stopPropagation();
        closeModal(m);
      });
    });
    m.addEventListener('click', (e) => {
      if (e.target.classList.contains('gm-overlay')) {
        closeModal(m);
      }
    });
    m.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal(m);
      }
    });
  });

  // Global close function
  window.closeGameModal = closeModal;

  // Global open function for Trivia modal
  window.openTriviaModal = function (triviaData) {
    console.log('ðŸŽ® Opening Trivia modal with data:', triviaData);
    openModal('modal-trivia');
  };

  // Listen for game close messages
  window.addEventListener('message', function (event) {
    if (event.data && event.data.type === 'flickword:close') {
      const modal = qs('#modal-flickword');
      if (modal) closeModal(modal);
    }
    if (event.data && event.data.type === 'trivia:close') {
      const modal = qs('#modal-trivia');
      if (modal) closeModal(modal);
    }
  });

  // Handle new data-action buttons
  document.addEventListener('click', function (event) {
    const action = event.target.getAttribute('data-action');
    if (action === 'start-flickword') {
      event.preventDefault();
      event.stopPropagation();
      openModal('modal-flickword');
    } else if (action === 'start-trivia') {
      event.preventDefault();
      event.stopPropagation();
      openModal('modal-trivia');
    }
  });

  // Dispatch modal events for other systems to listen to
  const originalOpenModal = openModal;
  openModal = function (id, opener) {
    originalOpenModal(id, opener);
    document.dispatchEvent(new CustomEvent('modal:open', { detail: { id, opener } }));
  };

  const originalCloseModal = closeModal;
  closeModal = function (m) {
    const id = m?.id;
    originalCloseModal(m);
    if (id) {
      document.dispatchEvent(new CustomEvent('modal:close', { detail: { id } }));
    }
  };

  // ---- Reliable close: X, overlay, ESC ----
  (function wireModalCloseDelegation() {
    if (window.__modalCloseWired) return;
    window.__modalCloseWired = true;

    document.addEventListener('click', (e) => {
      const t = e.target;
      if (t.classList?.contains('gm-overlay') || t.closest?.('[data-close]')) {
        e.preventDefault();
        closeModal(t.closest('.game-modal'));
      }
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const openModal = document.querySelector('.game-modal[aria-hidden="false"]');
        if (openModal) closeModal(openModal);
      }
    });
  })();

  // ---- Exact iframe sizing on open + resize ----
  (function sizeIframesOnModalOpen() {
    function sizeIframe(modalId) {
      const modal = document.getElementById(modalId);
      if (!modal) return;
      const body = modal.querySelector('.gm-body');
      const iframe = body?.querySelector('iframe');
      if (!iframe || !body) return;
      /* Height now managed by card system */
    }

    const needsResize = new Set();

    document.addEventListener('modal:open', (e) => {
      const id = e.detail?.id;
      if (!id) return;
      requestAnimationFrame(() => sizeIframe(id));
      needsResize.add(id);
    });

    document.addEventListener('modal:close', (e) => {
      const id = e.detail?.id;
      if (!id) return;
      needsResize.delete(id);
    });

    window.addEventListener('resize', () => {
      for (const id of needsResize) sizeIframe(id);
    });
  })();

  // Stats hooks (wire real data later)
  window.GameStats = {
    set(data) {
      if (data.flickword) {
        if ('streak' in data.flickword)
          qs('[data-fw-streak]')?.replaceChildren(String(data.flickword.streak));
        if ('best' in data.flickword)
          qs('[data-fw-best]')?.replaceChildren(String(data.flickword.best));
        if ('win' in data.flickword)
          qs('[data-fw-win]')?.replaceChildren(String(data.flickword.win));
      }
      if (data.trivia) {
        if ('streak' in data.trivia)
          qs('[data-tv-streak]')?.replaceChildren(String(data.trivia.streak));
        if ('best' in data.trivia) qs('[data-tv-best]')?.replaceChildren(String(data.trivia.best));
        if ('acc' in data.trivia) qs('[data-tv-acc]')?.replaceChildren(String(data.trivia.acc));
      }
    },
  };
})();

```

## _legacy_v1\www\components\home-clean\HomeClean.js
```
/**
 * HomeClean Component - Main Container
 * Phase 4: Modular Component Architecture â€“ FIXED: Complete template literal, syntax sealed
 */

class HomeClean {
    constructor() {
        this.container = null;
        this.cards = new Map();
        this.holidayModal = null;
        this.eventListeners = new Map();
    }

    /**
     * Initialize the HomeClean component
     */
    async init(rootElement) {
        try {
            console.log('[HomeClean] Initializing component...');
            
            // Preserve existing content BEFORE creating new container
            const preservedContent = this.preserveExistingContent(rootElement);
            
            // Create main container
            this.container = this.createContainer();
            
            // Mount to root element - replace existing content
            if (rootElement) {
                // FIXED: Clear only if not HomeClean content
                if (!rootElement.querySelector('#clean-root')) {
                    rootElement.innerHTML = '';
                }
                
                // Append our new container
                rootElement.appendChild(this.container);
                
                // Restore preserved content to our new container
                this.restorePreservedContent(preservedContent);
                
                console.log('[HomeClean] Content replaced successfully');
            } else {
                console.error('[HomeClean] No root element provided');
                return false;
            }

            // Initialize holiday modal
            this.holidayModal = new window.HolidayModal();
            
            // DEBUG: Monitor holiday chip visibility
            this.setupHolidayChipDebug();
                
            // Render all rails
            await this.renderAllRails();
            
            // Setup event listeners
            this.setupEventListeners();
            
            console.log('[HomeClean] Component initialized successfully');
            return true;

        } catch (error) {
            console.error('[HomeClean] Initialization failed:', error);
            return false;
        }
    }

    /**
     * Preserve existing content from homeSection
     */
    preserveExistingContent(rootElement) {
        // Find and preserve community and feedback sections BEFORE clearing
        const communitySection = rootElement.querySelector('#group-2-community');
        const feedbackSection = rootElement.querySelector('#group-5-feedback');
        
        // Store the preserved content
        const preservedContent = {
            community: communitySection ? communitySection.cloneNode(true) : null,
            feedback: feedbackSection ? feedbackSection.cloneNode(true) : null
        };
        
        if (preservedContent.community) {
            console.log('[HomeClean] Preserved community section');
        }
        
        if (preservedContent.feedback) {
            console.log('[HomeClean] Preserved feedback section');
        }
        
        return preservedContent;
    }
    
    restorePreservedContent(preservedContent) {
        // Restore community content
        if (preservedContent.community) {
            const communityContainer = this.container.querySelector('#community-container');
            if (communityContainer) {
                communityContainer.innerHTML = preservedContent.community.innerHTML;
                console.log('[HomeClean] Restored community content');
            }
        }
        
        // Restore feedback content
        if (preservedContent.feedback) {
            const feedbackContainer = this.container.querySelector('#feedback-container');
            if (feedbackContainer) {
                feedbackContainer.innerHTML = preservedContent.feedback.innerHTML;
                console.log('[HomeClean] Restored feedback content');
            }
        }
    }

    /**
     * Create the main container element with exact mockup structure â€“ FIXED: Full template, no truncation
     */
    createContainer() {
        const container = document.createElement('div');
        container.id = 'clean-root';
        container.className = 'home-clean-container';
        
        // FIXED: Complete innerHTML template â€“ all 5 groups, sealed backticks
        container.innerHTML = `
            <!-- 1. Your Shows Container (2 rails: CW + Next Up) -->
            <div class="clean-group" id="your-shows-container">
                <div class="group-header">
                    <h2 class="group-title">Your Shows</h2>
                </div>
                <div class="group-divider"></div>
                
                <!-- Currently Watching Subsection -->
                <div class="home-preview-row">
                    <h3>Currently Watching</h3>
                    <div class="rail" id="cw-rail"></div>
                </div>

                <!-- Next Up Subsection -->
                <div class="home-preview-row">
                    <h3>Up Next</h3>
                    <div class="rail" id="up-next-rail"></div>
                </div>
            </div>

            <!-- 2. Community Container (video + games) -->
            <div class="clean-group" id="community-container">
                <div class="group-header">
                    <h2 class="group-title">Community</h2>
                </div>
                <div class="group-divider"></div>
                <div class="community-split">
                    <div class="now-playing">
                        <div class="video-placeholder">
                            Now Playing: Collective Chaos
                        </div>
                    </div>
                    <div class="games-column">
                        <div class="game-card" onclick="openModal('flickword')">
                            <h3>Flickword</h3>
                            <p>Wordplay in the Dark</p>
                        </div>
                        <div class="game-card" onclick="openModal('trivia')">
                            <h3>Trivia</h3>
                            <p>Cinematic Crucible</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. For You Container (3 genre rails) -->
            <div class="clean-group" id="for-you-container">
                <div class="group-header">
                    <h2 class="group-title">For You</h2>
                </div>
                <div class="group-divider"></div>
                
                <div class="home-preview-row">
                    <h3>Drama</h3>
                    <div class="rail" id="drama-rail"></div>
                </div>
                
                <div class="home-preview-row">
                    <h3>Comedy</h3>
                    <div class="rail" id="comedy-rail"></div>
                </div>
                
                <div class="home-preview-row">
                    <h3>Horror</h3>
                    <div class="rail" id="horror-rail"></div>
                </div>
            </div>

            <!-- 4. In Theaters Container -->
            <div class="clean-group" id="in-theaters-container">
                <div class="group-header">
                    <h2 class="group-title">In Theaters Near You</h2>
                </div>
                <div class="group-divider"></div>
                <div class="theater-info">
                    <h3>AMC Empire 25</h3>
                    <p>234 West 42nd Street<br>New York, NY 10036<br>2.3mi Away â€¢ (212) 398-2595</p>
                </div>
                <div class="rail" id="in-theaters-rail"></div>
            </div>

            <!-- 5. Feedback Container -->
            <div class="clean-group" id="feedback-container">
                <div class="group-header">
                    <h2 class="group-title">Feedback</h2>
                </div>
                <div class="group-divider"></div>
                <form class="feedback-form">
                    <textarea placeholder="Scream into the void... What devours your soul about Flicklet?"></textarea>
                    <button type="submit">Unleash the Echo</button>
                </form>
            </div>
        `;
        
        console.log('[HomeClean] Container created with full structure');  // FIXED: Log for mount debug
        
        return container;
    }

    /**
     * Render all rails with real data from appData
     */
    async renderAllRails() {
        console.log('[HomeClean] Rendering all rails...');
        
        // Use real data from appData if available
        const appData = window.appData || {};
        const tvData = appData.tv || {};
        const moviesData = appData.movies || {};
        
        console.log('[HomeClean] AppData available:', !!appData);
        console.log('[HomeClean] TV data:', tvData);
        console.log('[HomeClean] Movies data:', moviesData);
        
        // FIXED: Combine TV and movies for Currently Watching (as per tab design)
        const tvWatching = tvData.watching || [];
        const movieWatching = moviesData.watching || [];
        const combinedWatching = [...tvWatching, ...movieWatching];
        
        console.log('[HomeClean] Combined watching:', combinedWatching);
        
        // Get real data or fallback to mock data
        const realData = {
            cw: combinedWatching.length > 0 ? combinedWatching : this.generateMockData('cw', 3),
            nextup: tvData.watching?.slice(0, 3) || this.generateMockData('nextup', 3),
            foryou: {
                drama: moviesData.wishlist?.slice(0, 4) || this.generateMockData('foryou', 4, 'Drama'),
                comedy: moviesData.wishlist?.slice(4, 8) || this.generateMockData('foryou', 4, 'Comedy'),
                horror: moviesData.wishlist?.slice(8, 12) || this.generateMockData('foryou', 4, 'Horror')
            },
            theaters: moviesData.watching?.slice(0, 6) || this.generateMockData('theaters', 6, 'Theater')
        };
        
        console.log('[HomeClean] Real data prepared for rendering');
        
        // Render CW rail
        await this.renderRail('cw-rail', 'cw', realData.cw);
        
        // Render Next Up rail
        await this.renderRail('up-next-rail', 'nextup', realData.nextup);
        
        // Render For You rails
        await this.renderRail('drama-rail', 'foryou', realData.foryou.drama, 'Drama');
        await this.renderRail('comedy-rail', 'foryou', realData.foryou.comedy, 'Comedy');
        await this.renderRail('horror-rail', 'foryou', realData.foryou.horror, 'Horror');
        
        // Render Theaters rail
        await this.renderRail('in-theaters-rail', 'theaters', realData.theaters);
        
        console.log('[HomeClean] All rails rendered successfully');
    }

    /**
     * Generate mock data for rails â€“ FIXED: Genre param for FY, upNextLine for NextUp
     */
    generateMockData(type, count, genre = '') {
        const baseData = {
            id: Math.random().toString(36).substr(2, 9),
            title: `${genre || type.charAt(0).toUpperCase() + type.slice(1)} Show ${Math.floor(Math.random() * 1000)}`,
            meta: `${genre || type.toUpperCase()} â€¢ Oct 10, 2025`,
            blurb: 'Short blurb that truncates neatly to fit the card height without overflow. Oct 10, 2025 vibes.',
            poster: null  // FIXED: Use null to trigger fallback SVG
        };
        
        if (type === 'nextup') {
            baseData.upNextLine = 'Up next: S1E1 Oct 10, 2025';
            delete baseData.blurb;  // No blurb for read-only
        }
        
        if (type === 'theaters') {
            baseData.meta = 'Now Playing â€¢ Oct 10, 2025';
        }
        
        return Array.from({length: count}, (_, i) => ({
            ...baseData,
            id: baseData.id + i,
            title: baseData.title + ` #${i + 1}`
        }));
    }

    /**
     * Render a single rail â€“ FIXED: Genre param for logging
     */
    async renderRail(railId, cardType, data, genre = '') {
        const rail = this.container.querySelector(`#${railId}`);
        if (!rail) {
            console.warn(`[HomeClean] Rail #${railId} not found`);
            return;
        }
        
        console.log(`[HomeClean] Rendering ${data.length} ${cardType} cards${genre ? ` (${genre})` : ''} in #${railId}`);
        
        // Clear existing cards
        rail.innerHTML = '';
        
        // Render cards
        data.forEach((item, index) => {
            const cardElement = this.createCard(item, cardType, index);
            if (cardElement) {
                rail.appendChild(cardElement);
            } else {
                console.warn(`[HomeClean] Skipped invalid card at index ${index} in ${railId}`);
            }
        });
        
        console.log(`[HomeClean] Rendered ${data.length} cards in #${railId}`);
    }

    /**
     * Create a card instance based on type â€“ FIXED: Null-check on render, ARIA bonus
     */
    createCard(item, cardType, index) {
        try {
            let card;
            
            switch (cardType) {
                case 'cw':
                    card = new window.CardCW(item);
                    break;
                case 'nextup':
                    card = new window.CardNextUp(item);
                    break;
                case 'foryou':
                    card = new window.CardForYou(item);
                    break;
                case 'theaters':
                    card = new window.CardForYou(item);  // Reuse FY for theaters (simple card)
                    break;
                default:
                    console.warn(`[HomeClean] Unknown card type: ${cardType}`);
                    return document.createElement('div');
            }

            if (!card) {
                console.warn(`[HomeClean] Failed to create card instance for ${cardType}`);
                return document.createElement('div');
            }

            const cardElement = card.render();
            if (!cardElement) {
                console.warn(`[HomeClean] Failed to render card element for ${cardType}`);
                return document.createElement('div');
            }
            
            cardElement.dataset.cardIndex = index;
            cardElement.dataset.cardType = cardType;
            
            // FIXED: ARIA for accessibility
            cardElement.setAttribute('role', 'article');
            cardElement.setAttribute('tabindex', '0');
            
            // Store card reference
            this.cards.set(`${cardType}-${index}`, card);
            
            return cardElement;
            
        } catch (error) {
            console.error(`[HomeClean] Error creating card for ${cardType}:`, error);
            return document.createElement('div');
        }
    }

    /**
     * Setup event listeners for interactions
     */
    setupEventListeners() {
        console.log('[HomeClean] Setting up event listeners...');
        
        // Handle action button clicks
        this.container.addEventListener('click', (e) => {
            const button = e.target.closest('[data-action]');
            if (!button) return;

            const action = button.dataset.action;
            const cardId = button.dataset.id;
            const card = button.closest('.card');
            const title = card?.querySelector('.title')?.textContent || 'Unknown';

            this.handleActionClick(action, cardId, title, card);
        });

        // Handle holiday button clicks
        this.container.addEventListener('click', (e) => {
            const holidayBtn = e.target.closest('.holiday-chip');
            if (!holidayBtn) return;

            const card = holidayBtn.closest('.card');
            const cardId = card?.dataset.id || 'unknown';
            const title = card?.querySelector('.title')?.textContent || 'Unknown';

            this.openHolidayModal(cardId, title);
        });

        // FIXED: Global escape for modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.holidayModal && this.holidayModal.isOpen) {
                this.holidayModal.close();
            }
        });
        
        console.log('[HomeClean] Event listeners set up');
        
        // Listen for data ready events to refresh rails
        document.addEventListener('app:data:ready', (event) => {
            console.log('[HomeClean] Data ready event received, refreshing rails...', event.detail);
            this.refresh();
        });
        
        // Listen for cards changed events
        document.addEventListener('cards:changed', (event) => {
            console.log('[HomeClean] Cards changed event received, refreshing rails...', event.detail);
            this.refresh();
        });
        
        // Listen for item added/removed events
        document.addEventListener('item:added', (event) => {
            console.log('[HomeClean] Item added event received, refreshing rails...', event.detail);
            this.refresh();
        });
        
        document.addEventListener('item:removed', (event) => {
            console.log('[HomeClean] Item removed event received, refreshing rails...', event.detail);
            this.refresh();
        });
        
        // Old rendering system removed - no interference possible
    }


    /**
     * DEBUG: Setup holiday chip visibility monitoring
     */
    setupHolidayChipDebug() {
        // Holiday debug disabled to reduce console noise
        // console.log('[HOLIDAY DEBUG] Setting up holiday chip monitoring...');
        
        // Monitor for holiday chips being added/removed
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === Node.ELEMENT_NODE) {
                            const holidayChips = node.querySelectorAll ? node.querySelectorAll('.holiday-chip') : [];
                            holidayChips.forEach(chip => {
                                // Holiday debug disabled
                                // console.log(`[HOLIDAY DEBUG] Holiday chip ADDED at ${new Date().toISOString()}:`, chip);
                                this.monitorChipVisibility(chip);
                            });
                            
                            if (node.classList && node.classList.contains('holiday-chip')) {
                                // Holiday debug disabled
                                // console.log(`[HOLIDAY DEBUG] Holiday chip ADDED at ${new Date().toISOString()}:`, node);
                                this.monitorChipVisibility(node);
                            }
                        }
                    });
                    
                    mutation.removedNodes.forEach((node) => {
                        if (node.nodeType === Node.ELEMENT_NODE && node.classList && node.classList.contains('holiday-chip')) {
                            // Holiday debug disabled
                            // console.log(`[HOLIDAY DEBUG] Holiday chip REMOVED at ${new Date().toISOString()}:`, node);
                        }
                    });
                }
                
                if (mutation.type === 'attributes' && mutation.target.classList && mutation.target.classList.contains('holiday-chip')) {
                    const chip = mutation.target;
                    const visibility = window.getComputedStyle(chip).visibility;
                    const display = window.getComputedStyle(chip).display;
                    const opacity = window.getComputedStyle(chip).opacity;
                    
                    if (visibility === 'hidden' || display === 'none' || opacity === '0') {
                        // Holiday debug disabled
                        // console.log(`[HOLIDAY DEBUG] Holiday chip HIDDEN at ${new Date().toISOString()}:`, {
                        //     visibility,
                        //     display,
                        //     opacity,
                        //     chip
                        // });
                    }
                }
            });
        });
        
        // Start observing
        observer.observe(this.container, {
            childList: true,
            subtree: true,
            attributes: true,
            attributeFilter: ['style', 'class']
        });
        
        // Also check existing chips
        setTimeout(() => {
            const existingChips = this.container.querySelectorAll('.holiday-chip');
            // Holiday debug disabled
            // console.log(`[HOLIDAY DEBUG] Found ${existingChips.length} existing holiday chips at ${new Date().toISOString()}`);
            existingChips.forEach(chip => this.monitorChipVisibility(chip));
        }, 1000);
    }
    
    /**
     * DEBUG: Monitor individual chip visibility
     */
    monitorChipVisibility(chip) {
        const checkVisibility = () => {
            const rect = chip.getBoundingClientRect();
            const computedStyle = window.getComputedStyle(chip);
            
            const isVisible = rect.width > 0 && rect.height > 0 && 
                             computedStyle.visibility !== 'hidden' && 
                             computedStyle.display !== 'none' && 
                             computedStyle.opacity !== '0';
            
            if (!isVisible) {
                // Holiday debug disabled
                // console.log(`[HOLIDAY DEBUG] Holiday chip BECAME INVISIBLE at ${new Date().toISOString()}:`, {
                //     rect: { width: rect.width, height: rect.height },
                //     visibility: computedStyle.visibility,
                //     display: computedStyle.display,
                //     opacity: computedStyle.opacity,
                //     chip
                // });
            }
        };
        
        // Check immediately and then periodically
        checkVisibility();
        const interval = setInterval(checkVisibility, 500);
        
        // Stop monitoring after 30 seconds
        setTimeout(() => clearInterval(interval), 30000);
    }

    /**
     * Handle action button clicks
     */
    handleActionClick(action, cardId, title, cardElement) {
        console.log(`[HomeClean] Action clicked: ${action} for ${title}`);
        
        // Track analytics
        this.trackAction(action, cardId, title);
        
        // Execute action based on type
        switch (action) {
            case 'want':
                this.moveToWishlist(cardId, title);
                break;
            case 'watched':
                this.markAsWatched(cardId, title);
                break;
            case 'dismiss':
                this.dismissItem(cardId, title);
                break;
            case 'delete':
                this.deleteItem(cardId, title);
                break;
            default:
                console.warn(`[HomeClean] Unknown action: ${action}`);
        }
    }

    /**
     * Open holiday modal for a card
     */
    openHolidayModal(cardId, title) {
        if (this.holidayModal) {
            this.holidayModal.open({
                cardId,
                title,
                onAssign: (holiday) => {
                    this.assignHoliday(cardId, holiday);
                }
            });
        } else {
            console.warn('[HomeClean] HolidayModal not initialized');
        }
    }

    /**
     * Assign holiday to a card
     */
    assignHoliday(cardId, holiday) {
        console.log(`[HomeClean] Assigning holiday ${holiday} to card ${cardId}`);
        
        // Store assignment
        const assignments = JSON.parse(localStorage.getItem('holidayAssignments') || '{}');
        assignments[cardId] = holiday;
        localStorage.setItem('holidayAssignments', JSON.stringify(assignments));
        
        // Update UI
        this.updateCardHoliday(cardId, holiday);
    }

    /**
     * Update card holiday display â€“ FIXED: Badge insertion if no chip
     */
    updateCardHoliday(cardId, holiday) {
        const card = this.container.querySelector(`[data-id="${cardId}"]`);
        if (card) {
            let holidayChip = card.querySelector('.holiday-chip');
            if (!holidayChip) {
                // FIXED: Create badge if chip missing
                holidayChip = document.createElement('div');
                holidayChip.className = 'holiday-badge';
                const titleEl = card.querySelector('.title');
                if (titleEl) {
                    titleEl.parentNode.insertBefore(holidayChip, titleEl.nextSibling);
                }
            }
            holidayChip.textContent = `Holiday: ${holiday}`;
            holidayChip.classList.add('assigned');
        }
    }

    /**
     * Refresh the component by re-rendering all rails
     */
    refresh() {
        console.log('[HomeClean] Refreshing component...');
        this.renderAllRails();
    }

    /**
     * Global refresh function for external access
     */
    static refreshGlobal() {
        if (window.homeCleanInstance) {
            console.log('[HomeClean] Global refresh called');
            window.homeCleanInstance.refresh();
        } else {
            console.warn('[HomeClean] No instance available for global refresh');
        }
    }

    /**
     * Action handlers - delegate to existing functions
     */
    moveToWishlist(cardId, title) {
        console.log(`[HomeClean] Moving ${title} to wishlist`);
        if (window.moveItemV2) {
            window.moveItemV2(cardId, 'wishlist');
        } else if (window.moveItem) {
            window.moveItem(cardId, 'wishlist');
        } else {
            console.warn('[HomeClean] No moveItem function available');
        }
        // FIXED: Refresh rails after mutation
        this.refresh();
    }

    markAsWatched(cardId, title) {
        console.log(`[HomeClean] Marking ${title} as watched`);
        if (window.moveItemV2) {
            window.moveItemV2(cardId, 'watched');
        } else if (window.moveItem) {
            window.moveItem(cardId, 'watched');
        } else {
            console.warn('[HomeClean] No moveItem function available');
        }
        // FIXED: Refresh rails after mutation
        this.refresh();
    }

    dismissItem(cardId, title) {
        console.log(`[HomeClean] Dismissing ${title}`);
        if (window.removeItemFromCurrentListV2) {
            window.removeItemFromCurrentListV2(cardId);
        } else if (window.removeItemFromCurrentList) {
            window.removeItemFromCurrentList(cardId);
        } else {
            console.warn('[HomeClean] No removeItem function available');
        }
        // FIXED: Refresh rails after mutation
        this.refresh();
    }

    deleteItem(cardId, title) {
        console.log(`[HomeClean] Deleting ${title}`);
        if (window.removeItemFromCurrentListV2) {
            window.removeItemFromCurrentListV2(cardId);
        } else if (window.removeItemFromCurrentList) {
            window.removeItemFromCurrentList(cardId);
        } else {
            console.warn('[HomeClean] No removeItem function available');
        }
        // FIXED: Refresh rails after mutation
        this.refresh();
    }

    /**
     * Track analytics
     */
    trackAction(action, cardId, title) {
        if (window.gtag) {
            window.gtag('event', 'home_clean_action', {
                action_type: action,
                card_id: cardId,
                card_title: title
            });
        }
    }

    /**
     * Destroy the component
     */
    destroy() {
        console.log('[HomeClean] Destroying component...');
        
        // Remove event listeners
        this.eventListeners.forEach((listener, element) => {
            element.removeEventListener(listener.event, listener.handler);
        });
        this.eventListeners.clear();
        
        // Destroy holiday modal
        if (this.holidayModal) {
            this.holidayModal.destroy();
            this.holidayModal = null;
        }
        
        // Clear cards â€“ FIXED: Destroy each card instance
        this.cards.forEach(card => card.destroy ? card.destroy() : null);
        this.cards.clear();
        
        // Remove container
        if (this.container && this.container.parentNode) {
            this.container.parentNode.removeChild(this.container);
        }
        
        this.container = null;
    }
}

// Export for global access
window.HomeClean = HomeClean;

console.log('[HomeClean] Constructor exported â€“ ready for resurrection!');  // FIXED: Debug log on load
```

## _legacy_v1\www\components\home-clean\HomeClean.old
```
/**
 * HomeClean Component - Main Container
 * Phase 4: Modular Component Architecture
 */

class HomeClean {
    constructor() {
        this.container = null;
        this.cards = new Map();
        this.holidayModal = null;
        this.eventListeners = new Map();
    }

    /**
     * Initialize the HomeClean component
     */
    async init(rootElement) {
        try {
            console.log('[HomeClean] Initializing component...');
            
            // Preserve existing content BEFORE creating new container
            const preservedContent = this.preserveExistingContent(rootElement);
            
            // Create main container
            this.container = this.createContainer();
            
            // Mount to root element - replace existing content
            if (rootElement) {
                // Clear existing content completely
                rootElement.innerHTML = '';
                
                // Append our new container
                rootElement.appendChild(this.container);
                
                // Restore preserved content to our new container
                this.restorePreservedContent(preservedContent);
                
                console.log('[HomeClean] Content replaced successfully');
            } else {
                console.error('[HomeClean] No root element provided');
                return false;
            }

            // Initialize holiday modal
            this.holidayModal = new window.HolidayModal();
            
            // Render all rails
            await this.renderAllRails();
            
            // Setup event listeners
            this.setupEventListeners();
            
            console.log('[HomeClean] Component initialized successfully');
            return true;

        } catch (error) {
            console.error('[HomeClean] Initialization failed:', error);
            return false;
        }
    }

    /**
     * Preserve existing content from homeSection
     */
    preserveExistingContent(rootElement) {
        // Find and preserve community and feedback sections BEFORE clearing
        const communitySection = rootElement.querySelector('#group-2-community');
        const feedbackSection = rootElement.querySelector('#group-5-feedback');
        
        // Store the preserved content
        const preservedContent = {
            community: communitySection ? communitySection.cloneNode(true) : null,
            feedback: feedbackSection ? feedbackSection.cloneNode(true) : null
        };
        
        if (preservedContent.community) {
            console.log('[HomeClean] Preserved community section');
        }
        
        if (preservedContent.feedback) {
            console.log('[HomeClean] Preserved feedback section');
        }
        
        return preservedContent;
    }
    
    restorePreservedContent(preservedContent) {
        // Restore community content
        if (preservedContent.community) {
            const communityContainer = this.container.querySelector('#community-container');
            if (communityContainer) {
                communityContainer.innerHTML = preservedContent.community.innerHTML;
                console.log('[HomeClean] Restored community content');
            }
        }
        
        // Restore feedback content
        if (preservedContent.feedback) {
            const feedbackContainer = this.container.querySelector('#feedback-container');
            if (feedbackContainer) {
                feedbackContainer.innerHTML = preservedContent.feedback.innerHTML;
                console.log('[HomeClean] Restored feedback content');
            }
        }
    }

    /**
     * Create the main container element with exact mockup structure
     */
    createContainer() {
        const container = document.createElement('div');
        container.id = 'clean-root';
        container.className = 'home-clean-container';
        
        // Create containers in exact mockup order with proper structure
        container.innerHTML = `
            <!-- 1. Your Shows Container (2 rails: CW + Next Up) -->
            <div class="clean-group" id="your-shows-container">
                <div class="group-header">
                    <h2 class="group-title">Your Shows</h2>
                </div>
                <div class="group-divider"></div>
                
                <!-- Currently Watching Subsection -->
                <div class="home-preview-row">
                    <h3>Currently Watching</h3>
                    <div class="rail" id="cw-rail"></div>
                </div>

                <!-- Next Up Subsection -->
                <div class="home-preview-row">
                    <h3>Up Next</h3>
                    <div class="rail" id="up-next-rail"></div>
                </div>
            </div>

            <!-- 2. Community Container (video + games) - Preserve existing structure -->
            <div class="clean-group" id="community-container">
                <div class="group-header">
                    <h2 class="group-title">Community</h2>
                </div>
                <div class="group-divider"></div>
                
                <!-- Community Split Layout -->
                <div class="community-split">
                    <div class="now-playing">
                        <video controls loop muted>
                            <source src="community-stream.mp4" type="video/mp4">
                            Now Playing: Collective Chaos
                        </video>
                    </div>
                    <div class="games-column">
                        <div class="game-card">
                            <h3>Flickword</h3>
                            <div>Cinematic flickword</div>
                        </div>
                        <div class="game-card">
                            <h3>Trivia</h3>
                            <div>Cinematic trivia</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. For You Container (3 genre rails) -->
            <div class="clean-group" id="for-you-container">
                <div class="group-header">
                    <h2 class="group-title">For You</h2>
                </div>
                <div class="group-divider"></div>
                
                <!-- Drama Subsection -->
                <div class="home-preview-row">
                    <h3>Drama</h3>
                    <div class="rail" id="drama-rail"></div>
                </div>

                <!-- Comedy Subsection -->
                <div class="home-preview-row">
                    <h3>Comedy</h3>
                    <div class="rail" id="comedy-rail"></div>
                </div>

                <!-- Horror Subsection -->
                <div class="home-preview-row">
                    <h3>Horror</h3>
                    <div class="rail" id="horror-rail"></div>
                </div>
            </div>

            <!-- 4. In Theaters Container (TMDB now_playing) -->
            <div class="clean-group" id="in-theaters-container">
                <div class="group-header">
                    <h2 class="group-title">In Theaters Near You</h2>
                </div>
                <div class="group-divider"></div>
                
                <!-- Theater Info -->
                <div class="theater-info">
                    AMC Empire<br>
                    25234 West 42nd St<br>
                    NY,NY 10036<br>
                    2.3mi Away â€¢ (212)398-2595
                </div>
                
                <!-- In Theaters Rail -->
                <div class="rail" id="in-theaters-rail"></div>
            </div>

            <!-- 5. Feedback Container (form) - Preserve existing structure -->
            <div class="clean-group" id="feedback-container">
                <div class="group-header">
                    <h2 class="group-title">Feedback</h2>
                </div>
                <div class="group-divider"></div>
                <!-- Feedback content will be preserved from existing structure -->
            </div>
        `;
        
        return container;
    }

    /**
     * Render all rails with real data from WatchlistsAdapterV2
     */
    async renderAllRails() {
        try {
            console.log('[HomeClean] Rendering all rails with real data...');
            
            // Disable mock mode to use real data
            window.FLAGS = window.FLAGS || {};
            window.FLAGS.mockMode = false;
            
            // Get real currently watching data
            const cwData = await this.getRealCurrentlyWatching();
            console.log('[HomeClean] Real CW Data:', cwData.length, 'items');
            this.renderRail('cw-rail', cwData, 'cw');
            
            // For other rails, still use mock data for now
            const mockData = this.generateMockData();
            
            // Render Next Up
            console.log('[HomeClean] Rendering Next Up rail with', mockData.nextUp.length, 'cards');
            this.renderRail('up-next-rail', mockData.nextUp, 'nextup');
            
            // Render For You rails
            const genres = ['drama', 'comedy', 'horror'];
            genres.forEach(genre => {
                console.log(`[HomeClean] Rendering ${genre} rail with`, mockData[genre].length, 'cards');
                this.renderRail(`${genre}-rail`, mockData[genre], 'foryou');
            });
            
            // Render In Theaters
            console.log('[HomeClean] Rendering In Theaters rail with', mockData.inTheaters.length, 'cards');
            this.renderRail('in-theaters-rail', mockData.inTheaters, 'foryou');
            
            console.log('[HomeClean] All rails rendered successfully');
            
        } catch (error) {
            console.error('[HomeClean] Failed to render rails:', error);
        }
    }

    /**
     * Get real currently watching data from WatchlistsAdapterV2
     */
    async getRealCurrentlyWatching() {
        try {
            console.log('[HomeClean] Getting real currently watching data...');
            
            // Use WatchlistsAdapterV2 as the canonical data source
            if (window.WatchlistsAdapterV2 && typeof window.WatchlistsAdapterV2.load === 'function') {
                const uid = window.firebaseAuth?.currentUser?.uid || null;
                const adapterData = await window.WatchlistsAdapterV2.load(uid);
                
                if (adapterData && adapterData.watchingIds && adapterData.watchingIds.length > 0) {
                    console.log('[HomeClean] Found', adapterData.watchingIds.length, 'watching IDs');
                    
                    // Get full item data for each ID
                    const items = [];
                    for (const id of adapterData.watchingIds) {
                        try {
                            const itemData = window.WatchlistsAdapterV2.getItemData(id);
                            if (itemData) {
                                // Transform to CardCW format
                                const cardData = this.transformToCardCWFormat(itemData);
                                items.push(cardData);
                            }
                        } catch (error) {
                            console.warn('[HomeClean] Failed to get item data for ID:', id, error);
                        }
                    }
                    
                    console.log('[HomeClean] Successfully loaded', items.length, 'real CW items');
                    return items;
                }
            }
            
            // Fallback to appData if adapter not available
            if (window.appData) {
                console.log('[HomeClean] Falling back to appData...');
                const tvWatching = window.appData.tv?.watching || [];
                const movieWatching = window.appData.movies?.watching || [];
                const allWatching = [...tvWatching, ...movieWatching];
                
                const items = allWatching.map(item => this.transformToCardCWFormat(item));
                console.log('[HomeClean] Loaded', items.length, 'items from appData');
                return items;
            }
            
            console.warn('[HomeClean] No data source available, returning empty array');
            return [];
            
        } catch (error) {
            console.error('[HomeClean] Error getting real CW data:', error);
            return [];
        }
    }

    /**
     * Transform item data to CardCW format
     */
    transformToCardCWFormat(item) {
        const isTV = item.media_type === 'tv' || item.first_air_date || item.number_of_seasons;
        const title = item.title || item.name || 'Unknown Title';
        const id = item.id || item.tmdb_id || item.tmdbId;
        
        // Get poster URL
        let poster = '/assets/img/poster-placeholder.png';
        if (item.poster_path) {
            poster = `https://image.tmdb.org/t/p/w200${item.poster_path}`;
        }
        
        // Create meta information
        let meta = '';
        if (isTV) {
            const season = item.season || 1;
            const episode = item.episode || 1;
            meta = `S${season} E${episode}`;
        } else {
            const year = item.release_date ? new Date(item.release_date).getFullYear() : '2025';
            meta = `${year} â€¢ Movie`;
        }
        
        // Create blurb
        const blurb = item.overview || 'No description available';
        
        return {
            id: String(id),
            title: title,
            meta: meta,
            poster: poster,
            blurb: blurb,
            mediaType: isTV ? 'tv' : 'movie',
            originalItem: item // Keep reference to original data
        };
    }

    /**
     * Generate mock data for all rails
     */
    generateMockData() {
        const mockData = {
            cw: [],
            nextUp: [],
            drama: [],
            comedy: [],
            horror: [],
            inTheaters: []
        };

        // Generate 12 cards for each rail
        for (let i = 1; i <= 12; i++) {
            // Currently Watching
            mockData.cw.push({
                id: `cw-${i}`,
                title: `Currently Watching ${i}`,
                meta: `S1 E${i}`,
                posterUrl: '/assets/img/poster-placeholder.png',
                blurb: 'Short blurb about this show...',
                holiday: i % 3 === 0 ? 'Christmas' : null
            });

            // Next Up
            mockData.nextUp.push({
                id: `nextup-${i}`,
                title: `Next Up ${i}`,
                meta: `S1 E${i + 1}`,
                posterUrl: '/assets/img/poster-placeholder.png',
                nextEpisode: `Episode ${i + 1} airs Oct 10, 2025`
            });

            // Drama
            mockData.drama.push({
                id: `drama-${i}`,
                title: `Drama Show ${i}`,
                meta: `2025 â€¢ Drama`,
                posterUrl: '/assets/img/poster-placeholder.png',
                blurb: 'A compelling drama about...',
                where: 'Netflix',
                holiday: i % 4 === 0 ? 'Halloween' : null
            });

            // Comedy
            mockData.comedy.push({
                id: `comedy-${i}`,
                title: `Comedy Show ${i}`,
                meta: `2025 â€¢ Comedy`,
                posterUrl: '/assets/img/poster-placeholder.png',
                blurb: 'A hilarious comedy that will...',
                where: 'Hulu',
                holiday: i % 5 === 0 ? 'Thanksgiving' : null
            });

            // Horror
            mockData.horror.push({
                id: `horror-${i}`,
                title: `Horror Show ${i}`,
                meta: `2025 â€¢ Horror`,
                posterUrl: '/assets/img/poster-placeholder.png',
                blurb: 'A spine-chilling horror that...',
                where: 'Prime Video',
                holiday: i % 2 === 0 ? 'Halloween' : null
            });

            // In Theaters
            mockData.inTheaters.push({
                id: `theater-${i}`,
                title: `Theater Movie ${i}`,
                meta: `2025 â€¢ Action`,
                posterUrl: '/assets/img/poster-placeholder.png',
                blurb: 'Now playing in theaters near you...',
                where: 'AMC Empire'
            });
        }

        return mockData;
    }

    /**
     * Render a specific rail with cards
     */
    renderRail(railId, data, cardType) {
        const rail = this.container.querySelector(`#${railId}`);
        if (!rail) {
            console.warn(`[HomeClean] Rail ${railId} not found`);
            return;
        }

        if (!data || data.length === 0) {
            console.log(`[HomeClean] No data for ${railId}`);
            rail.replaceChildren();
            return;
        }

        console.log(`[HomeClean] Rendering ${data.length} ${cardType} cards in ${railId}`);

        // Create cards and render directly into rail
        const cards = data.map((item, index) => {
            try {
                const card = this.createCard(item, cardType, index);
                return card;
            } catch (error) {
                console.error(`[HomeClean] Failed to create card ${index} for ${railId}:`, error);
                return null;
            }
        }).filter(card => card !== null);

        // Replace rail children with new cards
        rail.replaceChildren(...cards);

        console.log(`[HomeClean] Rendered ${cards.length} ${cardType} cards in ${railId}`);
    }

    /**
     * Create a card element based on type using existing components
     */
    createCard(item, cardType, index) {
    try {
        let card;
        
        switch (cardType) {
            case 'cw':
                card = new window.CardCW(item);
                break;
            case 'nextup':
                card = new window.CardNextUp(item);
                break;
            case 'foryou':
                card = new window.CardForYou(item);
                break;
            default:
                console.warn(`[HomeClean] Unknown card type: ${cardType}`);
                return document.createElement('div');
        }

        if (!card) {
            console.warn(`[HomeClean] Failed to create card instance for ${cardType}`);
            return document.createElement('div');
        }

        const cardElement = card.render();
        if (!cardElement) {  // FIXED: Explicit null-check post-render to catch empty DOM
            console.warn(`[HomeClean] Failed to render card element for ${cardType}`);
            return document.createElement('div');
        }
        
        cardElement.dataset.cardIndex = index;
        cardElement.dataset.cardType = cardType;
        
        // FIXED: Optional â€“ Add ARIA for accessibility (bonus polish)
        cardElement.setAttribute('role', 'button');
        cardElement.setAttribute('tabindex', '0');
        
        // Store card reference
        this.cards.set(`${cardType}-${index}`, card);
        
        return cardElement;
        
    } catch (error) {
        console.error(`[HomeClean] Error creating card for ${cardType}:`, error);
        return document.createElement('div');
    }
}
    }

    /**
     * Setup event listeners for the component
     */
    setupEventListeners() {
        // Handle action button clicks
        this.container.addEventListener('click', (e) => {
            const button = e.target.closest('[data-action]');
            if (!button) return;

            const action = button.dataset.action;
            const cardId = button.dataset.id;
            const card = button.closest('.card');
            const title = card?.querySelector('.title')?.textContent || 'Unknown';

            this.handleActionClick(action, cardId, title, card);
        });

        // Handle holiday button clicks
        this.container.addEventListener('click', (e) => {
            const holidayBtn = e.target.closest('.holiday-chip');
            if (!holidayBtn) return;

            const card = holidayBtn.closest('.card');
            const cardId = card?.dataset.id || 'unknown';
            const title = card?.querySelector('.title')?.textContent || 'Unknown';

            this.openHolidayModal(cardId, title);
        });
    }

    /**
     * Handle action button clicks
     */
    handleActionClick(action, cardId, title, cardElement) {
        console.log(`[HomeClean] Action clicked: ${action} for ${title}`);
        
        // Track analytics
        this.trackAction(action, cardId, title);
        
        // Execute action based on type
        switch (action) {
            case 'want':
                this.moveToWishlist(cardId, title);
                break;
            case 'watched':
                this.markAsWatched(cardId, title);
                break;
            case 'dismiss':
                this.dismissItem(cardId, title);
                break;
            case 'delete':
                this.deleteItem(cardId, title);
                break;
            default:
                console.warn(`[HomeClean] Unknown action: ${action}`);
        }
    }

    /**
     * Open holiday modal for a card
     */
    openHolidayModal(cardId, title) {
        if (this.holidayModal) {
            this.holidayModal.open({
                cardId,
                title,
                onAssign: (holiday) => {
                    this.assignHoliday(cardId, holiday);
                }
            });
        }
    }

    /**
     * Assign holiday to a card
     */
    assignHoliday(cardId, holiday) {
        console.log(`[HomeClean] Assigning holiday ${holiday} to card ${cardId}`);
        
        // Store assignment
        const assignments = JSON.parse(localStorage.getItem('holidayAssignments') || '{}');
        assignments[cardId] = holiday;
        localStorage.setItem('holidayAssignments', JSON.stringify(assignments));
        
        // Update UI
        this.updateCardHoliday(cardId, holiday);
    }

    /**
     * Update card holiday display
     */
    updateCardHoliday(cardId, holiday) {
        const card = this.container.querySelector(`[data-id="${cardId}"]`);
        if (card) {
            const holidayChip = card.querySelector('.holiday-chip');
            if (holidayChip) {
                holidayChip.textContent = holiday;
                holidayChip.classList.add('assigned');
            }
        }
    }

    /**
     * Action handlers - delegate to existing functions
     */
    moveToWishlist(cardId, title) {
        console.log(`[HomeClean] Moving ${title} to wishlist`);
        if (window.moveItemV2) {
            window.moveItemV2(cardId, 'wishlist');
        } else if (window.moveItem) {
            window.moveItem(cardId, 'wishlist');
        } else {
            console.warn('[HomeClean] No moveItem function available');
        }
    }

    markAsWatched(cardId, title) {
        console.log(`[HomeClean] Marking ${title} as watched`);
        if (window.moveItemV2) {
            window.moveItemV2(cardId, 'watched');
        } else if (window.moveItem) {
            window.moveItem(cardId, 'watched');
        } else {
            console.warn('[HomeClean] No moveItem function available');
        }
    }

    dismissItem(cardId, title) {
        console.log(`[HomeClean] Dismissing ${title}`);
        if (window.removeItemFromCurrentListV2) {
            window.removeItemFromCurrentListV2(cardId);
        } else if (window.removeItemFromCurrentList) {
            window.removeItemFromCurrentList(cardId);
        } else {
            console.warn('[HomeClean] No removeItem function available');
        }
    }

    deleteItem(cardId, title) {
        console.log(`[HomeClean] Deleting ${title}`);
        if (window.removeItemFromCurrentListV2) {
            window.removeItemFromCurrentListV2(cardId);
        } else if (window.removeItemFromCurrentList) {
            window.removeItemFromCurrentList(cardId);
        } else {
            console.warn('[HomeClean] No removeItem function available');
        }
    }

    /**
     * Track analytics
     */
    trackAction(action, cardId, title) {
        if (window.gtag) {
            window.gtag('event', 'home_clean_action', {
                action_type: action,
                card_id: cardId,
                card_title: title
            });
        }
    }

    /**
     * Refresh the component
     */
    async refresh() {
        console.log('[HomeClean] Refreshing component...');
        await this.renderAllRails();
    }

    /**
     * Destroy the component
     */
    destroy() {
        console.log('[HomeClean] Destroying component...');
        
        // Remove event listeners
        this.eventListeners.forEach((listener, element) => {
            element.removeEventListener(listener.event, listener.handler);
        });
        this.eventListeners.clear();
        
        // Destroy holiday modal
        if (this.holidayModal) {
            this.holidayModal.destroy();
            this.holidayModal = null;
        }
        
        // Clear cards
        this.cards.clear();
        
        // Remove container
        if (this.container && this.container.parentNode) {
            this.container.parentNode.removeChild(this.container);
        }
        
        this.container = null;
    }
}

// Export for global access
window.HomeClean = HomeClean;



```

## _legacy_v1\www\features\trivia-safe.js
```
/* ========== trivia-safe.js ==========
   Safe version of trivia.js with null checks
   Daily trivia tile with streaks. No network calls. Uses localStorage.
   Keys: flicklet:trivia:v1:streak, flicklet:trivia:v1:lastDate, flicklet:trivia:v1:lockDate
*/
(function () {
  const el = document.getElementById('triviaTile');
  if (!el) {
    console.log('triviaTile not found, skipping trivia initialization');
    return;
  }

  const qEl = document.getElementById('triviaQuestion');
  const cEl = document.getElementById('triviaChoices');
  const fEl = document.getElementById('triviaFeedback');
  const nBtn = document.getElementById('triviaNextBtn');
  const statsEl = el.querySelector('.trivia-stats');

  // Safety check for all required elements
  if (!qEl || !cEl || !fEl || !nBtn || !statsEl) {
    console.error('Required trivia elements missing:', {
      qEl: !!qEl,
      cEl: !!cEl,
      fEl: !!fEl,
      nBtn: !!nBtn,
      statsEl: !!statsEl,
    });
    return;
  }

  const KEYS = {
    streak: 'flicklet:trivia:v1:streak',
    last: 'flicklet:trivia:v1:lastDate',
    lock: 'flicklet:trivia:v1:lockDate',
  };

  const today = isoDay(new Date()); // YYYY-MM-DD

  // External trivia API integration via proxy
  const TRIVIA_API_BASE = '/.netlify/functions/trivia-proxy';

  // Fallback pool for when API fails
  const FALLBACK_POOL = [
    {
      id: 'q1',
      q: 'Which network originally aired "Archer"?',
      choices: ['HBO', 'FX', 'AMC', 'Paramount+'],
      correct: 1,
    },
    {
      id: 'q2',
      q: '"Alien: Earth" is a spin-off in which franchise?',
      choices: ['Predator', 'Alien', 'Star Trek', 'The Expanse'],
      correct: 1,
    },
    {
      id: 'q3',
      q: 'Sherlock (2010) starred Benedict Cumberbatch andâ€¦',
      choices: ['Tom Hiddleston', 'Martin Freeman', 'David Tennant', 'Matt Smith'],
      correct: 1,
    },
    {
      id: 'q4',
      q: '"House of the Dragon" streams primarily onâ€¦',
      choices: ['HBO Max', 'Netflix', 'Hulu', 'Apple TV+'],
      correct: 0,
    },
    {
      id: 'q5',
      q: 'Which streaming service is known for "The Mandalorian"?',
      choices: ['Netflix', 'Disney+', 'HBO Max', 'Amazon Prime'],
      correct: 1,
    },
    {
      id: 'q6',
      q: 'What year did "Breaking Bad" first air?',
      choices: ['2007', '2008', '2009', '2010'],
      correct: 1,
    },
    {
      id: 'q7',
      q: 'Who created "Stranger Things"?',
      choices: ['Ryan Murphy', 'The Duffer Brothers', 'Shonda Rhimes', 'David Fincher'],
      correct: 1,
    },
    {
      id: 'q8',
      q: 'Which show features the character Walter White?',
      choices: ['Better Call Saul', 'Breaking Bad', 'The Walking Dead', 'Ozark'],
      correct: 1,
    },
  ];

  // Cache for trivia questions
  let triviaCache = null;
  let lastFetchDate = null;

  // Current question data (accessible to choose function)
  let currentQuestion = null;

  // Safe helper functions
  function safeSetTextContent(element, text) {
    if (element && typeof element.textContent !== 'undefined') {
      element.textContent = text;
    }
  }

  function safeSetInnerHTML(element, html) {
    if (element && typeof element.innerHTML !== 'undefined') {
      element.innerHTML = html;
    }
  }

  function safeSetHidden(element, hidden) {
    if (element && typeof element.hidden !== 'undefined') {
      element.hidden = hidden;
    }
  }

  // Fetch trivia questions from API with deterministic daily seed
  async function fetchTriviaQuestions(lang = 'en') {
    const langCode = lang === 'es' ? 'es' : 'en';
    const cacheKey = `trivia_${langCode}_${today}`;

    // Check cache first
    if (triviaCache && lastFetchDate === today) {
      return triviaCache;
    }

    try {
      // Use UTC date as seed for deterministic daily questions
      const utcDate = new Date().toISOString().split('T')[0];
      const seed = utcDate.replace(/-/g, ''); // Convert YYYY-MM-DD to YYYYMMDD

      // 10s timeout so the modal never freezes
      const ctrl = new AbortController();
      const t = setTimeout(() => ctrl.abort(), 10000);

      const response = await fetch(
        `${TRIVIA_API_BASE}?amount=5&category=14&difficulty=medium&type=multiple&encode=url3986&seed=${seed}`,
        {
          signal: ctrl.signal,
        },
      );
      clearTimeout(t);

      if (!response.ok) throw new Error('Proxy error ' + response.status);

      const data = await response.json();

      if (data.results && data.results.length > 0) {
        // Use deterministic sorting based on seed
        const seededRandom = (seed) => {
          let x = Math.sin(seed) * 10000;
          return x - Math.floor(x);
        };

        triviaCache = data.results.map((q, idx) => {
          const choices = [
            ...q.incorrect_answers.map((a) => decodeURIComponent(a)),
            decodeURIComponent(q.correct_answer),
          ];
          // Use seeded random for consistent ordering
          const shuffledChoices = choices.sort(
            (a, b) => seededRandom(seed + idx + a.length) - seededRandom(seed + idx + b.length),
          );
          return {
            id: `api_${idx}`,
            q: decodeURIComponent(q.question),
            choices: shuffledChoices,
            correct: shuffledChoices.indexOf(decodeURIComponent(q.correct_answer)),
          };
        });
        lastFetchDate = today;
        return triviaCache;
      }
    } catch (error) {
      clearTimeout(t);
      console.warn('Trivia API failed, using fallback:', error);

      // Graceful failure: close modal and show a friendly message
      if (window.closeTriviaModalWithError) {
        window.closeTriviaModalWithError('Unable to load trivia questions right now.');
      } else {
        console.error('[Trivia] fetch failed', error);
      }
    }

    // Fallback to hardcoded questions with deterministic selection
    const utcDate = new Date().toISOString().split('T')[0];
    const seed = utcDate.replace(/-/g, '');
    const seededRandom = (seed) => {
      let x = Math.sin(seed) * 10000;
      return x - Math.floor(x);
    };

    // Select 5 questions deterministically from fallback pool
    const selectedQuestions = [];
    const usedIndices = new Set();
    for (let i = 0; i < Math.min(5, FALLBACK_POOL.length); i++) {
      let index;
      do {
        index = Math.floor(seededRandom(seed + i) * FALLBACK_POOL.length);
      } while (usedIndices.has(index));
      usedIndices.add(index);
      selectedQuestions.push(FALLBACK_POOL[index]);
    }

    triviaCache = selectedQuestions;
    lastFetchDate = today;
    return triviaCache;
  }

  function isoDay(d) {
    return d.toISOString().slice(0, 10);
  }

  function prevDay(day) {
    const d = new Date(day);
    d.setDate(d.getDate() - 1);
    return isoDay(d);
  }

  function updateStreak() {
    const last = localStorage.getItem(KEYS.last);
    const streak = Number(localStorage.getItem(KEYS.streak) || 0);

    if (last === prevDay(today)) {
      localStorage.setItem(KEYS.streak, String(streak + 1));
    } else if (last === today) {
      // already counted today; no change
    } else {
      // missed a day or first time
      localStorage.setItem(KEYS.streak, '1');
    }
    localStorage.setItem(KEYS.last, today);
  }

  // Update Trivia stats similar to FlickWord
  function updateTriviaStats(isCorrect) {
    // Load current stats
    const rawStats = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
    const triviaStats = rawStats.trivia || {
      games: 0,
      wins: 0,
      losses: 0,
      streak: 0,
      maxStreak: 0,
    };

    // Update stats
    triviaStats.games += 1;

    if (isCorrect) {
      triviaStats.wins += 1;
      triviaStats.streak += 1;
      // Update best streak if current streak is higher
      if (triviaStats.streak > triviaStats.maxStreak) {
        triviaStats.maxStreak = triviaStats.streak;
      }
    } else {
      // Reset streak on wrong answer
      triviaStats.streak = 0;
    }

    // Calculate losses
    triviaStats.losses = triviaStats.games - triviaStats.wins;

    // Save updated stats
    const newStats = {
      ...rawStats,
      trivia: triviaStats,
    };
    localStorage.setItem('flicklet-data', JSON.stringify(newStats));

    // Also save to individual trivia stats for compatibility
    localStorage.setItem('flicklet:trivia:v1:streak', String(triviaStats.streak));
    localStorage.setItem('flicklet:trivia:v1:best', String(triviaStats.maxStreak));

    // Increment daily count for ALL answers (both correct and incorrect)
    const today = new Date().toISOString().split('T')[0];
    const dailyKey = `flicklet:trivia:daily:${today}`;
    const currentCount = parseInt(localStorage.getItem(dailyKey) || '0');
    localStorage.setItem(dailyKey, String(currentCount + 1));

    // Update display
    renderStats();

    // Send stats update to parent window
    if (window.parent && window.parent !== window) {
      window.parent.postMessage(
        {
          type: 'trivia:result',
          payload: {
            streak: triviaStats.streak,
            best: triviaStats.maxStreak,
            acc: Math.round((triviaStats.wins / triviaStats.games) * 100) || 0,
          },
        },
        '*',
      );
    }
  }

  function renderStats() {
    // Get daily count and limits
    const isPro = window.appData?.settings?.pro || false;
    const dailyLimit = isPro ? 50 : 5;
    const today = new Date().toISOString().split('T')[0];
    const dailyKey = `flicklet:trivia:daily:${today}`;
    const dailyCount = parseInt(localStorage.getItem(dailyKey) || '0');

    // Simple counter in top left
    const statsHTML = `
      <div class="daily-counter">
        ${dailyCount}/${dailyLimit}
      </div>
    `;

    safeSetInnerHTML(statsEl, statsHTML);
  }

  function renderQuestion(q, isLocked) {
    safeSetTextContent(qEl, q.q);
    safeSetInnerHTML(cEl, '');
    safeSetTextContent(fEl, '');
    safeSetHidden(nBtn, true);

    q.choices.forEach((text, idx) => {
      const li = document.createElement('li');
      li.setAttribute('role', 'option');
      li.setAttribute('tabindex', '0');
      li.className = 'choice-btn';
      li.textContent = text;
      li.onclick = () => choose(idx);
      li.onkeydown = (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          choose(idx);
        }
      };
      cEl.appendChild(li);
    });

    cEl.style.opacity = '1';
    cEl.style.pointerEvents = 'auto';
  }

  function choose(choiceIdx) {
    if (!currentQuestion) return;

    const isCorrect = choiceIdx === currentQuestion.correct;

    // Update UI
    const choices = cEl.querySelectorAll('.choice-btn');
    choices.forEach((btn, idx) => {
      btn.disabled = true;
      if (idx === currentQuestion.correct) {
        btn.classList.add('correct');
      } else if (idx === choiceIdx && !isCorrect) {
        btn.classList.add('incorrect');
      }
    });

    // Show feedback
    fEl.className = `feedback-${isCorrect ? 'correct' : 'incorrect'}`;
    fEl.style.display = 'block';
    safeSetTextContent(
      fEl,
      isCorrect
        ? 'Correct! ðŸŽ‰'
        : `Wrong! The answer was: ${currentQuestion.choices[currentQuestion.correct]}`,
    );

    // Update stats (includes daily count increment)
    updateTriviaStats(isCorrect);

    // Auto-advance to next question after 2 seconds
    setTimeout(() => {
      nextQuestion();
    }, 2000);
  }

  async function nextQuestion() {
    try {
      // Check daily limits based on user plan
      const isPro = window.appData?.settings?.pro || false;
      const dailyLimit = isPro ? 50 : 5; // Pro users get 50, Basic users get 5
      const today = new Date().toISOString().split('T')[0];
      const dailyKey = `flicklet:trivia:daily:${today}`;
      const dailyCount = parseInt(localStorage.getItem(dailyKey) || '0');
      const locked = dailyCount >= dailyLimit;

      if (locked) {
        // Show limit reached message
        safeSetTextContent(qEl, 'Daily limit reached!');
        safeSetInnerHTML(
          cEl,
          `
          <div style="text-align: center; padding: 20px; color: var(--text-secondary); font-style: italic;">
            <p>You've reached your daily limit (${dailyCount}/${dailyLimit})</p>
            <p>${isPro ? 'Pro users get 50 questions per day' : 'Upgrade to Pro for 50 questions per day'}</p>
          </div>
        `,
        );
        safeSetTextContent(fEl, '');
        safeSetHidden(nBtn, true);
        renderStats();
        return;
      }

      const questions = await fetchTriviaQuestions();
      const q = questions[Math.floor(Math.random() * questions.length)];
      currentQuestion = q;

      // Render
      renderStats();
      renderQuestion(q);
    } catch (error) {
      console.error('Error loading trivia question:', error);
      safeSetTextContent(qEl, 'Error loading question. Please try again.');
    }
  }

  // Initialize
  async function initTrivia() {
    try {
      await nextQuestion();
    } catch (error) {
      console.error('Error initializing trivia:', error);
    }
  }

  // Start the trivia
  initTrivia();

  // Expose functions for external use
  window.__FlickletRefreshTrivia = async function () {
    await nextQuestion();
  };
})();

```

## _legacy_v1\www\js\app.js
```
/* ============== Flicklet App (Cleaned Core) ==============
   Single source of truth for initialization & lifecycle.
   This build removes duplicate init paths and normalizes tab/UI/render behavior.
*/

// FIXED: Disable legacy home rendering functions to prevent content wipe
window.loadHomeContent = () => { console.log('[FIX] Legacy disabled'); };
window.renderHomeRails = () => { console.log('[FIX] Legacy disabled'); };

// Card action handlers will be loaded via global functions

// Fallback for FlickletDebug if not loaded
window.FlickletDebug = window.FlickletDebug || {
  info: console.log,
  warn: console.warn,
  error: console.error,
  log: console.log,
};

// Feature flag for tab system - defaults to new system
window.__useLegacyTabs = false;

(function () {
  // Helper function to get translation
  function t(key) {
    // Use the global t function from i18n.js
    if (typeof window.t === 'function') {
      return window.t(key);
    }
    // Fallback to key if translation not available
    return key;
  }

  // Centralized User ViewModel - Single Source of Truth for Auth State
  const UserViewModel = {
    isAuthenticated: false,
    displayName: '',
    alias: '',
    avatarUrl: '',
    email: '',

    update(user) {
      this.isAuthenticated = !!user;
      if (user) {
        // Check if we just saved a username - don't override it
        if (window.__USERNAME_JUST_SAVED__) {
          console.log('ðŸ”„ Username just saved, preserving:', window.__USERNAME_JUST_SAVED__);
          this.displayName = window.__USERNAME_JUST_SAVED__;
          this.alias = window.__USERNAME_JUST_SAVED__;
          this.avatarUrl = user.photoURL || '';
          this.email = user.email || '';
        } else {
          // Check for display name in settings first, then fall back to Firebase user data
          const settingsDisplayName = window.appData?.settings?.displayName || 
                                     window.appData?.settings?.username ||
                                     window.SettingsManager?.get('displayName');
          
          // Always prioritize the most recent settings over Firebase user data
          this.displayName = settingsDisplayName || user.displayName || user.email?.split('@')[0] || 'User';
          this.alias = settingsDisplayName || user.displayName || user.email?.split('@')[0] || 'User';
          this.avatarUrl = user.photoURL || '';
          this.email = user.email || '';
          
          console.log('âœ… UserViewModel updated with display name:', this.displayName, 'from settings:', !!settingsDisplayName);
        }
      } else {
        this.displayName = '';
        this.alias = '';
        this.avatarUrl = '';
        this.email = '';
      }

      // Notify all UI components of auth state change
      this.notifyUI();
    },

    // Method to update just the display name/username
    updateDisplayName(newName) {
      this.displayName = newName;
      this.alias = newName;
      this.notifyUI();
    },

    notifyUI() {
      // Update account button
      const accountBtn = document.getElementById('accountButton');
      const accountLabel = document.getElementById('accountButtonLabel');
      if (accountBtn && accountLabel) {
        accountLabel.textContent = this.isAuthenticated ? `ðŸ‘¤ ${this.displayName}` : 'Sign In';
        accountBtn.title = this.isAuthenticated
          ? `Signed in as ${this.email}. Click to sign out.`
          : 'Click to sign in';
      }

      // Update snark text (username + snarky message)
      const snarkElement = document.getElementById('leftSnark');
      if (snarkElement && this.isAuthenticated) {
        const snarks = [
          `${this.alias}, your couch has a permanent dent`,
          `${this.alias}, ready to binge?`,
          `${this.alias}, what's next on your list?`,
          `${this.alias}, time to discover something new`,
          `${this.alias}, your watchlist is calling`,
        ];
        snarkElement.textContent = snarks[Math.floor(Math.random() * snarks.length)];
      } else if (snarkElement) {
        snarkElement.textContent = '';
      }

      // Update settings access
      const settingsElements = document.querySelectorAll('[data-requires-auth]');
      settingsElements.forEach((el) => {
        if (this.isAuthenticated) {
          el.style.display = '';
          el.removeAttribute('disabled');
        } else {
          el.style.display = 'none';
          el.setAttribute('disabled', 'true');
        }
      });
      
      // Refresh tab discovery after authentication state changes
      if (window.refreshTabDiscovery) {
        console.log('[app] Refreshing tab discovery after auth state change...');
        window.refreshTabDiscovery();
      }
    },
  };

  const App = {
    // Runtime state (references the global appData defined in utils.cleaned.js)
    currentUser: null,
    currentTab: 'home',
    genresLoaded: false,
    authInitialized: false,
    firebaseInitialized: false,

    async init() {
      // Fallback for FlickletDebug if not loaded
      const debug = window.FlickletDebug || {
        info: console.log,
        warn: console.warn,
        error: console.error,
      };
      debug.info('ðŸš€ [FlickletApp] init');
      try {
        // 1) Load persisted data
        if (typeof loadAppData === 'function') {
          loadAppData();
        }

        // 2) Apply theme & language
        this.applyTheme();
        this.applyLanguage();

        // 2.5) Re-initialize language manager after appData is loaded
        if (window.LanguageManager && typeof window.LanguageManager.reinitialize === 'function') {
          window.LanguageManager.reinitialize();
        }

        // 2.6) Initialize FAB icons
        this.initializeFABIcons();

        // 2.7) Initialize Counter Bootstrap System
        if (window.CounterBootstrap) {
          window.CounterBootstrap.init();
        }

        // 2.8) Install centralized card action handlers
        if (window.installCardActionHandlers) {
          window.installCardActionHandlers({
            addToList: (id, list, ctx) => window.addToListFromCacheV2?.(id, list, ctx),
            removeFromList: (id, list, ctx) => window.removeItemFromCurrentList?.(id, list, ctx),
            markWatched: (id, ctx) => window.addToListFromCacheV2?.(id, 'watched', ctx),
          });
        }

        // 3) Initialize Firebase auth listener
        this.initFirebase();

        // 3.5) Setup auth button sync
        this.setupAuthButtonSync();

        // 4) Wait for data-init to complete
        await this.waitForDataInit();

        // 5) Bind global UI listeners
        this.setupEventListeners();

        // 6) Setup settings tabs
        this.setupSettingsTabs();

        // 7) Ensure a default active tab and initial render
        // Add has-search class to make search bar visible
        document.body.classList.add('has-search');
        
        // Ensure home tab is active by default
        document.body.classList.add('tab-home');
        
        // Try to switch to home tab - let navigation engine handle it
        try {
          this.switchToTab('home');
        } catch (error) {
          console.error('[app.js] Error switching to home tab:', error);
          // Fallback: manually ensure home is visible
          this.ensureHomeTabActive();
        }
        
        try {
          this.updateUI();
        } catch (error) {
          console.error('[app.js] Error updating UI:', error);
        }

        // 7.5) Dock FABs to active tab
        this.dockFABsToActiveTab();

        // 6) Emit cards:changed event for centralized count updates
        setTimeout(() => {
          document.dispatchEvent(
            new CustomEvent('cards:changed', {
              detail: { source: 'app-initialization' },
            }),
          );
          console.log('ðŸ”¢ Emitted cards:changed event during initialization');

          // Emit app:lists-rendered event for counter system
          document.dispatchEvent(
            new CustomEvent('app:lists-rendered', {
              detail: { source: 'initialization' },
            }),
          );

          // Ensure FABs are docked after everything is ready
          this.dockFABsToActiveTab();
        }, 500);

        // Auth listener handled in initFirebase()

        // 6) Optional: feature blocks that rely on DOM (after first paint)
        setTimeout(() => {
          this.initializeFlickWord?.();
          this.initializeFlickWordModal?.();
          this.initializeTriviaModal?.();
          // checkAndPromptLogin removed - handled in auth listener
        }, 150);

        // Search functionality is now handled by search.js module
        // No initialization needed here

        // Initialize genres
        this.initializeGenres();

        FlickletDebug.info('âœ… [FlickletApp] ready');
      } catch (e) {
        FlickletDebug.error('ðŸ’¥ [FlickletApp] init failed:', e);
      }
    },

    // Wait for data-init to complete before proceeding
    async waitForDataInit() {
      return new Promise((resolve) => {
        // If data-init already completed, resolve immediately
        if (window.appData && typeof window.appData === 'object') {
          resolve();
          return;
        }

        // Wait for app:data:ready event with timeout
        const timeout = setTimeout(() => {
          console.warn('[FlickletApp] Data init timeout, proceeding anyway');
          resolve();
        }, 2000);

        window.addEventListener(
          'app:data:ready',
          () => {
            clearTimeout(timeout);
            // Data initialization completed
            resolve();
          },
          { once: true },
        );
      });
    },

    // ---------- Visual / Theme ----------
    applyTheme() {
      const local = localStorage.getItem('flicklet-theme');
      const chosen = local || appData?.settings?.theme || 'light';

      // Apply data-theme attribute for new token system
      document.documentElement.setAttribute('data-theme', chosen);

      // Keep legacy dark-mode class for backward compatibility
      document.body.classList.toggle('dark-mode', chosen === 'dark');

      // Keep both in sync
      appData.settings.theme = chosen;
      localStorage.setItem('flicklet-theme', chosen);
    },

    applyLanguage() {
      const lang = appData?.settings?.lang || 'en';
      try {
        if (typeof applyTranslations === 'function') {
          applyTranslations(lang);
        }
      } catch (e) {
        FlickletDebug.warn('i18n not available yet, continuing.');
      }
    },

    // ---------- Integrations ----------
    // Old initFirebase removed - using new unified system below

    // setupAuthListener() removed - auth handled in initFirebase()

    initFirebase() {
      if (window.__NO_FIREBASE__ || !window.firebaseApp) {
        console.info('initFirebase skipped (SDK not present)');
        return;
      }

      // Prevent multiple initializations
      if (this.firebaseInitialized) {
        FlickletDebug.info('âš ï¸ Firebase already initialized, skipping');
        return;
      }

      FlickletDebug.info('ðŸ”¥ Initializing Firebase...');
      this.firebaseInitialized = true;

      // Clear any existing username prompt modals
      this.clearExistingUsernameModals();

      // Wait for Firebase ready event with timeout
      this.waitForFirebaseReady()
        .then(() => {
          FlickletDebug.info('âœ… Firebase available, setting up auth listener');
          this.setupAuthListener();
        })
        .catch(() => {
          FlickletDebug.error('âŒ Firebase initialization timeout after 8 seconds');
          this.setupFallbackAuth();
        });
    },

    waitForFirebaseReady() {
      return new Promise((resolve, reject) => {
        // âœ… If Firebase is already ready, resolve immediately (avoids race with early event)
        try {
          if (
            window.firebaseInitialized === true ||
            (typeof firebase !== 'undefined' && firebase.apps && firebase.apps.length > 0)
          ) {
            resolve(true);
            return;
          }
        } catch (e) {
          // ignore state check errors; fall through to event wait
        }

        const timeout = setTimeout(() => {
          reject(new Error('Firebase initialization timeout'));
        }, 8000);

        const handleFirebaseReady = () => {
          clearTimeout(timeout);
          window.removeEventListener('firebase-ready', handleFirebaseReady);
          if (window.firebaseInitialized) {
            resolve(true);
          } else {
            reject(new Error('Firebase initialization failed'));
          }
        };

        // Listen once for the readiness signal
        window.addEventListener('firebase-ready', handleFirebaseReady, { once: true });
      });
    },

    setupFallbackAuth() {
      FlickletDebug.info('ðŸ”„ Setting up fallback authentication system');
      this.currentUser = null;
      this.firebaseInitialized = false;

      // Update account button to show fallback message
      const accountBtn = document.getElementById('accountBtn');
      if (accountBtn) {
        accountBtn.textContent = `ðŸ”’ ${t('offline_mode') || 'Offline Mode'}`;
        accountBtn.title =
          t('auth_unavailable_offline') || 'Authentication unavailable - working in offline mode';
      }

      // Show a notification about offline mode
      this.showNotification(
        t('working_offline_mode') || 'Working in offline mode - data will be stored locally only',
        'info',
      );
    },

    setupAuthListener() {
      try {
        console.log('ðŸ”¥ Auth listener setup - using single observer from auth.js');
        // Auth state changes are now handled by the single observer in auth.js
        // This method is kept for compatibility but no longer registers its own observer

        // Get current user state for initialization
        const user = firebase.auth().currentUser;
        FlickletDebug.info('ðŸ‘¤ Current user on init:', user ? `User: ${user.email}` : 'No user');
        this.currentUser = user;

        // Also update the global currentUser for compatibility with existing code
        if (typeof window !== 'undefined') {
          window.currentUser = user;
        }

        // Update centralized UserViewModel
        UserViewModel.update(user);

        // Initialize auth state
        this.authInitialized = true;

        // If user is already signed in, process their data
        if (user) {
          this.processUserSignIn(user);
        }
      } catch (error) {
        FlickletDebug.error('âŒ Auth listener setup failed:', error);
      }
    },

    // Complete login flow with Firestore integration
    setupAuthButtonSync() {
      (function () {
        const btn = document.getElementById('signIn');
        if (!btn) return;

        // Small UI helpers
        function setAuthButtonSignedIn(emailOrName) {
          btn.textContent = emailOrName || 'ðŸ‘¤ Sign Out';
          btn.dataset.state = 'signed-in';
          btn.title = emailOrName ? `Signed in as ${emailOrName}` : 'Signed in';
          showSignOutHint(true);
        }
        function setAuthButtonSignedOut() {
          btn.textContent = 'ðŸ‘¤ Sign In';
          btn.dataset.state = 'signed-out';
          btn.title = 'Sign in';
          showSignOutHint(false);
        }
        function showSignOutHint(show) {
          let hint = document.getElementById('signOutHint');
          if (!hint) {
            hint = document.createElement('div');
            hint.id = 'signOutHint';
            hint.style.cssText = 'font-size:12px;opacity:.8;margin-top:2px;';
            btn.parentElement?.insertBefore(hint, btn);
          }
          hint.textContent = show ? 'Sign out' : '';
          hint.style.display = show ? '' : 'none';
        }

        // First-load prompt for unsigned users
        function showFirstLoadSignInPrompt() {
          if (sessionStorage.getItem('firstSignInPromptShown') === '1') return;
          sessionStorage.setItem('firstSignInPromptShown', '1');

          const wrap = document.createElement('div');
          wrap.innerHTML = `
            <div id="signin-info-modal" style="position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);z-index:9999">
              <div style="background:#fff;padding:16px 20px;border-radius:10px;max-width:420px;width:92%;box-shadow:0 10px 30px rgba(0,0,0,.2)">
                <h3 style="margin:0 0 8px 0;">Save your shows</h3>
                <p style="margin:0 0 14px 0;">Sign in to keep your watchlists and pick up on any device.</p>
                <div style="display:flex;gap:8px;justify-content:flex-end">
                  <button id="signin-skip" class="btn btn--sm">Not now</button>
                  <button id="signin-go" class="btn btn--sm">Sign in</button>
                </div>
              </div>
            </div>`;
          document.body.appendChild(wrap);
          document.getElementById('signin-skip')?.addEventListener('click', () => wrap.remove());
          document.getElementById('signin-go')?.addEventListener('click', () => {
            wrap.remove();
            triggerSignIn();
          });
        }

        // Username prompt when missing
        function promptForUsername(defaultName) {
          return new Promise((resolve) => {
            const wrap = document.createElement('div');
            wrap.innerHTML = `
              <div id="username-modal" style="position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);z-index:9999">
                <div style="background:#fff;padding:16px 20px;border-radius:10px;max-width:480px;width:92%;box-shadow:0 10px 30px rgba(0,0,0,.2)">
                  <h3 style="margin:0 0 8px 0;">what should we call you?</h3>
                  <input id="username-input" style="width:100%;padding:10px 12px;border:1px solid #ccc;border-radius:8px" value="${defaultName || ''}" />
                  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
                    <button id="username-skip" type="button" class="btn btn--sm" data-action="username-skip">Skip</button>
                    <button id="username-save" type="button" class="btn btn--sm" data-action="username-save">Save</button>
                  </div>
                </div>
              </div>`;
            document.body.appendChild(wrap);

            // prevent overlay click from bubbling to app-level handlers
            wrap.querySelector('#username-modal')?.addEventListener('click', (e) => {
              if (e.target === e.currentTarget) {
                /* click on backdrop */
              }
            });

            const done = (val) => {
              wrap.remove();
              resolve(val);
            };

            // Expose the done callback for global [data-action] handler
            wrap._usernameDone = done;

            // Note: Event handlers are now managed by the global [data-action] delegate
          });
        }

        // Firestore helpers (guarded)
        function userDocRef(uid) {
          if (!uid) return null;
          return firebase.firestore().collection('users').doc(uid); // simple structure: users/{uid}
        }
        async function readUsername(uid) {
          const ref = userDocRef(uid);
          if (!ref) throw new Error('Firestore not available');
          const snap = await ref.get();
          return snap.exists ? snap.data()?.username || null : null;
        }
        async function writeUsername(uid, name) {
          const ref = userDocRef(uid);
          if (!ref) throw new Error('Firestore not available');
          await ref.set({ username: name }, { merge: true });
        }

        function updateWelcome(name) {
          const el =
            document.getElementById('welcomeNote') ||
            (() => {
              const n = document.createElement('div');
              n.id = 'welcomeNote';
              n.style.cssText = 'margin:8px 0;font-weight:600;';
              const headerLeft = document.querySelector('#header-left, header .left, body'); // best-effort
              (headerLeft || document.body).prepend(n);
              return n;
            })();
          el.innerHTML = name
            ? `${name}<div style="font-weight:400;opacity:.8">I have a PhD in binge-watching.</div>`
            : '';
        }

        async function ensureUsernameFlow(user) {
          try {
            const display = user.displayName || user.email || 'Signed in';
            setAuthButtonSignedIn(display);
            let uname = null;
            try {
              uname = await readUsername(user.uid);
            } catch {}
            if (!uname) {
              const picked = await promptForUsername(display);
              if (picked) {
                try {
                  await writeUsername(user.uid, picked);
                } catch {}
                uname = picked;
              }
            }
            updateWelcome(uname || display);
            // TODO: also reflect into your local Flicklet Settings if needed
          } catch (e) {
            console.error('[auth] username flow failed', e);
          }
        }

        function triggerSignIn() {
          if (!window.firebase || !firebase.auth) {
            console.warn('[auth] Firebase not available');
            return;
          }
          const auth = firebase.auth();
          const provider = new firebase.auth.GoogleAuthProvider();
          auth
            .signInWithPopup(provider)
            .catch((err) => console.error('[auth] Sign-in failed', err));
        }

        // Click handler
        btn.addEventListener('click', async () => {
          if (!window.firebase || !firebase.auth) return;
          const auth = firebase.auth();
          if (auth.currentUser)
            auth.signOut().catch((e) => console.error('[auth] Sign-out failed', e));
          else triggerSignIn();
        });

        // onAuthStateChanged: sync button + flows; show first-load prompt when unsigned
        if (window.firebase && firebase.auth) {
          const auth = firebase.auth();
          // First paint
          if (auth.currentUser)
            setAuthButtonSignedIn(auth.currentUser.displayName || auth.currentUser.email || '');
          else {
            setAuthButtonSignedOut();
            showFirstLoadSignInPrompt();
          }

          // Auth state changes are now handled centrally by AuthManager
          // This listener has been removed to prevent race conditions
        } else {
          setAuthButtonSignedOut();
        }
      })();
    },

    async processUserSignIn(user) {
      // Race condition protection - prevent concurrent processing
      if (window.__PROCESS_USER_SIGNIN_LOCK__) {
        console.warn('[app] processUserSignIn already in progress, skipping duplicate call');
        return;
      }

      window.__PROCESS_USER_SIGNIN_LOCK__ = true;

      try {
        FlickletDebug.info('âœ… User signed in, processing...');

        // âœ… 2-line guard: wait for a real user, then get uid
        const authUser = await window.ensureUser();
        const uid = authUser.uid;

        // 1) Close ALL auth modals
        document.querySelectorAll('.modal-backdrop[data-modal="login"]').forEach((n) => n.remove());
        window.__currentAuthModal = null;

        // 2) CREATE USER DATABASE ENTRY (CRITICAL FOR FIREBASE STORAGE)
        FlickletDebug.info('ðŸ”„ Creating user database entry...');
        try {
          const db = firebase.firestore();
          await db
            .collection('users')
            .doc(uid)
            .set(
              {
                profile: {
                  email: user.email || '',
                  displayName: user.displayName || '',
                  photoURL: user.photoURL || '',
                },
                lastLoginAt: firebase.firestore.FieldValue.serverTimestamp(),
              },
              { merge: true },
            );
          FlickletDebug.info('âœ… User database entry created successfully');
        } catch (error) {
          FlickletDebug.error('âŒ Failed to create user database entry:', error);
        }

        // 3) LOAD USER DATA FROM CLOUD (CRITICAL FOR DATA RESTORATION)
        FlickletDebug.info('ðŸ”„ Loading user data from Firebase cloud storage...');
        try {
          // Use the trySync function from data-init.js to load user data
          if (typeof window.DataInit?.trySync === 'function') {
            await window.DataInit.trySync('user-sign-in');
            FlickletDebug.info('âœ… User data loaded from cloud successfully');

            // CRITICAL: Refresh UI after data is loaded to prevent "already in list" errors
            if (typeof window.updateUI === 'function') {
              FlickletDebug.info('ðŸ”„ Refreshing UI after cloud data load...');
              window.updateUI();
            }

            // Emit cards:changed event for centralized count updates
            document.dispatchEvent(
              new CustomEvent('cards:changed', {
                detail: { source: 'cloud-data-load' },
              }),
            );
            FlickletDebug.info('ðŸ”¢ Emitted cards:changed event after cloud data load...');

            // Also refresh the current tab content
            if (typeof window.FlickletApp?.updateTabContent === 'function') {
              const currentTab = window.FlickletApp?.currentTab || 'home';
              FlickletDebug.info('ðŸ”„ Refreshing current tab content:', currentTab);
              window.FlickletApp.updateTabContent(currentTab);
            }
          } else {
            FlickletDebug.warn(
              'âš ï¸ DataInit.trySync function not available - user data not loaded from cloud',
            );
          }
        } catch (error) {
          FlickletDebug.error('âŒ Failed to load user data from cloud:', error);
        }

        // 4) BUTTON LABEL = Firebase displayName (fallback email prefix)
        console.log('ðŸ” User signed in, Firebase user data:', {
          displayName: user.displayName,
          email: user.email,
          providerData: user.providerData,
        });

        // Set account button with Firebase displayName (this method will prioritize Firebase displayName)
        console.log('ðŸ” Setting account button label with Firebase displayName:', user.displayName);
        this.setAccountButtonLabel(user.displayName);

        // Also update the account button to ensure it's using the latest Firebase data
        setTimeout(() => {
          console.log('ðŸ” Refreshing account button after sign-in');
          this.updateAccountButton();
        }, 100);

        // 5) WELCOME/SNARK = Firestore settings.username (prompt once if missing)
        try {
          const settings = await this.readSettings(uid);
          let username = (settings.username || '').trim();

          // Load existing username into window.appData.settings for personalized rows
          if (username) {
            window.appData = window.appData || {};
            window.appData.settings = { ...(window.appData.settings || {}), username };
            console.log('âœ… Loaded existing username into appData:', username);
          }

          // single prompt gate stored in Firestore so it works across devices
          const alreadyPrompted = !!settings.usernamePrompted;
          console.log('ðŸ” Username check:', { username, alreadyPrompted, settings });

          if (!username && !alreadyPrompted) {
            console.log('ðŸ”§ Prompting for username...', { username, alreadyPrompted, settings });
            username = await this.promptForUsernameOnce(user.displayName); // returns string or null
            console.log('ðŸ”§ Username prompt result:', username);

            if (username && username.trim()) {
              await this.writeSettings(uid, { username: username.trim(), usernamePrompted: true });
              // keep local appData in sync (if you use it)
              window.appData = window.appData || {};
              window.appData.settings = {
                ...(window.appData.settings || {}),
                username: username.trim(),
              };
              console.log('âœ… Username saved:', username.trim());
            } else {
              await this.writeSettings(uid, { usernamePrompted: true });
              console.log('âœ… Username prompt marked as completed (skipped)');
            }
          } else {
            console.log('ðŸ” Username already exists or was prompted:', {
              username,
              alreadyPrompted,
            });
          }

          // Update left snark AFTER username is set
          this.setLeftSnark(username ? this.makeSnark(username) : '');

          // Run migration once per user
          await this.runMigration();

          // Run cleanup for stray field
          await this.cleanupStrayField();

          // Migrate legacy name fields
          await this.migrateLegacyNameFields(uid);
        } catch (error) {
          console.error('âŒ Error in user sign-in processing:', error);
          this.showNotification(t('error_loading_user_data'), 'error');
        }
      } catch (error) {
        console.error('âŒ Error in processUserSignIn:', error);
        this.showNotification(t('error_processing_sign_in'), 'error');
      } finally {
        // Always release the lock
        window.__PROCESS_USER_SIGNIN_LOCK__ = false;
      }
    },

    clearUserData() {
      console.log('ðŸ§¹ FlickletApp.clearUserData called');

      // Clear user references
      this.currentUser = null;
      window.currentUser = null;

      // Clear localStorage data
      try {
        localStorage.removeItem('flicklet-data');
        localStorage.removeItem('tvMovieTrackerData');
        localStorage.removeItem('flicklet_lists');
        localStorage.removeItem('flicklet_notes');
        localStorage.removeItem('flicklet_prefs');
        localStorage.removeItem('flicklet-language');
        localStorage.removeItem('flicklet-theme');
        localStorage.removeItem('flicklet:pro');
        localStorage.removeItem('flicklet:episodeTracking:enabled');
        localStorage.removeItem('flicklet:episodeTracking:series');
        console.log('ðŸ§¹ localStorage cleared');
      } catch (e) {
        console.warn('ðŸ§¹ Failed to clear localStorage:', e);
      }

      // Reset appData to empty state
      if (window.appData) {
        window.appData.tv = { watching: [], wishlist: [], watched: [] };
        window.appData.movies = { watching: [], wishlist: [], watched: [] };
        window.appData.settings = {
          pro: false, // Default to false - only true if user account has Pro
          isPro: false, // Alias for pro
          episodeTracking: false,
          username: '',
          displayName: '',
          lang: 'en',
          theme: 'light',
        };
        window.appData.searchCache = [];
        window.appData.activeTagFilters = new Set();
        console.log('ðŸ§¹ appData reset to empty state');
      }

      // Clear render flags
      Object.keys(window).forEach((key) => {
        if (key.startsWith('render_')) {
          window[key] = false;
        }
      });

      // Update UI to reflect signed out state
      if (window.UserViewModel) {
        window.UserViewModel.update(null);
      }

      // Clear username snark and restore generic greeting
      const leftSnark = document.getElementById('leftSnark');
      const headerGreeting = document.getElementById('headerGreeting');
      if (leftSnark) {
        leftSnark.textContent = 'Welcome back!';
      }
      if (headerGreeting) {
        headerGreeting.style.display = '';
        headerGreeting.textContent = 'Ready to discover your next favorite show?';
      }

      // Clear any duplicate cards
      if (typeof window.cleanupDuplicateCards === 'function') {
        window.cleanupDuplicateCards();
      }

      // Trigger UI refresh
      if (typeof window.updateUI === 'function') {
        window.updateUI();
      }

      console.log('âœ… FlickletApp user data cleared');
    },

    // Firestore settings helpers - now using direct path structure

    async readSettings(uid) {
      try {
        // Auth guard: Ensure auth is ready before any Firestore operations
        if (typeof window.ensureUser !== 'function') {
          throw new Error('ensureUser function not available');
        }
        const user = await window.ensureUser();
        const authUid = user.uid;

        console.log('ðŸ”¥ Reading from Firestore:', { uid, authUid });
        const db = firebase.firestore();
        const ref = db.collection('users').doc(authUid).collection('settings').doc('app');
        const snap = await ref.get();

        if (snap.exists) {
          const data = snap.data();
          console.log('âœ… Firestore read successful:', data);

          // Emit userDataLoaded event for other components
          document.dispatchEvent(
            new CustomEvent('userDataLoaded', {
              detail: { uid: authUid, data: data },
            }),
          );

          return data;
        } else {
          // Seed defaults so the next read always has data
          const defaults = { theme: 'light', lang: 'en', createdAt: Date.now() };
          await ref.set(defaults, { merge: true });
          console.log('âœ… Firestore defaults created:', defaults);
          return defaults;
        }
      } catch (error) {
        console.error('âŒ Firestore read failed:', error);
        return {};
      }
    },

    async writeSettings(uid, data) {
      try {
        // Auth guard: Ensure auth is ready before any Firestore operations
        if (typeof window.ensureUser !== 'function') {
          throw new Error('ensureUser function not available');
        }
        const user = await window.ensureUser();
        const authUid = user.uid;

        console.log('ðŸ”¥ Writing to Firestore:', { uid, authUid, data });
        const db = firebase.firestore();
        const ref = db.collection('users').doc(authUid).collection('settings').doc('app');
        await ref.set({ ...data, updatedAt: Date.now() }, { merge: true });
        console.log('âœ… Firestore write successful');
      } catch (error) {
        console.error('âŒ Firestore write failed:', error);
        throw error;
      }
    },

    // Migration to clean up legacy fields
    async migrateLegacyNameFields(uid) {
      // Auth guard: Ensure auth is ready before any Firestore operations
      const user = await window.ensureUser();
      const authUid = user.uid;

      const s = await this.readSettings(authUid);
      if (s && s.displayName && !s.username) {
        await this.writeSettings(authUid, { username: s.displayName });
      }
      // Optional: remove displayName field
      try {
        const db = firebase.firestore();
        const ref = db.collection('users').doc(authUid).collection('settings').doc('app');
        await ref.set({ displayName: null }, { merge: true });
      } catch (e) {
        console.log(t('no_displayname_field') + ':', e.message);
      }
    },

    /**
     * Handle post-auth success pipeline
     * Called by AuthManager after successful authentication
     */
    async handlePostAuthSuccess(user) {
      // Handling post-auth success for user

      // Phase D: Auto-close auth modal on successful sign-in
      if (
        window.AUTH_MANAGER &&
        window.AUTH_MANAGER._authModalManager &&
        window.AUTH_MANAGER._authModalManager.isModalOpen()
      ) {
        // Auto-closing auth modal on sign-in
        window.AUTH_MANAGER._authModalManager.close();
      }

      try {
        const uid = user.uid;
        const db = window.firebaseDb || firebase.firestore();

        // 1) Create/update Firestore user doc
        await this.createOrUpdateUserDoc(user);

        // 2) Cloud-first load
        const gotCloud = await this.cloudFirstLoad(db, uid);

        // 3) If no cloud doc, seed from local minimal
        if (!gotCloud) {
          await this.seedCloudIfNeeded(db, uid);
          window.__cloudHydrated = true;
          window.saveAppData('flicklet-data', window.pruneWatchlistsShape(window.appData || {}));
        }

        // 4) Handle identity (username vs displayName)
        await this.handleUserIdentity(user);

        // 5) Update UI
        this.updateUI();
      } catch (error) {
        console.error('âŒ [FlickletApp] handlePostAuthSuccess failed:', error);
      }
    },

    /**
     * Create or update Firestore user document
     */
    async createOrUpdateUserDoc(user) {
      try {
        const uid = user.uid;
        const userDoc = {
          uid: uid,
          email: user.email,
          displayName: user.displayName,
          photoURL: user.photoURL,
          lastLoginAt: new Date().toISOString(),
          createdAt: new Date().toISOString(),
        };

        // Update Firestore user doc
        if (window.firebaseDb) {
          await window.firebaseDb.collection('users').doc(uid).set(userDoc, { merge: true });
          console.log('âœ… User doc updated in Firestore');
        }
      } catch (error) {
        console.error('âŒ Failed to update user doc:', error);
      }
    },

    /**
     * Cloud-first load with LocalStorage mirroring
     */
    async cloudFirstLoad(db, uid) {
      try {
        const ref = db.doc(`users/${uid}`);
        const snap = await ref.get();
        if (snap.exists) {
          const cloud = window.pruneWatchlistsShape({ ...(snap.data() || {}) });
          window.appData = { ...(window.appData || {}), ...cloud };
          window.saveAppData('flicklet-data', window.appData);
          window.__cloudHydrated = true;
          
          // FIXED: Invalidate WatchlistsAdapterV2 cache after cloud load
          if (window.WatchlistsAdapterV2) {
            console.log('[CloudLoad] Invalidating WatchlistsAdapterV2 cache after cloud load');
            window.WatchlistsAdapterV2._cache = null;
            window.WatchlistsAdapterV2._lastUid = null;
            // Re-initialize the adapter with the new data
            await window.WatchlistsAdapterV2.init(true);
          }
          
          console.info(
            '[CloudLoad] Hydrated from Firestore. Bytes:',
            window.computeBytes(JSON.stringify(window.appData)),
          );
          return true;
        }
        return false;
      } catch (error) {
        console.error('[CloudLoad] Failed:', error);
        return false;
      }
    },

    /**
     * Seed cloud with minimal local data if no cloud doc exists
     */
    async seedCloudIfNeeded(db, uid) {
      try {
        const minimal = window.pruneWatchlistsShape(window.appData || {});
        const payload = {
          ...minimal,
          uid,
          lastUpdated: firebase.firestore.FieldValue.serverTimestamp?.(),
        };
        const json = JSON.stringify(payload);
        const bytes = window.computeBytes(json);

        // Keep a safety margin well below 1 MiB doc limit
        if (bytes > 900 * 1024) {
          console.warn(
            '[SeedCloud] payload too large, aborting seed:',
            (bytes / 1024).toFixed(1),
            'KB',
          );
          return false;
        }

        await db.doc(`users/${uid}`).set(payload, { merge: true });
        console.info(
          '[SeedCloud] Seeded cloud with minimal shape:',
          (bytes / 1024).toFixed(1),
          'KB',
        );
        return true;
      } catch (error) {
        console.error('[SeedCloud] Failed:', error);
        return false;
      }
    },

    /**
     * Load and merge cloud data (legacy - now uses cloud-first approach)
     */
    async loadAndMergeCloudData(uid) {
      try {
        if (window.firebaseDb) {
          const userDoc = await window.firebaseDb.collection('users').doc(uid).get();
          if (userDoc.exists) {
            const cloudData = userDoc.data();

            // Merge cloud data with local
            if (cloudData.watchlists) {
              console.log('ðŸ”„ Merging cloud watchlists data:', cloudData.watchlists);

              // Merge TV data
              if (cloudData.watchlists.tv) {
                if (cloudData.watchlists.tv.watching) {
                  window.appData.tv.watching = [
                    ...new Set([
                      ...window.appData.tv.watching,
                      ...cloudData.watchlists.tv.watching,
                    ]),
                  ];
                }
                if (cloudData.watchlists.tv.wishlist) {
                  window.appData.tv.wishlist = [
                    ...new Set([
                      ...window.appData.tv.wishlist,
                      ...cloudData.watchlists.tv.wishlist,
                    ]),
                  ];
                }
                if (cloudData.watchlists.tv.watched) {
                  window.appData.tv.watched = [
                    ...new Set([...window.appData.tv.watched, ...cloudData.watchlists.tv.watched]),
                  ];
                }
              }

              // Merge Movies data
              if (cloudData.watchlists.movies) {
                if (cloudData.watchlists.movies.watching) {
                  window.appData.movies.watching = [
                    ...new Set([
                      ...window.appData.movies.watching,
                      ...cloudData.watchlists.movies.watching,
                    ]),
                  ];
                }
                if (cloudData.watchlists.movies.wishlist) {
                  window.appData.movies.wishlist = [
                    ...new Set([
                      ...window.appData.movies.wishlist,
                      ...cloudData.watchlists.movies.wishlist,
                    ]),
                  ];
                }
                if (cloudData.watchlists.movies.watched) {
                  window.appData.movies.watched = [
                    ...new Set([
                      ...window.appData.movies.watched,
                      ...cloudData.watchlists.movies.watched,
                    ]),
                  ];
                }
              }

              // Persist merged data
              if (typeof window.saveAppData === 'function') {
                window.saveAppData();
              }

              console.log('âœ… Cloud data merged with local');

              // Emit firebaseDataLoaded event for other components
              document.dispatchEvent(
                new CustomEvent('firebaseDataLoaded', {
                  detail: { uid: uid, watchlists: cloudData.watchlists },
                }),
              );
            }
          }
        }
      } catch (error) {
        console.error('âŒ Failed to load/merge cloud data:', error);
      }
    },

    /**
     * Handle user identity (username vs displayName)
     */
    async handleUserIdentity(user) {
      try {
        const uid = user.uid;

        // Get username from settings
        const username = await this.getUsername(uid);

        if (username) {
          this.renderSnark(username);
        } else {
          console.info('[identity] username:missing â†’ prompt');
          const suggestedName = user.displayName || user.email?.split('@')[0] || 'User';
          const pickedUsername = await this.promptForUsernameOnce(suggestedName);

          if (pickedUsername) {
            await this.setUsername(uid, pickedUsername);
            this.renderSnark(pickedUsername);
          }
        }
      } catch (error) {
        console.error('âŒ Failed to handle user identity:', error);
      }
    },

    /**
     * Get username from settings
     */
    async getUsername(uid) {
      try {
        const settings = await this.readSettings(uid);
        const username = (settings.username || '').trim();
        if (username) {
          console.info(`[identity] username:found=${username}`);
        }
        return username;
      } catch (error) {
        console.error('âŒ Failed to get username:', error);
        return null;
      }
    },

    /**
     * Set username in settings
     */
    async setUsername(uid, username) {
      try {
        const trimmedUsername = username.trim();
        await this.writeSettings(uid, {
          username: trimmedUsername,
          displayName: trimmedUsername, // Also save as displayName
          usernamePrompted: true,
        });

        // Update local appData
        if (window.appData) {
          window.appData.settings.username = trimmedUsername;
          window.appData.settings.displayName = trimmedUsername; // Also update displayName
          if (typeof window.saveAppData === 'function') {
            window.saveAppData();
          }
        }

        console.info(`[identity] username:saved=${trimmedUsername}`);
        return true;
      } catch (error) {
        console.error('âŒ Failed to set username:', error);
        return false;
      }
    },

    /**
     * Render snarky header message
     */
    renderSnark(username) {
      const leftSnark = document.getElementById('leftSnark');
      const headerGreeting = document.getElementById('headerGreeting');
      
      if (leftSnark && username) {
        const snarkText = this.makeSnark(username);
        // Make username bold in the snark text
        const boldSnarkText = snarkText.replace(username, `<strong>${username}</strong>`);
        leftSnark.innerHTML = boldSnarkText;
        leftSnark.style.textAlign = 'left';
        leftSnark.style.zIndex = 'auto';
        leftSnark.style.pointerEvents = 'none';

        // Hide the generic greeting when username is displayed
        if (headerGreeting) {
          headerGreeting.style.display = 'none';
        }

        console.info(`[identity] snark:render=${snarkText}`);
      } else if (leftSnark && !username) {
        // Show generic greeting when no username
        if (headerGreeting) {
          headerGreeting.style.display = '';
        }
      }
    },

    clearExistingUsernameModals() {
      // Clear any existing username prompt modals
      const existingModals = document.querySelectorAll(
        '.modal-backdrop[data-modal="username-prompt-modal"]',
      );
      existingModals.forEach((modal) => {
        console.log('ðŸ§¹ Clearing existing username prompt modal');
        modal.remove();
      });
    },

    async promptForUsernameOnce(suggest = '') {
      // Check if username modal is already open
      if (document.querySelector('.modal-backdrop[data-modal="username"]')) {
        console.log('âš ï¸ Username modal already open, skipping duplicate');
        return null;
      }

      // Prevent multiple simultaneous calls
      if (this._usernameModalPromise) {
        console.log('âš ï¸ Username modal already in progress, waiting for existing promise');
        return this._usernameModalPromise;
      }

      this._usernameModalPromise = new Promise((resolve) => {
        console.log('ðŸ”§ Creating username modal...');
        const body = this.openModal(
          'What do I call you?',
          `
          <div style="min-width:320px; max-width:480px;">
            <p style="margin:0 0 16px; color:#666; font-size:14px;">Choose a name to personalize your experience</p>
            <input id="usernameInput" type="text" autocomplete="nickname" placeholder="Enter your name" value="${suggest.replace(/[&<>"']/g, (m) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' })[m])}" style="display:block;width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;margin-bottom:16px;font-size:16px;">
            <div style="display:flex;gap:12px;justify-content:flex-end;">
              <button id="uCancel" class="btn secondary" type="button" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; color:#333; border-radius:6px; cursor:pointer;">Skip</button>
              <button id="uSave" class="btn primary" type="button" style="padding:8px 16px; background:#1976d2; color:white; border:none; border-radius:6px; cursor:pointer;">Save</button>
            </div>
          </div>
        `,
          'username-modal',
        );

        // tag so it's distinct from login modal
        const wrap = document.querySelector('.modal-backdrop[data-testid="username-modal"]');
        if (wrap) {
          wrap.setAttribute('data-modal', 'username');

          // Add click outside to close
          wrap.addEventListener('click', (e) => {
            if (e.target === wrap) {
              console.log('ðŸ”§ Modal backdrop clicked, closing');
              done(null);
            }
          });
        }

        let isDone = false;
        const done = (v) => {
          if (isDone) {
            console.log('ðŸ”§ Username modal already closed, ignoring duplicate call');
            return;
          }
          isDone = true;
          console.log('ðŸ”§ Username modal closing with value:', v);

          // Close the modal properly
          this.closeModal();

          // Also remove any remaining username modals
          document
            .querySelectorAll('.modal-backdrop[data-modal="username"]')
            .forEach((n) => n.remove());

          this._usernameModalPromise = null; // Clear the promise
          resolve(v);
        };

        // Use setTimeout to ensure DOM is ready
        setTimeout(() => {
          const input = document.getElementById('usernameInput');
          const save = document.getElementById('uSave');
          const cancel = document.getElementById('uCancel');

          console.log('ðŸ”§ Setting up username modal buttons:', {
            input: !!input,
            save: !!save,
            cancel: !!cancel,
          });

          if (cancel) {
            cancel.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              console.log('ðŸ”§ Cancel button clicked');
              if (!isDone) {
                done(null);
              }
            });
          }

          if (save) {
            // Remove any existing listeners to prevent duplicates
            save.removeEventListener('click', save._clickHandler);
            save._clickHandler = (e) => {
              e.preventDefault();
              e.stopPropagation();
              const value = input?.value?.trim() || '';
              console.log('ðŸ”§ Save button clicked with value:', value);

              // Validate input
              if (value.length < 1) {
                console.log('ðŸ”§ Username too short, showing error');
                const errorEl = document.querySelector('[data-auth-msg]');
                if (errorEl) {
                  errorEl.textContent = 'Please enter a name or click Skip';
                }
                return;
              }

              if (value.length > 50) {
                console.log('ðŸ”§ Username too long, showing error');
                const errorEl = document.querySelector('[data-auth-msg]');
                if (errorEl) {
                  errorEl.textContent = 'Name must be 50 characters or less';
                }
                return;
              }

              console.log('ðŸ”§ Username validated, closing modal');
              if (!isDone) {
                done(value);
              }
            };
            save.addEventListener('click', save._clickHandler);
            console.log('ðŸ”§ Save button event listener attached');
          } else {
            console.error('âŒ Save button not found!');
          }

          if (input) {
            input.addEventListener('keydown', (e) => {
              if (e.key === t('enter_key')) {
                e.preventDefault();
                e.stopPropagation();
                const value = input.value || '';
                console.log('ðŸ”§ Enter key pressed with value:', value);
                if (!isDone) {
                  done(value.trim());
                }
              }
            });
          }

          // Focus the input
          if (input) {
            input.focus();
            input.select();
          }

          // Add backdrop click handler to close modal
          const backdrop = document.querySelector('.modal-backdrop[data-modal="username"]');
          if (backdrop) {
            backdrop.addEventListener('click', (e) => {
              if (e.target === backdrop) {
                console.log('ðŸ”§ Backdrop clicked, closing modal');
                done(null);
              }
            });
          }
        }, 100);
      });

      return this._usernameModalPromise;
    },

    setAccountButtonLabel(displayName) {
      const accountBtn = document.getElementById('accountBtn');
      if (accountBtn) {
        const email = this.currentUser?.email || t('account');
        const emailPrefix = email.split('@')[0];

        // Priority: Firebase displayName > passed displayName > email prefix
        let finalName;
        if (this.currentUser?.displayName?.trim()) {
          finalName = this.currentUser.displayName.trim();
          console.log('ðŸ” Using Firebase displayName:', finalName);
        } else if (displayName?.trim()) {
          finalName = displayName.trim();
          console.log('ðŸ” Using passed displayName:', finalName);
        } else {
          finalName = emailPrefix || t('user');
          console.log('ðŸ” Using email prefix:', finalName);
        }

        accountBtn.innerHTML = `ðŸ‘¤ ${finalName}`;
        accountBtn.title = `${t('signed_in_as')} ${email}. ${t('click_to_sign_out')}`;
        console.log('ðŸ” Account button updated:', {
          firebaseDisplayName: this.currentUser?.displayName,
          passedDisplayName: displayName,
          finalName,
          email,
        });
      }
    },

    setLeftSnark(username) {
      const leftSnark = document.getElementById('leftSnark');
      if (leftSnark && username) {
        leftSnark.textContent = this.makeSnark(username);
      }
    },

    makeSnark(username) {
      const snarks = [
        `${username}, try not to binge 12 seasons tonight`,
        `${username}, your watchlist is judging you`,
        `${username}, remember to eat between episodes`,
        `${username}, sleep is also important`,
        `${username}, your couch has a permanent dent`,
      ];
      return snarks[Math.floor(Math.random() * snarks.length)];
    },

    openModal(title, html, testId = 'generic-modal') {
      console.log('ðŸ”§ openModal called:', { title, testId });

      // Guard against modal stacking
      if (
        testId === 'auth-modal' &&
        document.querySelector('.modal-backdrop[data-modal="login"]')
      ) {
        console.log('âš ï¸ Auth modal already exists, not creating another');
        return null;
      }

      const wrap = document.createElement('div');
      wrap.className = 'modal-backdrop';
      wrap.setAttribute('data-testid', 'modal-backdrop');
      if (testId === 'auth-modal') {
        wrap.setAttribute('data-modal', 'login');
        wrap.id = `auth-modal-${Date.now()}`;
        window.__currentAuthModal = wrap;
      }
      wrap.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 99999;
        pointer-events: auto;
        visibility: visible;
        opacity: 1;
      `;

      // Don't add default close button for username modals
      const showDefaultClose = testId !== 'username-modal';

      wrap.innerHTML = `
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" data-testid="${testId}" data-modal-body tabindex="-1" style="position:relative; z-index:100000; pointer-events: auto !important;">
          <h3 id="modal-title">${title}</h3>
          <div class="modal-body" style="pointer-events: auto;">${html}</div>
          <div data-auth-msg aria-live="polite" style="min-height:1em; margin:8px 0; color:var(--color-error,#b00020); pointer-events: auto;"></div>
          ${
            showDefaultClose
              ? `
          <div class="modal-actions" data-modal-actions style="pointer-events: auto;">
            <button class="btn secondary" data-testid="modal-close" type="button" style="width: 120px; flex: 0 0 120px; font-size: 14px; padding: 12px 18px; height: 44px; min-height: 44px; pointer-events: auto;">Close</button>
          </div>
          `
              : ''
          }
        </div>
      `;

      document.body.appendChild(wrap);

      // Focus the modal for accessibility
      const modal = wrap.querySelector('[data-modal-body]');
      if (modal) {
        modal.focus();
      }

      return wrap.querySelector('[data-modal-body]');
    },

    closeModal() {
      console.log('ðŸ”§ closeModal called');

      // Close any modal backdrop
      const modals = document.querySelectorAll('.modal-backdrop');
      modals.forEach((modal) => {
        if (modal && modal.parentNode) {
          console.log('ðŸ”§ Removing modal:', modal.id || modal.className);
          modal.remove();
        }
      });

      // Clear any global modal references
      if (window.__currentAuthModal) {
        window.__currentAuthModal = null;
      }

      console.log('ðŸ”§ Modal closed');
    },

    async runMigration() {
      try {
        // Auth guard: Ensure auth is ready before any Firestore operations
        const user = await window.ensureUser();
        const uid = user.uid;

        console.log('ðŸ”„ Running Firebase document migration...');
        const db = firebase.firestore();
        const ref = db.collection('users').doc(uid);

        const snap = await ref.get();
        if (!snap.exists) {
          console.log('ðŸ“„ No document to migrate');
          this._migrationCompleted = true;
          return;
        }

        const data = snap.data();
        let needsUpdate = false;
        const updates = {};

        // Check for empty settings.displayName and remove it
        if (data.settings && data.settings.displayName === '') {
          updates['settings.displayName'] = firebase.firestore.FieldValue.delete();
          needsUpdate = true;
        }

        if (needsUpdate) {
          await ref.update(updates);
          console.log('âœ… Migration completed');
        } else {
          console.log('âœ… No migration needed');
        }

        this._migrationCompleted = true;
      } catch (error) {
        console.error('âŒ Migration failed:', error);
      }
    },

    async cleanupStrayField() {
      try {
        // Auth guard: Ensure auth is ready before any Firestore operations
        const user = await window.ensureUser();
        const uid = user.uid;

        console.log('ðŸ§¹ Running cleanup for stray field...');
        const db = firebase.firestore();
        const ref = db.collection('users').doc(uid);

        const snap = await ref.get();
        if (!snap.exists) {
          console.log('ðŸ“„ No document to clean up');
          return;
        }

        const data = snap.data();
        let needsUpdate = false;
        const updates = {};

        // Remove stray displayName field if it exists
        if (data.displayName) {
          updates.displayName = firebase.firestore.FieldValue.delete();
          needsUpdate = true;
        }

        if (needsUpdate) {
          await ref.update(updates);
          console.log('âœ… Cleanup completed');
        } else {
          console.log('âœ… No cleanup needed');
        }
      } catch (error) {
        console.error('âŒ Cleanup failed:', error);
      }
    },

    showNotification(message, type = 'info') {
      // Simple notification implementation
      console.log(`ðŸ”” ${type.toUpperCase()}: ${message}`);

      // Avoid circular calls - don't call window.showNotification
      // This prevents the recursive loop with inline-script-02.js

      // Fallback: create a simple toast notification
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'error' ? '#ff4444' : type === 'success' ? '#44ff44' : '#4444ff'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 100000;
        font-size: 14px;
        max-width: 300px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      `;
      toast.textContent = message;
      document.body.appendChild(toast);

      // Auto-remove after 5 seconds
      setTimeout(() => {
        if (toast.parentNode) {
          toast.parentNode.removeChild(toast);
        }
      }, 5000);
    },

    updateAccountButton() {
      const accountBtn = document.getElementById('accountBtn');
      const accountHint = document.getElementById('accountHint');
      if (!accountBtn) return;

      if (!this.currentUser) {
        accountBtn.innerHTML = `ðŸ‘¤ <span data-i18n="sign_in_account">${t('sign_in_account')}</span>`;
        accountBtn.title = t('sign_in_account_title');
        if (accountHint) accountHint.textContent = '';
        return;
      }

      // Use the same logic as setAccountButtonLabel for consistency
      const email = this.currentUser.email || t('account');
      const emailPrefix = email.split('@')[0];

      // Priority: Firebase displayName > email prefix
      let finalName;
      if (this.currentUser.displayName?.trim()) {
        finalName = this.currentUser.displayName.trim();
        console.log('ðŸ” updateAccountButton using Firebase displayName:', finalName);
      } else {
        finalName = emailPrefix || t('user');
        console.log('ðŸ” updateAccountButton using email prefix:', finalName);
      }

      accountBtn.innerHTML = `ðŸ‘¤ ${finalName}`;
      accountBtn.title = `${t('signed_in_as')} ${email}. ${t('click_to_sign_out')}`;
      if (accountHint) accountHint.textContent = t('click_to_sign_out');
    },

    // ---------- UI Lifecycle ----------
    updateUI() {
      // Emit cards:changed event for centralized count updates
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { source: 'FlickletApp-updateUI' },
        }),
      );
      // Note: updateTabContent is called directly from switchToTab to avoid loops
    },

    updateTabContent(tab) {
      // Delegate to the global updateTabContent function if it exists
      if (typeof window.updateTabContent === 'function') {
        return window.updateTabContent(tab);
      }
      console.warn('updateTabContent function not available');
    },

    /**
     * Process: Tab Navigation - Legacy Shim
     * Purpose: Thin wrapper that delegates to nav-init.js engine
     * Data Source: nav-init.js manages [aria-selected] and [hidden] attributes
     * Update Path: All tab logic moved to nav-init.js - this is temporary shim
     * Dependencies: nav-init.js activate function
     */
    switchToTab(tab) {
      console.log(`[app.js] LEGACY SHIM: Delegating tab switch to nav engine: ${tab}`);
      
      // Clear search when switching tabs (except when switching to home)
      if (tab !== 'home' && window.SearchModule && typeof window.SearchModule.clearSearch === 'function') {
        console.log('[app.js] Clearing search due to tab switch');
        window.SearchModule.clearSearch();
      }
      
      // Feature flag check
      if (window.__useLegacyTabs) {
        console.warn('[app.js] LEGACY MODE: Using old tab system');
        return this._legacySwitchToTab(tab);
      }
      
      // Delegate to nav-init.js engine
      const targetId = `${tab}Section`;
      if (window.navEngine && typeof window.navEngine.activate === 'function') {
        window.navEngine.activate(targetId);
        console.log(`[app.js] Activated ${tab} tab via nav engine`);
      } else {
        console.error('[app.js] Nav engine not available - using fallback');
        if (tab === 'home') {
          this.ensureHomeTabActive();
        } else {
          return this._legacySwitchToTab(tab);
        }
      }
      
      // Ensure search bar is visible for home tab
      if (tab === 'home') {
        document.body.classList.add('has-search');
      }
    },

    // Ensure home tab is active and visible
    ensureHomeTabActive() {
      console.log('[app.js] Ensuring home tab is active and visible');
      
      // First try the navigation engine
      if (window.navEngine && typeof window.navEngine.activate === 'function') {
        window.navEngine.activate('homeSection');
        console.log('[app.js] Activated home tab via nav engine');
        return;
      }
      
      // Fallback: manually activate home tab
      console.log('[app.js] Nav engine not ready, manually activating home tab');
      
      // Hide all tab sections
      const allSections = document.querySelectorAll('.tab-section');
      allSections.forEach(section => {
        section.hidden = true;
        section.setAttribute('aria-hidden', 'true');
      });
      
      // Show home section
      const homeSection = document.getElementById('homeSection');
      if (homeSection) {
        homeSection.hidden = false;
        homeSection.setAttribute('aria-hidden', 'false');
        console.log('[app.js] Home section made visible');
      }
      
      // Update tab states
      const allTabs = document.querySelectorAll('[role="tab"]');
      allTabs.forEach(tab => {
        tab.setAttribute('aria-selected', 'false');
        tab.classList.remove('is-active');
      });
      
      // Activate home tab
      const homeTab = document.querySelector('[aria-controls="homeSection"]');
      if (homeTab) {
        homeTab.setAttribute('aria-selected', 'true');
        homeTab.classList.add('is-active');
        console.log('[app.js] Home tab activated');
      }
      
      // Set current tab
      this.currentTab = 'home';
      
      // Ensure body has the correct class
      document.body.classList.add('tab-home');
    },

    // Legacy implementation (kept for rollback)
    _legacySwitchToTab(tab) {
      console.log(`ðŸ”„ LEGACY: Switching to tab: ${tab}`);
      this.currentTab = tab;

      // Dispatch single tab:switched event for all systems
      document.dispatchEvent(
        new CustomEvent('tab:switched', {
          detail: { tab: tab, previousTab: this.previousTab },
        }),
      );

      this.previousTab = tab;

      // Clear search when switching tabs (including when switching to home)
      if (window.SearchModule && typeof window.SearchModule.getSearchState === 'function') {
        try {
          const searchState = window.SearchModule.getSearchState();
          console.log('ðŸ” Search state check:', searchState);
          if (searchState.isSearching || searchState.hasResults) {
            console.log('ðŸ§¹ Clearing search due to tab switch to:', tab);
            window.SearchModule.clearSearch();
          } else {
            console.log('ðŸ” Search not active, no clearing needed');
          }
        } catch (error) {
          console.warn('âš ï¸ Error checking search state:', error);
        }
      } else {
        console.warn('âš ï¸ SearchModule not available for search clearing');
      }

      // If we're switching away from search, make sure the target tab is visible
      if (window.SearchModule && typeof window.SearchModule.getSearchState === 'function') {
        try {
          const searchState = window.SearchModule.getSearchState();
          if (!searchState.isSearching) {
            const targetSection = document.getElementById(`${tab}Section`);
            if (targetSection) {
              targetSection.style.display = '';
              console.log(`âœ… Showing target tab: ${tab}Section`);
            }
          }
        } catch (error) {
          console.warn('âš ï¸ Error checking search state for tab visibility:', error);
        }
      }

      // Tab button classes - hide current tab, show others evenly spaced
      // BUT: During search, show all tabs for navigation
      const TAB_IDS = ['home', 'watching', 'wishlist', 'watched', 'discover', 'settings'];
      const ids = TAB_IDS;
      let isSearching = false;
      if (this.isSearching !== undefined) {
        isSearching = this.isSearching;
      } else if (window.SearchModule && typeof window.SearchModule.getSearchState === 'function') {
        try {
          const searchState = window.SearchModule.getSearchState();
          isSearching = searchState.isSearching;
        } catch (error) {
          console.warn('âš ï¸ Error getting search state for tab visibility:', error);
        }
      }
      ids.forEach((name) => {
        const btn = document.getElementById(`${name}Tab`);
        if (btn) {
          if (isSearching) {
            // During search, show all tabs for navigation
            btn.classList.remove('hidden');
            btn.classList.remove('is-active');
            btn.classList.remove('active'); // Remove old active class
            console.log(`ðŸ” Search mode - showing tab: ${name}Tab`);
          } else if (name === tab) {
            // Show current tab with active styling (new system)
            btn.classList.remove('hidden');
            btn.classList.add('is-active');
            btn.classList.remove('active'); // Remove old active class
            btn.setAttribute('aria-selected', 'true');
            btn.setAttribute('tabindex', '0');
            console.log(`âœ… ${name}Tab is-active: true (current tab)`);
          } else {
            // Show other tabs without active styling
            btn.classList.remove('hidden');
            btn.classList.remove('is-active');
            btn.classList.remove('active'); // Remove old active class
            btn.setAttribute('aria-selected', 'false');
            btn.setAttribute('tabindex', '-1');
            console.log(`âœ… ${name}Tab is-active: false`);
          }
        }
      });

      // Sections use .tab-section + .active
      ids.forEach((name) => {
        const section = document.getElementById(`${name}Section`);
        if (section) {
          section.classList.toggle('active', name === tab);
          // Let CSS classes control visibility, don't override with inline styles
          console.log(`âœ… ${name}Section active: ${name === tab}`);
        } else {
          console.error(`âŒ Section not found: ${name}Section`);
        }
      });

      // Hide/show home-specific sections using unified visibility management
      if (window.VisibilityManager) {
        const results = window.VisibilityManager.manageHomeSections(
          tab === 'home',
          `tab-switch-${tab}`,
        );

        results.forEach((result) => {
          if (result.success) {
            const debug = window.FlickletDebug || {
              info: console.log,
              warn: console.warn,
              error: console.error,
            };
            debug.info(
              `âœ… ${result.sectionId} visibility: ${tab === 'home' ? 'visible' : 'hidden'}`,
            );
          } else {
            const debug = window.FlickletDebug || {
              info: console.log,
              warn: console.warn,
              error: console.error,
            };
            debug.warn(`âš ï¸ Failed to update visibility for: ${result.sectionId}`);
          }
        });
      } else {
        // Fallback to original method if VisibilityManager not available
        if (
          window.HomeSectionsConfig &&
          typeof window.HomeSectionsConfig.getSections === 'function'
        ) {
          const homeSections = window.HomeSectionsConfig.getSections('tab-switch');
          const sectionElements = window.HomeSectionsConfig.getSectionElements('tab-switch');

          homeSections.forEach((sectionId) => {
            const section = sectionElements[sectionId];
            if (section) {
              section.style.display = tab === 'home' ? 'block' : 'none';
              const debug = window.FlickletDebug || {
                info: console.log,
                warn: console.warn,
                error: console.error,
              };
              debug.info(`âœ… ${sectionId} visibility: ${tab === 'home' ? 'visible' : 'hidden'}`);
            } else {
              const debug = window.FlickletDebug || {
                info: console.log,
                warn: console.warn,
                error: console.error,
              };
              debug.warn(`âš ï¸ Home section not found: ${sectionId}`);
            }
          });
        } else {
          // Ultimate fallback - just log that we can't manage home sections
          console.log('âš ï¸ HomeSectionsConfig not available, skipping home section management');
        }
      }

      // Hide/show search bar based on tab configuration
      const searchContainer = document.querySelector('.top-search');
      if (searchContainer) {
        // Define which tabs should hide the search bar
        const TABS_WITHOUT_SEARCH = ['settings'];
        const shouldHideSearch = TABS_WITHOUT_SEARCH.includes(tab);

        if (shouldHideSearch) {
          searchContainer.style.display = 'none';
          console.log('ðŸ” Search bar hidden for', tab, 'tab');
        } else {
          searchContainer.style.display = '';
          console.log('ðŸ” Search bar shown for', tab, 'tab');
        }
      }

      // Load content for this tab first
      if (typeof updateTabContent === 'function') {
        updateTabContent(tab);
      }

      // Then update UI (including tab counts) after content is loaded
      this.updateUI();

      // Trigger counter system update after tab content is loaded
      if (window.CounterBootstrap && typeof window.CounterBootstrap.directRecount === 'function') {
        setTimeout(() => {
          window.CounterBootstrap.directRecount();
        }, 200);
      }

      // Dock FABs to the new active tab
      this.dockFABsToActiveTab();
    },

    /**
     * Toggle between light and dark theme
     */
    toggleTheme() {
      if (!window.ThemeManager) {
        console.warn('âš ï¸ ThemeManager not available');
        return;
      }

      const currentTheme = window.ThemeManager.theme;
      let newTheme;

      if (currentTheme === 'system') {
        newTheme = window.ThemeManager.effectiveTheme === 'dark' ? 'light' : 'dark';
      } else if (currentTheme === 'light') {
        newTheme = 'dark';
      } else {
        newTheme = 'light';
      }

      window.ThemeManager.theme = newTheme;

      // Update FAB icon
      const themeFab = document.getElementById('themeToggleFab');
      if (themeFab) {
        const icon = themeFab.querySelector('span');
        if (icon) {
          icon.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        }
      }

      console.log(`ðŸŒ™ Theme switched to: ${newTheme}`);
      this.showNotification(`Theme switched to ${newTheme}`, 'info');
    },

    /**
     * Toggle Mardi Gras mode
     */
    toggleMardiGras() {
      console.log('ðŸŽ­ toggleMardiGras called');

      if (!window.ThemeManager) {
        console.warn('âš ï¸ ThemeManager not available');
        return;
      }

      const currentMardi = window.ThemeManager.mardi;
      console.log('ðŸŽ­ Current Mardi Gras state:', currentMardi);

      const newMardi = currentMardi === 'on' ? 'off' : 'on';
      console.log('ðŸŽ­ New Mardi Gras state:', newMardi);

      window.ThemeManager.mardi = newMardi;

      // Debug: Check if the body attribute is being set
      console.log('ðŸŽ­ Body data-mardi attribute:', document.body.getAttribute('data-mardi'));
      console.log('ðŸŽ­ Body classes:', document.body.className);

      // Update FAB icon
      const mardiFab = document.getElementById('mardiGrasFab');
      console.log('ðŸŽ­ Mardi Gras FAB element:', mardiFab);
      if (mardiFab) {
        const icon = mardiFab.querySelector('span');
        console.log('ðŸŽ­ Mardi Gras FAB icon element:', icon);
        if (icon) {
          icon.textContent = newMardi === 'on' ? 'ðŸŽ‰' : 'ðŸŽ­';
          console.log('ðŸŽ­ Updated icon to:', icon.textContent);
        }
      }

      console.log(`ðŸŽ­ Mardi Gras mode: ${newMardi}`);
      this.showNotification(
        `Mardi Gras mode ${newMardi === 'on' ? 'enabled' : 'disabled'}`,
        'info',
      );
    },

    /**
     * Initialize FAB icons based on current theme state
     */
    initializeFABIcons() {
      // Wait for ThemeManager to be available
      if (!window.ThemeManager) {
        setTimeout(() => this.initializeFABIcons(), 100);
        return;
      }

      // Set theme toggle icon
      const themeFab = document.getElementById('themeToggleFab');
      if (themeFab) {
        const icon = themeFab.querySelector('span');
        if (icon) {
          const currentTheme = window.ThemeManager.effectiveTheme;
          icon.textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        }
      }

      // Set Mardi Gras toggle icon
      const mardiFab = document.getElementById('mardiGrasFab');
      if (mardiFab) {
        const icon = mardiFab.querySelector('span');
        if (icon) {
          const currentMardi = window.ThemeManager.mardi;
          icon.textContent = currentMardi === 'on' ? 'ðŸŽ‰' : 'ðŸŽ­';
        }
      }

      console.log('ðŸŽ¨ FAB icons initialized');
    },

    // ---------- UX Helpers ----------
    // Tab clicks are now handled by nav-init.js - single delegated listener
    // Legacy bindTabClicks removed to prevent conflicts

    setupEventListeners() {
      // Tab clicks are now handled by nav-init.js - no need to bind here
      // Legacy bindTabClicks() call removed to prevent conflicts

      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey || e.metaKey) {
          if (e.key === 'k') {
            e.preventDefault();
            document.getElementById('search')?.focus();
          } else if (e.key === 't') {
            e.preventDefault();
            toggleDarkMode();
          }
        }
      });

      // Overflow toggle functionality for MediaCard system
      document.addEventListener('click', (e) => {
        const t = e.target.closest('[data-overflow-toggle]');
        if (t) {
          const host = t.closest('.overflow');
          const exp = host.getAttribute('aria-expanded') === 'true';
          host.setAttribute('aria-expanded', !exp);
          e.preventDefault();
          return;
        }
        document.querySelectorAll('.overflow[aria-expanded="true"]').forEach(o => 
          o.setAttribute('aria-expanded', 'false')
        );
      });

      // Delegated actions for dynamic content
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-action]');
        if (!btn) return;
        const action = btn.dataset.action;

        // Skip handling if this is a MediaCard button (new system handles its own events)
        if (btn.closest('.media-card')) {
          return;
        }

        // Debug logging for button clicks
        console.log('[App] Button clicked:', {
          action: action,
          id: btn.dataset.id,
          element: btn,
          target: e.target,
        });

        // Route actions
        switch (action) {
          case 'addFromCache':
            addToListFromCache?.(Number(btn.dataset.id), btn.dataset.list);
            break;
          case 'move':
            moveItem?.(Number(btn.dataset.id), btn.dataset.list);
            break;
          case 'mark-watched':
            if (window.moveItem) {
              window.moveItem(Number(btn.dataset.id), 'watched');
            }
            break;
          case 'want-to-watch':
            if (window.moveItem) {
              window.moveItem(Number(btn.dataset.id), 'wishlist');
            }
            break;
          case 'start-watching':
            if (window.moveItem) {
              window.moveItem(Number(btn.dataset.id), 'watching');
            }
            break;
          case 'remove':
            removeItemFromCurrentList?.(Number(btn.dataset.id));
            break;
          case 'rate':
            setRating?.(Number(btn.dataset.id), Number(btn.dataset.rating));
            break;
          case 'like':
            setLikeStatus?.(Number(btn.dataset.id), 'like');
            break;
          case 'dislike':
            setLikeStatus?.(Number(btn.dataset.id), 'dislike');
            break;
          case 'open':
            openTMDBLink?.(Number(btn.dataset.id), btn.dataset.mediaType);
            break;
          case 'not-interested':
            // Handled by list-actions.js - do nothing here
            break;
          case 'track-episodes':
            // Handled by inline-script-03.js - do nothing here
            break;
          case 'sign-in':
            console.log('ðŸ” Sign-in button clicked');
            if (window.showSignInModal) {
              window.showSignInModal();
            } else {
              console.error('âŒ showSignInModal not available');
            }
            break;
          case 'share-lists':
            // Handled by inline-script-01.js - do nothing here
            break;
          case 'username-skip':
            // Username modal skip
            e.preventDefault();
            break;
          case 'add':
            // Handle add actions
            const id = btn.dataset.id || btn.getAttribute('data-id');
            const list = btn.dataset.list || btn.getAttribute('data-list') || 'wishlist';
            if (id && typeof window.addToListFromCache === 'function') {
              window.addToListFromCache(Number(id), list);
            }
            break;
          case 'open-flickword':
            // Handle FlickWord game opening
            console.log('ðŸŽ¯ FlickWord button clicked');
            if (typeof window.openFlickWordModal === 'function') {
              window.openFlickWordModal();
            } else {
              console.error('âŒ openFlickWordModal function not available');
            }
            break;
          case 'start-trivia':
            // Handle Trivia game opening
            console.log('ðŸ§  Trivia button clicked');
            if (typeof window.openTriviaModal === 'function') {
              window.openTriviaModal();
            } else {
              console.error('âŒ openTriviaModal function not available');
            }
            break;
          case 'username-save':
            // Username modal save
            e.preventDefault();
            e.stopPropagation();
            // Find the username modal and trigger save
            const usernameModal2 = document.getElementById('username-modal');
            if (usernameModal2) {
              const input = document.getElementById('username-input');
              const value = input ? input.value.trim() : '';
              // Find the parent wrapper (the div that was created in promptForUsername)
              const wrapper = usernameModal2.parentElement;
              if (wrapper && wrapper._usernameDone) {
                wrapper._usernameDone(value || null);
              }
            }
            break;
          case 'toggle-theme': {
            // mirror FAB behavior
            if (typeof window.applyThemeToggle === 'function') {
              window.applyThemeToggle();
            } else {
              // Fallback: read current and flip
              const cur = document.documentElement.getAttribute('data-theme') || 'light';
              const next = cur === 'light' ? 'dark' : 'light';
              document.documentElement.setAttribute('data-theme', next);
            }
            break;
          }
          default:
            console.warn(t('unknown_data_action') + ':', action);
        }
      });

      // FAB Event Handlers
      document.addEventListener('click', (e) => {
        // Settings FAB
        if (e.target.closest('#btnSettings')) {
          e.preventDefault();
          e.stopPropagation();
          console.log('âš™ï¸ Settings FAB clicked');
          console.log('âš™ï¸ Nav engine available:', !!window.navEngine);
          console.log('âš™ï¸ Nav engine activate function:', typeof window.navEngine?.activate);
          this.switchToTab('settings');
        }

        // Theme Toggle FAB
        if (e.target.closest('#themeToggleFab')) {
          e.preventDefault();
          e.stopPropagation();
          console.log('ðŸŒ™ Theme toggle FAB clicked');
          this.toggleTheme();
        }

        // Mardi Gras Toggle FAB
        if (e.target.closest('#mardiGrasFab')) {
          e.preventDefault();
          e.stopPropagation();
          console.log('ðŸŽ­ Mardi Gras FAB clicked - event handler triggered');
          this.toggleMardiGras();
        }
      });

      // DISABLED: Theme toggle - now handled in inline-script-03.js
      // document.getElementById('darkModeToggle')?.addEventListener('click', toggleDarkMode);

      // Language select
      const langSel = document.getElementById('langToggle');
      if (langSel) {
        langSel.addEventListener('change', (e) => {
          changeLanguage(e.target.value);
        });
      }

      // Account button is now handled by AuthManager via onclick attribute
      // No need to set up event listeners here
    },

    // Account management
    showSignInModal() {
      console.log('ðŸ” showSignInModal called - using FlickletAuth');

      // Check if offline mode is active
      if (!this.firebaseInitialized) {
        console.log('ðŸ”’ Offline mode active, not showing sign-in modal');
        this.showNotification(
          'Authentication is currently unavailable. Your data is stored locally and will sync when Firebase is available.',
          'info',
        );
        return;
      }

      // Check if modal already exists
      if (document.querySelector('.modal-backdrop[data-modal="login"]')) {
        console.log('âš ï¸ Auth modal already exists, not creating another');
        return;
      }

      // Use the existing openModal function from inline-script-02.js
      if (typeof window.openModal === 'function') {
        this.createSignInModal();
      } else {
        this.waitForOpenModal()
          .then(() => {
            console.log('âœ… openModal now available, creating sign-in modal');
            this.createSignInModal();
          })
          .catch(() => {
            console.error('âŒ openModal function not available after timeout');
            this.showNotification('Sign-in system is not ready. Please refresh the page.', 'error');
          });
      }
    },

    waitForOpenModal() {
      return new Promise((resolve, reject) => {
        const timeout = setTimeout(() => {
          reject(new Error('openModal function not available'));
        }, 5000);

        const handleModalReady = () => {
          clearTimeout(timeout);
          window.removeEventListener('modal-api-ready', handleModalReady);
          resolve();
        };

        window.addEventListener('modal-api-ready', handleModalReady);
      });
    },

    // Helper function to wait for settings section to be ready
    onSettingsReady(callback) {
      const settingsSection = document.getElementById('settingsSection');
      if (settingsSection) {
        callback();
        return;
      }

      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList') {
            const settingsSection = document.getElementById('settingsSection');
            if (settingsSection) {
              observer.disconnect();
              callback();
            }
          }
        });
      });

      observer.observe(document.body, { childList: true, subtree: true });
    },

    createSignInModal() {
      console.log('ðŸ” Creating sign-in modal...');
      try {
        window.openModal(
          t('sign_in_to_sync'),
          `
            <p style="margin-bottom: 20px;">${t('sign_in_subtitle_text')}</p>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:16px; justify-content:center; align-items:center; max-width:320px; margin:0 auto;">
              <button id="googleBtn" type="button" class="btn" style="font-size:14px; padding:12px 18px; min-height:44px;">ðŸ”’ Google</button>
              <button id="appleBtn" type="button" class="btn secondary" style="font-size:14px; padding:12px 18px; min-height:44px;">ðŸŽ Apple</button>
              <button id="emailBtn" type="button" class="btn secondary" style="font-size:14px; padding:12px 18px; min-height:44px; grid-column: 1 / -1;">âœ‰ï¸ Email</button>
            </div>
          `,
          'auth-modal',
        );

        // Set up event listeners for the modal buttons
        setTimeout(() => {
          const googleBtn = document.getElementById('googleBtn');
          const appleBtn = document.getElementById('appleBtn');
          const emailBtn = document.getElementById('emailBtn');

          if (googleBtn) {
            googleBtn.addEventListener('click', () => {
              if (window.FlickletAuth && window.FlickletAuth.loginWithGoogle) {
                window.FlickletAuth.loginWithGoogle();
              } else {
                console.error('âŒ FlickletAuth.loginWithGoogle not available');
                this.showNotification(t('google_signin_unavailable'), 'error');
              }
            });
          }

          if (appleBtn) {
            appleBtn.addEventListener('click', () => {
              if (window.FlickletAuth && window.FlickletAuth.loginWithApple) {
                window.FlickletAuth.loginWithApple();
              } else {
                console.error('âŒ FlickletAuth.loginWithApple not available');
                this.showNotification(t('apple_signin_unavailable'), 'error');
              }
            });
          }

          if (emailBtn) {
            emailBtn.addEventListener('click', () => {
              if (window.FlickletAuth && window.FlickletAuth.loginWithEmail) {
                window.FlickletAuth.loginWithEmail();
              } else {
                console.error('âŒ FlickletAuth.loginWithEmail not available');
                this.showNotification(t('email_signin_unavailable'), 'error');
              }
            });
          }
        }, 100);
      } catch (error) {
        console.error('âŒ Error creating sign-in modal:', error);
        this.showNotification(t('unable_to_show_signin'), 'error');
      }
    },

    showSignOutModal() {
      console.log('ðŸšª showSignOutModal called, currentUser:', this.currentUser);
      if (!this.currentUser) {
        console.log('âŒ No current user, cannot show sign out modal');
        return;
      }

      const email = this.currentUser.email || t('unknown');
      const displayName = this.currentUser.displayName || email.split('@')[0] || t('user');

      const confirmed = confirm(
        `${t('sign_out_confirmation')} ${displayName}?\n\n${t('email_label')}: ${email}`,
      );
      if (confirmed) {
        console.log('âœ… User confirmed sign out');
        // Call the new sign out method
        this.signOut();
      } else {
        console.log('âŒ User cancelled sign out');
      }
    },

    signOut() {
      if (typeof firebase !== 'undefined' && firebase.auth) {
        firebase
          .auth()
          .signOut()
          .then(() => {
            console.log('âœ… User signed out successfully');
            showNotification?.(t('signed_out_successfully'), 'success');
          })
          .catch((error) => {
            console.error('âŒ Sign out failed:', error);
            showNotification?.(t('sign_out_failed'), 'error');
          });
      } else {
        console.error('âŒ Firebase auth not available for sign out');
      }
    },

    // Optional feature hooks (no-ops here, but left for compatibility)
    initializeFlickWord() {
      // Guard: Check if required containers exist before initializing
      const flickwordTile = document.getElementById('flickwordTile');
      const triviaTile = document.getElementById('triviaTile');

      if (!flickwordTile && !triviaTile) {
        console.warn('[FlickletApp] Games containers not found, skipping games initialization');
        return;
      }

      // Log once if containers are missing
      if (!flickwordTile) {
        console.warn('[FlickletApp] flickwordTile not found');
      }
      if (!triviaTile) {
        console.warn('[FlickletApp] triviaTile not found');
      }
    },

    initializeFlickWordModal() {
      console.log('ðŸŽ¯ Initializing FlickWord modal...');
      try {
        // Import and initialize the flickword modal module
        import('/scripts/modules/flickword-modal.js')
          .then((module) => {
            if (module.initializeFlickWordModal) {
              module.initializeFlickWordModal();
              console.log('âœ… FlickWord modal initialized successfully');
            } else {
              console.warn('âš ï¸ initializeFlickWordModal function not found in module');
            }
          })
          .catch((error) => {
            console.error('âŒ Failed to load FlickWord modal module:', error);
          });
      } catch (error) {
        console.error('âŒ Error initializing FlickWord modal:', error);
      }
    },

    initializeTriviaModal() {
      console.log('ðŸ§  Initializing Trivia modal...');
      try {
        // Import and initialize the trivia modal module
        import('/scripts/modules/trivia-modal.js')
          .then((module) => {
            if (module.initializeTriviaModal) {
              module.initializeTriviaModal();
              console.log('âœ… Trivia modal initialized successfully');
            } else {
              console.warn('âš ï¸ initializeTriviaModal function not found in module');
            }
          })
          .catch((error) => {
            console.error('âŒ Failed to load Trivia modal module:', error);
          });
      } catch (error) {
        console.error('âŒ Error initializing Trivia modal:', error);
      }
    },
    // checkAndPromptLogin() removed - handled in auth listener

    // Search functionality moved to search.js module

    // ---------- Genres ----------
    initializeGenres() {
      console.log('ðŸŽ¬ Initializing genres...');

      // Call loadGenres if available
      if (typeof window.loadGenres === 'function') {
        console.log('âœ… loadGenres function found, calling it');
        window.loadGenres();
      } else {
        console.log('âŒ loadGenres function not available');
      }

      console.log('âœ… Genres initialization complete');
    },

    // Enter key functionality moved to search.js module

    // Search functions moved to search.js module

    // Debug method to check account button state
    debugAccountButton() {
      const accountBtn = document.getElementById('accountBtn');
      if (accountBtn) {
        console.log('ðŸ” Account button debug info:', {
          textContent: accountBtn.textContent,
          innerHTML: accountBtn.innerHTML,
          title: accountBtn.title,
          currentUser: this.currentUser,
          firebaseDisplayName: this.currentUser?.displayName,
          email: this.currentUser?.email,
        });
      }
    },

    // Test method to verify sign-in modal works
    testSignInModal() {
      console.log('ðŸ§ª Testing sign-in modal...');
      try {
        this.showSignInModal();
        console.log('âœ… Sign-in modal test successful');
      } catch (error) {
        console.error('âŒ Sign-in modal test failed:', error);
      }
    },

    // Debug method to check authentication system status
    debugAuthSystem() {
      console.log('ðŸ” Authentication system debug info:', {
        FlickletAuth: !!window.FlickletAuth,
        FlickletAuthMethods: window.FlickletAuth ? Object.keys(window.FlickletAuth) : 'N/A',
        openModal: typeof window.openModal,
        emailLogin: typeof window.emailLogin,
        firebase: typeof firebase,
        firebaseAuth: typeof firebase?.auth,
        currentUser: this.currentUser,
        authInitialized: this.authInitialized,
        firebaseInitialized: this.firebaseInitialized,
      });
    },

    // Language change function - delegates to centralized LanguageManager
    changeLanguage(newLang) {
      console.log('ðŸŒ FlickletApp.changeLanguage delegating to LanguageManager:', newLang);

      // Emit language:changed event for counter system
      document.dispatchEvent(
        new CustomEvent('language:changed', {
          detail: { newLang: newLang },
        }),
      );

      if (window.LanguageManager) {
        return window.LanguageManager.changeLanguage(newLang);
      } else {
        console.warn('ðŸŒ LanguageManager not available, falling back to window.changeLanguage');
        if (typeof window.changeLanguage === 'function') {
          return window.changeLanguage(newLang);
        }
      }
    },

    // CRITICAL: Save app data to Firebase (missing function that was causing sync issues)
    async saveData() {
      try {
        // Auth guard: Ensure auth is ready before any Firestore operations
        const user = await window.ensureUser();
        const uid = user.uid;
        const db = firebase.firestore();

        FlickletDebug.info('ðŸ’¾ FlickletApp.saveData: Starting lean save to Firebase');

        // Use lean serializer for minimal payload
        const minimal = window.pruneWatchlistsShape(window.appData || {});
        const payload = {
          ...minimal,
          uid,
          lastUpdated: firebase.firestore.FieldValue.serverTimestamp?.(),
        };
        const json = JSON.stringify(payload);
        const bytes = window.computeBytes(json);

        // Abort if payload is still too large
        if (bytes > 900 * 1024) {
          console.warn(
            '[saveData] payload too large, skipping Firestore save:',
            (bytes / 1024).toFixed(1),
            'KB',
          );
          // Still try to save locally with lean data
          window.saveAppData('flicklet-data', minimal);
          return;
        }

        // Save to Firestore
        await db.doc(`users/${uid}`).set(payload, { merge: true });
        console.info('[saveData] Firestore save OK:', (bytes / 1024).toFixed(1), 'KB');

        // Mirror to LocalStorage (guarded)
        window.saveAppData('flicklet-data', payload);

        FlickletDebug.info(
          'âœ… FlickletApp.saveData: Lean data saved successfully to Firebase and localStorage',
        );
      } catch (error) {
        FlickletDebug.error('âŒ FlickletApp.saveData failed:', error);

        // Fallback to localStorage only with lean data
        try {
          const minimal = window.pruneWatchlistsShape(window.appData || {});
          window.saveAppData('flicklet-data', minimal);
          FlickletDebug.info('ðŸ’¾ Fallback: Lean data saved to localStorage only');
        } catch (localError) {
          FlickletDebug.error('âŒ Even localStorage save failed:', localError);
        }

        throw error;
      }
    },

    // ---------- SEARCH STATE MANAGEMENT ----------
    /**
     * Process: Search State Management
     * Purpose: Track search state and ensure tabs remain visible during search
     * Data Source: Search controller calls this method
     * Update Path: Called by search-controller.js when entering/exiting search
     * Dependencies: Tab visibility system, search controller
     */
    setSearching(searching) {
      this.isSearching = searching;
      console.log('ðŸ” FlickletApp search state changed:', searching);

      // Ensure tabs remain visible during search
      if (searching) {
        const tabContainer = document.querySelector('.tab-container');
        if (tabContainer) {
          tabContainer.style.display = 'flex';
          console.log('ðŸ” Tab container made visible during search');
        }
      }
    },

    // ---------- FAB DOCKING SYSTEM ----------
    /**
     * Process: FAB Docking
     * Purpose: Dock all FABs to the currently active tab container
     * Data Source: DOM query for .tab-section:not([hidden]) and FAB elements
     * Update Path: Automatically triggered on tab switches
     * Dependencies: CSS .fab-dock class, tab switching system
     */
    dockFABsToActiveTab() {
      const FAB_SELECTORS = '.fab, .fab-left'; // include all FAB variants
      const ACTIVE_PANEL_SELECTOR = '.tab-section:not([hidden])';

      function getActivePanel() {
        return document.querySelector(ACTIVE_PANEL_SELECTOR);
      }

      function ensureDock(panel) {
        if (!panel) return null;
        let dock = panel.querySelector(':scope > .fab-dock');
        if (!dock) {
          dock = document.createElement('div');
          dock.className = 'fab-dock';
          panel.appendChild(dock);
        }
        return dock;
      }

      function moveFABsToDock() {
        const panel = getActivePanel();
        if (!panel) return;
        const dock = ensureDock(panel);
        if (!dock) return;

        // Move settings FAB (fab-left) to left side
        const settingsFab = document.querySelector('.fab-left');
        if (settingsFab && !dock.contains(settingsFab)) {
          settingsFab.style.display = ''; // Show the FAB
          dock.appendChild(settingsFab);
        }

        // Move fab-stack (theme buttons) to right side
        const fabStack = document.querySelector('.fab-stack');
        if (fabStack && !dock.contains(fabStack)) {
          fabStack.style.display = 'flex'; // Show the stack
          dock.appendChild(fabStack);
        }

        // Move any individual FABs that aren't in a stack
        const individualFabs = Array.from(document.querySelectorAll('.fab')).filter(
          (btn) => !btn.closest('.fab-stack') && !dock.contains(btn),
        );

        if (individualFabs.length > 0) {
          // Create a stack for individual FABs if it doesn't exist
          let individualStack = dock.querySelector('.individual-fab-stack');
          if (!individualStack) {
            individualStack = document.createElement('div');
            individualStack.className = 'fab-stack individual-fab-stack';
            dock.appendChild(individualStack);
          }

          individualFabs.forEach((btn) => individualStack.appendChild(btn));
        }

        // FAB docking completed
      }

      // Initial run - try multiple times to ensure it works
      moveFABsToDock();
      setTimeout(moveFABsToDock, 100);
      setTimeout(moveFABsToDock, 500);

      // Re-run whenever tabs change (click on [data-tab] or programmatic)
      document.addEventListener('click', (e) => {
        // Adjust if your tab triggers differ
        if (e.target.closest?.('[data-tab], .tab, .tab-link')) {
          setTimeout(moveFABsToDock, 0); // let the 'active' class switch first
        }
      });

      // Optional public hook if your code switches tabs programmatically
      window.reDockFABs = moveFABsToDock;

      // If your app fires a custom event on tab switch, hook it:
      document.addEventListener('tab:changed', moveFABsToDock);
    },

    // Settings tab functionality
    setupSettingsTabs() {
      const settingsTabs = document.querySelectorAll('.settings-tabs button[data-target]');
      settingsTabs.forEach((tab) => {
        tab.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          const targetId = tab.getAttribute('data-target');
          console.log('Settings tab clicked:', targetId);

          // Remove active class from all tabs
          settingsTabs.forEach((btn) => {
            btn.classList.remove('active');
            btn.setAttribute('aria-selected', 'false');
          });

          // Add active class to clicked tab
          tab.classList.add('active');
          tab.setAttribute('aria-selected', 'true');

          // Hide all sections
          const sections = document.querySelectorAll('.settings-section');
          sections.forEach((section) => {
            section.classList.remove('active');
            section.style.display = 'none';
          });

          // Show target section
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            targetSection.classList.add('active');
            targetSection.style.display = 'block';
          }
        });
      });
    },
  };

  // Expose singleton
  window.FlickletApp = App;

  // Expose clearUserData function globally for auth manager
  window.clearUserData = () => App.clearUserData();

  // Also expose as instance for compatibility
  window.FlickletAppInstance = App;

  // Initialize the app when DOM is ready
  document.addEventListener('DOMContentLoaded', () => {
    console.log('ðŸš€ DOMContentLoaded - initializing FlickletApp');
    
    // Immediate fallback: ensure navigation is visible
    console.log('[app.js] DOMContentLoaded - ensuring navigation is visible');
    
    // Make search bar visible
    document.body.classList.add('has-search');
    
    // Ensure home tab is active by default
    document.body.classList.add('tab-home');
    
    // Ensure navigation is visible
    const navigation = document.getElementById('navigation');
    if (navigation) {
      navigation.style.display = 'flex';
      navigation.style.visibility = 'visible';
      console.log('[app.js] Navigation made visible on DOMContentLoaded');
    }
    
    App.init().catch((error) => {
      console.error('âŒ FlickletApp initialization failed:', error);
    });
  });

  // Expose UserViewModel globally for verification
  window.UserViewModel = UserViewModel;

  // Initialize display name input with current value
  window.initializeDisplayNameInput = function() {
    const input = document.getElementById('displayNameInput');
    if (input) {
      const currentName = window.appData?.settings?.displayName || 
                         window.appData?.settings?.username || 
                         window.SettingsManager?.get('displayName') || '';
      input.value = currentName;
      console.log('âœ… Display name input initialized with:', currentName);
    }
  };

  // Listen for data ready events to initialize display name input
  document.addEventListener('app:data:ready', (event) => {
    console.log('ðŸ“Š Data ready event received:', event.detail?.source);
    // Initialize display name input after data is loaded
    setTimeout(() => {
      window.initializeDisplayNameInput();
      
      // Also update UserViewModel if user is authenticated to pick up display name from settings
      if (window.FlickletApp && window.FlickletApp.currentUser) {
        UserViewModel.update(window.FlickletApp.currentUser);
        console.log('âœ… UserViewModel refreshed with settings data');
      }
    }, 100);
  });

  // Ensure user function for auth guards
  window.ensureUser = async function () {
    // Wait for Firebase to be ready
    if (!window.firebase || !window.firebaseAuth) {
      console.log('[ensureUser] Waiting for Firebase...');
      await new Promise((resolve) => {
        const checkFirebase = () => {
          if (window.firebase && window.firebaseAuth) {
            resolve();
          } else {
            setTimeout(checkFirebase, 100);
          }
        };
        checkFirebase();
      });
    }

    const user = window.firebaseAuth.currentUser;
    if (!user) {
      throw new Error('No authenticated user');
    }

    return user;
  };

  // Custom Yes/No confirmation dialog
  window.showYesNoDialog = function(message) {
    return new Promise((resolve) => {
      // Create modal overlay
      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
      `;

      // Create dialog box
      const dialog = document.createElement('div');
      dialog.style.cssText = `
        background: white;
        padding: 24px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 400px;
        text-align: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      `;

      dialog.innerHTML = `
        <p style="margin: 0 0 20px 0; font-size: 16px; line-height: 1.4;">${message}</p>
        <div style="display: flex; gap: 12px; justify-content: center;">
          <button id="yesBtn" style="
            background: #ff4c8d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
          ">Yes</button>
          <button id="noBtn" style="
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
          ">No</button>
        </div>
      `;

      overlay.appendChild(dialog);
      document.body.appendChild(overlay);

      // Handle button clicks
      const yesBtn = dialog.querySelector('#yesBtn');
      const noBtn = dialog.querySelector('#noBtn');

      yesBtn.onclick = () => {
        document.body.removeChild(overlay);
        resolve(true);
      };

      noBtn.onclick = () => {
        document.body.removeChild(overlay);
        resolve(false);
      };

      // Handle escape key
      const handleEscape = (e) => {
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
          document.removeEventListener('keydown', handleEscape);
          resolve(false);
        }
      };
      document.addEventListener('keydown', handleEscape);
    });
  };

  // Global functions for HTML onclick handlers
  window.saveDisplayName = async function () {
    const input = document.getElementById('displayNameInput');
    if (!input) {
      console.error('Display name input not found');
      return;
    }

    const newName = input.value.trim();
    if (!newName) {
      console.warn('Display name is empty');
      return;
    }

    // Check if this is an overwrite of existing username
    const currentUsername = window.appData?.settings?.username;
    if (currentUsername && currentUsername !== newName) {
      const confirmed = await window.showYesNoDialog(
        `This will change your username from "${currentUsername}" to "${newName}". Are you sure you want to continue?`
      );
      if (!confirmed) {
        console.log('Username change cancelled by user');
        return;
      }
    }

    try {
      console.log('ðŸ”„ Starting display name save process for:', newName);
      
      // Update appData
      if (!window.appData) {
        window.appData = { settings: {} };
        console.log('ðŸ“ Created new appData object');
      }
      if (!window.appData.settings) {
        window.appData.settings = {};
        console.log('ðŸ“ Created new appData.settings object');
      }

      window.appData.settings.username = newName;
      window.appData.settings.displayName = newName;
      console.log('âœ… Updated appData.settings:', { username: newName, displayName: newName });

      // Save to SettingsManager for proper persistence
      if (window.SettingsManager && typeof window.SettingsManager.set === 'function') {
        window.SettingsManager.set('displayName', newName);
        window.SettingsManager.set('username', newName);
        console.log('âœ… Display name saved to SettingsManager:', newName);
      } else {
        console.warn('âš ï¸ SettingsManager not available or set method missing');
      }

      // Save to localStorage
      try {
        if (typeof window.saveAppData === 'function') {
          window.saveAppData();
          console.log('âœ… Data saved via saveAppData function');
        } else {
          localStorage.setItem('flicklet-data', JSON.stringify(window.appData));
          console.log('âœ… Data saved to localStorage directly');
        }
      } catch (storageError) {
        console.error('âŒ Failed to save to localStorage:', storageError);
        throw new Error('Failed to save to localStorage: ' + storageError.message);
      }

      // Save to Firebase if user is signed in - use the dedicated setUsername method
      if (window.FlickletApp && window.FlickletApp.currentUser) {
        try {
          // Use the existing setUsername method which handles Firebase properly
          const firebaseSuccess = await window.FlickletApp.setUsername(
            window.FlickletApp.currentUser.uid, 
            newName
          );
          
          if (firebaseSuccess) {
            console.log('âœ… Username saved to Firebase via setUsername:', newName);
          } else {
            console.error('âŒ setUsername returned false');
            throw new Error('setUsername method returned false');
          }
        } catch (firebaseError) {
          console.error('âŒ Failed to save username to Firebase:', firebaseError);
          // Don't continue if Firebase save fails - this is critical
          throw new Error('Failed to save to Firebase: ' + firebaseError.message);
        }
      }

      // Update current user object if authenticated
      if (window.FlickletApp && window.FlickletApp.currentUser) {
        window.FlickletApp.currentUser.displayName = newName;
        console.log('âœ… Updated currentUser.displayName:', newName);
      }

      // Set a flag to prevent data loading from overriding our changes
      window.__USERNAME_JUST_SAVED__ = newName;
      setTimeout(() => {
        delete window.__USERNAME_JUST_SAVED__;
      }, 5000); // Clear flag after 5 seconds

      // Update UI immediately using the new method
      try {
        if (window.UserViewModel && typeof window.UserViewModel.updateDisplayName === 'function') {
          window.UserViewModel.updateDisplayName(newName);
          console.log('âœ… UserViewModel.updateDisplayName called');
        } else {
          console.warn('âš ï¸ UserViewModel not available or updateDisplayName method missing');
        }
        
        // Also trigger a full UserViewModel update to ensure consistency
        if (window.FlickletApp && window.FlickletApp.currentUser && window.UserViewModel) {
          window.UserViewModel.update(window.FlickletApp.currentUser);
          console.log('âœ… UserViewModel.update called with currentUser');
        }
      } catch (uiError) {
        console.error('âŒ Failed to update UI:', uiError);
        // Don't throw here - data is saved, just UI update failed
      }

      console.log('âœ… Display name saved:', newName);

      // Show success feedback
      const btn = document.getElementById('saveNameBtn');
      if (btn) {
        const originalText = btn.innerHTML;
        btn.innerHTML = 'âœ… Saved!';
        btn.style.background = '#51cf66';
        setTimeout(() => {
          btn.innerHTML = originalText;
          btn.style.background = '';
        }, 2000);
      }
    } catch (error) {
      console.error('âŒ Failed to save display name:', error);
      const errorMessage = error.message || 'Unknown error occurred';
      alert(`Failed to save display name: ${errorMessage}. Please try again.`);
      
      // Show error feedback
      const btn = document.getElementById('saveNameBtn');
      if (btn) {
        const originalText = btn.innerHTML;
        btn.innerHTML = 'âŒ Error';
        btn.style.background = '#dc3545';
        setTimeout(() => {
          btn.innerHTML = originalText;
          btn.style.background = '';
        }, 3000);
      }
    }
  };

  /**
   * Process: Back to Top Functionality
   * Purpose: Adds floating back-to-top button that appears on scroll
   * Data Source: Window scroll events
   * Update Path: Modify scroll threshold or button styling
   * Dependencies: CSS for .back-to-top class
   */
  FlickletApp.initBackToTop = function initBackToTop() {
    try {
      const NS = '[app]';
      const log = (...a) => console.log(NS, ...a);

      // Wait for DOM to be ready
      if (!document.body) {
        log('DOM not ready, deferring back-to-top initialization');
        setTimeout(() => FlickletApp.initBackToTop(), 100);
        return;
      }

      // Create back-to-top button
      const backToTopBtn = document.createElement('button');
      backToTopBtn.className = 'back-to-top';
      backToTopBtn.innerHTML = 'â†‘';
      backToTopBtn.setAttribute('aria-label', 'Back to top');
      backToTopBtn.setAttribute('title', 'Back to top');

      // Add to body
      document.body.appendChild(backToTopBtn);

      // Scroll handler
      let isVisible = false;
      const scrollThreshold = 300; // Show after scrolling 300px

      function handleScroll() {
        const scrollY = window.scrollY || document.documentElement.scrollTop;
        const shouldShow = scrollY > scrollThreshold;

        if (shouldShow !== isVisible) {
          isVisible = shouldShow;
          if (isVisible) {
            backToTopBtn.classList.add('visible');
          } else {
            backToTopBtn.classList.remove('visible');
          }
        }
      }

      // Click handler
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth',
        });
      });

      // Add scroll listener
      window.addEventListener('scroll', handleScroll, { passive: true });

      log('Back-to-top functionality initialized');
    } catch (e) {
      console.warn('[app] initBackToTop failed:', e?.message || e);
    }
  };

  // Initialize back-to-top functionality
  FlickletApp.initBackToTop();

  // Expose saveData globally for use by other modules
  window.saveData = FlickletApp.saveData.bind(FlickletApp);
})();

```

## _legacy_v1\www\js\flags.js
```
// Feature flags and safety guard for Flicklet - v28.82
// Cleaned up - removed zombie flags, kept only actively used ones
window.FLAGS = Object.assign(
  {
    // Core system flags
    proEnabled: false, // Pro is off by default unless user account says otherwise
    notifEngineEnabled: true, // core notifications (free)
    notifAdvancedEnabled: true, // PRO
    statsEnabled: true,
    skeletonsEnabled: true,
    
    // UI/UX flags
    mobilePolishEnabled: true, // mobile layout polish
    notesChipEnabled: true, // notes/tags chip on cards
    shareModalSanityEnabled: true, // share modal a11y + scroll lock + focus trap
    condensedModeFeatureEnabled: true, // condensed mode hardening
    safeAreasSanityEnabled: true, // sticky & safe-areas sanity
    a11yPolishEnabled: true, // tap targets & a11y polish
    
    // Feature flags
    themePacksEnabled: true, // theme packs
    providersEnabled: true, // where to watch providers
    extrasEnabled: true, // extras/outtakes discovery
    triviaEnabled: true, // per-card trivia chips
    seriesOrganizerEnabled: true, // card declutter (progressive disclosure)
    
    // Card system
    cards_v2: true, // Card v2 system for personalized rows
    
    // Home row flags (actively used)
    homeRowCurrentlyWatching: true, // Currently Watching Preview row
    homeRowNextUp: true, // Next Up This Week row
    homeRowCurated: true, // Curated Sections row
    homeRowSpotlight: true, // Community Spotlight row
    homeRowPlayAlong: true, // Play Along row (Trivia & FlickWord)
    homeRowFeedback: true, // Feedback Tile row
    
    // Modal flags
    flickwordModalEnabled: true, // optional iframe modal
    
    // Community features
    communityPlayer: true, // Community player placeholder
  },
  window.FLAGS || {},
);

window.guard = (cond, fn) => {
  try {
    if (cond) fn();
  } catch (e) {
    console.error(e);
  }
};

console.log('%cFlicklet safe mode loaded.', 'padding:2px 6px;border:1px solid #000');

```

## _legacy_v1\www\js\functions.js
```
/* ============== Core Application Functions (Cleaned) ============== */
(function () {
  'use strict';
  console.log('ðŸ”§ functions.js IIFE starting execution...');
  try {
    // Safe polyfill for guard function
    window.guard ||= (cond, fn) => {
      if (cond && typeof fn === 'function') fn();
    };
  console.log('ðŸ”§ Basic setup completed, continuing...');
  
  // Type-aware TMDB resolver with movieâ†’tv 404 fallback
  window.resolveTMDBItem = async function resolveTMDBItem(id, typeHint = null) {
    const NS = '[tmdb-resolver]';
    const log = (...a) => console.log(NS, ...a);
    
    try {
      // Try hinted type first if available
      if (typeHint && (typeHint === 'movie' || typeHint === 'tv')) {
        log(`Trying hinted type: ${typeHint} for id ${id}`);
        try {
          const data = await window.tmdbGet(`${typeHint}/${id}`);
          if (data && data.id) {
            return {
              ...data,
              media_type: typeHint
            };
          }
        } catch (error) {
          log(`Hinted type ${typeHint} failed for id ${id}, will try fallback`);
        }
      }
      
      // Smart fallback: try both movie and tv, return the first successful result
      log(`Trying both movie and tv for id ${id}`);
      const promises = [
        window.tmdbGet(`movie/${id}`).then(data => ({ ...data, media_type: 'movie' })).catch(() => null),
        window.tmdbGet(`tv/${id}`).then(data => ({ ...data, media_type: 'tv' })).catch(() => null)
      ];
      
      const results = await Promise.allSettled(promises);
      const successful = results.find(result => result.status === 'fulfilled' && result.value && result.value.id);
      
      if (successful) {
        log(`Found ${successful.value.media_type} for id ${id}`);
        return successful.value;
      }
      
      throw new Error(`No data found for id ${id} in any media type`);
    } catch (error) {
      log(`All resolution attempts failed for id ${id}:`, error.message);
      throw error;
    }
  };
  
  // Define addToListFromCache function IMMEDIATELY after basic setup to ensure it's always available
  console.log('ðŸ”§ Defining addToListFromCache function...');
    window.addToListFromCache = async function addToListFromCache(id, list) {
      console.log('ðŸ“ addToListFromCache called with:', { id, list });
      // Try to find the item in search results or use a basic item structure
      let item = null;
      // Check if we can find the item in search results
      const searchRoot =
        document.getElementById('searchResultsList') ||
        document.getElementById('searchResultsGrid') ||
        document.getElementById('searchResults') ||
        document;
      if (searchRoot) {
        const card = searchRoot.querySelector(`[data-id="${id}"]`);
        if (card) {
          // Try to get the stored item data first
          if (card.dataset.itemData) {
            try {
              item = JSON.parse(card.dataset.itemData);
              console.log('ðŸ“ Found stored item data:', item);
            } catch (e) {
              console.warn('âš ï¸ Failed to parse stored item data:', e);
            }
          }
          // Fallback: extract item data from the card
          if (!item) {
            // Try multiple selectors for title (MediaCard system uses .title)
            const title = card.querySelector('.title')?.textContent || 
                         card.querySelector('.unified-card-title')?.textContent || 
                         card.querySelector('.media-card-title')?.textContent ||
                         card.querySelector('h3')?.textContent ||
                         'Unknown';
            const subtitle = card.querySelector('.sub')?.textContent || 
                           card.querySelector('.unified-card-subtitle')?.textContent || 
                           card.querySelector('.media-card-subtitle')?.textContent ||
                           '';
            const mediaType = card.dataset.mediaType || card.dataset.type || 'movie';
            // Create a basic item structure
            item = {
              id: Number(id),
              title: title,
              name: title, // For TV shows
              media_type: mediaType,
              // Add other fields as needed
            };
            console.log('ðŸ“ Extracted item data from card:', item);
          }
        }
      }
      // If we couldn't find the item, check if it's already in appData first
      if (!item) {
        console.log('ðŸ“ Item not found in search cache, checking appData...');
        const appData = window.appData || {};
        const tv = appData.tv || {};
        const movies = appData.movies || {};
        
        // Search through all lists to find the item
        const allLists = [
          ...(Array.isArray(tv.watching) ? tv.watching : []),
          ...(Array.isArray(tv.wishlist) ? tv.wishlist : []),
          ...(Array.isArray(tv.watched) ? tv.watched : []),
          ...(Array.isArray(movies.watching) ? movies.watching : []),
          ...(Array.isArray(movies.wishlist) ? movies.wishlist : []),
          ...(Array.isArray(movies.watched) ? movies.watched : []),
        ];
        
        const existingItem = allLists.find((item) => String(item.id) === String(id));
        if (existingItem) {
          console.log('ðŸ“ Found existing item in appData:', existingItem);
          item = existingItem;
        }
      }
      
      // If we still couldn't find the item, fetch full data from TMDB using type-aware resolver
      if (!item) {
        console.log('ðŸ“ Item not found anywhere, fetching from TMDB...');
        try {
          // Extract type hint from search card if available
          let typeHint = null;
          if (searchRoot) {
            const card = searchRoot.querySelector(`[data-id="${id}"]`);
            if (card) {
              typeHint = card.dataset.mediaType || card.dataset.type;
            }
          }
          
          // Use type-aware resolver
          const tmdbData = await window.resolveTMDBItem(id, typeHint);
          if (tmdbData && tmdbData.id) {
            item = {
              id: Number(id),
              title: tmdbData.title || tmdbData.name || `Item ${id}`,
              name: tmdbData.name || tmdbData.title || `Item ${id}`,
              media_type: tmdbData.media_type,
              poster_path: tmdbData.poster_path,
              release_date: tmdbData.release_date || tmdbData.first_air_date,
              vote_average: tmdbData.vote_average,
              overview: tmdbData.overview,
              // Add other fields as needed
            };
            console.log('ðŸ“ Fetched full TMDB data:', item);
          } else {
            throw new Error('No data from TMDB');
          }
        } catch (error) {
          console.warn('âš ï¸ Failed to fetch TMDB data, creating basic item:', error);
          // Fallback to basic structure
          item = {
            id: Number(id),
            title: `Item ${id}`,
            name: `Item ${id}`,
            media_type: 'movie', // Default fallback
          };
        }
      }
      // Use the existing addToList function or create a fallback
      if (typeof window.addToList === 'function') {
        const success = window.addToList(item, list);
        if (success) {
          console.log('âœ… Successfully added item to', list);
          if (typeof window.showNotification === 'function') {
            window.showNotification(`Added to ${list}`, 'success');
          }
          // Remove/hide the card from Search and update count
          try {
            const card =
              searchRoot.querySelector(`[data-id="${id}"]`) ||
              searchRoot.querySelector(`[data-item-id="${id}"]`);
            if (card) {
              card.remove(); // hide from Search instantly
              const resultsCount = document.getElementById('resultsCount');
              if (resultsCount) {
                const remaining = searchRoot.querySelectorAll('[data-id], [data-item-id]').length;
                resultsCount.textContent = String(remaining);
              }
            }
          } catch (e) {
            console.warn('Could not remove search card after add:', e);
          }
        } else {
          console.log('âš ï¸ Failed to add item to', list);
          if (typeof window.showNotification === 'function') {
            window.showNotification(`Failed to add to ${list}`, 'error');
          }
        }
      } else {
        // Fallback: implement addToList directly here
        console.log('ðŸ“ addToList not available, using fallback implementation');
        try {
          // Ensure appData structure exists
          if (!window.appData) {
            window.appData = { tv: {}, movies: {} };
          }
          const mediaType = item.media_type || (item.first_air_date ? 'tv' : 'movie');
          const category = mediaType === 'tv' ? 'tv' : 'movies';
          
          // Ensure the item has the correct media_type field
          if (!item.media_type) {
            item.media_type = mediaType;
          }
          
          if (!window.appData[category]) {
            window.appData[category] = {};
          }
          if (!window.appData[category][list]) {
            window.appData[category][list] = [];
          }
          // Use adapter as canonical source - check if item already exists
          const uid = window.firebaseAuth?.currentUser?.uid || null;
          const watchlists = await window.WatchlistsAdapter.load(uid);
          const listKey = list + 'Ids';
          const exists = watchlists[listKey] && watchlists[listKey].includes(String(item.id));
          if (!exists) {
            // Add to appData for legacy compatibility
            window.appData[category][list].push(item);
            console.log('âœ… Successfully added item to', list, 'using fallback');
            // Update adapter cache
            if (
              window.WatchlistsAdapter &&
              typeof window.WatchlistsAdapter.addItem === 'function'
            ) {
              const adapterResult = window.WatchlistsAdapter.addItem(item.id, list);
              console.log('ðŸ“ WatchlistsAdapter.addItem result:', adapterResult);
            }
            // Save data
            if (typeof window.saveAppData === 'function') {
              console.log('ðŸ’¾ Saving app data...');
              window.saveAppData();
            }
            // Also save to Firebase
            if (typeof window.saveData === 'function') {
              console.log('ðŸ”„ Calling window.saveData() to sync to Firebase...');
              window.saveData().then(() => {
                // Invalidate WatchlistsAdapter cache after Firebase save to force reload
                if (window.WatchlistsAdapter && typeof window.WatchlistsAdapter.invalidate === 'function') {
                  console.log('ðŸ”„ Invalidating WatchlistsAdapter cache after Firebase save...');
                  window.WatchlistsAdapter.invalidate();
                }
              }).catch((error) => {
                console.error('âŒ Firebase save failed:', error);
              });
            }
            // Emit cards:changed event for centralized count updates
            console.log('ðŸ“¡ Emitting cards:changed event...');
            document.dispatchEvent(
              new CustomEvent('cards:changed', {
                detail: { source: 'addToListFromCache', itemId: id, list: list },
              }),
            );
            if (window.FlickletApp && typeof window.FlickletApp.updateUI === 'function') {
              console.log('ðŸ”„ Calling FlickletApp.updateUI...');
              window.FlickletApp.updateUI();
            }
            if (typeof window.showNotification === 'function') {
              console.log('ðŸ”” Showing notification...');
              window.showNotification(`Added to ${list}`, 'success');
            }
            // Remove/hide the card from Search and update count
            try {
              const card =
                searchRoot.querySelector(`[data-id="${id}"]`) ||
                searchRoot.querySelector(`[data-item-id="${id}"]`);
              if (card) {
                card.remove(); // hide from Search instantly
                const resultsCount = document.getElementById('resultsCount');
                if (resultsCount) {
                  const remaining = searchRoot.querySelectorAll(
                    '[data-id], [data-item-id]',
                  ).length;
                  resultsCount.textContent = String(remaining);
                }
              }
            } catch (e) {
              console.warn('Could not remove search card after add:', e);
            }
          } else {
            console.log('â„¹ï¸ Item already exists in list');
            if (typeof window.showNotification === 'function') {
              window.showNotification(`Already in ${list}`, 'info');
            }
          }
        } catch (error) {
          console.error('âŒ Fallback addToList failed:', error);
          if (typeof window.showNotification === 'function') {
            window.showNotification('Failed to add item', 'error');
          }
        }
      }
    };
    
      console.log('âœ… addToListFromCache function defined successfully');
    
  } catch (error) {
    console.error('âŒ Error in basic setup:', error);
    return; // Exit the IIFE if there's an error
  }
  // ==== Mobile polish guard (feature-flagged) ====
  // Ensure a FLAGS bucket exists
  window.FLAGS = window.FLAGS || {};
  if (typeof window.FLAGS.mobilePolishGuard === 'undefined') {
    window.FLAGS.mobilePolishGuard = true; // default ON
  }
  // WatchlistsAdapter is now the canonical data source (v28.99)
  window.mobilePolishGate = function mobilePolishGate() {
    try {
      console.log('ðŸ”§ Mobile polish gate starting...');
      if (!window.FLAGS.mobilePolishGuard) {
        FlickletDebug.info('ðŸ“± Mobile polish guard disabled via FLAGS.mobilePolishGuard=false');
        return;
      }
      // Prevent multiple initializations
      if (window._mobilePolishInitialized) {
        FlickletDebug.info('ðŸ“± Mobile polish already initialized, skipping');
        return;
      }
      window._mobilePolishInitialized = true;
      console.log('ðŸ”§ Mobile polish gate initialized...');
      const MOBILE_BP = 640; // px
      const forced = localStorage.getItem('forceMobileV1') === '1';
      function applyMobileFlag() {
        try {
          // Fallback for FlickletDebug if not loaded
          const debug = window.FlickletDebug || {
            info: console.log,
            warn: console.warn,
            error: console.error,
          };
          const viewportWidth = window.innerWidth;
          const isMobileViewport = viewportWidth <= MOBILE_BP;
          // More comprehensive mobile device detection
          const userAgent = navigator.userAgent;
          const isMobileDevice =
            /iPhone|iPad|iPod|Android|Mobile|BlackBerry|IEMobile|Opera Mini|webOS|Windows Phone/i.test(
              userAgent,
            );
          const isMobileSize = viewportWidth <= 640;
          const isIPhone = /iPhone/i.test(userAgent);
          // Debug info (only log once to prevent spam)
          if (!window._mobileDebugLogged) {
            debug.info(`ðŸ“± Mobile detection debug:`, {
              viewportWidth,
              userAgent: userAgent.substring(0, 50) + '...',
              isMobileViewport,
              isMobileDevice,
              isMobileSize,
              isIPhone,
              forced,
            });
            window._mobileDebugLogged = true;
          }
          // More aggressive mobile detection - force iPhone to mobile
          const enable =
            forced ||
            isMobileDevice ||
            isMobileViewport ||
            isMobileSize ||
            isIPhone ||
            viewportWidth <= 768;
          document.body.classList.toggle('mobile-v1', enable);
          debug.info(
            `ðŸ“± Mobile polish ${enable ? 'ENABLED' : 'DISABLED'} â€” vw:${viewportWidth} (device: ${isMobileDevice}, viewport: ${isMobileViewport}, size: ${isMobileSize})`,
          );
        } catch (error) {
          console.error('âŒ Error in applyMobileFlag:', error);
        }
      }
      // Apply when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', applyMobileFlag);
      } else {
        applyMobileFlag();
      }
      // Listen for viewport changes (throttled to prevent loops)
      let resizeTimeout;
      window.addEventListener(
        'resize',
        () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(applyMobileFlag, 250); // Throttle to 250ms
        },
        { passive: true },
      );
      window.addEventListener('orientationchange', () => {
        // Delay after orientation change to let viewport settle
        setTimeout(applyMobileFlag, 100);
      });
    } catch (error) {
      console.error('âŒ Error in mobilePolishGate:', error);
    }
  };
  // Run mobile polish guard once
  try {
    console.log('ðŸ”§ Calling mobilePolishGate...');
    mobilePolishGate(); // Run immediately
    console.log('ðŸ”§ mobilePolishGate completed...');
  } catch (error) {
    console.error('âŒ Error calling mobilePolishGate:', error);
  }
  // ---- Data Ready Event Listener ----
  try {
    console.log('ðŸ”§ Setting up data ready event listener...');
    // Re-render when data is ready/updated
    window.addEventListener('app:data:ready', () => {
      console.log('ðŸ”„ Data ready event received, updating lists...');
      // Clean up duplicates first
      if (typeof window.cleanupDuplicateCards === 'function') {
        window.cleanupDuplicateCards();
      }
      // Only render if not already rendered
      ['watching', 'wishlist', 'watched'].forEach((listType) => {
        if (!window[`render_${listType}`]) {
          loadListContent(listType);
        }
      });
      // Emit cards:changed event for centralized count updates
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { source: 'loadListContent' },
        }),
      );
      // Update home content if on home tab (only if not already rendered)
      if (typeof window.loadHomeContent === 'function' && !window.render_home) {
        window.loadHomeContent();
      }
    });
    console.log('ðŸ”§ Data ready event listener set up...');
  } catch (error) {
    console.error('âŒ Error setting up data ready event listener:', error);
  }
  // ---- Helper Functions ----
  try {
    console.log('ðŸ”§ Setting up helper functions...');
    /**
     * Count actual rendered items in a list container
     */
    function countRenderedItems(listType) {
      try {
        const container = document.getElementById(`${listType}List`);
        if (!container) return 0;
        // Count cards with data attributes
        const cards = container.querySelectorAll('[data-item-id][data-list-type]');
        return cards.length;
      } catch (e) {
        console.warn(`[countRenderedItems] Failed for ${listType}:`, e?.message || e);
        return 0;
      }
    }
    console.log('ðŸ”§ Helper functions set up...');
  } catch (error) {
    console.error('âŒ Error setting up helper functions:', error);
  }
  // ---- Tab / Render Pipeline ----
  try {
    console.log('ðŸ”§ Setting up tab/render pipeline...');
    // Global switchToTab function - DEPRECATED, use nav-init.js
    // This is kept only for backward compatibility during transition
    window.switchToTab = function switchToTab(tab) {
      console.warn('[functions.js] DEPRECATED: window.switchToTab is deprecated, use nav-init.js');
      
      // Feature flag check
      if (window.__useLegacyTabs) {
        console.warn('[functions.js] LEGACY MODE: Using old tab system');
        // Call legacy implementation directly
        if (window.FlickletApp && typeof window.FlickletApp._legacySwitchToTab === 'function') {
          return window.FlickletApp._legacySwitchToTab(tab);
        }
      }
      
      // Delegate to nav-init.js engine
      const targetId = `${tab}Section`;
      if (window.navEngine && typeof window.navEngine.activate === 'function') {
        window.navEngine.activate(targetId);
      } else {
        console.error('[functions.js] Nav engine not available');
      }
    };
    console.log('ðŸ”§ Tab/render pipeline set up...');
  } catch (error) {
    console.error('âŒ Error setting up tab/render pipeline:', error);
  }
  window.updateTabContent = function updateTabContent(tab) {
    console.log(`ðŸ”„ updateTabContent called for tab: ${tab}`);
    if (tab === 'home') {
      loadHomeContent();
    } else if (tab === 'watching' || tab === 'wishlist' || tab === 'watched') {
      console.log(`ðŸ”„ Calling loadListContent for ${tab}`);
      loadListContent(tab);
    } else if (tab === 'discover') {
      loadDiscoverContent();
    } else if (tab === 'settings') {
      loadSettingsContent();
    }
  };
  window.updateUI = function updateUI() {
    // Emit cards:changed event for centralized count updates
    document.dispatchEvent(
      new CustomEvent('cards:changed', {
        detail: { source: 'updateUI' },
      }),
    );
    const tab = window.FlickletApp?.currentTab || 'home';
    updateTabContent(tab);
  };
  // STEP 3.2 â€” Rerender the active tab's content if it matches a given list
  function rerenderIfVisible(list) {
    const current = window.FlickletApp?.currentTab;
    if (current && current === list) {
      if (typeof window.updateTabContent === 'function') {
        window.updateTabContent(list);
      } else if (typeof window.FlickletApp?.updateTabContent === 'function') {
        window.FlickletApp.updateTabContent(list);
      }
    }
  }
  // Centralized count update system - only called from cards:changed event
  window.updateTabCounts = async function updateTabCounts() {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      const warn = (...a) => console.warn(NS, ...a);
      log('ðŸ”„ [CENTRALIZED] updateTabCounts called from watchlists:updated event');
      let counts;
      // Use WatchlistsAdapterV2 as canonical data source
      const uid = window.firebaseAuth?.currentUser?.uid || null;
      const watchlists = await window.WatchlistsAdapterV2.load(uid);
      counts = {
        watching: watchlists.watchingIds.length,
        wishlist: watchlists.wishlistIds.length,
        watched: watchlists.watchedIds.length,
      };
      log(
        `[WL v28.99] Canonical adapter counts - watching: ${counts.watching}, wishlist: ${counts.wishlist}, watched: ${counts.watched}`,
      );
      // Update badges and list header counts
      ['watching', 'wishlist', 'watched'].forEach((list) => {
        const count = counts[list];
        // Update tab badge
        const badge =
          document.getElementById(`${list}Badge`) ||
          document.querySelector(`[data-count="${list}"]`);
        if (badge) {
          badge.textContent = count;
          // Use CSS classes instead of inline styles
          badge.classList.add('tab-badge', 'tab-badge--visible');
          log(`Updated ${list}Badge: ${count}`, {
            element: badge,
            classes: badge.className,
            style: badge.style.cssText,
            display: getComputedStyle(badge).display,
            visibility: getComputedStyle(badge).visibility,
            opacity: getComputedStyle(badge).opacity,
          });
        } else {
          warn(`Badge not found for ${list}: ${list}Badge or [data-count="${list}"]`);
        }
        // Update list header count
        const listCount = document.getElementById(`${list}Count`);
        if (listCount) {
          listCount.textContent = count;
          log(`Updated ${list}Count: ${count}`);
        } else {
          warn(`List count not found for ${list}: ${list}Count`);
        }
      });
      log('[CENTRALIZED] counts updated:', counts);
      return counts;
    } catch (e) {
      console.warn('[functions] updateTabCounts failed:', e?.message || e);
      return { watching: 0, wishlist: 0, watched: 0 };
    }
  };
  // Set up centralized event listener for cards:changed
  document.addEventListener('cards:changed', function (event) {
    console.log('ðŸŽ¯ [CENTRALIZED] cards:changed event received, updating counts');
    if (typeof window.updateTabCounts === 'function') {
      window.updateTabCounts();
    }
  });
  
  // Set up centralized event listener for watchlists:updated (new primary system)
  document.addEventListener('watchlists:updated', async function (event) {
    console.log('ðŸŽ¯ [CENTRALIZED] watchlists:updated event received, updating counts and lists');
    if (typeof window.updateTabCounts === 'function') {
      await window.updateTabCounts();
    }
    // Also trigger list re-rendering if needed
    if (window.loadListContent && typeof window.loadListContent === 'function') {
      const currentTab = document.querySelector('.tab.is-active')?.id?.replace('Tab', '');
      if (currentTab && ['watching', 'wishlist', 'watched'].includes(currentTab)) {
        console.log('ðŸ”„ Re-rendering current list after watchlists:updated');
        window.loadListContent(currentTab);
      }
    }
  });
  // Respond to data ready events (from data-init)
  // REMOVED DUPLICATE LISTENER - was causing duplicate renders
  // Now handled by the main app:data:ready listener above
  // Ensure counts are updated when the page loads
  document.addEventListener('DOMContentLoaded', function () {
    console.log('ðŸ”¢ DOMContentLoaded - emitting cards:changed event');
    setTimeout(() => {
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { source: 'DOMContentLoaded' },
        }),
      );
    }, 1000);
  });
  // Also call when user data is loaded
  document.addEventListener('userDataLoaded', function () {
    console.log('ðŸ”¢ userDataLoaded event - emitting cards:changed event');
    setTimeout(() => {
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { source: 'userDataLoaded' },
        }),
      );
    }, 500);
  });
  // Note: Tab counts are now updated only when data changes, not periodically
  // ---- Home ----
  window.loadHomeContent = function loadHomeContent() {
    // Prevent duplicate renders
    if (window.render_home) {
      console.log('[functions] Skipping duplicate home render');
      return;
    }
    window.render_home = true;
    const container = document.getElementById('homeSection');
    if (!container) {
      window.render_home = false;
      return;
    }
    FlickletDebug.info('ðŸ  Loading home content - using improved loading');
    // Start performance monitoring
    if (window.PerformanceMonitor) {
      window.PerformanceMonitor.startHomeLoad();
    }
    // Clean up any existing duplicates first
    if (typeof window.cleanupDuplicateCards === 'function') {
      window.cleanupDuplicateCards();
    }
    // Load content with better sequencing
    setTimeout(() => {
      try {
        startDailyCountdown?.();
      } catch {}
      try {
        updateFlickWordStats?.();
      } catch {}
      // Load currently watching preview
      if (typeof window.renderCurrentlyWatchingPreview === 'function') {
        window.renderCurrentlyWatchingPreview();
      }
      // End performance monitoring
      if (window.PerformanceMonitor) {
        window.PerformanceMonitor.endHomeLoad();
      }
      // Clear render flag
      window.render_home = false;
    }, 50);
  };
  // ---- Duplicate Cleanup ----
  window.cleanupDuplicateCards = function cleanupDuplicateCards() {
    try {
      const NS = '[cleanup]';
      const log = (...a) => console.log(NS, ...a);
      log('Starting duplicate card cleanup...');
      
      // Get all cards - both legacy and V2
      const allCards = document.querySelectorAll('.card, .cw-card, .media-card, [data-id]');
      const cardMap = new Map();
      let duplicatesRemoved = 0;
      
      allCards.forEach((card) => {
        // Try to get unique identifier from various possible attributes
        const itemId = card.dataset.itemId || card.dataset.id || card.getAttribute('data-id');
        const listType = card.dataset.listType || card.dataset.list || 
                        (card.closest('#currentlyWatchingPreview') ? 'watching' : 
                         card.closest('#wishlistSection') ? 'wishlist' :
                         card.closest('#watchedSection') ? 'watched' :
                         card.closest('#curated-section') ? 'curated' : 'unknown');
        
        if (itemId) {
          const key = `${itemId}-${listType}`;
          if (cardMap.has(key)) {
            // This is a duplicate, remove it
            card.remove();
            duplicatesRemoved++;
            log(`Removed duplicate card: ${key}`);
          } else {
            cardMap.set(key, card);
          }
        }
      });
      
      log(`Cleanup complete. Removed ${duplicatesRemoved} duplicate cards.`);
      return duplicatesRemoved;
    } catch (e) {
      console.warn('[cleanup] Failed:', e?.message || e);
      return 0;
    }
  };
  // ---- WatchlistsAdapter ----
  try {
    console.log('ðŸ”§ Setting up WatchlistsAdapter...');
    /**
     * Process: WatchlistsAdapter
     * Purpose: Single source of truth for watchlist data from Firebase users/{uid}.watchlists
     * Data Source: Firebase users/{uid} document with watchlists.movies and watchlists.tv
     * Update Path: Modify load() method if Firebase schema changes, update mutation methods if data structure changes
     * Dependencies: Firebase firestore, window.appData for fallback, moveItem and removeItemFromCurrentList functions
     */
    window.WatchlistsAdapter = {
      _cache: null,
      _lastUid: null,
      _loading: false,
      _loadPromise: null,
      _hasDataInWatchlists(watchlists) {
        if (!watchlists || typeof watchlists !== 'object') return false;
        const hasMoviesData =
          watchlists.movies &&
          ((watchlists.movies.watching && watchlists.movies.watching.length > 0) ||
            (watchlists.movies.wishlist && watchlists.movies.wishlist.length > 0) ||
            (watchlists.movies.watched && watchlists.movies.watched.length > 0));
        const hasTvData =
          watchlists.tv &&
          ((watchlists.tv.watching && watchlists.tv.watching.length > 0) ||
            (watchlists.tv.wishlist && watchlists.tv.wishlist.length > 0) ||
            (watchlists.tv.watched && watchlists.tv.watched.length > 0));
        return hasMoviesData || hasTvData;
      },
      async load(uid) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          // Return cached data if same user and cache exists
          if (this._cache && this._lastUid === uid) {
            log('Using cached watchlists data for uid:', uid);
            return this._cache;
          }
          // Prevent concurrent loads
          if (this._loading && this._loadPromise) {
            log('Load already in progress, waiting...');
            return await this._loadPromise;
          }
          this._loading = true;
          this._loadPromise = this._performLoad(uid);
          const result = await this._loadPromise;
          this._loading = false;
          this._loadPromise = null;
          return result;
        } catch (error) {
          this._loading = false;
          this._loadPromise = null;
          log('WatchlistsAdapter.load failed:', error.message);
          return { watchingIds: [], wishlistIds: [], watchedIds: [] };
        }
      },
      async _performLoad(uid) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        log('Loading watchlists for uid:', uid);
        // Try to load from Firebase first
        if (window.firebaseDb && uid) {
          try {
            const userDoc = await window.firebaseDb.collection('users').doc(uid).get();
            if (userDoc.exists) {
              const userData = userDoc.data();
              log(
                'Firebase user doc found, watchlists keys:',
                Object.keys(userData.watchlists || {}),
              );
              if (userData.watchlists && this._hasDataInWatchlists(userData.watchlists)) {
                log(
                  'Firebase watchlists structure has data:',
                  JSON.stringify(userData.watchlists, null, 2),
                );
                const result = this._normalizeWatchlists(userData.watchlists);
                this._cache = result;
                this._lastUid = uid;
              } else {
                log('Watchlists empty or missing, checking direct movies and tv fields...');
                log('Firebase movies field:', JSON.stringify(userData.movies, null, 2));
                log('Firebase tv field:', JSON.stringify(userData.tv, null, 2));
                // Try to normalize from the direct movies/tv fields
                const directWatchlists = {
                  movies: userData.movies || {},
                  tv: userData.tv || {},
                };
                log(
                  'Created direct watchlists structure:',
                  JSON.stringify(directWatchlists, null, 2),
                );
                const result = this._normalizeWatchlists(directWatchlists);
                this._cache = result;
                this._lastUid = uid;
                // Debug exposure
                window.__wl = {
                  watchingIds: result.watchingIds,
                  wishlistIds: result.wishlistIds,
                  watchedIds: result.watchedIds,
                };
                log(
                  'Merged counts - watching:',
                  result.watchingIds.length,
                  'wishlist:',
                  result.wishlistIds.length,
                  'watched:',
                  result.watchedIds.length,
                );
                return result;
              }
            }
          } catch (firebaseError) {
            log('Firebase load failed, falling back to appData:', firebaseError.message);
          }
        }
        try {
          // Fallback to appData structure (when uid is falsy or in mock mode)
          log('Using appData fallback');
          const A = window.appData || {};
          const tv = A.tv || {};
          const movies = A.movies || {};
          const result = {
            watchingIds: [
              ...(Array.isArray(tv.watching)
                ? tv.watching
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
              ...(Array.isArray(movies.watching)
                ? movies.watching
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
            ],
            wishlistIds: [
              ...(Array.isArray(tv.wishlist)
                ? tv.wishlist
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
              ...(Array.isArray(movies.wishlist)
                ? movies.wishlist
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
            ],
            watchedIds: [
              ...(Array.isArray(tv.watched)
                ? tv.watched
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
              ...(Array.isArray(movies.watched)
                ? movies.watched
                    .map((item) => String(item.id || item.tmdb_id || item.tmdbId))
                    .filter(Boolean)
                : []),
            ],
          };
          // Deduplicate
          result.watchingIds = [...new Set(result.watchingIds)];
          result.wishlistIds = [...new Set(result.wishlistIds)];
          result.watchedIds = [...new Set(result.watchedIds)];
          this._cache = result;
          this._lastUid = uid;
          log(
            'Fallback merged counts - watching:',
            result.watchingIds.length,
            'wishlist:',
            result.wishlistIds.length,
            'watched:',
            result.watchedIds.length,
          );
          return result;
        } catch (error) {
          log('WatchlistsAdapter.load failed:', error.message);
          return { watchingIds: [], wishlistIds: [], watchedIds: [] };
        }
      },
      _normalizeWatchlists(watchlists) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        log('_normalizeWatchlists input:', JSON.stringify(watchlists, null, 2));
        // Validate input data
        if (!watchlists || typeof watchlists !== 'object') {
          log('Invalid watchlists data:', watchlists);
          return { watchingIds: [], wishlistIds: [], watchedIds: [] };
        }
        const normalizeList = (list, listName) => {
          log(`normalizeList called for ${listName}:`, list);
          if (Array.isArray(list)) {
            // Firebase structure: each item has an 'id' field (number)
            const result = list
              .map((item) => {
                if (typeof item === 'object' && item !== null) {
                  return String(item.id || item.tmdb_id || item.tmdbId);
                }
                return String(item);
              })
              .filter(Boolean);
            log(`${listName} array result:`, result);
            return result;
          } else if (typeof list === 'object' && list !== null) {
            // Fallback for object-based lists (not expected in Firebase)
            const result = Object.keys(list).filter((id) => list[id] === true);
            log(`${listName} object result:`, result);
            return result;
          }
          log(`${listName} empty result`);
          return [];
        };
        const watchingIds = [
          ...normalizeList(watchlists.movies?.watching || [], 'movies.watching'),
          ...normalizeList(watchlists.tv?.watching || [], 'tv.watching'),
        ];
        const wishlistIds = [
          ...normalizeList(watchlists.movies?.wishlist || [], 'movies.wishlist'),
          ...normalizeList(watchlists.tv?.wishlist || [], 'tv.wishlist'),
        ];
        const watchedIds = [
          ...normalizeList(watchlists.movies?.watched || [], 'movies.watched'),
          ...normalizeList(watchlists.tv?.watched || [], 'tv.watched'),
        ];
        // Deduplicate and ensure string IDs
        return {
          watchingIds: [...new Set(watchingIds.map(String))],
          wishlistIds: [...new Set(wishlistIds.map(String))],
          watchedIds: [...new Set(watchedIds.map(String))],
        };
      },
      // Move item between lists
      moveItem(itemId, fromList, toList) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          if (!this._cache) {
            log('No cache available for moveItem');
            return false;
          }
          const id = String(itemId?.id ?? itemId);
          const fromKey = fromList + 'Ids';
          const toKey = toList + 'Ids';
          let moved = false;
          
          // Remove from source list
          if (this._cache[fromKey]) {
            const fromSet = new Set(this._cache[fromKey]);
            if (fromSet.has(id)) {
              fromSet.delete(id);
              this._cache[fromKey] = Array.from(fromSet);
              log('Removed item:', id, 'from', fromList, 'new count:', this._cache[fromKey].length);
              moved = true;
            }
          }
          
          // Add to destination list
          if (this._cache[toKey]) {
            const toSet = new Set(this._cache[toKey]);
            if (!toSet.has(id)) {
              toSet.add(id);
              this._cache[toKey] = Array.from(toSet);
              log('Added item:', id, 'to', toList, 'new count:', this._cache[toKey].length);
              moved = true;
            }
          }
          
          if (moved) {
            // Emit watchlists:updated event
            document.dispatchEvent(new CustomEvent('watchlists:updated', { 
              detail: { list: toList, action: 'move', id, fromList } 
            }));
          }
          
          return moved;
        } catch (error) {
          log('moveItem failed:', error.message);
          return false;
        }
      },
      // Remove item from list
      removeItem(itemId, fromList) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          if (!this._cache) {
            log('No cache available for removeItem');
            return false;
          }
          const id = String(itemId?.id ?? itemId);
          const fromKey = fromList + 'Ids';
          if (this._cache[fromKey]) {
            const fromSet = new Set(this._cache[fromKey]);
            if (fromSet.has(id)) {
              fromSet.delete(id);
              this._cache[fromKey] = Array.from(fromSet);
              log('Removed item:', id, 'from', fromList, 'new count:', this._cache[fromKey].length);
              
              // Emit watchlists:updated event
              document.dispatchEvent(new CustomEvent('watchlists:updated', { 
                detail: { list: fromList, action: 'remove', id } 
              }));
              
              return true;
            }
          }
          return false;
        } catch (error) {
          log('removeItem failed:', error.message);
          return false;
        }
      },
      // Add item to list
      addItem(itemId, toList) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          if (!this._cache) {
            log('No cache available for addItem, creating new cache');
            this._cache = {
              watchingIds: [],
              wishlistIds: [],
              watchedIds: [],
            };
          }
          const id = String(itemId?.id ?? itemId);
          const toKey = toList + 'Ids';
          if (this._cache[toKey]) {
            // Use Set to dedupe
            const existingSet = new Set(this._cache[toKey]);
            if (!existingSet.has(id)) {
              existingSet.add(id);
              this._cache[toKey] = Array.from(existingSet);
              log('Added item:', id, 'to', toList, 'new count:', this._cache[toKey].length);
              
              // Emit watchlists:updated event
              document.dispatchEvent(new CustomEvent('watchlists:updated', { 
                detail: { list: toList, action: 'add', id } 
              }));
              
              return true;
            } else {
              log('Item already exists in', toList);
              return false;
            }
          }
          return false;
        } catch (error) {
          log('addItem failed:', error.message);
          return false;
        }
      },
      // Clear cache when data changes
      invalidate() {
        this._cache = null;
        this._lastUid = null;
      },
      // Get item data by ID from appData (for rendering)
      getItemData(itemId) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          const id = String(itemId);
          const appData = window.appData || {};
          const tv = appData.tv || {};
          const movies = appData.movies || {};
          // Search through all lists to find the item
          const allLists = [
            ...(Array.isArray(tv.watching) ? tv.watching : []),
            ...(Array.isArray(tv.wishlist) ? tv.wishlist : []),
            ...(Array.isArray(tv.watched) ? tv.watched : []),
            ...(Array.isArray(movies.watching) ? movies.watching : []),
            ...(Array.isArray(movies.wishlist) ? movies.wishlist : []),
            ...(Array.isArray(movies.watched) ? movies.watched : []),
          ];
          const item = allLists.find(
            (item) => String(item.id || item.tmdb_id || item.tmdbId) === id,
          );
          if (item) {
            log(`Found item data for ID ${id}:`, item.title || item.name || 'Unknown');
            // Ensure the item has a normalized id field and correct media_type
            const normalizedItem = {
              ...item,
              id: item.id || item.tmdb_id || item.tmdbId || id,
            };
            
            // If media_type is missing or incorrect, try to resolve it
            if (!normalizedItem.media_type || normalizedItem.media_type === 'unknown') {
              // Try to determine from context (which list it's in)
              const isInTvList = allLists.slice(0, 3).includes(item);
              const isInMovieList = allLists.slice(3, 6).includes(item);
              
              if (isInTvList && !isInMovieList) {
                normalizedItem.media_type = 'tv';
              } else if (isInMovieList && !isInTvList) {
                normalizedItem.media_type = 'movie';
              } else if (normalizedItem.first_air_date) {
                normalizedItem.media_type = 'tv';
              } else if (normalizedItem.release_date) {
                normalizedItem.media_type = 'movie';
              }
            }
            
            return normalizedItem;
          } else {
            log(`Item not found for ID ${id}`);
            return null;
          }
        } catch (error) {
          log('getItemData failed:', error.message);
          return null;
        }
      },
      // Build appData from adapter as computed snapshot for legacy code
      buildAppDataSnapshot() {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        try {
          if (!this._cache) {
            log('No cache available for buildAppDataSnapshot');
            return {
              tv: { watching: [], wishlist: [], watched: [] },
              movies: { watching: [], wishlist: [], watched: [] },
            };
          }
          const appData = window.appData || {};
          const tv = appData.tv || {};
          const movies = appData.movies || {};
          // Build TV lists from adapter IDs
          const tvWatching = this._cache.watchingIds
            .map((id) => this.getItemData(id))
            .filter((item) => item && (item.media_type === 'tv' || item.first_air_date))
            .filter(Boolean);
          const tvWishlist = this._cache.wishlistIds
            .map((id) => this.getItemData(id))
            .filter((item) => item && (item.media_type === 'tv' || item.first_air_date))
            .filter(Boolean);
          const tvWatched = this._cache.watchedIds
            .map((id) => this.getItemData(id))
            .filter((item) => item && (item.media_type === 'tv' || item.first_air_date))
            .filter(Boolean);
          // Build movies lists from adapter IDs
          const moviesWatching = this._cache.watchingIds
            .map((id) => this.getItemData(id))
            .filter(
              (item) =>
                item && (item.media_type === 'movie' || (!item.first_air_date && !item.media_type)),
            )
            .filter(Boolean);
          const moviesWishlist = this._cache.wishlistIds
            .map((id) => this.getItemData(id))
            .filter(
              (item) =>
                item && (item.media_type === 'movie' || (!item.first_air_date && !item.media_type)),
            )
            .filter(Boolean);
          const moviesWatched = this._cache.watchedIds
            .map((id) => this.getItemData(id))
            .filter(
              (item) =>
                item && (item.media_type === 'movie' || (!item.first_air_date && !item.media_type)),
            )
            .filter(Boolean);
          const snapshot = {
            tv: {
              watching: tvWatching,
              wishlist: tvWishlist,
              watched: tvWatched,
            },
            movies: {
              watching: moviesWatching,
              wishlist: moviesWishlist,
              watched: moviesWatched,
            },
          };
          log('Built appData snapshot from adapter:', {
            tvWatching: snapshot.tv.watching.length,
            tvWishlist: snapshot.tv.wishlist.length,
            tvWatched: snapshot.tv.watched.length,
            moviesWatching: snapshot.movies.watching.length,
            moviesWishlist: snapshot.movies.wishlist.length,
            moviesWatched: snapshot.movies.watched.length,
          });
          return snapshot;
        } catch (error) {
          log('buildAppDataSnapshot failed:', error.message);
          return {
            tv: { watching: [], wishlist: [], watched: [] },
            movies: { watching: [], wishlist: [], watched: [] },
          };
        }
      },
    };
    console.log('ðŸ”§ WatchlistsAdapter set up...');
  } catch (error) {
    console.error('âŒ Error setting up WatchlistsAdapter:', error);
  }
  // ---- Lists ----
  /**
   * Process: Tab Content Loading with Unified Card Rendering
   * Purpose: Loads and displays list items (watching, wishlist, watched) using WatchlistsAdapter as source of truth
   * Data Source: WatchlistsAdapter (users/{uid}.watchlists) with fallback to appData.tv[listType] and appData.movies[listType] arrays
   * Update Path: Modify listType parameter handling, update createShowCard call if card structure changes
   * Dependencies: WatchlistsAdapter, createShowCard function, appData structure, container elements, moveItem and removeItemFromCurrentList functions
   */

  window.loadListContent = async function loadListContent(listType) {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      const warn = (...a) => console.warn(NS, ...a);
      log(`ðŸ”„ loadListContent called for ${listType}`);
      // Prevent duplicate renders
      const renderKey = `render_${listType}`;
      if (window[renderKey]) {
        log(`Skipping duplicate render for ${listType}`);
        return;
      }
      window[renderKey] = true;
      let items, counts;
      // Use WatchlistsAdapterV2 as canonical data source
      const uid = window.firebaseAuth?.currentUser?.uid || null;
      const watchlists = await window.WatchlistsAdapterV2.load(uid);
      // Create three local arrays from the adapter (source of truth)
      const ids = {
        watching: watchlists.watchingIds || [],
        wishlist: watchlists.wishlistIds || [],
        watched: watchlists.watchedIds || [],
      };
      // Get the appropriate ID list based on listType
      const idList = ids[listType] || [];
      log(`[WL v28.33] Loaded ${idList.length} IDs for ${listType} from canonical adapter`);
      // Set counts before rendering (counts first, then render, then event bridge)
      counts = {
        watching: ids.watching.length,
        wishlist: ids.wishlist.length,
        watched: ids.watched.length,
      };
      // Update header counts immediately
      ['watching', 'wishlist', 'watched'].forEach((list) => {
        const headerEl = document.getElementById(`${list}Count`);
        if (headerEl) {
          headerEl.textContent = counts[list];
          log(`[WL v28.33] Set header ${list}Count: ${counts[list]}`);
        }
        const badgeEl = document.getElementById(`${list}Badge`);
        if (badgeEl) {
          badgeEl.textContent = counts[list];
          // Use CSS classes instead of inline styles
          badgeEl.classList.remove('tab-badge--hidden', 'tab-badge--visible');
          badgeEl.classList.add(counts[list] > 0 ? 'tab-badge--visible' : 'tab-badge--hidden');
          log(`[WL v28.33] Set badge ${list}Badge: ${counts[list]}`);
        }
      });
      // Map IDs â†’ card data using adapter as source of truth
      log(`[WL v28.33] Looking for ${idList.length} IDs:`, idList);
      // Get items that match the adapter IDs using the correct getItemData method
      items = idList
        .map((id) => {
          // Try the new adapter first, then fall back to legacy
          let item = null;
          if (window.WatchlistsAdapterV2 && typeof window.WatchlistsAdapterV2.getItemData === 'function') {
            item = window.WatchlistsAdapterV2.getItemData(id);
          } else if (window.WatchlistsAdapter && typeof window.WatchlistsAdapter.getItemData === 'function') {
            item = window.WatchlistsAdapter.getItemData(id);
          } else {
            // Fallback: search in appData directly
            const appData = window.appData || {};
            const tv = appData.tv || {};
            const movies = appData.movies || {};
            const allLists = [
              ...(Array.isArray(tv.watching) ? tv.watching : []),
              ...(Array.isArray(tv.wishlist) ? tv.wishlist : []),
              ...(Array.isArray(tv.watched) ? tv.watched : []),
              ...(Array.isArray(movies.watching) ? movies.watching : []),
              ...(Array.isArray(movies.wishlist) ? movies.wishlist : []),
              ...(Array.isArray(movies.watched) ? movies.watched : []),
            ];
            item = allLists.find((item) => String(item.id || item.tmdb_id || item.tmdbId) === String(id));
          }
          log(`[WL v28.33] ID ${id} ->`, item ? item.title || item.name || 'Unknown' : 'NOT FOUND');
          return item;
        })
        .filter(Boolean);
      log(`[WL v28.33] Mapped ${idList.length} IDs to ${items.length} items for ${listType}`);
      // If we have missing items, log for debugging
      if (idList.length > items.length) {
        const missingIds = idList.filter((id) => {
          let item = null;
          if (window.WatchlistsAdapterV2 && typeof window.WatchlistsAdapterV2.getItemData === 'function') {
            item = window.WatchlistsAdapterV2.getItemData(id);
          } else if (window.WatchlistsAdapter && typeof window.WatchlistsAdapter.getItemData === 'function') {
            item = window.WatchlistsAdapter.getItemData(id);
          }
          return !item;
        });
        log(`[WL v28.33] Missing items for ${listType}:`, missingIds);
      }
      const container =
        document.getElementById(`${listType}List`) ||
        document.querySelector(`[data-section="${listType}"] .section-content`) ||
        (() => {
          const d = document.createElement('div');
          d.className = 'list-container';
          (document.querySelector('main,#app,body') || document.body).appendChild(d);
          return d;
        })();
      log(
        `Container for ${listType}:`,
        container.id || container.className,
        'Children before clear:',
        container.children.length,
      );
      // Use list-container class for tab sections to enable horizontal layout
      container.className = 'list-container';
      // Clear existing content to prevent duplication
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
      log(`Children after clear:`, container.children.length);
      // Remove any duplicate cards that might exist elsewhere
      const existingCards = document.querySelectorAll(`[data-list-type="${listType}"]`);
      log(`Found ${existingCards.length} existing cards for ${listType}`);
      existingCards.forEach((card) => {
        if (card.parentNode && card.parentNode !== container) {
          log(`Removing duplicate card from:`, card.parentNode.id || card.parentNode.className);
          card.remove();
        }
      });
      if (!items.length) {
        container.innerHTML = '<div class="poster-cards-empty">Nothing here yet.</div>';
        return;
      }
      // Prefer Cards V2 for all lists when available; fall back to legacy Card.
      const canUseV2 = typeof window.renderCardV2 === 'function';

      if (canUseV2) {
        log(`Rendering ${items.length} items for ${listType} using Cards V2`);
        
        // Performance optimization: Batch DOM operations
        const fragment = document.createDocumentFragment();
        const startTime = performance.now();
        
        items.forEach((item, index) => {
          // Use toCardProps adapter to properly extract all metadata from enhanced data
          let snap;
          if (window.toCardProps && typeof window.toCardProps === 'function') {
            try {
              snap = window.toCardProps(item);
              log(`[WL v28.33] Using toCardProps adapter for ${item.title || item.name}`);
            } catch (error) {
              console.warn('[functions] toCardProps failed, using fallback:', error);
              snap = createFallbackSnap(item);
            }
          } else {
            snap = createFallbackSnap(item);
          }
          
          // Helper function to create fallback snap object
          function createFallbackSnap(item) {
            return {
              id: item.id,
              media_type: item.media_type || (item.first_air_date ? 'tv' : 'movie'),
              title: item.title || item.name || 'Unknown',
              name: item.title || item.name || 'Unknown',
              release_date: item.release_date || null,
              first_air_date: item.first_air_date || null,
              poster: item.poster_path ? `https://image.tmdb.org/t/p/w200${item.poster_path}` : (item.posterUrl || item.poster || '/assets/img/poster-placeholder.png'),
              genre: item.genre || (item.genres && Array.isArray(item.genres) ? item.genres.slice(0, 2).map(g => g.name).join(', ') : '') || '',
              seasonEpisode: item.seasonEpisode || item.sxxExx || '',
              nextAirDate: item.next_episode_air_date || item.nextAirDate || item.next_air_date || '',
              runtime: item.runtime || item.episode_run_time || '',
              userRating: item.userRating || item.rating || 0,
              progress: item.progress || '',
              badges: item.badges || [],
              whereToWatch: item.whereToWatch || '',
              overview: item.overview || ''
            };
          }
          
          // Create a temporary container for each card
          const tempContainer = document.createElement('div');
          // Design spec: Tabs use horizontal tab/list variant with user stars and Pro buttons
          const card = window.renderCardV2(tempContainer, snap, { listType, context: 'tab' });
          if (card) {
            card.dataset.itemId = snap.id;
            card.dataset.listType = listType;
            card.dataset.renderIndex = index;
            fragment.appendChild(card);
            log(`Added V2 tab card ${index + 1}/${items.length} for ${listType}: ${snap.title}`);
          } else {
            warn(`V2 card creation failed for ${snap.title}`);
          }
        });
        
        // Single DOM operation for all cards
        container.appendChild(fragment);
        
        const endTime = performance.now();
        log(`[Performance] Rendered ${items.length} cards in ${(endTime - startTime).toFixed(2)}ms`);
      } else if (typeof window.Card === 'function' && typeof window.createCardData === 'function') {
        log(`Rendering ${items.length} items for ${listType} using createCardData + Card`);
        items.forEach((it, index) => {
          try {
            const cardData = window.createCardData(it, 'tmdb', listType);
            log(`Card data for ${it.title || it.name}:`, cardData);
            const card = window.Card({
              variant: 'detail', // Use detail variant for tabs
              ...cardData,
            });
            if (card) {
              // Add unique identifier to prevent duplication
              card.dataset.itemId = cardData.id;
              card.dataset.listType = listType;
              card.dataset.renderIndex = index;
              container.appendChild(card);
              log(`Added card ${index + 1}/${items.length} for ${listType}:`, cardData.title);
            } else {
              warn(`Card creation failed for ${it.title || it.name}`);
            }
          } catch (e) {
            warn('render item failed:', e?.message || e);
          }
        });
      } else if (typeof window.Card === 'function') {
        // Fallback to Card component without createCardData
        log(`Rendering ${items.length} items for ${listType} using fallback Card method`);
        items.forEach((it) => {
          try {
            const cardData = {
              variant: 'detail', // Use detail variant for two-column layout
              id: it.id || it.tmdb_id || it.tmdbId,
              title: it.title || it.name,
              subtitle: it.year
                ? `${it.year} â€¢ ${it.mediaType === 'tv' ? 'TV Series' : 'Movie'}`
                : it.mediaType === 'tv'
                  ? 'TV Series'
                  : 'Movie',
              posterUrl: it.posterUrl || it.poster_src,
              rating: it.vote_average || it.rating || 0,
              mediaType: it.mediaType || 'movie',
              currentList: listType, // Pass current list for proper button generation
              onOpenDetails: (id) => {
                if (window.openTMDBLink) {
                  window.openTMDBLink(id, it.mediaType || 'movie');
                }
              },
            };
            const el = window.Card(cardData);
            if (el) container.appendChild(el);
          } catch (e) {
            warn('render item failed:', e?.message || e);
          }
        });
      } else {
        // Fallback to simple HTML
        container.innerHTML =
          '<div class="poster-cards-empty">Card components not available.</div>';
      }
      // Add scroll indicators for horizontal layout
      if (typeof window.addScrollIndicators === 'function') {
        window.addScrollIndicators(container);
      }
      // Dispatch event to notify that list cards have been rendered
      window.dispatchEvent(
        new CustomEvent('cards:rendered', {
          detail: {
            count: items.length,
            section: listType,
          },
        }),
      );
      log(`Final children count for ${listType}:`, container.children.length);
      // Emit cards:changed event for counter system (event bridge after render)
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { listType: listType, count: container.children.length },
        }),
      );
      // Trigger counter system update after cards are rendered
      if (window.CounterBootstrap && typeof window.CounterBootstrap.directRecount === 'function') {
        setTimeout(() => {
          window.CounterBootstrap.directRecount();
        }, 100);
      }
      
      // Enable drag and drop for tab lists
      if (typeof window.makeSortable === 'function') {
        window.makeSortable(container);
        log(`Enabled drag and drop for ${listType} container`);
      }
      
      // Clear render flag after a short delay to allow for legitimate re-renders
      setTimeout(() => {
        if (renderKey) {
          window[renderKey] = false;
        }
      }, 100);
    } catch (e) {
      console.warn('[functions] loadListContent failed:', e?.message || e);
      // Clear render flag on error
      if (renderKey) {
        window[renderKey] = false;
      }
    }
  };
  /**
   * Process: Episode Tracking Modal
   * Purpose: Opens modal for tracking TV show episodes with season/episode selection
   * Data Source: TMDB API for episode data, appData for user progress
   * Update Path: Modify modal HTML structure or episode data handling
   * Dependencies: Modal system, TMDB API, appData structure
   */
  window.openEpisodeTrackingModal = function openEpisodeTrackingModal(itemId) {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      // Find the item using adapter as canonical source
      let item = null;
      let mediaType = 'movie';
      // Use adapter to get item data
      if (window.WatchlistsAdapter) {
        item = window.WatchlistsAdapter.getItemData(itemId);
        if (item) {
          mediaType = item.media_type || item.mediaType || (item.first_air_date ? 'tv' : 'movie');
        }
      }
      // Fallback to appData search if adapter doesn't find it
      if (!item) {
        const appData = window.appData || {};
        const tv = appData.tv || {};
        const movies = appData.movies || {};
        // Search through all lists
        for (const listType of ['watching', 'wishlist', 'watched']) {
          const tvList = tv[listType] || [];
          const movieList = movies[listType] || [];
          item =
            tvList.find((i) => (i.id || i.tmdb_id) == itemId) ||
            movieList.find((i) => (i.id || i.tmdb_id) == itemId);
          if (item) {
            mediaType = item.media_type || item.mediaType || (item.first_air_date ? 'tv' : 'movie');
            break;
          }
        }
      }
      if (!item) {
        log('Item not found for episode tracking:', itemId);
        return;
      }
      if (mediaType !== 'tv') {
        log('Episode tracking only available for TV shows');
        return;
      }
      // Create modal HTML
      const modalHTML = `
      <div class="episode-modal" id="episodeTrackingModal" aria-hidden="false" role="dialog">
        <div class="episode-modal-overlay" data-close></div>
        <div class="episode-modal-dialog" role="document">
          <header class="episode-modal-header">
            <h3>ðŸ“º Episode Tracking - ${item.title || item.name}</h3>
            <button class="episode-modal-close" type="button" aria-label="Close" data-close>&times;</button>
          </header>
          <main class="episode-modal-body">
            <div class="episode-progress">
              <label for="currentSeason">Current Season:</label>
              <select id="currentSeason" class="episode-select">
                <option value="1">Season 1</option>
                <option value="2">Season 2</option>
                <option value="3">Season 3</option>
              </select>
            </div>
            <div class="episode-progress">
              <label for="currentEpisode">Current Episode:</label>
              <select id="currentEpisode" class="episode-select">
                <option value="1">Episode 1</option>
                <option value="2">Episode 2</option>
                <option value="3">Episode 3</option>
              </select>
            </div>
            <div class="episode-actions">
              <button class="episode-btn episode-btn--primary" data-action="save-progress">Save Progress</button>
              <button class="episode-btn episode-btn--secondary" data-action="mark-season-complete">Mark Season Complete</button>
              <button class="episode-btn episode-btn--secondary" data-action="mark-series-complete">Mark Series Complete</button>
            </div>
          </main>
        </div>
      </div>
    `;
      // Remove existing modal if present
      const existingModal = document.getElementById('episodeTrackingModal');
      if (existingModal) {
        existingModal.remove();
      }
      // Add modal to body
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      // Add event listeners
      const modal = document.getElementById('episodeTrackingModal');
      const closeButtons = modal.querySelectorAll('[data-close]');
      const actionButtons = modal.querySelectorAll('[data-action]');
      closeButtons.forEach((btn) => {
        btn.addEventListener('click', () => {
          modal.remove();
        });
      });
      actionButtons.forEach((btn) => {
        btn.addEventListener('click', (e) => {
          const action = e.target.dataset.action;
          const season = parseInt(document.getElementById('currentSeason').value);
          const episode = parseInt(document.getElementById('currentEpisode').value);
          switch (action) {
            case 'save-progress':
              log('Save progress:', { itemId, season, episode });
              // TODO: Implement progress saving
              break;
            case 'mark-season-complete':
              log('Mark season complete:', { itemId, season });
              // TODO: Implement season completion
              break;
            case 'mark-series-complete':
              log('Mark series complete:', { itemId });
              if (window.moveItem) {
                window.moveItem(Number(itemId), 'watched');
              }
              modal.remove();
              break;
          }
        });
      });
      // Close on overlay click
      modal.querySelector('.episode-modal-overlay').addEventListener('click', () => {
        modal.remove();
      });
      log('Episode tracking modal opened for:', item.title || item.name);
    } catch (e) {
      console.warn('[functions] openEpisodeTrackingModal failed:', e?.message || e);
    }
  };
  /**
   * Process: User Rating Update
   * Purpose: Updates user's personal rating for an item
   * Data Source: appData structure, localStorage persistence
   * Update Path: Modify rating storage or validation logic
   * Dependencies: appData structure, saveAppData function
   */
  window.updateUserRating = function updateUserRating(itemId, rating) {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      const appData = window.appData || {};
      // Find and update the item in all lists
      for (const mediaType of ['tv', 'movies']) {
        const media = appData[mediaType] || {};
        for (const listType of ['watching', 'wishlist', 'watched']) {
          const list = media[listType] || [];
          const item = list.find((i) => (i.id || i.tmdb_id) == itemId);
          if (item) {
            item.userRating = rating;
            log('Updated rating for', item.title || item.name, 'to', rating);
            break;
          }
        }
      }
      // Save to localStorage
      if (window.saveAppData) {
        window.saveAppData();
      }
    } catch (e) {
      console.warn('[functions] updateUserRating failed:', e?.message || e);
    }
  };
  /**
   * Process: User Note Update
   * Purpose: Updates user's personal note for an item
   * Data Source: appData structure, localStorage persistence
   * Update Path: Modify note storage or validation logic
   * Dependencies: appData structure, saveAppData function
   */
  window.updateUserNote = function updateUserNote(itemId, note) {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      const appData = window.appData || {};
      // Find and update the item in all lists
      for (const mediaType of ['tv', 'movies']) {
        const media = appData[mediaType] || {};
        for (const listType of ['watching', 'wishlist', 'watched']) {
          const list = media[listType] || [];
          const item = list.find((i) => (i.id || i.tmdb_id) == itemId);
          if (item) {
            item.userNote = note;
            log('Updated note for', item.title || item.name);
            break;
          }
        }
      }
      // Save to localStorage
      if (window.saveAppData) {
        window.saveAppData();
      }
    } catch (e) {
      console.warn('[functions] updateUserNote failed:', e?.message || e);
    }
  };
  /**
   * Process: Item Reordering
   * Purpose: Reorders items within user-owned lists using drag and drop
   * Data Source: appData structure, localStorage persistence
   * Update Path: Modify reordering logic or validation
   * Dependencies: appData structure, saveAppData function
   */
  window.reorderItems = function reorderItems(draggedId, targetId, listType) {
    try {
      const NS = '[functions]';
      const log = (...a) => console.log(NS, ...a);
      const appData = window.appData || {};
      // Find and reorder items in both TV and movies lists
      for (const mediaType of ['tv', 'movies']) {
        const media = appData[mediaType] || {};
        const list = media[listType] || [];
        const draggedIndex = list.findIndex((i) => (i.id || i.tmdb_id) == draggedId);
        const targetIndex = list.findIndex((i) => (i.id || i.tmdb_id) == targetId);
        if (draggedIndex !== -1 && targetIndex !== -1 && draggedIndex !== targetIndex) {
          // Remove dragged item
          const draggedItem = list.splice(draggedIndex, 1)[0];
          // Insert at target position
          list.splice(targetIndex, 0, draggedItem);
          log('Reordered', draggedItem.title || draggedItem.name, 'in', listType, 'list');
          // Save to localStorage
          if (window.saveAppData) {
            window.saveAppData();
          }
          // Refresh the UI
          if (window.loadListContent) {
            window.loadListContent(listType);
          }
          break;
        }
      }
    } catch (e) {
      console.warn('[functions] reorderItems failed:', e?.message || e);
    }
  };
  function getNextList(currentList) {
    const lists = ['watching', 'wishlist', 'watched'];
    const currentIndex = lists.indexOf(currentList);
    return lists[(currentIndex + 1) % lists.length];
  }
  // ---- Discover ----
  window.loadDiscoverContent = async function loadDiscoverContent() {
    const container = document.getElementById('discoverList');
    if (!container) return;
    // Set up poster card grid layout
    container.className = 'poster-cards-grid';
    // Show loading state
    container.innerHTML = `
    <div class="poster-cards-loading">
      <div class="poster-cards-loading__spinner">â³</div>
      <div class="poster-cards-loading__text">Loading recommendations...</div>
    </div>
  `;
    // Load recommendations
    loadDiscoverRecommendations();
  };
  /**
   * Load discover recommendations from TMDB
   */
  async function loadDiscoverRecommendations() {
    try {
      const container = document.getElementById('discoverList');
      if (!container) return;
      // Get not interested items to filter out
      const notInterested = getNotInterestedItems();
      // Get current language for TMDB API calls using centralized helper
      const currentLang = window.appData?.settings?.lang || 'en';
      const tmdbLang = window.getTMDBLocale(currentLang);
      // Load popular movies and TV shows using proxy
      const [moviesData, tvData] = await Promise.all([
        window.tmdbGet('movie/popular', { page: 1, language: tmdbLang }),
        window.tmdbGet('tv/popular', { page: 1, language: tmdbLang }),
      ]);
      // Check if we got valid data (tmdbGet returns parsed JSON or empty results on error)
      if (!moviesData || !tvData || !moviesData.results || !tvData.results) {
        console.warn('âš ï¸ Failed to fetch recommendations - using empty results');
        return [];
      }
      // Combine and filter results
      const allItems = [
        ...moviesData.results.map((item) => ({ ...item, media_type: 'movie' })),
        ...tvData.results.map((item) => ({ ...item, media_type: 'tv' })),
      ];
      // Filter out not interested items
      const filteredItems = allItems.filter(
        (item) =>
          !notInterested.some(
            (notItem) => notItem.id === item.id && notItem.media_type === item.media_type,
          ),
      );
      // Shuffle and take first 20
      const shuffled = filteredItems.sort(() => Math.random() - 0.5);
      const recommendations = shuffled.slice(0, 20);
      // Render recommendations
      if (recommendations.length === 0) {
        container.innerHTML = `
        <div class="poster-cards-empty">
          <div class="poster-cards-empty__icon">âœ¨</div>
          <div class="poster-cards-empty__title">No Recommendations</div>
          <div class="poster-cards-empty__description">Try adjusting your preferences or check back later.</div>
        </div>
      `;
        return;
      }
      // Clear loading state
      container.innerHTML = '';
      // Create poster cards
      for (const item of recommendations) {
        const card = await createDiscoverCard(item);
        if (card) {
          container.appendChild(card);
        }
      }
    } catch (error) {
      console.error('Failed to load discover recommendations:', error);
      const container = document.getElementById('discoverList');
      if (container) {
        container.innerHTML = `
        <div class="poster-cards-error">
          <div class="poster-cards-error__icon">âŒ</div>
          <div class="poster-cards-error__title">Failed to Load</div>
          <div class="poster-cards-error__description">Unable to load recommendations. Please try again later.</div>
          <button class="btn btn--primary poster-cards-error__retry" onclick="loadDiscoverContent()">
            Try Again
          </button>
        </div>
      `;
      }
    }
  }
  /**
   * Create discover card with not interested button
   * @param {Object} item - Item data
   * @returns {HTMLElement} Card element
   */
  async function createDiscoverCard(item) {
    // Use Card component if available
    if (!window.Card) {
      return null;
    }

    const card = window.Card({
      variant: 'poster',
      id: item.id || item.tmdb_id || item.tmdbId,
      title: item.title || item.name,
      subtitle: item.year
        ? `${item.year} â€¢ ${item.mediaType === 'tv' ? 'TV Series' : 'Movie'}`
        : item.mediaType === 'tv'
          ? 'TV Series'
          : 'Movie',
      posterUrl: item.posterUrl || item.poster_src,
      rating: item.vote_average || item.rating || 0,
      badges: [{ label: 'Discover', kind: 'status' }],
      primaryAction: {
        label: 'View Details',
        onClick: () => {
          if (window.openTMDBLink) {
            window.openTMDBLink(item.id || item.tmdb_id, item.mediaType || 'movie');
          }
        },
      },
      overflowActions: [
        {
          label: 'Not Interested',
          onClick: () => {
            addToNotInterested(item);
            card.remove();
            showToast(
              'info',
              'Added to Not Interested',
              `${item.title || item.name} won't appear in recommendations`,
            );
          },
          icon: 'âŒ',
        },
      ],
      onOpenDetails: () => {
        if (window.openTMDBLink) {
          window.openTMDBLink(item.id || item.tmdb_id, item.mediaType || 'movie');
        }
      },
    });
    return card;
  }
  // ---- Not Interested Database ----
  /**
   * Get all not interested items
   * @returns {Array} Array of not interested items
   */
  function getNotInterestedItems() {
    try {
      const stored = localStorage.getItem('flicklet-not-interested');
      return stored ? JSON.parse(stored) : [];
    } catch (error) {
      console.error('Failed to get not interested items:', error);
      return [];
    }
  }
  /**
   * Add item to not interested list
   * @param {Object} item - Item to add
   */
  function addToNotInterested(item) {
    try {
      const notInterested = getNotInterestedItems();
      const exists = notInterested.some(
        (notItem) => notItem.id === item.id && notItem.media_type === item.media_type,
      );
      if (!exists) {
        notInterested.push({
          id: item.id,
          title: item.title || item.name,
          media_type: item.media_type,
          added_date: new Date().toISOString(),
        });
        localStorage.setItem('flicklet-not-interested', JSON.stringify(notInterested));
      }
    } catch (error) {
      console.error('Failed to add to not interested:', error);
    }
  }
  /**
   * Remove item from not interested list
   * @param {string|number} itemId - Item ID
   * @param {string} mediaType - Media type
   */
  function removeFromNotInterested(itemId, mediaType) {
    try {
      const notInterested = getNotInterestedItems();
      const filtered = notInterested.filter(
        (notItem) => !(notItem.id === itemId && notItem.media_type === mediaType),
      );
      localStorage.setItem('flicklet-not-interested', JSON.stringify(filtered));
    } catch (error) {
      console.error('Failed to remove from not interested:', error);
    }
  }
  /**
   * Clear all not interested items
   */
  function clearNotInterested() {
    try {
      localStorage.removeItem('flicklet-not-interested');
    } catch (error) {
      console.error('Failed to clear not interested:', error);
    }
  }
  // ---- Modal Functions for Poster Cards ----
  window.openItemDetails = function openItemDetails(id) {
    console.log('Open details for item:', id);
    // TODO: Implement item details modal
  };
  // TODO stubs removed - actual implementations found below
  // TODO stub removed - actual implementation found below
  // ---- Toast Notifications ----
  window.showToast = function showToast(type, title, message) {
    // Remove existing notifications (single notification rule)
    document.querySelectorAll('.notification').forEach((n) => n.remove());
    // Create centered notification
    const notification = document.createElement('div');
    notification.className = `notification notification--${type}`;
    notification.innerHTML = `<span class="notification-message">${message}</span>`;
    document.body.appendChild(notification);
    // Animate in with scale and fade
    setTimeout(() => {
      notification.classList.add('notification--visible');
    }, 10);
    // Auto-dismiss after 4 seconds with fade out
    setTimeout(() => {
      if (notification.parentNode) {
        notification.classList.remove('notification--visible');
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 300);
      }
    }, 4000);
  };
  // ---- Modal Functions ----
  /**
   * Open notes modal for an item
   * @param {Object} item - Item data
   */
  window.openNotesModal = function openNotesModal(item) {
    // Create modal element if it doesn't exist
    let modal = document.getElementById('notesModal');
    if (!modal) {
      modal = document.createElement('div');
      modal.id = 'notesModal';
      modal.className = 'modal modal--notes';
      modal.setAttribute('aria-hidden', 'true');
      modal.style.display = 'none';
      document.body.appendChild(modal);
    }
    // Get existing notes
    const existingNotes = getItemNotes(item.id) || '';
    modal.innerHTML = `
    <div class="modal-overlay" data-close></div>
    <div class="modal-dialog" role="document">
      <div class="modal__header">
        <h3 class="modal__title">Notes for ${item.title || item.name}</h3>
        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>
      </div>
      <div class="modal__body">
        <textarea class="modal__textarea" placeholder="Add your notes about this show or movie..." rows="8">${existingNotes}</textarea>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary modal__cancel" data-close>Cancel</button>
        <button class="btn btn--primary modal__save">Save Notes</button>
      </div>
    </div>
  `;
    // Add save functionality
    const saveBtn = modal.querySelector('.modal__save');
    const textarea = modal.querySelector('.modal__textarea');
    saveBtn.addEventListener('click', () => {
      const notes = textarea.value.trim();
      saveItemNotes(item.id, notes);
      showToast('success', 'Notes Saved', `Notes saved for ${item.title || item.name}`);
      if (window.ModalUtility) {
        window.ModalUtility.close();
      }
    });
    // Use central modal utility
    if (window.ModalUtility) {
      window.ModalUtility.open('notesModal', document.activeElement);
      // Focus textarea after modal opens
      setTimeout(() => textarea.focus(), 100);
    } else {
      console.error('ModalUtility not available');
    }
  };
  /**
   * Open episode guide modal for a TV show
   * @param {Object} item - Item data
   */
  window.openEpisodeGuideModal = function openEpisodeGuideModal(item) {
    // Create modal element if it doesn't exist
    let modal = document.getElementById('episodeGuideModal');
    if (!modal) {
      modal = document.createElement('div');
      modal.id = 'episodeGuideModal';
      modal.className = 'modal modal--episodes';
      modal.setAttribute('aria-hidden', 'true');
      modal.style.display = 'none';
      document.body.appendChild(modal);
    }
    modal.innerHTML = `
    <div class="modal-overlay" data-close></div>
    <div class="modal-dialog" role="document">
      <div class="modal__header">
        <h3 class="modal__title">Episode Guide - ${item.title || item.name}</h3>
        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>
      </div>
      <div class="modal__body">
        <div class="episode-guide">
          <div class="episode-guide__seasons">
            <label for="seasonSelect">Season:</label>
            <select id="seasonSelect" class="episode-guide__select">
              <option value="1">Season 1</option>
              <option value="2">Season 2</option>
              <option value="3">Season 3</option>
            </select>
          </div>
          <div class="episode-guide__episodes">
            <div class="episode-guide__episode">
              <div class="episode-guide__episode-number">S1E1</div>
              <div class="episode-guide__episode-title">Pilot</div>
              <div class="episode-guide__episode-date">Jan 15, 2023</div>
              <button class="btn btn--sm episode-guide__watch-btn">Mark Watched</button>
            </div>
            <div class="episode-guide__episode">
              <div class="episode-guide__episode-number">S1E2</div>
              <div class="episode-guide__episode-title">The Second Episode</div>
              <div class="episode-guide__episode-date">Jan 22, 2023</div>
              <button class="btn btn--sm episode-guide__watch-btn">Mark Watched</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary" data-close>Close</button>
      </div>
    </div>
  `;
    // Use central modal utility
    if (window.ModalUtility) {
      window.ModalUtility.open('episodeGuideModal', document.activeElement);
    } else {
      console.error('ModalUtility not available');
    }
  };
  /**
   * Confirm remove item
   * @param {Object} item - Item data
   * @param {string} section - Section type
   */
  window.confirmRemoveItem = function confirmRemoveItem(item, section) {
    // Create modal element if it doesn't exist
    let modal = document.getElementById('confirmRemoveModal');
    if (!modal) {
      modal = document.createElement('div');
      modal.id = 'confirmRemoveModal';
      modal.className = 'modal modal--remove';
      modal.setAttribute('aria-hidden', 'true');
      modal.style.display = 'none';
      document.body.appendChild(modal);
    }
    modal.innerHTML = `
    <div class="modal-overlay" data-close></div>
    <div class="modal-dialog" role="document">
      <div class="modal__header">
        <h3 class="modal__title">Remove Item</h3>
        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>
      </div>
      <div class="modal__body">
        <p>Are you sure you want to remove <strong>${item.title || item.name}</strong> from your ${section} list?</p>
        <p class="modal__warning">This action cannot be undone.</p>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary modal__cancel" data-close>Cancel</button>
        <button class="btn btn--danger modal__confirm">Remove</button>
      </div>
    </div>
  `;
    // Add confirm functionality
    const confirmBtn = modal.querySelector('.modal__confirm');
    confirmBtn.addEventListener('click', () => {
      // Remove item from store
      removeItemFromStore(item, section);
      // Update UI
      const container = document.getElementById(`${section}List`);
      if (container) {
        const card = container.querySelector(`[data-id="${item.id}"]`);
        if (card) {
          card.remove();
        }
      }
      // Emit cards:changed event for centralized count updates
      document.dispatchEvent(
        new CustomEvent('cards:changed', {
          detail: { source: 'removeItemFromCurrentList', itemId: item.id, section: section },
        }),
      );
      showToast('success', 'Item Removed', `${item.title || item.name} removed from ${section}`);
      if (window.ModalUtility) {
        window.ModalUtility.close();
      }
    });
    // Use central modal utility
    if (window.ModalUtility) {
      window.ModalUtility.open('confirmRemoveModal', document.activeElement);
    } else {
      console.error('ModalUtility not available');
    }
  };
  /**
   * Open PRO teaser modal
   */
  window.openProTeaserModal = function openProTeaserModal() {
    // Create modal backdrop
    const backdrop = document.createElement('div');
    backdrop.className = 'modal-backdrop';
    backdrop.dataset.modal = 'pro';
    // Create modal content
    const modal = document.createElement('div');
    modal.className = 'modal modal--pro';
    modal.innerHTML = `
    <div class="modal__header">
      <h3 class="modal__title">â­ Flicklet PRO</h3>
      <button class="modal__close" aria-label="Close modal">Ã—</button>
    </div>
    <div class="modal__body">
      <div class="pro-teaser">
        <div class="pro-teaser__icon">â­</div>
        <h4 class="pro-teaser__title">Unlock Premium Features</h4>
        <ul class="pro-teaser__features">
          <li>ðŸ“ Unlimited notes for all shows & movies</li>
          <li>ðŸ“º Detailed episode guides with air dates</li>
          <li>ðŸ“Š Advanced statistics and insights</li>
          <li>ðŸŽ¨ Custom themes and layouts</li>
          <li>â˜ï¸ Cloud sync across all devices</li>
        </ul>
        <div class="pro-teaser__price">
          <span class="pro-teaser__amount">$4.99</span>
          <span class="pro-teaser__period">/month</span>
        </div>
      </div>
    </div>
    <div class="modal__footer">
      <button class="btn btn--secondary modal__close">Maybe Later</button>
      <button class="btn btn--primary modal__upgrade">Upgrade to PRO</button>
    </div>
  `;
    backdrop.appendChild(modal);
    document.body.appendChild(backdrop);
    // Add event listeners
    const closeBtn = modal.querySelector('.modal__close');
    const upgradeBtn = modal.querySelector('.modal__upgrade');
    const closeModal = () => {
      backdrop.remove();
    };
    closeBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', (e) => {
      if (e.target === backdrop) closeModal();
    });
    upgradeBtn.addEventListener('click', () => {
      showToast('info', 'Coming Soon', 'PRO upgrade will be available soon!');
      closeModal();
    });
  };
  /**
   * Get item notes from localStorage
   * @param {string|number} itemId - Item ID
   * @returns {string} Notes text
   */
  function getItemNotes(itemId) {
    try {
      const notes = localStorage.getItem(`flicklet-notes-${itemId}`);
      return notes || '';
    } catch (error) {
      console.error('Failed to get item notes:', error);
      return '';
    }
  }
  /**
   * Save item notes to localStorage
   * @param {string|number} itemId - Item ID
   * @param {string} notes - Notes text
   */
  function saveItemNotes(itemId, notes) {
    try {
      if (notes.trim()) {
        localStorage.setItem(`flicklet-notes-${itemId}`, notes);
      } else {
        localStorage.removeItem(`flicklet-notes-${itemId}`);
      }
    } catch (error) {
      console.error('Failed to save item notes:', error);
    }
  }
  /**
   * Remove item from store
   * @param {Object} item - Item data
   * @param {string} section - Section type
   */
  function removeItemFromStore(item, section) {
    if (!window.appData) return;
    const mediaType = item.media_type || (item.first_air_date ? 'tv' : 'movie');
    const mediaKey = mediaType === 'tv' ? 'tv' : 'movies';
    if (window.appData[mediaKey] && window.appData[mediaKey][section]) {
      const list = window.appData[mediaKey][section];
      const index = list.findIndex((i) => i.id === item.id);
      if (index !== -1) {
        list.splice(index, 1);
        // Save to localStorage
        if (window.saveAppData) {
          window.saveAppData();
        } else {
          localStorage.setItem('flicklet-data', JSON.stringify(window.appData));
        }
      }
    }
  }
  /**
   * Setup Not Interested management handlers
   */
  function setupNotInterestedHandlers() {
    const viewBtn = document.getElementById('viewNotInterestedBtn');
    const clearBtn = document.getElementById('clearNotInterestedBtn');
    const closeBtn = document.getElementById('closeNotInterestedBtn');
    const listContainer = document.getElementById('notInterestedList');
    const itemsContainer = document.getElementById('notInterestedItems');
    if (viewBtn) {
      viewBtn.addEventListener('click', () => {
        loadNotInterestedList();
        listContainer.style.display = 'block';
      });
    }
    if (clearBtn) {
      clearBtn.addEventListener('click', () => {
        if (
          confirm(
            'Are you sure you want to clear all "Not Interested" items? This action cannot be undone.',
          )
        ) {
          clearNotInterested();
          showToast('success', 'Cleared', 'All "Not Interested" items have been removed');
          if (listContainer) {
            listContainer.style.display = 'none';
          }
        }
      });
    }
    if (closeBtn) {
      closeBtn.addEventListener('click', () => {
        if (listContainer) {
          listContainer.style.display = 'none';
        }
      });
    }
  }
  /**
   * Load and display Not Interested list
   */
  function loadNotInterestedList() {
    const itemsContainer = document.getElementById('notInterestedItems');
    if (!itemsContainer) return;
    const notInterested = getNotInterestedItems();
    if (notInterested.length === 0) {
      itemsContainer.innerHTML = `
      <div class="not-interested-empty">
        <p>No items marked as "Not Interested"</p>
      </div>
    `;
      return;
    }
    const itemsHTML = notInterested
      .map(
        (item) => `
    <div class="not-interested-item">
      <div class="not-interested-item__info">
        <div class="not-interested-item__title">${item.title}</div>
        <div class="not-interested-item__type">${item.media_type === 'tv' ? 'TV Show' : 'Movie'}</div>
        <div class="not-interested-item__date">Added: ${new Date(item.added_date).toLocaleDateString()}</div>
      </div>
      <button class="btn btn--sm btn--secondary not-interested-item__remove" 
              data-id="${item.id}" 
              data-media-type="${item.media_type}">
        Remove
      </button>
    </div>
  `,
      )
      .join('');
    itemsContainer.innerHTML = itemsHTML;
    // Add remove handlers
    const removeButtons = itemsContainer.querySelectorAll('.not-interested-item__remove');
    removeButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const itemId = button.dataset.id;
        const mediaType = button.dataset.mediaType;
        removeFromNotInterested(itemId, mediaType);
        showToast('success', 'Removed', 'Item removed from "Not Interested" list');
        // Reload the list
        loadNotInterestedList();
      });
    });
  }
  /**
   * Setup drag-reorder functionality for lists
   */
  function setupDragReorder() {
    // Add drag-reorder to all list containers
    const listContainers = ['watchingList', 'wishlistList', 'watchedList'];
    listContainers.forEach((containerId) => {
      const container = document.getElementById(containerId);
      if (container) {
        makeSortable(container);
      }
    });
  }
  /**
   * Make a container sortable with drag-reorder
   * @param {HTMLElement} container - Container element
   */
  function makeSortable(container) {
    let draggedElement = null;
    let draggedIndex = -1;
    // Add drag handles to all cards (both legacy and V2)
    const addDragHandles = () => {
      // Legacy poster cards
      const legacyCards = container.querySelectorAll('.poster-card');
      legacyCards.forEach((card) => {
        if (!card.querySelector('.poster-card__drag-handle')) {
          const dragHandle = document.createElement('div');
          dragHandle.className = 'poster-card__drag-handle';
          dragHandle.innerHTML = 'â‹®â‹®';
          dragHandle.setAttribute('draggable', 'true');
          dragHandle.setAttribute('aria-label', 'Drag to reorder');
          const actions = card.querySelector('.poster-card__actions');
          if (actions) {
            actions.insertBefore(dragHandle, actions.firstChild);
          }
        }
      });
      
      // V2 cards - make existing drag handles draggable
      const v2Cards = container.querySelectorAll('.card.v2 .drag-handle');
      v2Cards.forEach((dragHandle) => {
        if (!dragHandle.hasAttribute('draggable')) {
          dragHandle.setAttribute('draggable', 'true');
          dragHandle.style.cursor = 'grab';
        }
      });
    };
    // Add drag handle styles
    const addDragStyles = () => {
      if (!document.getElementById('drag-reorder-styles')) {
        const style = document.createElement('style');
        style.id = 'drag-reorder-styles';
        style.textContent = `
        .poster-card__drag-handle {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 24px;
          height: 24px;
          background: var(--color-surface-2, #f5f5f5);
          border: 1px solid var(--color-border, #e0e0e0);
          border-radius: 4px;
          cursor: grab;
          font-size: 12px;
          color: var(--color-text-muted, #999999);
          transition: all 0.2s ease;
          margin-right: 8px;
        }
        .poster-card__drag-handle:hover {
          background: var(--color-primary-light, #fce4ec);
          border-color: var(--color-primary, #e91e63);
          color: var(--color-primary, #e91e63);
        }
        .poster-card__drag-handle:active {
          cursor: grabbing;
        }
        .poster-card--dragging {
          opacity: 0.5;
          transform: rotate(5deg);
          z-index: 1000;
        }
        .poster-card--drag-over {
          border-color: var(--color-primary, #e91e63);
          background: var(--color-primary-light, #fce4ec);
        }
        .poster-cards-grid--reordering {
          cursor: grabbing;
        }
        .poster-cards-grid--reordering .poster-card {
          transition: transform 0.2s ease;
        }
        @media (max-width: 768px) {
          .poster-card__drag-handle {
            width: 20px;
            height: 20px;
            font-size: 10px;
          }
        }
      `;
        document.head.appendChild(style);
      }
    };
    // Initialize
    addDragStyles();
    addDragHandles();
    // Set up drag events
    container.addEventListener('dragstart', (e) => {
      if (e.target.classList.contains('poster-card__drag-handle') || e.target.classList.contains('drag-handle')) {
        // Support both legacy and V2 cards
        draggedElement = e.target.closest('.poster-card') || e.target.closest('.card.v2');
        draggedIndex = Array.from(container.children).indexOf(draggedElement);
        draggedElement.classList.add('poster-card--dragging');
        container.classList.add('poster-cards-grid--reordering');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', draggedElement.outerHTML);
      }
    });
    container.addEventListener('dragend', (e) => {
      if (e.target.classList.contains('poster-card__drag-handle') || e.target.classList.contains('drag-handle')) {
        draggedElement.classList.remove('poster-card--dragging');
        container.classList.remove('poster-cards-grid--reordering');
        // Remove drag-over classes
        const cards = container.querySelectorAll('.poster-card, .card.v2');
        cards.forEach((card) => card.classList.remove('poster-card--drag-over'));
        draggedElement = null;
        draggedIndex = -1;
      }
    });
    container.addEventListener('dragover', (e) => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      const afterElement = getDragAfterElement(container, e.clientY);
      const card = e.target.closest('.poster-card') || e.target.closest('.card.v2');
      if (card && card !== draggedElement) {
        card.classList.add('poster-card--drag-over');
      }
    });
    container.addEventListener('dragleave', (e) => {
      const card = e.target.closest('.poster-card') || e.target.closest('.card.v2');
      if (card) {
        card.classList.remove('poster-card--drag-over');
      }
    });
    container.addEventListener('drop', (e) => {
      e.preventDefault();
      const afterElement = getDragAfterElement(container, e.clientY);
      const card = e.target.closest('.poster-card') || e.target.closest('.card.v2');
      if (card && card !== draggedElement) {
        if (afterElement == null) {
          container.appendChild(draggedElement);
        } else {
          container.insertBefore(draggedElement, afterElement);
        }
        // Update the underlying data
        updateListOrder(container, draggedElement);
      }
      // Clean up
      const cards = container.querySelectorAll('.poster-card, .card.v2');
      cards.forEach((card) => card.classList.remove('poster-card--drag-over'));
    });
    // Re-add drag handles when new cards are added
    const observer = new MutationObserver(() => {
      addDragHandles();
    });
    observer.observe(container, { childList: true, subtree: true });
  }
  
  // Expose makeSortable globally
  window.makeSortable = makeSortable;
  /**
   * Get the element after which to insert the dragged element
   * @param {HTMLElement} container - Container element
   * @param {number} y - Y coordinate
   * @returns {HTMLElement|null} Element after which to insert
   */
  function getDragAfterElement(container, y) {
    const draggableElements = [
      ...container.querySelectorAll('.poster-card:not(.poster-card--dragging), .card.v2:not(.poster-card--dragging)'),
    ];
    return draggableElements.reduce(
      (closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      },
      { offset: Number.NEGATIVE_INFINITY },
    ).element;
  }
  /**
   * Update the underlying data order after drag-reorder
   * @param {HTMLElement} container - Container element
   * @param {HTMLElement} draggedElement - Dragged element
   */
  function updateListOrder(container, draggedElement) {
    if (!window.appData) return;
    const containerId = container.id;
    const section = containerId.replace('List', '');
    const mediaType =
      section === 'watching' || section === 'wishlist' || section === 'watched'
        ? containerId.includes('tv')
          ? 'tv'
          : 'movies'
        : 'tv';
    const mediaKey = mediaType === 'tv' ? 'tv' : 'movies';
    if (!window.appData[mediaKey] || !window.appData[mediaKey][section]) return;
    // Get new order from DOM - support both legacy and V2 cards
    const cards = container.querySelectorAll('.poster-card, .card.v2');
    const newOrder = Array.from(cards)
      .map((card) => {
        const itemId = card.dataset.id || card.querySelector('[data-id]')?.dataset.id;
        return window.appData[mediaKey][section].find((item) => item.id == itemId);
      })
      .filter(Boolean);
    // Update the data
    window.appData[mediaKey][section] = newOrder;
    // Save to localStorage
    if (window.saveAppData) {
      window.saveAppData();
    } else {
      localStorage.setItem('flicklet-data', JSON.stringify(window.appData));
    }
    showToast('success', 'Reordered', 'List order updated');
  }
  window.loadSettingsContent = function loadSettingsContent() {
    // Settings content is now in HTML, just add event handlers for new data tools
    FlickletDebug.info('âš™ï¸ Loading settings content - adding data tools handlers');
    // Add Not Interested management handlers
    setupNotInterestedHandlers();
    // Add drag-reorder functionality
    setupDragReorder();
    // New robust export/import handlers
    const btnExport = document.getElementById('btnExport');
    const fileImport = document.getElementById('fileImport');
    FlickletDebug.info('ðŸ” Debug: btnExport element found:', btnExport);
    FlickletDebug.info('ðŸ” Debug: fileImport element found:', fileImport);
    FlickletDebug.info('ðŸ” Debug: window.guard function exists:', typeof window.guard);
    FlickletDebug.info('ðŸ” Debug: btnExport exists check:', !!btnExport);
    window.guard(!!btnExport, () => {
      FlickletDebug.info('âœ… Setting up export/import handlers');
      async function collectExport() {
        // Get data from the actual localStorage keys the app uses
        const flickletData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
        const legacyData = JSON.parse(localStorage.getItem('tvMovieTrackerData') || '{}');
        const data = {
          meta: {
            app: 'Flicklet',
            version: window.FlickletApp?.version || 'n/a',
            exportedAt: new Date().toISOString(),
          },
          // Use the most recent data available
          appData: flickletData.tv || flickletData.movies ? flickletData : legacyData,
          // Also include the legacy format for compatibility
          legacyData: legacyData,
        };
        return data;
      }
      function downloadJSON(obj, filename) {
        const blob = new Blob([JSON.stringify(obj, null, 2)], { type: 'application/json' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = filename;
        a.click();
        URL.revokeObjectURL(a.href);
      }
      btnExport.addEventListener('click', async () => {
        FlickletDebug.info('ðŸš€ Export button clicked!');
        try {
          const data = await collectExport();
          FlickletDebug.info('ðŸ“Š Export data collected:', data);
          downloadJSON(data, `flicklet-export-${new Date().toISOString().slice(0, 10)}.json`);
          FlickletDebug.info('ðŸ’¾ File download initiated');
          window.showToast?.('Export created.');
        } catch (error) {
          FlickletDebug.error('âŒ Export failed:', error);
          window.showToast?.('Export failed: ' + error.message);
        }
      });
      fileImport.addEventListener('change', async (e) => {
        const file = e.target.files?.[0];
        if (!file) return;
        try {
          const text = await file.text();
          const json = JSON.parse(text);
          // Import the main app data
          if (json.appData) {
            localStorage.setItem('flicklet-data', JSON.stringify(json.appData));
          }
          // Import legacy data for compatibility
          if (json.legacyData) {
            localStorage.setItem('tvMovieTrackerData', JSON.stringify(json.legacyData));
          }
          // Legacy format support (for old exports)
          if (json.lists) localStorage.setItem('flicklet_lists', JSON.stringify(json.lists));
          if (json.notes) localStorage.setItem('flicklet_notes', JSON.stringify(json.notes));
          if (json.prefs) localStorage.setItem('flicklet_prefs', JSON.stringify(json.prefs));
          window.showToast?.('Import complete. Reloadingâ€¦');
          setTimeout(() => location.reload(), 500);
        } catch (err) {
          FlickletDebug.error(err);
          window.showToast?.('Import failed: invalid file.');
        }
      });
    });
    // Pro preview toggle
    window.guard(!!document.getElementById('btnProTry'), () => {
      document.getElementById('btnProTry').addEventListener('click', () => {
        window.FLAGS.proEnabled = !window.FLAGS.proEnabled;
        document.body.classList.toggle('is-pro', window.FLAGS.proEnabled);
        showNotification?.(
          window.FLAGS.proEnabled ? 'Pro preview ON' : 'Pro preview OFF',
          'success',
        );
        // Update Pro state UI
        window.updateProState?.();
        // Refresh providers, extras, playlists, and trivia when Pro state changes
        FlickletDebug.info(
          'ðŸ”„ Pro toggle (btnProTry): Refreshing providers, extras, playlists, and trivia...',
          { pro: window.FLAGS.proEnabled },
        );
        if (window.__FlickletRefreshProviders) {
          window.__FlickletRefreshProviders();
          FlickletDebug.info('âœ… Providers refreshed');
        }
        if (window.__FlickletRefreshExtras) {
          window.__FlickletRefreshExtras();
          FlickletDebug.info('âœ… Extras refreshed');
        }
        if (window.__FlickletRefreshPlaylists) {
          window.__FlickletRefreshPlaylists();
          console.log('âœ… Playlists refreshed');
        }
        if (window.__FlickletRefreshTrivia) {
          window.__FlickletRefreshTrivia();
          console.log('âœ… Trivia refreshed');
        }
        if (window.__FlickletRefreshSeriesOrganizer) {
          window.__FlickletRefreshSeriesOrganizer();
          console.log('âœ… Series Organizer refreshed');
        }
        // Re-check advanced notifications visibility when Pro state changes
        const advancedCard = document.getElementById('notifAdvancedCard');
        if (advancedCard) {
          if (window.FLAGS.proEnabled || window.FLAGS.notifAdvancedEnabled) {
            advancedCard.style.display = 'block';
            console.log('ðŸ” Debug: Advanced notifications card shown due to Pro state change');
          } else {
            advancedCard.style.display = 'none';
            console.log('ðŸ” Debug: Advanced notifications card hidden due to Pro state change');
          }
        }
      });
    });
    // Stats card functionality
    window.guard(!!window.FLAGS.statsEnabled && !!document.getElementById('statsContent'), () => {
      const EL = document.getElementById('statsContent');
      function getCounts() {
        // Get data from actual localStorage keys the app uses
        const flickletData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
        const legacyData = JSON.parse(localStorage.getItem('tvMovieTrackerData') || '{}');
        // Use the most recent data available
        const appData = flickletData.tv || flickletData.movies ? flickletData : legacyData;
        const counts = {
          watching: (appData.tv?.watching?.length || 0) + (appData.movies?.watching?.length || 0),
          wishlist: (appData.tv?.wishlist?.length || 0) + (appData.movies?.wishlist?.length || 0),
          watched: (appData.tv?.watched?.length || 0) + (appData.movies?.watched?.length || 0),
          notes: 0, // Notes feature not implemented yet
        };
        counts.total = counts.watching + counts.wishlist + counts.watched;
        return counts;
      }
      function render() {
        const c = getCounts();
        // Get detailed breakdown for TV and Movies
        const flickletData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
        const legacyData = JSON.parse(localStorage.getItem('tvMovieTrackerData') || '{}');
        const appData = flickletData.tv || flickletData.movies ? flickletData : legacyData;
        const tvWatching = appData.tv?.watching || [];
        const tvWishlist = appData.tv?.wishlist || [];
        const tvWatched = appData.tv?.watched || [];
        const movieWatching = appData.movies?.watching || [];
        const movieWishlist = appData.movies?.wishlist || [];
        const movieWatched = appData.movies?.watched || [];
        const totalShows = tvWatching.length + tvWishlist.length + tvWatched.length;
        const totalMovies = movieWatching.length + movieWishlist.length + movieWatched.length;
        EL.innerHTML = `
        <div class="stats-grid">
          <div class="stat">
            <div class="stat-number">${c.watching}</div>
            <div class="stat-label">Currently Watching</div>
          </div>
          <div class="stat">
            <div class="stat-number">${c.wishlist}</div>
            <div class="stat-label">Want to Watch</div>
          </div>
          <div class="stat">
            <div class="stat-number">${c.watched}</div>
            <div class="stat-label">Already Watched</div>
          </div>
          <div class="stat">
            <div class="stat-number">${c.total}</div>
            <div class="stat-label">Total Items</div>
          </div>
        </div>
        <div class="card-surface" style="margin-top: 15px;">
          <h5 class="heading-subtle">ðŸ“º TV Shows Breakdown</h5>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">
            <div><strong>${tvWatching.length}</strong> Watching</div>
            <div><strong>${tvWishlist.length}</strong> Want to Watch</div>
            <div><strong>${tvWatched.length}</strong> Watched</div>
          </div>
          <h5 class="heading-subtle" style="margin: 10px 0;">ðŸŽ¬ Movies Breakdown</h5>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">
            <div><strong>${movieWatching.length}</strong> Watching</div>
            <div><strong>${movieWishlist.length}</strong> Want to Watch</div>
            <div><strong>${movieWatched.length}</strong> Watched</div>
          </div>
        </div>
      `;
      }
      window.addEventListener('storage', render);
      render();
    });
    // Notifications engine
    window.guard(!!window.FLAGS.notifEngineEnabled, () => {
      const masterToggle = document.getElementById('notifMasterToggle');
      // Load master toggle state
      if (masterToggle) {
        masterToggle.checked = localStorage.getItem('flicklet_notif_master') !== 'false';
        masterToggle.addEventListener('change', (e) => {
          localStorage.setItem('flicklet_notif_master', e.target.checked);
          showNotification?.(
            e.target.checked ? 'Notifications enabled' : 'Notifications disabled',
            'success',
          );
        });
      }
      function checkForUpcomingEpisodes() {
        // Skip if master toggle is off
        if (localStorage.getItem('flicklet_notif_master') === 'false') return;
        // Skip if we already checked recently (within 6 hours)
        const lastCheck = localStorage.getItem('flicklet_last_notif');
        const now = new Date();
        if (lastCheck) {
          const lastCheckDate = new Date(lastCheck);
          const hoursSinceLastCheck = (now - lastCheckDate) / (1000 * 60 * 60);
          if (hoursSinceLastCheck < 6) return;
        }
        // Get watching items
        const flickletData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
        const legacyData = JSON.parse(localStorage.getItem('tvMovieTrackerData') || '{}');
        const appData = flickletData.tv || flickletData.movies ? flickletData : legacyData;
        const watchingItems = [
          ...(appData.tv?.watching || []),
          ...(appData.movies?.watching || []),
        ];
        // Check for episodes within 24 hours
        const upcomingEpisodes = watchingItems.filter((item) => {
          if (!item.nextEpisodeAirDate) return false;
          const episodeDate = new Date(item.nextEpisodeAirDate);
          const hoursUntilEpisode = (episodeDate - now) / (1000 * 60 * 60);
          return hoursUntilEpisode > 0 && hoursUntilEpisode <= 24;
        });
        // Show notification if episodes found
        if (upcomingEpisodes.length > 0) {
          const episodeText = upcomingEpisodes.length === 1 ? 'episode' : 'episodes';
          showNotification?.(
            `ðŸŽ¬ ${upcomingEpisodes.length} new ${episodeText} coming soon!`,
            'success',
          );
        }
        // Update last check time
        localStorage.setItem('flicklet_last_notif', now.toISOString());
      }
      // Run check on load
      checkForUpcomingEpisodes();
      // Run check every 6 hours
      setInterval(checkForUpcomingEpisodes, 6 * 60 * 60 * 1000);
    });
    // Accessibility - Add aria-labels to dynamic card action buttons
    function addCardAccessibility() {
      document.querySelectorAll('.card .actions button').forEach((btn) => {
        if (btn.textContent.includes('Remove') && !btn.getAttribute('aria-label')) {
          btn.setAttribute('aria-label', 'Remove this item from your list');
        }
        if (btn.textContent.includes('Move to') && !btn.getAttribute('aria-label')) {
          const targetList = btn.textContent.replace('Move to ', '');
          btn.setAttribute('aria-label', `Move this item to ${targetList} list`);
        }
      });
    }
    // Call accessibility function after a short delay to ensure cards are rendered
    setTimeout(addCardAccessibility, 100);
    // Pro state management
    function updateProState() {
      const isPro = window.FLAGS.proEnabled;
      const proBadge = document.getElementById('proBadge');
      // Show/hide PRO badge
      if (proBadge) {
        proBadge.style.display = isPro ? 'inline-block' : 'none';
      }
      // Update Pro features using centralized settings manager
      const isProFromSettings = window.SettingsManager ? window.SettingsManager.isPro() : false;
      document.querySelectorAll('[data-pro="true"]').forEach((el) => {
        if (isProFromSettings) {
          el.classList.add('pro-enabled');
          el.classList.remove('locked');
          el.removeAttribute('aria-disabled');
        } else {
          el.classList.remove('pro-enabled');
          el.classList.add('locked');
          el.setAttribute('aria-disabled', 'true');
        }
      });
    }
    // Call on load and when Pro state changes
    updateProState();
    window.updateProState = updateProState;
    // Listen for settings changes
    document.addEventListener('settings:changed', (event) => {
      const { key, value } = event.detail;
      // Handle specific setting changes
      if (key === 'pro' || key === 'isPro') {
        updateProState();
      } else if (key === 'theme') {
        // Update theme
        document.documentElement.setAttribute('data-theme', value);
      } else if (key === 'lang') {
        // Update language
        if (typeof window.updateLanguage === 'function') {
          window.updateLanguage(value);
        }
      } else if (key === 'bulk') {
        // Handle bulk updates
        const changes = value;
        changes.forEach((change) => {
          if (change.key === 'pro' || change.key === 'isPro') {
            updateProState();
          } else if (change.key === 'theme') {
            document.documentElement.setAttribute('data-theme', change.value);
          } else if (change.key === 'lang') {
            if (typeof window.updateLanguage === 'function') {
              window.updateLanguage(change.value);
            }
          }
        });
      }
      console.log('Settings changed:', { key, value });
    });
    // Toggle Pro preview function for the top button
    window.toggleProPreview = function () {
      window.FLAGS.proEnabled = !window.FLAGS.proEnabled;
      document.body.classList.toggle('is-pro', window.FLAGS.proEnabled);
      showNotification?.(window.FLAGS.proEnabled ? 'Pro preview ON' : 'Pro preview OFF', 'success');
      // Update Pro state UI
      window.updateProState?.();
      // Update the Pro features list to show locked/unlocked states
      window.renderProFeaturesList?.();
      // Refresh providers, extras, playlists, and trivia when Pro state changes
      console.log(
        'ðŸ”„ Pro toggle (toggleProPreview): Refreshing providers, extras, playlists, and trivia...',
        { pro: window.FLAGS.proEnabled },
      );
      if (window.__FlickletRefreshProviders) {
        window.__FlickletRefreshProviders();
        console.log('âœ… Providers refreshed');
      }
      if (window.__FlickletRefreshExtras) {
        window.__FlickletRefreshExtras();
        console.log('âœ… Extras refreshed');
      }
      if (window.__FlickletRefreshPlaylists) {
        window.__FlickletRefreshPlaylists();
        console.log('âœ… Playlists refreshed');
      }
      if (window.__FlickletRefreshTrivia) {
        window.__FlickletRefreshTrivia();
        console.log('âœ… Trivia refreshed');
      }
      if (window.__FlickletRefreshSeriesOrganizer) {
        window.__FlickletRefreshSeriesOrganizer();
        console.log('âœ… Series Organizer refreshed');
      }
      // Re-check advanced notifications visibility when Pro state changes
      const advancedCard = document.getElementById('notifAdvancedCard');
      if (advancedCard) {
        if (window.FLAGS.proEnabled || window.FLAGS.notifAdvancedEnabled) {
          advancedCard.style.display = 'block';
          console.log('ðŸ” Debug: Advanced notifications card shown due to Pro state change');
        } else {
          advancedCard.style.display = 'none';
          console.log('ðŸ” Debug: Advanced notifications card hidden due to Pro state change');
        }
      }
    };
    // Open share modal function
    window.openShareModal = function () {
      const modal = document.getElementById('shareSelectionModal');
      if (modal) {
        modal.style.display = 'flex';
        // Load the share modal content
        if (typeof window.populateShareModal === 'function') {
          window.populateShareModal();
        } else {
          showNotification?.('Share feature loading...', 'info');
        }
      } else {
        showNotification?.('Share feature coming soon!', 'info');
      }
    };
    // Advanced notifications (PRO)
    console.log(
      'ðŸ” Debug: Checking advanced notifications conditions. FLAGS.notifAdvancedEnabled:',
      window.FLAGS.notifAdvancedEnabled,
      'FLAGS.proEnabled:',
      window.FLAGS.proEnabled,
    );
    window.guard(!!(window.FLAGS.notifAdvancedEnabled || window.FLAGS.proEnabled), () => {
      console.log('ðŸ” Debug: Advanced notifications guard condition met');
      const advancedCard = document.getElementById('notifAdvancedCard');
      const leadHoursInput = document.getElementById('leadHoursInput');
      const notifScopeSelect = document.getElementById('notifScopeSelect');
      console.log('ðŸ” Debug: Advanced card element found:', advancedCard);
      if (advancedCard) {
        advancedCard.style.display = 'block';
        console.log('ðŸ” Debug: Advanced notifications card display set to block');
        // Load saved preferences
        leadHoursInput.value = localStorage.getItem('flicklet_notif_lead') || '24';
        notifScopeSelect.value = localStorage.getItem('flicklet_notif_scope') || 'watching';
        // Save preferences on change
        leadHoursInput.addEventListener('change', (e) => {
          localStorage.setItem('flicklet_notif_lead', e.target.value);
        });
        notifScopeSelect.addEventListener('change', (e) => {
          localStorage.setItem('flicklet_notif_scope', e.target.value);
        });
        // Visual feedback for Pro state
        function updateProState() {
          const isPro = window.FLAGS.proEnabled;
          if (isPro) {
            advancedCard.classList.remove('disabled');
          } else {
            advancedCard.classList.add('disabled');
          }
        }
        updateProState();
        // Update when Pro state changes
        document.addEventListener('click', (e) => {
          if (e.target.id === 'btnProTry') {
            setTimeout(updateProState, 100);
          }
        });
      }
    });
    // ---- Data Import / Export ----
    // Old flaky handlers replaced by robust implementation above
    // ---- Item Management ----
    // Now set up the rest of Item Management functions in try-catch
    try {
      console.log('ðŸ”§ Setting up remaining Item Management functions...');
      // Create a proper addToList function for general use
      window.addToList = function addToList(item, listName) {
        console.log('ðŸ“ addToList called:', { item: item?.id, listName });
        try {
          if (!item || !item.id) {
            console.warn('âš ï¸ Invalid item for addToList');
            return false;
          }
          // Ensure appData structure exists
          if (!window.appData) {
            window.appData = { tv: {}, movies: {} };
          }
          const mediaType = item.media_type || (item.first_air_date ? 'tv' : 'movie');
          const category = mediaType === 'tv' ? 'tv' : 'movies';
          if (!window.appData[category]) {
            window.appData[category] = {};
          }
          if (!window.appData[category][listName]) {
            window.appData[category][listName] = [];
          }
          
          // Ensure the item has the correct media_type field
          if (!item.media_type) {
            item.media_type = mediaType;
          }
          // Check if already exists using the new adapter as canonical source
          let exists = false;
          if (window.WatchlistsAdapterV2 && window.WatchlistsAdapterV2._cache) {
            const cache = window.WatchlistsAdapterV2._cache;
            const listKey = listName + 'Ids';
            exists = cache[listKey] && cache[listKey].includes(String(item.id));
          } else if (window.WatchlistsAdapter && window.WatchlistsAdapter._cache) {
            const cache = window.WatchlistsAdapter._cache;
            const listKey = listName + 'Ids';
            exists = cache[listKey] && cache[listKey].includes(String(item.id));
          } else {
            // Fallback to appData check
            exists = window.appData[category][listName].some(
              (existing) => Number(existing.id) === Number(item.id),
            );
          }
          if (!exists) {
            window.appData[category][listName].push(item);
            console.log('âœ… Successfully added item to', listName);
            console.log('ðŸ“Š Current appData structure:', {
              tv: window.appData.tv,
              movies: window.appData.movies,
            });
            // Update WatchlistsAdapter cache
            if (
              window.WatchlistsAdapterV2 &&
              typeof window.WatchlistsAdapterV2.addItem === 'function'
            ) {
              const adapterResult = window.WatchlistsAdapterV2.addItem(item.id, listName);
              console.log('ðŸ“ WatchlistsAdapterV2.addItem result:', adapterResult);
            } else if (
              window.WatchlistsAdapter &&
              typeof window.WatchlistsAdapter.addItem === 'function'
            ) {
              const adapterResult = window.WatchlistsAdapter.addItem(item.id, listName);
              console.log('ðŸ“ WatchlistsAdapter.addItem result:', adapterResult);
            }
            // Save data to localStorage
            if (typeof window.saveAppData === 'function') {
              window.saveAppData();
            }
            // Also save to Firebase if available
            if (typeof window.saveData === 'function') {
              console.log('ðŸ”„ Calling window.saveData() to sync to Firebase...');
              window.saveData().then(() => {
                // Invalidate WatchlistsAdapter cache after Firebase save to force reload
                if (window.WatchlistsAdapter && typeof window.WatchlistsAdapter.invalidate === 'function') {
                  console.log('ðŸ”„ Invalidating WatchlistsAdapter cache after Firebase save...');
                  window.WatchlistsAdapter.invalidate();
                }
              }).catch((error) => {
                console.error('âŒ Firebase save failed:', error);
              });
            }
            // Emit cards:changed event for centralized count updates
            document.dispatchEvent(
              new CustomEvent('cards:changed', {
                detail: { source: 'addToList', itemId: item.id, list: listName },
              }),
            );
            if (window.FlickletApp && typeof window.FlickletApp.updateUI === 'function') {
              console.log('ðŸ”„ Calling FlickletApp.updateUI...');
              window.FlickletApp.updateUI();
            }
            return true;
          } else {
            console.log('â„¹ï¸ Item already exists in list');
            return false;
          }
        } catch (error) {
          console.error('âŒ addToList failed:', error);
          return false;
        }
      };
      window.moveItem = function moveItem(id, dest) {
        const NS = '[WL v28.99]';
        const log = (...a) => console.log(NS, ...a);
        log('moveItem called:', { id, dest, type: typeof id });
        console.log('âœ… [DEBUG] moveItem function is now available on window');
        const mediaType = findItemMediaType(id);
        if (!mediaType) {
          log('No mediaType found for id:', id);
          return;
        }
        const sourceList = findItemList(id, mediaType);
        if (!sourceList) return;
        // Update WatchlistsAdapter cache
        if (window.WatchlistsAdapter.moveItem(id, sourceList, dest)) {
          log('Updated adapter cache for move:', id, sourceList, 'â†’', dest);
        }
        const srcArr = window.appData[mediaType][sourceList];
        const idx = srcArr.findIndex((i) => i.id === id);
        if (idx === -1) return;
        const [item] = srcArr.splice(idx, 1);
        
        // Use enhanced data if available, otherwise use original item
        const itemToAdd = window._tempEnhancedItem || item;
        if (window._tempEnhancedItem) {
          log('Using enhanced item data for moveItem');
        }
        
        window.appData[mediaType][dest].push(itemToAdd);
        window.saveAppData();
        // Also save to Firebase if available
        if (typeof window.saveData === 'function') {
          window.saveData();
        }
        // Emit cards:changed event for centralized count updates
        document.dispatchEvent(
          new CustomEvent('cards:changed', {
            detail: {
              source: 'moveItem',
              action: 'move',
              itemId: id,
              fromList: sourceList,
              toList: dest,
            },
          }),
        );
        if (window.FlickletApp) window.FlickletApp.updateUI();
        rerenderIfVisible(sourceList);
        rerenderIfVisible(dest);
        // Trigger home page re-render if available
        if (window.renderHomeRails) window.renderHomeRails();
        showToast('success', 'Item Moved', `Item moved to ${dest}`);
      };
      // Helper functions for search results and other components
      window.addToWatching = async function addToWatching(item) {
        console.log('[Search] Adding to watching:', item);
        
        try {
          // Enhance the item with detailed TMDB data
          let enhancedItem = item;
          if (window.enhanceTMDBItem && typeof window.enhanceTMDBItem === 'function') {
            console.log('[Search] Enhancing item with detailed TMDB data...');
            enhancedItem = await window.enhanceTMDBItem(item);
            console.log('[Search] Enhanced item:', enhancedItem);
          }
          
          if (window.moveItem && enhancedItem.id) {
            // Store the enhanced item temporarily for moveItem to use
            window._tempEnhancedItem = enhancedItem;
            window.moveItem(Number(enhancedItem.id), 'watching');
            delete window._tempEnhancedItem; // Clean up
          } else {
            console.error('[Search] Cannot add to watching - missing moveItem function or item.id');
          }
        } catch (error) {
          console.error('[Search] Error enhancing item for watching:', error);
          // Fallback to original behavior
          if (window.moveItem && item.id) {
            window.moveItem(Number(item.id), 'watching');
          } else {
            console.error('[Search] Cannot add to watching - missing moveItem function or item.id');
          }
        }
      };
      window.addToWishlist = async function addToWishlist(item) {
        console.log('[Search] Adding to wishlist:', item);
        
        try {
          // Enhance the item with detailed TMDB data
          let enhancedItem = item;
          if (window.enhanceTMDBItem && typeof window.enhanceTMDBItem === 'function') {
            console.log('[Search] Enhancing item with detailed TMDB data...');
            enhancedItem = await window.enhanceTMDBItem(item);
            console.log('[Search] Enhanced item:', enhancedItem);
          }
          
          if (window.moveItem && enhancedItem.id) {
            // Store the enhanced item temporarily for moveItem to use
            window._tempEnhancedItem = enhancedItem;
            window.moveItem(Number(enhancedItem.id), 'wishlist');
            delete window._tempEnhancedItem; // Clean up
          } else {
            console.error('[Search] Cannot add to wishlist - missing moveItem function or item.id');
          }
        } catch (error) {
          console.error('[Search] Error enhancing item for wishlist:', error);
          // Fallback to original behavior
          if (window.moveItem && item.id) {
            window.moveItem(Number(item.id), 'wishlist');
          } else {
            console.error('[Search] Cannot add to wishlist - missing moveItem function or item.id');
          }
        }
      };
      window.removeItemFromCurrentList = async function removeItemFromCurrentList(id) {
        const NS = '[WL v28.23]';
        const log = (...a) => console.log(NS, ...a);
        const uid = firebase.auth().currentUser?.uid;
        const db = window.firebaseDb || firebase.firestore();
        if (!uid || !db) {
          log('No auth or DB available for cloud-confirmed delete');
          return;
        }
        const mediaType = findItemMediaType(id);
        if (!mediaType) return;
        const sourceList = findItemList(id, mediaType);
        if (!sourceList) return;
        // 1) Optimistic local removal
        const prevState = JSON.parse(JSON.stringify(window.appData || {}));
        const ok = adapterRemove(id, sourceList);
        if (!ok) return;
        try {
          // 2) Persist minimal state to Firestore
          const minimal = window.pruneWatchlistsShape(window.appData || {});
          await db.doc(`users/${uid}`).set(
            {
              ...minimal,
              lastUpdated: firebase.firestore.FieldValue.serverTimestamp?.(),
            },
            { merge: true },
          );
          log('Cloud confirm OK for', id, 'from', sourceList);
          // 3) Mirror to local (guarded)
          if (typeof window.saveData === 'function') {
            window.saveData();
          }
          showToast('success', 'Item Removed', 'Item removed successfully');
        } catch (e) {
          log('Cloud save failed, rolling back:', e);
          // 4) Rollback local state
          window.appData = prevState;
          // Re-render UI with restored state
          if (window.FlickletApp) window.FlickletApp.updateUI();
          rerenderIfVisible(sourceList);
          if (window.renderHomeRails) window.renderHomeRails();
          // Emit cards:changed event for centralized count updates
          document.dispatchEvent(
            new CustomEvent('cards:changed', {
              detail: {
                source: 'adapterRemove-fallback',
                action: 'remove',
                itemId: id,
                list: sourceList,
              },
            }),
          );
          showToast('error', 'Remove Failed', 'Failed to remove item. Please try again.');
        }
      };
      // Helper that applies existing removal logic; return true if changed
      function adapterRemove(itemId, listKey) {
        try {
          const mediaType = findItemMediaType(itemId);
          if (!mediaType) return false;
          // Update WatchlistsAdapter cache
          if (window.WatchlistsAdapter && window.WatchlistsAdapter.removeItem(itemId, listKey)) {
            console.log('[WL v28.23] Updated adapter cache for removal:', itemId, 'from', listKey);
          }
          const srcArr = window.appData[mediaType][listKey];
          const idx = srcArr.findIndex((i) => i.id === itemId);
          if (idx === -1) return false;
          srcArr.splice(idx, 1);
          // Emit cards:changed event for centralized count updates
          document.dispatchEvent(
            new CustomEvent('cards:changed', {
              detail: {
                source: 'adapterRemove-direct',
                action: 'remove',
                itemId: itemId,
                list: listKey,
              },
            }),
          );
          if (window.FlickletApp) window.FlickletApp.updateUI();
          rerenderIfVisible(listKey);
          // Trigger home page re-render if available
          if (window.renderHomeRails) window.renderHomeRails();
          return true;
        } catch (error) {
          console.error('[WL v28.23] adapterRemove failed:', error);
          return false;
        }
      }
      function findItemMediaType(id) {
        // Use adapter as canonical source
        if (window.WatchlistsAdapter && window.WatchlistsAdapter._cache) {
          const cache = window.WatchlistsAdapter._cache;
          const idStr = String(id);
          // Check if item exists in any list
          if (
            cache.watchingIds?.includes(idStr) ||
            cache.wishlistIds?.includes(idStr) ||
            cache.watchedIds?.includes(idStr)
          ) {
            // Determine media type by checking which list contains the item
            // and looking up the actual item data
            const item = window.WatchlistsAdapter.getItemData(id);
            if (item) {
              return item.media_type === 'tv' ? 'tv' : 'movies';
            }
          }
        }
        // Fallback to appData for legacy compatibility
        const appData = window.appData || {};
        if (
          appData.tv?.watching?.some((i) => i.id === id) ||
          appData.tv?.wishlist?.some((i) => i.id === id) ||
          appData.tv?.watched?.some((i) => i.id === id)
        ) {
          return 'tv';
        }
        if (
          appData.movies?.watching?.some((i) => i.id === id) ||
          appData.movies?.wishlist?.some((i) => i.id === id) ||
          appData.movies?.watched?.some((i) => i.id === id)
        ) {
          return 'movies';
        }
        return null;
      }
      function findItemList(id, mediaType) {
        // Use adapter as canonical source
        if (window.WatchlistsAdapter && window.WatchlistsAdapter._cache) {
          const cache = window.WatchlistsAdapter._cache;
          const idStr = String(id);
          const lists = ['watching', 'wishlist', 'watched'];
          for (const list of lists) {
            const listKey = list + 'Ids';
            if (cache[listKey]?.includes(idStr)) {
              return list;
            }
          }
        }
        // Fallback to appData for legacy compatibility
        const appData = window.appData || {};
        const lists = ['watching', 'wishlist', 'watched'];
        for (const list of lists) {
          if (appData[mediaType]?.[list]?.some((i) => i.id === id)) {
            return list;
          }
        }
        return null;
      }
      // ---- Theme Management ----
      // toggleDarkMode is now centralized in utils.js
      // ---- Language Management ----
      // OLD changeLanguage function removed - now using LanguageManager
      // The new changeLanguage is defined in language-manager.js
      // ---- FlickWord Game ----
      window.startDailyCountdown = function startDailyCountdown() {
        const countdownElement = document.getElementById('flickwordCountdown');
        if (!countdownElement) return;
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        const timeLeft = tomorrow - now;
        const hours = Math.floor(timeLeft / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        countdownElement.textContent = `${hours}h ${minutes}m`;
        // Update every minute
        setTimeout(startDailyCountdown, 60000);
      };
      window.updateFlickWordStats = function updateFlickWordStats() {
        const todayScore = document.getElementById('flickwordTodayScore');
        const bestStreak = document.getElementById('flickwordBestStreak');
        const gamesPlayed = document.getElementById('flickwordGamesPlayed');
        if (todayScore) todayScore.textContent = appData.flickword?.todayScore || 0;
        if (bestStreak) bestStreak.textContent = appData.flickword?.bestStreak || '-';
        if (gamesPlayed) gamesPlayed.textContent = appData.flickword?.gamesPlayed || 0;
      };
      window.startFlickWordGame = function startFlickWordGame() {
        showNotification('FlickWord game starting soon! ðŸŽ®', 'success');
      };
      // ---- Scroll Indicators for Horizontal Layout ----
      window.addScrollIndicators = function addScrollIndicators(container) {
        if (!container || !container.classList.contains('list-container')) return;
        // Add scroll event listener to show/hide scroll indicators
        const updateScrollIndicators = () => {
          const scrollLeft = container.scrollLeft;
          const scrollWidth = container.scrollWidth;
          const clientWidth = container.clientWidth;
          if (scrollWidth > clientWidth) {
            container.classList.add('scrollable');
            if (scrollLeft > 0) {
              container.classList.add('scrollable-left');
            } else {
              container.classList.remove('scrollable-left');
            }
          } else {
            container.classList.remove('scrollable', 'scrollable-left');
          }
        };
        // Initial check
        updateScrollIndicators();
        // Add scroll listener
        container.addEventListener('scroll', updateScrollIndicators);
        // Add resize listener to recalculate on window resize
        window.addEventListener('resize', updateScrollIndicators);
      };
      // ---- Stats Card Renderer ----
      window.renderStatsCard = function renderStatsCard() {
        if (!window.FLAGS?.statsEnabled) return;
        const statsContent = document.getElementById('statsContent');
        if (!statsContent) return;
        try {
          const appData = JSON.parse(localStorage.getItem('flicklet-data') || '{}');
          const tvWatching = appData.tv?.watching || [];
          const tvWishlist = appData.tv?.wishlist || [];
          const tvWatched = appData.tv?.watched || [];
          const movieWatching = appData.movies?.watching || [];
          const movieWishlist = appData.movies?.wishlist || [];
          const movieWatched = appData.movies?.watched || [];
          const totalShows = tvWatching.length + tvWishlist.length + tvWatched.length;
          const totalMovies = movieWatching.length + movieWishlist.length + movieWatched.length;
          const totalItems = totalShows + totalMovies;
          statsContent.innerHTML = `
      <div class="stats-grid">
        <div class="stat">
          <div class="stat-number">${tvWatching.length + movieWatching.length}</div>
          <div class="stat-label">Currently Watching</div>
        </div>
        <div class="stat">
          <div class="stat-number">${tvWishlist.length + movieWishlist.length}</div>
          <div class="stat-label">Want to Watch</div>
        </div>
        <div class="stat">
          <div class="stat-number">${tvWatched.length + movieWatched.length}</div>
          <div class="stat-label">Already Watched</div>
        </div>
        <div class="stat">
          <div class="stat-number">${totalItems}</div>
          <div class="stat-label">Total Items</div>
        </div>
      </div>
      <div class="card-surface" style="margin-top: 15px;">
        <h5 class="heading-subtle">ðŸ“º TV Shows Breakdown</h5>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">
          <div><strong>${tvWatching.length}</strong> Watching</div>
          <div><strong>${tvWishlist.length}</strong> Want to Watch</div>
          <div><strong>${tvWatched.length}</strong> Watched</div>
        </div>
        <h5 class="heading-subtle" style="margin: 10px 0;">ðŸŽ¬ Movies Breakdown</h5>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">
          <div><strong>${movieWatching.length}</strong> Watching</div>
          <div><strong>${movieWishlist.length}</strong> Want to Watch</div>
          <div><strong>${movieWatched.length}</strong> Watched</div>
        </div>
      </div>
    `;
        } catch (error) {
          console.error('Error rendering stats card:', error);
          statsContent.innerHTML = '<div class="error">Failed to load stats</div>';
        }
      };
      // ---- Pro Features List Renderer ----
      window.renderProFeaturesList = function renderProFeaturesList() {
        const proFeaturesList = document.getElementById('proFeaturesList');
        if (!proFeaturesList) return;
        const isProEnabled = window.SettingsManager ? window.SettingsManager.isPro() : false;
        proFeaturesList.innerHTML = `
    <div class="pro-features">
      <div class="pro-feature ${isProEnabled ? 'unlocked' : 'locked'}">
        <div class="pro-feature-icon">ðŸ””</div>
        <div class="pro-feature-content">
          <div class="pro-feature-title">Smart Notifications</div>
          ${isProEnabled ? '<div class="pro-feature-desc">Get notified exactly when you want - set custom lead times for new episodes, choose which lists to monitor, and never miss your favorite shows again.</div>' : ''}
        </div>
        <div class="pro-feature-status">${isProEnabled ? 'âœ…' : 'ðŸ”’'}</div>
      </div>
      <div class="pro-feature ${isProEnabled ? 'unlocked' : 'locked'}">
        <div class="pro-feature-icon">ðŸ“Š</div>
        <div class="pro-feature-content">
          <div class="pro-feature-title">Your Viewing Journey</div>
          ${isProEnabled ? '<div class="pro-feature-desc">Discover your watching habits with beautiful charts showing your favorite genres, binge patterns, and viewing trends over time.</div>' : ''}
        </div>
        <div class="pro-feature-status">${isProEnabled ? 'âœ…' : 'ðŸ”’'}</div>
      </div>
      <div class="pro-feature ${isProEnabled ? 'unlocked' : 'locked'}">
        <div class="pro-feature-icon">ðŸŽ¨</div>
        <div class="pro-feature-content">
          <div class="pro-feature-title">Advanced Customization</div>
          ${isProEnabled ? '<div class="pro-feature-desc">Unlock premium color schemes, custom accent colors, and advanced layout options to create your perfect viewing experience.</div>' : ''}
        </div>
        <div class="pro-feature-status">${isProEnabled ? 'âœ…' : 'ðŸ”’'}</div>
      </div>
      <div class="pro-feature ${isProEnabled ? 'unlocked' : 'locked'}">
        <div class="pro-feature-icon">ðŸ‘¥</div>
        <div class="pro-feature-content">
          <div class="pro-feature-title">Social Features</div>
          ${isProEnabled ? '<div class="pro-feature-desc">Connect with friends, compare your taste, share recommendations, and discover what your social circle is watching. See who has similar viewing habits!</div>' : ''}
        </div>
        <div class="pro-feature-status">${isProEnabled ? 'âœ…' : 'ðŸ”’'}</div>
      </div>
      <div class="pro-feature ${isProEnabled ? 'unlocked' : 'locked'}">
        <div class="pro-feature-icon">âš¡</div>
        <div class="pro-feature-content">
          <div class="pro-feature-title">VIP Support</div>
          ${isProEnabled ? '<div class="pro-feature-desc">Get help when you need it with priority support. Our team responds faster to Pro users and provides personalized assistance for any questions or issues.</div>' : ''}
        </div>
        <div class="pro-feature-status">${isProEnabled ? 'âœ…' : 'ðŸ”’'}</div>
      </div>
    </div>
  `;
      };
      // ---- Upcoming Episodes (Tonight On) ----
      // Removed - feature was disabled and unused
      /**
       * Process: Counter Bootstrap System
       * Purpose: Real-time count updates for tabs and sections based on visible cards
       * Data Source: DOM elements with data-count-for attributes
       * Update Path: MutationObserver watches for DOM changes in target sections
       * Dependencies: data-count-for attributes in HTML, cards:refreshed events
       */
      // Counter Bootstrap System
      window.CounterBootstrap = {
        observers: new Map(),
        updateThrottle: new Map(),
        lastUpdate: new Map(),
        armed: false,
        // Unified card selector - single source of truth
        UNIFIED_CARD_SELECTOR: '[data-item-id][data-list-type]',
        EXCLUSION_SELECTORS: [
          '.unified-card-poster-skeleton',
          '.unified-card-poster-placeholder',
          '.skeleton',
          '.placeholder',
          '.empty',
          '.ad',
          '.hidden',
          '[aria-hidden="true"]',
          '[hidden]',
        ],
        init() {
          // Prevent duplicate initialization
          if (this.initialized) {
            console.log('[Counts v28.17] Counter Bootstrap already initialized, skipping');
            return;
          }
          console.log('[Counts v28.17] Initializing Counter Bootstrap System');
          this.armed = true;
          this.setupGlobalListeners();
          // Try immediate scan, but don't fail if containers aren't ready
          if (this.scanAndAttach()) {
            this.initialized = true;
          } else {
            console.log('[Counts v28.17] Armed but waiting for first render signal');
          }
        },
        scanAndAttach() {
          // Find all elements with data-count-for attributes
          const countElements = document.querySelectorAll('[data-count-for]');
          console.log(`[Counts v28.17] Found ${countElements.length} count elements to attach`);
          let allMapped = true;
          countElements.forEach((element) => {
            const targetSelector = element.getAttribute('data-count-for');
            const targetSection = document.querySelector(targetSelector);
            if (!targetSection) {
              console.warn(`[Counts v28.17] Target section not found: ${targetSelector}`);
              allMapped = false;
              return;
            }
            // Check if observer already exists for this element
            const observerId = `${element.id}-${targetSection.id}`;
            if (this.observers.has(observerId)) {
              console.log(`[Counts v28.17] Observer already exists for ${element.id}, skipping`);
              return;
            }
            // Attach MutationObserver to target section
            this.attachObserver(element, targetSection);
            // Initial count update
            this.updateCount(element, targetSection);
          });
          return allMapped;
        },
        attachObserver(countElement, targetSection) {
          const observerId = `${countElement.id}-${targetSection.id}`;
          // Remove existing observer if any
          if (this.observers.has(observerId)) {
            this.observers.get(observerId).disconnect();
          }
          // Create new observer
          const observer = new MutationObserver((mutations) => {
            this.throttledUpdate(countElement, targetSection);
          });
          // Start observing with reduced sensitivity
          observer.observe(targetSection, {
            childList: true,
            subtree: true,
            attributes: false, // Disable attribute watching to reduce triggers
          });
          this.observers.set(observerId, observer);
          console.log(`ðŸ”¢ Attached observer for ${countElement.id} -> ${targetSection.id}`);
        },
        throttledUpdate(countElement, targetSection) {
          const key = `${countElement.id}-${targetSection.id}`;
          const now = Date.now();
          // Check if we've updated recently (debounce)
          if (this.lastUpdate.has(key) && now - this.lastUpdate.get(key) < 100) {
            return; // Skip if updated within last 100ms
          }
          // Clear existing timeout
          if (this.updateThrottle.has(key)) {
            clearTimeout(this.updateThrottle.get(key));
          }
          // Set new timeout with reduced debounce
          const timeoutId = setTimeout(() => {
            this.updateCount(countElement, targetSection);
            this.updateThrottle.delete(key);
            this.lastUpdate.set(key, Date.now());
          }, 75); // Reduced to 75ms throttle for responsiveness
          this.updateThrottle.set(key, timeoutId);
        },
        // Direct recount bypassing debounce for UI actions
        directRecount() {
          console.log('[Counts v28.17] Direct recount triggered');
          this.observers.forEach((observer, observerId) => {
            const [elementId, sectionId] = observerId.split('-');
            const element = document.getElementById(elementId);
            const section = document.getElementById(sectionId);
            if (element && section) {
              this.updateCount(element, section);
            }
          });
        },
        updateCount(countElement, targetSection) {
          try {
            // Count visible cards in target section
            let visibleCards = this.countVisibleCards(targetSection);
            // Debug logging
            console.log(`ðŸ”¢ Counting cards in ${targetSection.id}:`, {
              elementId: countElement.id,
              visibleCards: visibleCards,
              sectionId: targetSection.id,
              sectionChildren: targetSection.children.length,
            });
            // If no visible cards found, use fallback count from WatchlistsAdapter
            if (visibleCards === 0) {
              const fallbackCount = this.getFallbackCount(countElement.id, targetSection.id);
              if (fallbackCount > 0) {
                console.log(`ðŸ”¢ Using fallback count for ${countElement.id}: ${fallbackCount}`);
                visibleCards = fallbackCount;
              }
            }
            // Only update if count has actually changed
            const currentCount = parseInt(countElement.textContent) || 0;
            if (currentCount === visibleCards) {
              return; // No change, skip update
            }
            // Update count element
            countElement.textContent = visibleCards;
            // Apply badge styling if it's a badge element
            if (
              countElement.classList.contains('tab-badge') ||
              countElement.classList.contains('badge')
            ) {
              this.applyBadgeStyling(countElement);
            }
            // Log all count updates for debugging
            console.log(
              `ðŸ”¢ Updated count for ${countElement.id}: ${visibleCards} visible cards (was ${currentCount})`,
            );
          } catch (error) {
            console.error(`ðŸ”¢ Error updating count for ${countElement.id}:`, error);
          }
        },
        getFallbackCount(countElementId, sectionId) {
          // Use WatchlistsAdapter as primary source for accurate counts
          if (window.WatchlistsAdapter && window.WatchlistsAdapter._cache) {
            const cache = window.WatchlistsAdapter._cache;
            // Map count element IDs to list types
            const listTypeMap = {
              watchingBadge: 'watchingIds',
              watchingCount: 'watchingIds',
              wishlistBadge: 'wishlistIds',
              wishlistCount: 'wishlistIds',
              watchedBadge: 'watchedIds',
              watchedCount: 'watchedIds',
            };
            const listKey = listTypeMap[countElementId];
            if (listKey && cache[listKey]) {
              console.log(
                `ðŸ”¢ Using WatchlistsAdapter cache for ${countElementId}: ${cache[listKey].length}`,
              );
              return cache[listKey].length;
            }
          }
          // Fallback to appData count when WatchlistsAdapter not available
          if (!window.appData) return 0;
          const appData = window.appData;
          const tv = appData.tv || {};
          const movies = appData.movies || {};
          // Map count element IDs to list types
          const listTypeMap = {
            watchingBadge: 'watching',
            watchingCount: 'watching',
            wishlistBadge: 'wishlist',
            wishlistCount: 'wishlist',
            watchedBadge: 'watched',
            watchedCount: 'watched',
          };
          const listType = listTypeMap[countElementId];
          if (!listType) return 0;
          // Use the same deduplication logic as loadListContent
          const allItems = [
            ...(Array.isArray(tv[listType]) ? tv[listType] : []),
            ...(Array.isArray(movies[listType]) ? movies[listType] : []),
          ];
          // Deduplicate items by ID (same logic as loadListContent)
          const items = [];
          const seenIds = new Set();
          allItems.forEach((item) => {
            const id = item.id || item.tmdb_id || item.tmdbId;
            if (id && !seenIds.has(id)) {
              seenIds.add(id);
              items.push(item);
            }
          });
          console.log(
            `ðŸ”¢ Fallback count for ${countElementId}: ${items.length} (deduplicated from ${allItems.length})`,
          );
          return items.length;
        },
        countVisibleCards(section) {
          // Use unified selector - single source of truth
          const cards = section.querySelectorAll(this.UNIFIED_CARD_SELECTOR);
          let visibleCount = 0;
          console.log(`[Counts v28.17] Counting cards in ${section.id}:`, {
            totalCards: cards.length,
            sectionChildren: section.children.length,
          });
          cards.forEach((card) => {
            if (this.isCardVisible(card)) {
              visibleCount++;
            }
          });
          // Log exclusions for debugging
          const excludedCount = cards.length - visibleCount;
          if (excludedCount > 0) {
            console.log(`[Counts v28.17] Excluded ${excludedCount} cards (hidden/inactive)`);
          }
          console.log(
            `[Counts v28.17] Final count for ${section.id}: ${visibleCount} visible cards`,
          );
          return visibleCount;
        },
        isCardVisible(card) {
          // Check if card is visible (not hidden by common patterns)
          const computedStyle = window.getComputedStyle(card);
          // Check display property
          if (computedStyle.display === 'none') return false;
          // Check visibility property
          if (computedStyle.visibility === 'hidden') return false;
          // Check opacity
          if (parseFloat(computedStyle.opacity) === 0) return false;
          // Check for hidden attributes/classes
          if (card.hasAttribute('hidden')) return false;
          if (card.classList.contains('hidden')) return false;
          if (card.classList.contains('is-hidden')) return false;
          if (card.hasAttribute('aria-hidden') && card.getAttribute('aria-hidden') === 'true')
            return false;
          // Check if card is in an inactive tab pane
          const tabSection = card.closest('.tab-section');
          if (tabSection && !tabSection.classList.contains('active')) {
            return false;
          }
          // Check for exclusion selectors
          for (const exclusionSelector of this.EXCLUSION_SELECTORS) {
            if (card.matches(exclusionSelector)) {
              return false;
            }
          }
          // Check inline styles
          const style = card.style;
          if (style.display === 'none') return false;
          if (style.visibility === 'hidden') return false;
          if (style.opacity === '0') return false;
          return true;
        },
        setupGlobalListeners() {
          // Listen for cards:changed events (emitted after render batches)
          document.addEventListener('cards:changed', () => {
            console.log('[Counts v28.17] cards:changed event received - triggering recount');
            this.directRecount();
          });
          // Listen for app:lists-rendered events
          document.addEventListener('app:lists-rendered', () => {
            console.log('[Counts v28.17] app:lists-rendered event received');
            if (!this.initialized && this.armed) {
              if (this.scanAndAttach()) {
                this.initialized = true;
                console.log('[Counts v28.17] Late bind successful - first real recount complete');
              }
            } else {
              this.directRecount();
            }
          });
          // Listen for tab switches
          document.addEventListener('tab:switched', () => {
            console.log('[Counts v28.17] tab:switched event received - triggering recount');
            this.directRecount();
          });
          // Listen for language changes
          document.addEventListener('language:changed', () => {
            console.log('[Counts v28.17] language:changed event received - triggering recount');
            this.directRecount();
          });
        },
        applyBadgeStyling(badge) {
          // Use CSS classes instead of inline styles
          badge.classList.add('tab-badge', 'tab-badge--visible');
        },
        updateAllCounts() {
          // Update counts for all existing observers without re-scanning
          this.observers.forEach((observer, observerId) => {
            const [elementId, sectionId] = observerId.split('-');
            const element = document.getElementById(elementId);
            const section = document.getElementById(sectionId);
            if (element && section) {
              this.updateCount(element, section);
            }
          });
        },
        destroy() {
          // Clean up all observers
          this.observers.forEach((observer) => observer.disconnect());
          this.observers.clear();
          // Clear all timeouts
          this.updateThrottle.forEach((timeoutId) => clearTimeout(timeoutId));
          this.updateThrottle.clear();
          console.log('ðŸ”¢ Counter Bootstrap System destroyed');
        },
      };
      // Initialize the counter bootstrap system
      // CounterBootstrap is already defined as an object above, no need to instantiate
      // Main FlickletApp object wrapper
      window.FlickletApp = {
        // All functions are already defined above
        // This wrapper ensures proper namespace
      };
        console.log('ðŸ”§ Item Management functions set up...');
      } catch (error) {
        console.error('âŒ Error setting up remaining Item Management functions:', error);
      }
    console.log('ðŸ”§ functions.js IIFE completed - addToListFromCache should now be available');
  };
})();

```

## _legacy_v1\www\js\i18n.js
```
/* ============== Internationalization (i18n) ============== */
/* Unified keys, no duplicates, EN/ES aligned 1:1 */

const I18N = {
  en: {
    // Theme / UI toggles
    go_dark: 'ðŸŒ™ Go Dark',
    go_light: 'â˜€ï¸ Go Light',

    // App identity
    app_title: 'Flicklet',
    subtitle: 'TV & Movie Tracker',

    // High-level stats / sections
    binge_total: 'Total Binge Time',
    currently_watching: 'Currently Watching',
    want_to_watch: 'Want to Watch',
    already_watched: 'Already Watched',
    currently_airing: 'Currently Airing',
    series_complete: 'Series Complete',
    coming_soon: 'Coming Soon',
    next: 'Next',
    last: 'Last',
    start: 'Start',
    because_you_liked: 'Because you liked',

    // Global navigation
    home: 'Home',
    discover: 'Discover',
    settings: 'Settings',

    // Settings tabs + descriptions
    general: 'General',
    notifications: 'Notifications',
    layout: 'Layout',
    data: 'Data',
    pro: 'Pro',
    about: 'About',
    general_description: 'Manage your account and basic preferences',
    notifications_description: "Choose which types of notifications you'd like to receive",
    layout_settings: 'Layout Settings',
    layout_description: 'Customize how your lists and cards are displayed',
    data_management: 'Data Management',
    data_description: 'Export, import, or reset your data',
    pro_features: 'Pro Features',
    pro_description: 'Unlock advanced features and premium content with Flicklet Pro',
    settings_description: 'Application settings',

    // Settings options
    condensed_list_view: 'Condensed list view (more items per screen)',
    show_posters: 'Show movie/TV show posters',
    dark_mode: 'Dark mode (auto-detect system preference)',
    home_page_lists: 'Home Page TV/Movie Lists',

    // Data actions
    export_json: 'Export JSON',
    import_json: 'Import JSON',
    extra_trivia_pro: 'Extra Trivia (Pro)',
    export_csv_pro: 'Export CSV (Pro)',
    reset_all_data: 'Reset All Data',
    data_hint:
      "Export saves flicklet-export.json to your device's Downloads/Files. Import accepts a valid Flicklet export.",

    // Pro preview
    preview_pro_features: 'Preview Pro Features',
    pro_hint: "Toggle Pro features on/off to see what's available",
    pro_features_include: 'Pro Features Include:',
    pro_simulate: 'Pro (simulate)',

    // Feedback feature
    share_your_thoughts: 'Share Your Thoughts',
    feedback: 'Share Your Thoughts',
    feedback_working:
      "Share your thoughts! Give us app feedback, tell us what's working (or not), share a quote for our rotation, make a confession, or just vent. We're listening!",
    your_message: 'Your Message',
    feedback_placeholder:
      'Share your thoughts, feedback, quotes, confessions, or just vent here...',
    send: 'Share It!',

    // Share / lists
    share_lists: 'Share Lists',
    share_this_list: 'Share This List',
    share_selected: 'Select Items to Share',
    share_link: 'Share link',
    share_instructions: 'Click to select which shows and movies to share',

    // File pickers
    choose_file: 'Choose File',
    no_file_chosen: 'No file chosen',

    // Search
    search: 'Search',
    search_placeholder: 'Search for shows or movies...',
    search_for_shows: 'Search for shows or movies...',
    search_tips: 'Search tips: Use * for wildcards (e.g., "marvel*" for Marvel shows)',
    search_results: 'Search Results',
    end_of_search_results: 'End of search results',
    search_failed: 'Search failed',
    no_results: 'No results',
    no_results_found: 'No results found',
    searching: 'Searching...',
    search_loading: 'Searching...',
    search_results_cleared: 'Search results cleared due to language change.',
    please_search_again: 'Please search again to see results in the new language.',

    // Counts / stats
    currently_watching_count: 'Currently Watching',
    want_to_watch_count: 'Want to Watch',
    already_watched_count: 'Already Watched',
    stats: 'Stats',
    total_items: 'Total items',
    watching_count: 'Watching',
    wishlist_count: 'Wishlist',
    watched_count: 'Watched',
    top_genres: 'Top Genres',
    average_rating: 'Average Rating',

    // Generic statuses
    loading: 'Loading...',
    failed_to_load: 'Failed to load',

    // Home screen elements
    community: 'Community',
    community_player: 'Community Player',
    community_player_placeholder: 'Video content will appear here',
    flickword: 'FlickWord',
    flickword_tagline: 'Wordle-style daily word play',
    daily_trivia: 'Daily Trivia',
    daily_trivia_tagline: 'Fresh question, new bragging rights',
    play_now: 'Play Now',
    quote_of_the_moment: 'Quote of the moment',
    loading_inspirational_quote: 'Loading inspirational quote...',
    your_shows: 'Your Shows',
    for_you: 'For You',
    in_theaters: 'In Theaters',
    feedback: 'Feedback',
    report_bug: 'Report a Bug',
    suggest_feature: 'Suggest a Feature',
    general_feedback: 'General Feedback',
    submit_video: 'Submit Video',

    // Key missing translations
    app_title: 'Flicklet',
    app_subtitle: 'TV & Movie Tracker',
    search_tips: 'Search Tips',
    dont_show_again: "Don't show again",
    currently_watching_section: 'ðŸ‘ï¸ Currently Watching',
    next_up_this_week: 'ðŸ“… Next Up This Week',
    no_upcoming_episodes: 'No upcoming episodes this week.',
    streak: 'Streak',
    best: 'Best',
    win_percent: 'Win %',
    accuracy: 'Accuracy',
    curated_sections: 'ðŸŽ¯ Curated Sections',
    location_prompt: 'Turn on location to see movies playing near you.',
    share_your_thoughts: 'ðŸ’¬ Share Your Thoughts',
    help_improve_feedback: 'Help us improve Flicklet with your feedback',
    close_game: 'Close Game',
    no_items: 'No items.',
    no_description: 'No description.',
    unknown: 'Unknown',

    // Additional critical translations
    loading_stats: 'Loading stats...',
    currently_watching: 'Currently Watching',
    want_to_watch: 'Want to Watch',
    already_watched: 'Already Watched',
    core_features: 'ðŸ“‹ Core Features',
    pro_notifications: 'â­ Pro Notifications',
    pro_layout_features: 'â­ Pro Layout Features',
    pro_data_features: 'â­ Pro Data Features',
    theme_packs: 'ðŸŽ¨ Theme Packs',
    about_unique4u: 'ðŸ  About Unique4U',
    about_the_creators: 'ðŸ‘¥ About the Creators',
    about_the_app: 'ðŸ“± About the App',
    copy: 'ðŸ“‹ Copy',
    daily_trivia_game_mounts: '[ Daily Trivia game mounts here ]',
    enable_advanced_notifications: 'Enable advanced notifications',
    lead_time_hours: 'Lead time (hours):',
    monitor_lists: 'Monitor lists:',
    pro_feature_upgrade: 'ðŸ”’ Pro feature - upgrade to unlock advanced notifications',
    pro_unlocks_more_themes: 'ðŸ”’ Pro unlocks more themes',
    saved: 'âœ… Saved',
    enable_episode_tracking: 'Enable Episode Tracking',
    theme: 'Theme:',
    basic_layout_customization: 'Basic layout customization available to all users',
    show_more_items_per_screen: 'Show more items per screen by reducing card spacing and padding',
    display_poster_images: 'Display poster images for each show and movie in your lists',
    switch_to_dark_theme:
      "Switch to dark theme. When enabled, follows your system's dark/light mode preference",
    number_of_curated_sections:
      'Number of curated recommendation sections to show on the home page',
    currently_watching_preview_limit: 'Currently Watching Preview Limit',
    number_of_currently_watching:
      'Number of currently watching shows to display on the home page preview',
    allow_tracking_of_individual:
      'Allow tracking of individual episodes for TV series (opt-in per series)',
    advanced_layout_and_theming: 'Advanced layout and theming features for Pro users',
    choose_a_visual_theme:
      'Choose a visual theme for your Flicklet experience. Pro users get access to premium themes.',
    basic_data_management: 'Basic data management features available to all users',
    download_a_complete_backup:
      'Download a complete backup of your lists and settings as a JSON file',
    restore_your_data: 'Restore your data from a previously exported Flicklet backup file',
    generate_a_shareable_text:
      'Generate a shareable text list of your TV shows and movies to send to friends',
    permanently_delete_all:
      'âš ï¸ Permanently delete all your lists, settings, and data. This cannot be undone.',
    advanced_data_management: 'Advanced data management features for Pro users',
    export_your_data_csv: 'Export your data in CSV format for use in spreadsheets (Pro feature)',
    access_additional_trivia:
      'Access additional trivia questions and behind-the-scenes content (Pro feature)',
    advanced_features_premium:
      'Advanced features and premium content available with Flicklet Pro subscription',
    were_not_here_to_reinvent:
      "We're not here to reinvent the wheel â€” we're here to make the wheel less squeaky. At Unique4U, our rule is simple: keep it simple. The world already has enough apps that feel like a second job to use. We'd rather give you tools that justâ€¦ work.",
    everything_we_build:
      "Everything we build has its own personality, but they all live under one roof: a people-first, all-inclusive, slightly offbeat house we call Unique4U. If it's fun, useful, and a little different from the pack â€” it belongs here.",
    were_pam_and_travis:
      "We're Pam and Travis. Think of us as casual builders with a shared allergy to overcomplication. We make things because we need them, and we figure you probably do too.",
    pam_once_trained_dolphins:
      'Pam once trained dolphins (true story) and also happens to be really good with numbers. Travis studied English and Philosophy, which means he can overthink and explain it in writing, then somehow turn that into practical business know-how. Together, we\'re like a mash-up of "creative meets operations" â€” and that combo lets us build apps that are simple, useful, and not boring.',
    heres_the_deal:
      'Here\'s the deal: you want to remember what you\'re watching without needing a PhD in App Navigation. We built this because we got tired of two bad options â€” messy notes on our phones or bloated apps that make you log your "episode 7 mid-season thoughts." (Hard pass.)',
    so_we_made_this_instead: 'So we made this instead:',
    if_you_watch_tv:
      "If you watch TV or movies and don't want to make it a hobby just to track them, this app's for you. Simple lists, zero drama.",
    your_feedback_helps:
      'Your feedback helps us improve Flicklet. All messages are read and appreciated!',
    your_name_will_appear: 'Your name will appear in the header and personalize your experience',
    view_your_watching_stats: 'View your watching statistics and achievements',
    view_and_remove_items:
      'View and remove items from your "Not Interested" list to see them in recommendations again',
    get_notified_when_new:
      "Get notified when new episodes of shows you're watching are about to air",
    receive_weekly_recommendations:
      'Receive weekly recommendations for new shows and movies based on your preferences',
    get_a_monthly_summary: 'Get a monthly summary of your watching statistics and achievements',
    advanced_notification_features: 'Advanced notification features for Pro users',
    advanced_notifications_pro: 'ðŸ”” Advanced Notifications (PRO)',
    configure_advanced_notifications:
      'Configure advanced notification settings with custom lead times and list monitoring',
    range_1_3: '(1-3)',
    range_5_20: '(5-20)',

    // Home content sections
    personalized_recommendations: 'ðŸŽ¨ Personalized Recommendations',
    based_on_watching_history: 'Based on your watching history and preferences',
    your_anime_suggestions: 'Your anime suggestions',
    your_horror_suggestions: 'Your horror suggestions',
    trending: 'Trending',
    what_everyone_watching: 'What everyone is watching',
    staff_picks: 'Staff Picks',
    curated_by_us: 'Curated by us',
    new_this_week: 'New This Week',
    fresh_releases: 'Fresh releases',
    in_theaters_near_you: 'ðŸŽ¬ In Theaters Near You',
    current_theatrical_releases: 'Current theatrical releases',
    now_playing: 'ðŸŽ¬ Now Playing',
    find_showtimes: 'Find Showtimes',
    click_find_showtimes: 'Click "Find Showtimes" to see showtimes at theaters near you',
    now_playing_status: 'Now Playing',
    movies_count: 'Movies',

    // Additional missing keys
    what_everyone_watching: 'What everyone is watching',
    curated_by_us: 'Curated by us',
    fresh_releases: 'Fresh releases',
    now_playing: 'Now Playing',
    click_find_showtimes: 'Click "Find Showtimes" to see showtimes at theaters near you',
    tv_shows_breakdown: 'TV Shows Breakdown',
    movies_breakdown: 'Movies Breakdown',
    not_interested_management: 'Not Interested Management',
    manage_not_interested_description: "Manage shows and movies you've marked as not interested",
    manage_not_interested_list: 'Manage Not Interested List',
    total_items: 'Total Items',

    // Cards / actions
    notes_tags: 'Notes/Tags',
    mark_watched: 'Mark Watched',
    want_to_watch: 'Want to Watch',
    remove: 'Remove',
    your_rating: 'Your Rating',
    not_interested: 'Not Interested',
    add: 'Add',
    more_actions: 'More actions',
    continue: 'Continue',
    available_on: 'Available on',
    watch_on: 'Watch on',
    upgrade_to_reveal: ' â€” upgrade to reveal',
    upgrade_to_watch: ' â€” upgrade to watch',
    extras: 'Extras',
    already_in_list: 'Already in {list}.',
    moved_to: 'Moved to {list}.',
    added_to: 'Added to {list}.',

    // Curated homepage
    trending_title: 'Trending',
    trending_subtitle: 'What everyone is watching',
    staff_picks_title: 'Staff Picks',
    staff_picks_subtitle: 'Curated by us',
    new_this_week_title: 'New This Week',
    new_this_week_subtitle: 'Fresh releases',

    // Additional home content keys
    personalized_recommendations: 'ðŸŽ¨ Personalized Recommendations',
    based_on_watching_history: 'Based on your watching history and preferences',
    your_anime_suggestions: 'Your anime suggestions',
    your_horror_suggestions: 'Your horror suggestions',
    your_suggestions: 'Your suggestions',
    in_theaters_near_you: 'ðŸŽ¬ In Theaters Near You',
    current_theatrical_releases: 'Current theatrical releases',
    now_playing: 'ðŸŽ¬ Now Playing',
    find_showtimes: 'Find Showtimes',
    click_find_showtimes: 'Click "Find Showtimes" to see showtimes at theaters near you',
    now_playing_status: 'Now Playing',
    movies_count: 'Movies',

    // Discovery / recommendations
    discover_description: 'Recommendations based on your likes and ratings.',
    not_enough_signals: 'Not enough signals yet. Like or rate a few items first.',
    recommendations_failed: 'Failed to load recommendations.',

    // FlickWord
    flickword_title: 'FlickWord',
    flickword_play: 'Play',
    flickword_streak: 'Streak',
    flickword_best: 'Best',
    flickword_played: 'Played',
    flickword_daily_challenge: 'FlickWord Daily Challenge',
    hours_left_motivation: "Hours left to play today's game!",
    play_todays_word: "Play Today's Word",
    streak: 'STREAK',
    best: 'BEST',
    played: 'PLAYED',

    // Quotes
    quote_title: 'Daily Quote',
    quote_of_the_day: 'Quote of the Day',
    random_quote: 'Random Quote',
    quote_1: '"I am serious... and don\'t call me Shirley." â€” *Airplane!*',
    quote_2: '"Streaming is a lifestyle, not a choice." â€” Ancient Proverb',
    quote_3: '"Binge now. Cry later." â€” You, last night at 2AM',
    quote_4: '"One does not simply watch one episode." â€” Boromir, probably',
    quote_5: '"You had me at \'skip recap.\'"',
    quote_6: '"Art is long, episodes are longer." â€” Someone with no plans',
    quote_7: '"We were on a break! From reality."',
    quote_8: '"I came, I saw, I queued it."',
    quote_9: '"To stream, perchance to nap." â€” Hamlet (director\'s cut)',
    quote_10: '"In this house we respect the \'Are you still watching?\' prompt."',
    quote_11: '"The algorithm thinks I\'m complicated. It\'s right."',
    quote_12: '"If found, return to the couch."',
    quote_13: '"My love language is \'skip ad.\'"',
    quote_14: '"I contain multitudes and several watchlists."',
    quote_15: '"Sundays are for pilots and denial."',
    quote_16: '"Ctrl+Z for life, play for comfort."',
    quote_17: '"I fear no man, but I fear finales."',
    quote_18: '"This app gets me. Terrifying."',
    quote_19: '"Plot holes are just cardio for the brain."',
    quote_20: '"We accept the dopamine we think we deserve."',
    quote_21: '"I have never finished anything. Except seasons."',
    quote_22: '"Today\'s vibe: closed captions and open snacks."',
    quote_23: '"Foreshadowing? I hardly know her."',
    quote_24: '"Character development is my cardio."',
    quote_25: '"If the title card hits, I\'m staying."',
    quote_26: '"Minimalism, but for episodes."',
    quote_27: "\"'Are you still watching?' yes, Netflix, I'm thriving.\"",
    quote_28: '"I ship productivity with naps."',
    quote_29: '"Comfort show supremacy."',
    quote_30: '"This queue is a personality test I\'m failing."',

    // Notifications / toasts
    notification_success: 'Success',
    notification_error: 'Error',
    notification_warning: 'Warning',
    notification_info: 'Info',

    // Cloud / offline
    cloud_sync_ok: 'Data synced successfully',
    cloud_load_failed: 'Failed to load cloud data',
    cloud_sync_failed: 'Cloud sync failed',
    offline_mode: 'Offline Mode',
    auth_unavailable_offline: 'Authentication unavailable - working in offline mode',
    working_offline_mode: 'Working in offline mode - data will be stored locally only',

    // Auth & onboarding
    sign_in_title: 'Sign in to sync',
    sign_in_subtitle: 'Sign in to back up your lists and sync across devices.',
    sign_in_create_account: 'Sign In / Create Account',
    signing_in: 'Signing in...',
    sign_in_subtitle_text: 'Sign in to back up your lists and sync across devices.',
    please_enter_display_name: 'Please enter a display name.',
    welcome_title: 'Welcome! What should we call you?',
    welcome_subtitle: 'This will personalize your headers and stats.',
    welcome: 'Welcome',
    display_name: 'Display Name',
    display_name_placeholder: 'Display name',
    save_name: 'Save',
    sign_in_account: 'Sign in / Account',
    account: 'Account',
    user: 'User',
    email_signin: 'Email Sign-In',
    email_label: 'Email',
    continue_google: 'Continue with Google',
    click_to_sign_in: 'Click to sign in',
    signed_in_as: 'Signed in as',
    click_to_sign_out: 'Click to sign out.',
    click_to_log_out: 'click to log out',
    sign_out: 'Sign Out',
    sign_out_confirmation: 'Sign out as',
    signed_in_successfully: 'Signed in successfully',
    signed_out_successfully: 'Signed out successfully',
    sign_out_failed: 'Sign out failed',

    // Auth errors
    auth_system_unavailable: 'Authentication system is not available. Please refresh the page.',
    error_loading_user_data: 'Error loading user data. Please try again.',
    auth_system_error: 'Authentication system error. Please refresh the page.',
    firestore_not_available: 'Firestore not available',
    no_displayname_field: 'No displayName field to remove',
    auth_system_loading: 'Authentication system is loading. Please try again in a moment.',
    google_signin_unavailable: 'Google sign-in is not available. Please refresh the page.',
    apple_signin_unavailable: 'Apple sign-in is not available. Please refresh the page.',
    email_signin_unavailable: 'Email sign-in is not available. Please refresh the page.',
    unable_to_show_signin: 'Unable to show sign-in modal. Please refresh the page.',
    signin_system_not_ready: 'Sign-in system is not ready. Please refresh the page.',

    // Genres
    action: 'Action',
    adventure: 'Adventure',
    animation: 'Animation',
    comedy: 'Comedy',
    crime: 'Crime',
    documentary: 'Documentary',
    drama: 'Drama',
    family: 'Family',
    fantasy: 'Fantasy',
    history: 'History',
    horror: 'Horror',
    music: 'Music',
    mystery: 'Mystery',
    romance: 'Romance',
    science_fiction: 'Science Fiction',
    tv_movie: 'TV Movie',
    thriller: 'Thriller',
    war: 'War',
    western: 'Western',
    action_adventure: 'Action & Adventure',
    kids: 'Kids & Family',
    news: 'News & Current Events',
    reality: 'Reality TV',
    sci_fi_fantasy: 'Sci-Fi & Fantasy',
    soap: 'Soap Opera',
    talk: 'Talk Shows',
    war_politics: 'War & Politics',
    talk_show: 'Talk Shows',
    reality_tv: 'Reality TV',

    // Language change message
    language: 'Language',
    language_changed_to: 'Language changed to {lang}',

    // Home sections (grouped)
    'home.my_library': 'My Library',
    'home.my_library_sub': 'Your personal watchlists and progress',
    'home.community': 'Community',
    'home.community_sub': 'Spotlight videos and community games',
    'home.curated': 'Curated',
    'home.curated_sub': 'Trending shows and staff recommendations',
    'home.personalized': 'Personalized',
    'home.personalized_sub': 'Recommendations just for you',
    'home.theaters': 'In Theaters Near Me',
    'home.theaters_sub': "What's playing at your local cinemas",
    'home.feedback_link': 'Feedback',
    'home.feedback_link_sub': 'Help us improve Flicklet',
    feedback_link_text: "Have thoughts to share? We'd love to hear them!",

    // Trivia
    trivia_title: 'Trivia',
    trivia_next: 'Next',
    trivia_loading: 'Loading...',
    trivia_error: 'Error loading trivia',
    trivia_correct: 'Correct!',
    trivia_incorrect: 'Incorrect',
    trivia_question: 'Question',
    trivia_answer: 'Answer',
    trivia_completed_today: ' â€¢ Completed today',
    trivia_come_back_tomorrow: 'Come back tomorrow for a new question.',
    trivia_incorrect_answer: 'Nope â€” correct answer is',
    trivia_streak_up: 'Trivia: +1 streak',
    trivia_try_again_tomorrow: 'Trivia: try again tomorrow',
    trivia_ok: 'OK',
  },

  es: {
    // Theme / UI toggles
    go_dark: 'ðŸŒ™ Modo Oscuro',
    go_light: 'â˜€ï¸ Modo Claro',

    // App identity
    app_title: 'Flicklet',
    subtitle: 'Rastreador de TV y PelÃ­culas',

    // High-level stats / sections
    binge_total: 'Tiempo Total de MaratÃ³n',
    currently_watching: 'Viendo Actualmente',
    want_to_watch: 'Quiero Ver',
    already_watched: 'Ya Visto',
    currently_airing: 'TransmitiÃ©ndose Actualmente',
    series_complete: 'Serie Completa',
    coming_soon: 'PrÃ³ximamente',
    next: 'Siguiente',
    last: 'Ãšltimo',
    start: 'Comenzar',
    because_you_liked: 'Porque te gustÃ³',

    // Global navigation
    home: 'Inicio',
    discover: 'Descubrir',
    settings: 'ConfiguraciÃ³n',

    // Settings tabs + descriptions
    general: 'General',
    notifications: 'Notificaciones',
    layout: 'DiseÃ±o',
    data: 'Datos',
    pro: 'Pro',
    about: 'Acerca de',
    general_description: 'Gestiona tu cuenta y preferencias bÃ¡sicas',
    notifications_description: 'Elige quÃ© tipos de notificaciones quieres recibir',
    layout_settings: 'ConfiguraciÃ³n de DiseÃ±o',
    layout_description: 'Personaliza cÃ³mo se muestran tus listas y tarjetas',
    data_management: 'GestiÃ³n de Datos',
    data_description: 'Exportar, importar o restablecer tus datos',
    pro_features: 'CaracterÃ­sticas Pro',
    pro_description: 'Desbloquea caracterÃ­sticas avanzadas y contenido premium con Flicklet Pro',
    settings_description: 'ConfiguraciÃ³n de la aplicaciÃ³n',

    // Settings options
    condensed_list_view: 'Vista de lista condensada (mÃ¡s elementos por pantalla)',
    show_posters: 'Mostrar carteles de pelÃ­culas/programas de TV',
    dark_mode: 'Modo oscuro (detectar automÃ¡ticamente preferencia del sistema)',
    home_page_lists: 'Listas de TV/PelÃ­culas de la PÃ¡gina Principal',

    // Data actions
    export_json: 'Exportar JSON',
    import_json: 'Importar JSON',
    extra_trivia_pro: 'Trivia Extra (Pro)',
    export_csv_pro: 'Exportar CSV (Pro)',
    reset_all_data: 'Restablecer Todos los Datos',
    data_hint:
      'La exportaciÃ³n guarda flicklet-export.json en la carpeta Descargas/Archivos de tu dispositivo. La importaciÃ³n acepta una exportaciÃ³n vÃ¡lida de Flicklet.',

    // Pro preview
    preview_pro_features: 'Vista Previa de CaracterÃ­sticas Pro',
    pro_hint: 'Activa/desactiva las caracterÃ­sticas Pro para ver quÃ© estÃ¡ disponible',
    pro_features_include: 'Las CaracterÃ­sticas Pro Incluyen:',
    pro_simulate: 'Pro (simular)',

    // Feedback feature
    share_your_thoughts: 'Comparte Tus Pensamientos',
    feedback: 'Comparte Tus Pensamientos',
    feedback_working:
      'Â¡Comparte tus pensamientos! Danos retroalimentaciÃ³n de la app, cuÃ©ntanos quÃ© funciona (o no), comparte una cita para nuestra rotaciÃ³n, haz una confesiÃ³n, o simplemente desahÃ³gate. Â¡Estamos escuchando!',
    your_message: 'Tu Mensaje',
    feedback_placeholder:
      'Comparte tus pensamientos, comentarios, citas, confesiones o simplemente desahÃ³gate aquÃ­...',
    send: 'Â¡CompÃ¡rtelo!',

    // Share / lists
    share_lists: 'Compartir Listas',
    share_this_list: 'Compartir Esta Lista',
    share_selected: 'Seleccionar Elementos para Compartir',
    share_link: 'Compartir enlace',
    share_instructions: 'Haz clic para seleccionar quÃ© series y pelÃ­culas compartir',

    // File pickers
    choose_file: 'Elegir Archivo',
    no_file_chosen: 'NingÃºn archivo elegido',

    // Search
    search: 'Buscar',
    search_placeholder: 'Buscar series o pelÃ­culas...',
    search_for_shows: 'Buscar series o pelÃ­culas...',
    search_tips:
      'Consejos de bÃºsqueda: Usa * para comodines (ej., "marvel*" para series de Marvel)',
    search_results: 'Resultados de BÃºsqueda',
    end_of_search_results: 'Fin de resultados de bÃºsqueda',
    search_failed: 'BÃºsqueda fallÃ³',
    no_results: 'Sin resultados',
    no_results_found: 'No se encontraron resultados',
    searching: 'Buscando...',
    search_loading: 'Buscando...',
    search_results_cleared: 'Resultados de bÃºsqueda limpiados debido al cambio de idioma.',
    please_search_again: 'Por favor busca nuevamente para ver resultados en el nuevo idioma.',

    // Counts / stats
    currently_watching_count: 'Viendo Actualmente',
    want_to_watch_count: 'Quiero Ver',
    already_watched_count: 'Ya Visto',
    stats: 'EstadÃ­sticas',
    total_items: 'Total de elementos',
    watching_count: 'Viendo',
    wishlist_count: 'Lista de Deseos',
    watched_count: 'Visto',
    top_genres: 'GÃ©neros Principales',
    average_rating: 'CalificaciÃ³n Promedio',

    // Generic statuses
    loading: 'Cargando...',
    failed_to_load: 'Error al cargar',

    // Home screen elements
    community: 'Comunidad',
    community_player: 'Reproductor de la Comunidad',
    community_player_placeholder: 'El contenido de video aparecerÃ¡ aquÃ­',
    flickword: 'FlickWord',
    flickword_tagline: 'Juego diario de palabras estilo Wordle',
    daily_trivia: 'Trivia Diaria',
    daily_trivia_tagline: 'Pregunta fresca, nuevos derechos de presumir',
    play_now: 'Jugar Ahora',
    quote_of_the_moment: 'Cita del momento',
    loading_inspirational_quote: 'Cargando cita inspiradora...',
    your_shows: 'Tus Programas',
    for_you: 'Para Ti',
    in_theaters: 'En Cines',
    feedback: 'Comentarios',
    report_bug: 'Reportar un Error',
    suggest_feature: 'Sugerir una CaracterÃ­stica',
    general_feedback: 'Comentarios Generales',
    submit_video: 'Enviar Video',

    // Key missing translations
    app_title: 'Flicklet',
    app_subtitle: 'Rastreador de TV y PelÃ­culas',
    search_tips: 'Consejos de BÃºsqueda',
    dont_show_again: 'No mostrar de nuevo',
    currently_watching_section: 'ðŸ‘ï¸ Viendo Actualmente',
    next_up_this_week: 'ðŸ“… PrÃ³ximamente Esta Semana',
    no_upcoming_episodes: 'No hay episodios prÃ³ximos esta semana.',
    streak: 'Racha',
    best: 'Mejor',
    win_percent: 'Porcentaje de Ã‰xito',
    accuracy: 'PrecisiÃ³n',
    curated_sections: 'ðŸŽ¯ Secciones Curadas',
    location_prompt: 'Activa la ubicaciÃ³n para ver pelÃ­culas cerca de ti.',
    share_your_thoughts: 'ðŸ’¬ Comparte Tus Pensamientos',
    help_improve_feedback: 'AyÃºdanos a mejorar Flicklet con tus comentarios',
    close_game: 'Cerrar Juego',
    no_items: 'No hay elementos.',
    no_description: 'Sin descripciÃ³n.',
    unknown: 'Desconocido',

    // Additional critical translations
    loading_stats: 'Cargando estadÃ­sticas...',
    currently_watching: 'Viendo Actualmente',
    want_to_watch: 'Quiero Ver',
    already_watched: 'Ya Visto',
    core_features: 'ðŸ“‹ CaracterÃ­sticas Principales',
    pro_notifications: 'â­ Notificaciones Pro',
    pro_layout_features: 'â­ CaracterÃ­sticas de DiseÃ±o Pro',
    pro_data_features: 'â­ CaracterÃ­sticas de Datos Pro',
    theme_packs: 'ðŸŽ¨ Paquetes de Temas',
    about_unique4u: 'ðŸ  Acerca de Unique4U',
    about_the_creators: 'ðŸ‘¥ Acerca de los Creadores',
    about_the_app: 'ðŸ“± Acerca de la App',
    copy: 'ðŸ“‹ Copiar',
    daily_trivia_game_mounts: '[ El juego de Trivia Diaria se monta aquÃ­ ]',
    enable_advanced_notifications: 'Habilitar notificaciones avanzadas',
    lead_time_hours: 'Tiempo de anticipaciÃ³n (horas):',
    monitor_lists: 'Monitorear listas:',
    pro_feature_upgrade:
      'ðŸ”’ CaracterÃ­stica Pro - actualiza para desbloquear notificaciones avanzadas',
    pro_unlocks_more_themes: 'ðŸ”’ Pro desbloquea mÃ¡s temas',
    saved: 'âœ… Guardado',
    enable_episode_tracking: 'Habilitar Seguimiento de Episodios',
    theme: 'Tema:',
    basic_layout_customization:
      'PersonalizaciÃ³n bÃ¡sica de diseÃ±o disponible para todos los usuarios',
    show_more_items_per_screen:
      'Mostrar mÃ¡s elementos por pantalla reduciendo el espaciado y relleno de las tarjetas',
    display_poster_images:
      'Mostrar imÃ¡genes de carteles para cada programa y pelÃ­cula en tus listas',
    switch_to_dark_theme:
      'Cambiar a tema oscuro. Cuando estÃ¡ habilitado, sigue la preferencia de modo oscuro/claro de tu sistema',
    number_of_curated_sections:
      'NÃºmero de secciones de recomendaciones curadas para mostrar en la pÃ¡gina principal',
    currently_watching_preview_limit: 'LÃ­mite de Vista Previa de Viendo Actualmente',
    number_of_currently_watching:
      'NÃºmero de programas que estÃ¡s viendo actualmente para mostrar en la vista previa de la pÃ¡gina principal',
    allow_tracking_of_individual:
      'Permitir seguimiento de episodios individuales para series de TV (opcional por serie)',
    advanced_layout_and_theming: 'CaracterÃ­sticas avanzadas de diseÃ±o y temas para usuarios Pro',
    choose_a_visual_theme:
      'Elige un tema visual para tu experiencia Flicklet. Los usuarios Pro tienen acceso a temas premium.',
    basic_data_management:
      'CaracterÃ­sticas bÃ¡sicas de gestiÃ³n de datos disponibles para todos los usuarios',
    download_a_complete_backup:
      'Descargar una copia de seguridad completa de tus listas y configuraciones como archivo JSON',
    restore_your_data:
      'Restaurar tus datos desde un archivo de copia de seguridad de Flicklet previamente exportado',
    generate_a_shareable_text:
      'Generar una lista de texto compartible de tus programas de TV y pelÃ­culas para enviar a amigos',
    permanently_delete_all:
      'âš ï¸ Eliminar permanentemente todas tus listas, configuraciones y datos. Esto no se puede deshacer.',
    advanced_data_management: 'CaracterÃ­sticas avanzadas de gestiÃ³n de datos para usuarios Pro',
    export_your_data_csv:
      'Exportar tus datos en formato CSV para usar en hojas de cÃ¡lculo (caracterÃ­stica Pro)',
    access_additional_trivia:
      'Acceder a preguntas de trivia adicionales y contenido detrÃ¡s de escena (caracterÃ­stica Pro)',
    advanced_features_premium:
      'CaracterÃ­sticas avanzadas y contenido premium disponibles con suscripciÃ³n Flicklet Pro',
    were_not_here_to_reinvent:
      'No estamos aquÃ­ para reinventar la rueda â€” estamos aquÃ­ para hacer que la rueda sea menos chirriante. En Unique4U, nuestra regla es simple: mantenerlo simple. El mundo ya tiene suficientes apps que se sienten como un segundo trabajo para usar. Preferimos darte herramientas que simplemente... funcionan.',
    everything_we_build:
      'Todo lo que construimos tiene su propia personalidad, pero todos viven bajo un mismo techo: una casa centrada en las personas, inclusiva y un poco excÃ©ntrica que llamamos Unique4U. Si es divertido, Ãºtil y un poco diferente del resto â€” pertenece aquÃ­.',
    were_pam_and_travis:
      'Somos Pam y Travis. Piensa en nosotros como constructores casuales con una alergia compartida a la sobrecomplicaciÃ³n. Hacemos cosas porque las necesitamos, y creemos que tÃº probablemente tambiÃ©n.',
    pam_once_trained_dolphins:
      'Pam una vez entrenÃ³ delfines (historia real) y tambiÃ©n es muy buena con los nÃºmeros. Travis estudiÃ³ InglÃ©s y FilosofÃ­a, lo que significa que puede sobrepensar y explicarlo por escrito, luego de alguna manera convertir eso en conocimiento empresarial prÃ¡ctico. Juntos, somos como una mezcla de "creativo se encuentra con operaciones" â€” y esa combinaciÃ³n nos permite construir apps que son simples, Ãºtiles y no aburridas.',
    heres_the_deal:
      'AquÃ­ estÃ¡ el trato: quieres recordar lo que estÃ¡s viendo sin necesitar un doctorado en NavegaciÃ³n de Apps. Construimos esto porque nos cansamos de dos malas opciones â€” notas desordenadas en nuestros telÃ©fonos o apps infladas que te hacen registrar tus "pensamientos del episodio 7 de mitad de temporada." (Paso duro.)',
    so_we_made_this_instead: 'Entonces hicimos esto en su lugar:',
    if_you_watch_tv:
      'Si ves TV o pelÃ­culas y no quieres hacerlo un hobby solo para rastrearlas, esta app es para ti. Listas simples, cero drama.',
    your_feedback_helps:
      'Tus comentarios nos ayudan a mejorar Flicklet. Â¡Todos los mensajes son leÃ­dos y apreciados!',
    your_name_will_appear: 'Tu nombre aparecerÃ¡ en el encabezado y personalizarÃ¡ tu experiencia',
    view_your_watching_stats: 'Ver tus estadÃ­sticas de visualizaciÃ³n y logros',
    view_and_remove_items:
      'Ver y eliminar elementos de tu lista "No me interesa" para verlos en recomendaciones nuevamente',
    get_notified_when_new:
      'Recibir notificaciones cuando nuevos episodios de programas que estÃ¡s viendo estÃ©n a punto de transmitirse',
    receive_weekly_recommendations:
      'Recibir recomendaciones semanales de nuevos programas y pelÃ­culas basadas en tus preferencias',
    get_a_monthly_summary:
      'Recibir un resumen mensual de tus estadÃ­sticas de visualizaciÃ³n y logros',
    advanced_notification_features: 'CaracterÃ­sticas avanzadas de notificaciones para usuarios Pro',
    advanced_notifications_pro: 'ðŸ”” Notificaciones Avanzadas (PRO)',
    configure_advanced_notifications:
      'Configurar configuraciones avanzadas de notificaciones con tiempos de anticipaciÃ³n personalizados y monitoreo de listas',
    range_1_3: '(1-3)',
    range_5_20: '(5-20)',

    // Home content sections
    personalized_recommendations: 'ðŸŽ¨ Recomendaciones Personalizadas',
    based_on_watching_history: 'Basado en tu historial de visualizaciÃ³n y preferencias',
    your_anime_suggestions: 'Tus sugerencias de anime',
    your_horror_suggestions: 'Tus sugerencias de terror',
    trending: 'Tendencia',
    what_everyone_watching: 'Lo que todos estÃ¡n viendo',
    staff_picks: 'Selecciones del Equipo',
    curated_by_us: 'Curado por nosotros',
    new_this_week: 'Nuevo Esta Semana',
    fresh_releases: 'Estrenos frescos',
    in_theaters_near_you: 'ðŸŽ¬ En Cines Cerca de Ti',
    current_theatrical_releases: 'Estrenos teatrales actuales',
    now_playing: 'ðŸŽ¬ En Cartelera',
    find_showtimes: 'Encontrar Horarios',
    click_find_showtimes: 'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',
    now_playing_status: 'En Cartelera',
    movies_count: 'PelÃ­culas',

    // Additional missing keys
    what_everyone_watching: 'Lo que todos estÃ¡n viendo',
    curated_by_us: 'Curado por nosotros',
    fresh_releases: 'Estrenos frescos',
    now_playing: 'En Cartelera',
    click_find_showtimes: 'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',
    tv_shows_breakdown: 'Desglose de Programas de TV',
    movies_breakdown: 'Desglose de PelÃ­culas',
    not_interested_management: 'GestiÃ³n de No Me Interesa',
    manage_not_interested_description:
      'Gestiona programas y pelÃ­culas que has marcado como no me interesa',
    manage_not_interested_list: 'Gestionar Lista de No Me Interesa',
    total_items: 'Total de Elementos',

    // Cards / actions
    notes_tags: 'Notas/Etiquetas',
    mark_watched: 'Marcar como Visto',
    want_to_watch: 'Quiero Ver',
    remove: 'Eliminar',
    your_rating: 'Tu CalificaciÃ³n',
    not_interested: 'No me interesa',
    add: 'Agregar',
    more_actions: 'MÃ¡s acciones',
    continue: 'Continuar',
    available_on: 'Disponible en',
    watch_on: 'Ver en',
    upgrade_to_reveal: ' â€” actualiza para revelar',
    upgrade_to_watch: ' â€” actualiza para ver',
    extras: 'Extras',
    already_in_list: 'Ya estÃ¡ en {list}.',
    moved_to: 'Movido a {list}.',
    added_to: 'Agregado a {list}.',

    // Curated homepage
    trending_title: 'Tendencia',
    trending_subtitle: 'Lo que todos estÃ¡n viendo',
    staff_picks_title: 'Selecciones del Equipo',
    staff_picks_subtitle: 'Curado por nosotros',
    new_this_week_title: 'Nuevo Esta Semana',
    new_this_week_subtitle: 'Estrenos frescos',

    // Additional home content keys
    personalized_recommendations: 'ðŸŽ¨ Recomendaciones Personalizadas',
    based_on_watching_history: 'Basado en tu historial de visualizaciÃ³n y preferencias',
    your_anime_suggestions: 'Tus sugerencias de anime',
    your_horror_suggestions: 'Tus sugerencias de terror',
    your_suggestions: 'Tus sugerencias',
    in_theaters_near_you: 'ðŸŽ¬ En Cines Cerca de Ti',
    current_theatrical_releases: 'Estrenos teatrales actuales',
    now_playing: 'ðŸŽ¬ En Cartelera',
    find_showtimes: 'Encontrar Horarios',
    click_find_showtimes: 'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',
    now_playing_status: 'En Cartelera',
    movies_count: 'PelÃ­culas',

    // Discovery / recommendations
    discover_description: 'Recomendaciones basadas en tus gustos y calificaciones.',
    not_enough_signals:
      'AÃºn no hay suficientes seÃ±ales. Dale like o califica algunos elementos primero.',
    recommendations_failed: 'Error al cargar recomendaciones.',

    // FlickWord
    flickword_title: 'FlickWord',
    flickword_play: 'Jugar',
    flickword_streak: 'Racha',
    flickword_best: 'Mejor',
    flickword_played: 'Jugado',
    flickword_daily_challenge: 'DesafÃ­o Diario FlickWord',
    hours_left_motivation: 'Â¡Horas restantes para jugar el juego de hoy!',
    play_todays_word: 'Jugar Palabra de Hoy',
    streak: 'RACHA',
    best: 'MEJOR',
    played: 'JUGADO',

    // Quotes
    quote_title: 'Cita Diaria',
    quote_of_the_day: 'Cita del DÃ­a',
    random_quote: 'Cita Aleatoria',
    quote_1: '"Soy serio... y no me llames Shirley." â€” *Â¡Aterriza como puedas!*',
    quote_2: '"El streaming es un estilo de vida, no una opciÃ³n." â€” Proverbio Antiguo',
    quote_3: '"MaratÃ³n ahora. Llora despuÃ©s." â€” TÃº, anoche a las 2AM',
    quote_4: '"Uno no simplemente ve un episodio." â€” Boromir, probablemente',
    quote_5: '"Me conquistaste con \'saltar resumen\'."',
    quote_6: '"El arte es largo, los episodios son mÃ¡s largos." â€” Alguien sin planes',
    quote_7: '"Â¡EstÃ¡bamos en un descanso! De la realidad."',
    quote_8: '"Vine, vi, lo puse en cola."',
    quote_9: '"Transmitir, tal vez dormitar." â€” Hamlet (versiÃ³n del director)',
    quote_10: '"En esta casa respetamos el aviso \'Â¿Sigues viendo?\'"',
    quote_11: '"El algoritmo piensa que soy complicado. Tiene razÃ³n."',
    quote_12: '"Si se encuentra, devolver al sofÃ¡."',
    quote_13: '"Mi lenguaje del amor es \'saltar anuncio\'."',
    quote_14: '"Contengo multitudes y varias watchlists."',
    quote_15: '"Los domingos son para pilotos y negaciÃ³n."',
    quote_16: '"Ctrl+Z para la vida, play para consuelo."',
    quote_17: '"No temo a ningÃºn hombre, pero temo a los finales."',
    quote_18: '"Esta app me entiende. Aterrador."',
    quote_19: '"Los agujeros de guiÃ³n son cardio para el cerebro."',
    quote_20: '"Aceptamos la dopamina que creemos merecer."',
    quote_21: '"Nunca he terminado nada. Excepto temporadas."',
    quote_22: '"Vibe de hoy: subtÃ­tulos y snacks."',
    quote_23: '"Â¿Presagio? Apenas la conozco."',
    quote_24: '"El desarrollo de personajes es mi cardio."',
    quote_25: '"Si la tarjeta de tÃ­tulo pega, me quedo."',
    quote_26: '"Minimalismo, pero para episodios."',
    quote_27: '"\'Â¿Sigues viendo?\' sÃ­, Netflix, estoy prosperando."',
    quote_28: '"EnvÃ­o productividad con siestas."',
    quote_29: '"SupremacÃ­a de serie de consuelo."',
    quote_30: '"Esta cola es una prueba de personalidad que estoy fallando."',

    // Notifications / toasts
    notification_success: 'Ã‰xito',
    notification_error: 'Error',
    notification_warning: 'Advertencia',
    notification_info: 'InformaciÃ³n',

    // Cloud / offline
    cloud_sync_ok: 'Datos sincronizados exitosamente',
    cloud_load_failed: 'Error al cargar datos de la nube',
    cloud_sync_failed: 'Error de sincronizaciÃ³n en la nube',
    offline_mode: 'Modo Sin ConexiÃ³n',
    auth_unavailable_offline: 'AutenticaciÃ³n no disponible - trabajando en modo sin conexiÃ³n',
    working_offline_mode:
      'Trabajando en modo sin conexiÃ³n - los datos se almacenarÃ¡n solo localmente',

    // Auth & onboarding
    sign_in_title: 'Inicia sesiÃ³n para sincronizar',
    sign_in_subtitle: 'Inicia sesiÃ³n para respaldar tus listas y sincronizar entre dispositivos.',
    sign_in_create_account: 'Iniciar SesiÃ³n / Crear Cuenta',
    signing_in: 'Iniciando sesiÃ³n...',
    sign_in_subtitle_text:
      'Inicia sesiÃ³n para respaldar tus listas y sincronizar entre dispositivos.',
    please_enter_display_name: 'Por favor ingresa un nombre de pantalla.',
    welcome_title: 'Â¡Bienvenido! Â¿CÃ³mo deberÃ­amos llamarte?',
    welcome_subtitle: 'Esto personalizarÃ¡ tus encabezados y estadÃ­sticas.',
    welcome: 'Bienvenido',
    display_name: 'Nombre de pantalla',
    display_name_placeholder: 'Nombre de pantalla',
    save_name: 'Guardar',
    sign_in_account: 'Iniciar sesiÃ³n / Cuenta',
    account: 'Cuenta',
    user: 'Usuario',
    email_signin: 'Inicio de SesiÃ³n por Email',
    email_label: 'Email',
    continue_google: 'Continuar con Google',
    click_to_sign_in: 'Haz clic para iniciar sesiÃ³n',
    signed_in_as: 'Conectado como',
    click_to_sign_out: 'Cerrar sesiÃ³n aquÃ­',
    click_to_log_out: 'haz clic para cerrar sesiÃ³n',
    sign_out: 'Cerrar SesiÃ³n',
    sign_out_confirmation: 'Cerrar sesiÃ³n como',
    signed_in_successfully: 'Inicio de sesiÃ³n exitoso',
    signed_out_successfully: 'SesiÃ³n cerrada exitosamente',
    sign_out_failed: 'Error al cerrar sesiÃ³n',

    // Auth errors
    auth_system_unavailable:
      'El sistema de autenticaciÃ³n no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.',
    error_loading_user_data: 'Error al cargar datos del usuario. Por favor, intÃ©ntalo de nuevo.',
    auth_system_error: 'Error del sistema de autenticaciÃ³n. Por favor, actualiza la pÃ¡gina.',
    firestore_not_available: 'Firestore no disponible',
    no_displayname_field: 'No hay campo displayName que eliminar',
    auth_system_loading:
      'El sistema de autenticaciÃ³n se estÃ¡ cargando. Por favor, intÃ©ntalo en un momento.',
    google_signin_unavailable:
      'El inicio de sesiÃ³n con Google no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.',
    apple_signin_unavailable:
      'El inicio de sesiÃ³n con Apple no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.',
    email_signin_unavailable:
      'El inicio de sesiÃ³n por email no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.',
    unable_to_show_signin:
      'No se puede mostrar el modal de inicio de sesiÃ³n. Por favor, actualiza la pÃ¡gina.',
    signin_system_not_ready:
      'El sistema de inicio de sesiÃ³n no estÃ¡ listo. Por favor, actualiza la pÃ¡gina.',

    // Genres
    action: 'AcciÃ³n',
    adventure: 'Aventura',
    animation: 'AnimaciÃ³n',
    comedy: 'Comedia',
    crime: 'Crimen',
    documentary: 'Documental',
    drama: 'Drama',
    family: 'Familiar',
    fantasy: 'FantasÃ­a',
    history: 'Historia',
    horror: 'Terror',
    music: 'MÃºsica',
    mystery: 'Misterio',
    romance: 'Romance',
    science_fiction: 'Ciencia FicciÃ³n',
    tv_movie: 'PelÃ­cula de TV',
    thriller: 'Suspenso',
    war: 'Guerra',
    western: 'Western',
    action_adventure: 'AcciÃ³n y Aventura',
    kids: 'NiÃ±os y Familia',
    news: 'Noticias y Actualidad',
    reality: 'Realidad TV',
    sci_fi_fantasy: 'Ciencia FicciÃ³n y FantasÃ­a',
    soap: 'Telenovela',
    talk: 'Programas de Entrevistas',
    war_politics: 'Guerra y PolÃ­tica',
    talk_show: 'Programas de Entrevistas',
    reality_tv: 'Realidad TV',

    // Language change message
    language: 'Idioma',
    language_changed_to: 'Idioma cambiado a {lang}',

    // Home sections (grouped)
    'home.my_library': 'Mi Biblioteca',
    'home.my_library_sub': 'Tus listas de seguimiento y progreso personal',
    'home.community': 'Comunidad',
    'home.community_sub': 'Videos destacados y juegos de la comunidad',
    'home.curated': 'Curado',
    'home.curated_sub': 'Series populares y recomendaciones del equipo',
    'home.personalized': 'Personalizado',
    'home.personalized_sub': 'Recomendaciones solo para ti',
    'home.theaters': 'En Cines Cerca de MÃ­',
    'home.theaters_sub': 'QuÃ© se estÃ¡ proyectando en tus cines locales',
    'home.feedback_link': 'Comentarios',
    'home.feedback_link_sub': 'AyÃºdanos a mejorar Flicklet',
    feedback_link_text: 'Â¿Tienes pensamientos que compartir? Â¡Nos encantarÃ­a escucharlos!',

    // Trivia
    trivia_title: 'Trivia',
    trivia_next: 'Siguiente',
    trivia_loading: 'Cargando...',
    trivia_error: 'Error al cargar trivia',
    trivia_correct: 'Â¡Correcto!',
    trivia_incorrect: 'Incorrecto',
    trivia_question: 'Pregunta',
    trivia_answer: 'Respuesta',
    trivia_completed_today: ' â€¢ Completado hoy',
    trivia_come_back_tomorrow: 'Vuelve maÃ±ana para una nueva pregunta.',
    trivia_incorrect_answer: 'No â€” la respuesta correcta es',
    trivia_streak_up: 'Trivia: +1 racha',
    trivia_try_again_tomorrow: 'Trivia: intenta de nuevo maÃ±ana',
    trivia_ok: 'OK',
  },
};

// Translation function: strict fallback to EN if missing
function t(key, lang = 'en') {
  const pack = I18N[lang] || I18N.en;
  return pack[key] ?? I18N.en[key] ?? key;
}

/* Apply translations for:
   - text nodes: [data-i18n]
   - placeholders: [data-i18n-placeholder]
   - title attributes: [data-i18n-title]
   - aria-labels: [data-i18n-aria-label]
*/
function applyTranslations(lang = 'en') {
  const apply = (sel, fn) => {
    document.querySelectorAll(sel).forEach((el) => {
      const key = el.getAttribute(sel.replace(/^\[|\]$/g, ''));
      const val = t(key, lang);
      if (val && val !== key) fn(el, val);
    });
  };

  apply('[data-i18n]', (el, val) => {
    // Skip marquee elements to prevent overwriting quotes
    if (el.hasAttribute('data-role') && el.getAttribute('data-role') === 'marquee') {
      return;
    }
    el.textContent = val;
  });
  apply('[data-i18n-placeholder]', (el, val) => {
    el.placeholder = val;
  });
  apply('[data-i18n-title]', (el, val) => {
    el.title = val;
  });
  apply('[data-i18n-aria-label]', (el, val) => {
    el.setAttribute('aria-label', val);
  });
}

// Expose globally
if (typeof window !== 'undefined') {
  window.I18N = I18N;
  window.t = t;
  window.applyTranslations = applyTranslations;
}

// CJS export (optional tooling)
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { I18N, t, applyTranslations };
}

```

## _legacy_v1\www\js\language-manager.js
```
/* ============== Centralized Language Manager ============== */

class LanguageManager {
  // Get stored language from localStorage
  getStoredLanguage() {
    try {
      // First check flicklet-language key
      let stored = localStorage.getItem('flicklet-language');
      if (stored) {
        return stored;
      }

      // Fallback to flicklet-data
      const appData = localStorage.getItem('flicklet-data');
      if (appData) {
        const parsed = JSON.parse(appData);
        if (parsed.settings?.lang) {
          return parsed.settings.lang;
        }
      }

      return null;
    } catch (error) {
      console.warn('Failed to get stored language:', error);
      return null;
    }
  }

  // Save language to localStorage and appData
  saveLanguage(lang) {
    try {
      // Save to localStorage
      localStorage.setItem('flicklet-language', lang);

      // Update appData
      if (window.appData?.settings) {
        window.appData.settings.lang = lang;
      }

      // Save to appData storage
      if (window.saveAppData && typeof window.saveAppData === 'function') {
        window.saveAppData();
      } else if (window.appData) {
        localStorage.setItem('flicklet-data', JSON.stringify(window.appData));
      }

      console.log('ðŸŒ Language saved to storage:', lang);

      // Trigger language change event for other components
      this.triggerLanguageChange(lang);
    } catch (error) {
      console.error('âŒ Failed to save language:', error);
    }
  }

  // Trigger language change event and refresh data
  triggerLanguageChange(lang) {
    console.log('ðŸŒ Triggering language change event:', lang);

    // Dispatch custom event
    document.dispatchEvent(
      new CustomEvent('languagechange', {
        detail: { language: lang },
      }),
    );

    // Refresh TMDB data in background
    this.refreshTMDBData(lang);
  }

  // Refresh TMDB data for current language
  async refreshTMDBData(lang) {
    console.log('ðŸ”„ Refreshing TMDB data for language:', lang);

    try {
      // Refresh currently watching items
      await this.refreshCurrentlyWatchingMetadata(lang);

      // Trigger UI refresh
      if (window.FlickletApp && typeof window.FlickletApp.updateUI === 'function') {
        window.FlickletApp.updateUI();
      }

      // Dispatch cards:refreshed event for counter updates
      document.dispatchEvent(
        new CustomEvent('cards:refreshed', {
          detail: { language: lang },
        }),
      );

      console.log('âœ… TMDB data refreshed for language:', lang);
    } catch (error) {
      console.error('âŒ Failed to refresh TMDB data:', error);
    }
  }

  constructor() {
    this.isChangingLanguage = false;
    this.currentLang = this.getStoredLanguage() || 'en';
    this.observers = [];

    // Don't force English as default in constructor - wait for init()
    // This prevents overwriting saved language during initialization
  }

  // Initialize language manager
  init() {
    // Load saved language from appData (if available)
    if (window.appData?.settings?.lang) {
      this.currentLang = window.appData.settings.lang;
      console.log('ðŸŒ Language loaded from appData:', this.currentLang);
    } else {
      // Fallback to localStorage if appData not available yet
      const storedLang = this.getStoredLanguage();
      if (storedLang) {
        this.currentLang = storedLang;
        console.log('ðŸŒ Language loaded from localStorage:', this.currentLang);
      } else {
        // Only set English as default if no language is stored anywhere
        this.currentLang = 'en';
        this.saveLanguage('en');
        console.log('ðŸŒ No language found, defaulting to English');
      }
    }

    // Set up language dropdown
    this.setupLanguageDropdown();

    // Apply initial translations
    applyTranslations(this.currentLang);

    console.log('ðŸŒ LanguageManager initialized with language:', this.currentLang);
  }

  // Set up language dropdown event handling
  setupLanguageDropdown() {
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
      // Remove any existing event listeners
      langToggle.replaceWith(langToggle.cloneNode(true));
      const newLangToggle = document.getElementById('langToggle');

      // Add new event listener
      newLangToggle.addEventListener('change', (e) => {
        this.changeLanguage(e.target.value);
      });

      // Set current value
      newLangToggle.value = this.currentLang;
    }
  }

  // Main language change function - single source of truth
  async changeLanguage(newLang) {
    console.log('ðŸŒ changeLanguage called with:', newLang);

    if (this.isChangingLanguage) {
      console.log('ðŸŒ Language change already in progress, ignoring');
      return;
    }

    if (newLang === this.currentLang) {
      console.log('ðŸŒ Language already set to:', newLang);
      return;
    }

    console.log('ðŸŒ Changing language from', this.currentLang, 'to', newLang);

    this.isChangingLanguage = true;

    try {
      // Update current language
      this.currentLang = newLang;
      console.log('ðŸŒ Updated currentLang to:', this.currentLang);

      // Update all app data sources
      this.updateAppData(newLang);

      // Apply translations
      console.log('ðŸŒ Calling applyTranslations with:', newLang);
      applyTranslations(newLang);

      // Update UI elements
      console.log('ðŸŒ Calling updateLanguageDependentUI with:', newLang);
      this.updateLanguageDependentUI(newLang);

      // Save to storage
      this.saveLanguage(newLang);

      // Show notification
      this.showLanguageChangeNotification(newLang);

      // Notify observers
      this.notifyObservers(newLang);

      console.log('âœ… Language change completed successfully');
    } catch (error) {
      console.error('âŒ Language change failed:', error);
      // Keep previous language (noop assignment kept for clarity)
      this.currentLang = this.currentLang;
    } finally {
      this.isChangingLanguage = false;
    }
  }

  // Update all app data sources consistently
  updateAppData(newLang) {
    // Update window.appData
    if (window.appData?.settings) {
      window.appData.settings.lang = newLang;
    }

    // Update FlickletApp if available
    if (window.FlickletApp?.appData?.settings) {
      window.FlickletApp.appData.settings.lang = newLang;
    }

    // Update global appData reference
    if (typeof appData !== 'undefined' && appData?.settings) {
      appData.settings.lang = newLang;
    }
  }

  // Update language-dependent UI elements
  updateLanguageDependentUI(lang) {
    // Update language dropdown
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
      langToggle.value = lang;
    }

    // Show loading state for lists
    const currentTab = document.querySelector('.tab.active')?.id?.replace('Tab', '');
    if (currentTab && ['watching', 'wishlist', 'watched'].includes(currentTab)) {
      const listContainer = document.getElementById(currentTab + 'List');
      if (listContainer) {
        listContainer.innerHTML = `<div style="text-align: center; padding: 20px;">${t('loading', lang)}</div>`;
      }
    }

    // Update search results if they exist
    if (Array.isArray(window.appData?.searchCache) && window.appData.searchCache.length > 0) {
      if (typeof displaySearchResults === 'function') {
        displaySearchResults(window.appData.searchCache);
      }
    }

    // Update current tab content
    if (typeof updateTabContent === 'function') {
      const activeTab = window.FlickletApp?.currentTab || 'home';
      updateTabContent(activeTab);
    }

    // Update list content only if not already rendered
    if (typeof loadListContent === 'function') {
      ['watching', 'wishlist', 'watched'].forEach((listType) => {
        // Only render if not already rendered
        if (!window[`render_${listType}`]) {
          loadListContent(listType);
        }
      });
    }

    // Update home content
    if (typeof loadHomeContent === 'function') {
      loadHomeContent();
    }

    // Refresh TMDB metadata for Currently Watching items in new language
    this.refreshCurrentlyWatchingMetadata(lang);

    // Update stats
    if (typeof rebuildStats === 'function') {
      rebuildStats();
    }

    // Listen for card rendering events and apply translations
    const handleCardsRendered = () => {
      console.log('ðŸŒ Cards rendered, applying translations');
      applyTranslations(lang);
    };

    // Listen for card rendering events (remove after 5 seconds to avoid memory leaks)
    window.addEventListener('cards:rendered', handleCardsRendered, { once: false });
    setTimeout(() => {
      window.removeEventListener('cards:rendered', handleCardsRendered);
    }, 5000);

    // Also apply translations with a delay as fallback
    console.log('ðŸŒ Applying translations after content re-render');
    setTimeout(() => {
      console.log('ðŸŒ Delayed translation application');
      applyTranslations(lang);
    }, 200);

    // Handle complex rehydration logic
    this.handleComplexRehydration(lang);
  }

  // Handle complex rehydration logic that was in the original functions
  async handleComplexRehydration(lang) {
    try {
      console.log('ðŸ”„ Starting complex rehydration for language:', lang);

      // Refresh Currently Watching metadata first (this is the most important)
      await this.refreshCurrentlyWatchingMetadata(lang);

      // Force refresh of genre dropdown
      setTimeout(() => {
        if (typeof loadGenres === 'function') {
          console.log('ðŸ”„ Refreshing genres');
          loadGenres();
        }
      }, 200);

      // Refresh curated rows (they use TMDB data)
      this.refreshCuratedContent(lang);

      // Refresh other dynamic content
      this.refreshDynamicContent(lang);

      // Force re-render of all home content to ensure cards are updated
      setTimeout(() => {
        console.log('ðŸ”„ Force re-rendering all home content');
        if (typeof window.renderHomeRails === 'function') {
          window.renderHomeRails();
        }
        if (typeof window.renderCurrentlyWatchingPreview === 'function') {
          window.renderCurrentlyWatchingPreview();
        }
      }, 500);

      console.log('âœ… Complex rehydration completed');
    } catch (error) {
      console.error('âŒ Failed to rehydrate lists for locale:', error);
    }
  }

  // Refresh TMDB metadata for Currently Watching items in new language
  async refreshCurrentlyWatchingMetadata(lang) {
    console.log('ðŸ”„ Refreshing Currently Watching metadata for language:', lang);

    try {
      const appData = window.appData;
      if (!appData) {
        console.warn('ðŸ”„ No appData available for metadata refresh');
        return;
      }

      const tmdbLang = window.getTMDBLocale(lang);

      let updated = false;

      // Refresh TV watching items
      if (appData.tv?.watching) {
        for (let i = 0; i < appData.tv.watching.length; i++) {
          const item = appData.tv.watching[i];
          if (item.id) {
            try {
              const tmdbData = await window.resolveTMDBItem(item.id, 'tv');
              if (tmdbData && tmdbData.id) {
                // Update only the translatable fields, preserve user data
                appData.tv.watching[i] = {
                  ...item, // Preserve user data (added_date, notes, etc.)
                  title: tmdbData.name || item.title,
                  overview: tmdbData.overview || item.overview,
                  original_name: tmdbData.original_name || item.original_name,
                };
                updated = true;
                console.log('ðŸ”„ Updated TV item metadata:', item.title || item.name);
              }
            } catch (error) {
              console.warn('ðŸ”„ Failed to update TV item metadata:', error);
            }
          }
        }
      }

      // Refresh movie watching items
      if (appData.movies?.watching) {
        for (let i = 0; i < appData.movies.watching.length; i++) {
          const item = appData.movies.watching[i];
          if (item.id) {
            try {
              const tmdbData = await window.resolveTMDBItem(item.id, 'movie');
              if (tmdbData && tmdbData.id) {
                // Update only the translatable fields, preserve user data
                appData.movies.watching[i] = {
                  ...item, // Preserve user data (added_date, notes, etc.)
                  title: tmdbData.title || item.title,
                  overview: tmdbData.overview || item.overview,
                  original_title: tmdbData.original_title || item.original_title,
                };
                updated = true;
                console.log('ðŸ”„ Updated movie item metadata:', item.title || item.name);
              }
            } catch (error) {
              console.warn('ðŸ”„ Failed to update movie item metadata:', error);
            }
          }
        }
      }

      if (updated) {
        // Save updated data
        if (typeof window.saveAppData === 'function') {
          window.saveAppData();
        }

        // Re-render home content with updated metadata
        if (typeof window.renderCurrentlyWatchingPreview === 'function') {
          window.renderCurrentlyWatchingPreview();
        }

        console.log('âœ… Currently Watching metadata refreshed successfully');
      }
    } catch (error) {
      console.error('âŒ Failed to refresh Currently Watching metadata:', error);
    }
  }

  // Refresh curated content with new language
  refreshCuratedContent(lang) {
    console.log('ðŸ”„ Refreshing curated rows for language change');

    // Clear curated cache to force fresh data from TMDB
    const curatedKeys = ['curated:trending', 'curated:staff', 'curated:new'];
    curatedKeys.forEach((key) => {
      localStorage.removeItem(key);
      console.log(`ðŸ—‘ï¸ Cleared ${key} cache`);
    });

    // Trigger re-render of home content to get fresh curated data
    setTimeout(() => {
      if (typeof window.renderHomeRails === 'function') {
        console.log('ðŸ”„ Re-rendering home rails with new language');
        window.renderHomeRails();
      }

      // Also trigger curated rows re-render if available
      if (typeof window.renderCuratedRows === 'function') {
        console.log('ðŸ”„ Re-rendering curated rows with new language');
        window.renderCuratedRows();
      }
    }, 100);
  }

  // Refresh other dynamic content
  refreshDynamicContent(lang) {
    // Refresh trivia content
    if (typeof window.__FlickletRefreshTrivia === 'function') {
      console.log('ðŸ”„ Refreshing trivia content');
      try {
        window.__FlickletRefreshTrivia();
        console.log('âœ… Trivia refresh completed');
      } catch (error) {
        console.error('âŒ Trivia refresh failed:', error);
      }
    }

    // Refresh series organizer content
    if (typeof window.__FlickletRefreshSeriesOrganizer === 'function') {
      console.log('ðŸ”„ Refreshing series organizer');
      try {
        window.__FlickletRefreshSeriesOrganizer();
        console.log('âœ… Series organizer refresh completed');
      } catch (error) {
        console.error('âŒ Series organizer refresh failed:', error);
      }
    }

    // Refresh upcoming episodes content (V2 system)
    if (typeof window.loadUpcomingEpisodes === 'function') {
      console.log('ðŸ”„ Refreshing upcoming episodes content');
      window.loadUpcomingEpisodes();
    }

    // Refresh daily countdown and stats
    if (typeof window.startDailyCountdown === 'function') {
      console.log('ðŸ”„ Refreshing daily countdown');
      window.startDailyCountdown();
    }

    if (typeof window.updateFlickWordStats === 'function') {
      console.log('ðŸ”„ Refreshing FlickWord stats');
      window.updateFlickWordStats();
    }

    // Refresh spotlight/playlist content
    if (typeof window.__FlickletRefreshSpotlight === 'function') {
      console.log('ðŸ”„ Refreshing spotlight content');
      window.__FlickletRefreshSpotlight();
    }

    // Final refresh of horoscope and quote
    setTimeout(() => {
      const hEl = document.getElementById('fakeFortune');
      const qEl = document.getElementById('randomQuote');
      if (hEl && typeof pickDailyHoroscope === 'function') {
        hEl.textContent = pickDailyHoroscope();
      }
      if (qEl && typeof drawQuote === 'function') {
        qEl.textContent = drawQuote();
      }

      const fileInput = document.getElementById('importFile');
      if (fileInput && typeof updateFileLabel === 'function') {
        updateFileLabel(fileInput);
      }

      // Handle search results language change
      this.handleSearchResultsLanguageChange(lang);
    }, 600);
  }

  // Handle search results language change
  handleSearchResultsLanguageChange(lang) {
    const searchResults = document.getElementById('searchResults');
    if (searchResults && !searchResults.hidden) {
      console.log('ðŸ”„ Search results visible, re-performing search in new language');

      // Clear search cache to force fresh results in new language
      if (typeof window.searchItemCache !== 'undefined' && window.searchItemCache.clear) {
        console.log('ðŸ—‘ï¸ Clearing search cache for language change');
        window.searchItemCache.clear();
      }

      // Re-perform the search with the new language
      const searchInput = document.getElementById('searchInput');
      if (searchInput && searchInput.value.trim()) {
        console.log('ðŸ” Re-performing search with query:', searchInput.value);
        setTimeout(() => {
          if (typeof window.performSearch === 'function') {
            window.performSearch();
          }
        }, 100);
      } else {
        // No search query, just show the language change message
        searchResults.innerHTML = `<div style="text-align: center; padding: 20px;" class="u-fg">
          <p>${t('search_results_cleared', lang)}</p>
          <p>${t('please_search_again', lang)}</p>
        </div>`;
      }
    }
  }

  // Translation function
  t(key, lang = this.currentLang) {
    if (window.I18N && window.I18N[lang] && window.I18N[lang][key]) {
      return window.I18N[lang][key];
    }
    if (window.I18N && window.I18N.en && window.I18N.en[key]) {
      return window.I18N.en[key];
    }
    return key;
  }

  // Observer pattern for components that need to react to language changes
  addObserver(callback) {
    this.observers.push(callback);
  }

  removeObserver(callback) {
    const index = this.observers.indexOf(callback);
    if (index > -1) {
      this.observers.splice(index, 1);
    }
  }

  notifyObservers(newLang) {
    this.observers.forEach((callback) => {
      try {
        callback(newLang);
      } catch (error) {
        console.error('âŒ Observer callback failed:', error);
      }
    });
  }

  // Get current language
  getCurrentLanguage() {
    return this.currentLang;
  }

  // Re-initialize after appData is loaded
  reinitialize() {
    console.log('ðŸŒ Re-initializing LanguageManager after appData load');

    // Load saved language from appData
    if (window.appData?.settings?.lang) {
      const newLang = window.appData.settings.lang;
      if (newLang !== this.currentLang) {
        console.log('ðŸŒ Language changed from', this.currentLang, 'to', newLang);
        this.currentLang = newLang;

        // Update dropdown
        this.setupLanguageDropdown();

        // Apply translations
        applyTranslations(this.currentLang);

        // Update UI
        this.updateLanguageDependentUI(this.currentLang);
      }
    }
  }

  // Check if language change is in progress
  isLanguageChangeInProgress() {
    return this.isChangingLanguage;
  }

  // Show language change notification
  showLanguageChangeNotification(lang) {
    const langName = lang === 'es' ? 'Spanish' : 'English';
    let message = t('language_changed_to', lang);

    // Replace placeholder if it exists
    if (message && message.includes('{lang}')) {
      message = message.replace('{lang}', langName);
    } else {
      message = `Language changed to ${langName}`;
    }

    if (typeof window.showNotification === 'function') {
      window.showNotification(message, 'success');
    } else {
      console.log('ðŸŒ', message);
    }
  }
}

// Create global instance
window.LanguageManager = new LanguageManager();

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    window.LanguageManager.init();
  });
} else {
  window.LanguageManager.init();
}

// Expose changeLanguage globally for backward compatibility
window.changeLanguage = (newLang) => {
  return window.LanguageManager.changeLanguage(newLang);
};

// Do NOT redefine window.applyTranslations here â€” i18n.js already defines it.
// If you need a convenience alias, create a differently named helper instead, e.g.:
// window.applyAppTranslations = (lang) => applyTranslations(lang);

console.log('ðŸŒ Language Manager loaded');

```

## android\app\src\main\assets\public\assets\community-522739e7.js
```
import{_ as j}from"./modals-5fe29d8c.js";import{j as e,b as k,F as R,T as V}from"./games-23f18348.js";import{r as o}from"./react-vendor-b1791c80.js";function Y(l){const[h,d]=o.useState(!0),[b,s]=o.useState(null),[r,x]=o.useState(0),[N,y]=o.useState(""),g=o.useRef(null),n=o.useRef(null),a=o.useRef(null),c=["68xPqmT0jC4","l8XxoeV5LRU","WyXuRmXbS7U","LwBS3a9HOWI","55892jT06aI","Ut1xOFdASa0"],m=["A Year of Shudder (2024) Sizzle","V/H/S/HALLOWEEN | Official Trailer","In a Violent Nature | Official Trailer","The Salvation | Official Trailer","The China Hustle | Official Trailer","Hold Your Fire | Official Trailer"],T=["Horror Collection","Horror Collection","Horror Collection","Action Collection","Dark Documentary","Dark Documentary"],f=()=>{const t=(r+1)%c.length;if(x(t),y(m[t]),n.current)try{n.current.loadVideoById(c[t]),console.log(`ðŸŽ¬ Rotated to video ${t+1}/${c.length}: ${m[t]}`)}catch(u){console.error("ðŸŽ¬ Error rotating to next video:",u),setTimeout(()=>f(),1e3)}},v=()=>{a.current&&clearInterval(a.current),a.current=setInterval(()=>{f()},3e4),console.log("ðŸŽ¬ Video rotation timer started (30s intervals)")},w=()=>{a.current&&(clearInterval(a.current),a.current=null,console.log("ðŸŽ¬ Video rotation timer stopped"))};o.useEffect(()=>{y(m[r]);const t=()=>{if(window.YT&&window.YT.Player)u();else if(document.querySelector('script[src="https://www.youtube.com/iframe_api"]'))window.onYouTubeIframeAPIReady=u;else{const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",i.async=!0,i.onload=()=>{console.log("ðŸŽ¬ YouTube API script loaded")},i.onerror=()=>{console.error("ðŸŽ¬ Failed to load YouTube API script"),s("Failed to load YouTube API"),d(!1)},document.head.appendChild(i),window.onYouTubeIframeAPIReady=u}},u=()=>{if(!g.current){console.error("ðŸŽ¬ Player ref not available"),s("Player container not available"),d(!1);return}try{console.log("ðŸŽ¬ Initializing YouTube player with rotation...");const p=c[r];n.current=new window.YT.Player(g.current,{height:"100%",width:"100%",videoId:p,playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,fs:1,cc_load_policy:0,enablejsapi:1,origin:window.location.origin,privacy_mode:1,host:"https://www.youtube-nocookie.com"},events:{onReady:()=>{console.log(`ðŸŽ¬ YouTube player ready with video: ${m[r]}`),d(!1),s(null),v()},onStateChange:i=>{console.log("ðŸŽ¬ Player state changed:",i.data),i.data===window.YT.PlayerState.PLAYING&&console.log("ðŸŽ¬ Video started playing")},onError:i=>{console.error("ðŸŽ¬ YouTube player error:",i.data),console.log("ðŸŽ¬ Attempting to load next video due to error"),setTimeout(()=>f(),2e3)}}})}catch(p){console.error("ðŸŽ¬ Failed to initialize YouTube player:",p),s("Failed to initialize video player"),d(!1)}},S=setTimeout(()=>{t()},100);return()=>{if(clearTimeout(S),w(),n.current)try{n.current.destroy()}catch(p){console.warn("ðŸŽ¬ Error destroying player:",p)}}},[r]);const P=()=>{n.current&&(n.current.getPlayerState()===window.YT.PlayerState.PLAYING?n.current.pauseVideo():n.current.playVideo())},_=()=>{f()},I=()=>{const t=r===0?c.length-1:r-1;if(x(t),y(m[t]),n.current)try{n.current.loadVideoById(c[t]),console.log(`ðŸŽ¬ Rotated to previous video ${t+1}/${c.length}: ${m[t]}`)}catch(u){console.error("ðŸŽ¬ Error rotating to previous video:",u)}},C=()=>{a.current?w():v()};return b?e.jsx("div",{className:"youtube-player-error",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h3",{children:"ðŸŽ¬ Community Player"}),e.jsx("p",{children:"Unable to load video content"}),e.jsx("button",{className:"retry-btn",onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsxs("div",{className:"youtube-player-container max-w-[420px] md:max-w-[560px] mx-auto bg-neutral-900/70 border border-neutral-800/50 rounded-2xl shadow-[0_0_20px_rgba(0,0,0,0.5)] hover:shadow-[0_0_30px_rgba(0,0,0,0.8)] transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-400 opacity-60",children:"ðŸŽ¬ Community Player"}),e.jsxs("span",{className:"text-xs font-medium text-blue-400",children:[r+1,"/",c.length," ",T[r]]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:I,title:"Previous Video",children:"â®ï¸"}),e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:P,title:"Play/Pause",children:"â¯ï¸"}),e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:_,title:"Next Video",children:"â­ï¸"}),e.jsx("button",{className:`control-btn w-5 h-5 rounded-md p-1 transition-colors ${a.current?"bg-blue-500/30 animate-pulse":"hover:bg-blue-500/30"}`,onClick:C,title:a.current?"Stop Auto-Rotation":"Start Auto-Rotation",children:"ðŸ”„"})]})]}),e.jsxs("div",{className:"my-3 px-3",children:[h&&e.jsxs("div",{className:"player-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading video content..."})]}),e.jsx("div",{className:"aspect-video rounded-xl overflow-hidden border border-neutral-700/60 mx-auto shadow-inner",children:e.jsx("div",{ref:g,className:"youtube-player w-full h-full",style:{display:h?"none":"block"}})})]}),e.jsxs("div",{className:"bg-neutral-950/80 rounded-b-2xl p-3 flex flex-col items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-200 text-center",children:N}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center transition-opacity duration-700",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"ðŸŽž Official Trailer"}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"â± 2â€“3 min"}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"ðŸ”’ Privacy Enhanced"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs transition-opacity duration-700 ${a.current?"bg-blue-900/40 text-blue-300":"bg-neutral-800/80 text-neutral-300"}`,children:a.current?"â™»ï¸ Auto-Rotating":"â¸ï¸ Manual"})]})]})]})}const A=o.lazy(()=>j(()=>import("./games-23f18348.js").then(l=>l.e),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"])),O=o.lazy(()=>j(()=>import("./games-23f18348.js").then(l=>l.f),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"]));function W(){const l=k(),[h,d]=o.useState(!1),[b,s]=o.useState(!1),r=()=>{typeof window.openFlickWordModal=="function"?window.openFlickWordModal():d(!0)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{"data-rail":"community",className:"grid md:grid-cols-3 gap-4 items-stretch",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(Y,{})}),e.jsxs("div",{className:"grid grid-rows-[1fr_1fr] gap-4 h-full",children:[e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors",onClick:r,children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:l.flickword||"FlickWord"}),e.jsx("p",{className:"text-xs text-neutral-400 mb-3",children:l.flickword_tagline||"Wordle-style daily word play"})]}),e.jsx("div",{className:"mt-auto",children:e.jsx(R,{})}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded-lg transition-colors",onClick:x=>{x.stopPropagation(),r()},children:l.play_now||"Play Now"})})]}),e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>s(!0),children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:l.daily_trivia||"Daily Trivia"}),e.jsx("p",{className:"text-xs text-neutral-400 mb-3",children:l.daily_trivia_tagline||"Fresh question, new bragging rights"})]}),e.jsx("div",{className:"mt-auto mb-3",children:e.jsx(V,{})}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{className:"w-full px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs font-semibold rounded-lg transition-colors",onClick:x=>{x.stopPropagation(),s(!0)},children:l.play_now||"Play Now"})})]})]}),e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸš€"}),e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"More community features and interactive content coming your way!"})]})]}),e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading FlickWord..."}),children:e.jsx(A,{isOpen:h,onClose:()=>d(!1)})}),e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading Trivia..."}),children:e.jsx(O,{isOpen:b,onClose:()=>s(!1)})})]})}export{W as C};

```

## android\app\src\main\assets\public\assets\games-23f18348.js
```
var me=Object.defineProperty;var ge=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var I=(s,e,t)=>(ge(s,typeof e!="symbol"?e+"":e,t),t);import{r as n,R as Q,a as pe}from"./react-vendor-b1791c80.js";var se={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=n,ye=Symbol.for("react.element"),we=Symbol.for("react.fragment"),Se=Object.prototype.hasOwnProperty,Ae=fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Te={key:!0,ref:!0,__self:!0,__source:!0};function oe(s,e,t){var o,l={},i=null,r=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(r=e.ref);for(o in e)Se.call(e,o)&&!Te.hasOwnProperty(o)&&(l[o]=e[o]);if(s&&s.defaultProps)for(o in e=s.defaultProps,e)l[o]===void 0&&(l[o]=e[o]);return{$$typeof:ye,type:s,key:i,ref:r,props:l,_owner:Ae.current}}q.Fragment=we;q.jsx=oe;q.jsxs=oe;se.exports=q;var a=se.exports;const Ee={en:{home:"Home",currentlyWatching:"Currently Watching",wantToWatch:"Want to Watch",watched:"Watched",alreadyWatched:"Already Watched",holidays:"Holidays",discovery:"Discovery",wantToWatchAction:"Want to Watch",currentlyWatchingAction:"Currently Watching",watchedAction:"Watched",notInterestedAction:"Not Interested",deleteAction:"Delete",removeAction:"Remove",reviewNotesAction:"Review/Notes",addTagAction:"Add Tag",holidayAddAction:"Holiday +",settings:"Settings",general:"General",notifications:"Notifications",layout:"Layout",data:"Data",pro:"Pro",about:"About",displayName:"Display Name",myStatistics:"My Statistics",tvShows:"TV Shows",movies:"Movies",notInterestedManagement:"Not Interested Management",manageNotInterestedList:"Manage Not Interested List",personalityLevel:"Personality Level",regular:"Regular",semiSarcastic:"Semi-sarcastic",severelySarcastic:"Severely sarcastic",friendlyAndHelpful:"Friendly and helpful",aBitCheeky:"A bit cheeky",maximumSass:"Maximum sass",preview:"Preview",resetSystemToDefaults:"Reset System to Defaults",themePreference:"Theme Preference",dark:"Dark",light:"Light",darkBackgroundWithLightText:"Dark background with light text",lightBackgroundWithDarkText:"Light background with dark text",basicCustomization:"Basic Customization",condensedView:"Condensed View",enableEpisodeTracking:"Enable Episode Tracking",proFeatures:"Pro Features",themePacksComingSoon:"Theme packs coming soon...",myLists:"My Lists",enterListName:"Enter list name:",addToList:"Add to List",selectListFor:"Select a list for",items:"items",noListsYet:"No lists created yet",createFirstList:"Create Your First List",createNewList:"Create New List",listName:"List name",listDescription:"List description (optional)",default:"Default",edit:"Edit",setAsDefault:"Set as Default",delete:"Delete",noListsCreated:"No lists created yet",createYourFirstList:"Create Your First List",listsUsed:"Lists used",confirmDeleteList:"Are you sure you want to delete",thisActionCannotBeUndone:"This action cannot be undone.",save:"Save",cancel:"Cancel",darkThemeDescription:"Dark background with light text",lightThemeDescription:"Light background with dark text",enterNewName:"Enter new name:",rename:"Rename",addItemsFromSearchOrDiscovery:"Add items from search or discovery",createListsToOrganize:"Create lists to organize your favorite shows and movies",maxListsReached:"Maximum lists reached",upgradeForMoreLists:"Upgrade to Pro for more lists",upgradeToPro:"Upgrade to Pro",proUpgradeComingSoon:"Pro upgrade coming soon!",itemAlreadyExists:"Item Already Exists",alreadyInList:"is already in",confirmMoveToList:"Do you want to move it to the selected list?",moveToList:"Move to List",notificationTypes:"Notification Types",upcomingEpisodeAlerts:"Upcoming episode alerts",weeklyDiscover:"Weekly discover",monthlyStatsDigest:"Monthly stats digest",alertConfiguration:"Alert Configuration (Pro)",advancedNotificationByLeadTime:"Advanced notification by lead time in hours",pickTheList:"Pick the list (currently watching or want to watch)",standardDataManagement:"Standard Data Management",shareList:"Share List",chooseListsAndShowsToShare:"Choose lists and shows to share",generatesCopyPasteableFormattedList:"Generates copy/pasteable formatted list with Flicklet branding and link",backupSystem:"Backup System (JSON)",exportAllPersonalData:"Export all personal data",import:"Import (JSON)",importPreviouslyExportedData:"Import previously exported data",resetAllData:"Reset All Data",restoreSystemToDefaults:"Restore system to defaults",advancedSharingOptions:"Advanced sharing options",proManagement:"Pro Management",unlockProFeatures:"Unlock pro features button (payment prompt - not implemented)",paymentPromptNotImplemented:"Payment prompt - not implemented",proFeatureList:"Pro feature list and descriptions",alertConfigurationDetails:"Alert configuration details (hourly config)",hourlyConfig:"Hourly config",themePacks:"Theme packs (holiday and movie themes - not implemented)",holidayAndMovieThemes:"Holiday and movie themes - not implemented",socialFeatures:"Social features (FlickWord, Trivia, shared watchlists among friends)",flickwordTriviaSharedWatchlists:"FlickWord, Trivia, shared watchlists among friends",bloopersBehindTheScenes:"Bloopers/Behind the scenes (activates button on show cards)",activatesButtonOnShowCards:"Activates button on show cards",additionalFeaturesTBD:"Additional features TBD",informationSections:"Information Sections",aboutUniqueForYou:"About unique for you",aboutTheCreators:"About the creators",aboutTheApp:"About the app",shareYourThoughts:"Share your thoughts (feedback, quotes for marquee, clips for home page player, venting, etc.)",feedbackQuotesForMarquee:"Feedback, quotes for marquee, clips for home page player, venting, etc.",clipsForHomePagePlayer:"Clips for home page player",venting:"Venting",signIn:"Sign In",signOut:"Sign Out",signInHere:"Sign in here",clickToSignOut:"Click to sign out",clickToSignIn:"Click to sign in",signedInAs:"Signed in as",signInWithGoogle:"Sign in with Google",signInWithApple:"Sign in with Apple",signInWithEmail:"Sign in with Email",signInDescription:"Sign in to sync your lists across devices",welcomeToFlicklet:"Welcome to Flicklet!",whatShouldWeCallYou:"What should we call you?",username:"Username",usernameRequired:"Username is required",usernameDescription:"This will be used for personalized messages",saving:"Saving...",skip:"Skip",close:"Close",confirm:"Confirm",areYouSure:"Are you sure?",comingSoon:"Coming soon...",notImplemented:"Not implemented",yourShows:"Your Shows",upNext:"Up Next",inTheatersNearYou:"In Theaters Near You",noShowsInCurrentlyWatching:"No shows in your currently watching list. Add some from search or discovery!",addSomeFromSearchOrDiscovery:"Add some from search or discovery!",noUpcomingEpisodes:"No upcoming episodes. Add TV shows to your watching list to see when new episodes air!",addTvShowsToWatchingList:"Add TV shows to your watching list to see when new episodes air!",noPoster:"No poster",currentlyWatchingCount:"Currently Watching",wantToWatchCount:"Want to Watch",watchedCount:"Watched",totalCount:"Total",tellUsWhatToImprove:"Tell us what to improve",typeYourFeedback:"Type your feedback...",sendFeedback:"Send Feedback",whatsComing:"What's coming",betterRecommendations:"Better recommendations",episodeUpNextWithDates:'Episode "Up Next" with dates',shareListsWithFriends:"Share lists with friends",yourLocalTheater:"Your Local Theater",logIn:"Log in",logOut:"Log out",guest:"Guest",noSynopsisAvailable:"No synopsis available.",opensInTmdb:"Opens in TMDB",searchFailed:"Search failed",procrastinatingProductively:"Procrastinating productively.",curatingYourIndecision:"Curating your indecision.",becauseTimeIsAnIllusion:"Because time is an illusion.",cinemaNowWithCommitmentIssues:"Cinema, now with commitment issues.",yourBacklogCalledItsGrowing:"Your backlog called. It's growing.",areYouSureChangeDisplayName:"Are you sure you want to change your display name?",thisWillUpdateYourProfile:"This will update your profile.",areYouSureResetSettings:"Are you sure you want to reset all settings to defaults?",language:"Language",english:"English",spanish:"EspaÃ±ol",community:"Community",forYou:"For you",feedback:"Feedback",flickword:"FlickWord",flickword_tagline:"Wordle-style daily word play",daily_trivia:"Daily Trivia",daily_trivia_tagline:"Fresh question, new bragging rights",play_now:"Play Now",close_game:"Close Game",games:"Games",won:"Won",lost:"Lost",streak:"Streak",best:"Best",win_percent:"Win %",played:"Played",accuracy:"Accuracy",detectingLocation:"Detecting your location...",locationUnavailable:"Location unavailable",enableLocation:"Enable location",hideShowtimes:"Hide",findShowtimes:"Find",loadingTheaters:"Loading theaters...",noTheatersFound:"No theaters found nearby. Try expanding your search radius.",kmAway:"km away",hideTimes:"Hide",showTimes:"Show",todaysShowtimes:"Today's Showtimes:",drama:"Drama",comedy:"Comedy",horror:"Horror",nowPlaying:"Now Playing",hasExquisiteTaste:"Has exquisite taste",definitelyNotProcrastinating:"Definitely not procrastinating",breaksForPopcornOnly:"Breaks for popcorn only",curatesChaosLikeAPro:"Curates chaos like a pro",community_player_placeholder:"Community content coming soon",dataManagementComingSoon:"Data management features coming soon",searchPlaceholder:"Search movies, shows, peopleâ€¦",allGenres:"All genres",action:"Action",search:"Search",clear:"Clear",showMarquee:"Show marquee",hideMarquee:"Hide",marqueeMessage1:"I'm sorry, Dave. I'm afraid I can't do that.",marqueeMessage2:"Roads? Where we're going, we don't need roads.",marqueeMessage3:"Houston, we have a problem.",marqueeMessage4:"May the odds be ever in your favor.",marqueeMessage5:"I'll be back."},es:{home:"Inicio",currentlyWatching:"Viendo Ahora",wantToWatch:"Quiero Ver",watched:"Visto",alreadyWatched:"Ya Visto",holidays:"Fiestas",discovery:"Descubrir",wantToWatchAction:"Quiero Ver",currentlyWatchingAction:"Viendo Ahora",watchedAction:"Visto",notInterestedAction:"No Me Interesa",deleteAction:"Eliminar",removeAction:"Quitar",reviewNotesAction:"ReseÃ±a/Notas",addTagAction:"Agregar Etiqueta",holidayAddAction:"Fiesta +",settings:"ConfiguraciÃ³n",general:"General",notifications:"Notificaciones",layout:"DiseÃ±o",data:"Datos",pro:"Pro",about:"Acerca De",displayName:"Nombre de Pantalla",myStatistics:"Mis EstadÃ­sticas",tvShows:"Programas de TV",movies:"PelÃ­culas",notInterestedManagement:"GestiÃ³n de No Me Interesa",manageNotInterestedList:"Gestionar Lista de No Me Interesa",personalityLevel:"Nivel de Personalidad",regular:"Regular",semiSarcastic:"Semi-sarcÃ¡stico",severelySarcastic:"Severamente sarcÃ¡stico",friendlyAndHelpful:"Amigable y Ãºtil",aBitCheeky:"Un poco descarado",maximumSass:"MÃ¡ximo descaro",preview:"Vista Previa",resetSystemToDefaults:"Restablecer Sistema a Valores Predeterminados",themePreference:"Preferencia de Tema",dark:"Oscuro",light:"Claro",darkBackgroundWithLightText:"Fondo oscuro con texto claro",lightBackgroundWithDarkText:"Fondo claro con texto oscuro",basicCustomization:"PersonalizaciÃ³n BÃ¡sica",condensedView:"Vista Condensada",enableEpisodeTracking:"Habilitar Seguimiento de Episodios",proFeatures:"CaracterÃ­sticas Pro",themePacksComingSoon:"Paquetes de temas prÃ³ximamente...",myLists:"Mis Listas",enterListName:"Ingresa nombre de lista:",addToList:"Agregar a Lista",selectListFor:"Selecciona una lista para",items:"elementos",noListsYet:"AÃºn no hay listas creadas",createFirstList:"Crea Tu Primera Lista",createNewList:"Crear Nueva Lista",listName:"Nombre de lista",listDescription:"DescripciÃ³n de lista (opcional)",default:"Predeterminada",edit:"Editar",setAsDefault:"Establecer como Predeterminada",delete:"Eliminar",noListsCreated:"AÃºn no hay listas creadas",createYourFirstList:"Crea Tu Primera Lista",listsUsed:"Listas usadas",confirmDeleteList:"Â¿EstÃ¡s seguro de que quieres eliminar",thisActionCannotBeUndone:"Esta acciÃ³n no se puede deshacer.",save:"Guardar",cancel:"Cancelar",darkThemeDescription:"Fondo oscuro con texto claro",lightThemeDescription:"Fondo claro con texto oscuro",enterNewName:"Ingresa nuevo nombre:",rename:"Renombrar",addItemsFromSearchOrDiscovery:"Agregar elementos desde bÃºsqueda o descubrimiento",createListsToOrganize:"Crea listas para organizar tus programas y pelÃ­culas favoritas",maxListsReached:"MÃ¡ximo de listas alcanzado",upgradeForMoreLists:"Actualiza a Pro para mÃ¡s listas",upgradeToPro:"Actualizar a Pro",proUpgradeComingSoon:"Â¡ActualizaciÃ³n a Pro prÃ³ximamente!",itemAlreadyExists:"El Elemento Ya Existe",alreadyInList:"ya estÃ¡ en",confirmMoveToList:"Â¿Quieres moverlo a la lista seleccionada?",moveToList:"Mover a Lista",notificationTypes:"Tipos de NotificaciÃ³n",upcomingEpisodeAlerts:"Alertas de episodios prÃ³ximos",weeklyDiscover:"Descubrimiento semanal",monthlyStatsDigest:"Resumen de estadÃ­sticas mensuales",alertConfiguration:"ConfiguraciÃ³n de Alertas (Pro)",advancedNotificationByLeadTime:"NotificaciÃ³n avanzada por tiempo de anticipaciÃ³n en horas",pickTheList:"Elige la lista (viendo ahora o quiero ver)",standardDataManagement:"GestiÃ³n de Datos EstÃ¡ndar",shareList:"Compartir Lista",chooseListsAndShowsToShare:"Elige listas y programas para compartir",generatesCopyPasteableFormattedList:"Genera lista formateada copiable/pegable con marca Flicklet y enlace",backupSystem:"Sistema de Respaldo (JSON)",exportAllPersonalData:"Exportar todos los datos personales",import:"Importar (JSON)",importPreviouslyExportedData:"Importar datos previamente exportados",resetAllData:"Restablecer Todos los Datos",restoreSystemToDefaults:"Restaurar sistema a valores predeterminados",advancedSharingOptions:"Opciones de compartir avanzadas",proManagement:"GestiÃ³n Pro",unlockProFeatures:"BotÃ³n de desbloquear caracterÃ­sticas pro (prompt de pago - no implementado)",paymentPromptNotImplemented:"Prompt de pago - no implementado",proFeatureList:"Lista de caracterÃ­sticas pro y descripciones",alertConfigurationDetails:"Detalles de configuraciÃ³n de alertas (configuraciÃ³n por horas)",hourlyConfig:"ConfiguraciÃ³n por horas",themePacks:"Paquetes de temas (temas de fiestas y pelÃ­culas - no implementado)",holidayAndMovieThemes:"Temas de fiestas y pelÃ­culas - no implementado",socialFeatures:"CaracterÃ­sticas sociales (FlickWord, Trivia, listas compartidas entre amigos)",flickwordTriviaSharedWatchlists:"FlickWord, Trivia, listas compartidas entre amigos",bloopersBehindTheScenes:"Bloopers/DetrÃ¡s de escena (activa botÃ³n en tarjetas de programas)",activatesButtonOnShowCards:"Activa botÃ³n en tarjetas de programas",additionalFeaturesTBD:"CaracterÃ­sticas adicionales por determinar",informationSections:"Secciones de InformaciÃ³n",aboutUniqueForYou:"Acerca de Ãºnico para ti",aboutTheCreators:"Acerca de los creadores",aboutTheApp:"Acerca de la aplicaciÃ³n",shareYourThoughts:"Comparte tus pensamientos (comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.)",feedbackQuotesForMarquee:"Comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.",clipsForHomePagePlayer:"Clips para reproductor de pÃ¡gina principal",venting:"Desahogo",signIn:"Iniciar SesiÃ³n",signOut:"Cerrar SesiÃ³n",signInHere:"Inicia sesiÃ³n aquÃ­",clickToSignOut:"Haz clic para cerrar sesiÃ³n",clickToSignIn:"Haz clic para iniciar sesiÃ³n",signedInAs:"Conectado como",signInWithGoogle:"Iniciar sesiÃ³n con Google",signInWithApple:"Iniciar sesiÃ³n con Apple",signInWithEmail:"Iniciar sesiÃ³n con Email",signInDescription:"Inicia sesiÃ³n para sincronizar tus listas entre dispositivos",welcomeToFlicklet:"Â¡Bienvenido a Flicklet!",whatShouldWeCallYou:"Â¿CÃ³mo deberÃ­amos llamarte?",username:"Nombre de usuario",usernameRequired:"El nombre de usuario es requerido",usernameDescription:"Esto se usarÃ¡ para mensajes personalizados",saving:"Guardando...",skip:"Omitir",close:"Cerrar",confirm:"Confirmar",areYouSure:"Â¿EstÃ¡s seguro?",comingSoon:"PrÃ³ximamente...",notImplemented:"No implementado",yourShows:"Tus Programas",upNext:"PrÃ³ximamente",inTheatersNearYou:"En Cines Cerca de Ti",noShowsInCurrentlyWatching:"No hay programas en tu lista de viendo ahora. Â¡Agrega algunos desde bÃºsqueda o descubrimiento!",addSomeFromSearchOrDiscovery:"Â¡Agrega algunos desde bÃºsqueda o descubrimiento!",noUpcomingEpisodes:"No hay episodios prÃ³ximos. Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!",addTvShowsToWatchingList:"Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!",noPoster:"Sin pÃ³ster",currentlyWatchingCount:"Viendo Ahora",wantToWatchCount:"Quiero Ver",watchedCount:"Visto",totalCount:"Total",tellUsWhatToImprove:"Dinos quÃ© mejorar",typeYourFeedback:"Escribe tu comentario...",sendFeedback:"Enviar Comentario",whatsComing:"Lo que viene",betterRecommendations:"Mejores recomendaciones",episodeUpNextWithDates:'Episodio "PrÃ³ximo" con fechas',shareListsWithFriends:"Compartir listas con amigos",yourLocalTheater:"Tu Cine Local",logIn:"Iniciar sesiÃ³n",logOut:"Cerrar sesiÃ³n",guest:"Invitado",noSynopsisAvailable:"Sin sinopsis disponible.",opensInTmdb:"Abre en TMDB",searchFailed:"BÃºsqueda fallida",procrastinatingProductively:"Procrastinando productivamente.",curatingYourIndecision:"Curando tu indecisiÃ³n.",becauseTimeIsAnIllusion:"Porque el tiempo es una ilusiÃ³n.",cinemaNowWithCommitmentIssues:"Cine, ahora con problemas de compromiso.",yourBacklogCalledItsGrowing:"Tu lista pendiente llamÃ³. EstÃ¡ creciendo.",areYouSureChangeDisplayName:"Â¿EstÃ¡s seguro de que quieres cambiar tu nombre de pantalla?",thisWillUpdateYourProfile:"Esto actualizarÃ¡ tu perfil.",areYouSureResetSettings:"Â¿EstÃ¡s seguro de que quieres restablecer todas las configuraciones a los valores predeterminados?",language:"Idioma",english:"English",spanish:"EspaÃ±ol",community:"Comunidad",forYou:"Para ti",feedback:"Comentarios",flickword:"FlickWord",flickword_tagline:"Juego de palabras diario estilo Wordle",daily_trivia:"Trivia Diaria",daily_trivia_tagline:"Pregunta fresca, nuevos derechos de presumir",play_now:"Jugar Ahora",close_game:"Cerrar Juego",games:"Juegos",won:"Ganados",lost:"Perdidos",streak:"Racha",best:"Mejor",win_percent:"% Ganados",played:"Jugados",accuracy:"PrecisiÃ³n",detectingLocation:"Detectando tu ubicaciÃ³n...",locationUnavailable:"UbicaciÃ³n no disponible",enableLocation:"Habilitar ubicaciÃ³n",hideShowtimes:"Ocultar",findShowtimes:"Buscar",loadingTheaters:"Cargando cines...",noTheatersFound:"No se encontraron cines cerca. Intenta expandir tu radio de bÃºsqueda.",kmAway:"km de distancia",hideTimes:"Ocultar",showTimes:"Mostrar",todaysShowtimes:"Horarios de Hoy:",hasExquisiteTaste:"Tiene gusto exquisito",definitelyNotProcrastinating:"Definitivamente no procrastinando",breaksForPopcornOnly:"Descansos solo para palomitas",curatesChaosLikeAPro:"CuradurÃ­a del caos como profesional",community_player_placeholder:"Contenido comunitario prÃ³ximamente",dataManagementComingSoon:"Funciones de gestiÃ³n de datos prÃ³ximamente",drama:"Drama",comedy:"Comedia",horror:"Terror",nowPlaying:"En Cartelera",searchPlaceholder:"Buscar pelÃ­culas, programas, personasâ€¦",allGenres:"Todos los gÃ©neros",action:"AcciÃ³n",search:"Buscar",clear:"Limpiar",showMarquee:"Mostrar marquesina",hideMarquee:"Ocultar",marqueeMessage1:"Lo siento, Dave. Me temo que no puedo hacer eso.",marqueeMessage2:"Â¿Carreteras? A donde vamos, no necesitamos carreteras.",marqueeMessage3:"Houston, tenemos un problema.",marqueeMessage4:"Que la suerte estÃ© siempre de tu lado.",marqueeMessage5:"VolverÃ©."}},X="flicklet.language.v2";class ve{constructor(){I(this,"currentLanguage");I(this,"subscribers",new Set);this.currentLanguage=this.loadLanguage()}loadLanguage(){try{const e=localStorage.getItem(X);if(e&&(e==="en"||e==="es"))return e}catch(e){console.error("Failed to load language from localStorage",e)}return"en"}saveLanguage(){localStorage.setItem(X,this.currentLanguage),this.emitChange()}emitChange(){this.subscribers.forEach(e=>e())}getLanguage(){return this.currentLanguage}setLanguage(e){this.currentLanguage=e,this.saveLanguage()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}getTranslations(){return Ee[this.currentLanguage]}}const P=new ve;function Ze(){const[s,e]=n.useState(P.getLanguage());return n.useEffect(()=>P.subscribe(()=>{e(P.getLanguage())}),[]),s}function ie(){const[s,e]=n.useState(P.getTranslations());return n.useEffect(()=>P.subscribe(()=>{e(P.getTranslations())}),[]),s}function et(s){P.setLanguage(s)}const Y={displayName:"Guest",personalityLevel:1,notifications:{upcomingEpisodes:!0,weeklyDiscover:!0,monthlyStats:!0},layout:{condensedView:!1,theme:"dark",homePageLists:["currently-watching","up-next","community","for-you-drama","for-you-comedy","for-you-horror","in-theaters","feedback"],forYouGenres:["drama","comedy","horror"],episodeTracking:!1},pro:{isPro:!0,features:{advancedNotifications:!0,themePacks:!0,socialFeatures:!0,bloopersAccess:!0,extrasAccess:!0}}},Z="flicklet.settings.v2";class Ne{constructor(){I(this,"settings");I(this,"subscribers",new Set);this.settings=this.loadSettings(),this.applyTheme(this.settings.layout.theme)}loadSettings(){try{const e=localStorage.getItem(Z);if(e){const t=JSON.parse(e);return{...Y,...t}}}catch(e){console.warn("Failed to load settings:",e)}return{...Y}}saveSettings(){try{localStorage.setItem(Z,JSON.stringify(this.settings)),this.notifySubscribers()}catch(e){console.error("Failed to save settings:",e)}}notifySubscribers(){this.subscribers.forEach(e=>e())}getSettings(){return{...this.settings}}updateSettings(e){this.settings={...this.settings,...e},this.saveSettings()}updateDisplayName(e){this.settings.displayName=e,this.saveSettings()}updatePersonalityLevel(e){this.settings.personalityLevel=e,this.saveSettings()}updateTheme(e){this.settings.layout.theme=e,this.applyTheme(e),this.saveSettings()}applyTheme(e){typeof document<"u"&&document.documentElement.setAttribute("data-theme",e)}toggleEpisodeTracking(){this.settings.layout.episodeTracking=!this.settings.layout.episodeTracking,this.saveSettings()}resetToDefaults(){this.settings={...Y},this.saveSettings()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}}const V=new Ne;function xe(){const[s,e]=Q.useState(()=>V.getSettings());return Q.useEffect(()=>V.subscribe(()=>{e(V.getSettings())}),[]),s}const be={1:{welcome:"Welcome back, {username}! âœ¨",empty:"No shows here yet.",add:"Add some shows to get started!",sarcasm:"",emptyWatching:"No shows in your currently watching list.",emptyWishlist:"Your wishlist is empty.",emptyWatched:"You haven't marked anything as watched yet.",emptyUpNext:"No upcoming episodes scheduled.",itemAdded:"Added to your list!",itemRemoved:"Removed from your list.",searchEmpty:"No results found. Try a different search.",searchLoading:"Searching...",errorGeneric:"Something went wrong. Please try again.",errorNetwork:"Network error. Check your connection.",errorNotFound:"Content not found.",successSave:"Settings saved!",successImport:"Data imported successfully!",successExport:"Data exported successfully!",marquee1:"Discover your next favorite show",marquee2:"Track what you're watching",marquee3:"Never miss an episode",marquee4:"Find your next binge-watch",marquee5:"Organize your entertainment"},2:{welcome:"Oh, you're back, {username}. How... delightful.",empty:"Well, this is awkward. Nothing here.",add:"Maybe try adding something? Just a thought.",sarcasm:"Because clearly you need help.",emptyWatching:"Well, this is awkward. Nothing here.",emptyWishlist:"Your wishlist is as empty as a Monday morning.",emptyWatched:"You haven't watched anything? That's... impressive.",emptyUpNext:"No episodes coming up. Shocking.",itemAdded:"There you go. You're welcome.",itemRemoved:"And it's gone. Poof.",searchEmpty:"Nothing found. Surprise, surprise.",searchLoading:"Searching... this might take a while.",errorGeneric:"Well, that didn't work. Shocking.",errorNetwork:"No internet? In this day and age?",errorNotFound:"It's gone. Vanished. Poof.",successSave:"Settings saved. Finally.",successImport:"Data imported. Hope it's better than the last batch.",successExport:"Data exported. Don't lose it this time.",marquee1:"Because clearly you need help finding shows",marquee2:"Track what you're watching (if anything)",marquee3:"Never miss an episode (that exists)",marquee4:"Find your next binge-watch (good luck)",marquee5:"Organize your entertainment (finally)"},3:{welcome:"Oh joy, {username}. Another visit. I'm absolutely thrilled.",empty:"Shocking. Absolutely shocking that this is empty.",add:"Perhaps you'd like to actually use this app? Revolutionary concept.",sarcasm:"I'm sure this will end well.",emptyWatching:"This list is emptier than a politician's promises.",emptyWishlist:"Your wishlist is emptier than a Monday morning coffee shop.",emptyWatched:"Nothing watched yet. The algorithm is probably confused.",emptyUpNext:"No episodes coming up. What a surprise. I'm devastated.",itemAdded:"There. The algorithm is pleased.",itemRemoved:"Gone. Vanished. Like my will to live.",searchEmpty:"Nothing found. What a shock. I'm devastated.",searchLoading:"Searching... this could take forever. Literally.",errorGeneric:"It broke. Shocking. Absolutely shocking.",errorNetwork:"No internet? What is this, 1995?",errorNotFound:"It's gone. Disappeared. Like my hopes and dreams.",successSave:"Settings saved. The system is pleased.",successImport:"Data imported. Hope it's not as disappointing as everything else.",successExport:"Data exported. Don't lose it. Again.",marquee1:"Discover your next favorite show (if such a thing exists)",marquee2:"Track what you're watching (assuming you watch anything)",marquee3:"Never miss an episode (that actually airs)",marquee4:"Find your next binge-watch (good luck with that)",marquee5:"Organize your entertainment (finally, some order)"}};function tt(s,e,t){const o=be[e][s];return t!=null&&t.username?o.replace("{username}",t.username):o}function ke(s){const e=ie(),[t,o]=n.useState({games:0,wins:0,losses:0,streak:0,maxStreak:0,winRate:0});return n.useEffect(()=>{const l=()=>{try{const r=localStorage.getItem("flickword:stats")||localStorage.getItem("flicklet-data")||localStorage.getItem("flicklet:stats");if(r){const p=JSON.parse(r),y=p.flickword||p;o({games:y.games||0,wins:y.wins||0,losses:y.losses||0,streak:y.streak||0,maxStreak:y.maxStreak||0,winRate:y.games>0?Math.round(y.wins/y.games*100):0})}}catch(r){console.error("Failed to load FlickWord stats:",r)}};l();const i=r=>{(r.key==="flickword:stats"||r.key==="flicklet-data")&&l()};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),a.jsx("div",{className:"flickword-stats",children:a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.games||"Games"}),a.jsx("span",{className:"stat-value",children:t.games})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.won||"Won"}),a.jsx("span",{className:"stat-value",children:t.wins})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.lost||"Lost"}),a.jsx("span",{className:"stat-value",children:t.losses})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.streak||"Streak"}),a.jsx("span",{className:"stat-value",children:t.streak})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.best||"Best"}),a.jsx("span",{className:"stat-value",children:t.maxStreak})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.win_percent||"Win %"}),a.jsxs("span",{className:"stat-value",children:[t.winRate,"%"]})]})]})})}const at=()=>{const s=ie(),[e,t]=n.useState({games:0,wins:0,losses:0,correct:0,total:0,streak:0,maxStreak:0}),o=()=>{try{const i=JSON.parse(localStorage.getItem("trivia:stats")||"{}"),r=i.trivia||i||{};t({games:r.games||0,wins:r.wins||0,losses:r.losses||0,correct:r.correct||0,total:r.total||0,streak:r.streak||0,maxStreak:r.maxStreak||0})}catch(i){console.error("Failed to load Trivia stats from localStorage",i)}};n.useEffect(()=>{o();const i=()=>o();return window.addEventListener("trivia:statsUpdated",i),()=>window.removeEventListener("trivia:statsUpdated",i)},[]);const l=e.total>0?Math.round(e.correct/e.total*100):0;return a.jsx("div",{className:"trivia-stats",children:a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.played||"Played"}),a.jsx("span",{className:"stat-value",children:e.games})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.accuracy||"Accuracy"}),a.jsxs("span",{className:"stat-value",children:[l,"%"]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.streak||"Streak"}),a.jsx("span",{className:"stat-value",children:e.streak})]})]})})},_="flicklet:daily-word",Le=[{name:"Datamuse API",url:"https://api.datamuse.com/words?sp=?????&max=1&md=d",parser:s=>{var e,t,o,l,i;return{word:(t=(e=s[0])==null?void 0:e.word)==null?void 0:t.toLowerCase(),definition:(i=(l=(o=s[0])==null?void 0:o.defs)==null?void 0:l[0])==null?void 0:i.split("	")[1],difficulty:"medium"}}},{name:"Random Word Generator",url:"https://random-word-api.herokuapp.com/word?length=5",parser:s=>{var e;return{word:(e=s[0])==null?void 0:e.toLowerCase(),definition:"A random 5-letter word",difficulty:"medium"}}}];function K(){return new Date().toISOString().slice(0,10)}async function Re(){const s=K();try{const i=localStorage.getItem(_);if(i){const r=JSON.parse(i);if(Ce(r))return console.log(`ðŸ“¦ Using cached word for ${s}: ${r.word}`),{word:r.word,date:r.date,definition:r.definition,difficulty:r.difficulty}}}catch(i){console.warn("Failed to read cached word:",i)}console.log(`ðŸŒ Fetching new word for ${s}...`);const e=await De();if(e){const i={word:e.word,date:e.date,definition:e.definition,difficulty:e.difficulty,timestamp:Date.now()};try{localStorage.setItem(_,JSON.stringify(i)),console.log(`ðŸ’¾ Cached API word: ${e.word}`)}catch(r){console.warn("Failed to cache word:",r)}return e}const t=Ie(s);console.log(`ðŸ”„ Using deterministic word for ${s}: ${t}`);const o={word:t,date:s,definition:void 0,difficulty:"medium"},l={word:t,date:s,definition:void 0,difficulty:"medium",timestamp:Date.now()};try{localStorage.setItem(_,JSON.stringify(l))}catch(i){console.warn("Failed to cache fallback word:",i)}return o}function Ie(s){const e=s.split("-").join(""),t=parseInt(e,10),o=["ABOUT","ABOVE","ABUSE","ACTOR","ACUTE","ADMIT","ADOPT","ADULT","AFTER","AGAIN","AGENT","AGREE","AHEAD","ALARM","ALBUM","ALERT","ALIEN","ALIGN","ALIKE","ALIVE","ALLOW","ALONE","ALONG","ALTER","AMONG","ANGER","ANGLE","ANGRY","APART","APPLE","APPLY","ARENA","ARGUE","ARISE","ARRAY","ASIDE","ASSET","AVOID","AWAKE","AWARD","AWARE","BADLY","BASIC","BEACH","BEGAN","BEGIN","BEING","BELOW","BENCH","BILLY","BIRTH","BLACK","BLAME","BLIND","BLOCK","BLOOD","BOARD","BOOST","BOOTH","BOUND","BRAIN","BRAND","BRASS","BRAVE","BREAD","BREAK","BREED","BRIEF","BRING","BROAD","BROKE","BROWN","BUILD","BUILT","BUYER","CABLE","CALIF","CARRY","CATCH","CAUSE","CHAIN","CHAIR","CHAOS","CHARM","CHART","CHASE","CHEAP","CHECK","CHEST","CHIEF","CHILD","CHINA","CHOSE","CIVIL","CLAIM","CLASS","CLEAN","CLEAR","CLICK","CLIMB","CLOCK","CLOSE","CLOUD","COACH","COAST","COUCH","COULD","COUNT","COURT","COVER","CRAFT","CRASH","CRAZY","CREAM","CRIME","CROSS","CROWD","CROWN","CRUDE","CURVE","CYCLE","DAILY","DANCE","DATED","DEALT","DEATH","DEBUT","DELAY","DEPTH","DOING","DOUBT","DOZEN","DRAFT","DRAMA","DRANK","DREAM","DRESS","DRILL","DRINK","DRIVE","DROVE","DYING","EAGER","EARLY","EARTH","EIGHT","ELITE","EMPTY","ENEMY","ENJOY","ENTER","ENTRY","EQUAL","ERROR","EVENT","EVERY","EXACT","EXIST","EXTRA","FAITH","FALSE","FAULT","FIBER","FIELD","FIFTH","FIFTY","FIGHT","FINAL","FIRST","FIXED","FLASH","FLEET","FLOOR","FLUID","FOCUS","FORCE","FORTH","FORTY","FORUM","FOUND","FRAME","FRANK","FRAUD","FRESH","FRONT","FROST","FRUIT","FULLY","FUNNY","GIANT","GIVEN","GLASS","GLOBE","GOING","GRACE","GRADE","GRAND","GRANT","GRASS","GRAVE","GREAT","GREEN","GROSS","GROUP","GROWN","GUARD","GUESS","GUEST","GUIDE","HAPPY","HARRY","HEART","HEAVY","HORSE","HOTEL","HOUSE","HUMAN","IDEAL","IMAGE","INDEX","INNER","INPUT","ISSUE","JAPAN","JIMMY","JOINT","JONES","JUDGE","KNOWN","LABEL","LARGE","LASER","LATER","LAUGH","LAYER","LEARN","LEASE","LEAST","LEAVE","LEGAL","LEVEL","LEWIS","LIGHT","LIMIT","LINKS","LIVES","LOCAL","LOOSE","LOWER","LUCKY","LUNCH","LYING","MAGIC","MAJOR","MAKER","MARCH","MARIA","MATCH","MAYBE","MAYOR","MEANT","MEDIA","METAL","MIGHT","MINOR","MINUS","MIXED","MODEL","MONEY","MONTH","MORAL","MOTOR","MOUNT","MOUSE","MOUTH","MOVED","MOVIE","MUSIC","NEEDS","NEVER","NEWLY","NIGHT","NOISE","NORTH","NOTED","NOVEL","NURSE","OCCUR","OCEAN","OFFER","OFTEN","ORDER","OTHER","OUGHT","PAINT","PANEL","PAPER","PARTY","PEACE","PETER","PHASE","PHONE","PHOTO","PIANO","PIECE","PILOT","PITCH","PLACE","PLAIN","PLANE","PLANT","PLATE","PLAZA","PLOT","PLUG","PLUS","POINT","POUND","POWER","PRESS","PRICE","PRIDE","PRIME","PRINT","PRIOR","PRIZE","PROOF","PROUD","PROVE","QUEEN","QUICK","QUIET","QUITE","RADIO","RAISE","RANGE","RAPID","RATIO","REACH","READY","REALM","REBEL","REFER","RELAX","REPAY","REPLY","RIGHT","RIGID","RISKY","RIVER","ROBIN","ROGER","ROMAN","ROUGH","ROUND","ROUTE","ROYAL","RURAL","SCALE","SCENE","SCOPE","SCORE","SENSE","SERVE","SETUP","SEVEN","SHALL","SHAPE","SHARE","SHARP","SHEET","SHELF","SHELL","SHIFT","SHINE","SHIRT","SHOCK","SHOOT","SHORT","SHOWN","SIDED","SIGHT","SILLY","SINCE","SIXTH","SIXTY","SIZED","SKILL","SLEEP","SLIDE","SMALL","SMART","SMILE","SMITH","SMOKE","SNAKE","SNOW","SOLAR","SOLID","SOLVE","SORRY","SOUND","SOUTH","SPACE","SPARE","SPEAK","SPEED","SPEND","SPENT","SPLIT","SPOKE","SPORT","STAFF","STAGE","STAKE","STAND","START","STATE","STEAM","STEEL","STEEP","STEER","STEPS","STICK","STILL","STOCK","STONE","STOOD","STORE","STORM","STORY","STRIP","STUCK","STUDY","STUFF","STYLE","SUGAR","SUITE","SUPER","SWEET","TABLE","TAKEN","TASTE","TAXES","TEACH","TERMS","THANK","THEFT","THEIR","THEME","THERE","THESE","THICK","THING","THINK","THIRD","THOSE","THREE","THREW","THROW","THUMB","TIGHT","TIMES","TIRED","TITLE","TODAY","TOPIC","TOTAL","TOUCH","TOUGH","TOWER","TRACK","TRADE","TRAIN","TREAT","TREND","TRIAL","TRIBE","TRICK","TRIED","TRIES","TRUCK","TRULY","TRUST","TRUTH","TWICE","UNDER","UNDUE","UNION","UNITY","UNTIL","UPPER","UPSET","URBAN","USAGE","USUAL","VALID","VALUE","VIDEO","VIRUS","VISIT","VITAL","VOICE","WASTE","WATCH","WATER","WHEEL","WHERE","WHICH","WHILE","WHITE","WHOLE","WHOSE","WOMAN","WOMEN","WORLD","WORRY","WORSE","WORST","WORTH","WOULD","WRITE","WRONG","WROTE","YOUNG","YOUTH"],l=t%o.length;return o[l]}function Ce(s){return s.date===K()}async function De(){for(const s of Le)try{console.log(`ðŸŽ¯ Trying ${s.name}...`);const e=await fetch(s.url,{method:"GET",headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json(),o=s.parser(t);if(o.word&&o.word.length===5&&/^[a-z]+$/.test(o.word))return console.log(`âœ… Successfully fetched word from ${s.name}: ${o.word}`),{word:o.word,date:K(),definition:o.definition,difficulty:o.difficulty}}catch(e){console.warn(`âŒ ${s.name} failed:`,e)}return null}let B=null;const Oe=["couch","scowl","zesty","zebra","zombi","zoned","stare","cigar","react","watch","other"];class Pe{constructor(e){I(this,"m");I(this,"k");I(this,"bits");this.m=e.m,this.k=e.k,this.bits=Uint8Array.from(atob(e.bitsBase64),t=>t.charCodeAt(0))}_hashes(e){let t=2166136261,o=16777619;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);t^=r,t=Math.imul(t,16777619),o+=r+(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24)}const l=i=>Math.abs((t+i*o)%this.m);return Array.from({length:this.k},(i,r)=>l(r))}has(e){const t=this._hashes(e);for(const o of t)if(!(this.bits[o>>3]>>(o&7)&1))return!1;return!0}}let j=null,U=null;async function We(){if(B||j||U)return U??Promise.resolve();U=(async()=>{try{const s=await fetch("/words/accepted.bloom",{cache:"force-cache"});if(s.ok){const e=await s.json();j=new Pe(e);return}}catch{}B=new Set(Oe);try{const s=await fetch("/words/accepted.json",{cache:"force-cache"});if(s.ok){const e=await s.json();B=new Set(e.map(t=>t.toLowerCase()))}}catch{}})(),await U}async function Me(s){await We();const e=s.toLowerCase();return j?j.has(e):B?B.has(e):!1}const H=new Map,re="word-valid-v1";function Fe(){try{return JSON.parse(localStorage.getItem(re)||"{}")}catch{return{}}}function ee(s){try{localStorage.setItem(re,JSON.stringify(s))}catch{}}const O=Fe();function He(s){return s.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}function ne(s,e=2e3){return new Promise((t,o)=>{const l=setTimeout(()=>o(new Error("timeout")),e);s.then(i=>{clearTimeout(l),t(i)},i=>{clearTimeout(l),o(i)})})}async function Be(s,e){const t=await ne(fetch(`/api/dict/entries?word=${encodeURIComponent(s)}`,{signal:e}),2e3);if(!t.ok)return!1;const o=await t.json();return Array.isArray(o)?o.length>0:!!(o!=null&&o.valid)}async function Ue(s,e){const t=await ne(fetch(`/api/wordnik/definitions?word=${encodeURIComponent(s)}`,{signal:e}),2e3);if(!t.ok)return!1;const o=await t.json();return Array.isArray(o)?o.length>0:!!(o!=null&&o.valid)}const ce={};function te(s){return(ce[s]??0)<Date.now()}function ae(s,e=10){ce[s]=Date.now()+e*6e4}async function je(s){const e=He(s);if(e.length!==5||/[^a-z]/.test(e))return{valid:!1,source:"none",reason:"format"};if(H.has(e))return H.get(e);if(O[e])return H.set(e,O[e]),O[e];if(await Me(e)){const r={valid:!0,source:"local"};return H.set(e,r),O[e]=r,ee(O),r}const t=new AbortController,o=[];te("dictionary")&&o.push(Be(e,t.signal).catch(r=>(r!=null&&r.message.includes("401")&&ae("dictionary"),!1))),te("wordnik")&&o.push(Ue(e,t.signal).catch(r=>(r!=null&&r.message.includes("401")&&ae("wordnik"),!1)));let l=!1;o.length&&(l=(await Promise.allSettled(o)).some(p=>p.status==="fulfilled"&&p.value===!0));const i=l?{valid:!0,source:"remote"}:{valid:!1,source:"none",reason:"not-found"};return H.set(e,i),O[e]=i,ee(O),i}const J=["QWERTYUIOP","ASDFGHJKL","ZXCVBNM"];function qe({onClose:s,onGameComplete:e}){var T;const[t,o]=n.useState({target:"",guesses:[],current:"",maxGuesses:6,done:!1,status:{},lastResults:[],showHint:!1}),[l,i]=n.useState(null),[r,p]=n.useState(!0),y=n.useCallback(async()=>{try{p(!0),console.log("ðŸ”„ Loading today's word...");const d=await Re();if(console.log("ðŸ“¦ Daily word data received:",d),d&&d.word&&d.word.length===5)o(c=>({...c,target:d.word.toUpperCase(),wordInfo:{definition:d.definition,difficulty:d.difficulty},showHint:!1})),console.log("âœ… Game target set to:",d.word.toUpperCase());else throw new Error("Invalid word data received")}catch(d){console.error("âŒ Failed to load daily word:",d);const c="CRANE";console.log("ðŸ”„ Using fallback word:",c),o(m=>({...m,target:c,wordInfo:{definition:"A large wading bird",difficulty:"easy"},showHint:!1}))}finally{p(!1),console.log("ðŸ Word loading complete")}},[]),b=n.useCallback(async d=>{try{const c=await je(d);return console.log(`ðŸ” Word validation: ${d.toUpperCase()} â†’ ${c.valid?"valid":"invalid"} [${c.source}]`),c.valid}catch(c){return console.warn("Word validation failed:",c),!1}},[]),v=n.useCallback((d,c)=>{const m=Array(5).fill("absent"),g=c.split("");for(let u=0;u<5;u++)d[u]===g[u]&&(m[u]="correct",g[u]="");for(let u=0;u<5;u++){if(m[u]==="correct")continue;const h=g.indexOf(d[u]);h!==-1&&(m[u]="present",g[h]="")}return m},[]),E=n.useCallback((d,c)=>{i({message:d,type:c}),setTimeout(()=>i(null),3e3)},[]),N=n.useCallback(()=>{y()},[y]),k=n.useCallback(d=>{t.done||t.current.length>=5||o(c=>({...c,current:c.current+d}))},[t.done,t.current.length]),A=n.useCallback(()=>{t.done||!t.current||o(d=>({...d,current:d.current.slice(0,-1)}))},[t.done,t.current]),w=n.useCallback(async()=>{if(console.log("ðŸŽ¯ Submit pressed:",{current:t.current,length:t.current.length,done:t.done,target:t.target}),t.done||t.current.length!==5){console.log("âŒ Submit blocked:",{done:t.done,length:t.current.length});return}console.log("ðŸ” Validating word:",t.current);const d=await b(t.current);if(console.log("âœ… Word validation result:",d),!d){console.log("âŒ Word invalid, showing notification"),E("Not in word list.","error"),o(h=>({...h,current:""}));return}const c=v(t.current,t.target),m={...t.status};for(let h=0;h<5;h++){const D=t.current[h];c[h]==="correct"?m[D]="correct":c[h]==="present"&&m[D]!=="correct"?m[D]="present":c[h]==="absent"&&!m[D]&&(m[D]="absent")}const g=[...t.guesses,t.current],u=[...t.lastResults,c];t.current===t.target?(E("ðŸŽ‰ Correct! Well done!","success"),o(h=>({...h,done:!0,guesses:g,lastResults:u,status:m})),e==null||e(!0,g.length)):g.length===t.maxGuesses?(E(`Game over! The word was: ${t.target}`,"error"),o(h=>({...h,done:!0,guesses:g,lastResults:u,status:m})),e==null||e(!1,g.length)):o(h=>({...h,guesses:g,lastResults:u,status:m,current:""}))},[t,b,v,E,e]);n.useEffect(()=>{const d=c=>{t.done||r||(c.key==="Backspace"?(c.preventDefault(),A()):c.key==="Enter"?(c.preventDefault(),w()):c.key.length===1&&c.key.match(/[a-zA-Z]/)&&(c.preventDefault(),k(c.key.toUpperCase())))};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t.done,r,A,w,k]),n.useEffect(()=>{N()},[N]);const C=()=>{const d=[];for(let c=0;c<t.maxGuesses;c++){const m=t.guesses[c]||(c===t.guesses.length?t.current:"");for(let g=0;g<5;g++){const u=m[g]||"",h=c<t.guesses.length?t.lastResults[c][g]:"";d.push(a.jsx("div",{className:`fw-tile ${h}`,children:u},`${c}-${g}`))}}return d},f=()=>{const d=[],c=[];for(const u of J[0]){const h=t.status[u]||"";c.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}c.push(a.jsx("button",{className:"fw-key fw-key-back",onClick:A,children:"âŒ«"},"backspace")),d.push(a.jsx("div",{className:"fw-kb-row",children:c},"row1"));const m=[];for(const u of J[1]){const h=t.status[u]||"";m.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}d.push(a.jsx("div",{className:"fw-kb-row",children:m},"row2"));const g=[];for(const u of J[2]){const h=t.status[u]||"";g.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}return g.push(a.jsx("button",{className:"fw-key fw-key-enter",onClick:w,children:"Enter"},"enter")),d.push(a.jsx("div",{className:"fw-kb-row",children:g},"row3")),d};return r?a.jsxs("div",{className:"flickword-game",children:[a.jsxs("div",{className:"fw-header",children:[a.jsx("h3",{children:"ðŸŽ¯ FlickWord"}),a.jsx("div",{className:"fw-stats",children:a.jsx("span",{className:"fw-streak",children:"Loading..."})})]}),a.jsxs("div",{className:"fw-loading",children:[a.jsx("div",{className:"fw-spinner"}),a.jsx("p",{children:"Loading today's word..."})]})]}):a.jsxs("div",{className:"flickword-game",children:[l&&a.jsx("div",{className:`fw-notification ${l.type}`,children:l.message}),((T=t.wordInfo)==null?void 0:T.definition)&&t.showHint&&a.jsx("div",{className:"fw-word-info",children:a.jsxs("p",{children:[a.jsx("strong",{children:"Hint:"})," ",t.wordInfo.definition]})}),a.jsx("div",{className:"fw-grid","aria-label":"FlickWord board",role:"group",children:C()}),a.jsx("div",{className:"fw-keyboard","aria-label":"Keyboard",role:"group",children:f()}),a.jsxs("div",{className:"fw-actions",children:[a.jsx("button",{className:"fw-btn fw-new-game",onClick:N,children:"New Game"}),s&&a.jsx("button",{className:"fw-btn fw-close",onClick:s,children:"Close"})]})]})}function le({children:s}){const[e,t]=n.useState(!1);return n.useEffect(()=>(t(!0),()=>t(!1)),[]),e?pe.createPortal(s,document.body):null}let W=null;function de(){if(W)return;const s=window.scrollY,e=document.body.style.cssText;document.body.style.cssText=`
    position: fixed;
    top: -${s}px;
    left: 0;
    right: 0;
    overflow: hidden;
  `,W={scrollY:s,bodyStyle:e}}function ue(){W&&(document.body.style.cssText=W.bodyStyle,window.scrollTo(0,W.scrollY),W=null)}function Ge({isOpen:s,onClose:e}){const[t,o]=n.useState(!1),[l,i]=n.useState(!1),[r,p]=n.useState({x:0,y:0}),y=n.useRef(null),b=n.useRef({x:0,y:0}),v=n.useRef({x:0,y:0});n.useEffect(()=>{const f=T=>{T.key==="Escape"&&s&&e()};return s&&(document.addEventListener("keydown",f),de()),()=>{document.removeEventListener("keydown",f),ue()}},[s,e]);const E=n.useCallback(f=>{const T=f.target;T.closest(".gm-header")&&!T.closest(".gm-close")&&(i(!0),b.current={x:f.clientX,y:f.clientY},v.current=r)},[r]),N=n.useCallback(f=>{if(l){const T=f.clientX-b.current.x,d=f.clientY-b.current.y,c=v.current.x+T,m=v.current.y+d,g=(window.innerWidth-500)/2,u=(window.innerHeight-750)/2;p({x:Math.max(-g,Math.min(g,c)),y:Math.max(-u,Math.min(u,m))})}},[l]),k=n.useCallback(()=>{l&&(v.current=r),i(!1)},[l,r]);n.useEffect(()=>{if(l)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",k)}},[l,N,k]);const A=n.useCallback((f,T)=>{console.log("ðŸŽ¯ FlickWord game completed:",{won:f,guesses:T});try{const d=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),c=d.flickword||{games:0,wins:0,losses:0,streak:0,maxStreak:0},m={games:c.games+1,wins:c.wins+(f?1:0),losses:c.losses+(f?0:1),streak:f?c.streak+1:0,maxStreak:f?Math.max(c.maxStreak,c.streak+1):c.maxStreak},g={...d,flickword:m};localStorage.setItem("flicklet-data",JSON.stringify(g)),localStorage.setItem("flickword:stats",JSON.stringify(m)),console.log("ðŸ’¾ FlickWord stats saved:",m)}catch(d){console.error("Failed to save FlickWord stats:",d)}window.handleFlickWordGameComplete&&window.handleFlickWordGameComplete(f,T),setTimeout(()=>{o(!0)},1500)},[]);if(n.useEffect(()=>{s&&(o(!1),p({x:0,y:0}))},[s]),!s)return null;const w={position:"fixed",top:"50%",left:"50%",transform:`translate(calc(-50% + ${r.x}px), calc(-50% + ${r.y}px))`,width:"500px",height:"750px",cursor:l?"grabbing":"default",zIndex:1e4},C={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:9999};return a.jsx(le,{children:a.jsxs("div",{className:"game-modal",role:"dialog","aria-modal":"true","aria-labelledby":"flickword-modal-title",children:[a.jsx("div",{className:"gm-overlay",style:C,onClick:e}),a.jsxs("div",{ref:y,className:`gm-dialog gm-draggable ${l?"gm-dragging":""}`,style:w,onMouseDown:E,children:[a.jsxs("header",{className:"gm-header gm-drag-handle",children:[a.jsx("h3",{id:"flickword-modal-title",children:"ðŸŽ¯ FlickWord"}),a.jsxs("div",{className:"fw-stats",children:[a.jsx("span",{className:"fw-streak",children:"Streak: 0"}),a.jsx("span",{className:"fw-timer",children:"Next: --:--"})]}),a.jsx("button",{className:"gm-close",type:"button","aria-label":"Close",onClick:e,children:"Ã—"})]}),a.jsx("main",{className:"gm-body",children:t?a.jsxs("div",{className:"game-stats-view",children:[a.jsx(ke,{}),a.jsxs("div",{className:"stats-actions",children:[a.jsx("button",{className:"btn-primary",onClick:()=>o(!1),children:"Play Again"}),a.jsx("button",{className:"btn-secondary",onClick:e,children:"Close"})]})]}):a.jsx(qe,{onClose:e,onGameComplete:A})})]})]})})}const st=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"})),Ye="flicklet:daily-trivia",Ve=[{name:"OpenTriviaDB",url:"https://opentdb.com/api.php?amount=10&category=10&difficulty=medium&type=multiple&encode=url3986",parser:s=>s.response_code===0&&s.results&&s.results.length>0?s.results.map(e=>{const t=decodeURIComponent(e.correct_answer),o=e.incorrect_answers.map(p=>decodeURIComponent(p)),i=[...[t,...o]].sort(()=>Math.random()-.5),r=i.indexOf(t);return{question:decodeURIComponent(e.question),options:i,correctAnswer:r,explanation:`The correct answer is ${t}.`,category:"Entertainment",difficulty:e.difficulty}}):[]},{name:"OpenTriviaDB (Easy)",url:"https://opentdb.com/api.php?amount=10&category=10&difficulty=easy&type=multiple&encode=url3986",parser:s=>s.response_code===0&&s.results&&s.results.length>0?s.results.map(e=>{const t=decodeURIComponent(e.correct_answer),o=e.incorrect_answers.map(p=>decodeURIComponent(p)),i=[...[t,...o]].sort(()=>Math.random()-.5),r=i.indexOf(t);return{question:decodeURIComponent(e.question),options:i,correctAnswer:r,explanation:`The correct answer is ${t}.`,category:"Entertainment",difficulty:"easy"}}):[]}];async function _e(){for(const s of Ve)try{console.log(`ðŸ§  Trying ${s.name}...`);const e=await fetch(s.url,{method:"GET",headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json(),o=s.parser(t);if(o&&o.length>0)return console.log(`âœ… Successfully fetched ${o.length} questions from ${s.name}`),o}catch(e){console.warn(`âŒ ${s.name} failed:`,e)}return[]}function Je(){try{localStorage.removeItem(Ye),console.log("ðŸ—‘ï¸ Cleared trivia cache")}catch(s){console.warn("Failed to clear trivia cache:",s)}}async function Ke(){Je(),console.log("ðŸ”„ Force fetching fresh trivia from API...");const s=await _e();if(s&&s.length>0)return console.log("âœ… Got fresh trivia from API:",s.length,"questions"),s;const e=[{question:"Which movie won Best Picture in 2024?",options:["Oppenheimer","Barbie","Killers of the Flower Moon","Poor Things"],correctAnswer:0,explanation:"Oppenheimer won Best Picture at the 96th Academy Awards.",category:"Awards",difficulty:"medium"},{question:"What is the highest-grossing animated movie?",options:["Frozen II","The Lion King (2019)","Incredibles 2","Toy Story 4"],correctAnswer:1,explanation:"The Lion King (2019) is the highest-grossing animated movie.",category:"Box Office",difficulty:"easy"},{question:'Which streaming service produced "The Mandalorian"?',options:["Netflix","Disney+","Amazon Prime","HBO Max"],correctAnswer:1,explanation:"The Mandalorian is a Disney+ original series.",category:"Streaming",difficulty:"easy"},{question:'Who directed "Dune" (2021)?',options:["Denis Villeneuve","Christopher Nolan","Ridley Scott","James Cameron"],correctAnswer:0,explanation:"Denis Villeneuve directed Dune (2021).",category:"Directors",difficulty:"medium"},{question:'What year was "Top Gun: Maverick" released?',options:["2020","2021","2022","2023"],correctAnswer:2,explanation:"Top Gun: Maverick was released in 2022.",category:"History",difficulty:"easy"}];return console.log("ðŸ”„ Using fresh test questions"),e}function $e({onClose:s,onGameComplete:e}){const t=xe(),[o,l]=n.useState([]),[i,r]=n.useState(0),[p,y]=n.useState(null),[b,v]=n.useState(0),[E,N]=n.useState("loading"),[k,A]=n.useState(!1),[w,C]=n.useState(!1),f=[{id:"1",question:"Which movie won the Academy Award for Best Picture in 2023?",options:["Everything Everywhere All at Once","The Banshees of Inisherin","Top Gun: Maverick","Avatar: The Way of Water"],correctAnswer:0,explanation:"Everything Everywhere All at Once won Best Picture at the 95th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"2",question:"What is the highest-grossing movie of all time?",options:["Avatar","Avengers: Endgame","Titanic","Star Wars: The Force Awakens"],correctAnswer:0,explanation:"Avatar (2009) holds the record for highest-grossing movie worldwide.",category:"Box Office",difficulty:"easy"},{id:"3",question:'Which streaming service produced "Stranger Things"?',options:["Hulu","Netflix","Amazon Prime","Disney+"],correctAnswer:1,explanation:"Stranger Things is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"4",question:'Who directed "The Dark Knight"?',options:["Christopher Nolan","Zack Snyder","Tim Burton","Martin Scorsese"],correctAnswer:0,explanation:"Christopher Nolan directed The Dark Knight (2008).",category:"Directors",difficulty:"medium"},{id:"5",question:'What year was the first "Star Wars" movie released?',options:["1975","1977","1979","1981"],correctAnswer:1,explanation:"Star Wars: Episode IV - A New Hope was released in 1977.",category:"History",difficulty:"medium"},{id:"6",question:'Which actor played Jack in "Titanic"?',options:["Brad Pitt","Leonardo DiCaprio","Matt Damon","Ryan Gosling"],correctAnswer:1,explanation:"Leonardo DiCaprio played Jack Dawson in Titanic (1997).",category:"Actors",difficulty:"easy"},{id:"7",question:'What is the name of the main character in "The Matrix"?',options:["Neo","Morpheus","Trinity","Agent Smith"],correctAnswer:0,explanation:"Neo (played by Keanu Reeves) is the main character in The Matrix.",category:"Characters",difficulty:"easy"},{id:"8",question:'Which movie features the quote "May the Force be with you"?',options:["Star Trek","Star Wars","Guardians of the Galaxy","Blade Runner"],correctAnswer:1,explanation:"This iconic quote is from the Star Wars franchise.",category:"Quotes",difficulty:"easy"},{id:"9",question:'Who composed the music for "Jaws"?',options:["John Williams","Hans Zimmer","Danny Elfman","Alan Silvestri"],correctAnswer:0,explanation:"John Williams composed the iconic Jaws theme.",category:"Music",difficulty:"medium"},{id:"10",question:"What is the highest-rated movie on IMDb?",options:["The Godfather","The Shawshank Redemption","The Dark Knight","Pulp Fiction"],correctAnswer:1,explanation:"The Shawshank Redemption currently holds the #1 spot on IMDb.",category:"Ratings",difficulty:"medium"},{id:"11",question:"Which movie won Best Picture in 2020?",options:["1917","Joker","Parasite","Once Upon a Time in Hollywood"],correctAnswer:2,explanation:"Parasite became the first non-English language film to win Best Picture.",category:"Awards",difficulty:"medium"},{id:"12",question:'What is the name of the dinosaur in "Jurassic Park"?',options:["Rex","T-Rex","Rexy","Tyrannosaurus"],correctAnswer:2,explanation:'The T-Rex in Jurassic Park is affectionately called "Rexy".',category:"Characters",difficulty:"easy"},{id:"13",question:'Which director made "Inception"?',options:["Steven Spielberg","Christopher Nolan","Martin Scorsese","Quentin Tarantino"],correctAnswer:1,explanation:"Christopher Nolan directed Inception (2010).",category:"Directors",difficulty:"easy"},{id:"14",question:'What year was "The Lion King" (animated) released?',options:["1992","1994","1996","1998"],correctAnswer:1,explanation:"The animated Lion King was released in 1994.",category:"History",difficulty:"medium"},{id:"15",question:"Which movie features the character Tony Stark?",options:["Batman","Iron Man","Superman","Spider-Man"],correctAnswer:1,explanation:"Tony Stark is the alter ego of Iron Man.",category:"Characters",difficulty:"easy"},{id:"16",question:"What is the highest-grossing movie franchise?",options:["Marvel Cinematic Universe","Star Wars","Harry Potter","Fast & Furious"],correctAnswer:0,explanation:"The Marvel Cinematic Universe is the highest-grossing movie franchise.",category:"Box Office",difficulty:"medium"},{id:"17",question:"Which actor played Wolverine in the X-Men movies?",options:["Ryan Reynolds","Hugh Jackman","Chris Evans","Robert Downey Jr."],correctAnswer:1,explanation:"Hugh Jackman played Wolverine in the X-Men franchise.",category:"Actors",difficulty:"easy"},{id:"18",question:'What year was "The Matrix" released?',options:["1997","1999","2001","2003"],correctAnswer:1,explanation:"The Matrix was released in 1999.",category:"History",difficulty:"medium"},{id:"19",question:"Which movie won Best Picture in 2019?",options:["Black Panther","Bohemian Rhapsody","Green Book","A Star Is Born"],correctAnswer:2,explanation:"Green Book won Best Picture at the 91st Academy Awards.",category:"Awards",difficulty:"medium"},{id:"20",question:'What is the name of the main character in "Forrest Gump"?',options:["Forrest Gump","Tom Hanks","Jenny","Bubba"],correctAnswer:0,explanation:"Forrest Gump is the title character played by Tom Hanks.",category:"Characters",difficulty:"easy"},{id:"21",question:'Which streaming service produced "The Crown"?',options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"The Crown is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"22",question:'Who directed "Pulp Fiction"?',options:["Martin Scorsese","Quentin Tarantino","Steven Spielberg","Christopher Nolan"],correctAnswer:1,explanation:"Quentin Tarantino directed Pulp Fiction (1994).",category:"Directors",difficulty:"medium"},{id:"23",question:"What is the highest-rated TV show on IMDb?",options:["Breaking Bad","The Wire","Game of Thrones","The Sopranos"],correctAnswer:0,explanation:"Breaking Bad currently holds the #1 spot for TV shows on IMDb.",category:"Ratings",difficulty:"medium"},{id:"24",question:`Which movie features the quote "I'll be back"?`,options:["Terminator","Predator","Total Recall","Commando"],correctAnswer:0,explanation:"This iconic quote is from The Terminator (1984).",category:"Quotes",difficulty:"easy"},{id:"25",question:'What year was "Jurassic Park" released?',options:["1991","1993","1995","1997"],correctAnswer:1,explanation:"Jurassic Park was released in 1993.",category:"History",difficulty:"medium"},{id:"26",question:`Which actor played Jack Nicholson's character in "The Shining"?`,options:["Jack Nicholson","Shelley Duvall","Danny Lloyd","Scatman Crothers"],correctAnswer:0,explanation:"Jack Nicholson played Jack Torrance in The Shining.",category:"Actors",difficulty:"easy"},{id:"27",question:'What is the name of the main character in "Casablanca"?',options:["Rick Blaine","Ilsa Lund","Victor Laszlo","Captain Renault"],correctAnswer:0,explanation:"Rick Blaine (played by Humphrey Bogart) is the main character.",category:"Characters",difficulty:"medium"},{id:"28",question:"Which movie won Best Picture in 2018?",options:["The Shape of Water","Three Billboards Outside Ebbing, Missouri","Dunkirk","Get Out"],correctAnswer:0,explanation:"The Shape of Water won Best Picture at the 90th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"29",question:"What is the highest-grossing animated movie franchise?",options:["Toy Story","Shrek","Despicable Me","Frozen"],correctAnswer:2,explanation:"The Despicable Me franchise (including Minions) is the highest-grossing animated franchise.",category:"Box Office",difficulty:"medium"},{id:"30",question:'Which streaming service produced "The Mandalorian"?',options:["Netflix","Disney+","Amazon Prime","HBO Max"],correctAnswer:1,explanation:"The Mandalorian is a Disney+ original series.",category:"Streaming",difficulty:"easy"},{id:"31",question:'Who composed the music for "Star Wars"?',options:["John Williams","Hans Zimmer","Danny Elfman","Alan Silvestri"],correctAnswer:0,explanation:"John Williams composed the iconic Star Wars theme.",category:"Music",difficulty:"easy"},{id:"32",question:'What year was "Titanic" released?',options:["1995","1997","1999","2001"],correctAnswer:1,explanation:"Titanic was released in 1997.",category:"History",difficulty:"easy"},{id:"33",question:"Which movie features the character Hannibal Lecter?",options:["Silence of the Lambs","Hannibal","Red Dragon","All of the above"],correctAnswer:3,explanation:"Hannibal Lecter appears in all three movies.",category:"Characters",difficulty:"medium"},{id:"34",question:'What is the name of the main character in "Goodfellas"?',options:["Henry Hill","Jimmy Conway","Tommy DeVito","Paul Cicero"],correctAnswer:0,explanation:"Henry Hill (played by Ray Liotta) is the main character.",category:"Characters",difficulty:"medium"},{id:"35",question:"Which movie won Best Picture in 2017?",options:["La La Land","Moonlight","Arrival","Hidden Figures"],correctAnswer:1,explanation:"Moonlight won Best Picture at the 89th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"36",question:"What is the highest-grossing R-rated movie?",options:["Deadpool","Joker","It","The Matrix"],correctAnswer:1,explanation:"Joker (2019) is the highest-grossing R-rated movie.",category:"Box Office",difficulty:"medium"},{id:"37",question:'Which streaming service produced "Stranger Things"?',options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"Stranger Things is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"38",question:'Who directed "The Godfather"?',options:["Martin Scorsese","Francis Ford Coppola","Steven Spielberg","Alfred Hitchcock"],correctAnswer:1,explanation:"Francis Ford Coppola directed The Godfather (1972).",category:"Directors",difficulty:"medium"},{id:"39",question:'What year was "The Lion King" (live-action) released?',options:["2017","2019","2021","2023"],correctAnswer:1,explanation:"The live-action Lion King was released in 2019.",category:"History",difficulty:"easy"},{id:"40",question:"Which movie features the character Rocky Balboa?",options:["Rocky","Rambo","Creed","Both Rocky and Creed"],correctAnswer:3,explanation:"Rocky Balboa appears in both the Rocky and Creed franchises.",category:"Characters",difficulty:"medium"},{id:"41",question:'What is the name of the main character in "The Godfather"?',options:["Vito Corleone","Michael Corleone","Sonny Corleone","Fredo Corleone"],correctAnswer:1,explanation:"Michael Corleone (played by Al Pacino) is the main character.",category:"Characters",difficulty:"medium"},{id:"42",question:"Which movie won Best Picture in 2016?",options:["La La Land","Moonlight","Arrival","Hidden Figures"],correctAnswer:0,explanation:"La La Land won Best Picture at the 89th Academy Awards (though Moonlight was the actual winner).",category:"Awards",difficulty:"hard"},{id:"43",question:"What is the highest-grossing movie of 2023?",options:["Barbie","Oppenheimer","Spider-Man: Across the Spider-Verse","Guardians of the Galaxy Vol. 3"],correctAnswer:0,explanation:"Barbie was the highest-grossing movie of 2023.",category:"Box Office",difficulty:"easy"},{id:"44",question:`Which streaming service produced "The Queen's Gambit"?`,options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"The Queen's Gambit is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"45",question:'Who directed "Inception"?',options:["Christopher Nolan","Steven Spielberg","Martin Scorsese","Quentin Tarantino"],correctAnswer:0,explanation:"Christopher Nolan directed Inception (2010).",category:"Directors",difficulty:"easy"},{id:"46",question:'What year was "Avatar" released?',options:["2007","2009","2011","2013"],correctAnswer:1,explanation:"Avatar was released in 2009.",category:"History",difficulty:"easy"},{id:"47",question:"Which movie features the character Indiana Jones?",options:["Raiders of the Lost Ark","Indiana Jones and the Temple of Doom","Indiana Jones and the Last Crusade","All of the above"],correctAnswer:3,explanation:"Indiana Jones appears in all three original movies.",category:"Characters",difficulty:"medium"},{id:"48",question:'What is the name of the main character in "Casino"?',options:["Sam Rothstein","Nicky Santoro","Ginger McKenna","Lester Diamond"],correctAnswer:0,explanation:"Sam Rothstein (played by Robert De Niro) is the main character.",category:"Characters",difficulty:"medium"},{id:"49",question:"Which movie won Best Picture in 2015?",options:["Birdman","Boyhood","The Grand Budapest Hotel","Whiplash"],correctAnswer:0,explanation:"Birdman won Best Picture at the 87th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"50",question:"What is the highest-grossing movie of all time (unadjusted)?",options:["Avatar","Avengers: Endgame","Titanic","Star Wars: The Force Awakens"],correctAnswer:0,explanation:"Avatar (2009) holds the record for highest-grossing movie worldwide.",category:"Box Office",difficulty:"easy"}],T=()=>new Date().toISOString().slice(0,10),d=(S=!1)=>{const x=T().split("-").join(""),R=parseInt(x,10),$=Math.floor(R/1e4)%3,z=S?50:5,G=[];for(let F=0;F<z;F++){const he=($*z+F)%f.length;G.push(f[he])}return console.log(`ðŸŽ¯ Today's trivia questions (${S?"Pro":"Free"} user, cycle day ${$}):`,G.map(F=>F.id)),G};n.useEffect(()=>{C(t.pro.isPro),console.log("ðŸŽ¯ Pro user status:",t.pro.isPro)},[t.pro]),n.useEffect(()=>{E==="loading"&&(async()=>{try{console.log(`ðŸ§  Loading fresh trivia questions for ${w?"Pro":"Free"} user...`);const x=(await Ke()).map((R,M)=>({id:`fresh_${M}`,question:R.question,options:R.options,correctAnswer:R.correctAnswer,explanation:R.explanation||void 0,category:R.category,difficulty:R.difficulty}));if(w&&x.length<50){const R=d(!0).slice(x.length).map(M=>({...M,explanation:M.explanation||void 0}));x.push(...R)}console.log(`âœ… Loaded ${x.length} trivia questions for ${w?"Pro":"Free"} user`),l(x),N("playing")}catch(L){console.error("âŒ Failed to load fresh trivia questions:",L);const x=d(w);l(x),N("playing")}})()},[E,w]);const c=n.useCallback(S=>{p===null&&(y(S),A(!0),S===o[i].correctAnswer&&v(L=>L+1))},[p,o,i]),m=n.useCallback(()=>{i<o.length-1?(r(S=>S+1),y(null),A(!1)):(N("completed"),e==null||e(b,o.length))},[i,o.length,b,e]),g=n.useCallback(()=>{r(0),y(null),v(0),A(!1),N("loading")},[]),u=S=>S>=80?"text-green-400":S>=60?"text-yellow-400":"text-red-400";if(E==="loading")return a.jsx("div",{className:"trivia-game",children:a.jsxs("div",{className:"trivia-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading trivia questions..."})]})});if(E==="completed"){const S=Math.round(b/o.length*100);return a.jsx("div",{className:"trivia-game",children:a.jsxs("div",{className:"trivia-completed",children:[a.jsx("h3",{children:"ðŸŽ‰ Quiz Complete!"}),a.jsx("div",{className:"score-display",children:a.jsxs("div",{className:"score-circle",children:[a.jsxs("span",{className:`score-percentage ${u(S)}`,children:[S,"%"]}),a.jsxs("span",{className:"score-fraction",children:[b,"/",o.length]})]})}),a.jsxs("div",{className:"score-message",children:[S>=80&&a.jsx("p",{children:"ðŸ† Excellent! You're a movie trivia master!"}),S>=60&&S<80&&a.jsx("p",{children:"ðŸ‘ Good job! You know your movies!"}),S<60&&a.jsx("p",{children:"ðŸ“š Keep watching! You'll get better!"})]}),a.jsxs("div",{className:"completion-actions",children:[a.jsx("button",{className:"btn-primary",onClick:g,children:"Play Again"}),s&&a.jsx("button",{className:"btn-secondary",onClick:s,children:"Close"})]}),!w&&a.jsx("div",{className:"pro-upsell",children:a.jsx("p",{children:"ðŸ”’ Want more questions? Upgrade to Pro for 50 daily trivia questions!"})})]})})}const h=o[i],D=(i+1)/o.length*100;return!o.length||!h?a.jsxs("div",{className:"trivia-game",children:[a.jsx("div",{className:"trivia-header",children:a.jsx("h3",{children:"ðŸ§  Daily Trivia"})}),a.jsx("div",{className:"trivia-content",children:a.jsx("p",{children:"Loading questions..."})})]}):a.jsxs("div",{className:"trivia-game",children:[a.jsxs("div",{className:"trivia-header",children:[a.jsxs("h3",{children:["ðŸ§  Daily Trivia ",w&&a.jsx("span",{className:"pro-badge",children:"PRO"})]}),a.jsxs("div",{className:"trivia-progress",children:[a.jsxs("span",{children:[i+1,"/",o.length]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${D}%`}})})]})]}),a.jsxs("div",{className:"trivia-question",children:[a.jsxs("div",{className:"question-meta",children:[a.jsx("span",{className:"category",children:h.category}),a.jsx("span",{className:"difficulty",children:h.difficulty})]}),a.jsx("h4",{children:h.question})]}),a.jsx("div",{className:"trivia-options",children:h.options.map((S,L)=>{let x="option-btn";return p!==null&&(L===h.correctAnswer?x+=" correct":L===p&&L!==h.correctAnswer?x+=" incorrect":x+=" disabled"),a.jsx("button",{className:x,onClick:()=>c(L),disabled:p!==null,children:S},L)})}),k&&h.explanation&&a.jsx("div",{className:"trivia-explanation",children:a.jsx("p",{children:h.explanation})}),a.jsxs("div",{className:"trivia-actions",children:[p!==null&&a.jsx("button",{className:"btn-primary",onClick:m,children:i<o.length-1?"Next Question":"Finish Quiz"}),s&&a.jsx("button",{className:"btn-secondary",onClick:s,children:"Close"})]})]})}function ze({isOpen:s,onClose:e}){const[t,o]=n.useState(!1),[l,i]=n.useState({x:0,y:0}),r=n.useRef(null),p=n.useRef({x:0,y:0}),y=n.useRef({x:0,y:0});n.useEffect(()=>{const A=w=>{w.key==="Escape"&&s&&e()};return s&&(document.addEventListener("keydown",A),de()),()=>{document.removeEventListener("keydown",A),ue()}},[s,e]);const b=n.useCallback(A=>{const w=A.target;w.closest(".gm-header")&&!w.closest(".gm-close")&&(o(!0),p.current={x:A.clientX,y:A.clientY},y.current=l)},[l]),v=n.useCallback(A=>{if(t){const w=A.clientX-p.current.x,C=A.clientY-p.current.y,f=y.current.x+w,T=y.current.y+C,d=(window.innerWidth-500)/2,c=(window.innerHeight-750)/2;i({x:Math.max(-d,Math.min(d,f)),y:Math.max(-c,Math.min(c,T))})}},[t]),E=n.useCallback(()=>{t&&(y.current=l),o(!1)},[t,l]);if(n.useEffect(()=>{if(t)return document.addEventListener("mousemove",v),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",E)}},[t,v,E]),n.useEffect(()=>{s&&i({x:0,y:0})},[s]),!s)return null;const N={position:"fixed",top:"50%",left:"50%",transform:`translate(calc(-50% + ${l.x}px), calc(-50% + ${l.y}px))`,width:"500px",height:"750px",cursor:t?"grabbing":"default",zIndex:1e4},k={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:9999};return a.jsx(le,{children:a.jsxs("div",{className:"game-modal",role:"dialog","aria-modal":"true","aria-labelledby":"trivia-modal-title",children:[a.jsx("div",{className:"gm-overlay",style:k,onClick:e}),a.jsxs("div",{ref:r,className:`gm-dialog gm-draggable ${t?"gm-dragging":""}`,style:N,onMouseDown:b,children:[a.jsxs("header",{className:"gm-header gm-drag-handle",children:[a.jsx("h3",{id:"trivia-modal-title",children:"ðŸ§  Daily Trivia"}),a.jsx("button",{className:"gm-close",type:"button","aria-label":"Close",onClick:e,children:"Ã—"})]}),a.jsx("main",{className:"gm-body",children:a.jsx($e,{onClose:e})})]})]})})}const ot=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{ke as F,at as T,xe as a,ie as b,Ze as c,et as d,st as e,ot as f,tt as g,a as j,de as l,V as s,ue as u};

```

## android\app\src\main\assets\public\assets\index-e89a78ae.js
```
import{b as D,j as e,a as G,g as P,s as q}from"./games-23f18348.js";import{a as le,r as u,R as M}from"./react-vendor-b1791c80.js";import{u as pt,r as W,f as B,q as z,L as _,t as Ht,v as ve,w as se,x as V,_ as U,y as zt,m as qt,z as Yt,A as Gt,e as Ye,B as Kt,C as Qt}from"./modals-5fe29d8c.js";import{u as Te}from"./settings-b3931a55.js";import{C as bt,u as Ee,s as Xt,m as Y,f as Zt,O as Ae,M as Jt,e as re,a as es,g as yt,b as ce,o as X,S as ts,Q as ss,i as rs,c as ns,d as os,F as as}from"./pages-3e9569ff.js";import{C as Ge}from"./community-522739e7.js";import"./firebase-auth-41bcd574.js";import"./firebase-firestore-b7b9ad2a.js";import"./firebase-app-3e6db42c.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Se={},Ke=le;Se.createRoot=Ke.createRoot,Se.hydrateRoot=Ke.hydrateRoot;function Qe({current:t,onChange:r}){const n=D(),s=pt(),o=W("watching"),i=W("wishlist"),d=W("watched"),c=o.length,l=i.length,m=d.length,a=Array.isArray(s)?s.length:0,x=[{id:"watching",label:n.currentlyWatching,count:c},{id:"want",label:n.wantToWatch,count:l},{id:"watched",label:n.watched,count:m},{id:"mylists",label:n.myLists||"My Lists",count:a},{id:"discovery",label:n.discovery,count:0}];return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"w-full px-4 py-4",children:e.jsx("nav",{"aria-label":"Primary",className:"w-full",children:e.jsx("div",{className:"flex items-center gap-4 w-full",children:e.jsxs("div",{role:"tablist","aria-label":"Navigation",className:"flex gap-4 w-full",children:[e.jsx("button",{"aria-current":t==="home"?"page":void 0,onClick:()=>r("home"),className:"px-6 py-3 rounded-xl text-base font-semibold transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md shadow-sm flex-1 justify-center",style:{backgroundColor:t==="home"?"var(--accent)":"var(--card)",color:t==="home"?"white":"var(--text)",border:t==="home"?"none":"1px solid var(--line)"},children:n.home}),x.map(f=>e.jsxs("button",{role:"tab","aria-selected":t===f.id,onClick:()=>r(f.id),className:"px-6 py-3 rounded-xl text-base font-semibold transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md shadow-sm flex items-center justify-center min-w-0 flex-1",style:{backgroundColor:t===f.id?"var(--accent)":"var(--card)",color:t===f.id?"white":"var(--text)",border:t===f.id?"none":"1px solid var(--line)",flex:"1 1 0%"},children:[e.jsx("span",{className:"truncate",children:f.label}),e.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-sm font-bold flex-shrink-0",style:{backgroundColor:f.count>0?t===f.id?"rgba(255,255,255,0.2)":"var(--accent)":"transparent",color:f.count>0?"white":"transparent",minWidth:"20px",textAlign:"center"},children:f.count>0?f.count:""})]},f.id))]})})})})})}const Le=80,vt=u.createContext({viewportOffset:0}),_e=()=>u.useContext(vt);function Xe({current:t,onChange:r}){var y;const n=D(),s=pt(),[o,i]=u.useState(0);B("ðŸ“± MobileTabs rendering:",{current:t,screenWidth:window.innerWidth,screenHeight:window.innerHeight,viewportHeight:((y=window.visualViewport)==null?void 0:y.height)||"no visualViewport",scrollY:window.scrollY,bodyHeight:document.body.scrollHeight,viewportOffset:o}),u.useEffect(()=>{if(!window.visualViewport){B("ðŸ“± Visual Viewport API not supported, using safe fallback");const S=()=>{B("ðŸ“± Fallback resize detected, checking for keyboard");const A=window.innerHeight-window.screen.height;Math.abs(A)>100?i(Math.abs(A)):i(0)},k=()=>{B("ðŸ“± Orientation change detected"),setTimeout(()=>i(0),100)},T=()=>{B("ðŸ“± Visibility change detected"),document.hidden&&i(0)};return window.addEventListener("resize",S),window.addEventListener("orientationchange",k),document.addEventListener("visibilitychange",T),()=>{window.removeEventListener("resize",S),window.removeEventListener("orientationchange",k),document.removeEventListener("visibilitychange",T)}}let g=0,j=null;const p=()=>{j||(j=setTimeout(()=>{var E;j=null;const S=((E=window.visualViewport)==null?void 0:E.height)||window.innerHeight,k=window.innerHeight,T=window.visualViewport?window.visualViewport.offsetTop:0,A=Math.abs(T-g);if(B("ðŸ“± Visual viewport changed:",{visualHeight:S,screenHeight:k,currentOffsetTop:T,prevOffsetTop:g,offsetTopDelta:A,keyboardOpen:A<=50&&k-S>50}),A>50){B("ðŸ“± Toolbar animation detected, ignoring offset change"),i(0),g=T;return}const b=Math.max(0,k-S);i(b>50?b:0),g=T},50))};let h=null;const w=()=>{h&&clearTimeout(h),h=setTimeout(()=>{if(window.visualViewport&&Math.abs(window.visualViewport.offsetTop)<50){const S=document.querySelector(".mobile-nav");S&&(S.style.bottom="0px")}},100)};return p(),window.visualViewport.addEventListener("resize",p),window.addEventListener("scroll",w,{passive:!0}),()=>{var S;(S=window.visualViewport)==null||S.removeEventListener("resize",p),window.removeEventListener("scroll",w),j&&clearTimeout(j),h&&clearTimeout(h)}},[]);const d=W("watching"),c=W("wishlist"),l=W("watched"),m=d.length,a=c.length,x=l.length,f=Array.isArray(s)?s.length:0,N=[{id:"watching",label:"Watching",count:m},{id:"want",label:"Wishlist",count:a},{id:"watched",label:"Watched",count:x},{id:"mylists",label:"Lists",count:f},{id:"discovery",label:"Discover",count:0}];return e.jsx(vt.Provider,{value:{viewportOffset:o},children:e.jsx("nav",{className:"mobile-nav fixed left-0 right-0 z-nav px-1 py-2",style:{paddingBottom:"calc(8px + env(safe-area-inset-bottom))",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",backgroundColor:"var(--bg)",borderTop:"1px solid var(--line)",height:`${Le}px`,position:"fixed",bottom:o,left:0,right:0,zIndex:9999},children:e.jsxs("div",{className:"flex items-center justify-around h-full",children:[e.jsxs("button",{onClick:()=>r("home"),className:"flex flex-col items-center justify-center p-2 min-h-[60px] transition-all duration-200 ease-out relative flex-1",style:{color:t==="home"?"var(--accent)":"var(--muted)",fontWeight:t==="home"?"600":"500"},children:[e.jsx("span",{className:"text-sm font-medium",children:n.home}),t==="home"&&e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full",style:{backgroundColor:"var(--accent)"}})]}),e.jsx("div",{className:"h-8 w-px",style:{backgroundColor:"var(--line)"}}),N.map((g,j)=>e.jsxs(M.Fragment,{children:[e.jsxs("button",{onClick:()=>r(g.id),className:"flex flex-col items-center justify-center p-2 min-h-[60px] transition-all duration-200 ease-out relative flex-1",style:{color:t===g.id?"var(--accent)":"var(--muted)",fontWeight:t===g.id?"600":"500"},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:g.label}),g.count>0&&e.jsx("span",{className:"bg-gray-500 text-white text-xs font-bold rounded-full min-w-[16px] h-4 flex items-center justify-center px-1",style:{fontSize:"10px"},children:g.count})]}),t===g.id&&e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full",style:{backgroundColor:"var(--accent)"}})]}),j<N.length-1&&e.jsx("div",{className:"h-8 w-px",style:{backgroundColor:"var(--line)"}})]},g.id))]})})})}const is="0.1.11";function de(){const[t,r]=u.useState(null),[n,s]=u.useState(!0),[o,i]=u.useState(!1);return u.useEffect(()=>{const m=z.getCurrentUser();r(m);const a=z.isAuthStateInitialized();return i(a),a&&s(!1),z.subscribe(f=>{r(f);const N=z.isAuthStateInitialized();i(N),N&&s(!1)})},[]),{user:t,loading:n,authInitialized:o,signInWithProvider:async m=>{try{await z.signInWithProvider(m)}catch(a){throw console.error("Sign-in failed:",a),a}},signInWithEmail:async(m,a)=>{try{await z.signInWithEmail(m,a)}catch(x){throw console.error("Email sign-in failed:",x),x}},signOut:async()=>{try{await z.signOut()}catch(m){throw console.error("Sign-out failed:",m),m}},isAuthenticated:!!t}}function wt({children:t}){const[r,n]=u.useState(!1);return u.useEffect(()=>n(!0),[]),!r||typeof document>"u"?null:le.createPortal(t,document.body)}function jt({isOpen:t,onClose:r}){const{signInWithProvider:n}=de(),s=D(),[o,i]=u.useState(null),[d,c]=u.useState(null);if(u.useEffect(()=>{if(!t)return;const{style:a}=document.documentElement,x=a.overflow;return a.overflow="hidden",()=>{a.overflow=x}},[t]),!t)return null;const l=async a=>{i(a),c(null);try{await n(a),r()}catch(x){console.error(`${a} sign-in failed:`,x),c(x.message||"Sign-in failed. Please try again.")}finally{i(null)}},m=()=>{r()};return e.jsx(wt,{children:e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":s.signIn||"Sign In",className:"auth-modal-overlay fixed inset-0 backdrop-blur-sm flex items-start justify-center pt-48 p-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsxs("div",{className:"auth-modal-content rounded-xl w-full max-w-md p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:s.signIn||"Sign In"}),e.jsx("button",{onClick:r,className:"transition-colors",style:{color:"var(--muted)"},onMouseEnter:a=>a.currentTarget.style.color="var(--text)",onMouseLeave:a=>a.currentTarget.style.color="var(--muted)","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d&&e.jsx("div",{className:"mb-4 p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:d}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>l("google"),disabled:o==="google",className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[o==="google"?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:s.signInWithGoogle||"Sign in with Google"})]}),e.jsxs("button",{onClick:()=>l("apple"),disabled:o==="apple",className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[o==="apple"?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),e.jsx("span",{children:s.signInWithApple||"Sign in with Apple"})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{children:s.signInWithEmail||"Sign in with Email"})]})]}),e.jsx("div",{className:"mt-4 text-xs text-center",style:{color:"var(--muted)"},children:s.signInDescription||"Sign in to sync your lists across devices"})]})})})}function ls(){const{user:t,signOut:r,isAuthenticated:n}=de(),s=D(),[o,i]=u.useState(!1),d=async()=>{if(n)try{await r()}catch(m){console.error("Sign-out failed:",m)}else i(!0)},c=()=>{var m;return t?t.displayName||((m=t.email)==null?void 0:m.split("@")[0])||"User":s.signIn||"Sign In"},l=()=>n?s.clickToSignOut||"Click to sign out":s.signInHere||"Sign in here";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"text-xs",style:{color:"var(--muted)"},children:l()}),e.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg transition-colors hover:scale-105",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},title:n?`${s.signedInAs||"Signed in as"} ${t==null?void 0:t.email}. ${s.clickToSignOut||"Click to sign out"}.`:s.clickToSignIn||"Click to sign in",children:n?`ðŸ‘¤ ${c()}`:c()})]}),e.jsx(jt,{isOpen:o,onClose:()=>i(!1)})]})}function cs(){const{username:t}=Te(),r=G();if(!t)return null;const n=P("welcome",r.personalityLevel,{username:t});return e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:n})}function ds({isOpen:t,onClose:r}){const{user:n}=de(),{updateUsername:s,skipUsernamePrompt:o}=Te(),i=D(),[d,c]=u.useState(""),[l,m]=u.useState(!1),[a,x]=u.useState(null);if(u.useEffect(()=>{if(!t)return;const{style:g}=document.documentElement,j=g.overflow;return g.overflow="hidden",()=>{g.overflow=j}},[t]),!t)return null;const f=async g=>{if(g.preventDefault(),!d.trim()){x(i.usernameRequired||"Username is required");return}m(!0),x(null);try{await s(d.trim()),r()}catch(j){console.error("Failed to update username:",j),x(j.message||"Failed to save username")}finally{m(!1)}},N=async()=>{m(!0),x(null);try{await o(),r()}catch(g){console.error("Failed to skip username prompt:",g),x(g.message||"Failed to skip username prompt")}finally{m(!1)}},y=()=>{var g;return n?n.displayName||((g=n.email)==null?void 0:g.split("@")[0])||"User":""};return e.jsx(wt,{children:e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":i.whatShouldWeCallYou||"Choose a username",className:"username-prompt-modal-overlay fixed inset-0 backdrop-blur-sm flex items-start justify-center pt-48 p-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsxs("div",{className:"username-prompt-modal-content rounded-xl w-full max-w-md p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--line)"},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:i.welcomeToFlicklet||"Welcome to Flicklet!"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:i.whatShouldWeCallYou||"What should we call you?"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:i.username||"Username"}),e.jsx("input",{id:"username",type:"text",value:d,onChange:g=>c(g.target.value),placeholder:y(),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},autoFocus:!0}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:i.usernameDescription||"This will be used for personalized messages"})]}),a&&e.jsx("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:a}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:N,disabled:l,className:"flex-1 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i.saving||"Saving..."]}):i.skip||"Skip"}),e.jsx("button",{type:"submit",disabled:l||!d.trim(),className:"flex-1 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--accent)",color:"white"},children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i.saving||"Saving..."]}):i.save||"Save"})]})]})]})})})}const Ze=[{id:null,name:"All Genres"},{id:"28",name:"Action"},{id:"35",name:"Comedy"},{id:"18",name:"Drama"},{id:"27",name:"Horror"},{id:"10749",name:"Romance"},{id:"878",name:"Sci-Fi"},{id:"14",name:"Fantasy"},{id:"53",name:"Thriller"},{id:"16",name:"Animation"},{id:"99",name:"Documentary"},{id:"80",name:"Crime"},{id:"12",name:"Adventure"},{id:"10751",name:"Family"},{id:"36",name:"History"},{id:"10402",name:"Music"},{id:"9648",name:"Mystery"},{id:"10752",name:"War"},{id:"37",name:"Western"}];function us({selectedGenre:t,onGenreChange:r,className:n=""}){var m;const s=D(),[o,i]=u.useState(!1),d=u.useRef(null),c=((m=Ze.find(a=>a.id===t))==null?void 0:m.name)||s.allGenres,l=a=>{r(a),i(!1)};return u.useEffect(()=>{const a=x=>{d.current&&!d.current.contains(x.target)&&i(!1)};if(o)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[o]),e.jsxs("div",{className:`relative ${n}`,ref:d,children:[e.jsxs("button",{onClick:()=>i(!o),className:`\r
          w-full rounded-lg border px-2 py-2 text-xs text-left\r
          bg-card text-foreground border-line\r
          hover:bg-muted transition-colors duration-200\r
          flex items-center justify-between\r
        `,style:{backgroundColor:"var(--card)",color:"var(--foreground)",borderColor:"var(--line)"},children:[e.jsx("span",{className:"truncate text-xs",children:c}),e.jsx("span",{className:`text-xs transition-transform duration-200 flex-shrink-0 ${o?"rotate-180":""}`,children:"â–¼"})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-overlay",onClick:()=>i(!1)}),e.jsx("div",{className:`\r
              fixed bg-card border border-line rounded-xl shadow-lg\r
              max-h-80 overflow-y-auto\r
            `,style:{backgroundColor:"var(--card)",borderColor:"var(--line)",zIndex:9999,top:d.current?d.current.getBoundingClientRect().bottom+4:0,left:d.current?d.current.getBoundingClientRect().left:0,width:d.current?d.current.getBoundingClientRect().width:"auto",maxWidth:"400px"},children:e.jsx("div",{className:"py-2",children:Ze.map(a=>e.jsx("button",{onClick:()=>l(a.id),className:`
                  w-full text-left px-4 py-2 text-sm
                  transition-colors duration-200
                  hover:bg-muted
                  ${t===a.id?"bg-accent text-accent-foreground":"text-foreground"}
                `,style:{backgroundColor:t===a.id?"var(--accent)":"transparent",color:t===a.id?"var(--accent-foreground)":"var(--foreground)"},children:a.name},a.id||"all"))})})]})]})}const hs=["Marvel movies","Netflix originals","Anime series","Horror movies","Romantic comedies","Sci-fi shows","Documentaries","Action movies","Fantasy series","Thriller movies","Comedy shows","Drama series","Crime shows","Mystery movies","Family movies","War movies","Western movies","Musical movies","Historical dramas","Superhero shows"],Nt="flicklet.search-history",ms=10;function kt(){try{const t=localStorage.getItem(Nt);return t?JSON.parse(t):[]}catch{return[]}}function St(t){try{localStorage.setItem(Nt,JSON.stringify(t))}catch(r){console.warn("Failed to save search history:",r)}}function xs(t){if(!t.trim())return;const r=kt(),n=t.trim(),s=r.filter(i=>i!==n),o=[n,...s].slice(0,ms);St(o)}function ne(t){xs(t)}function fs({query:t,onSuggestionClick:r,onClose:n,isVisible:s,className:o=""}){const[i,d]=u.useState([]),[c,l]=u.useState([]),[m,a]=u.useState(-1),x=u.useRef(null);u.useEffect(()=>{d(kt())},[]),u.useEffect(()=>{if(!t.trim()){l([]);return}const y=t.toLowerCase(),g=hs.filter(h=>h.toLowerCase().includes(y)),j=i.filter(h=>h.toLowerCase().includes(y)),p=[...j,...g.filter(h=>!j.includes(h))];l(p.slice(0,8)),a(-1)},[t,i]),u.useEffect(()=>{const y=g=>{if(!(!s||c.length===0))switch(g.key){case"ArrowDown":g.preventDefault(),a(j=>j<c.length-1?j+1:j);break;case"ArrowUp":g.preventDefault(),a(j=>j>0?j-1:-1);break;case"Enter":g.preventDefault(),m>=0&&m<c.length&&f(c[m]);break;case"Escape":g.preventDefault(),n();break}};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s,c,m,n]);const f=y=>{r(y),n()},N=()=>{d([]),St([])};return!s||c.length===0?null:e.jsx("div",{ref:x,className:`
        absolute top-full left-0 right-0 mt-1 bg-card border border-line rounded-xl shadow-lg
        max-h-80 overflow-y-auto
        ${o}
      `,style:{backgroundColor:"var(--card)",borderColor:"var(--line)",zIndex:9999},children:e.jsxs("div",{className:"p-2",children:[i.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium",style:{color:"var(--muted)"},children:"Recent Searches"}),e.jsx("button",{onClick:N,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",style:{color:"var(--muted)"},children:"Clear"})]}),e.jsx("div",{className:"space-y-1",children:i.slice(0,3).map((y,g)=>e.jsx("button",{onClick:()=>f(y),className:`
                    w-full text-left px-3 py-2 rounded-lg text-sm transition-colors
                    ${m===g?"bg-accent text-accent-foreground":"hover:bg-muted text-foreground"}
                  `,style:{backgroundColor:m===g?"var(--accent)":"transparent",color:m===g?"var(--accent-foreground)":"var(--foreground)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ•’"}),e.jsx("span",{children:y})]})},`history-${y}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--muted)"},children:"Suggestions"}),e.jsx("div",{className:"space-y-1",children:c.map((y,g)=>{const j=i.includes(y),p=j?g:g+(i.length>0?3:0);return e.jsx("button",{onClick:()=>f(y),className:`
                    w-full text-left px-3 py-2 rounded-lg text-sm transition-colors
                    ${m===p?"bg-accent text-accent-foreground":"hover:bg-muted text-foreground"}
                  `,style:{backgroundColor:m===p?"var(--accent)":"transparent",color:m===p?"var(--accent-foreground)":"var(--foreground)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:j?"ðŸ•’":"ðŸ’¡"}),e.jsx("span",{children:y})]})},`suggestion-${y}`)})})]})]})})}function gs({onVoiceResult:t,onError:r,className:n=""}){const[s,o]=u.useState(!1),[i,d]=u.useState(!1),[c,l]=u.useState(null),m=u.useRef(null),a=u.useRef(null),x=typeof window<"u"&&(localStorage.getItem("flag:voice_search_disabled")==="true"||localStorage.getItem("flag:voice_search_enabled")!=="true");u.useEffect(()=>{typeof window<"u"&&(window.disableVoiceSearch=()=>{localStorage.setItem("flag:voice_search_disabled","true"),localStorage.removeItem("flag:voice_search_enabled"),console.log("ðŸŽ¤ Voice search disabled. Refresh page to apply.")},window.enableVoiceSearch=()=>{localStorage.setItem("flag:voice_search_enabled","true"),localStorage.removeItem("flag:voice_search_disabled"),console.log("ðŸŽ¤ Voice search enabled. Refresh page to apply.")})},[]),u.useEffect(()=>{const g=window.SpeechRecognition||window.webkitSpeechRecognition;return g?(d(!0),m.current=new g,m.current.continuous=!1,m.current.interimResults=!1,m.current.lang="en-US",m.current.onresult=j=>{const p=j.results[0][0].transcript;console.log("ðŸŽ¤ Voice recognition result:",p);const h=p.trim().toLowerCase();h&&t(h),o(!1),l(null)},m.current.onerror=j=>{console.error("ðŸŽ¤ Voice recognition error:",j.error);let p="Voice recognition failed",h=!0;switch(j.error){case"no-speech":p="No speech detected. Please try again.";break;case"audio-capture":p="Microphone not available. Please check your microphone.";break;case"not-allowed":p="Microphone access denied. Please allow microphone access.";break;case"network":p="Network error. Please check your connection.",h=!1;break;case"aborted":h=!1;break;default:p=`Recognition error: ${j.error}`}o(!1),h?(l(p),r==null||r(p)):l(null)},m.current.onend=()=>{o(!1),a.current&&(clearTimeout(a.current),a.current=null)}):(d(!1),l("Voice search is not supported in this browser")),()=>{a.current&&clearTimeout(a.current),m.current&&m.current.stop()}},[t,r]);const f=()=>{if(!i||!m.current){l("Voice search is not supported");return}if(s){console.log("ðŸŽ¤ Voice recognition already active, ignoring duplicate start");return}try{l(null),o(!0),m.current.start(),a.current=setTimeout(()=>{m.current&&m.current.stop(),o(!1),l("Listening timeout. Please try again.")},1e4),console.log("ðŸŽ¤ Started voice recognition")}catch(g){console.error("ðŸŽ¤ Failed to start voice recognition:",g),l("Failed to start voice recognition"),o(!1)}},N=()=>{m.current&&m.current.stop(),a.current&&(clearTimeout(a.current),a.current=null),o(!1)},y=g=>{if(g.key==="Enter"){g.preventDefault(),g.stopPropagation();return}g.key===" "&&(g.preventDefault(),s?N():f())};return!i||x?null:e.jsxs("div",{className:`relative ${n}`,children:[e.jsx("button",{onClick:s?N:f,onKeyDown:y,disabled:!i,tabIndex:-1,className:`
          flex items-center justify-center w-10 h-10 rounded-lg border transition-all duration-200 ease-out
          hover:scale-105 active:scale-95
          ${s?"bg-red-500 text-white border-red-500 animate-pulse":"bg-card text-muted-foreground border-line hover:bg-muted hover:text-foreground"}
        `,style:{backgroundColor:s?"#ef4444":"var(--card)",color:s?"#ffffff":"var(--muted)",borderColor:s?"#ef4444":"var(--line)"},title:s?"Stop listening":"Start voice search","aria-label":s?"Stop voice search":"Start voice search",children:s?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 6h12v12H6z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})})}),c&&e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-red-500 text-white text-xs rounded-lg shadow-lg z-50 whitespace-nowrap",style:{maxWidth:"200px"},children:[c,e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-red-500 rotate-45"})]}),s&&e.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full animate-ping"})]})}const ps=[{name:"Useless Facts",url:"https://uselessfacts.jsph.pl/random.json?language=en",parser:t=>t.text,source:"useless-facts"},{name:"Dad Jokes",url:"https://icanhazdadjoke.com/",parser:t=>t.joke,source:"dad-jokes"},{name:"Chuck Norris Facts",url:"https://api.chucknorris.io/jokes/random",parser:t=>t.value,source:"chuck-norris"}],bs=["ðŸŽ¬ Did you know? The average person spends 3 years of their life watching TV","ðŸ“º Fun fact: Netflix has over 15,000 titles but you'll still scroll for 20 minutes","ðŸ¿ Irony: We have more entertainment options than ever, yet we're more indecisive","ðŸŽ­ The paradox of choice: 500+ shows to watch, but nothing to watch","ðŸ“± We live in the golden age of content and the dark age of decision-making","ðŸŽª Your watchlist is like a museum you never visit","ðŸŽ¨ Binge-watching: The art of consuming content faster than you can process it","ðŸŽ¯ The algorithm knows you better than you know yourself","ðŸŽª We've turned entertainment into a competitive sport","ðŸŽ¬ The only thing harder than finding something to watch is explaining why you didn't like it"];let we=[],Je=0;const ys=5*60*1e3;async function Ct(){if(we.length>0&&Date.now()-Je<ys)return we;const t=[];for(const r of ps)try{const n=await fetch(r.url,{headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(n.ok){const s=await n.json(),o=r.parser(s),i=vs(o);i&&t.push({text:i,source:r.source})}}catch(n){console.warn(`Failed to fetch from ${r.name}:`,n)}return t.length>0?(we=t,Je=Date.now(),t):bs.map(r=>({text:r,source:"fallback"}))}function vs(t){if(!t||typeof t!="string")return null;const r=t.trim();if(r.length<10||r.length>200||["damn","hell","crap","stupid","idiot"].some(i=>r.toLowerCase().includes(i)))return null;const s=["ðŸŽ¬","ðŸ“º","ðŸ¿","ðŸŽ­","ðŸŽª","ðŸŽ¨","ðŸŽ¯"];return`${s[Math.floor(Math.random()*s.length)]} ${r}`}async function ws(){try{await Ct()}catch(t){console.warn("Failed to preload marquee content:",t)}}function et({appName:t="Flicklet",showMarquee:r=!1,messages:n,marqueeSpeedSec:s=30,changeEveryMs:o=2e4,pauseOnHover:i=!0,onSearch:d,onClear:c,onHelpOpen:l}){const m=D(),{username:a,needsUsernamePrompt:x}=Te(),[f,N]=u.useState(!1),[y,g]=u.useState(!1);u.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("flicklet.marqueeHidden"):null;g(h==="1")}catch{}},[]);const j=()=>{g(!0);try{window.localStorage.setItem("flicklet.marqueeHidden","1")}catch{}},p=()=>{g(!1);try{window.localStorage.removeItem("flicklet.marqueeHidden")}catch{}};return u.useEffect(()=>{x()?N(!0):N(!1)},[a]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-4 sm:px-6",children:e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4 py-4 sm:py-6",children:[e.jsx("div",{className:"min-w-0 text-left",children:e.jsx(cs,{})}),e.jsx("div",{className:"text-center",children:e.jsx(js,{text:t})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:"select-none text-[11px] leading-none text-muted-foreground",title:"App version","data-testid":"app-version",children:["v",is]}),e.jsx("button",{onClick:()=>{try{l&&l()}catch(h){console.error("Error calling onHelpOpen:",h)}},className:"rounded-full border border-gray-300 dark:border-gray-600 px-2 py-1 text-[11px] leading-none text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors","aria-label":"Open help",title:"Help & Support","data-testid":"help-button",children:"?"}),y&&e.jsx("button",{type:"button",onClick:p,className:"rounded-full border px-2 py-1 text-[11px] leading-none text-muted-foreground hover:bg-accent hover:text-accent-foreground","aria-pressed":"false","data-testid":"marquee-show",title:"Show marquee",children:m.showMarquee}),e.jsx(ls,{})]})]})})}),e.jsx("div",{className:"sticky top-[var(--safe-top,0px)] z-nav border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-3 sm:px-4 py-2",children:e.jsx("div",{className:"relative flex items-center gap-3 rounded-2xl border bg-background p-3 sm:p-4","data-testid":"search-row",children:e.jsx(Ns,{onSearch:d,onClear:c})})})}),r&&!y&&e.jsx(ks,{messages:n||[],speedSec:s,changeEveryMs:o,pauseOnHover:i,onClose:j}),e.jsx(ds,{isOpen:f,onClose:()=>N(!1)})]})}function js({text:t}){return e.jsx("h1",{className:"select-none text-balance font-extrabold tracking-tight text-3xl sm:text-4xl md:text-5xl lg:text-6xl bg-gradient-to-r from-fuchsia-500 via-pink-500 to-amber-400 bg-clip-text text-transparent drop-shadow-[0_1px_0_rgba(255,255,255,0.35)]",title:t,"data-testid":"app-title",children:e.jsx("span",{className:"inline-block transition-transform duration-300 ease-out hover:scale-[1.02]",children:t})})}function Ns({onSearch:t,onClear:r}){const n=D(),[s,o]=M.useState(""),[i,d]=M.useState(null),[c,l]=M.useState("title"),[m,a]=M.useState("all"),[x,f]=M.useState(!1),[N,y]=M.useState(!1),[g,j]=M.useState(!1),p=M.useRef(null),h=M.useRef(null),w=()=>{const C=s.trim();C&&(c==="tag"?t==null||t(`tag:${C}`,i,m):t==null||t(C,i,m),ne(C)),f(!1)},S=()=>{var C;o(""),d(null),l("title"),a("all"),f(!1),r==null||r(),(C=h.current)==null||C.focus()},k=C=>{o(C),f(!1),setTimeout(()=>{c==="tag"?t==null||t(`tag:${C.trim()}`,i,m):t==null||t(C.trim(),i,m),ne(C.trim())},100)},T=C=>{o(C.target.value),f(C.target.value.length>0&&N)},A=C=>{y(!0),f(s.length>0),C.currentTarget.select()},b=()=>{setTimeout(()=>{y(!1),f(!1)},150)},E=C=>{if(C.key==="Enter"&&!g){C.preventDefault();const L=C.target.value.trim();L&&(c==="tag"?t==null||t(`tag:${L}`,i,m):t==null||t(L,i,m),ne(L)),f(!1)}else C.key==="Escape"&&(C.preventDefault(),S())};return M.useEffect(()=>{const C=L=>{p.current&&!p.current.contains(L.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx("form",{onSubmit:C=>{C.preventDefault(),w()},children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{ref:h,type:"search",role:"searchbox",inputMode:"search","aria-label":"Search movies, shows, people",placeholder:c==="tag"?"Search by tag...":n.searchPlaceholder,value:s,onChange:T,onFocus:A,onBlur:b,onKeyDown:E,onCompositionStart:()=>j(!0),onCompositionEnd:()=>j(!1),className:"w-full rounded-xl border px-4 py-3 pr-12 text-sm outline-none ring-0 focus:border-primary",spellCheck:"true"}),e.jsx("div",{className:"absolute right-2",children:e.jsx(gs,{onVoiceResult:C=>{o(C),f(!1),setTimeout(()=>{c==="tag"?t==null||t(`tag:${C.trim()}`,i,m):t==null||t(C.trim(),i,m),ne(C.trim())},100)},onError:C=>{console.warn("Voice search error:",C)}})})]})}),e.jsx(fs,{query:s,onSuggestionClick:k,onClose:()=>f(!1),isVisible:x})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>l("title"),className:`px-3 py-2 text-xs font-medium transition-colors ${c==="title"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Title"}),e.jsx("button",{onClick:()=>l("tag"),className:`px-3 py-2 text-xs font-medium transition-colors ${c==="tag"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Tag"})]}),e.jsxs("div",{className:"flex rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>a("all"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="all"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"All"}),e.jsx("button",{onClick:()=>a("movies-tv"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="movies-tv"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Movies/TV"}),e.jsx("button",{onClick:()=>a("people"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="people"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"People"})]}),e.jsx("div",{className:"w-32",children:e.jsx(us,{selectedGenre:i,onGenreChange:d,className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"rounded-lg border px-3 py-2 text-xs font-semibold hover:bg-accent hover:text-accent-foreground transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md",onClick:w,children:n.search}),e.jsx("button",{type:"button",className:"rounded-lg border px-3 py-2 text-xs font-semibold hover:bg-muted transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md",onClick:S,children:n.clear})]})]})]})})}function ks({messages:t,speedSec:r=30,changeEveryMs:n=2e4,pauseOnHover:s=!0,onClose:o}){const i=D(),[d,c]=u.useState(0),[l,m]=u.useState([]),a=u.useRef(0);u.useEffect(()=>{(async()=>{try{const g=(await Ct()).map(j=>j.text);m(g)}catch(y){console.warn("Failed to load marquee content from API:",y),m(t)}})()},[t]),u.useEffect(()=>{ws()},[]),u.useEffect(()=>{const N=l.length>0?l:t;if(!(N!=null&&N.length))return;const y=setInterval(()=>{c(g=>(g+1)%N.length),a.current+=1},Math.max(4e3,n));return()=>clearInterval(y)},[l,t,n]);const f=(l.length>0?l:t)[d]||"";return e.jsx("div",{className:"marquee-rail f-marquee-rail w-full border-t bg-muted/60 text-muted-foreground","data-testid":"marquee-rail","data-pause-on-hover":s?"true":"false",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-3 sm:px-4",children:e.jsxs("div",{className:"relative h-9 sm:h-10 overflow-hidden",children:[o&&e.jsx("button",{type:"button",onClick:o,className:"absolute right-1.5 top-1.5 z-dropdown rounded-md border px-2 py-0.5 text-[11px] leading-none backdrop-blur hover:bg-accent hover:text-accent-foreground","aria-label":"Hide marquee","data-testid":"marquee-hide",children:i.hideMarquee}),e.jsxs("div",{className:"absolute inset-0 whitespace-nowrap f-marquee-scroll",style:{"--marquee-duration":`${Math.max(10,r)}s`},"aria-live":"polite","data-testid":"marquee-scroller",children:[e.jsx("span",{className:"pr-[100vw] align-middle text-sm sm:text-base md:text-lg",children:f}),e.jsx("span",{className:"pr-[100vw] align-middle text-sm sm:text-base md:text-lg","aria-hidden":!0,children:f})]},a.current)]})})})}function tt(t){const r=t.map(n=>new Promise((s,o)=>{const i=new Image;i.onload=()=>s(),i.onerror=()=>o(new Error(`Failed to load image: ${n}`)),i.src=n}));return Promise.all(r)}function Ss(t){u.useEffect(()=>{if(t.length===0)return;const r=t.slice(0,5).map(s=>s.posterUrl).filter(s=>!!s);r.length>0&&tt(r).then(()=>{console.log(`[Rail Preload] Preloaded ${r.length} immediate images`)}).catch(s=>{console.warn("[Rail Preload] Failed to preload immediate images:",s)});const n=t.slice(5,15).map(s=>s.posterUrl).filter(s=>!!s);if(n.length>0){const s=setTimeout(()=>{tt(n).then(()=>{console.log(`[Rail Preload] Preloaded ${n.length} remaining images`)}).catch(o=>{console.warn("[Rail Preload] Failed to preload remaining images:",o)})},1e3);return()=>clearTimeout(s)}},[t])}function je({id:t,title:r,enabled:n=!0,skeletonCount:s=0,items:o}){if(!n)return null;const i=o&&o.length?o:Array.from({length:s}).map(()=>({})),c=(a=>a==="currently-watching"?"tab-watching":a.startsWith("for-you-")||a==="in-theaters"?"tab-foryou":"home")(t);Ss(i.map(a=>({posterUrl:a.poster})));const l={onWant:a=>{console.log("ðŸŽ¬ For You Want button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"wishlist"),console.log("âœ… Item added to wishlist:",a.title))},onWatched:a=>{console.log("ðŸŽ¬ For You Watched button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"watched"),console.log("âœ… Item added to watched:",a.title))},onNotInterested:a=>{console.log("ðŸŽ¬ For You Not Interested button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"not"),console.log("âœ… Item added to not interested:",a.title))},onDelete:a=>{console.log("ðŸŽ¬ For You Delete button clicked:",a),a.id&&a.mediaType&&(_.remove(a.id,a.mediaType),console.log("âœ… Item deleted:",a.title))}};function m(a){const x=a.currentTarget,f=x.querySelector('[data-testid="cardv2"]'),N=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--space-3").replace("px",""))||12,g=(f?f.getBoundingClientRect().width:166)+N;switch(a.key){case"ArrowRight":a.preventDefault(),x.scrollBy({left:+g,behavior:"smooth"});break;case"ArrowLeft":a.preventDefault(),x.scrollBy({left:-g,behavior:"smooth"});break;case"Home":a.preventDefault(),x.scrollTo({left:0,behavior:"smooth"});break;case"End":a.preventDefault(),x.scrollTo({left:x.scrollWidth,behavior:"smooth"});break;case"Enter":{const j=x.querySelector('[data-testid="cardv2"]');j&&j.focus();break}}}return e.jsxs("section",{"data-rail":t,"aria-label":r,className:"px-4 py-3",children:[e.jsx("h2",{className:"mb-2 text-base font-semibold",style:{color:"var(--text)"},children:r}),e.jsx("div",{"data-cards":!0,role:"list",tabIndex:0,onKeyDown:m,className:"flex gap-3 overflow-x-auto snap-x snap-mandatory pb-2",children:i.map((a,x)=>{const f=(()=>typeof a.title=="string"&&a.title.trim()&&a.title!==String(a.id)?a.title.trim():"Untitled")(),N={id:a.id||x,mediaType:a.kind||"movie",title:f,posterUrl:a.poster,year:a.year?String(a.year):void 0,voteAverage:void 0};return e.jsx("div",{role:"listitem",className:"snap-start",children:e.jsx(bt,{item:N,context:c,actions:l,disableSwipe:!0})},a.id??x)})})]})}function Z({title:t,children:r}){return e.jsx("section",{"aria-label":t,className:"px-4 py-4",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",style:{color:"var(--text)"},children:t}),e.jsx("div",{className:"rounded-2xl p-4 md:p-5",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:r})]})})}function Tt(){const[t,r]=u.useState(null),[n,s]=u.useState("loading");return u.useEffect(()=>{(async()=>{try{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async d=>{const{latitude:c,longitude:l}=d.coords;try{const a=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${c}&longitude=${l}&localityLanguage=en`)).json();r({latitude:c,longitude:l,city:a.city||"Unknown",region:a.principalSubdivision||"Unknown",country:a.countryName||"Unknown"}),s("granted")}catch(m){console.error("Failed to get city info:",m);const a=await ve();r(a),s("granted")}},async d=>{console.log("Geolocation denied or failed:",d),s("denied");try{const c=await ve();r(c)}catch(c){console.error("Failed to get IP location:",c),r(null)}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5});else try{const d=await ve();r(d),s("granted")}catch(d){console.error("Failed to get IP location:",d),r(null),s("denied")}}catch(d){console.error("Location setup failed:",d),s("denied")}})()},[]),{location:t,locationPermission:n,requestLocationPermission:()=>{s("prompt"),window.location.reload()},isLoading:n==="loading"}}function Cs(t=10){const{location:r}=Tt();return Ee({queryKey:["theaters",r==null?void 0:r.latitude,r==null?void 0:r.longitude,t],queryFn:()=>r?Ht(r.latitude,r.longitude,t):[],enabled:!!r,staleTime:3e5,retry:2})}function st(){const t=D(),{location:r,locationPermission:n,requestLocationPermission:s,isLoading:o}=Tt(),{data:i,isLoading:d}=Cs(),[c,l]=u.useState(!1);if(o)return e.jsxs("div",{className:"mb-3 flex flex-col gap-1",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:["ðŸ“ ",t.detectingLocation||"Detecting your location..."]})]});if(!r)return e.jsxs("div",{className:"mb-3 flex flex-col gap-1",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[e.jsxs("span",{className:"font-medium",children:["ðŸ“ ",t.locationUnavailable||"Location unavailable"]}),n==="denied"&&e.jsx("button",{onClick:s,className:"ml-2 text-blue-400 hover:text-blue-300 underline",children:t.enableLocation||"Enable location"})]})]});const m=()=>{l(!c)};return e.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[e.jsxs("span",{className:"font-medium",children:["ðŸ“ ",r.city,", ",r.region]}),e.jsxs("button",{onClick:m,className:"ml-2 text-blue-400 hover:text-blue-300 underline",children:[c?t.hideShowtimes||"Hide":t.findShowtimes||"Find"," Showtimes"]})]}),c&&e.jsx("div",{className:"mt-2 space-y-2",children:d?e.jsx("div",{className:"text-xs text-neutral-400",children:t.loadingTheaters||"Loading theaters..."}):i&&i.length>0?e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsx(Ts,{theater:a},a.id))}):e.jsx("div",{className:"text-xs text-neutral-400",children:t.noTheatersFound||"No theaters found nearby. Try expanding your search radius."})})]})}function Ts({theater:t}){const[r,n]=u.useState(!1),s=D();return console.log("ðŸŽ¬ TheaterCard rendering:",t),e.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium",style:{color:"var(--text)"},children:t.name}),e.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:[t.address,t.distance&&e.jsxs("span",{className:"ml-1",children:["â€¢ ",t.distance,s.kmAway||"km away"]})]}),e.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[t.phone&&e.jsxs("span",{className:"text-xs",style:{color:"var(--muted)"},children:["ðŸ“ž ",t.phone]}),t.website&&e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 underline",children:"ðŸŒ Visit Website"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.jsxs("button",{onClick:()=>n(!r),className:"text-xs px-2 py-1 rounded border transition-colors",style:{color:"var(--accent)",borderColor:"var(--accent)",backgroundColor:"transparent"},children:[r?s.hideTimes||"Hide":s.showTimes||"Show"," Times"]}),t.website&&e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 rounded border transition-colors text-center",style:{color:"var(--text)",borderColor:"var(--line)",backgroundColor:"transparent"},children:"Real Showtimes"})]})]}),r&&t.showtimes&&e.jsxs("div",{className:"mt-2 pt-2 border-t",style:{borderColor:"var(--line)"},children:[e.jsx("div",{className:"text-xs font-medium mb-1",style:{color:"var(--text)"},children:s.todaysShowtimes||"Today's Showtimes:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.showtimes.map((o,i)=>e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${o.available?"bg-green-900 text-green-200 border border-green-700":"bg-gray-800 text-gray-400 border border-gray-600"}`,children:[o.time," ",o.format]},i))}),e.jsx("div",{className:"mt-2 text-xs",style:{color:"var(--muted)"},children:e.jsx("span",{className:"italic",children:"* Estimated showtimes. For accurate showtimes and ticket availability, visit the theater website."})})]})]})}function Es({message:t,type:r,onClose:n}){const[s,o]=u.useState(!0);u.useEffect(()=>{const d=setTimeout(()=>{o(!1),setTimeout(n,300)},3e3);return()=>clearTimeout(d)},[n]);const i=()=>{switch(r){case"success":return{backgroundColor:"var(--card)",borderColor:"#10b981",color:"var(--text)",border:"1px solid"};case"error":return{backgroundColor:"var(--card)",borderColor:"#ef4444",color:"var(--text)",border:"1px solid"};default:return{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"}}};return s?e.jsx("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,style:i(),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:t}),e.jsx("button",{onClick:()=>{o(!1),setTimeout(n,300)},className:"ml-3 text-neutral-400 hover:text-neutral-200 transition-colors","aria-label":"Close notification",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}function Et(){const[t,r]=u.useState([]);return{toasts:t,addToast:(o,i="info")=>{const d=Math.random().toString(36).substr(2,9);r(c=>[...c,{id:d,message:o,type:i}])},removeToast:o=>{r(i=>i.filter(d=>d.id!==o))}}}function rt(){const t=D(),{addToast:r}=Et(),[n,s]=u.useState(""),[o,i]=u.useState(!1),d=async c=>{if(c.preventDefault(),!n.trim()){r("Please enter some feedback before submitting.","error");return}i(!0);try{console.log("ðŸŒ Submitting via Netlify Forms");const l=new FormData;l.append("form-name","feedback"),l.append("message",n.trim()),l.append("theme","light"),l.append("timestamp",new Date().toISOString()),console.log("ðŸ“¤ Form data:",{"form-name":"feedback",message:n.trim(),theme:"light",timestamp:new Date().toISOString()});const m=await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l).toString()});if(console.log("ðŸ“¡ Response status:",m.status),console.log("ðŸ“¡ Response headers:",Object.fromEntries(m.headers.entries())),!m.ok){const x=await m.text();throw console.error("âŒ Response error:",x),new Error(`HTTP ${m.status}: ${x}`)}const a=await m.text();console.log("ðŸ“¥ Response body:",a),console.log("âœ… Feedback submitted successfully via Netlify Forms"),r("Thanks for sharing! Your thoughts have been received. ðŸ’­","success"),s("")}catch(l){console.error("âŒ Error submitting feedback:",l),r("Sorry, there was an error submitting your feedback. Please try again.","error")}finally{i(!1)}};return e.jsxs("div",{"data-rail":"feedback",className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--text)"},children:t.tellUsWhatToImprove}),e.jsxs("form",{name:"feedback",method:"POST","data-netlify":"true","netlify-honeypot":"bot-field",className:"flex flex-col gap-3",onSubmit:d,children:[e.jsx("input",{type:"hidden",name:"form-name",value:"feedback"}),e.jsx("input",{type:"hidden",name:"theme",value:"light"}),e.jsx("div",{style:{display:"none"},children:e.jsxs("label",{children:["Don't fill this out if you're human: ",e.jsx("input",{name:"bot-field"})]})}),e.jsx("textarea",{name:"message",className:"w-full h-28 rounded-2xl p-3 text-sm",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:t.typeYourFeedback,value:n,onChange:c=>s(c.target.value),disabled:o,required:!0}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{type:"submit",className:"btn",disabled:o||!n.trim(),children:o?"Sending...":t.sendFeedback})})]})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ“ Submit Content"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",style:{color:"var(--text)"},children:"Marquee Comments"}),e.jsxs("div",{className:"text-xs space-y-1",style:{color:"var(--muted)"},children:[e.jsx("p",{children:"â€¢ Keep comments under 100 characters"}),e.jsx("p",{children:"â€¢ Use feedback form on the left"}),e.jsx("p",{children:'â€¢ Subject: "Marquee Comment: [Show Name]"'}),e.jsx("p",{children:"â€¢ Include your comment in the message body"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium mb-2",style:{color:"var(--text)"},children:"ðŸŽ¬ Video Submissions"}),e.jsxs("div",{className:"text-xs space-y-1",style:{color:"var(--muted)"},children:[e.jsx("p",{children:"â€¢ Max file size: 100MB"}),e.jsx("p",{children:"â€¢ Formats: MP4, MOV, AVI"}),e.jsx("p",{children:"â€¢ Resolution: 720p minimum"}),e.jsx("p",{children:"â€¢ Duration: 30 seconds - 5 minutes"}),e.jsxs("p",{children:["â€¢ Email: ",e.jsx("strong",{children:"support@flickletapp.com"})]}),e.jsx("p",{children:'â€¢ Subject: "Video Submission: [Show Name] - [Type]"'}),e.jsx("p",{children:"â€¢ Include: Show name, video type, your username"})]})]})]})]})}const nt=new Map,As=5*60*1e3;async function Ls(...t){const[r,n,s,o]=t,i=[r,n,s??"",o].join("|"),d=nt.get(i);if(d&&Date.now()-d.t<As)return d.v;const c=await Xt(...t);return nt.set(i,{t:Date.now(),v:c}),c}function _s(t){const r=new URLSearchParams;for(const[n,s]of Object.entries(t))s!=null&&s!==""&&r.set(n,String(s));return r.toString()}async function H(t,r,n){const s=`/api/tmdb-proxy?${_s({path:t,...r})}`,o=await fetch(s,{signal:n});if(!o.ok)throw new Error(`${t} failed: ${o.status}`);return o.json()}function Me(t){return t.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[''']/g,"'").replace(/["""]/g,'"').trim()}function At(t){const r=Me(t),n=r.replace(/[â€“â€”]/g,"-"),s=n.replace(/[-]+/g," "),o=n.replace(/[-\s]+/g,"");return Array.from(new Set([r,n,s,o].map(i=>i.toLowerCase())))}function ot(t){return t.toLowerCase().split(/[^a-z0-9']+/).filter(Boolean)}function Ms(t,r){const n=new Set([...t].filter(o=>r.has(o))).size,s=new Set([...t,...r]).size||1;return n/s}function Lt(t,r){const n=At(t),s=Me(r).toLowerCase();for(const c of n){if(s===c)return 1;if(s.includes(c))return .9}const o=new Set(ot(n[1]||t)),i=new Set(ot(s));let d=Ms(o,i);return/^z[-\s]?nation$/i.test(n[1]||t)&&/nation/.test(s)&&!/zombie|undead|apocalypse|infect|virus|outbreak|plague/i.test(s)&&(d*=.5),d}const Rs=new Set([27,10765,10759]),Is=new Set([27,878,28]);function Ds(t){const r=t.genre_ids||[];return t.mediaType==="tv"?r.some(n=>Rs.has(n))?.25:0:t.mediaType==="movie"&&r.some(n=>Is.has(n))?.25:0}function Ps(t){if(!t)return 0;const r=t.toLowerCase(),s=["zombie","undead","apocalypse","virus","outbreak","plague"].reduce((o,i)=>o+(r.includes(i)?1:0),0);return Math.min(.25,s*.07)}function $s(t){return Math.min(.25,(t??0)/40)}function Fs(t,r){const n=Lt(t,r.title||""),s=Ds(r),o=Ps(r.synopsis),i=$s(r.voteAverage);return n*.7+s+o+i}function at(t){const r=new Set,n=[];for(const s of t){const o=`${s.mediaType}:${s.id}`;r.has(o)||(r.add(o),n.push(s))}return n}async function Bs(t,r=1,n="all",s){const o=(s==null?void 0:s.language)??"en-US",i=(s==null?void 0:s.region)??"US",d=Me(t);if(n==="people")return((await H("search/person",{query:d,page:r,include_adult:!1,language:o,region:i},s==null?void 0:s.signal)).results??[]).map(Y).filter(Boolean);const c=At(d),l=c[1]||d,m=c[0]||d,[a,x]=await Promise.all([H("search/tv",{query:l,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).catch(()=>H("search/tv",{query:m,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal)),H("search/movie",{query:l,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).catch(()=>H("search/movie",{query:m,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal))]),f=(a.results??[]).map(Y).filter(Boolean),N=(x.results??[]).map(Y).filter(Boolean),y=[...f,...N],g=y.map(k=>({c:k,s:Lt(d,k.title||"")})).sort((k,T)=>T.s-k.s),j=g.length&&g[0].s>=.75?g[0].c:null;let p=[];if(j&&(j.mediaType==="tv"||j.mediaType==="movie"))try{const[k,T]=await Promise.all([H(`${j.mediaType}/${j.id}/similar`,{page:1,language:o},s==null?void 0:s.signal),H(`${j.mediaType}/${j.id}/recommendations`,{page:1,language:o},s==null?void 0:s.signal)]),A=(k.results??[]).map(Y).filter(Boolean),b=(T.results??[]).map(Y).filter(Boolean);p=at([...A,...b])}catch{}const h=await H("search/multi",{query:d,page:r,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).then(k=>(k.results??[]).map(Y).filter(Boolean)),S=at([...j?[j]:[],...p,...y,...h]).map(k=>({item:k,score:Fs(d,k)})).sort((k,T)=>T.score-k.score).map(k=>k.item);return n==="movies-tv"?S.filter(k=>k.mediaType==="tv"||k.mediaType==="movie"):S}async function _t(t){var i;const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json();return console.log(`ðŸ” TMDB Response for ${t}:`,{next_episode_to_air:s==null?void 0:s.next_episode_to_air,status:s==null?void 0:s.status,last_air_date:s==null?void 0:s.last_air_date}),((i=s==null?void 0:s.next_episode_to_air)==null?void 0:i.air_date)||null||null}async function Mt(t){const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json();return{status:(s==null?void 0:s.status)||"Unknown",lastAirDate:(s==null?void 0:s.last_air_date)||null}}async function Ws(t){const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json(),o=s==null?void 0:s.next_episode_to_air;return o?{season:o.season_number,episode:o.episode_number}:null}function it({query:t,genre:r,searchType:n="all",nonce:s}){const[o,i]=u.useState([]),[d,c]=u.useState(0),[l,m]=u.useState(!0),[a,x]=u.useState(!1),[f,N]=u.useState(null),y=u.useRef(null),g=G();u.useEffect(()=>{var p;(p=y.current)==null||p.abort(),i([]),c(0),m(!0),N(null),j(1,!0)},[t,r,n,s]);async function j(p,h=!1){var S;if(a||!l)return;(S=y.current)==null||S.abort();const w=new AbortController;y.current=w,x(!0);try{const T=n!=="people"&&!t.startsWith("tag:")?await Bs(t,p,n,{signal:w.signal}):await Ls(t,p,r??null,n,{signal:w.signal});i(A=>h?T:[...A,...T]),c(p),m(T.length>=20)}catch(k){(k==null?void 0:k.name)!=="AbortError"&&N((k==null?void 0:k.message)||"Search failed")}finally{x(!1)}}return t?e.jsxs("section",{className:"mx-auto w-full max-w-7xl px-3 sm:px-4 py-3","aria-labelledby":"search-results-heading",children:[e.jsx("h2",{id:"search-results-heading",className:"text-base font-semibold mb-6",children:t.startsWith("tag:")?`Tag search results for "${t.substring(4)}"`:`Search results for "${t}"`}),a&&o.length===0&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:P("searchLoading",g.personalityLevel)}),f&&e.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["âš ï¸ ",f]}),e.jsx("div",{className:"space-y-6",children:o.map(p=>e.jsx(Os,{item:p,onRemove:()=>i(h=>h.filter(w=>w.id!==p.id))},`${p.mediaType}:${p.id}`))}),l&&e.jsx("div",{className:"h-20 flex items-center justify-center",ref:p=>{if(p){const h=new IntersectionObserver(w=>{w[0].isIntersecting&&!a&&j(d+1)},{threshold:.1});return h.observe(p),()=>h.disconnect()}},children:a&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading more..."})})]}):null}function Os({item:t,onRemove:r}){const n=D(),{posterUrl:s,mediaType:o,synopsis:i}=t,[d,c]=M.useState(new Set),[l,m]=M.useState({});M.useEffect(()=>{(o==="movie"||o==="tv")&&Zt(Number(t.id),o).then(m)},[t.id,o]);function a(w){const k=(typeof w.title=="string"?w.title:String(w.title??"").trim())||"Untitled";return w.year?`${k} (${w.year})`:k}const x=a(t),f=w=>{if(!w||w.length===0)return"Genre TBA";const S={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},k=w[0];return S[k]||"Genre TBA"};if(o==="person")return e.jsx(Us,{item:t});const N=f(t.genre_ids),y=o==="movie"?"Movie":"TV Series",g=["NEW","TRENDING"],j=()=>o==="tv"&&l.networks&&l.networks.length>0?`On ${l.networks[0]}${l.networks.length>1?` (+${l.networks.length-1} more)`:""}`:o==="movie"&&l.productionCompanies&&l.productionCompanies.length>0?`From ${l.productionCompanies[0]}${l.productionCompanies.length>1?` (+${l.productionCompanies.length-1} more)`:""}`:null,p=async w=>{console.log("ðŸŽ¬ handleAction called with:",w,"for item:",t.title);const S=`${w}-${t.id}`;c(k=>new Set(k).add(S));try{switch(w){case"want":se(t,"wishlist",()=>{re("card:want",{id:t.id,mediaType:t.mediaType}),r()});break;case"currently-watching":{let k=null,T,A;if(o==="tv"){k=await _t(Number(t.id));const b=await Mt(Number(t.id));b&&(T=b.status,A=b.lastAirDate||void 0)}se({...t,nextAirDate:k,showStatus:T,lastAirDate:A},"watching",()=>{r()});break}case"watched":se(t,"watched",()=>{re("card:watched",{id:t.id,mediaType:t.mediaType}),r()});break;case"not-interested":se(t,"not",()=>{re("card:notInterested",{id:t.id,mediaType:t.mediaType}),r()});break;case"holiday":re("card:holidayAdd",{id:t.id,mediaType:t.mediaType});break;default:console.log(`${w} clicked for ${x}`)}}finally{setTimeout(()=>{c(k=>{const T=new Set(k);return T.delete(S),T})},300)}},h=(w,S,k=!1)=>{const T=`${w}-${t.id}`,A=d.has(T),b=w==="currently-watching"&&d.has(T);return e.jsx("button",{onClick:()=>p(w),className:`px-2.5 py-1.5 rounded-lg text-xs transition-all duration-150 ease-out ${A?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"} ${b?"cursor-wait":"cursor-pointer"}`,style:{backgroundColor:A?"var(--accent)":"var(--btn)",color:k?"white":"var(--text)",borderColor:"var(--line)",border:"1px solid"},disabled:A,children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin mr-1"}),e.jsx("span",{className:"text-[10px]",children:"..."})]}):S})};return e.jsxs("div",{className:"relative flex bg-card border border-line rounded-xl overflow-hidden shadow-lg hover:transform hover:-translate-y-0.5 transition-transform",children:[e.jsx("a",{href:`https://www.themoviedb.org/${o}/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-24 h-36 bg-muted cursor-pointer",title:n.opensInTmdb,children:s?e.jsx(Ae,{src:s,alt:x,context:"poster",className:"w-full h-full",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-neutral-800 flex items-center justify-center text-sm text-muted-foreground",children:"No poster"})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col relative",children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:x}),e.jsxs("div",{className:"text-muted-foreground text-sm mb-1",children:[N," â€¢ ",y]}),j()&&e.jsx("div",{className:"text-accent text-sm mb-2",children:j()}),e.jsx("div",{className:"text-muted-foreground text-sm mb-2 max-h-12 overflow-hidden",children:i||n.noSynopsisAvailable}),e.jsx("div",{className:"flex gap-2 mb-2",children:g.map(w=>e.jsx("span",{className:"border border-line rounded px-2 py-0.5 text-xs text-muted-foreground",children:w},w))}),e.jsxs("div",{className:"flex items-center gap-1 mb-4",children:[e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Your rating)"}),t.voteAverage&&e.jsxs("span",{className:"text-muted-foreground text-xs ml-4",children:["TMDB: ",t.voteAverage.toFixed(1),"/10"]})]}),e.jsx("div",{className:"mt-auto flex flex-wrap gap-2 justify-between items-center",children:e.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded-lg",style:{borderColor:"var(--line)",border:"1px dashed"},children:[h("want",n.wantToWatchAction),h("currently-watching",n.currentlyWatchingAction),h("watched",n.watchedAction),h("not-interested",n.notInterestedAction),e.jsx(Jt,{item:t})]})})]})]})}function Us({item:t}){const{posterUrl:r}=t,[n,s]=M.useState(new Set);function o(a){const f=(typeof a.title=="string"?a.title:String(a.title??"").trim())||"Untitled";return a.year?`${f} (${a.year})`:f}const i=o(t),d=t.known_for||[],c=d.length>0?d.map(a=>a.title||a.name).join(", "):"Actor/Actress",l=async a=>{console.log("ðŸŽ¬ Person action called with:",a,"for person:",t.title);const x=`${a}-${t.id}`;s(f=>new Set(f).add(x));try{switch(a){case"view-profile":window.open(`https://www.themoviedb.org/person/${t.id}`,"_blank");break;case"search-works":{const f=new CustomEvent("search:person-works",{detail:{personName:t.title,personId:t.id}});document.dispatchEvent(f);break}default:console.log(`${a} clicked for ${i}`)}}finally{setTimeout(()=>{s(f=>{const N=new Set(f);return N.delete(x),N})},300)}},m=(a,x,f=!1)=>{const N=`${a}-${t.id}`,y=n.has(N);return e.jsx("button",{onClick:()=>l(a),className:`px-2.5 py-1.5 rounded-lg text-xs transition-all duration-150 ease-out ${y?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"} cursor-pointer`,style:{backgroundColor:y?"var(--accent)":"var(--btn)",color:f?"white":"var(--text)",borderColor:"var(--line)",border:"1px solid"},disabled:y,children:x})};return e.jsxs("div",{className:"relative flex bg-card border border-line rounded-xl overflow-hidden shadow-lg hover:transform hover:-translate-y-0.5 transition-transform",children:[e.jsx("a",{href:`https://www.themoviedb.org/person/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-24 h-36 bg-muted cursor-pointer",title:"View profile on TMDB",children:r?e.jsx(Ae,{src:r,alt:i,context:"poster",className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-neutral-800 flex items-center justify-center text-sm text-muted-foreground",children:"No photo"})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col relative",children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:i}),e.jsxs("div",{className:"text-muted-foreground text-sm mb-2",children:["Known for: ",c]}),e.jsxs("div",{className:"text-accent text-sm mb-2",children:["Popularity: ",t.voteAverage?Math.round(t.voteAverage):"N/A"]}),e.jsx("div",{className:"mt-auto flex flex-wrap gap-2 justify-between items-center",children:e.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded-lg",style:{borderColor:"var(--line)",border:"1px dashed"},children:[m("view-profile","View Profile"),m("search-works","Search Works")]})})]})]})}function lt(){const t=W("watching"),r=D(),n=G();return e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",style:{color:"var(--text)"},children:r.currentlyWatching}),t.length>0?e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:t.map(s=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(bt,{item:s,context:"tab-watching",disableSwipe:!0,actions:{onWant:o=>_.move(o.id,o.mediaType,"wishlist"),onWatched:o=>_.move(o.id,o.mediaType,"watched"),onNotInterested:o=>_.move(o.id,o.mediaType,"not"),onDelete:o=>_.remove(o.id,o.mediaType)}})},`${s.mediaType}:${s.id}`))}):e.jsxs("div",{className:"text-sm text-neutral-400",children:[P("emptyWatching",n.personalityLevel)," ",r.addSomeFromSearchOrDiscovery]})]})}function Vs({item:t}){const{title:r,year:n,posterUrl:s,nextAirDate:o,mediaType:i,id:d,showStatus:c,lastAirDate:l}=t,m=D(),[a,x]=u.useState("S01E01");B(`ðŸ” UpNextCard ${r} received nextAirDate:`,o),B("ðŸŒ Current timezone:",Intl.DateTimeFormat().resolvedOptions().timeZone);const f=p=>{try{const w=new Date(p+"T00:00:00Z").toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"});return B(`ðŸ“… Formatting ${p} â†’ ${w} (UTC)`),w}catch{return p}};u.useEffect(()=>{i==="tv"&&(async()=>{try{const h=await Ws(Number(d));h&&x(`S${h.season.toString().padStart(2,"0")}E${h.episode.toString().padStart(2,"0")}`)}catch(h){B(`Failed to fetch episode info for ${r}:`,h)}})()},[d,r,i]);const N=yt(c),y=(N==null?void 0:N.isCompleted)||!1,g=()=>{if(y){if(c==="Ended")return"Series Complete";if(c==="Canceled")return"Series Cancelled"}if(o)return`Up Next: ${f(o)}`;if(c)switch(c){case"Returning Series":return"Returning Soon";case"In Production":return"In Production";case"Planned":return"Planned";default:return"Coming Soon"}return"Coming Soon"},j=()=>{if(y)return c==="Canceled"?"#dc2626":"var(--muted)";if(!o)switch(c){case"Returning Series":return"#16a34a";case"In Production":return"#ea580c";case"Planned":return"#7c3aed";default:return"var(--accent)"}return"var(--accent)"};return e.jsx("article",{className:"up-next-card group select-none",style:{width:"var(--poster-w, 160px)"},"data-testid":"up-next-card","aria-label":r,children:e.jsxs("div",{className:"relative border shadow-sm overflow-hidden",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",borderRadius:"var(--radius, 12px)"},children:[e.jsx("div",{className:"poster-wrap relative aspect-[2/3] cursor-pointer",role:"img","aria-label":r,style:{backgroundColor:"var(--muted)"},onClick:()=>{if(t.id&&t.mediaType){const p=`https://www.themoviedb.org/${t.mediaType}/${t.id}`;window.open(p,"_blank","noopener,noreferrer")}},children:s?e.jsx(Ae,{src:s,alt:r,context:"poster",className:"h-full w-full",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs",style:{color:"var(--muted)"},children:m.noPoster})}),e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("h3",{className:"font-bold text-sm mb-1 truncate",title:r,style:{color:"var(--text)"},children:r}),e.jsxs("div",{className:"text-xs mb-1",style:{color:"var(--muted)"},children:[n||"TBA"," â€¢ ",a]}),e.jsx("div",{className:"text-xs font-medium",style:{color:j()},children:g()}),y&&l&&e.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:["Last aired: ",es(l)]})]})]})})}function ct(){const t=W("watching"),r=D(),n=G(),[s,o]=u.useState(0);u.useEffect(()=>{const d=()=>{console.log("ðŸ”„ Library updated, forcing re-render of UpNextRail"),o(l=>l+1)},c=()=>{console.log("ðŸ”„ Force refresh triggered for UpNextRail"),o(l=>l+1)};return window.addEventListener("library:updated",d),window.addEventListener("force-refresh",c),()=>{window.removeEventListener("library:updated",d),window.removeEventListener("force-refresh",c)}},[]);const i=u.useMemo(()=>{const d=t.filter(a=>a.mediaType==="tv"),c=d.filter(a=>!!a.nextAirDate).sort((a,x)=>String(a.nextAirDate).localeCompare(String(x.nextAirDate))),l=d.filter(a=>{var x;return!a.nextAirDate&&!((x=yt(a.showStatus))!=null&&x.isCompleted)}).sort((a,x)=>{const f=N=>{switch(N){case"Returning Series":return 1;case"In Production":return 2;case"Planned":return 3;default:return 4}};return f(a.showStatus||"")-f(x.showStatus||"")}),m=[...c,...l].slice(0,12);return console.log("ðŸ” HomeUpNextRail items:",m.map(a=>({title:a.title,nextAirDate:a.nextAirDate,showStatus:a.showStatus,hasDate:!!a.nextAirDate}))),m},[t,s]);return e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",style:{color:"var(--text)"},children:r.upNext}),i.length>0?e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:i.map(d=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Vs,{item:d})},`${d.mediaType}:${d.id}:${d.nextAirDate}`))}):e.jsxs("div",{className:"text-sm text-neutral-400",children:[P("emptyUpNext",n.personalityLevel)," ",r.addTvShowsToWatchingList]})]})}function dt({onClick:t}){const[r,n]=u.useState(!1),{viewportOffset:s}=_e(),o=u.useMemo(()=>Math.max(0,s-50),[s]),i=()=>{n(!0),t(),setTimeout(()=>n(!1),200)};return console.log("ðŸ”§ SettingsFAB rendered"),e.jsx("button",{onClick:i,className:`fixed bottom-4 left-4 lg:bottom-8 lg:left-8 z-nav w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-150 ease-out ${r?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"}`,style:{backgroundColor:r?"var(--accent)":"var(--btn)",borderColor:"var(--line)",color:"var(--text)",...window.innerWidth<1024&&{bottom:`calc(${Le}px + ${o}px + 16px)`,left:"16px"}},"aria-label":"Open Settings",title:"Settings",disabled:r,children:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}function ut({theme:t,onToggle:r}){const[n,s]=u.useState(!1),{viewportOffset:o}=_e(),i=u.useMemo(()=>Math.max(0,o-50),[o]),d=()=>{s(!0),r(),setTimeout(()=>s(!1),200)};return console.log("ðŸŒ™ ThemeToggleFAB rendered"),e.jsx("button",{onClick:d,className:`fixed bottom-4 right-4 lg:bottom-8 lg:right-8 z-nav w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-150 ease-out ${n?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"}`,style:{backgroundColor:n?"var(--accent)":"var(--btn)",borderColor:"var(--line)",color:"var(--text)",...window.innerWidth<1024&&{bottom:`calc(${Le}px + ${i}px + 16px)`,right:"16px"}},"aria-label":`Switch to ${t==="dark"?"light":"dark"} theme`,title:`Switch to ${t==="dark"?"light":"dark"} theme`,disabled:n,children:t==="dark"?e.jsx("svg",{className:"w-6 h-6",style:{color:"#fbbf24"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-6 h-6",style:{color:"#60a5fa"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}function Rt(t){const r=document.documentElement;t?(r.setAttribute("data-settings-sheet","true"),document.body.style.overflow="hidden"):(r.removeAttribute("data-settings-sheet"),document.body.style.overflow="")}function ie(t){if(t){const r=`#settings/${t}`;location.hash!==r&&history.replaceState(null,"",r)}Rt(!0),window.dispatchEvent(new CustomEvent("settings:open"))}function Hs(){Rt(!1),location.hash.startsWith("#settings/")&&history.replaceState(null,"",location.pathname+location.search),window.dispatchEvent(new Event("settings:close"))}typeof window<"u"&&(window.openSettingsSheet=ie,window.closeSettingsSheet=Hs);function zs({isOpen:t,onClose:r,show:n}){var g,j,p;if(console.log("ðŸ”” ShowNotificationSettingsModal render:",{isOpen:t,show:n==null?void 0:n.title}),!t)return console.log("ðŸ”” Modal not open, returning null"),null;const[s,o]=u.useState(V.getShowSettings(n.id)),[i,d]=u.useState(V.getSettings()),[c,l]=u.useState("default"),a=!!G().pro;u.useEffect(()=>{t&&(o(V.getShowSettings(n.id)),d(V.getSettings()),"Notification"in window&&l(Notification.permission))},[t,n.id]);const x=(h,w)=>{const S={...s,[h]:w};o(S),V.updateShowSettings(n.id,S)},f=(h,w)=>{const S={...s.methods,[h]:w},k={...s,methods:S};o(k),V.updateShowSettings(n.id,k)},N=async()=>{const h=await V.requestPushPermission();l(h?"granted":"denied")},y=async()=>{const h=prompt("Enter your email address to test notifications:");if(h)try{await V.sendTestNotification(h),alert("âœ… Test notification sent! Check your email.")}catch(w){console.error("Test notification failed:",w),alert("âŒ Test notification failed. Please try again.")}};return e.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:r}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",style:{backgroundColor:"var(--card)",color:"var(--text)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--line)"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ”” Notification Settings"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--muted)"},children:["Manage notifications for ",e.jsx("strong",{children:n.title})]})]}),e.jsx("button",{onClick:r,className:"text-2xl hover:opacity-70 transition-opacity",style:{color:"var(--muted)"},children:"Ã—"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Episode Notifications"}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:h=>x("enabled",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"Enable notifications for this show"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:["You will receive notifications for new episodes of ",n.title]})]})]})]}),a&&s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Custom Timing"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Hours before episode airs:"}),e.jsx("select",{value:s.timing||i.proTierTiming,onChange:h=>x("timing",parseInt(h.target.value)),className:"w-full p-2 border rounded",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)",color:"var(--text)"},children:Array.from({length:24},(h,w)=>w+1).map(h=>e.jsxs("option",{value:h,children:[h," hour",h!==1?"s":""," before"]},h))}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Override global timing for this show only"})]})]}),s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notification Methods"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Choose how you want to be notified for this show. These settings override your global preferences."}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((g=s.methods)==null?void 0:g.inApp)!==!1,onChange:h=>f("inApp",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"In-app notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Show notifications within the app"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((j=s.methods)==null?void 0:j.push)!==!1,onChange:h=>f("push",h.target.checked),disabled:c==="denied",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{children:"Push notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Browser notifications (works when app is closed)"}),c==="default"&&e.jsx("button",{onClick:N,className:"text-xs text-blue-500 hover:underline mt-1",children:"Grant permission"}),c==="denied"&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Permission denied. Enable in browser settings."})]})]}),e.jsxs("label",{className:`flex items-center space-x-3 ${a?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("input",{type:"checkbox",checked:((p=s.methods)==null?void 0:p.email)!==!1,onChange:h=>f("email",h.target.checked),disabled:!a,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"Email notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:a?"Receive notifications via email":"Pro feature - upgrade to enable email notifications"}),!a&&e.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded-full mt-1",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"})]})]})]}),s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Test Notifications"}),e.jsx("button",{onClick:y,className:"w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“§ Send Test Email"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Test the email notification system to make sure it's working properly"})]}),e.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)"},children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Global Notification Settings"}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--muted)"},children:"These settings apply to all shows unless overridden above."}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Global Notifications:"}),e.jsx("span",{style:{color:"var(--text)"},children:i.globalEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Default Timing:"}),e.jsx("span",{style:{color:"var(--text)"},children:a?`${i.proTierTiming} hours before`:i.freeTierTiming==="24-hours-before"?"24 hours before":"7 days before"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t",style:{borderColor:"var(--line)"},children:e.jsx("button",{onClick:r,className:"px-4 py-2 rounded border transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},children:"Done"})})]})]})}const R={tabs:{bloopers:"Bloopers",extras:"Extras"},buttons:{watchOnProvider:t=>`Watch on ${t}`,checkExtras:"Check Extras",learnMore:"Learn more",reportItem:"Report this item"},emptyStates:{bloopers:{title:"No bloopers available yet",description:"Official bloopers and outtakes for this title haven't been released yet.",cta:"Check Extras",secondaryCta:"Learn more"},extras:{title:"No extras available",description:"Additional content for this title isn't available yet.",cta:"Check back later"}},searchAssist:{title:"Bloopers from around the web",disclaimer:"Videos play on their host site. Availability may change.",providerPills:{youtube:"YouTube",vimeo:"Vimeo",official:"Official",archive:"Archive"}},tooltips:{bloopersDisabled:"Bloopers access requires Pro subscription",extrasDisabled:"Extras access requires Pro subscription",searchAssist:"Curated selection of verified bloopers from official channels"},help:{bloopersArticle:"/help/pro-bloopers-and-extras",learnMoreText:"Learn more about how Flicklet curates bloopers and outtakes"},analytics:{bloopersModalOpen:"bloopers_modal_open",bloopersPlayInApp:"bloopers_play_inapp",bloopersClickOut:"bloopers_click_out",bloopersEmpty:"bloopers_empty",helpOpen:"help_open"},quality:{verifiedChannel:"Verified channel",allowlistedChannel:"Official channel",nonEmbeddable:"Link-out only",highQuality:"High quality"},admin:{searchAssistPreview:"Search Assist Preview",approveItem:"Approve",holdItem:"Hold",reason:"Reason",candidates:"Candidate items"}},Ne=["Marvel Entertainment","DC Comics","Warner Bros. Pictures","Sony Pictures Entertainment","Universal Pictures","Paramount Pictures","20th Century Studios","Disney","Netflix","HBO","AMC Networks","FX Networks","Showtime","Starz","Apple TV","Amazon Prime Video"],ht=["bloopers","gag reel","outtakes","behind the scenes","making of","deleted scenes","blooper reel","funny moments","mistakes","goofs"],oe={MIN_VIEWS:1e3,MAX_DURATION_MINUTES:30,MIN_DURATION_SECONDS:30,MAX_RESULTS:5};class J{static async searchBloopers(r){const{showTitle:n,maxResults:s=oe.MAX_RESULTS}=r;try{const o=this.buildSearchQuery(n),i=await this.searchYouTube(o,s);return this.filterAndRankResults(i,n).slice(0,s)}catch(o){return console.warn("Bloopers search assist failed:",o),[]}}static buildSearchQuery(r){const n=ht.slice(0,3);return`${r} ${n.join(" OR ")}`}static async searchYouTube(r,n){return console.log(`[STUB] Searching YouTube for: "${r}"`),[{title:`${r} - Bloopers and Outtakes`,channel:"Official Channel",url:"https://youtube.com/watch?v=mock1",thumbUrl:"/placeholder-thumb.jpg",verified:!0,embeddable:!0,provider:"youtube",reason:"allowlisted",publishedAt:"2024-01-15T00:00:00Z",duration:"5:30",viewCount:5e4},{title:`${r} - Gag Reel Compilation`,channel:"Verified Creator",url:"https://youtube.com/watch?v=mock2",thumbUrl:"/placeholder-thumb.jpg",verified:!0,embeddable:!1,provider:"youtube",reason:"verified",publishedAt:"2024-01-10T00:00:00Z",duration:"8:15",viewCount:25e3}]}static filterAndRankResults(r,n){return r.filter(s=>this.passesQualityChecks(s,n)).sort((s,o)=>this.rankResult(s,o))}static passesQualityChecks(r,n){return!(!this.isTitleRelevant(r.title,n)||r.viewCount&&r.viewCount<oe.MIN_VIEWS||r.duration&&!this.isDurationValid(r.duration)||this.hasSpammyIndicators(r.title))}static isTitleRelevant(r,n){const s=r.toLowerCase(),d=n.toLowerCase().split(" ").filter(l=>l.length>2).some(l=>s.includes(l)),c=ht.some(l=>s.includes(l.toLowerCase()));return d&&c}static isDurationValid(r){const n=r.split(":").map(Number);let s=0;return n.length===2?s=n[0]*60+n[1]:n.length===3&&(s=n[0]*3600+n[1]*60+n[2]),s>=oe.MIN_DURATION_SECONDS&&s<=oe.MAX_DURATION_MINUTES*60}static hasSpammyIndicators(r){return[/compilation/i,/best of/i,/top 10/i,/reaction/i,/review/i,/explained/i,/theory/i,/fan edit/i,/ai generated/i,/clickbait/i].some(s=>s.test(r))}static rankResult(r,n){const s=Ne.some(c=>r.channel.toLowerCase().includes(c.toLowerCase())),o=Ne.some(c=>n.channel.toLowerCase().includes(c.toLowerCase()));if(s&&!o)return-1;if(!s&&o)return 1;if(r.verified&&!n.verified)return-1;if(!r.verified&&n.verified)return 1;if(r.embeddable&&!n.embeddable)return-1;if(!r.embeddable&&n.embeddable)return 1;const i=r.viewCount||0;return(n.viewCount||0)-i}static isAllowlistedChannel(r){return Ne.some(n=>r.toLowerCase().includes(n.toLowerCase()))}static getProviderDisplayName(r){return R.searchAssist.providerPills[r]||r}}const It=({video:t,onClose:r})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-75 pt-48",children:e.jsxs("div",{className:"relative w-full max-w-4xl mx-4 mt-24",children:[e.jsx("button",{onClick:r,className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10","aria-label":"Close video player",children:"Ã—"}),e.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:e.jsx("iframe",{src:t.embedUrl,title:t.title,className:"absolute top-0 left-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"mt-4 text-white",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-gray-300",children:t.channelName})]})]})}),qs=({isOpen:t,onClose:r,showId:n,showTitle:s})=>{console.log("ðŸŽ¬ BloopersModal render:",{isOpen:t,showId:n,showTitle:s});const[o,i]=u.useState([]),[d,c]=u.useState([]),[l,m]=u.useState(!1),[a,x]=u.useState(null),f=u.useRef(null),N=u.useRef(null),y=ce("EXTRAS_BLOOPERS_SEARCH_ASSIST");u.useEffect(()=>{t&&N.current&&N.current.focus()},[t]),u.useEffect(()=>{const h=w=>{if(t){if(w.key==="Escape")r();else if(w.key==="Tab"){const S=f.current;if(S){const k=S.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),T=k[0],A=k[k.length-1];w.shiftKey&&document.activeElement===T?(w.preventDefault(),A.focus()):!w.shiftKey&&document.activeElement===A&&(w.preventDefault(),T.focus())}}}};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t,r]),u.useEffect(()=>{t&&g()},[t,n]);const g=async()=>{m(!0);try{const{extrasProvider:h}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),w=await h.fetchBloopers(n,s);if(i(w.videos),w.videos.length>0)console.log("ðŸ“Š Analytics: bloopers_official_found",{showId:n,showTitle:s,count:w.videos.length});else if(y){const S=await J.searchBloopers({showTitle:s,showId:n});c(S),console.log("ðŸ“Š Analytics: bloopers_search_assist",{showId:n,showTitle:s,count:S.length})}else c([]),console.log("ðŸ“Š Analytics: bloopers_empty",{showId:n,showTitle:s,reason:"no_official_no_search_assist"});console.log("ðŸ“Š Analytics: bloopers_modal_open",{showId:n,showTitle:s,officialCount:w.videos.length,searchAssistCount:y?(await J.searchBloopers({showTitle:s,showId:n})).length:0})}catch(h){console.error("Failed to load bloopers:",h),i([]),c([])}finally{m(!1)}},j=h=>{if(h.embeddable){const w={id:`bloopers_${h.title.replace(/\s+/g,"_")}`,title:h.title,description:`Bloopers from ${h.channel}`,thumbnail:h.thumbUrl,duration:h.duration||"Unknown",publishedAt:h.publishedAt||new Date().toISOString(),provider:h.provider,channelName:h.channel,channelId:"unknown",embedUrl:h.url,watchUrl:h.url,canEmbed:h.embeddable,category:"bloopers",showId:n,showTitle:s,status:"approved",lastVerified:new Date().toISOString()};x(w),console.log("ðŸ“Š Analytics: bloopers_play_inapp",{showId:n,showTitle:s,title:h.title,provider:h.provider,reason:h.reason})}else window.open(h.url,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,title:h.title,provider:h.provider,reason:h.reason})},p=h=>{h.canEmbed?(x(h),console.log("ðŸ“Š Analytics: bloopers_play",{showId:n,showTitle:s,videoId:h.id,videoTitle:h.title,provider:h.provider,category:h.category})):(window.open(h.watchUrl,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,videoId:h.id,videoTitle:h.title,provider:h.provider,category:h.category,reason:"cannot_embed"}))};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pt-32",children:e.jsxs("div",{ref:f,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-7xl max-h-[75vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"bloopers-modal-title","aria-describedby":"bloopers-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{id:"bloopers-modal-title",className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s," - Bloopers"]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl","aria-label":"Close modal",children:"Ã—"})]}),e.jsx("div",{id:"bloopers-modal-description",className:"p-4 overflow-y-auto max-h-96",children:l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading bloopers..."})]}):o.length===0&&d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.bloopers.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.bloopers.description})]}),e.jsx("div",{className:"space-x-4",children:e.jsx("button",{onClick:()=>window.open(R.help.bloopersArticle,"_blank"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:R.emptyStates.bloopers.secondaryCta})})]}):e.jsxs("div",{className:"space-y-6",children:[o.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Official Bloopers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((h,w)=>e.jsxs("div",{ref:w===0?N:null,onClick:()=>p(h),onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),p(h))},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`Play ${h.title} from ${h.channelName}`,children:[e.jsx("img",{src:h.thumbnail,alt:`Thumbnail for ${h.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:h.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.channelName}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:new Date(h.publishedAt).toLocaleDateString()}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"Official"})]})]})]},h.id))})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:R.searchAssist.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((h,w)=>e.jsx(Dt,{result:h,onClick:()=>j(h)},`search_${w}`))}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 italic",children:R.searchAssist.disclaimer})]})]})})]})}),a&&e.jsx(It,{video:a,onClose:()=>x(null)})]}):null},Dt=M.forwardRef(({result:t,onClick:r},n)=>{const s=J.getProviderDisplayName(t.provider);return e.jsxs("div",{ref:n,onClick:r,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`${t.embeddable?"Play":"Watch"} ${t.title} on ${s}`,children:[e.jsx("img",{src:t.thumbUrl,alt:`Thumbnail for ${t.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.channel}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:s}),t.verified&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"âœ“ Verified"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:t.duration||"Unknown"})]}),t.reason&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:t.reason==="official"?"Official content":t.reason==="allowlisted"?"Official channel":t.reason==="verified"?"Verified channel":t.reason})]})]})});Dt.displayName="BloopersCard";const Ys=({isOpen:t,onClose:r,showId:n,showTitle:s})=>{console.log("ðŸŽ­ ExtrasModal render:",{isOpen:t,showId:n,showTitle:s});const[o,i]=u.useState("bloopers"),[d,c]=u.useState([]),[l,m]=u.useState([]),[a,x]=u.useState(!1),[f,N]=u.useState(null),y=u.useRef(null),g=u.useRef(null),j=ce("EXTRAS_BLOOPERS_SEARCH_ASSIST");u.useEffect(()=>{t&&g.current&&g.current.focus()},[t]),u.useEffect(()=>{const b=E=>{if(t){if(E.key==="Escape")r();else if(E.key==="Tab"){const C=y.current;if(C){const L=C.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),ee=L[0],K=L[L.length-1];E.shiftKey&&document.activeElement===ee?(E.preventDefault(),K.focus()):!E.shiftKey&&document.activeElement===K&&(E.preventDefault(),ee.focus())}}}};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[t,r]),u.useEffect(()=>{t&&p()},[t,n,o]);const p=async()=>{x(!0);try{o==="bloopers"?await h():await w()}finally{x(!1)}},h=async()=>{try{const{extrasProvider:b}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),E=await b.fetchBloopers(n,s);if(E.videos.length>0){const C=E.videos.map(L=>({title:L.title,channel:L.channelName,url:L.watchUrl,thumbUrl:L.thumbnail,verified:!0,embeddable:L.canEmbed,provider:L.provider,reason:"official",publishedAt:L.publishedAt,duration:L.duration}));m(C),console.log("ðŸ“Š Analytics: bloopers_official_found",{showId:n,showTitle:s,count:C.length})}else if(j){const C=await J.searchBloopers({showTitle:s,showId:n});m(C),console.log("ðŸ“Š Analytics: bloopers_search_assist",{showId:n,showTitle:s,count:C.length})}else m([]),console.log("ðŸ“Š Analytics: bloopers_empty",{showId:n,showTitle:s,reason:"no_official_no_search_assist"})}catch(b){console.error("Failed to load bloopers:",b),m([])}},w=async()=>{try{const{extrasProvider:b}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),E=await b.fetchExtras(n,s);c(E.videos),console.log("ðŸ“Š Analytics: extras_open",{showId:n,showTitle:s,videoCount:E.videos.length})}catch(b){console.error("Failed to load extras:",b);const E=[{id:"mock_extras_1",title:`${s} - Behind the Scenes`,description:"Making of featurette and cast interviews",thumbnail:"https://picsum.photos/320/180?random=3",duration:"8:15",publishedAt:"2023-03-10T00:00:00Z",provider:"youtube",channelName:"Official Channel",channelId:"mock_channel_1",embedUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",watchUrl:"https://youtube.com/watch?v=dQw4w9WgXcQ",canEmbed:!0,category:"extras",showId:n,showTitle:s,status:"approved",lastVerified:"2024-01-15T00:00:00Z"}];c(E),console.log("ðŸ“Š Analytics: extras_fallback",{showId:n,showTitle:s,videoCount:E.length,error:b instanceof Error?b.message:"Unknown error"})}},S=b=>{if(b.embeddable){const E={id:`bloopers_${b.title.replace(/\s+/g,"_")}`,title:b.title,description:`Bloopers from ${b.channel}`,thumbnail:b.thumbUrl,duration:b.duration||"Unknown",publishedAt:b.publishedAt||new Date().toISOString(),provider:b.provider,channelName:b.channel,channelId:"unknown",embedUrl:b.url,watchUrl:b.url,canEmbed:b.embeddable,category:"bloopers",showId:n,showTitle:s,status:"approved",lastVerified:new Date().toISOString()};N(E),console.log("ðŸ“Š Analytics: bloopers_play_inapp",{showId:n,showTitle:s,title:b.title,provider:b.provider,reason:b.reason})}else window.open(b.url,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,title:b.title,provider:b.provider,reason:b.reason})},k=b=>{b.canEmbed?(N(b),console.log("ðŸ“Š Analytics: extras_play",{showId:n,showTitle:s,videoId:b.id,videoTitle:b.title,provider:b.provider,category:b.category})):(window.open(b.watchUrl,"_blank"),console.log("ðŸ“Š Analytics: extras_click_out",{showId:n,showTitle:s,videoId:b.id,videoTitle:b.title,provider:b.provider,category:b.category,reason:"cannot_embed"}))},T=()=>l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.bloopers.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.bloopers.description})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsx("button",{onClick:()=>i("extras"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:R.emptyStates.bloopers.cta}),e.jsx("button",{onClick:()=>window.open(R.help.bloopersArticle,"_blank"),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:R.emptyStates.bloopers.secondaryCta})]})]}):e.jsxs("div",{className:"space-y-6",children:[l.some(b=>b.reason==="official")&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Official Bloopers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.filter(b=>b.reason==="official").map((b,E)=>e.jsx(Ce,{result:b,onClick:()=>S(b),ref:E===0?g:null},`official_${E}`))})]}),l.some(b=>b.reason!=="official")&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:R.searchAssist.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.filter(b=>b.reason!=="official").map((b,E)=>e.jsx(Ce,{result:b,onClick:()=>S(b)},`search_${E}`))}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 italic",children:R.searchAssist.disclaimer})]})]}),A=()=>d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.extras.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.extras.description})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((b,E)=>e.jsxs("div",{ref:E===0?g:null,onClick:()=>k(b),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),k(b))},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`Play ${b.title} from ${b.channelName}`,children:[e.jsx("img",{src:b.thumbnail,alt:`Thumbnail for ${b.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:b.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:b.channelName}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:new Date(b.publishedAt).toLocaleDateString()}),e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:b.provider})]})]})]},b.id))});return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pt-32",children:e.jsxs("div",{ref:y,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-7xl max-h-[75vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"extras-modal-title","aria-describedby":"extras-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{id:"extras-modal-title",className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s," - Behind the Scenes"]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl","aria-label":"Close modal",children:"Ã—"})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex space-x-8 px-4","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>i("bloopers"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="bloopers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:R.tabs.bloopers}),e.jsx("button",{onClick:()=>i("extras"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="extras"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:R.tabs.extras})]})}),e.jsx("div",{id:"extras-modal-description",className:"p-4 overflow-y-auto max-h-96",children:a?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:["Loading ",o==="bloopers"?"bloopers":"extras","..."]})]}):o==="bloopers"?T():A()})]})}),f&&e.jsx(It,{video:f,onClose:()=>N(null)})]}):null},Ce=M.forwardRef(({result:t,onClick:r},n)=>{const s=J.getProviderDisplayName(t.provider);return e.jsxs("div",{ref:n,onClick:r,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`${t.embeddable?"Play":"Watch"} ${t.title} on ${s}`,children:[e.jsx("img",{src:t.thumbUrl,alt:`Thumbnail for ${t.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.channel}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:s}),t.verified&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"âœ“ Verified"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:t.duration||"Unknown"})]}),t.reason&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:t.reason==="official"?"Official content":t.reason==="allowlisted"?"Official channel":t.reason==="verified"?"Verified channel":t.reason})]})]})});Ce.displayName="BloopersCard";const mt=({isOpen:t,onClose:r})=>{var l,m;const n=u.useRef(null),s=u.useRef(null),[o,i]=M.useState("getting-started");if(u.useEffect(()=>{t&&s.current&&s.current.focus()},[t]),u.useEffect(()=>{const a=x=>{t&&x.key==="Escape"&&r()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,r]),u.useEffect(()=>{var y;if(!t)return;const a=(y=n.current)==null?void 0:y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),x=a[0],f=a[a.length-1],N=g=>{g.key==="Tab"&&(g.shiftKey?document.activeElement===x&&(f==null||f.focus(),g.preventDefault()):document.activeElement===f&&(x==null||x.focus(),g.preventDefault()))};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[t]),!t)return null;const d=[{id:"getting-started",title:"Getting Started",icon:"ðŸš€"},{id:"managing-library",title:"Managing Your Library",icon:"ðŸ“š"},{id:"pro-features",title:"Pro Features",icon:"â­"},{id:"search-discovery",title:"Search & Discovery",icon:"ðŸ”"},{id:"notifications",title:"Notifications",icon:"ðŸ””"},{id:"settings-customization",title:"Settings & Customization",icon:"âš™ï¸"},{id:"troubleshooting",title:"Troubleshooting",icon:"ðŸ”§"},{id:"keyboard-shortcuts",title:"Keyboard Shortcuts",icon:"âŒ¨ï¸"}],c=()=>{switch(o){case"getting-started":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Welcome to Flicklet!"})," Your personal TV and movie tracker."]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Home:"})," Your dashboard with personalized content recommendations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Currently Watching:"})," Track shows you're actively watching"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Want to Watch:"})," Build your wishlist of shows and movies"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Watched:"})," Keep track of completed shows and movies"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Discovery:"})," Find new content based on genres and preferences"]})]})]});case"managing-library":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Adding Content:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Use the search function to find shows and movies"}),e.jsx("li",{children:'Click the "+" button on any card to add to your lists'}),e.jsx("li",{children:"Drag and drop cards between lists for quick organization"}),e.jsx("li",{children:`Use the "Not Interested" button to hide content you don't want to see`})]}),e.jsx("p",{children:e.jsx("strong",{children:"Organizing Lists:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Create custom lists for specific themes or genres"}),e.jsx("li",{children:"Add personal notes and tags to any item"}),e.jsx("li",{children:"Rate shows and movies with our 5-star system"}),e.jsx("li",{children:"Track episode progress for ongoing shows"})]})]});case"pro-features":return e.jsxs("div",{className:"space-y-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Enhanced Experience:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Bloopers & Behind-the-Scenes:"})," Access exclusive content on show cards"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Advanced Notifications:"})," Customize when and how you're notified about new episodes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Theme Packs:"})," Holiday and movie-themed visual experiences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Social Features:"})," FlickWord games and trivia challenges"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Episode Tracking:"})," Detailed progress tracking for ongoing series"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸŽ¬"}),"Bloopers & Outtakes (Pro)"]}),e.jsxs("div",{className:"space-y-4 text-blue-800 dark:text-blue-200",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What it is"}),e.jsx("p",{className:"text-sm",children:"Flicklet surfaces behind-the-scenes bloopers, outtakes, and gag reels for supported titles."})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"How it works"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"When official bloopers/outtakes are released by the rights holder and permitted for embedding, Flicklet displays them in-app using the provider's official player."}),e.jsx("li",{children:"If no official bloopers are available, Flicklet curates a short list of off-site videos that meet strict criteria. These open in a new tab and play on the hosting provider's site."})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Curation criteria (when official assets are unavailable)"}),e.jsx("p",{className:"text-sm mb-2",children:"We only surface links that pass all of the following checks:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Source authenticity:"})," posted by an official studio/network/distributor channel, verified creator, or a source with clear permission to publish."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Provider policy compliance:"})," embeddable where permitted; otherwise link-out only. We never rehost, modify, or strip provider branding."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Content relevance:"})," the video is clearly a blooper/outtake/gag reel for the selected title (not general clips, fan edits, or unrelated compilations)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Quality bar:"})," acceptable resolution and audio; no camrips or low-effort reposts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stability:"})," not obviously subject to immediate takedown; periodically re-verified."]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What you'll see"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Bloopers tab:"}),` plays official clips in-app when allowed. If not, you'll see a small set of vetted "Watch on [Provider]" links.`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Extras tab:"})," trailers, featurettes, interviews, and other official bonus materials when available."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"No-clip state:"})," if nothing qualifies, the tab explains that no approved bloopers are available yet."]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What we won't do"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"No paywalled streamer embeds (e.g., subscription services)."}),e.jsx("li",{children:"No scraping, downloading, or re-uploading third-party content."}),e.jsx("li",{children:"No embedding of videos where the provider or uploader has disabled embedding."})]})]}),e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-800/30 border border-blue-300 dark:border-blue-700 rounded p-3",children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Legal notice"}),e.jsx("p",{className:"text-sm",children:"Flicklet indexes metadata and links to third-party content hosted by their respective providers. Availability, quality, and playback are controlled by those providers and may change or be removed at any time."})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Why this benefits you"}),e.jsx("p",{className:"text-sm",children:"You get the best available bloopers and outtakes without dealing with broken uploads, shady sources, or copyright headaches. When official clips exist, they're featured first. When they don't, you still get a high-quality, trustworthy path to watch them elsewhere and hop right back to Flicklet."})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:[e.jsx("strong",{children:"Note:"}),' Pro features are marked with a golden "PRO" badge and may require upgrading your account.']})})]});case"search-discovery":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Finding Content:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Search by title, actor, director, or genre"}),e.jsx("li",{children:"Filter results by type (TV shows, movies, people)"}),e.jsx("li",{children:"Browse by genre in the Discovery section"}),e.jsx("li",{children:"Get personalized recommendations on the Home page"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Smart Recommendations:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Based on your watching history and preferences"}),e.jsx("li",{children:"Updates automatically as you add more content"}),e.jsx("li",{children:"Considers your ratings and viewing patterns"})]})]});case"notifications":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Stay Updated:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Episode Alerts:"})," Get notified when new episodes air"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weekly Discover:"})," Receive curated recommendations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Monthly Stats:"})," See your viewing statistics and trends"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Custom Timing:"})," Set how far in advance you want to be notified"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"Managing Notifications:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Enable/disable notifications in Settings"}),e.jsx("li",{children:"Set custom notification times for each show"}),e.jsx("li",{children:"Choose which lists trigger notifications"})]})]});case"settings-customization":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Personalization:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Choose between light and dark themes"}),e.jsx("li",{children:"Set your display name and personality level"}),e.jsx("li",{children:"Customize your home page layout"}),e.jsx("li",{children:"Select your preferred genres for recommendations"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Data Management:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Your data syncs across devices when signed in"}),e.jsx("li",{children:"Export your library for backup purposes"}),e.jsx("li",{children:"Import data from other tracking services"})]})]});case"troubleshooting":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Common Issues:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Content not loading:"})," Check your internet connection and try refreshing"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Search not working:"})," Try different keywords or check your spelling"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Notifications not appearing:"})," Check your browser's notification permissions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Data not syncing:"})," Ensure you're signed in and have a stable connection"]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[e.jsx("strong",{children:"Need more help?"})," Use the feedback form in Settings to report issues or suggest improvements."]})})]});case"keyboard-shortcuts":return e.jsx("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Navigation:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Esc"})," Close modals"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Tab"})," Navigate between elements"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Enter"})," Activate buttons/links"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Search:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"/"})," Focus search bar"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Esc"})," Clear search"]})]})]})]})});default:return null}};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-overlay bg-black bg-opacity-50",onClick:r,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-modal flex items-center justify-center p-4",children:e.jsxs("div",{ref:n,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title","aria-describedby":"help-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{id:"help-modal-title",className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Help & Support"}),e.jsx("button",{ref:s,onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl font-bold p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close help modal",children:"Ã—"})]}),e.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[e.jsx("div",{className:"w-64 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:e.jsx("nav",{className:"p-4 space-y-2",children:d.map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${o===a.id?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[e.jsx("span",{className:"mr-2",children:a.icon}),a.title]},a.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:(l=d.find(a=>a.id===o))==null?void 0:l.icon}),(m=d.find(a=>a.id===o))==null?void 0:m.title]})}),e.jsx("div",{id:"help-modal-description",children:c()})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Flicklet v2 â€¢ Last updated: ",new Date().toLocaleDateString()]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Got it!"})]})]})})]}):null};function Gs({onRefresh:t,threshold:r=80,maxPullDistance:n=120,resistance:s=.5,enabled:o=!0}){const[i,d]=u.useState({isPulling:!1,isRefreshing:!1,pullDistance:0,canRefresh:!1}),c=u.useRef(0),l=u.useRef(0),m=u.useRef(!1),a=u.useRef(null),x=u.useCallback(p=>{if(p<=0)return 0;const h=Math.max(.1,1-p/n);return Math.min(p*h,n)},[n,s]),f=u.useCallback(p=>{if(!o||i.isRefreshing)return;const h=a.current;if(!h||h.scrollTop>0)return;const w=p.touches[0];c.current=w.clientY,l.current=w.clientY,m.current=!1},[o,i.isRefreshing]),N=u.useCallback(p=>{if(!o||i.isRefreshing)return;const h=a.current;if(!h||h.scrollTop>0)return;const w=p.touches[0];l.current=w.clientY;const S=l.current-c.current;if(!m.current&&S>10&&(m.current=!0),m.current&&S>0){const k=x(S),T=k>=r;d(A=>({...A,isPulling:!0,pullDistance:k,canRefresh:T})),p.preventDefault()}},[o,i.isRefreshing,r,x]),y=u.useCallback(async()=>{if(!(!o||!i.isPulling)){if(i.canRefresh&&!i.isRefreshing){d(p=>({...p,isRefreshing:!0,isPulling:!1}));try{await t()}catch(p){console.error("Pull-to-refresh error:",p)}finally{d(p=>({...p,isRefreshing:!1,pullDistance:0,canRefresh:!1}))}}else d(p=>({...p,isPulling:!1,pullDistance:0,canRefresh:!1}));m.current=!1}},[o,i.isPulling,i.canRefresh,i.isRefreshing,t]);u.useEffect(()=>{const p=a.current;if(p)return p.addEventListener("touchstart",f,{passive:!1}),p.addEventListener("touchmove",N,{passive:!1}),p.addEventListener("touchend",y,{passive:!0}),()=>{p.removeEventListener("touchstart",f),p.removeEventListener("touchmove",N),p.removeEventListener("touchend",y)}},[f,N,y]);const g=()=>{const p=Math.min(i.pullDistance/r,1),h=i.isPulling?Math.min(p,1):0,w=i.isRefreshing?1:Math.min(p,1);return{transform:`translateY(${i.pullDistance}px) scale(${w})`,opacity:h,transition:i.isRefreshing?"all 0.3s ease-out":"opacity 0.2s ease-out"}},j=()=>({transform:i.isPulling?`translateY(${i.pullDistance}px)`:"translateY(0)",transition:i.isRefreshing?"transform 0.3s ease-out":"none"});return{state:i,containerRef:a,refreshIndicatorStyles:g(),containerStyles:j(),isEnabled:o}}function Ks({state:t,styles:r,className:n=""}){const{isPulling:s,isRefreshing:o,canRefresh:i}=t;return!s&&!o?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-center py-4 ${n}`,style:{...r,backgroundColor:"var(--background)",borderBottom:"1px solid var(--line)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:o?e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:`w-6 h-6 transition-transform duration-200 ${i?"rotate-180":""}`,children:e.jsx("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--primary)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),e.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text)"},children:o?"Refreshing...":i?"Release to refresh":"Pull to refresh"})]})})}function xt({children:t,className:r="",indicatorClassName:n="",compact:s=!1,...o}){const{state:i,containerRef:d,refreshIndicatorStyles:c,containerStyles:l,isEnabled:m}=Gs(o);return m?e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{state:i,styles:c,className:n}),e.jsx("div",{ref:d,className:`relative ${r}`,style:l,children:t})]}):e.jsx(e.Fragment,{children:t})}function Qs(){const[t,r]=u.useState(()=>{try{const n=localStorage.getItem("flicklet:forYouRows");if(n)return JSON.parse(n)}catch(n){console.error("Failed to load For You rows:",n)}return[{id:"1",mainGenre:"anime",subGenre:"action",title:"Anime/Action"},{id:"2",mainGenre:"horror",subGenre:"psychological",title:"Horror/Psychological"},{id:"3",mainGenre:"comedy",subGenre:"romantic",title:"Comedy/Romantic"}]});return u.useEffect(()=>{const n=s=>{r(s.detail)};return window.addEventListener("forYouRows:updated",n),()=>window.removeEventListener("forYouRows:updated",n)},[]),t}function Xs(t,r){return Ee({queryKey:["tmdb","genre",t,r],queryFn:()=>(console.log(`ðŸŽ¬ useGenreContent: Fetching ${t}/${r}`),zt(t,r)),staleTime:3e5,enabled:!!(t&&r),retry:(n,s)=>(console.error(`TMDB ${t}/${r} error:`,s),n<2)})}function Zs(t){console.log("ðŸŽ¬ useForYouContent: Processing rows:",t);const[r,n]=u.useState(0);return u.useEffect(()=>{const o=_.subscribe(()=>{console.log("ðŸ”„ Library changed, updating For You filtering"),n(i=>i+1)});return()=>{o()}},[]),t.map(o=>Xs(o.mainGenre,o.subGenre)).map((o,i)=>{var l,m,a,x,f,N;const d=((l=o.data)==null?void 0:l.filter(y=>{const g=_.has(y.id,y.kind);return g&&console.log(`ðŸš« Filtering out ${y.title} (already in library)`),!g}))||[],c={...o,data:d,rowId:(m=t[i])==null?void 0:m.id,title:((a=t[i])==null?void 0:a.title)||`${(x=t[i])==null?void 0:x.mainGenre}/${(f=t[i])==null?void 0:f.subGenre}`};return console.log(`ðŸŽ¬ useForYouContent: Row ${i} (${c.title}):`,{isLoading:o.isLoading,isError:o.isError,originalDataLength:((N=o.data)==null?void 0:N.length)||0,filteredDataLength:d.length,libraryVersion:r,error:o.error}),c})}function Js(){const[t,r]=u.useState({isSupported:"serviceWorker"in navigator,isRegistered:!1,isOnline:navigator.onLine,registration:null,error:null}),n=u.useCallback(async()=>{if(!t.isSupported){r(c=>({...c,error:"Service Worker not supported"}));return}try{console.log("[SW] Registering service worker...");const c=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("[SW] Service worker registered:",c),r(l=>({...l,isRegistered:!0,registration:c,error:null})),c.addEventListener("updatefound",()=>{console.log("[SW] Update found, installing...");const l=c.installing;l&&l.addEventListener("statechange",()=>{l.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New version available, reloading..."),window.location.reload())})})}catch(c){console.error("[SW] Registration failed:",c),r(l=>({...l,error:c instanceof Error?c.message:"Registration failed"}))}},[t.isSupported]),s=u.useCallback(async()=>{if(t.registration)try{await t.registration.unregister(),console.log("[SW] Service worker unregistered"),r(c=>({...c,isRegistered:!1,registration:null}))}catch(c){console.error("[SW] Unregistration failed:",c),r(l=>({...l,error:c instanceof Error?c.message:"Unregistration failed"}))}},[t.registration]),o=u.useCallback(async c=>{var l;if((l=t.registration)!=null&&l.active)try{t.registration.active.postMessage({type:"CACHE_IMAGES",data:{urls:c}}),console.log("[SW] Pre-caching images:",c.length)}catch(m){console.error("[SW] Pre-cache failed:",m)}},[t.registration]),i=u.useCallback(async()=>{var c;if((c=t.registration)!=null&&c.active)try{t.registration.active.postMessage({type:"CLEAR_CACHE"}),console.log("[SW] Cache cleared")}catch(l){console.error("[SW] Clear cache failed:",l)}},[t.registration]),d=u.useCallback(async()=>{var c;return(c=t.registration)!=null&&c.active?new Promise(l=>{const m=new MessageChannel;m.port1.onmessage=a=>{l(a.data.size)},t.registration.active.postMessage({type:"GET_CACHE_SIZE"},[m.port2])}):0},[t.registration]);return u.useEffect(()=>{const c=()=>{r(m=>({...m,isOnline:!0})),console.log("[SW] Back online")},l=()=>{r(m=>({...m,isOnline:!1})),console.log("[SW] Gone offline")};return window.addEventListener("online",c),window.addEventListener("offline",l),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",l)}},[]),u.useEffect(()=>{t.isSupported&&!t.isRegistered&&!t.error&&n()},[t.isSupported,t.isRegistered,t.error,n]),{...t,register:n,unregister:s,preCacheImages:o,clearCache:i,getCacheSize:d}}let $=null;function er(t){$=t}async function ae(t,r){try{const n=r==="movie"?`/movie/${t}`:`/tv/${t}`,s=await qt(n),o=s.title||s.name||"Untitled",i=r==="movie"?s.release_date:s.first_air_date,d=i?String(i).slice(0,4):void 0;return{title:o,year:d,showStatus:r==="tv"?s.status:void 0,lastAirDate:r==="tv"?s.last_air_date:void 0}}catch(n){return console.warn(`Failed to fetch media data for ${r}:${t}:`,n),{title:"Untitled"}}}function tr(){const t=X("card:want",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"wishlist");const m=q.getSettings(),a=P("itemAdded",m.personalityLevel);$==null||$(a,"success")}),r=X("card:watched",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"watched");const m=q.getSettings(),a=P("itemAdded",m.personalityLevel);$==null||$(a,"success")}),n=X("card:notInterested",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"not");const m=q.getSettings(),a=P("itemRemoved",m.personalityLevel);$==null||$(a,"success")}),s=X("card:holidayAdd",()=>{}),o=X("card:startWatching",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);let m=null;d==="tv"&&(m=await _t(Number(i))),_.upsert({id:i,mediaType:d,title:l.title,year:l.year,nextAirDate:m,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"watching");const a=q.getSettings(),x=P("itemAdded",a.personalityLevel);$==null||$(x,"success")});return()=>{t(),r(),n(),s(),o()}}function sr(){return Ee({queryKey:["tmdb","in-theaters"],queryFn:Yt,staleTime:6e4,retry:(t,r)=>(console.error("TMDB In Theaters error:",r),t<3)})}class rr extends u.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){Gt("PersonalityErrorBoundary caught an error:",r,n)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const r=q.getSettings(),n=P("errorGeneric",r.personalityLevel);return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:n}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Try Again"})]})}return this.props.children}}console.log("ðŸ”„ backfillShowStatus module loaded");async function nr(){var l,m,a;console.log("ðŸ”„ Starting show status backfill...");const t=_.getByList("watching"),r=_.getByList("wishlist"),n=_.getByList("watched"),s=_.getByList("not");console.log("ðŸ“Š Library contents:",{watching:t.length,wishlist:r.length,watched:n.length,not:s.length});const o=t.concat(r).concat(n).concat(s),i=o.filter(x=>x.mediaType==="tv");console.log("ðŸ“º All TV shows in library:",i.map(x=>({title:x.title,showStatus:x.showStatus,hasShowStatus:x.showStatus!==void 0,lastAirDate:x.lastAirDate,id:x.id,mediaType:x.mediaType})));const d=i.slice(0,3);console.log("ðŸ” First 3 TV shows detailed:",d),console.log("ðŸ” First show showStatus:",(l=d[0])==null?void 0:l.showStatus),console.log("ðŸ” First show showStatus type:",typeof((m=d[0])==null?void 0:m.showStatus)),console.log("ðŸ” First show showStatus === undefined:",((a=d[0])==null?void 0:a.showStatus)===void 0);const c=o.filter(x=>x.mediaType==="tv"&&(!x.showStatus||x.showStatus===void 0));console.log(`ðŸ“º Found ${c.length} TV shows without show status`);for(const x of c)try{console.log(`ðŸ” Fetching status for: ${x.title}`);const f=await Mt(Number(x.id));f?(_.upsert({...x,showStatus:f.status,lastAirDate:f.lastAirDate||void 0},x.list),console.log(`âœ… Updated ${x.title}: ${f.status}`)):console.log(`âŒ No status data for ${x.title}`),await new Promise(N=>setTimeout(N,100))}catch(f){console.error(`âŒ Error fetching status for ${x.title}:`,f)}console.log("âœ… Show status backfill completed")}const ft=u.lazy(()=>U(()=>import("./settings-b3931a55.js").then(t=>t.S),["assets/settings-b3931a55.js","assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),gt=u.lazy(()=>U(()=>import("./modals-5fe29d8c.js").then(t=>t.D),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),or=u.lazy(()=>U(()=>import("./games-23f18348.js").then(t=>t.e),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"])),ke=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.L),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),ar=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.h),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),ir=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.D),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]));function lr(){var ze,qe;const[t,r]=u.useState("home"),n=typeof window<"u"&&window.location.pathname==="/",s=G(),[o,i]=u.useState(!1),d=D(),{viewportOffset:c}=_e(),[l,m]=u.useState(null),[a,x]=u.useState(!1),[f,N]=u.useState(!1),[y,g]=u.useState(null),[j,p]=u.useState(!1),[h,w]=u.useState(null),[S,k]=u.useState(!1),[T,A]=u.useState(null),[b,E]=u.useState(!1),[C,L]=u.useState(!1);u.useEffect(()=>{console.log("ðŸ”” Modal state changed:",{showNotificationModal:j,notificationModalItem:y==null?void 0:y.title})},[j,y]),u.useEffect(()=>{console.log("ðŸŽ¬ Bloopers modal state changed:",{showBloopersModal:S,hasBloopersModalItem:!!h,bloopersModalItemTitle:h==null?void 0:h.title})},[S,h]),u.useEffect(()=>{console.log("ðŸŽ­ Extras modal state changed:",{showExtrasModal:b,hasExtrasModalItem:!!T,extrasModalItemTitle:T==null?void 0:T.title})},[b,T]);const{toasts:ee,addToast:K,removeToast:$t}=Et(),{loading:Re,authInitialized:ue,isAuthenticated:Ie}=de(),[Ft,De]=u.useState(!1);u.useEffect(()=>{if(!Re&&ue&&!Ie){const v=setTimeout(()=>{De(!0)},1e3);return()=>clearTimeout(v)}},[Re,ue,Ie]);const{isOnline:Bt}=Js(),Pe=async()=>{console.log("ðŸ”„ Pull-to-refresh triggered"),window.dispatchEvent(new CustomEvent("force-refresh")),await new Promise(v=>setTimeout(v,1e3))},[F,$e]=u.useState({q:"",genre:null,type:"all",nonce:0}),Q=!!F.q.trim(),Fe=(v,I,O)=>{const be=v.trim();$e(ye=>({q:be,genre:I,type:O,nonce:ye.nonce+1}))},te=()=>$e({q:"",genre:null,type:"all",nonce:0}),Wt=Qs(),Be=Zs(Wt),We=W("watching"),Ot=W("wishlist"),Ut=W("watched"),Vt=sr(),Oe=()=>{const v=Ye(),I=ce("settings_mobile_sheet_v1");v&&I?ie():i(!0)};u.useEffect(()=>{er(K);const v=tr(),I=setTimeout(()=>{console.log("ðŸ”„ App.tsx triggering show status backfill..."),nr()},3e3);return()=>{v(),clearTimeout(I)}},[K]),u.useEffect(()=>{const v=()=>{const I=window.location.hash;if(I.startsWith("#settings/")){const O=I.replace("#settings/","").toLowerCase(),be=Ye(),ye=ce("settings_mobile_sheet_v1");be&&ye&&(["account","display","advanced"].includes(O)?ie(O):ie())}else I==="#games/flickword"&&N(!0)};return v(),window.addEventListener("hashchange",v),()=>window.removeEventListener("hashchange",v)},[]),u.useEffect(()=>(window.openFlickWordModal=()=>{N(!0)},window.closeFlickWordModal=()=>{N(!1)},()=>{delete window.openFlickWordModal,delete window.closeFlickWordModal}),[]);function Ue(v){switch(v){case"currently-watching":return We;case"up-next":return[];case"in-theaters":return Vt.data??[];default:return}}const he=v=>{m(v),x(!0)},me=v=>{m(v),x(!0)},xe=v=>{console.log("ðŸ”” App.tsx handleNotificationToggle called for:",v.title,v.mediaType),console.log("ðŸ”” Setting notification modal state:",{showNotificationModal:!0,notificationModalItem:v}),g(v),p(!0),console.log("ðŸ”” Modal state should now be set")},fe=v=>{console.log("â° App.tsx handleSimpleReminder called for:",v.title,v.mediaType),alert(`â° Simple reminder set for "${v.title}" - you'll be notified 24 hours before the next episode airs!`)},ge=v=>{console.log("ðŸŽ¬ App.tsx handleBloopersOpen called for:",v.title,v.mediaType),console.log("ðŸŽ¬ Setting bloopers modal state:",{showBloopersModal:!0,bloopersModalItem:v}),le.flushSync(()=>{w(v),k(!0)}),console.log("ðŸŽ¬ Bloopers modal state should now be set")},pe=v=>{console.log("ðŸŽ­ App.tsx handleExtrasOpen called for:",v.title,v.mediaType),console.log("ðŸŽ­ Setting extras modal state:",{showExtrasModal:!0,extrasModalItem:v}),le.flushSync(()=>{A(v),E(!0)}),console.log("ðŸŽ­ Extras modal state should now be set")},Ve=()=>{console.log("â“ App.tsx handleHelpOpen called"),console.log("â“ Current showHelpModal state:",C),L(!0),console.log("â“ setShowHelpModal(true) called")},He=(v,I,O)=>{_.updateNotesAndTags(v.id,v.mediaType,I,O),x(!1),m(null)};return t!=="home"?e.jsxs("main",{className:"min-h-screen",style:{backgroundColor:"var(--bg)",color:"var(--text)",minHeight:"100lvh"},children:[b&&e.jsxs("div",{style:{position:"fixed",top:"10px",left:"10px",background:"red",color:"white",padding:"10px",zIndex:9999,fontSize:"12px"},children:["ðŸŽ¬ MODAL SHOULD BE VISIBLE: ",T==null?void 0:T.title]}),e.jsx(et,{appName:"Flicklet",showMarquee:!1,onSearch:(v,I,O)=>Fe(v,I??null,O??"all"),onClear:te,onHelpOpen:()=>{console.log("â“ App.tsx onHelpOpen prop called"),Ve()}}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Qe,{current:t,onChange:r})}),e.jsx("div",{className:"block lg:hidden",children:e.jsx(Xe,{current:t,onChange:r})}),e.jsx("div",{className:"pb-20 lg:pb-0",style:{paddingBottom:c>0&&((ze=window.visualViewport)==null?void 0:ze.offsetTop)===0?`${80+c}px`:void 0},children:Q?e.jsx(it,{query:F.q,genre:F.genre,searchType:F.type,nonce:F.nonce}):e.jsxs(e.Fragment,{children:[t==="home"&&e.jsx("div",{className:"min-h-screen","data-page":"home",children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",style:{color:"var(--text)"},children:"Welcome to Flicklet"}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(lt,{}),e.jsx(ct,{}),Be.map((v,I)=>e.jsx(je,{id:v.rowId,...v},I)),e.jsx(Ge,{}),e.jsx(st,{}),e.jsx(rt,{})]})]})}),t==="watching"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading watching list..."}),children:e.jsx("div",{"data-page":"lists","data-list":"watching",children:e.jsx(ke,{title:"Currently Watching",items:We,mode:"watching",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="want"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading wishlist..."}),children:e.jsx("div",{"data-page":"lists","data-list":"wishlist",children:e.jsx(ke,{title:"Want to Watch",items:Ot,mode:"want",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="watched"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading watched list..."}),children:e.jsx("div",{"data-page":"lists","data-list":"watched",children:e.jsx(ke,{title:"Watched",items:Ut,mode:"watched",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="mylists"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading my lists..."}),children:e.jsx("div",{"data-page":"lists","data-list":"mylists",children:e.jsx(ar,{})})}),t==="discovery"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading discovery..."}),children:e.jsx(ir,{query:F.q,genreId:F.genre?parseInt(F.genre):null})})]})}),!Bt&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-yellow-500 text-black px-4 py-2 rounded-lg shadow-lg text-sm font-medium",children:"ðŸ“± You're offline - viewing cached content"}),e.jsx(dt,{onClick:Oe}),e.jsx(ut,{theme:s.layout.theme,onToggle:()=>q.updateTheme(s.layout.theme==="dark"?"light":"dark")}),o&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading settings..."}),children:e.jsx(ft,{onClose:()=>i(!1)})}),a&&l&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notes..."}),children:e.jsx(gt,{item:l,isOpen:a,onClose:()=>x(!1),onSave:He})}),(()=>{const v=j&&y;return console.log("ðŸ”” Modal render check:",{showNotificationModal:j,notificationModalItem:y==null?void 0:y.title,shouldRender:v}),v})()&&e.jsx(zs,{isOpen:j,onClose:()=>{console.log("ðŸ”” Closing notification modal"),p(!1)},show:{id:Number(y.id),title:y.title,mediaType:y.mediaType}}),console.log("ðŸŽ¬ BloopersModal render check:",{showBloopersModal:S,hasBloopersModalItem:!!h,bloopersModalItemTitle:h==null?void 0:h.title}),S&&h&&e.jsx(qs,{isOpen:S,onClose:()=>k(!1),showId:(()=>{const v=typeof h.id=="string"?parseInt(h.id):h.id;return console.log("ðŸŽ¬ BloopersModal showId conversion:",{originalId:h.id,convertedId:v,type:typeof v}),v})(),showTitle:h.title}),b&&T&&e.jsx(Ys,{isOpen:b,onClose:()=>E(!1),showId:(()=>{const v=typeof T.id=="string"?parseInt(T.id):T.id;return console.log("ðŸŽ­ ExtrasModal showId conversion:",{originalId:T.id,convertedId:v,type:typeof v}),v})(),showTitle:T.title}),C&&e.jsx(mt,{isOpen:C,onClose:()=>L(!1)})]}):ue?e.jsx(rr,{children:e.jsxs("main",{className:"min-h-screen",style:{backgroundColor:"var(--bg)",color:"var(--text)",minHeight:"100lvh"},children:[e.jsx(et,{appName:"Flicklet",showMarquee:n&&!Q,onSearch:(v,I,O)=>Fe(v,I??null,O??"all"),onClear:te,onHelpOpen:Ve,messages:[P("marquee1",s.personalityLevel),P("marquee2",s.personalityLevel),P("marquee3",s.personalityLevel),P("marquee4",s.personalityLevel),P("marquee5",s.personalityLevel)],marqueeSpeedSec:60,changeEveryMs:3e4}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Qe,{current:t,onChange:v=>{r(v),Q&&te()}})}),e.jsx("div",{className:"block lg:hidden",children:e.jsx(Xe,{current:t,onChange:v=>{r(v),Q&&te()}})}),Q?e.jsx(xt,{onRefresh:Pe,children:e.jsx(it,{query:F.q,genre:F.genre,searchType:F.type,nonce:F.nonce})}):e.jsx(xt,{onRefresh:Pe,children:e.jsx(e.Fragment,{children:t==="home"&&e.jsxs("div",{className:"pb-20 lg:pb-0",style:{paddingBottom:c>0&&((qe=window.visualViewport)==null?void 0:qe.offsetTop)===0?`${80+c}px`:void 0},children:[e.jsx(Z,{title:d.yourShows,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(lt,{}),e.jsx(ct,{})]})}),e.jsx(Z,{title:d.community,children:e.jsx(Ge,{})}),e.jsx(Z,{title:d.forYou,children:e.jsx("div",{className:"space-y-4",children:Be.map(v=>e.jsx(je,{id:`for-you-${v.rowId}`,title:v.title,items:Array.isArray(v.data)?v.data:[],skeletonCount:12},`for-you-${v.rowId}`))})}),e.jsxs(Z,{title:d.inTheatersNearYou,children:[e.jsx(st,{}),e.jsx(je,{id:"in-theaters",title:d.nowPlaying,items:Array.isArray(Ue("in-theaters"))?Ue("in-theaters").map(v=>({...v,id:String(v.id),year:v.year?parseInt(String(v.year)):void 0})):[],skeletonCount:12})]}),e.jsx(Z,{title:d.feedback,children:e.jsx(rt,{})}),e.jsx(ts,{threshold:400})]})})}),e.jsx(dt,{onClick:Oe}),e.jsx(ut,{theme:s.layout.theme,onToggle:()=>q.updateTheme(s.layout.theme==="dark"?"light":"dark")}),o&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading settings..."}),children:e.jsx(ft,{onClose:()=>i(!1)})}),a&&l&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notes..."}),children:e.jsx(gt,{item:l,isOpen:a,onClose:()=>x(!1),onSave:He})}),ee.map(v=>e.jsx(Es,{message:v.message,type:v.type,personalityLevel:s.personalityLevel,onClose:()=>$t(v.id)},v.id)),e.jsx(jt,{isOpen:Ft,onClose:()=>De(!1)}),f&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading game..."}),children:e.jsx(or,{isOpen:f,onClose:()=>N(!1)})}),C&&e.jsx(mt,{isOpen:C,onClose:()=>L(!1)})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg)",color:"var(--text)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Loading..."})]})})}const Pt=new ss,cr=[{id:"currently-watching",title:"Currently Watching",group:"your-shows"},{id:"up-next",title:"Up Next",group:"your-shows"},{id:"community",title:"Community",group:"community"},{id:"for-you-drama",title:"Drama",group:"for-you"},{id:"for-you-comedy",title:"Comedy",group:"for-you"},{id:"for-you-horror",title:"Horror",group:"for-you"},{id:"in-theaters",title:"In Theaters Near You",group:"in-theaters"},{id:"feedback",title:"Feedback",group:"feedback"}],dr=[{id:"watching",title:"Currently Watching"},{id:"want",title:"Want to Watch"},{id:"watched",title:"Watched"},{id:"discovery",title:"Discovery"}];document.documentElement.dataset.density="compact";Kt({"compact-mobile-v1":!1,"actions-split":!1,"debug-logging":!1});rs();ns();function ur(){window.debugRails=()=>Array.from(document.querySelectorAll("[data-rail]")).map(r=>{const n=r.getAttribute("data-rail")||"",s=r.getAttribute("aria-label")||"",o=r.querySelector("[data-cards]"),i=o?getComputedStyle(o):null;return{id:n,title:s,enabled:getComputedStyle(r).display!=="none",scrollX:(i==null?void 0:i.overflowX)||"n/a"}}),window.debugCards=()=>Array.from(document.querySelectorAll("[data-card]")).slice(0,24).map((r,n)=>{const s=r.closest("[data-rail]"),o=(s==null?void 0:s.getAttribute("data-rail"))||"",i=r.querySelector("[data-poster]"),d=r.querySelector("[data-actions]"),c=i?getComputedStyle(i):null,l=d?getComputedStyle(d):null;return{i:n,railId:o,posterAR:(c==null?void 0:c.aspectRatio)||"n/a",actionsDisplay:(l==null?void 0:l.display)||"n/a",actionsCols:(l==null?void 0:l.gridTemplateColumns)||"n/a"}})}typeof window<"u"&&ur();window.debugEnv=()=>({hasViteTmdbKey:!!"your_tmdb_key_here"});window.debugQueries=()=>Array.from(Pt.getQueryCache().getAll()).map(t=>{var r,n;return{key:((r=t.queryKey)==null?void 0:r.join("/"))??"unknown",status:t.state.status,error:((n=t.state.error)==null?void 0:n.message)??null,dataLen:Array.isArray(t.state.data)?t.state.data.length:t.state.data?1:0}});window.debugTmdbSource=()=>Qt();window.debugStructure=()=>({rails:cr,tabs:dr});window.debugLists=()=>{try{const t=JSON.parse(localStorage.getItem("flicklet.library.v2")||"{}"),r=Object.values(t).reduce((o,i)=>(o[i.list]=(o[i.list]||0)+1,o),{}),n=JSON.parse(localStorage.getItem("flicklet:v2:saved")||"[]"),s=n.reduce((o,i)=>(o[i.status]=(o[i.status]||0)+1,o),{});return{new:{total:Object.keys(t).length,...r},old:{total:n.length,...s}}}catch{return{new:{total:0},old:{total:0}}}};window.debugTabs=()=>[...document.querySelectorAll('header button,[role="tab"]')].map(t=>{var r;return(r=t.textContent)==null?void 0:r.trim()}).filter(Boolean);window.debugCardButtons=t=>{const r=document.querySelector(`[data-rail="${t}"]`),n=r==null?void 0:r.querySelector("[data-card]");return[...(n==null?void 0:n.querySelectorAll("[data-actions] button"))||[]].map(s=>{var o;return(o=s.textContent)==null?void 0:o.trim()})};window.debugLibrary=()=>{try{return{message:"Library debug function disabled in browser environment"}}catch{return{watching:0,wishlist:0,watched:0,not:0}}};Se.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(os,{client:Pt,children:e.jsx(as,{children:e.jsx(lr,{})})})}));

```

## android\app\src\main\assets\public\assets\settings-b3931a55.js
```
var H=Object.defineProperty;var q=(t,s,c)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[s]=c;var F=(t,s,c)=>(q(t,typeof s!="symbol"?s+"":s,c),c);import{q as S,N as Q,_ as D,r as P,u as K,c as R}from"./modals-5fe29d8c.js";import{j as e,g as $,a as M,b as W,c as X,l as Z,u as ee,d as se,s as O}from"./games-23f18348.js";import{r as g}from"./react-vendor-b1791c80.js";class te{constructor(){F(this,"username","");F(this,"usernamePrompted",!1);F(this,"loading",!0);F(this,"subscribers",new Set)}getState(){return{username:this.username,usernamePrompted:this.usernamePrompted,loading:this.loading}}setUsername(s){this.username=s,this.notifySubscribers()}setUsernamePrompted(s){this.usernamePrompted=s,this.notifySubscribers()}setLoading(s){this.loading=s,this.notifySubscribers()}subscribe(s){return this.subscribers.add(s),()=>this.subscribers.delete(s)}notifySubscribers(){this.subscribers.forEach(s=>s())}}const w=new te;function V(){const[t,s]=g.useState(()=>w.getState());g.useEffect(()=>{const a=w.subscribe(()=>{s(w.getState())});return()=>{a()}},[]);const{username:c,usernamePrompted:h,loading:d}=t;g.useEffect(()=>{const a=async()=>{const l=S.getCurrentUser();if(console.log("ðŸ”„ Loading username for user:",l==null?void 0:l.uid),!(l!=null&&l.uid)){console.log("âŒ No user, resetting state"),w.setUsername(""),w.setUsernamePrompted(!1),w.setLoading(!1);return}try{const j=await S.getUserSettings(l.uid);if(j){const v=j.username||"",N=j.usernamePrompted||!1;N&&!v?(console.log("ðŸ”„ Resetting usernamePrompted flag - username is empty"),await S.updateUserSettings(l.uid,{usernamePrompted:!1}),w.setUsernamePrompted(!1),console.log("âœ… Flag reset complete, username should trigger modal")):w.setUsernamePrompted(N),w.setUsername(v),console.log("âœ… Username loaded:",{username:v,prompted:N})}}catch(j){console.error("Failed to load username:",j)}finally{w.setLoading(!1)}};return a(),S.subscribe(l=>{console.log("ðŸ”” Auth subscription triggered:",{hasUser:!!(l!=null&&l.uid),uid:l==null?void 0:l.uid}),l!=null&&l.uid?a():(w.setUsername(""),w.setUsernamePrompted(!1),w.setLoading(!1))})},[]);const m=async a=>{const r=S.getCurrentUser();if(!r)throw new Error("No authenticated user");try{await S.updateUserSettings(r.uid,{username:a,usernamePrompted:!0}),w.setUsername(a),w.setUsernamePrompted(!0),console.log("âœ… Username updated:",a)}catch(l){throw console.error("Failed to update username:",l),l}},n=async()=>{const a=S.getCurrentUser();if(!a)throw new Error("No authenticated user");try{await S.updateUserSettings(a.uid,{usernamePrompted:!0}),w.setUsernamePrompted(!0),console.log("âœ… Username prompt skipped")}catch(r){throw console.error("Failed to skip username prompt:",r),r}},y=g.useCallback(()=>{const a=S.getCurrentUser(),r=!!(a!=null&&a.uid&&!c&&!h);return console.log("ðŸŽ¯ needsUsernamePrompt check:",{hasUser:!!(a!=null&&a.uid),username:c,usernamePrompted:h,result:r,currentUser:a?{uid:a.uid,email:a.email}:null}),r},[c,h]);return{username:c,usernamePrompted:h,loading:d,updateUsername:m,skipUsernamePrompt:n,needsUsernamePrompt:y}}function ae({personalityLevel:t}){const s=[{category:"Welcome Message",key:"welcome"},{category:"Empty List",key:"emptyWatching"},{category:"Item Added",key:"itemAdded"},{category:"Search Empty",key:"searchEmpty"},{category:"Error Message",key:"errorGeneric"},{category:"Marquee Message",key:"marquee1"}],c=d=>{switch(d){case 1:return"Regular";case 2:return"Semi-sarcastic";case 3:return"Severely sarcastic";default:return"Regular"}},h=d=>{switch(d){case 1:return"Friendly and helpful";case 2:return"A bit cheeky";case 3:return"Maximum sass";default:return"Friendly and helpful"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:[c(t)," Personality"]}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:h(t)})]}),e.jsx("div",{className:"grid gap-3",children:s.map(({category:d,key:m})=>e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"text-xs font-medium mb-1",style:{color:"var(--muted)"},children:[d,":"]}),e.jsxs("div",{className:"text-sm",style:{color:"var(--text)"},children:['"',$(m,t),'"']})]},m))}),e.jsxs("div",{className:"text-center text-xs",style:{color:"var(--muted)"},children:["These messages will appear throughout the app based on your personality setting.",e.jsx("br",{}),e.jsx("span",{className:"text-green-400",children:"âœ“ Apple App Store compliant"})]})]})}const U=[{id:"anime",name:"Anime",subgenres:[{id:"action",name:"Action"},{id:"romance",name:"Romance"},{id:"fantasy",name:"Fantasy"},{id:"slice-of-life",name:"Slice of Life"},{id:"thriller",name:"Thriller"},{id:"comedy",name:"Comedy"}]},{id:"horror",name:"Horror",subgenres:[{id:"psychological",name:"Psychological"},{id:"supernatural",name:"Supernatural"},{id:"slasher",name:"Slasher"},{id:"gothic",name:"Gothic"},{id:"found-footage",name:"Found Footage"},{id:"body-horror",name:"Body Horror"}]},{id:"comedy",name:"Comedy",subgenres:[{id:"romantic",name:"Romantic"},{id:"dark",name:"Dark"},{id:"satirical",name:"Satirical"},{id:"slapstick",name:"Slapstick"},{id:"parody",name:"Parody"},{id:"stand-up",name:"Stand-up"}]},{id:"drama",name:"Drama",subgenres:[{id:"period",name:"Period"},{id:"legal",name:"Legal"},{id:"medical",name:"Medical"},{id:"family",name:"Family"},{id:"political",name:"Political"},{id:"crime",name:"Crime"}]},{id:"action",name:"Action",subgenres:[{id:"martial-arts",name:"Martial Arts"},{id:"spy",name:"Spy"},{id:"war",name:"War"},{id:"adventure",name:"Adventure"},{id:"superhero",name:"Superhero"},{id:"thriller",name:"Thriller"}]},{id:"science-fiction",name:"Science Fiction",subgenres:[{id:"space-opera",name:"Space Opera"},{id:"cyberpunk",name:"Cyberpunk"},{id:"dystopian",name:"Dystopian"},{id:"time-travel",name:"Time Travel"},{id:"alien",name:"Alien"},{id:"post-apocalyptic",name:"Post-Apocalyptic"}]},{id:"fantasy",name:"Fantasy",subgenres:[{id:"high-fantasy",name:"High Fantasy"},{id:"urban-fantasy",name:"Urban Fantasy"},{id:"dark-fantasy",name:"Dark Fantasy"},{id:"fairy-tale",name:"Fairy Tale"},{id:"mythology",name:"Mythology"},{id:"magic",name:"Magic"}]},{id:"thriller",name:"Thriller",subgenres:[{id:"psychological",name:"Psychological"},{id:"crime",name:"Crime"},{id:"mystery",name:"Mystery"},{id:"espionage",name:"Espionage"},{id:"legal",name:"Legal"},{id:"political",name:"Political"}]},{id:"romance",name:"Romance",subgenres:[{id:"romantic-comedy",name:"Romantic Comedy"},{id:"period",name:"Period"},{id:"young-adult",name:"Young Adult"},{id:"erotic",name:"Erotic"},{id:"lgbtq",name:"LGBTQ+"},{id:"historical",name:"Historical"}]},{id:"documentary",name:"Documentary",subgenres:[{id:"nature",name:"Nature"},{id:"biographical",name:"Biographical"},{id:"historical",name:"Historical"},{id:"social",name:"Social"},{id:"scientific",name:"Scientific"},{id:"true-crime",name:"True Crime"}]}];function re({row:t,onUpdate:s,onRemove:c,canRemove:h}){const d=U.find(a=>a.id===t.mainGenre),m=(d==null?void 0:d.subgenres)||[],n=a=>{var j,v;const r=U.find(N=>N.id===a),l={...t,mainGenre:a,subGenre:((j=r==null?void 0:r.subgenres[0])==null?void 0:j.id)||"",title:r?`${r.name}/${((v=r.subgenres[0])==null?void 0:v.name)||""}`:""};s(l)},y=a=>{const r=m.find(v=>v.id===a),l=U.find(v=>v.id===t.mainGenre),j={...t,subGenre:a,title:l&&r?`${l.name}/${r.name}`:t.title};s(j)};return e.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium",style:{color:"var(--text)"},children:["Row ",t.id]}),h&&e.jsx("button",{onClick:c,className:"text-sm px-2 py-1 rounded border transition-colors",style:{color:"var(--muted)",borderColor:"var(--line)",backgroundColor:"transparent"},children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Main Genre"}),e.jsxs("select",{value:t.mainGenre,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 rounded border text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},children:[e.jsx("option",{value:"",children:"Select Genre"}),U.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Sub Genre"}),e.jsxs("select",{value:t.subGenre,onChange:a=>y(a.target.value),className:"w-full px-3 py-2 rounded border text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},disabled:!d,children:[e.jsx("option",{value:"",children:"Select Sub Genre"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]}),t.title&&e.jsxs("div",{className:"mt-3 p-2 rounded text-sm",style:{backgroundColor:"var(--btn)",color:"var(--muted)"},children:[e.jsx("strong",{children:"Preview:"}),' "',t.title,'" will appear in For You section']})]})}function le(){const[t,s]=g.useState(()=>{try{const n=localStorage.getItem("flicklet:forYouRows");if(n)return JSON.parse(n)}catch(n){console.error("Failed to load For You rows:",n)}return[{id:"1",mainGenre:"anime",subGenre:"action",title:"Anime/Action"},{id:"2",mainGenre:"horror",subGenre:"psychological",title:"Horror/Psychological"},{id:"3",mainGenre:"comedy",subGenre:"romantic",title:"Comedy/Romantic"}]}),c=n=>{s(n),localStorage.setItem("flicklet:forYouRows",JSON.stringify(n)),window.dispatchEvent(new CustomEvent("forYouRows:updated",{detail:n}))},h=n=>{const y=t.map(a=>a.id===n.id?n:a);c(y)},d=()=>{if(t.length>=3)return;const n={id:String(t.length+1),mainGenre:"",subGenre:"",title:""};c([...t,n])},m=n=>{const y=t.filter(a=>a.id!==n);c(y)};return e.jsxs("div",{className:"space-y-4",children:[t.map(n=>e.jsx(re,{row:n,onUpdate:h,onRemove:()=>m(n.id),canRemove:t.length>1},n.id)),t.length<3&&e.jsxs("button",{onClick:d,className:"w-full p-4 rounded-lg border-2 border-dashed transition-colors",style:{borderColor:"var(--line)",color:"var(--muted)",backgroundColor:"transparent"},children:["+ Add Another Row (",t.length,"/3)"]}),e.jsxs("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--muted)"},children:[e.jsx("strong",{children:"ðŸ’¡ Tip:"})," Your For You section will show personalized recommendations based on these genre combinations. The titles will automatically update as you make selections."]})]})}const oe=g.lazy(()=>D(()=>import("./modals-5fe29d8c.js").then(t=>t.F),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]).then(t=>({default:t.NotificationSettings}))),ie=g.lazy(()=>D(()=>import("./modals-5fe29d8c.js").then(t=>t.G),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]).then(t=>({default:t.NotificationCenter}))),ne=g.lazy(()=>D(()=>import("./AdminExtrasPage-81d592be.js"),["assets/AdminExtrasPage-81d592be.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/extrasProvider-bcdf59df.js"]));function ce({onClose:t}){const[s,c]=g.useState("general"),[h,d]=g.useState(!1),[m,n]=g.useState(!1),[y,a]=g.useState(!1),[r,l]=g.useState(!1),j=M(),v=W(),N=X();g.useEffect(()=>(Z(),()=>{ee()}),[]);const C=[{id:"general",label:v.general},{id:"notifications",label:v.notifications},{id:"layout",label:v.layout},{id:"data",label:v.data},{id:"social",label:"ðŸ‘¥ Social"},{id:"community",label:"ðŸ† Community"},{id:"pro",label:v.pro},{id:"admin",label:"âš™ï¸ Admin"},{id:"about",label:v.about}];return e.jsxs("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-start justify-center pt-24 p-4",style:{backgroundColor:"rgba(0,0,0,0.8)"},children:[e.jsxs("div",{className:"rounded-xl w-full max-w-4xl h-[80vh] flex overflow-hidden",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"w-48 p-4",style:{backgroundColor:"var(--btn)",borderRightColor:"var(--line)",borderRight:"1px solid"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:v.settings}),e.jsx("button",{onClick:t,className:"transition-colors",style:{color:"var(--muted)"},onMouseEnter:o=>o.currentTarget.style.color="var(--text)",onMouseLeave:o=>o.currentTarget.style.color="var(--muted)","aria-label":"Close Settings",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"space-y-1",children:C.map(o=>e.jsx("button",{onClick:()=>c(o.id),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:s===o.id?"var(--card)":"transparent",color:s===o.id?"var(--text)":"var(--muted)"},onMouseEnter:p=>{s!==o.id&&(p.currentTarget.style.backgroundColor="var(--card)",p.currentTarget.style.opacity="0.5")},onMouseLeave:p=>{s!==o.id&&(p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.opacity="1")},children:o.label},o.id))})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s==="general"&&e.jsx(de,{settings:j,translations:v,currentLanguage:N,onShowNotInterestedModal:()=>n(!0)}),s==="notifications"&&e.jsx(me,{onOpenSettings:()=>a(!0),onOpenCenter:()=>l(!0)}),s==="layout"&&e.jsx(xe,{settings:j}),s==="data"&&e.jsx(he,{setShowSharingModal:d}),s==="social"&&e.jsx(ge,{}),s==="community"&&e.jsx(ye,{}),s==="pro"&&e.jsx(ue,{}),s==="admin"&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading admin..."}),children:e.jsx(ne,{})}),s==="about"&&e.jsx(pe,{})]})]}),h&&e.jsx(ve,{onClose:()=>d(!1)}),e.jsx(Q,{isOpen:m,onClose:()=>n(!1)}),y&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notification settings..."}),children:e.jsx(oe,{isOpen:y,onClose:()=>a(!1)})}),r&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notification center..."}),children:e.jsx(ie,{isOpen:r,onClose:()=>l(!1)})})]})}function de({settings:t,translations:s,currentLanguage:c,onShowNotInterestedModal:h}){const d=P("watching"),m=P("wishlist"),n=P("watched"),y=P("not"),a={watching:d.filter(x=>x.mediaType==="tv").length,wishlist:m.filter(x=>x.mediaType==="tv").length,watched:n.filter(x=>x.mediaType==="tv").length,not:y.filter(x=>x.mediaType==="tv").length},r={watching:d.filter(x=>x.mediaType==="movie").length,wishlist:m.filter(x=>x.mediaType==="movie").length,watched:n.filter(x=>x.mediaType==="movie").length,not:y.filter(x=>x.mediaType==="movie").length},{username:l,updateUsername:j}=V(),[v,N]=g.useState(l),[C,o]=g.useState(!1);g.useEffect(()=>{N(l)},[l]);const p=x=>{N(x),o(x!==l)},A=async()=>{if(C&&window.confirm("Are you sure you want to change your username? This will update your profile."))try{await j(v),o(!1)}catch(L){console.error("Failed to update username:",L),alert("Failed to update username. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:s.general}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:[s.language," / Idioma"]}),e.jsx("div",{className:"space-y-2",children:[{lang:"en",label:s.english,flag:"ðŸ‡ºðŸ‡¸"},{lang:"es",label:s.spanish,flag:"ðŸ‡ªðŸ‡¸"}].map(({lang:x,label:L,flag:E})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"language",value:x,checked:c===x,onChange:()=>se(x),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsx("div",{children:e.jsxs("div",{className:"font-medium",style:{color:"var(--text)"},children:[E," ",L]})})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.username}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:x=>p(x.target.value),className:"flex-1 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.username}),C&&e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:s.save})]}),C&&e.jsx("p",{className:"mt-1 text-sm text-yellow-400",children:"âš ï¸ Changing your display name will update your profile"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"My Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)"},children:[e.jsx("h5",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"TV Shows"}),e.jsxs("div",{className:"space-y-1 text-sm",style:{color:"var(--muted)"},children:[e.jsxs("div",{children:["Currently Watching: ",a.watching]}),e.jsxs("div",{children:["Want to Watch: ",a.wishlist]}),e.jsxs("div",{children:["Watched: ",a.watched]}),e.jsxs("div",{children:["Not Interested: ",a.not]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)"},children:[e.jsx("h5",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Movies"}),e.jsxs("div",{className:"space-y-1 text-sm",style:{color:"var(--muted)"},children:[e.jsxs("div",{children:["Currently Watching: ",r.watching]}),e.jsxs("div",{children:["Want to Watch: ",r.wishlist]}),e.jsxs("div",{children:["Watched: ",r.watched]}),e.jsxs("div",{children:["Not Interested: ",r.not]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"Not Interested Management"}),e.jsx("button",{className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},onClick:h,children:"Manage Not Interested List"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.personalityLevel}),e.jsx("div",{className:"space-y-2",children:[{level:1,label:s.regular,description:s.friendlyAndHelpful},{level:2,label:s.semiSarcastic,description:s.aBitCheeky},{level:3,label:s.severelySarcastic,description:s.maximumSass}].map(({level:x,label:L,description:E})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"personality",value:x,checked:t.personalityLevel===x,onChange:()=>O.updatePersonalityLevel(x),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text)"},children:L}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:E})]})]},x))}),e.jsx("div",{className:"mt-2 p-3 rounded-lg",style:{backgroundColor:"var(--card)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--text)"},children:[s.preview,": ",$("welcome",t.personalityLevel)]})}),e.jsx("div",{className:"mt-4",children:e.jsx(ae,{personalityLevel:t.personalityLevel})})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset all settings to defaults?")&&O.resetToDefaults()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Reset System to Defaults"})})]})}function me({onOpenSettings:t,onOpenCenter:s}){const h=M().pro||!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ”” Notifications"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Manage your notification preferences and view notification history."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:t,className:"p-4 rounded-lg border transition-colors hover:opacity-80",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"âš™ï¸"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Notification Settings"}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:"Configure timing and methods"})]})]})}),e.jsx("button",{onClick:s,className:"p-4 rounded-lg border transition-colors hover:opacity-80",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“‹"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Notification Center"}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:"View notification history"})]})]})})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"Current Settings"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Episode Reminders:"}),e.jsx("span",{style:{color:"var(--text)"},children:"Enabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Timing:"}),e.jsx("span",{style:{color:"var(--text)"},children:h?"Custom (Pro)":"24 hours before"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Methods:"}),e.jsxs("span",{style:{color:"var(--text)"},children:["In-app, Push",h?", Email":""]})]})]})]}),!h&&e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--btn)",borderColor:"var(--accent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ’Ž"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:"Upgrade to Pro"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Get precise timing control, email notifications, and advanced features"})]}),e.jsx("span",{className:"px-3 py-1 text-sm font-semibold rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"})]})})]})}function xe({settings:t}){const s=W(),c=K(),[h,d]=g.useState(null),[m,n]=g.useState(""),[y,a]=g.useState(""),r=()=>{const o=prompt(s.enterListName||"Enter list name:");if(o!=null&&o.trim())try{R.createList(o.trim())}catch(p){alert(p instanceof Error?p.message:"Failed to create list")}},l=o=>{const p=R.getListById(o);p&&(d(o),n(p.name),a(p.description||""))},j=()=>{if(!(!h||!m.trim()))try{R.updateList(h,{name:m.trim(),description:y.trim()||void 0}),d(null),n(""),a("")}catch(o){alert(o instanceof Error?o.message:"Failed to update list")}},v=()=>{d(null),n(""),a("")},N=o=>{const p=R.getListById(o);if(!p)return;if(window.confirm(`${s.confirmDeleteList||"Are you sure you want to delete"} "${p.name}"? ${s.thisActionCannotBeUndone||"This action cannot be undone."}`))try{R.deleteList(o)}catch(x){alert(x instanceof Error?x.message:"Failed to delete list")}},C=o=>{try{R.setSelectedList(o)}catch(p){alert(p instanceof Error?p.message:"Failed to set default list")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:s.layout}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.themePreference}),e.jsx("div",{className:"space-y-2",children:[{theme:"dark",label:s.dark,description:s.darkThemeDescription},{theme:"light",label:s.light,description:s.lightThemeDescription}].map(({theme:o,label:p,description:A})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"theme",value:o,checked:t.layout.theme===o,onChange:()=>O.updateTheme(o),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text)"},children:p}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:A})]})]},o))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-medium",style:{color:"var(--text)"},children:s.myLists||"My Lists"}),c.customLists.length<c.maxLists&&e.jsx("button",{onClick:r,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.createNewList||"Create New List"})]}),e.jsxs("div",{className:"space-y-3",children:[c.customLists.map(o=>e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:h===o.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:m,onChange:p=>n(p.target.value),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.listName||"List name"}),e.jsx("input",{type:"text",value:y,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.listDescription||"List description (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.save||"Save"}),e.jsx("button",{onClick:v,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:s.cancel||"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-medium",style:{color:"var(--text)"},children:o.name}),o.isDefault&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:"var(--accent)",color:"white"},children:s.default||"Default"})]}),o.description&&e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--muted)"},children:o.description}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:[o.itemCount," ",s.items||"items"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>l(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.edit||"Edit",children:"âœï¸"}),!o.isDefault&&e.jsx("button",{onClick:()=>C(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.setAsDefault||"Set as Default",children:"â­"}),e.jsx("button",{onClick:()=>N(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.delete||"Delete",children:"ðŸ—‘ï¸"})]})]})},o.id)),c.customLists.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:s.noListsCreated||"No lists created yet"}),e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.createYourFirstList||"Create Your First List"})]})]}),e.jsxs("div",{className:"mt-3 text-xs",style:{color:"var(--muted)"},children:[s.listsUsed||"Lists used",": ",c.customLists.length,"/",c.maxLists]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:s.basicCustomization}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.layout.condensedView,onChange:o=>O.updateSettings({layout:{...t.layout,condensedView:o.target.checked}}),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"}),e.jsx("span",{style:{color:"var(--text)"},children:s.condensedView})]}),e.jsx("p",{className:"text-xs ml-7",style:{color:"var(--muted)"},children:"Show more items per screen with smaller cards and shorter button labels. Hides episode tracking and detailed features."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:`flex items-center space-x-3 ${t.layout.condensedView?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:t.layout.episodeTracking,onChange:()=>O.toggleEpisodeTracking(),disabled:t.layout.condensedView,className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"}),e.jsx("span",{style:{color:"var(--text)"},children:s.enableEpisodeTracking})]}),t.layout.condensedView&&e.jsx("p",{className:"text-xs ml-7",style:{color:"var(--muted)"},children:"Episode tracking is disabled in condensed view"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"For You Section Configuration"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:'Customize the three "For You" rows on your home page. Each row combines a main genre with a subgenre for personalized recommendations.'}),e.jsx(le,{})]}),t.pro.isPro&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:s.proFeatures}),e.jsx("p",{style:{color:"var(--muted)"},children:s.themePacksComingSoon})]})]})}function he({setShowSharingModal:t}){const s=W(),c=async()=>{try{const m={watchlists:{movies:{watching:JSON.parse(localStorage.getItem("flicklet-movies-watching")||"[]"),wishlist:JSON.parse(localStorage.getItem("flicklet-movies-wishlist")||"[]"),watched:JSON.parse(localStorage.getItem("flicklet-movies-watched")||"[]")},tv:{watching:JSON.parse(localStorage.getItem("flicklet-tv-watching")||"[]"),wishlist:JSON.parse(localStorage.getItem("flicklet-tv-wishlist")||"[]"),watched:JSON.parse(localStorage.getItem("flicklet-tv-watched")||"[]")}},settings:JSON.parse(localStorage.getItem("flicklet-settings")||"{}"),user:JSON.parse(localStorage.getItem("flicklet-user")||"{}"),timestamp:new Date().toISOString(),version:"1.0"},n=JSON.stringify(m,null,2),y=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(y),r=document.createElement("a");r.href=a,r.download=`flicklet-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),alert("âœ… Backup downloaded successfully!")}catch(m){console.error("Backup failed:",m),alert("âŒ Backup failed. Please try again.")}},h=()=>{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async n=>{var a;const y=(a=n.target.files)==null?void 0:a[0];if(y)try{const r=await y.text(),l=JSON.parse(r);if(!l.watchlists||!l.timestamp)throw new Error("Invalid backup file format");if(!confirm(`âš ï¸ This will replace ALL your current data with the backup from ${new Date(l.timestamp).toLocaleDateString()}.

This action cannot be undone. Continue?`))return;l.watchlists.movies&&(localStorage.setItem("flicklet-movies-watching",JSON.stringify(l.watchlists.movies.watching||[])),localStorage.setItem("flicklet-movies-wishlist",JSON.stringify(l.watchlists.movies.wishlist||[])),localStorage.setItem("flicklet-movies-watched",JSON.stringify(l.watchlists.movies.watched||[]))),l.watchlists.tv&&(localStorage.setItem("flicklet-tv-watching",JSON.stringify(l.watchlists.tv.watching||[])),localStorage.setItem("flicklet-tv-wishlist",JSON.stringify(l.watchlists.tv.wishlist||[])),localStorage.setItem("flicklet-tv-watched",JSON.stringify(l.watchlists.tv.watched||[]))),l.settings&&localStorage.setItem("flicklet-settings",JSON.stringify(l.settings)),l.user&&localStorage.setItem("flicklet-user",JSON.stringify(l.user)),alert("âœ… Data restored successfully! Please refresh the page to see changes."),setTimeout(()=>{window.location.reload()},1e3)}catch(r){console.error("Restore failed:",r),alert("âŒ Restore failed. Please check the backup file and try again.")}},m.click()},d=()=>{if(!confirm(`ðŸš¨ NUCLEAR OPTION: This will permanently delete ALL your data including:

â€¢ All watchlists (movies & TV)
â€¢ All settings
â€¢ All user preferences
â€¢ Everything stored locally

This action CANNOT be undone. Are you absolutely sure?`)||!confirm(`âš ï¸ FINAL WARNING: This will completely wipe your Flicklet data.

Type "DELETE" in the next prompt to confirm.`))return;if(prompt('Type "DELETE" to confirm system wipe:')!=="DELETE"){alert("âŒ System wipe cancelled.");return}try{Object.keys(localStorage).filter(r=>r.startsWith("flicklet-")).forEach(r=>localStorage.removeItem(r)),alert("ðŸ’¥ System wiped successfully! The page will refresh."),setTimeout(()=>{window.location.reload()},1e3)}catch(a){console.error("System wipe failed:",a),alert("âŒ System wipe failed. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:s.data}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ“¤ Share with Friends"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Create Shareable List"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Create a shareable list of your shows and movies to send to friends"}),e.jsx("button",{onClick:()=>t(!0),className:"px-3 py-2 rounded-lg text-sm transition-colors bg-pink-500 hover:bg-pink-600 text-white",children:"ðŸ“¤ Share with Friends"})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ’¾ Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"ðŸ’¾ Backup Data"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Download a complete backup of all your watchlists and settings"}),e.jsx("button",{onClick:c,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-blue-500 hover:bg-blue-600 text-white",children:"ðŸ’¾ Download Backup"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"ðŸ“¥ Restore Data"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Upload a backup file to restore your watchlists and settings"}),e.jsx("button",{onClick:h,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-green-500 hover:bg-green-600 text-white",children:"ðŸ“¥ Restore from Backup"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[e.jsx("h5",{className:"font-medium mb-2 text-red-900 dark:text-red-100",children:"ðŸš¨ System Wipe"}),e.jsx("p",{className:"text-sm mb-3 text-red-700 dark:text-red-300",children:"Permanently delete ALL your data. This action cannot be undone."}),e.jsx("button",{onClick:d,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-red-500 hover:bg-red-600 text-white",children:"ðŸš¨ Nuclear Option"})]})]})]})]})}function ue(){const s=M().pro||!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-6 rounded-lg",style:{backgroundColor:"var(--btn)"},children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ’Ž"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--text)"},children:s?"You are a Pro User!":"Upgrade to Flicklet Pro"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:s?"Thank you for supporting Flicklet! Enjoy all Pro features.":"Unlock advanced features and premium content to enhance your TV and movie tracking experience."}),!s&&e.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"Upgrade to Pro"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-4",style:{color:"var(--text)"},children:"Planned Pro Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸŽ¬"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Bloopers & Behind-the-Scenes"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to bloopers, extras, and behind-the-scenes content on movie and TV show cards"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ””"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Advanced Notifications"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Customizable episode notifications with multiple methods, custom timing, and per-show settings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"â°"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Simple Reminder"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Basic reminder notifications 24 hours before episodes air (in-app only)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--success)",color:"white"},children:"FREE"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ””"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Smart Notifications"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Customizable episode notifications with advanced scheduling and timing options"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“Š"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Advanced Analytics"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Detailed watching statistics and viewing journey insights"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸŽ¨"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Premium Themes"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to premium theme packs and advanced customization options"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ§ "}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Extra Trivia Content"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to additional trivia questions and behind-the-scenes content"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“Š"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"CSV Export"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Export your lists to CSV format for use in spreadsheets"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸš€"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Priority Support"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Faster help when you need it with priority customer support"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)"},children:[e.jsx("h5",{className:"font-medium mb-2",style:{color:"var(--text)"},children:"ðŸš€ What's Coming Next"}),e.jsxs("ul",{className:"text-sm space-y-1",style:{color:"var(--muted)"},children:[e.jsx("li",{children:"â€¢ Social Features: Friend connections and shared lists"}),e.jsx("li",{children:"â€¢ Advanced Recommendations: AI-powered suggestions"}),e.jsx("li",{children:"â€¢ Community Content: User-submitted videos and reviews"}),e.jsx("li",{children:"â€¢ Mobile App: Native iOS and Android apps"}),e.jsx("li",{children:"â€¢ Offline Mode: Full functionality without internet"})]})]})]})}function pe(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ  About Unique4U"}),e.jsxs("div",{className:"space-y-4 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:"We're not here to reinvent the wheel â€” we're here to make the wheel less squeaky. At Unique4U, our rule is simple: keep it simple. The world already has enough apps that feel like a second job to use. We'd rather give you tools that justâ€¦ work."}),e.jsx("p",{children:"Everything we build has its own personality, but they all live under one roof: a people-first, all-inclusive, slightly offbeat house we call Unique4U. If it's fun, useful, and a little different from the pack â€” it belongs here."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"ðŸ‘¥ About the Creators"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:"We're Pam and Travis. Think of us as casual builders with a shared allergy to overcomplication. We make things because we need them, and we figure you probably do too."}),e.jsx("p",{children:`Pam once trained dolphins (true story) and also happens to be really good with numbers. Travis studied English and Philosophy, which means he can overthink and explain it in writing, then somehow turn that into practical business know-how. Together, we're like a mash-up of "creative meets operations" â€” and that combo lets us build apps that are simple, useful, and not boring.`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"ðŸ“± About the App"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:`Here's the deal: you want to remember what you're watching without needing a PhD in App Navigation. We built this because we got tired of two bad options â€” messy notes on our phones or bloated apps that make you log your "episode 7 mid-season thoughts." (Hard pass.)`}),e.jsx("p",{className:"text-xs italic",style:{color:"var(--muted)"},children:"Data Attribution: This product uses the TMDB API but is not endorsed or certified by TMDB."}),e.jsx("p",{children:"So we made this instead:"}),e.jsxs("ul",{className:"space-y-2 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Stupidly easy."})," Open it, add your show, done."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Always free at the core."})," No paywalls for the basics."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Friend-proof sharing."}),' Copy your list and drop it in a text when someone asks, "What should I watch?"']})]})]}),e.jsx("p",{children:"If you watch TV or movies and don't want to make it a hobby just to track them, this app's for you. Simple lists, zero drama."})]})]})]})}function ge(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ‘¥ Social Features"}),e.jsx("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš§"}),e.jsx("h4",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:"Coming Soon!"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:"Social features are in development. Here's what we're planning:"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ‘¥ Friend Connections"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Connect with friends and see what they're watching"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ“‹ Shared Watchlists"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Create collaborative watchlists with friends and family"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ’¬ Activity Feed"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"See what your friends are watching and their ratings"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸŽ¯ Recommendations"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Get personalized recommendations based on your friends' tastes"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(77, 163, 255, 0.1)",borderColor:"var(--accent)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--accent)"},children:"ðŸ”’ Pro Features"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Advanced social features like private groups, custom recommendations, and priority support will be available with Pro."})]})]})}function ye(){const t={games:{flickword:{played:12,won:8,lost:4,streak:3,bestStreak:7},trivia:{played:25,won:18,lost:7,correct:89,total:125}},media:{movies:{watching:5,wishlist:12,watched:47},tv:{watching:8,wishlist:15,watched:23}},community:{friends:0,sharedLists:0,recommendationsGiven:0,recommendationsReceived:0}},s=(h,d)=>d>0?Math.round(h/d*100):0,c=(h,d)=>d>0?Math.round(h/d*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ† Community Stats"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸŽ® Game Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸŽ¯ FlickWord"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Games Played:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.played})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Win Rate:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[s(t.games.flickword.won,t.games.flickword.played),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Current Streak:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.streak})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Best Streak:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.bestStreak})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ§  Trivia"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Games Played:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.trivia.played})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Win Rate:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[s(t.games.trivia.won,t.games.trivia.played),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Accuracy:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[c(t.games.trivia.correct,t.games.trivia.total),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Questions Correct:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[t.games.trivia.correct,"/",t.games.trivia.total]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸ“º Media Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸŽ¬ Movies"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Currently Watching:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watching})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Want to Watch:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.wishlist})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Watched:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watched})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{style:{color:"var(--text)"},children:"Total:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watching+t.media.movies.wishlist+t.media.movies.watched})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ“º TV Shows"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Currently Watching:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watching})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Want to Watch:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.wishlist})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Watched:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watched})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{style:{color:"var(--text)"},children:"Total:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watching+t.media.tv.wishlist+t.media.tv.watched})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸ‘¥ Community Engagement"}),e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Friends Connected:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.friends})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Shared Lists:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.sharedLists})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Recommendations Given:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.recommendationsGiven})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Recommendations Received:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.recommendationsReceived})]})]})})]})]})}function ve({onClose:t}){const{username:s}=V(),c=P("watching"),h=P("wishlist"),d=P("watched"),[m,n]=g.useState({watching:!0,wishlist:!0,watched:!0}),[y,a]=g.useState(new Set),[r,l]=g.useState({includeMovies:!0,includeTV:!0,includeRatings:!0,includeDescriptions:!1}),[j,v]=g.useState(!1),[N,C]=g.useState(""),o=()=>{const i=[];return m.watching&&i.push(...c),m.wishlist&&i.push(...h),m.watched&&i.push(...d),i},p=()=>{let i=o();return!r.includeMovies&&!r.includeTV?[]:(r.includeMovies||(i=i.filter(u=>u.mediaType!=="movie")),r.includeTV||(i=i.filter(u=>u.mediaType!=="tv")),i)},A=()=>{const i=p();return y.size===0?i:i.filter(u=>y.has(u.id.toString()))},x=i=>{n(u=>({...u,[i]:!u[i]}))},L=i=>{l(u=>({...u,[i]:!u[i]}))},E=i=>{a(u=>{const f=new Set(u);return f.has(i)?f.delete(i):f.add(i),f})},B=()=>{const i=p().map(u=>u.id.toString());a(new Set(i))},_=()=>{a(new Set)},J=()=>{const i=s||"Flicklet User",u=A();let f=`ðŸŽ¬ Flicklet - ${i}'s Watchlist
`;return f+=`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

`,m.watching&&u.some(T=>c.some(b=>b.id===T.id))&&(f+=`â–¶ï¸ Currently Watching
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>c.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),m.wishlist&&u.some(T=>h.some(b=>b.id===T.id))&&(f+=`â¤ï¸ Want to Watch
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>h.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),m.watched&&u.some(T=>d.some(b=>b.id===T.id))&&(f+=`âœ… Already Watched
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>d.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),f+=`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`,f+=`ðŸ“± Track your shows and movies with Flicklet!
`,f+=`ðŸ”— https://flicklet.app
`,f},Y=()=>{const i=J();C(i),v(!0)},z=async()=>{try{await navigator.clipboard.writeText(N),alert("Copied to clipboard!")}catch{const u=document.createElement("textarea");u.value=N,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),alert("Copied to clipboard!")}},G=p();return j?e.jsx("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ðŸ“‹ Your Shareable List"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"âœ•"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy the text below and share it with your friends! They can see what you're watching and get recommendations."})}),e.jsx("textarea",{value:N,readOnly:!0,className:"w-full h-64 p-3 border rounded-lg font-mono text-sm bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Close"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“‹ Copy to Clipboard"})]})]})})}):e.jsx("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ðŸ“¤ Share Your Lists"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ“‹ Select Lists to Share"}),e.jsx("div",{className:"space-y-2",children:[{key:"watching",label:"â–¶ï¸ Currently Watching",items:c},{key:"wishlist",label:"â¤ï¸ Want to Watch",items:h},{key:"watched",label:"âœ… Already Watched",items:d}].map(({key:i,label:u,items:f})=>e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg cursor-pointer",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:m[i],onChange:()=>x(i),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:u})]}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," items"]})]},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸŽ¯ Content Options"}),e.jsx("div",{className:"space-y-2",children:[{key:"includeMovies",label:"ðŸŽ¬ Include Movies"},{key:"includeTV",label:"ðŸ“º Include TV Shows"},{key:"includeRatings",label:"â­ Include Ratings"},{key:"includeDescriptions",label:"ðŸ“ Include Descriptions"}].map(({key:i,label:u})=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("input",{type:"checkbox",checked:r[i],onChange:()=>L(i),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:u})]},i))})]}),G.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"ðŸŽ¬ Select Items to Share"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:B,className:"px-3 py-1 rounded text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"Select All"}),e.jsx("button",{onClick:_,className:"px-3 py-1 rounded text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Select None"})]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:G.map(i=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("input",{type:"checkbox",checked:y.has(i.id.toString()),onChange:()=>E(i.id.toString()),className:"w-4 h-4"}),e.jsxs("span",{className:"flex-1 text-sm text-gray-900 dark:text-gray-100",children:[i.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º"," ",i.title,r.includeRatings&&i.voteAverage&&e.jsxs("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:["â­ ",i.voteAverage.toFixed(1)]})]})]},i.id))})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",style:{borderColor:"var(--line)"},children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“‹ Generate Shareable List"})]})]})]})})})}const we=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{we as S,V as u};

```

## apps\web\clear-caches.js
```
// Cache clearing utility for testing
// Run this in browser console to clear all game caches

function clearAllGameCaches() {
  console.log('ðŸ—‘ï¸ Clearing all game caches...');
  
  // Clear FlickWord cache
  try {
    localStorage.removeItem('flicklet:daily-word');
    console.log('âœ… Cleared FlickWord cache');
  } catch (error) {
    console.warn('âŒ Failed to clear FlickWord cache:', error);
  }
  
  // Clear Trivia cache
  try {
    localStorage.removeItem('flicklet:daily-trivia');
    console.log('âœ… Cleared Trivia cache');
  } catch (error) {
    console.warn('âŒ Failed to clear Trivia cache:', error);
  }
  
  // Clear any other game-related caches
  const gameKeys = Object.keys(localStorage).filter(key => 
    key.includes('flicklet') || key.includes('flickword') || key.includes('trivia')
  );
  
  gameKeys.forEach(key => {
    try {
      localStorage.removeItem(key);
      console.log(`âœ… Cleared ${key}`);
    } catch (error) {
      console.warn(`âŒ Failed to clear ${key}:`, error);
    }
  });
  
  console.log('ðŸŽ‰ All game caches cleared! Refresh the page to get fresh content.');
}

// Export for console testing
window.clearAllGameCaches = clearAllGameCaches;

console.log('ðŸ§¹ Cache clearing utility loaded. Run clearAllGameCaches() to clear all caches.');

```

## apps\web\console-cache-clear.js
```
// Simple cache clearing script - copy and paste this into browser console

function clearAllGameCaches() {
  console.log('ðŸ—‘ï¸ Clearing all game caches...');
  
  // Clear FlickWord cache
  try {
    localStorage.removeItem('flicklet:daily-word');
    console.log('âœ… Cleared FlickWord cache');
  } catch (error) {
    console.warn('âŒ Failed to clear FlickWord cache:', error);
  }
  
  // Clear Trivia cache
  try {
    localStorage.removeItem('flicklet:daily-trivia');
    console.log('âœ… Cleared Trivia cache');
  } catch (error) {
    console.warn('âŒ Failed to clear Trivia cache:', error);
  }
  
  // Clear any other game-related caches
  const gameKeys = Object.keys(localStorage).filter(key => 
    key.includes('flicklet') || key.includes('flickword') || key.includes('trivia')
  );
  
  gameKeys.forEach(key => {
    try {
      localStorage.removeItem(key);
      console.log(`âœ… Cleared ${key}`);
    } catch (error) {
      console.warn(`âŒ Failed to clear ${key}:`, error);
    }
  });
  
  console.log('ðŸŽ‰ All game caches cleared! Refresh the page to get fresh content.');
}

// Run it immediately
clearAllGameCaches();

```

## clear-caches-console.js
```
// Load this in browser console to clear caches
function clearAllGameCaches() {
  console.log(' Clearing all game caches...');
  
  // Clear FlickWord cache
  try {
    localStorage.removeItem('flicklet:daily-word');
    console.log(' Cleared FlickWord cache');
  } catch (error) {
    console.warn(' Failed to clear FlickWord cache:', error);
  }
  
  // Clear Trivia cache
  try {
    localStorage.removeItem('flicklet:daily-trivia');
    console.log(' Cleared Trivia cache');
  } catch (error) {
    console.warn(' Failed to clear Trivia cache:', error);
  }
  
  console.log(' All game caches cleared! Refresh the page to get fresh content.');
}

clearAllGameCaches();

```

## dist\assets\flickword-modal-ApvRirmO.js
```
/**
 * Process: FlickWord Modal Module
 * Purpose: FlickWord modal functionality
 * Data Source: DOM elements
 * Update Path: Update modal selectors if needed
 * Dependencies: DOM API
 */

export function initializeFlickWordModal() {
  // FlickWord Modal Functions
  function openFlickWordModal() {
    console.log('ðŸŽ¯ Opening FlickWord modal');
    const modal = document.getElementById('modal-flickword');
    const frame = document.getElementById('flickword-game-frame');

    if (modal && frame) {
      // Set iframe source
      frame.src = '/features/flickword-v2.html';

      // Show modal
      modal.setAttribute('aria-hidden', 'false');
      modal.style.display = 'flex';
      modal.classList.add('show');

      // Debug: Check close button
      const closeBtn = modal.querySelector('.gm-close');
      console.log('ðŸŽ¯ Close button found:', closeBtn);
      console.log(
        'ðŸŽ¯ Close button styles:',
        closeBtn ? window.getComputedStyle(closeBtn) : 'Not found',
      );

      // Focus management
      const firstFocusable = modal.querySelector(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',
      );
      if (firstFocusable) {
        firstFocusable.focus();
      }
    } else {
      console.error('âŒ FlickWord modal elements not found');
    }
  }

  function closeFlickWordModal() {
    console.log('ðŸŽ¯ Closing FlickWord modal');
    const modal = document.getElementById('modal-flickword');
    const frame = document.getElementById('flickword-game-frame');

    if (modal) {
      modal.setAttribute('aria-hidden', 'true');
      modal.style.display = 'none';
      modal.classList.remove('show');

      // Clear iframe source to stop any running processes
      if (frame) {
        frame.src = 'about:blank';
      }

      // Update stats display after modal closes and FlickWord tab becomes visible
      setTimeout(() => {
        updateStatsDisplay();
      }, 100);
    }
  }

  // Add retry counter to prevent infinite loops
  let statsUpdateRetryCount = 0;
  const MAX_STATS_UPDATE_RETRIES = 3;

  function updateStatsDisplay() {
    console.log(
      'ðŸŽ¯ Updating stats display after modal close... (attempt',
      statsUpdateRetryCount + 1,
      ')',
    );

    if (!window.lastFlickWordStats) {
      console.log('ðŸŽ¯ No stats to update');
      return;
    }

    const stats = window.lastFlickWordStats;

    // Debug: Check what elements are available
    console.log('ðŸŽ¯ Available elements:');
    console.log(
      'ðŸŽ¯ All elements with data-testid:',
      document.querySelectorAll('[data-testid]').length,
    );
    console.log('ðŸŽ¯ All .stats-card elements:', document.querySelectorAll('.stats-card').length);
    console.log(
      'ðŸŽ¯ All elements with "stats" in class:',
      document.querySelectorAll('[class*="stats"]').length,
    );
    console.log(
      'ðŸŽ¯ All elements with "flickword" in class:',
      document.querySelectorAll('[class*="flickword"]').length,
    );

    // Log the actual elements with "stats" in class
    const statsElements = document.querySelectorAll('[class*="stats"]');
    console.log(
      'ðŸŽ¯ Stats elements found:',
      Array.from(statsElements).map((el) => ({
        tagName: el.tagName,
        className: el.className,
        textContent: el.textContent?.substring(0, 50),
        innerHTML: el.innerHTML?.substring(0, 100),
      })),
    );

    // Also check for any elements that might contain numbers
    const allElements = document.querySelectorAll('*');
    const numberElements = Array.from(allElements).filter((el) => {
      const text = el.textContent?.trim();
      return text && /^\d+$/.test(text) && el.children.length === 0;
    });
    console.log(
      'ðŸŽ¯ Elements with just numbers:',
      numberElements.map((el) => ({
        tagName: el.tagName,
        className: el.className,
        textContent: el.textContent,
        parent: el.parentElement?.tagName + '.' + el.parentElement?.className,
        parentText: el.parentElement?.textContent?.substring(0, 50),
        grandparent:
          el.parentElement?.parentElement?.tagName +
          '.' +
          el.parentElement?.parentElement?.className,
      })),
    );

    // Look for any elements that might contain "streak", "best", "win", etc.
    const allTextElements = document.querySelectorAll('*');
    const textElements = Array.from(allTextElements).filter((el) => {
      const text = el.textContent?.toLowerCase();
      return (
        text &&
        (text.includes('streak') ||
          text.includes('best') ||
          text.includes('win') ||
          text.includes('games'))
      );
    });
    console.log(
      'ðŸŽ¯ Elements with stats-related text:',
      textElements.map((el) => ({
        tagName: el.tagName,
        className: el.className,
        textContent: el.textContent?.substring(0, 100),
        parent: el.parentElement?.tagName + '.' + el.parentElement?.className,
        id: el.id,
        dataTestId: el.getAttribute('data-testid'),
      })),
    );

    // Look specifically for elements that might be displaying the stats numbers
    const potentialStatsElements = textElements.filter((el) => {
      const text = el.textContent?.toLowerCase();
      return (
        text &&
        (text.includes('streak') ||
          text.includes('best') ||
          text.includes('win') ||
          text.includes('games')) &&
        (el.children.length === 0 || el.textContent?.match(/^\d+$/))
      );
    });
    console.log(
      'ðŸŽ¯ Potential stats display elements:',
      potentialStatsElements.map((el) => ({
        tagName: el.tagName,
        className: el.className,
        textContent: el.textContent,
        parent: el.parentElement?.tagName + '.' + el.parentElement?.className,
        id: el.id,
        dataTestId: el.getAttribute('data-testid'),
        innerHTML: el.innerHTML?.substring(0, 100),
      })),
    );

    // Try to update these potential stats elements directly
    console.log('ðŸŽ¯ Attempting to update potential stats elements...');
    potentialStatsElements.forEach((el, index) => {
      console.log(`ðŸŽ¯ Element ${index + 1}:`, {
        textContent: el.textContent,
        className: el.className,
        id: el.id,
        parent: el.parentElement?.tagName + '.' + el.parentElement?.className,
      });

      // Try to update if it looks like a number
      if (el.textContent && /^\d+$/.test(el.textContent.trim())) {
        console.log(`ðŸŽ¯ Found number element: "${el.textContent}" - attempting to update...`);
        // This is where we'll update the stats
      }
    });

    // Look for stat-label elements specifically in the FlickWord card
    const flickwordCard = document.getElementById('flickwordTile');
    const statLabels = flickwordCard ? flickwordCard.querySelectorAll('.stat-label') : [];
    console.log('ðŸŽ¯ Found FlickWord stat-label elements:', statLabels.length);

    statLabels.forEach((label, index) => {
      console.log(`ðŸŽ¯ Stat label ${index + 1}:`, {
        text: label.textContent,
        parent: label.parentElement?.tagName + '.' + label.parentElement?.className,
        nextSibling: label.nextElementSibling?.tagName + '.' + label.nextElementSibling?.className,
        nextSiblingText: label.nextElementSibling?.textContent,
      });

      // Look for the value element (usually next sibling or child)
      const valueElement =
        label.nextElementSibling ||
        label.parentElement?.querySelector(
          '.stat-value, .stat-number, [class*="value"], [class*="number"]',
        );
      if (valueElement) {
        console.log(`ðŸŽ¯ Found value element for "${label.textContent}":`, {
          text: valueElement.textContent,
          className: valueElement.className,
          tagName: valueElement.tagName,
        });

        // Update based on label text
        if (label.textContent.includes('Streak') && !label.textContent.includes('Best')) {
          valueElement.textContent = stats.streak;
          console.log(`ðŸŽ¯ Updated streak to: ${stats.streak}`);
        } else if (label.textContent.includes('Best')) {
          valueElement.textContent = stats.maxStreak; // Use max streak as best
          console.log(`ðŸŽ¯ Updated best to: ${stats.maxStreak}`);
        } else if (label.textContent.includes('Win')) {
          valueElement.textContent = stats.winRate + '%';
          console.log(`ðŸŽ¯ Updated win rate to: ${stats.winRate}%`);
        } else if (label.textContent.includes('Games') || label.textContent.includes('Total')) {
          valueElement.textContent = stats.totalGames;
          console.log(`ðŸŽ¯ Updated total games to: ${stats.totalGames}`);
        } else if (label.textContent.includes('Won')) {
          valueElement.textContent = stats.wins;
          console.log(`ðŸŽ¯ Updated wins to: ${stats.wins}`);
        } else if (label.textContent.includes('Lost')) {
          valueElement.textContent = stats.losses;
          console.log(`ðŸŽ¯ Updated losses to: ${stats.losses}`);
        }
      }
    });

    // Also check for any elements that might be in the FlickWord tab specifically
    const flickwordTab =
      document.querySelector('[data-tab="flickword"]') ||
      document.querySelector('.flickword-tab') ||
      document.querySelector('[class*="flickword"]');
    console.log('ðŸŽ¯ FlickWord tab found:', !!flickwordTab);
    if (flickwordTab) {
      console.log('ðŸŽ¯ FlickWord tab content:', flickwordTab.innerHTML.substring(0, 200));
      const flickwordNumbers = flickwordTab.querySelectorAll('*');
      const flickwordNumberElements = Array.from(flickwordNumbers).filter((el) => {
        const text = el.textContent?.trim();
        return text && /^\d+$/.test(text) && el.children.length === 0;
      });
      console.log(
        'ðŸŽ¯ Numbers in FlickWord tab:',
        flickwordNumberElements.map((el) => ({
          tagName: el.tagName,
          className: el.className,
          textContent: el.textContent,
          parent: el.parentElement?.tagName + '.' + el.parentElement?.className,
        })),
      );
    }

    // Try multiple selectors for stats elements
    const streakElement =
      document.querySelector('[data-testid="stats-streak"]') ||
      document.querySelector('.stats-card__stat-value[data-testid="stats-streak"]') ||
      document.querySelector('.flickword-tab [data-testid="stats-streak"]');

    const bestElement =
      document.querySelector('[data-testid="stats-best"]') ||
      document.querySelector('.stats-card__stat-value[data-testid="stats-best"]') ||
      document.querySelector('.flickword-tab [data-testid="stats-best"]');

    const winElement =
      document.querySelector('[data-testid="stats-win-rate"]') ||
      document.querySelector('.stats-card__stat-value[data-testid="stats-win-rate"]') ||
      document.querySelector('.flickword-tab [data-testid="stats-win-rate"]');

    const totalGamesElement =
      document.querySelector('[data-testid="stats-total-games"]') ||
      document.querySelector('.stats-card__stat-value[data-testid="stats-total-games"]') ||
      document.querySelector('.flickword-tab [data-testid="stats-total-games"]');

    console.log('ðŸŽ¯ Found stats elements after modal close:', {
      streak: !!streakElement,
      best: !!bestElement,
      win: !!winElement,
      totalGames: !!totalGamesElement,
    });

    if (streakElement) {
      streakElement.textContent = stats.streak;
      console.log('ðŸŽ¯ Updated streak to:', stats.streak);
    }

    if (bestElement) {
      bestElement.textContent = stats.streak; // Use current streak as best for now
      console.log('ðŸŽ¯ Updated best to:', stats.streak);
    }

    if (winElement) {
      winElement.textContent = stats.winRate + '%';
      console.log('ðŸŽ¯ Updated win rate to:', stats.winRate + '%');
    }

    if (totalGamesElement) {
      totalGamesElement.textContent = stats.totalGames;
      console.log('ðŸŽ¯ Updated total games to:', stats.totalGames);
    }

    // Try multiple selectors for stats card
    const statsCard =
      document.querySelector('.stats-card') ||
      document.querySelector('.flickword-tab .stats-card') ||
      document.querySelector('[class*="stats-card"]');

    console.log('ðŸŽ¯ Stats card found:', !!statsCard);

    // Also try to update using the StatsCard component
    if (window.updateStatsCard && statsCard) {
      console.log('ðŸŽ¯ Calling updateStatsCard after modal close...');
      window.updateStatsCard(statsCard, stats);
      console.log('ðŸŽ¯ updateStatsCard called successfully after modal close');
    } else {
      console.warn('ðŸŽ¯ No stats card found after modal close or updateStatsCard not available');
    }

    // If we still can't find the elements, try again after a longer delay (with retry limit)
    if (
      !streakElement &&
      !bestElement &&
      !winElement &&
      !totalGamesElement &&
      statsUpdateRetryCount < MAX_STATS_UPDATE_RETRIES
    ) {
      statsUpdateRetryCount++;
      console.log(
        'ðŸŽ¯ No stats elements found, trying again in 500ms... (retry',
        statsUpdateRetryCount,
        'of',
        MAX_STATS_UPDATE_RETRIES,
        ')',
      );
      setTimeout(() => {
        updateStatsDisplay();
      }, 500);
    } else if (statsUpdateRetryCount >= MAX_STATS_UPDATE_RETRIES) {
      console.warn('ðŸŽ¯ Max retries reached, giving up on stats update');
      statsUpdateRetryCount = 0; // Reset for next time
    } else {
      statsUpdateRetryCount = 0; // Reset for next time
    }

    console.log('ðŸŽ¯ Stats display update complete after modal close');
  }

  // Handle game result and update stats
  function handleGameResult(result) {
    console.log('ðŸŽ¯ Processing game result:', result);

    try {
      // Load current stats
      const rawStats = JSON.parse(
        localStorage.getItem('flickword:stats') ||
          localStorage.getItem('flickword-stats') ||
          localStorage.getItem('flicklet-data') ||
          '{}',
      );

      // Create a deep copy to avoid circular references
      const stats = JSON.parse(JSON.stringify(rawStats));

      // Extract FlickWord stats from the data and create a new object
      const originalFlickwordStats = stats.flickword || stats || {};

      // Create a completely new flickwordStats object to avoid circular references
      const flickwordStats = {
        games: originalFlickwordStats.games || 0,
        wins: originalFlickwordStats.wins || 0,
        losses: originalFlickwordStats.losses || 0,
        streak: originalFlickwordStats.streak || 0,
        maxStreak: originalFlickwordStats.maxStreak || 0,
      };

      // Update stats based on game result
      flickwordStats.games += 1;

      if (result.won) {
        flickwordStats.wins += 1;
        flickwordStats.streak += 1;
        // Update best streak if current streak is higher
        if (flickwordStats.streak > flickwordStats.maxStreak) {
          flickwordStats.maxStreak = flickwordStats.streak;
        }
      } else {
        // Don't reset streak to 0, just don't increment it
        // Streak stays at current value until you win again
        // flickwordStats.streak remains unchanged
      }

      // Calculate losses
      flickwordStats.losses = flickwordStats.games - flickwordStats.wins;

      // Calculate win percentage
      const winPercentage = Math.round((flickwordStats.wins / flickwordStats.games) * 100);

      // Create a completely new stats object to save
      const newStats = {
        tv: stats.tv || {},
        movies: stats.movies || {},
        settings: stats.settings || {},
        flickword: flickwordStats,
      };

      // Save updated stats back to localStorage
      localStorage.setItem('flickword:stats', JSON.stringify(newStats));
      localStorage.setItem('flicklet-data', JSON.stringify(newStats));

      console.log('ðŸŽ¯ Updated FlickWord stats:', flickwordStats);

      // Update the display immediately by directly updating the DOM elements
      console.log('ðŸŽ¯ Updating stats display directly...');

      // Find the stats elements in the FlickWord tab
      const streakElement = document.querySelector('[data-testid="stats-streak"]');
      const bestElement = document.querySelector('[data-testid="stats-best"]');
      const winElement = document.querySelector('[data-testid="stats-win-rate"]');

      console.log('ðŸŽ¯ Found stats elements:', {
        streak: !!streakElement,
        best: !!bestElement,
        win: !!winElement,
      });

      if (streakElement) {
        streakElement.textContent = flickwordStats.streak;
        console.log('ðŸŽ¯ Updated streak to:', flickwordStats.streak);
      }

      if (bestElement) {
        bestElement.textContent = flickwordStats.maxStreak;
        console.log('ðŸŽ¯ Updated best to:', flickwordStats.maxStreak);
      }

      if (winElement) {
        winElement.textContent = winPercentage + '%';
        console.log('ðŸŽ¯ Updated win rate to:', winPercentage + '%');
      }

      // Also try to update any other stats elements that might exist
      const allStatsElements = document.querySelectorAll('[data-testid*="stats-"]');
      console.log('ðŸŽ¯ Found all stats elements:', allStatsElements.length);

      console.log('ðŸŽ¯ Stats display update complete');
    } catch (error) {
      console.error('ðŸŽ¯ Error updating FlickWord stats:', error);
    }
  }

  // Expose globally
  window.openFlickWordModal = openFlickWordModal;
  window.closeFlickWordModal = closeFlickWordModal;

  // Initialize event listeners immediately (not waiting for DOMContentLoaded)
  function initializeEventListeners() {
    console.log('ðŸŽ¯ Initializing FlickWord modal event listeners...');

    const openBtn = document.querySelector('[data-action="open-flickword"]');
    const closeBtn = document.querySelector('.gm-close');
    const overlay = document.querySelector('.gm-overlay');

    console.log('ðŸŽ¯ Found elements:', { openBtn, closeBtn, overlay });

    if (openBtn) {
      console.log('ðŸŽ¯ Adding click listener to open button');
      openBtn.addEventListener('click', openFlickWordModal);
    }

    if (closeBtn) {
      console.log('ðŸŽ¯ Adding click listener to close button');
      closeBtn.addEventListener('click', (e) => {
        console.log('ðŸŽ¯ Close button clicked!');
        closeFlickWordModal();
      });
    }

    if (overlay) {
      console.log('ðŸŽ¯ Adding click listener to overlay');
      overlay.addEventListener('click', (e) => {
        console.log('ðŸŽ¯ Overlay clicked!');
        closeFlickWordModal();
      });
    }

    // Handle escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const modal = document.getElementById('modal-flickword');
        if (modal && modal.getAttribute('aria-hidden') === 'false') {
          closeFlickWordModal();
        }
      }
    });

    // Handle messages from iframe
    window.addEventListener('message', (e) => {
      console.log('ðŸŽ¯ Received message:', e.data);
      if (e.data && e.data.type === 'flickword:close') {
        console.log('ðŸŽ¯ Received close message from iframe');
        closeFlickWordModal();
      } else if (e.data && e.data.type === 'flickword:result') {
        console.log('ðŸŽ¯ Received game result from iframe:', e.data);
        handleGameResult(e.data);
      }
    });
  }

  // Initialize immediately if DOM is ready, otherwise wait for DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeEventListeners);
  } else {
    initializeEventListeners();
  }
}

```

## dist\assets\flickword-modal-CsvZZKGv.js
```
function t(){function t(){const t=document.getElementById("modal-flickword"),e=document.getElementById("flickword-game-frame");if(t&&e){e.src="/features/flickword-v2.html",t.setAttribute("aria-hidden","false"),t.style.display="flex",t.classList.add("show");t.querySelector(".gm-close");const a=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');a&&a.focus()}}function e(){const t=document.getElementById("modal-flickword"),e=document.getElementById("flickword-game-frame");t&&(t.setAttribute("aria-hidden","true"),t.style.display="none",t.classList.remove("show"),e&&(e.src="about:blank"),setTimeout(()=>{n()},100))}let a=0;const s=3;function n(){if(!window.lastFlickWordStats)return;const t=window.lastFlickWordStats,e=(document.querySelectorAll('[class*="stats"]'),document.querySelectorAll("*")),o=(Array.from(e).filter(t=>{var e;const a=null==(e=t.textContent)?void 0:e.trim();return a&&/^\d+$/.test(a)&&0===t.children.length}),document.querySelectorAll("*"));Array.from(o).filter(t=>{var e;const a=null==(e=t.textContent)?void 0:e.toLowerCase();return a&&(a.includes("streak")||a.includes("best")||a.includes("win")||a.includes("games"))}).filter(t=>{var e,a;const s=null==(e=t.textContent)?void 0:e.toLowerCase();return s&&(s.includes("streak")||s.includes("best")||s.includes("win")||s.includes("games"))&&(0===t.children.length||(null==(a=t.textContent)?void 0:a.match(/^\d+$/)))}).forEach((t,e)=>{t.textContent&&/^\d+$/.test(t.textContent.trim())});const r=document.getElementById("flickwordTile");(r?r.querySelectorAll(".stat-label"):[]).forEach((e,a)=>{var s;const n=e.nextElementSibling||(null==(s=e.parentElement)?void 0:s.querySelector('.stat-value, .stat-number, [class*="value"], [class*="number"]'));n&&(e.textContent.includes("Streak")&&!e.textContent.includes("Best")?n.textContent=t.streak:e.textContent.includes("Best")?n.textContent=t.maxStreak:e.textContent.includes("Win")?n.textContent=t.winRate+"%":e.textContent.includes("Games")||e.textContent.includes("Total")?n.textContent=t.totalGames:e.textContent.includes("Won")?n.textContent=t.wins:e.textContent.includes("Lost")&&(n.textContent=t.losses))});const d=document.querySelector('[data-tab="flickword"]')||document.querySelector(".flickword-tab")||document.querySelector('[class*="flickword"]');if(d){const t=d.querySelectorAll("*");Array.from(t).filter(t=>{var e;const a=null==(e=t.textContent)?void 0:e.trim();return a&&/^\d+$/.test(a)&&0===t.children.length})}const l=document.querySelector('[data-testid="stats-streak"]')||document.querySelector('.stats-card__stat-value[data-testid="stats-streak"]')||document.querySelector('.flickword-tab [data-testid="stats-streak"]'),c=document.querySelector('[data-testid="stats-best"]')||document.querySelector('.stats-card__stat-value[data-testid="stats-best"]')||document.querySelector('.flickword-tab [data-testid="stats-best"]'),i=document.querySelector('[data-testid="stats-win-rate"]')||document.querySelector('.stats-card__stat-value[data-testid="stats-win-rate"]')||document.querySelector('.flickword-tab [data-testid="stats-win-rate"]'),u=document.querySelector('[data-testid="stats-total-games"]')||document.querySelector('.stats-card__stat-value[data-testid="stats-total-games"]')||document.querySelector('.flickword-tab [data-testid="stats-total-games"]');l&&(l.textContent=t.streak),c&&(c.textContent=t.streak),i&&(i.textContent=t.winRate+"%"),u&&(u.textContent=t.totalGames);const m=document.querySelector(".stats-card")||document.querySelector(".flickword-tab .stats-card")||document.querySelector('[class*="stats-card"]');window.updateStatsCard&&m&&window.updateStatsCard(m,t),l||c||i||u||!(a<s)?a=0:(a++,setTimeout(()=>{n()},500))}function o(){const a=document.querySelector('[data-action="open-flickword"]'),s=document.querySelector(".gm-close"),n=document.querySelector(".gm-overlay");a&&a.addEventListener("click",t),s&&s.addEventListener("click",t=>{e()}),n&&n.addEventListener("click",t=>{e()}),document.addEventListener("keydown",t=>{if("Escape"===t.key){const t=document.getElementById("modal-flickword");t&&"false"===t.getAttribute("aria-hidden")&&e()}}),window.addEventListener("message",t=>{t.data&&"flickword:close"===t.data.type?e():t.data&&"flickword:result"===t.data.type&&function(t){try{const e=JSON.parse(localStorage.getItem("flickword:stats")||localStorage.getItem("flickword-stats")||localStorage.getItem("flicklet-data")||"{}"),a=JSON.parse(JSON.stringify(e)),s=a.flickword||a||{},n={games:s.games||0,wins:s.wins||0,losses:s.losses||0,streak:s.streak||0,maxStreak:s.maxStreak||0};n.games+=1,t.won&&(n.wins+=1,n.streak+=1,n.streak>n.maxStreak&&(n.maxStreak=n.streak)),n.losses=n.games-n.wins;const o=Math.round(n.wins/n.games*100),r={tv:a.tv||{},movies:a.movies||{},settings:a.settings||{},flickword:n};localStorage.setItem("flickword:stats",JSON.stringify(r)),localStorage.setItem("flicklet-data",JSON.stringify(r));const d=document.querySelector('[data-testid="stats-streak"]'),l=document.querySelector('[data-testid="stats-best"]'),c=document.querySelector('[data-testid="stats-win-rate"]');d&&(d.textContent=n.streak),l&&(l.textContent=n.maxStreak),c&&(c.textContent=o+"%"),document.querySelectorAll('[data-testid*="stats-"]')}catch(e){}}(t.data)})}window.openFlickWordModal=t,window.closeFlickWordModal=e,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}export{t as initializeFlickWordModal};

```

## dist\assets\main-C0bpNxaM.js
```
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/card-templates-CVsi9qzX.js","assets/airdate-utils-DeQSc8AK.js"])))=>i.map(i=>d[i]);
var e,i,a=Object.getOwnPropertyNames,n=(e={"assets/main-C0bpNxaM.js"(e,i){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),function(){if(window.firebaseConfig=window.firebaseConfig||{apiKey[REDACTED]AIzaSyDEiqf8cxQJ11URcQeE8jqq5EMa5M6zAXM",authDomain:"flicklet-71dff.firebaseapp.com",projectId:"flicklet-71dff",storageBucket:"flicklet-71dff.appspot.com",messagingSenderId:"1034923556763",appId[REDACTED]1:1034923556763:web:bba5489cd1d9412c9c2b3e",measurementId[REDACTED]G-YL4TJ4FHJC"},"undefined"!=typeof firebase)try{window.firebaseApp=firebase.initializeApp(window.firebaseConfig),window.firebaseAuth=firebase.auth(),window.firebaseDb=firebase.firestore(),window.db=window.firebaseDb,window.dispatchEvent(new CustomEvent("firebase:ready",{detail:{app:window.firebaseApp,auth:window.firebaseAuth,db:window.firebaseDb}})),"localhost"===location.hostname&&(window._testFirestore=async e=>{try{const t=`users/${e}`,i=firebase.firestore.FieldValue.serverTimestamp();await window.db.doc(t).set({_ping:i},{merge:!0});const a=await window.db.doc(t).get();return{success:!0,exists:a.exists,keys:Object.keys(a.data()||{})}}catch(t){return{success:!1,error:t.message}}})}catch(e){}try{window.dispatchEvent(new CustomEvent("firebase:config",{detail:{projectId:window.firebaseConfig.projectId}}))}catch{}}(),function e(){if("undefined"==typeof firebase)return void setTimeout(e,100);if(!firebase.apps||0===firebase.apps.length){if(!window.FIREBASE_CONFIG)return;firebase.initializeApp(window.FIREBASE_CONFIG)}const t=firebase.auth(),i=firebase.firestore();window.firebaseApp=firebase.app(),window.firebaseAuth=t,window.firebaseDb=i,window.auth=t,window.getAuth=()=>t,window.onAuthStateChanged=(e,t)=>e.onAuthStateChanged(t),window.setPersistence=(e,t)=>e.setPersistence(t),window.browserLocalPersistence=firebase.auth.Auth.Persistence.LOCAL,window.GoogleAuthProvider=firebase.auth.GoogleAuthProvider,window.signInWithPopup=(e,t)=>e.signInWithPopup(t),window.signOut=e=>e.signOut()}();var a={};window.TMDB_CONFIG={apiKey:null,baseUrl:"https://api.themoviedb.org/3",imageBaseUrl:"https://image.tmdb.org/t/p/",language:"en-US",region:"US"},"undefined"!=typeof process&&a&&a.TMDB_API_KEY&&(window.TMDB_CONFIG.apiKey=a.TMDB_API_KEY),function(){const e=new Map;function t(e){return{en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT",pt:"pt-PT",ru:"ru-RU",ja:"ja-JP",ko:"ko-KR",zh:"zh-CN"}[e]||"en-US"}function i(e,i={}){const a=t(function(){var e,t;if(window.LanguageManager&&"function"==typeof window.LanguageManager.getCurrentLanguage)return window.LanguageManager.getCurrentLanguage();try{const e=localStorage.getItem("flicklet-language");if(e)return e}catch(a){}if(null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.lang)return window.appData.settings.lang;const i=document.documentElement.lang;return i?i.split("-")[0]:"en"}()),n=new URL("/.netlify/functions/tmdb-proxy",window.location.origin);return n.searchParams.set("path",e),Object.entries(i).forEach(([e,t])=>{null!=t&&n.searchParams.set(e,String(t))}),n.searchParams.set("language",a),n.toString()}window.tmdbGet=async function(t,a={}){const n=t+"::"+JSON.stringify(a);if(e.has(n))return e.get(n);const o=(async()=>{const e=i(t,a),n=await fetch(e);if(404===n.status)return{ok:!1,status:404};if(!n.ok)return{ok:!1,status:n.status};const o=await n.json();return Array.isArray(null==o?void 0:o.results),{ok:!0,data:o}})().finally(()=>e.delete(n));return e.set(n,o),o},window.getTMDBLocale=function(e){return t(e)},window.getGenreName=function(e,t="movie"){return(window.__GENRES__||{})[e]||"Unknown"},window.searchTMDB=async function(e,t="multi",i=1){return await window.tmdbGet("search/multi",{query:e,page:i,media_type:t})},window.getTrending=async function(e="all",t="day",i=1){return await window.tmdbGet(`trending/${e}/${t}`,{page:i})},window.getGenres=async function(e="movie"){return await window.tmdbGet(`genre/${e}/list`)},window.discoverByGenre=async function(e,t="movie",i=1){return await window.tmdbGet(`discover/${t}`,{with_genres:e,page:i,sort_by:"popularity.desc"})}}(),function(){let e=null,t=null,i=[],a=null,n=null;function o(){e&&(document.removeEventListener("keydown",s),document.removeEventListener("click",r),e.style.display="none",e.setAttribute("aria-hidden","true"),t&&"function"==typeof t.focus&&t.focus(),e=null,t=null,i=[],a=null,n=null)}function s(t){"Escape"===t.key?o():"Tab"===t.key&&function(t){e&&"Tab"===t.key&&(t.shiftKey?document.activeElement===a&&(t.preventDefault(),n.focus()):document.activeElement===n&&(t.preventDefault(),a.focus()))}(t)}function r(e){(e.target.classList.contains("modal-overlay")||e.target.classList.contains("modal-backdrop")||e.target.hasAttribute("data-close"))&&o()}window.ModalUtility={open:function(o,d=null){const l=document.getElementById(o);return!!l&&(t=d||document.activeElement,l.style.display="flex",l.setAttribute("aria-hidden","false"),i=l.querySelectorAll(["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", ")),a=i[0],n=i[i.length-1],a?a.focus():l.focus(),document.addEventListener("keydown",s),document.addEventListener("click",r),e=l,!0)},close:o,isOpen:function(t){if(!e||e.id!==t)return!1;const i=document.getElementById(t);if(!i)return!1;const a="true"===i.getAttribute("aria-hidden"),n="flex"===i.style.display||"block"===i.style.display;return!a&&n},getActiveModal:function(){return e},forceClose:function(i){e=null,t=null;const a=document.getElementById(i);a&&(a.style.display="none",a.setAttribute("aria-hidden","true"))}}}(),function(){const e={theme:"light",lang:"en",pro:!1,isPro:!1,episodeTracking:!1,username:"",displayName:"",usernamePrompted:!1,notif:{theme:"light",episodes:!1,digest:!1,discover:!1,pro:!1}},t={_settings:null,_initialized:!1,init(){this._initialized||(this._loadFromLocalStorage(),document.addEventListener("auth:changed",e=>{this._handleAuthChange(e.detail.user)}),this._initialized=!0)},_loadFromLocalStorage(){try{const t=localStorage.getItem("flicklet-data");if(t){const i=JSON.parse(t);this._settings={...e,...i.settings||{}}}else this._settings={...e};void 0===this._settings.pro&&(this._settings.pro=!1),void 0===this._settings.isPro&&(this._settings.isPro=this._settings.pro),this._settings}catch(t){this._settings={...e}}},_saveToLocalStorage(){try{const e=localStorage.getItem("flicklet-data"),t=e?JSON.parse(e):{};t.settings=this._settings,localStorage.setItem("flicklet-data",JSON.stringify(t))}catch(e){}},_handleAuthChange(e){e?this._checkProStatus(e):(this.set("pro",!1),this.set("isPro",!1))},async _checkProStatus(e){var t;try{if(window.firebaseDb&&e.uid){const i=await window.firebaseDb.collection("users").doc(e.uid).get();if(i.exists){const e=i.data(),a=!0===e.pro||!0===(null==(t=e.settings)?void 0:t.pro);a!==this._settings.pro&&(this.set("pro",a),this.set("isPro",a))}}}catch(i){}},get(e,t=null){return this._initialized||this.init(),void 0===e?{...this._settings}:void 0!==this._settings[e]?this._settings[e]:t},set(e,t){this._initialized||this.init();const i=this._settings[e];this._settings[e]=t,"pro"===e?this._settings.isPro=t:"isPro"===e&&(this._settings.pro=t),this._saveToLocalStorage(),this._emitSettingsChanged(e,t,i)},update(e){this._initialized||this.init();const t=[];for(const[i,a]of Object.entries(e)){const e=this._settings[i];this._settings[i]=a,"pro"===i?this._settings.isPro=a:"isPro"===i&&(this._settings.pro=a),t.push({key:i,value:a,oldValue:e})}this._saveToLocalStorage(),this._emitSettingsChanged("bulk",t)},_emitSettingsChanged(e,t,i){const a=new CustomEvent("settings:changed",{detail:{key:e,value:t,oldValue:i,settings:{...this._settings},timestamp:Date.now()}});document.dispatchEvent(a)},reset(){this._settings={...e},this._saveToLocalStorage(),this._emitSettingsChanged("reset",this._settings,null)},isPro(){return this.get("pro",!1)},isFeatureEnabled(e){return{pro:this.isPro(),episodeTracking:this.get("episodeTracking",!1),notifications:this.get("notif.episodes",!1),digest:this.get("notif.digest",!1),discover:this.get("notif.discover",!1)}[e]||!1}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>t.init()):t.init(),window.SettingsManager=t}(),function(){const e=(...e)=>{};let t=!1,i="",a=null,n=null,o=null,s=null,r=null,d=null,l=null;function c(){return o=document.getElementById("search"),s=document.getElementById("searchBtn"),r=document.getElementById("clearSearchBtn"),d=document.getElementById("searchResults"),document.getElementById("searchResultsList"),l=document.getElementById("resultsCount"),!!(o&&s&&d)&&(s.addEventListener("click",u),r&&r.addEventListener("click",w),o.addEventListener("keydown",h),o.addEventListener("input",m),!0)}function u(){p()}function w(){g()}function h(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),p())}function m(){a&&clearTimeout(a),a=setTimeout(()=>{},500)}async function p(){try{const a=o.value.trim();if(!a)return;if(a===i&&t)return;if(i=a,t=!0,window.FlickletApp&&"function"==typeof window.FlickletApp.setSearching&&window.FlickletApp.setSearching(!0),d&&(y(),d.hidden=!1,d.innerHTML=`\n      <div style="text-align: center; padding: 40px;">\n        <div style="font-size: 24px; margin-bottom: 10px;">ðŸ”</div>\n        <div>Searching for "${i}"...</div>\n      </div>\n    `),"function"!=typeof window.searchTMDB)throw new Error("searchTMDB function not available");const n=await window.searchTMDB(a);await async function(t){var i,a,n,o;if(!d)return;!t||t.results,!t||t.data,t&&t.data&&t.data.results,null==(i=null==t?void 0:t.results)||i.length,null==(n=null==(a=null==t?void 0:t.data)?void 0:a.results)||n.length,t&&Object.keys(t),(null==t?void 0:t.data)&&Object.keys(t.data);const s=(null==(o=null==t?void 0:t.data)?void 0:o.results)||(null==t?void 0:t.results);if(!t||!s||0===s.length)return void f();s.length;const r=s.filter(e=>"person"!==e.media_type);if(r.length,0===r.length)return void f();const c=r.sort((e,t)=>{const i=e.release_date||e.first_air_date||"",a=t.release_date||t.first_air_date||"",n=i?new Date(i):new Date(0);return(a?new Date(a):new Date(0))-n});l&&(l.textContent=c.length),y(),d.hidden=!1,d.classList.add("active"),window.renderSearchCardV2,window.renderSearchCardV2?await async function(t){window.renderSearchCardV2,window.V2_ACTIONS,d.innerHTML=`\n      <h4>ðŸŽ¯ Search Results <span class="count">${t.length}</span></h4>\n      <div class="media-grid" id="searchResultsGrid"></div>\n    `;const i=document.getElementById("searchResultsGrid");if(i){t.length;for(const n of t)try{const t=window.renderSearchCardV2(n);t?(i.appendChild(t),e(n.title||n.name)):e(n.title||n.name)}catch(a){e()}i.children.length}}(c):v(c)}(n)}catch(n){a=n.message,d&&(y(),d.hidden=!1,d.innerHTML=`\n      <div style="text-align: center; padding: 40px; color: #e74c3c;">\n        <div style="font-size: 24px; margin-bottom: 10px;">âŒ</div>\n        <div>Search failed: ${a}</div>\n        <button onclick="window.SearchModule.clearSearch()" style="margin-top: 10px; padding: 8px 16px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">\n          Try Again\n        </button>\n      </div>\n    `)}finally{t=!1}var a}function g(){o.value="",i="",t=!1,window.FlickletApp&&"function"==typeof window.FlickletApp.setSearching&&window.FlickletApp.setSearching(!1),d&&(d.hidden=!0,d.classList.remove("active"),d.innerHTML=""),n&&window.FlickletApp&&"function"==typeof window.FlickletApp.switchToTab&&(window.FlickletApp.switchToTab(n),n=null),a&&(clearTimeout(a),a=null),o.focus()}function v(e){const t=e.map(e=>{const t=e.title||e.name||"Unknown",i=e.release_date?new Date(e.release_date).getFullYear():e.first_air_date?new Date(e.first_air_date).getFullYear():"",a=e.media_type||"movie",n=e.poster_path?`https://image.tmdb.org/t/p/w200${e.poster_path}`:"/assets/img/poster-placeholder.png";return`\n        <div class="search-result-item" data-id="${e.id}" data-media-type="${a}" style="display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #eee; cursor: pointer;" onclick="window.SearchModule.openItemDetails(${e.id}, '${a}')">\n          ${n?`<img src="${n}" style="width: 60px; height: 90px; object-fit: cover; margin-right: 15px; border-radius: 4px;" alt="${t}">`:'<div style="width: 60px; height: 90px; background: #f0f0f0; margin-right: 15px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 24px;">ðŸ“º</div>'}\n          <div style="flex: 1;">\n            <h4 style="margin: 0 0 5px 0; color: #333; font-size: 16px;">${t} ${i?`(${i})`:""}</h4>\n            <p style="margin: 0; color: #666; text-transform: capitalize; font-size: 14px;">${a}</p>\n          </div>\n        </div>\n      `}).join("");d.innerHTML=`\n      <h4>ðŸŽ¯ Search Results <span class="count">${e.length}</span></h4>\n      <div class="search-results-list">${t}</div>\n    `}function f(){d&&(y(),d.hidden=!1,d.innerHTML=`\n      <div style="text-align: center; padding: 40px;">\n        <div style="font-size: 24px; margin-bottom: 10px;">ðŸ”</div>\n        <div>No results found for "${i}"</div>\n        <div style="margin-top: 10px; color: #666; font-size: 14px;">Try different keywords or check your spelling</div>\n      </div>\n    `)}function y(){window.FlickletApp&&window.FlickletApp.currentTab&&(n=window.FlickletApp.currentTab),["watching","wishlist","watched","discover","settings"].forEach(e=>{const t=document.getElementById(`${e}Section`);t&&(t.style.display="none")});const e=document.getElementById("homeSection");e&&(e.hidden=!0)}window.SearchModule={init:c,performSearch:p,clearSearch:g,getSearchState:function(){return{isSearching:t,currentQuery:i,hasResults:d&&"none"!==d.style.display}},openItemDetails:function(e,t){window.openTMDBLink&&window.openTMDBLink(e,t)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}(),function(){function e(e){var t,i,a,n,o,s;if(!e||"object"!=typeof e)return e;if(e.watchlists)return e;const r={...e};return r.watchlists={movies:{watching:Array.isArray(null==(t=e.movies)?void 0:t.watching)?e.movies.watching:[],wishlist:Array.isArray(null==(i=e.movies)?void 0:i.wishlist)?e.movies.wishlist:[],watched:Array.isArray(null==(a=e.movies)?void 0:a.watched)?e.movies.watched:[]},tv:{watching:Array.isArray(null==(n=e.tv)?void 0:n.watching)?e.tv.watching:[],wishlist:Array.isArray(null==(o=e.tv)?void 0:o.wishlist)?e.tv.wishlist:[],watched:Array.isArray(null==(s=e.tv)?void 0:s.watched)?e.tv.watched:[]}},r.movies=r.watchlists.movies,r.tv=r.watchlists.tv,r.watchlists.movies.watching.length,r.watchlists.movies.wishlist.length,r.watchlists.movies.watched.length,r.watchlists.tv.watching.length,r.watchlists.tv.wishlist.length,r.watchlists.tv.watched.length,r}function t(e){return e&&"object"==typeof e?(e.watchlists&&(e.movies||e.tv)&&(e.watchlists.movies&&e.movies&&(e.movies=e.watchlists.movies),e.watchlists.tv&&e.tv&&(e.tv=e.watchlists.tv)),e):e}function i(e){if(!e||"object"!=typeof e)return{valid:!1,errors:["No appData provided"]};const t=[],i=!!e.watchlists,a=!!e.movies,n=!!e.tv;if(i||a||n||t.push("No valid data structure found"),i)if(e.watchlists.movies&&e.watchlists.tv){const i=e.watchlists.movies;Array.isArray(i.watching)&&Array.isArray(i.wishlist)&&Array.isArray(i.watched)||t.push("Invalid movies structure in watchlists");const a=e.watchlists.tv;Array.isArray(a.watching)&&Array.isArray(a.wishlist)&&Array.isArray(a.watched)||t.push("Invalid tv structure in watchlists")}else t.push("Incomplete watchlists structure");return a&&(Array.isArray(e.movies.watching)&&Array.isArray(e.movies.wishlist)&&Array.isArray(e.movies.watched)||t.push("Invalid movies structure")),n&&(Array.isArray(e.tv.watching)&&Array.isArray(e.tv.wishlist)&&Array.isArray(e.tv.watched)||t.push("Invalid tv structure")),{valid:0===t.length,errors:t,hasWatchlists:i,hasMovies:a,hasTv:n}}window.DataMigration={migrateToFirebaseStructure:e,migrateFromFirebaseStructure:function(e){if(!e||"object"!=typeof e)return e;if(!e.watchlists)return e;const t={...e};return e.watchlists.movies&&(t.movies=e.watchlists.movies),e.watchlists.tv&&(t.tv=e.watchlists.tv),t},ensureDataConsistency:t,validateDataStructure:i,performMigration:function(a){let n=e(a);n=t(n);const o=i(n);return o.valid?{success:!0,data:n,validation:o}:(o.errors,{success:!1,errors:o.errors,data:n})}}}(),function(){const e=(...e)=>{};window.WatchlistsAdapterV2={_cache:null,_lastUid:null,_loading:!1,_loadPromise:null,_operationQueue:[],_isProcessingQueue:!1,async init(){var e,t;if(window.DataMigration&&window.appData){const e=window.DataMigration.performMigration(window.appData);e.success?window.appData=e.data:e.errors}const i=null==(t=null==(e=window.firebaseAuth)?void 0:e.currentUser)?void 0:t.uid;i?await this.load(i):await this.load(null)},async load(e){try{if(this._cache&&this._lastUid===e)return this._cache;if(this._loading&&this._loadPromise)return await this._loadPromise;this._loading=!0,this._loadPromise=this._performLoad(e);const t=await this._loadPromise;return this._loading=!1,this._loadPromise=null,t}catch(t){return this._loading=!1,this._loadPromise=null,t.message,this._getEmptyCache()}},async _performLoad(e){if(window.firebaseDb&&e)try{const t=await window.firebaseDb.collection("users").doc(e).get();if(t.exists){const i=t.data();if(i.watchlists&&this._hasDataInWatchlists(i.watchlists)){const t=this._normalizeWatchlists(i.watchlists);return this._cache=t,this._lastUid=e,document.dispatchEvent(new CustomEvent("watchlists:hydrated",{detail:{uid:e,cache:t}})),t}if(i.movies||i.tv){const t={movies:i.movies||{},tv:i.tv||{}},a=this._normalizeWatchlists(t);return this._cache=a,this._lastUid=e,document.dispatchEvent(new CustomEvent("watchlists:hydrated",{detail:{uid:e,cache:a}})),a}}}catch(n){n.message}const t=window.appData||{},i=t.watchlists||{movies:t.movies||{},tv:t.tv||{}},a=this._normalizeWatchlists(i);return this._cache=a,this._lastUid=e,a.watchingIds.length,a.wishlistIds.length,a.watchedIds.length,document.dispatchEvent(new CustomEvent("watchlists:hydrated",{detail:{uid:e,cache:a}})),a},_hasDataInWatchlists(e){if(!e||"object"!=typeof e)return!1;const t=e.movies&&(e.movies.watching&&e.movies.watching.length>0||e.movies.wishlist&&e.movies.wishlist.length>0||e.movies.watched&&e.movies.watched.length>0),i=e.tv&&(e.tv.watching&&e.tv.watching.length>0||e.tv.wishlist&&e.tv.wishlist.length>0||e.tv.watched&&e.tv.watched.length>0);return t||i},_normalizeWatchlists(e){var t,i,a,n,o,s;if(!e||"object"!=typeof e)return this._getEmptyCache();const r=(e,t)=>Array.isArray(e)?e.map(e=>String("object"==typeof e&&null!==e?e.id||e.tmdb_id||e.tmdbId:e)).filter(Boolean):[],d=[...r((null==(t=e.movies)?void 0:t.watching)||[]),...r((null==(i=e.tv)?void 0:i.watching)||[])],l=[...r((null==(a=e.movies)?void 0:a.wishlist)||[]),...r((null==(n=e.tv)?void 0:n.wishlist)||[])],c=[...r((null==(o=e.movies)?void 0:o.watched)||[]),...r((null==(s=e.tv)?void 0:s.watched)||[])];return{watchingIds:[...new Set(d.map(String))],wishlistIds:[...new Set(l.map(String))],watchedIds:[...new Set(c.map(String))]}},_getEmptyCache:()=>({watchingIds:[],wishlistIds:[],watchedIds:[]}),async addItem(e,t,i=null){return this._queueOperation(()=>this._addItemSync(e,t,i))},_addItemSync(e,t,i=null){try{if(!this._cache)return!1;const a=String(e),n=t+"Ids";this._cache[n]||(this._cache[n]=[]);const o=new Set(this._cache[n]);return!o.has(a)&&(o.add(a),this._cache[n]=Array.from(o),i&&this._storeItemData(a,i),this._cache[n].length,this._updateAppData(),!0)}catch(a){return a.message,!1}},async moveItem(e,t,i){return this._queueOperation(()=>this._moveItemSync(e,t,i))},_moveItemSync(e,t,i){try{if(!this._cache)return!1;const a=String(e),n=t+"Ids",o=i+"Ids";let s=!1;if(this._cache[n]){const e=new Set(this._cache[n]);e.has(a)&&(e.delete(a),this._cache[n]=Array.from(e),s=!0)}if(this._cache[o]){const e=new Set(this._cache[o]);e.has(a)||(e.add(a),this._cache[o]=Array.from(e))}return s&&this._updateAppData(),s}catch(a){return a.message,!1}},async removeItem(e,t){return this._queueOperation(()=>this._removeItemSync(e,t))},_removeItemSync(e,t){try{if(!this._cache)return!1;const i=String(e),a=t+"Ids";if(!this._cache[a])return!1;const n=new Set(this._cache[a]);return!!n.has(i)&&(n.delete(i),this._cache[a]=Array.from(n),this._cache[a].length,this._updateAppData(),!0)}catch(i){return i.message,!1}},async _queueOperation(e){return new Promise(t=>{this._operationQueue.push({operation:e,resolve:t}),this._processQueue()})},async _processQueue(){if(!this._isProcessingQueue&&0!==this._operationQueue.length){for(this._isProcessingQueue=!0;this._operationQueue.length>0;){const{operation:i,resolve:a}=this._operationQueue.shift();try{a(await i())}catch(t){e(t.message),a(!1)}}this._isProcessingQueue=!1}},_updateAppData(){window.appData||(window.appData={watchlists:{movies:{},tv:{}}}),window.appData.watchlists||(window.appData.watchlists={movies:{},tv:{}}),window.appData.watchlists.movies={watching:this._getItemsForList("watching","movie"),wishlist:this._getItemsForList("wishlist","movie"),watched:this._getItemsForList("watched","movie")},window.appData.watchlists.tv={watching:this._getItemsForList("watching","tv"),wishlist:this._getItemsForList("wishlist","tv"),watched:this._getItemsForList("watched","tv")},window.appData.movies=window.appData.watchlists.movies,window.appData.tv=window.appData.watchlists.tv},_getItemsForList(e,t){const i=e+"Ids";return(this._cache[i]||[]).map(e=>{const i=this.getItemData(e);return i||{id:Number(e),media_type:t}})},getItemData(e){var t,i,a,n,o,s;try{const r=String(e);if(this._cache&&this._cache.itemData&&this._cache.itemData[e]){const t=this._cache.itemData[e];return t.title||t.name,t}const d=window.appData||{},l=d.tv||{},c=d.movies||{};null==(t=l.watching)||t.length,null==(i=l.wishlist)||i.length,null==(a=l.watched)||a.length,null==(n=c.watching)||n.length,null==(o=c.wishlist)||o.length,null==(s=c.watched)||s.length;const u=[...Array.isArray(l.watching)?l.watching:[],...Array.isArray(l.wishlist)?l.wishlist:[],...Array.isArray(l.watched)?l.watched:[],...Array.isArray(c.watching)?c.watching:[],...Array.isArray(c.wishlist)?c.wishlist:[],...Array.isArray(c.watched)?c.watched:[]].find(e=>String(e.id||e.tmdb_id||e.tmdbId)===r);return u?(u.title||u.name,{...u,id:u.id||u.tmdb_id||u.tmdbId||e,media_type:u.media_type||(u.first_air_date?"tv":"movie")}):null}catch(r){return r.message,null}},_storeItemData(e,t){try{this._cache.itemData||(this._cache.itemData={}),this._cache.itemData[e]={...t,id:Number(e),media_type:t.media_type||(t.first_air_date?"tv":"movie")},t.title||t.name}catch(i){i.message}},invalidate(){this._cache=null,this._lastUid=null},getCache(){return this._cache}}}(),window.DataOperations={_adapter:null,_initialized:!1,async init(){if(!this._initialized)return!!window.WatchlistsAdapterV2&&(this._adapter=window.WatchlistsAdapterV2,await this._adapter.init(),this._initialized=!0,!0)},async _ensureInitialized(){this._initialized||await this.init()},async addItem(e,t,i=null){try{if(await this._ensureInitialized(),!e)throw new Error("Item ID is required");if(!t||!["watching","wishlist","watched"].includes(t))throw new Error("Invalid list name");if(!this._adapter)throw new Error("Adapter not available");const a=await this._adapter.addItem(e,t,i);return!!a&&(await this._saveData(),this._emitEvent("item:added",{itemId:e,listName:t,itemData:i}),!0)}catch(a){return a.message,this._emitEvent("item:add:error",{itemId:e,listName:t,error:a.message}),!1}},async moveItem(e,t,i){try{if(await this._ensureInitialized(),!e)throw new Error("Item ID is required");if(!(t&&i&&["watching","wishlist","watched"].includes(t)&&["watching","wishlist","watched"].includes(i)))throw new Error("Invalid list names");return t===i||!!(await this._adapter.moveItem(e,t,i))&&(await this._saveData(),this._emitEvent("item:moved",{itemId:e,fromList:t,toList:i}),!0)}catch(a){return a.message,this._emitEvent("item:move:error",{itemId:e,fromList:t,toList:i,error:a.message}),!1}},async removeItem(e,t){try{if(await this._ensureInitialized(),!e)throw new Error("Item ID is required");if(!t||!["watching","wishlist","watched"].includes(t))throw new Error("Invalid list name");return!!(await this._adapter.removeItem(e,t))&&(await this._saveData(),this._emitEvent("item:removed",{itemId:e,fromList:t}),!0)}catch(i){return i.message,this._emitEvent("item:remove:error",{itemId:e,fromList:t,error:i.message}),!1}},async getItems(e,t=null){try{if(await this._ensureInitialized(),!e||!["watching","wishlist","watched"].includes(e))throw new Error("Invalid list name");const i=this._adapter.getCache();if(!i)return[];const a=i[e+"Ids"]||[];return t?a.map(e=>({id:Number(e),media_type:t})):a.map(e=>({id:Number(e)}))}catch(i){return i.message,[]}},async hasItem(e,t){try{await this._ensureInitialized();const i=this._adapter.getCache();return!!i&&(i[t+"Ids"]||[]).includes(String(e))}catch(i){return i.message,!1}},async _saveData(){var e;try{"function"==typeof window.saveAppData&&window.saveAppData(),"function"==typeof window.saveData&&(null==(e=window.firebaseAuth)?void 0:e.currentUser)&&await window.saveData()}catch(t){throw t.message,t}},_emitEvent(e,t){try{document.dispatchEvent(new CustomEvent(e,{detail:t}))}catch(i){i.message}},getAdapter(){return this._adapter}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.DataOperations.init()}):window.DataOperations.init(),window.NotificationSystem={_container:null,_notifications:new Map,_zIndex:1e4,init(){this._createContainer(),this._setupStyles()},_createContainer(){const e=document.getElementById("notification-container");e&&e.remove(),this._container=document.createElement("div"),this._container.id="notification-container",this._container.className="notification-container",document.body.appendChild(this._container)},_setupStyles(){if(document.getElementById("notification-styles"))return;const e=document.createElement("style");e.id="notification-styles",e.textContent="\n        .notification-container {\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          z-index: 10000;\n          pointer-events: none;\n        }\n        \n        .notification {\n          background: var(--bg, #ffffff);\n          border: 1px solid var(--border, #e5e7eb);\n          border-radius: 8px;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n          padding: 12px 16px;\n          margin-bottom: 8px;\n          max-width: 300px;\n          pointer-events: auto;\n          transform: translateX(100%);\n          transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;\n          opacity: 0;\n          position: relative;\n        }\n        \n        .notification.show {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        \n        .notification.success {\n          border-left: 4px solid #10b981;\n          background: #f0fdf4;\n        }\n        \n        .notification.error {\n          border-left: 4px solid #ef4444;\n          background: #fef2f2;\n        }\n        \n        .notification.info {\n          border-left: 4px solid #3b82f6;\n          background: #eff6ff;\n        }\n        \n        .notification.warning {\n          border-left: 4px solid #f59e0b;\n          background: #fffbeb;\n        }\n        \n        .notification__content {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .notification__icon {\n          font-size: 16px;\n          flex-shrink: 0;\n        }\n        \n        .notification__message {\n          flex: 1;\n          font-size: 14px;\n          font-weight: 500;\n          color: var(--fg, #1f2937);\n        }\n        \n        .notification__close {\n          background: none;\n          border: none;\n          font-size: 18px;\n          cursor: pointer;\n          color: var(--muted, #6b7280);\n          padding: 0;\n          width: 20px;\n          height: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .notification__close:hover {\n          color: var(--fg, #1f2937);\n        }\n        \n        @media (max-width: 640px) {\n          .notification-container {\n            top: 10px;\n            right: 10px;\n            left: 10px;\n          }\n          \n          .notification {\n            max-width: none;\n          }\n        }\n      ",document.head.appendChild(e)},show(e,t="info",i=5e3){const a=Date.now()+Math.random(),n=this._createNotification(a,e,t);return this._container.appendChild(n),this._notifications.set(a,n),requestAnimationFrame(()=>{n.classList.add("show")}),i>0&&setTimeout(()=>{this.hide(a)},i),a},_createNotification(e,t,i){const a=document.createElement("div");a.className=`notification ${i}`,a.dataset.id=e;const n=this._getIcon(i);return a.innerHTML=`\n        <div class="notification__content">\n          <span class="notification__icon">${n}</span>\n          <span class="notification__message">${this._escapeHtml(t)}</span>\n          <button class="notification__close" onclick="window.NotificationSystem.hide(${e})">&times;</button>\n        </div>\n      `,a},_getIcon(e){const t={success:"âœ…",error:"âŒ",warning:"âš ï¸",info:"â„¹ï¸"};return t[e]||t.info},hide(e){const t=this._notifications.get(e);t&&(t.classList.remove("show"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),this._notifications.delete(e)},300))},hideAll(){this._notifications.forEach((e,t)=>{this.hide(t)})},_escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.NotificationSystem.init()}):window.NotificationSystem.init(),window.showNotification=(e,t="info",i=5e3)=>window.NotificationSystem.show(e,t,i),window.UIIntegration={_initialized:!1,_notificationSystem:null,async init(){this._initialized||(await this._waitForSystems(),this._setupEventListeners(),this._setupNotifications(),this._initialized=!0)},async _waitForSystems(){let e=0;for(;(!window.DataOperations||!window.NotificationSystem)&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(!window.DataOperations)throw new Error("DataOperations not available");window.NotificationSystem},_setupEventListeners(){document.addEventListener("item:added",e=>{this._handleItemAdded(e.detail)}),document.addEventListener("item:moved",e=>{this._handleItemMoved(e.detail)}),document.addEventListener("item:removed",e=>{this._handleItemRemoved(e.detail)}),document.addEventListener("item:add:error",e=>{this._handleError("add",e.detail)}),document.addEventListener("item:move:error",e=>{this._handleError("move",e.detail)}),document.addEventListener("item:remove:error",e=>{this._handleError("remove",e.detail)})},_setupNotifications(){this._notificationSystem=window.NotificationSystem},_handleItemAdded(e){this._showNotification(`Added to ${e.listName}`,"success"),this._updateUI(),this._removeFromSearchResults(e.itemId)},_handleItemMoved(e){this._showNotification(`Moved to ${e.toList}`,"success"),this._updateUI()},_handleItemRemoved(e){this._showNotification("Item removed","success"),this._updateUI()},_handleError(e,t){const i=this._getErrorMessage(e,t.error);this._showNotification(i,"error")},_getErrorMessage:(e,t)=>({add:`Failed to add item: ${t}`,move:`Failed to move item: ${t}`,remove:`Failed to remove item: ${t}`}[e]||`Operation failed: ${t}`),_showNotification(e,t,i=5e3){this._notificationSystem?this._notificationSystem.show(e,t,i):t.toUpperCase()},_updateUI(){try{"function"==typeof window.updateTabCounts&&window.updateTabCounts(),window.FlickletApp&&"function"==typeof window.FlickletApp.updateUI&&window.FlickletApp.updateUI(),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"ui-integration"}}))}catch(e){e.message}},_removeFromSearchResults(e){try{const t=document.getElementById("searchResultsList")||document.getElementById("searchResultsGrid")||document.getElementById("searchResults");if(t){const i=t.querySelector(`[data-id="${e}"]`);if(i){i.remove();const e=document.getElementById("resultsCount");if(e){const i=t.querySelectorAll("[data-id]").length;e.textContent=String(i)}}}}catch(t){t.message}}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.UIIntegration.init()}):window.UIIntegration.init(),function(){window.__CLOUD_ENABLED__=!1,window.__AUTH_READY__=!1;let e=window.firebaseApp||null,t=window.firebaseAuth||null,i=window.firebaseDb||null;const a={get(e,t=null){try{const i=localStorage.getItem(e);return i?JSON.parse(i):t}catch{return t}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}};function n(){return a.get("flicklet-data",{tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},settings:{pro:!1,isPro:!1,episodeTracking:!1,theme:"light",lang:"en"}})}function o(e){e&&"object"==typeof e&&a.set("flicklet-data",e)}window.loadUserDataAndReplaceCards=async function(){try{const e=n();null==e||e.tv,null==e||e.movies,document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"localStorage"}}))}catch(e){null==e||e.message}};const s=()=>firebase.auth&&firebase.auth().currentUser||null;function r(e){var i;if(!window.__CLOUD_ENABLED__)throw new Error("cloud-disabled");const a=window.firebaseAuth||t,n=null==(i=null==a?void 0:a.currentUser)?void 0:i.uid;if(!n)throw new Error("no-user");const o=window.firebaseDb;if(!o)throw new Error("no-db");if("settings"===e)return o.collection("users").doc(n).collection("settings").doc("app");if("lists"===e)return o.collection("users").doc(n);throw new Error("bad-kind")}!async function(){try{e=window.firebaseApp||null,t=window.firebaseAuth||null,i=window.firebaseDb||null,window.__AUTH_READY__=!!t,window.__CLOUD_ENABLED__=!!(e&&t&&i),await window.loadUserDataAndReplaceCards(),window.__CLOUD_ENABLED__||window.addEventListener("firebase:ready",async()=>{const e=window.firebaseApp,t=window.firebaseAuth,i=window.firebaseDb;if(e&&t&&i&&(window.__CLOUD_ENABLED__=!0,window.__AUTH_READY__=!0,document.addEventListener("auth:changed",async e=>{const t=e.detail.user;if(t)try{await l("auth-change"),setTimeout(()=>{"function"==typeof window.updateUI&&window.updateUI(),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"data-init-ready"}}))},500)}catch(i){null==i||i.message}else{const e=window.location.search.includes("auth")||window.location.hash.includes("auth")||document.referrer.includes("accounts.google.com")||document.referrer.includes("google.com"),t=window.__SIGN_IN_ATTEMPTED__;if(window.location.search,window.location.hash,document.referrer,e)return;t&&function(){try{localStorage.removeItem("flicklet-data"),localStorage.removeItem("tvMovieTrackerData"),localStorage.removeItem("flicklet_lists"),localStorage.removeItem("flicklet_notes"),localStorage.removeItem("flicklet_prefs");const e={tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},settings:{pro:!1,isPro:!1,episodeTracking:!1,theme:"light",lang:"en"}};window.appData&&(window.appData.tv=e.tv,window.appData.movies=e.movies,window.appData.settings=e.settings),o(e),document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"cleared"}}))}catch(i){null==i||i.message}}()}}),t.currentUser))try{await l("firebase-ready")}catch(a){null==a||a.message}})}catch(a){null==a||a.message}}();const d=e=>new Promise(t=>setTimeout(t,e));async function l(e="manual"){var t,i,a,l,c,u,w,h,m,p,g,v,f,y,_,b,S,k,E,I,A,D,L;try{if(!s())return;if(!window.db)return;const e=n(),d=(null==(t=e.settings)?void 0:t.lastUpdated)||0,[C,T]=[r("settings"),r("lists")],[x,M]=await Promise.all([C.get(),T.get()]);let F=!0;const N="function"==typeof M.exists;if(N?M.exists():!M.empty){let e={};N?e=M.data()||{}:M.empty||(e=(null==(i=M.docs[0])?void 0:i.data())||{});const t=(null==(l=null==(a=e.lastUpdated)?void 0:a.toMillis)?void 0:l.call(a))||e.lastUpdated||0;d>t&&(F=!1)}if(F){x.exists()&&(e.settings={...e.settings||{},...x.data()||{}});const t="function"==typeof M.exists;if(t?M.exists():!M.empty){let i={};i=t?M.data()||{}:(null==(c=M.docs[0])?void 0:c.data())||{};const a=i.watchlists||{};((null==(w=null==(u=a.tv)?void 0:u.watching)?void 0:w.length)>0||(null==(m=null==(h=a.tv)?void 0:h.wishlist)?void 0:m.length)>0||(null==(g=null==(p=a.tv)?void 0:p.watched)?void 0:g.length)>0||(null==(f=null==(v=a.movies)?void 0:v.watching)?void 0:f.length)>0||(null==(_=null==(y=a.movies)?void 0:y.wishlist)?void 0:_.length)>0||(null==(S=null==(b=a.movies)?void 0:b.watched)?void 0:S.length)>0)&&(e.tv={watching:(null==(k=a.tv)?void 0:k.watching)||[],wishlist:(null==(E=a.tv)?void 0:E.wishlist)||[],watched:(null==(I=a.tv)?void 0:I.watched)||[]},e.movies={watching:(null==(A=a.movies)?void 0:A.watching)||[],wishlist:(null==(D=a.movies)?void 0:D.wishlist)||[],watched:(null==(L=a.movies)?void 0:L.watched)||[]}),e.tv.watching.length,e.tv.wishlist.length,e.tv.watched.length,e.movies.watching.length,e.movies.wishlist.length,e.movies.watched.length}o(e),"function"==typeof window.loadAppData&&window.loadAppData()}document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"cloud"}})),Object.fromEntries(Object.entries(e.tv).map(([e,t])=>[e,t.length])),Object.fromEntries(Object.entries(e.movies).map(([e,t])=>[e,t.length]))}catch(C){null==C||C.message;const e=(C&&(C.code||C.message||""))+"";/network|unavailable|deadline/i.test(e)&&await d(1e3)}}window.DataInit={init:async function(){await async function(){var e,t,i;return s()||((null==(e=window.AuthStateManager)?void 0:e.init)?(await window.AuthStateManager.init(),(null==(i=(t=window.AuthStateManager).getCurrentUser)?void 0:i.call(t))||s()):await new Promise(e=>{const t=()=>{document.removeEventListener("auth:ready",t),e(window.currentUser||null)};document.addEventListener("auth:ready",t)}))}()&&await l()},trySync:l,readLocalAppData:n,writeLocalAppData:o}}(),function(){let e={isMigrating:!1,hasMigrated:!1,lastMigration:null};function t(){const e=JSON.parse(localStorage.getItem("flicklet-data")||"{}");return JSON.stringify(e).length>1048576}async function i(){var t,i,n,o,s,r,d,l,c,u,w,h,m,p,g,v;if(!e.isMigrating){e.isMigrating=!0;try{const f=(await window.ensureUser()).uid,y=window.firebaseDb;if(!y)throw new Error("Firebase not available");const _=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),b={"tv-watching":y.collection(`users/${f}/watchlists/tv/watching`),"tv-wishlist":y.collection(`users/${f}/watchlists/tv/wishlist`),"tv-watched":y.collection(`users/${f}/watchlists/tv/watched`),"movies-watching":y.collection(`users/${f}/watchlists/movies/watching`),"movies-wishlist":y.collection(`users/${f}/watchlists/movies/wishlist`),"movies-watched":y.collection(`users/${f}/watchlists/movies/watched`)},S=[];(null==(i=null==(t=_.tv)?void 0:t.watching)?void 0:i.length)>0&&S.push(a(b["tv-watching"],_.tv.watching)),(null==(o=null==(n=_.tv)?void 0:n.wishlist)?void 0:o.length)>0&&S.push(a(b["tv-wishlist"],_.tv.wishlist)),(null==(r=null==(s=_.tv)?void 0:s.watched)?void 0:r.length)>0&&S.push(a(b["tv-watched"],_.tv.watched)),(null==(l=null==(d=_.movies)?void 0:d.watching)?void 0:l.length)>0&&S.push(a(b["movies-watching"],_.movies.watching)),(null==(u=null==(c=_.movies)?void 0:c.wishlist)?void 0:u.length)>0&&S.push(a(b["movies-wishlist"],_.movies.wishlist)),(null==(h=null==(w=_.movies)?void 0:w.watched)?void 0:h.length)>0&&S.push(a(b["movies-watched"],_.movies.watched)),await Promise.all(S);const k={settings:_.settings||{},pro:(null==(m=_.settings)?void 0:m.pro)||!1,lastUpdated:(null==(v=null==(g=null==(p=window.firebase)?void 0:p.firestore)?void 0:g.FieldValue)?void 0:v.serverTimestamp())||new Date,migrationVersion:"2.0",migratedAt:(new Date).toISOString()};return await y.collection("users").doc(f).set(k,{merge:!0}),e.hasMigrated=!0,e.lastMigration=(new Date).toISOString(),localStorage.setItem("flicklet-migration-status",JSON.stringify(e)),!0}catch(f){return!1}finally{e.isMigrating=!1}}}async function a(e,t,i){const a=window.firebaseDb.batch();for(let n=0;n<t.length;n+=500)t.slice(n,n+500).forEach((t,i)=>{const o=e.doc(`${t.id}_${n+i}`);a.set(o,{...t,migratedAt:(new Date).toISOString(),originalIndex:n+i})}),await a.commit()}async function n(){try{const e=(await window.ensureUser()).uid,t=window.firebaseDb;if(!t)throw new Error("Firebase not available");const i={"tv-watching":t.collection(`users/${e}/watchlists/tv/watching`),"tv-wishlist":t.collection(`users/${e}/watchlists/tv/wishlist`),"tv-watched":t.collection(`users/${e}/watchlists/tv/watched`),"movies-watching":t.collection(`users/${e}/watchlists/movies/watching`),"movies-wishlist":t.collection(`users/${e}/watchlists/movies/wishlist`),"movies-watched":t.collection(`users/${e}/watchlists/movies/watched`)},a={tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},settings:{}};for(const[o,s]of Object.entries(i)){const e=(await s.get()).docs.map(e=>{const t=e.data();return delete t.migratedAt,delete t.originalIndex,t});if(o.startsWith("tv-")){const t=o.replace("tv-","");a.tv[t]=e}else if(o.startsWith("movies-")){const t=o.replace("movies-","");a.movies[t]=e}}const n=await t.collection("users").doc(e).get();return n.exists()&&(a.settings=n.data().settings||{}),localStorage.setItem("flicklet-data",JSON.stringify(a)),"function"==typeof window.loadAppData&&window.loadAppData(),a}catch(e){return null}}function o(){const t=localStorage.getItem("flicklet-migration-status");return t&&(e={...e,...JSON.parse(t)}),e}window.FirebaseMigration={needsMigration:t,migrateToSubcollections:i,loadFromSubcollections:n,getMigrationStatus:o,autoMigrate:async function(){return o().hasMigrated||t()&&await i()?await n():null}}}(),function(){function e(e,t){if(!e||"object"!=typeof e)return null;const i=e.media_type||(e.name?"tv":"movie"),a=e.id,n={id:a,media_type:i,title:e.title||e.name,poster_path:e.poster_path,backdrop_path:e.backdrop_path,release_date:e.release_date||e.first_air_date,vote_average:e.vote_average,overview:e.overview,added_date:e.added_date||Date.now(),user_notes:e.user_notes||"",user_rating:e.user_rating||null,list_type:t,last_watched:e.last_watched||null,watch_count:e.watch_count||0,compound_id:`${i}:${a}`,data_v:1,origin:e.origin||"unknown"};return Object.keys(n).forEach(e=>{null!==n[e]&&void 0!==n[e]||delete n[e]}),n}function t(t){var i,a,n,o,s,r;if(!t||"object"!=typeof t)return t;const d={settings:t.settings||{},tv:{watching:((null==(i=t.tv)?void 0:i.watching)||[]).map(t=>e(t,"watching")),wishlist:((null==(a=t.tv)?void 0:a.wishlist)||[]).map(t=>e(t,"wishlist")),watched:((null==(n=t.tv)?void 0:n.watched)||[]).map(t=>e(t,"watched"))},movies:{watching:((null==(o=t.movies)?void 0:o.watching)||[]).map(t=>e(t,"watching")),wishlist:((null==(s=t.movies)?void 0:s.wishlist)||[]).map(t=>e(t,"wishlist")),watched:((null==(r=t.movies)?void 0:r.watched)||[]).map(t=>e(t,"watched"))}};return Object.keys(d).forEach(e=>{d[e]&&"object"==typeof d[e]&&Object.keys(d[e]).forEach(t=>{Array.isArray(d[e][t])&&(d[e][t]=d[e][t].filter(e=>null!==e))})}),d}function i(){try{const e=localStorage.getItem("flicklet-data");if(!e)return;const i=t(JSON.parse(e)),a=e.length,n=JSON.stringify(i).length;return Math.round(100*(1-n/a)),localStorage.setItem("flicklet-data",JSON.stringify(i)),"function"==typeof window.loadAppData&&window.loadAppData(),i}catch(e){return null}}window.DataOptimizer={optimizeItem:e,optimizeWatchlistData:t,getFullItemDetails:async function(e){if(!e||!e.id||!e.media_type)return null;try{const t="tv"===e.media_type?`tv/${e.id}`:`movie/${e.id}`,i=await window.tmdbGet(t);if(i&&i.id)return{...i,added_date:e.added_date,user_notes:e.user_notes,user_rating:e.user_rating,list_type:e.list_type,last_watched:e.last_watched,watch_count:e.watch_count}}catch(t){}return null},optimizeOnLoad:i,optimizeBeforeSave:function(e){if(!e||"object"!=typeof e)return e;const i=t(e);return JSON.stringify(i).length,i},ESSENTIAL_FIELDS:{id:!0,media_type:!0,title:!0,name:!0,poster_path:!0,backdrop_path:!0,release_date:!0,first_air_date:!0,vote_average:!0,overview:!0,added_date:!0,user_notes:!0,user_rating:!0,list_type:!0,last_watched:!0,watch_count:!0,compound_id:!0,data_v:!0,origin:!0},EXCLUDED_FIELDS:{genres:!0,networks:!0,production_companies:!0,spoken_languages:!0,origin_country:!0,languages:!0,seasons:!0,episodes:!0,last_episode_to_air:!0,next_episode_to_air:!0,number_of_episodes:!0,number_of_seasons:!0,popularity:!0,vote_count:!0,adult:!0,video:!0,original_language:!0,original_title:!0,original_name:!0,last_air_date:!0,in_production:!0,status:!0,runtime:!0,homepage:!0,_score:!0,because:!0}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}(),function(){var e,t;function i(e,t){if(!e||"object"!=typeof e)return null;const i=e.media_type||(e.name?"tv":"movie"),a=e.id;return{id:a,media_type:i,title:e.title||e.name,poster_path:e.poster_path,backdrop_path:e.backdrop_path,release_date:e.release_date||e.first_air_date,vote_average:e.vote_average,overview:e.overview,added_date:e.added_date||Date.now(),user_notes:e.user_notes||"",user_rating:e.user_rating||null,list_type:t,last_watched:e.last_watched||null,watch_count:e.watch_count||0,compound_id:`${i}:${a}`,data_v:1,origin:e.origin||"migrated"}}async function a(){try{const e=window.firebase.firestore(),t=window.firebase.auth.currentUser,i=e.collection("users").doc(t.uid),a=await i.get();if(a.exists){const e=a.data();JSON.stringify(e).length>1048576||e.data_v}}catch(e){}}window.FirebaseCleanup={cleanupFirebaseData:async function(){var e,t,a,n,o,s,r,d,l,c,u,w,h,m;try{const p=null==(t=null==(e=window.firebase)?void 0:e.auth)?void 0:t.currentUser;if(!p)return!1;const g=window.firebase.firestore().collection("users").doc(p.uid),v=await g.get();if(!v.exists)return!0;const f=v.data();if(f.data_v>=1)return!0;const y={...f,watchlists:{tv:{watching:((null==(n=null==(a=f.watchlists)?void 0:a.tv)?void 0:n.watching)||[]).map(e=>i(e,"watching")),wishlist:((null==(s=null==(o=f.watchlists)?void 0:o.tv)?void 0:s.wishlist)||[]).map(e=>i(e,"wishlist")),watched:((null==(d=null==(r=f.watchlists)?void 0:r.tv)?void 0:d.watched)||[]).map(e=>i(e,"watched"))},movies:{watching:((null==(c=null==(l=f.watchlists)?void 0:l.movies)?void 0:c.watching)||[]).map(e=>i(e,"watching")),wishlist:((null==(w=null==(u=f.watchlists)?void 0:u.movies)?void 0:w.wishlist)||[]).map(e=>i(e,"wishlist")),watched:((null==(m=null==(h=f.watchlists)?void 0:h.movies)?void 0:m.watched)||[]).map(e=>i(e,"watched"))}},data_v:1,lastUpdated:window.firebase.firestore.FieldValue.serverTimestamp()};Object.keys(y.watchlists).forEach(e=>{Object.keys(y.watchlists[e]).forEach(t=>{y.watchlists[e][t]=y.watchlists[e][t].filter(e=>null!==e)})});const _=JSON.stringify(y).length;return Math.round(100*(1-_/JSON.stringify(f).length)),!(_>1048576||(await g.set(y,{merge:!0}),0))}catch(p){return!1}},backupCurrentData:async function(){var e,t;try{const i=null==(t=null==(e=window.firebase)?void 0:e.auth)?void 0:t.currentUser;if(!i)return!1;const a=window.firebase.firestore().collection("users").doc(i.uid),n=await a.get();if(n.exists){const e={...n.data(),backup_date:(new Date).toISOString(),backup_reason:"pre_cleanup"};return localStorage.setItem("flicklet-backup-pre-cleanup",JSON.stringify(e)),!0}return!1}catch(i){return!1}},cleanItem:i},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{var e,t;(null==(t=null==(e=window.firebase)?void 0:e.auth)?void 0:t.currentUser)&&a()}):(null==(t=null==(e=window.firebase)?void 0:e.auth)?void 0:t.currentUser)&&a()}(),function(){const e={REDIRECT_FLAG:"flicklet_auth_redirect_initiated",PENDING_EMAIL:"flicklet_auth_pending_email",PROVIDERS:{GOOGLE:"google",APPLE:"apple",EMAIL:"email"},METHODS:{POPUP:"popup",REDIRECT:"redirect"},_activeLoginRequests:new Set,_processUserSignInLock:!1,init(){if(this.setupPostMessageListener(),this.setupFirebaseAuth(),this.setupAccountButton(),sessionStorage.getItem("auth:redirectPending")){const e=()=>this.handleRedirectResult().catch(e=>{});"loading"===document.readyState?window.addEventListener("DOMContentLoaded",e,{once:!0}):setTimeout(e,0)}},setupFirebaseAuth(){if(!window.firebase||!window.firebaseAuth){const e=()=>{window.firebase&&window.firebaseAuth?this.initializeAuthListener():setTimeout(e,100)};return void e()}this.initializeAuthListener()},initializeAuthListener(){window.__AUTH_LISTENER_REGISTERED__||(window.__AUTH_LISTENER_REGISTERED__=!0,window.firebaseAuth.onAuthStateChanged(e=>{window.FlickletApp&&(window.FlickletApp.currentUser=e),window.currentUser=e,window.UserViewModel&&window.UserViewModel.update(e),this.setAuthUI(!!e,(null==e?void 0:e.displayName)||(null==e?void 0:e.email)||null),document.dispatchEvent(new CustomEvent("auth:changed",{detail:{user:e,timestamp:Date.now()}})),e?this.handleLoginSuccess(e,"Firebase"):this.handleSignOut()}),document.dispatchEvent(new CustomEvent("auth:ready",{detail:{timestamp:Date.now()}})))},setAuthUI(e,t){if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",()=>this.setAuthUI(e,t),{once:!0});const i=document.getElementById("accountButton"),a=document.getElementById("accountButtonLabel"),n=document.getElementById("accountContext");i&&(i.setAttribute("data-auth-state",e?"signed-in":"signed-out"),i.setAttribute("aria-label",e?`Account: ${t}`:"Sign in to your account")),a&&(a.textContent=e?t||"Account":"Sign In"),n&&(n.textContent=e?`Signed in as ${t}`:"Not signed in")},async startLogin(e,t=null){if(Date.now(),!this._activeLoginRequests.has(e))try{switch(this._activeLoginRequests.add(e),e){case this.PROVIDERS.GOOGLE:await this.startGoogleLogin(t);break;case this.PROVIDERS.APPLE:await this.startAppleLogin();break;case this.PROVIDERS.EMAIL:await this.startEmailLogin();break;default:throw new Error(`Unknown provider: ${e}`)}}catch(i){this.showError("Sign-in failed. Please try again.")}finally{this._activeLoginRequests.delete(e)}},async startGoogleLogin(e=null){if(!window.firebase||!window.firebaseAuth)throw new Error("Firebase not available");const t=new window.firebase.auth.GoogleAuthProvider;if(e||(e=this.isMobile()?this.METHODS.REDIRECT:this.METHODS.POPUP),e===this.METHODS.POPUP){if("function"!=typeof window.firebaseAuth.signInWithPopup)return void(await this.startGoogleLogin(this.METHODS.REDIRECT));try{const e=await window.firebaseAuth.signInWithPopup(t);if(!e)throw new Error("[auth] unsupported login method for provider");this.handleLoginSuccess(e.user,"Google")}catch(i){if("auth/popup-blocked"!==i.code&&"auth/popup-closed-by-user"!==i.code&&!i.message.includes("Cross-Origin-Opener-Policy")&&!i.message.includes("window.closed"))throw i;await this.startGoogleLogin(this.METHODS.REDIRECT)}}else{if(this.setRedirectFlag("google"),"function"!=typeof window.firebaseAuth.signInWithRedirect)throw new Error("No redirect method available");await window.firebaseAuth.signInWithRedirect(t)}},async startAppleLogin(){/^(localhost|127\.0\.0\.1)$/.test(location.hostname),sessionStorage.setItem("auth:redirectPending",JSON.stringify({provider:"apple",ts:Date.now()}));const e=new firebase.auth.OAuthProvider("apple.com");e.addScope("email"),e.addScope("name");try{await firebaseAuth.signInWithRedirect(e)}catch(t){sessionStorage.removeItem("auth:redirectPending")}},async startEmailLogin(){this.showEmailModal()},handleLoginSuccess(e,t){this.updateAccountButton(e),this.closeProviderModal(),this.closeEmailModal(),this.showSuccess(`Signed in with ${t}`),this.notifyIframes("auth-success",{user:e.email,provider:t}),window.__CLOUD_ENABLED__||(window.__CLOUD_ENABLED__=!0,window.__AUTH_READY__=!0),setTimeout(async()=>{try{window.__CLOUD_ENABLED__&&window.DataInit&&"function"==typeof window.DataInit.trySync?await window.DataInit.trySync("auth-change"):window.__CLOUD_ENABLED__&&"function"==typeof window.trySync&&await window.trySync("auth-change"),window.__CLOUD_ENABLED__&&window.firebase&&window.firebase.firestore&&await this.loadUserDataFromFirebase(e),window.FlickletApp&&"function"==typeof window.FlickletApp.handlePostAuthSuccess&&await window.FlickletApp.handlePostAuthSuccess(e),setTimeout(()=>{"function"==typeof window.updateUI&&window.updateUI(),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"auth-change"}}))},500)}catch(t){}},1e3)},handleLoginError(e,t){this.showError("Sign-in failed. Please try again.")},showEmailModal(){this._authModalManager.close();let e=document.getElementById("emailAuthModal");e||(e=document.createElement("div"),e.id="emailAuthModal",e.className="auth-modal-backdrop email-modal-backdrop",e.setAttribute("aria-hidden","true"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","emailAuthModal-title"),document.body.appendChild(e)),e.innerHTML='\n        <div class="auth-modal-content email-modal">\n          <h2 id="emailAuthModal-title">Sign in with Email</h2>\n          <form id="emailAuthForm">\n            <div class="form-group">\n              <label for="emailInput">Email</label>\n              <input type="email" id="emailInput" required>\n            </div>\n            <div class="form-group">\n              <label for="passwordInput">Password</label>\n              <input type="password" id="passwordInput" required>\n            </div>\n            <div id="emailAuthError" class="error-message" style="display: none;"></div>\n            <div class="form-actions">\n              <button type="button" id="cancelEmailAuth" class="auth-button auth-button--cancel">Cancel</button>\n              <button type="submit" id="submitEmailAuth" class="auth-button auth-button--primary">Sign In</button>\n            </div>\n          </form>\n        </div>\n      ',e.classList.add("is-active"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const t=e.querySelector("#emailAuthForm"),i=e.querySelector("#cancelEmailAuth");t&&t.addEventListener("submit",e=>{e.preventDefault(),this.handleEmailSubmit()}),i&&i.addEventListener("click",()=>{this.closeEmailModal()})},closeEmailModal(){const e=document.getElementById("emailAuthModal");e&&(e.classList.remove("is-active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="")},async handleEmailSubmit(){const e=document.getElementById("emailInput").value.trim(),t=document.getElementById("passwordInput").value,i=document.getElementById("emailAuthError"),a=document.getElementById("submitEmailAuth");i.style.display="none",a.disabled=!0,a.textContent="Signing in...";try{if(!e||!t)throw new Error("Email and password are required");if(!e.includes("@"))throw new Error("Please enter a valid email address");if(t.length<6)throw new Error("Password must be at least 6 characters");const i=await window.firebaseAuth.signInWithEmailAndPassword(e,t);this.handleLoginSuccess(i.user,"Email")}catch(n){i.textContent=n.message||"Sign-in failed. Please try again.",i.style.display="block"}finally{a.disabled=!1,a.textContent="Sign In"}},updateAccountButton(e){var t;const i=document.getElementById("accountButton"),a=document.getElementById("accountButtonLabel"),n=document.getElementById("accountContext");if(i&&a){const o=e.displayName||(null==(t=e.email)?void 0:t.split("@")[0])||"User";a.textContent=o,i.title=`Signed in as ${e.email}. Click to sign out.`,n&&(n.textContent="Sign out"),i.onclick=null}},showSignOutConfirmation(){var e,t;const i=null==(e=window.firebaseAuth)?void 0:e.currentUser;(null==i?void 0:i.displayName)||null==(t=null==i?void 0:i.email)||t.split("@")[0];let a=document.getElementById("signOutModal");a||(a=document.createElement("div"),a.id="signOutModal",a.className="auth-modal-backdrop signout-modal-backdrop",a.setAttribute("aria-hidden","true"),a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby","signOutModal-title"),document.body.appendChild(a)),a.innerHTML='\n        <div class="auth-modal-content signout-modal">\n          <h2 id="signOutModal-title">Sign out confirmation</h2>\n          <p>You\'re about to be signed out, are you sure?</p>\n          <div class="auth-buttons">\n            <button id="confirmSignOut" class="auth-button auth-button--danger">\n              Yes, Sign Out\n            </button>\n            <button id="cancelSignOut" class="auth-button auth-button--cancel">Cancel</button>\n          </div>\n        </div>\n      ',a.classList.add("is-active"),a.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const n=a.querySelector("#confirmSignOut"),o=a.querySelector("#cancelSignOut"),s=()=>{a.classList.remove("is-active"),a.setAttribute("aria-hidden","true"),document.body.style.overflow=""};n&&n.addEventListener("click",()=>{s(),this.signOut()}),o&&o.addEventListener("click",()=>{s()}),a.addEventListener("click",e=>{e.target===a&&s()});const r=e=>{"Escape"===e.key&&(s(),document.removeEventListener("keydown",r))};document.addEventListener("keydown",r),this._trapFocusInModal(a)},_trapFocusInModal(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=t[0],a=t[t.length-1];i&&i.focus();const n=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===i&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),i.focus()))};e.addEventListener("keydown",n),e._focusHandler=n},async signOut(){try{await window.firebaseAuth.signOut(),this.handleSignOut()}catch(e){this.showError("Sign out failed. Please try again.")}},handleSignOut(){const e=window.location.search.includes("auth")||window.location.hash.includes("auth")||document.referrer.includes("accounts.google.com")||document.referrer.includes("google.com");window.__SIGN_IN_ATTEMPTED__,e||(this._authModalManager.isModalOpen()&&this._authModalManager.close(),this._clearUserData())},async loadUserDataFromFirebase(e){try{const t=window.firebase.firestore(),i=await t.collection("users").doc(e.uid).get();if(!i.exists)return;const a=i.data();window.appData&&(a.watchlists&&(window.appData.tv=a.watchlists.tv||{watching:[],wishlist:[],watched:[]},window.appData.movies=a.watchlists.movies||{watching:[],wishlist:[],watched:[]}),a.tv&&(window.appData.tv=a.tv),a.movies&&(window.appData.movies=a.movies),a.settings&&(window.appData.settings={...window.appData.settings,...a.settings}),"function"==typeof window.saveAppData&&window.saveAppData(),window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.invalidate&&window.WatchlistsAdapter.invalidate(),document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"firebase"}})))}catch(t){throw t}},_clearUserData(){"function"==typeof window.clearUserData||"function"==typeof window.loadUserDataAndReplaceCards&&window.loadUserDataAndReplaceCards(),window.FlickletApp&&"function"==typeof window.FlickletApp.clearUserData&&window.FlickletApp.clearUserData();const e=document.getElementById("accountButton"),t=document.getElementById("accountButtonLabel"),i=document.getElementById("accountContext");e&&t&&(t.textContent="Sign In",e.title="Sign in",e.onclick=()=>this.showProviderModal()),i&&(i.textContent=""),this.closeProviderModal(),this.closeEmailModal(),window.appData&&(window.appData.tv={watching:[],wishlist:[],watched:[]},window.appData.movies={watching:[],wishlist:[],watched:[]},window.appData.settings=window.appData.settings||{},window.appData.settings.username="",window.appData.settings.displayName="");try{localStorage.removeItem("flicklet-data")}catch(a){}window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.invalidate&&window.WatchlistsAdapter.invalidate(),Object.keys(window).forEach(e=>{e.startsWith("render_")&&(window[e]=!1)}),document.querySelectorAll(".list-container").forEach(e=>{e.innerHTML='<div class="poster-cards-empty">Nothing here yet.</div>'}),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"sign-out-clear"}})),"function"==typeof window.updateUI&&window.updateUI(),this.notifyIframes("auth-signout"),document.dispatchEvent(new CustomEvent("userSignedOut",{detail:{timestamp:Date.now()}}))},_authModalManager:{isOpen:!1,modalElement:null,eventListeners:new Set,open(){return this.isOpen&&this.modalElement&&!this._isElementVisible()&&this._resetState(),!this.isOpen&&(this.modalElement=this._ensureModalElement(),!!this.modalElement&&(this._setModalContent(),this._showModal(),this._attachEventListeners(),this._trapFocusInModal(this.modalElement),this.isOpen=!0,!0))},close(){this.isOpen&&this.modalElement&&(this._hideModal(),this._detachEventListeners(),this._resetState())},isModalOpen(){return this.isOpen&&this.modalElement&&this._isElementVisible()},_ensureModalElement(){let e=document.getElementById("providerModal");return e||(e=document.createElement("div"),e.id="providerModal",e.className="auth-modal-backdrop",e.setAttribute("aria-hidden","true"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","providerModal-title"),document.body.appendChild(e)),e},_setModalContent(){this.modalElement.innerHTML='\n          <div class="auth-modal-content">\n            <h2 id="providerModal-title">Sign in to sync</h2>\n            <p>Continue to Flicklet</p>\n            <div class="auth-buttons">\n              <button id="googleProviderBtn" class="auth-button auth-button--google">\n                Continue with Google\n              </button>\n              <button id="appleProviderBtn" class="auth-button auth-button--apple">\n                Continue with Apple\n              </button>\n              <button id="emailProviderBtn" class="auth-button auth-button--email">\n                Continue with Email\n              </button>\n            </div>\n            <div class="modal-actions">\n              <button id="cancelProviderBtn" class="auth-button auth-button--cancel">Cancel</button>\n            </div>\n          </div>\n        '},_showModal(){this.modalElement.classList.add("is-active"),this.modalElement.setAttribute("aria-hidden","false"),this._lockScroll()},_hideModal(){this.modalElement.classList.remove("is-active"),this.modalElement.setAttribute("aria-hidden","true"),this._unlockScroll()},_isElementVisible(){return!!this.modalElement&&("none"!==window.getComputedStyle(this.modalElement).display&&"true"!==this.modalElement.getAttribute("aria-hidden")&&this.modalElement.classList.contains("is-active"))},_attachEventListeners(){if(!this.modalElement)return;const t=this.modalElement.querySelector("#googleProviderBtn"),i=this.modalElement.querySelector("#appleProviderBtn"),a=this.modalElement.querySelector("#emailProviderBtn"),n=this.modalElement.querySelector("#cancelProviderBtn"),o=()=>{this.close(),e.startGoogleLogin()},s=()=>{this.close(),e.startAppleLogin()},r=()=>{this.close(),e.showEmailModal()},d=()=>{this.close()},l=e=>{e.target===this.modalElement&&this.close()},c=e=>{"Escape"===e.key&&this.isOpen&&this.close()};t&&(t.addEventListener("click",o),this.eventListeners.add({element:t,event:"click",handler:o})),i&&(i.addEventListener("click",s),this.eventListeners.add({element:i,event:"click",handler:s})),a&&(a.addEventListener("click",r),this.eventListeners.add({element:a,event:"click",handler:r})),n&&(n.addEventListener("click",d),this.eventListeners.add({element:n,event:"click",handler:d})),this.modalElement.addEventListener("click",l),this.eventListeners.add({element:this.modalElement,event:"click",handler:l}),document.addEventListener("keydown",c),this.eventListeners.add({element:document,event:"keydown",handler:c})},_detachEventListeners(){this.eventListeners.forEach(({element:e,event:t,handler:i})=>{e.removeEventListener(t,i)}),this.eventListeners.clear()},_lockScroll(){document.body.style.overflow="hidden"},_unlockScroll(){document.body.style.overflow=""},_resetState(){this.isOpen=!1,this.modalElement=null,this.eventListeners.clear()},_trapFocusInModal(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=t[0],a=t[t.length-1];i&&i.focus();const n=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===i&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),i.focus()))};e.addEventListener("keydown",n),e._focusHandler=n}},showProviderModal(){if(!window.firebaseAuth||!window.firebaseAuth.currentUser)return this._authModalManager.open()},closeProviderModal(){this._authModalManager.close()},setupAccountButton(){const e=document.getElementById("accountButton");if(e){e.__authClickHandler&&e.removeEventListener("click",e.__authClickHandler);const t=e=>{e.preventDefault(),window===window.parent?window.firebaseAuth&&window.firebaseAuth.currentUser?this.showSignOutConfirmation():this.showProviderModal():window.parent.postMessage({type:"FLICKLET_START_LOGIN",provider:"google"},"*")};e.__authClickHandler=t,e.addEventListener("click",t)}},setupPostMessageListener(){window.addEventListener("message",e=>{this.isValidOrigin(e.origin)&&e.data&&"FLICKLET_START_LOGIN"===e.data.type&&this.startLogin(e.data.provider,e.data.method)})},notifyIframes(e,t={}){document.querySelectorAll("iframe").forEach(i=>{try{i.contentWindow.postMessage({type:`FLICKLET_${e.toUpperCase()}`,...t},"*")}catch(a){}})},async handleRedirectResult(){if(sessionStorage.getItem("auth:redirectPending"))if(document.body||await new Promise(e=>requestAnimationFrame(e)),await this.onDomReady(),window.firebaseAuth&&"function"==typeof window.firebaseAuth.getRedirectResult)try{const e=await window.firebaseAuth.getRedirectResult();if(e.user)this.handleLoginSuccess(e.user,"Redirect");else{try{const e=JSON.parse(sessionStorage.getItem("auth:redirectPending")||"{}");null==e||e.provider}finally{}const e=window.firebaseAuth.currentUser;e&&this.hasRedirectFlag()&&this.handleLoginSuccess(e,"Apple")}}catch(e){if(e.message&&e.message.includes("No location for new iframe"));else if("auth/no-auth-event"===e.code){const e=window.firebaseAuth.currentUser;if(e)return void this.handleLoginSuccess(e,"Google")}else this.showError(`Sign-in failed: ${e.message}`)}finally{sessionStorage.removeItem("auth:redirectPending")}else this.clearRedirectFlag()},setRedirectFlag(e="unknown"){const t=JSON.stringify({ts:Date.now(),provider:e});sessionStorage.setItem("auth:redirectPending",t)},hasRedirectFlag:()=>null!==sessionStorage.getItem("auth:redirectPending"),clearRedirectFlag(){sessionStorage.removeItem("auth:redirectPending")},onDomReady:()=>new Promise(e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}),isMobile(){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),i=window.innerWidth<=768;return!(t&&!i&&window.innerWidth>1024)&&(t||i)},isValidOrigin:e=>[window.location.origin,"https://flicklet-71dff.firebaseapp.com","https://flicklet-71dff.web.app"].includes(e),showSuccess(e){window.showNotification&&window.showNotification(e,"success")},showError(e){window.showNotification&&window.showNotification(e,"error")},async diagnoseDataLoading(){var e,t;const i=null==(e=window.firebaseAuth)?void 0:e.currentUser;if(!i)return;const a=null==(t=window.firebase)?void 0:t.firestore();if(a)try{const e=await a.collection("users").doc(i.uid).get();if(!e.exists)return;const t=e.data();t.watchlists,t.tv,t.movies,await this.loadUserDataFromFirebase(i),"function"==typeof window.updateUI&&window.updateUI()}catch(n){}}};window.AUTH_MANAGER=e,window.clearAllAuthModals=()=>{document.querySelectorAll('#providerModal, .modal-backdrop[data-modal="login"], #signInModal, #emailAuthModal, .modal-backdrop').forEach(e=>{e&&e.parentNode&&e.remove()})},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init()}(),window.loadUserDataFromCloud=async function(e){var t,i,a,n,o,s,r,d;try{const l=await db.collection("users").doc(e).get();if(!l.exists){FlickletDebug.info("ðŸ”„ No Firebase document found, preserving local settings");const e=(null==(t=appData.settings)?void 0:t.lang)||"en",a=(null==(i=appData.settings)?void 0:i.theme)||"light";return appData.tv={watching:[],wishlist:[],watched:[]},appData.movies={watching:[],wishlist:[],watched:[]},e&&(appData.settings.lang=e),a&&(appData.settings.theme=a),void localStorage.setItem("flicklet-data",JSON.stringify(appData))}const c=l.data()||{};FlickletDebug.info("ðŸ”„ User signed in - loading from Firebase");const u=(null==(a=appData.settings)?void 0:a.lang)||"en",w=(null==(n=appData.settings)?void 0:n.theme)||"light",h={...appData.tv},m={...appData.movies};c.watchlists?(c.watchlists.tv&&(null==(o=c.watchlists.tv.watching)?void 0:o.length)>0?(FlickletDebug.info("ðŸ”„ Loading TV data from Firebase"),FlickletDebug.info("ðŸ” Firebase TV watching count:",(null==(s=c.watchlists.tv.watching)?void 0:s.length)||0),appData.tv=c.watchlists.tv):(FlickletDebug.info("ðŸ”„ No TV data in Firebase, preserving local data"),appData.tv=h),c.watchlists.movies&&(null==(r=c.watchlists.movies.watching)?void 0:r.length)>0?(FlickletDebug.info("ðŸ”„ Loading movie data from Firebase"),FlickletDebug.info("ðŸ” Firebase movie watching count:",(null==(d=c.watchlists.movies.watching)?void 0:d.length)||0),appData.movies=c.watchlists.movies):(FlickletDebug.info("ðŸ”„ No movie data in Firebase, preserving local data"),appData.movies=m)):(FlickletDebug.info("ðŸ”„ No Firebase data found, preserving local data"),appData.tv=h,appData.movies=m),c.settings&&(appData.settings={...appData.settings||{},...c.settings}),u&&(appData.settings.lang=u),w&&(appData.settings.theme=w),localStorage.setItem("tvMovieTrackerData",JSON.stringify(appData)),window.FlickletApp&&window.FlickletApp.appData&&(window.FlickletApp.appData.tv=appData.tv,window.FlickletApp.appData.movies=appData.movies,window.FlickletApp.appData.settings=appData.settings,localStorage.setItem("flicklet-data",JSON.stringify(window.FlickletApp.appData))),"function"==typeof updateUI&&updateUI(),"function"==typeof applyTranslations&&applyTranslations(),FlickletDebug.info("âœ… User data loaded from Firebase successfully")}catch(l){FlickletDebug.error("âŒ Failed to load user data from Firebase:",l)}},window.AppState={currentUser:null,isLoading:!1,setLoading:function(e){this.isLoading=e;const t=document.getElementById("loading-indicator");t&&(t.style.display=e?"block":"none")},setUser:function(e){this.currentUser=e,this.updateUI()},updateUI:function(){document.querySelectorAll("[data-user]").forEach(e=>{e.style.display=this.currentUser?"block":"none"})}},window.Search={perform:function(e){!e||e.length<2||(AppState.setLoading(!0),setTimeout(()=>{AppState.setLoading(!1)},500))}},window.openModal=function(e,t,i="generic-modal"){document.querySelectorAll(".modal-backdrop").forEach(e=>e.remove());const a=document.createElement("div");a.className="modal-backdrop",a.setAttribute("data-modal",i),a.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    ";const n=document.createElement("div");if(n.className="modal-content",n.style.cssText="\n      background: white;\n      border-radius: 8px;\n      padding: 20px;\n      max-width: 500px;\n      width: 90%;\n      max-height: 80vh;\n      overflow-y: auto;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n      transform: scale(0.9);\n      transition: transform 0.3s ease;\n    ",e){const t=document.createElement("h2");t.textContent=e,t.style.cssText="\n        margin: 0 0 15px 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: #333;\n      ",n.appendChild(t)}t&&("string"==typeof t?n.innerHTML+=t:n.appendChild(t));const o=document.createElement("button");o.textContent="Close",o.style.cssText="\n      margin-top: 15px;\n      padding: 8px 16px;\n      background: #6c757d;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 14px;\n    ",o.addEventListener("click",()=>{a.remove()}),n.appendChild(o),a.appendChild(n),document.body.appendChild(a),requestAnimationFrame(()=>{a.style.opacity="1",n.style.transform="scale(1)"}),a.addEventListener("click",e=>{e.target===a&&a.remove()});const s=e=>{"Escape"===e.key&&(a.remove(),document.removeEventListener("keydown",s))};return document.addEventListener("keydown",s),a},window.dispatchEvent(new Event("modal-api-ready")),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("search-input");e&&e.addEventListener("input",function(e){Search.perform(e.target.value)})}),window.FLAGS=Object.assign({proEnabled:!1,notifEngineEnabled:!0,notifAdvancedEnabled:!0,statsEnabled:!0,skeletonsEnabled:!0,flickwordModalEnabled:!0,upcomingEpisodesEnabled:!1,mobilePolishEnabled:!0,notesChipEnabled:!0,shareModalSanityEnabled:!0,condensedModeFeatureEnabled:!0,safeAreasSanityEnabled:!0,a11yPolishEnabled:!0,themePacksEnabled:!0,providersEnabled:!0,extrasEnabled:!0,cards_v2:!0,playlistsEnabled:!1,playlistsProEnabled:!0,triviaEnabled:!0,flickwordBoostEnabled:!1,seriesOrganizerEnabled:!0,homeRowCurrentlyWatching:!0,homeRowNextUp:!0,homeRowCurated:!0,homeRowSpotlight:!0,homeRowPlayAlong:!0,homeRowFeedback:!0,communityPlayer:!0},window.FLAGS||{}),window.guard=(e,t)=>{try{e&&t()}catch(i){}},window.appData={settings:{displayName:"",lang:"en",theme:"light",pro:!1,notif:{}},tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},searchCache:[],activeTagFilters:new Set};let n=!1;function o(e){try{return(new TextEncoder).encode(e).length}catch{return(e||"").length}}function s(e){const t="tv"===(null==e?void 0:e.media_type);return{id:Number((null==e?void 0:e.id)??0),media_type:t?"tv":"movie",title:String((null==e?void 0:e.title)||(null==e?void 0:e.name)||"").slice(0,200),poster_path:(null==e?void 0:e.poster_path)||null,release_date:String((null==e?void 0:e.release_date)||(null==e?void 0:e.first_air_date)||""),vote_average:"number"==typeof(null==e?void 0:e.vote_average)?e.vote_average:null,added_date:(null==e?void 0:e.added_date)||null,user_notes:(null==e?void 0:e.user_notes)?String(e.user_notes).slice(0,500):null}}function r(e){const t=JSON.parse(JSON.stringify(e||{}));t.watchlists=t.watchlists||{},t.watchlists.movies=t.watchlists.movies||{},t.watchlists.tv=t.watchlists.tv||{},t.movies=t.movies||{},t.tv=t.tv||{};const i=["watched","watching","wishlist"];for(const a of i)Array.isArray(t.watchlists.movies[a])&&(t.watchlists.movies[a]=t.watchlists.movies[a].filter(Boolean).filter(e=>"movie"===(null==e?void 0:e.media_type)||!(null==e?void 0:e.media_type)).map(s)),Array.isArray(t.watchlists.tv[a])&&(t.watchlists.tv[a]=t.watchlists.tv[a].filter(Boolean).map(e=>({...e,media_type:"tv"})).map(s)),Array.isArray(t.movies[a])&&(t.movies[a]=t.movies[a].filter(Boolean).filter(e=>"movie"===(null==e?void 0:e.media_type)||!(null==e?void 0:e.media_type)).map(s)),Array.isArray(t.tv[a])&&(t.tv[a]=t.tv[a].filter(Boolean).map(e=>({...e,media_type:"tv"})).map(s));return t.watchlists.tv&&t.watchlists.tv.undefined&&delete t.watchlists.tv.undefined,t.tv&&t.tv.undefined&&delete t.tv.undefined,t}window.saveAppData=function(e="flicklet-data",t=window.appData){if(n)return!1;try{t&&t.settings&&(t.settings.lastUpdated=Date.now());const i=r(t),a=JSON.stringify(i);return o(a),localStorage.setItem(e,a),!0}catch(i){return!(!i||"QuotaExceededError"!==i.name&&!/quota/i.test(String(i))||(n=!0,1))}},window.loadAppData=function(){try{const e=localStorage.getItem("flicklet-data")||localStorage.getItem("tvMovieTrackerData");if(e){const t=function(e){if(!e||"object"!=typeof e)return{settings:{displayName:"",lang:"en",theme:"light",pro:!1,notif:{}},tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},searchCache:[],activeTagFilters:new Set};let t=e.settings||{};"object"!=typeof t&&(t={});let i=e.tv||{};"object"!=typeof i&&(i={}),["watching","wishlist","watched"].forEach(e=>{Array.isArray(i[e])||(i[e]=[])});let a=e.movies||{};"object"!=typeof a&&(a={}),["watching","wishlist","watched"].forEach(e=>{Array.isArray(a[e])||(a[e]=[])});const n=Array.isArray(e.searchCache)?e.searchCache:[],o=e.activeTagFilters instanceof Set?e.activeTagFilters:new Set;return{settings:t,tv:i,movies:a,searchCache:n,activeTagFilters:o}}(JSON.parse(e));return Object.assign(window.appData,t),!0}return!1}catch(e){return!1}},window.bind=function(e,t){const i=document.getElementById(e);return!!i&&(i.onclick=t,!0)},window.debounce=function(e,t){let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>e(...a),t)}},window.throttle=function(e,t){let i=!1;return(...a)=>{i||(e(...a),i=!0,setTimeout(()=>i=!1,t))}},window.showNotification=function(e,t="info",i=4e3){document.querySelectorAll(".notification").forEach(e=>e.remove());const a=document.createElement("div");a.className=`notification ${t}`,a.setAttribute("role","alert"),a.setAttribute("aria-live","polite"),a.innerHTML=`<span class="notification-message">${e}</span>`,document.body.appendChild(a),setTimeout(()=>{a.parentNode&&(a.style.animation="fadeOutScale 0.3s ease-in forwards",setTimeout(()=>a.remove(),300))},i)},window.toggleDarkMode=function(){const e=document.body.classList.toggle("dark-mode");appData.settings.theme=e?"dark":"light",localStorage.setItem("flicklet-theme",appData.settings.theme);const t=document.getElementById("themeIcon");t&&(t.textContent=e?"â˜€ï¸":"ðŸŒ™")},window.openTMDBLink=function(e,t){try{const i=`https://www.themoviedb.org/${"tv"===t?"tv":"movie"}/${e}`;window.open(i,"_blank","noopener")}catch(i){window.open(`https://www.themoviedb.org/${"tv"===t?"tv":"movie"}/${e}`,"_blank")}},window.findItemMediaType=function(e){return["watching","wishlist","watched"].some(t=>{var i;return((null==(i=window.appData.tv)?void 0:i[t])||[]).some(t=>t.id===e)})?"tv":["watching","wishlist","watched"].some(t=>{var i;return((null==(i=window.appData.movies)?void 0:i[t])||[]).some(t=>t.id===e)})?"movies":null},window.findItemList=function(e,t){var i;const a=["watching","wishlist","watched"];for(const n of a)if(((null==(i=window.appData[t])?void 0:i[n])||[]).some(t=>t.id===e))return n;return null},window.computeBytes=o,window.pruneListItem=s,window.pruneWatchlistsShape=r;const d={en:{go_dark:"ðŸŒ™ Go Dark",go_light:"â˜€ï¸ Go Light",app_title:"Flicklet",subtitle:"TV & Movie Tracker",binge_total:"Total Binge Time",currently_watching:"Currently Watching",want_to_watch:"Want to Watch",already_watched:"Already Watched",currently_airing:"Currently Airing",series_complete:"Series Complete",coming_soon:"Coming Soon",next:"Next",last:"Last",start:"Start",because_you_liked:"Because you liked",home:"Home",discover:"Discover",settings:"Settings",general:"General",notifications:"Notifications",layout:"Layout",data:"Data",pro:"Pro",about:"About",general_description:"Manage your account and basic preferences",notifications_description:"Choose which types of notifications you'd like to receive",layout_settings:"Layout Settings",layout_description:"Customize how your lists and cards are displayed",data_management:"Data Management",data_description:"Export, import, or reset your data",pro_features:"Pro Features",pro_description:"Unlock advanced features and premium content with Flicklet Pro",settings_description:"Application settings",condensed_list_view:"Condensed list view (more items per screen)",show_posters:"Show movie/TV show posters",dark_mode:"Dark mode (auto-detect system preference)",home_page_lists:"Home Page TV/Movie Lists",export_json:"Export JSON",import_json:"Import JSON",extra_trivia_pro:"Extra Trivia (Pro)",export_csv_pro:"Export CSV (Pro)",reset_all_data:"Reset All Data",data_hint:"Export saves flicklet-export.json to your device's Downloads/Files. Import accepts a valid Flicklet export.",preview_pro_features:"Preview Pro Features",pro_hint:"Toggle Pro features on/off to see what's available",pro_features_include:"Pro Features Include:",pro_simulate:"Pro (simulate)",share_your_thoughts:"Share Your Thoughts",feedback:"Share Your Thoughts",feedback_working:"Share your thoughts! Give us app feedback, tell us what's working (or not), share a quote for our rotation, make a confession, or just vent. We're listening!",your_message:"Your Message",feedback_placeholder:"Share your thoughts, feedback, quotes, confessions, or just vent here...",send:"Share It!",share_lists:"Share Lists",share_this_list:"Share This List",share_selected:"Select Items to Share",share_link:"Share link",share_instructions:"Click to select which shows and movies to share",choose_file:"Choose File",no_file_chosen:"No file chosen",search:"Search",search_placeholder:"Search for shows or movies...",search_for_shows:"Search for shows or movies...",search_tips:'Search tips: Use * for wildcards (e.g., "marvel*" for Marvel shows)',search_results:"Search Results",end_of_search_results:"End of search results",search_failed:"Search failed",no_results:"No results",no_results_found:"No results found",searching:"Searching...",search_loading:"Searching...",search_results_cleared:"Search results cleared due to language change.",please_search_again:"Please search again to see results in the new language.",currently_watching_count:"Currently Watching",want_to_watch_count:"Want to Watch",already_watched_count:"Already Watched",stats:"Stats",total_items:"Total items",watching_count:"Watching",wishlist_count:"Wishlist",watched_count:"Watched",top_genres:"Top Genres",average_rating:"Average Rating",loading:"Loading...",failed_to_load:"Failed to load",community:"Community",community_player:"Community Player",community_player_placeholder:"Video content will appear here",flickword:"FlickWord",flickword_tagline:"Wordle-style daily word play",daily_trivia:"Daily Trivia",daily_trivia_tagline:"Fresh question, new bragging rights",play_now:"Play Now",quote_of_the_moment:"Quote of the moment",loading_inspirational_quote:"Loading inspirational quote...",your_shows:"Your Shows",for_you:"For You",in_theaters:"In Theaters",feedback:"Feedback",report_bug:"Report a Bug",suggest_feature:"Suggest a Feature",general_feedback:"General Feedback",submit_video:"Submit Video",app_title:"Flicklet",app_subtitle:"TV & Movie Tracker",search_tips:"Search Tips",dont_show_again:"Don't show again",currently_watching_section:"ðŸ‘ï¸ Currently Watching",next_up_this_week:"ðŸ“… Next Up This Week",no_upcoming_episodes:"No upcoming episodes this week.",streak:"Streak",best:"Best",win_percent:"Win %",accuracy:"Accuracy",curated_sections:"ðŸŽ¯ Curated Sections",location_prompt:"Turn on location to see movies playing near you.",share_your_thoughts:"ðŸ’¬ Share Your Thoughts",help_improve_feedback:"Help us improve Flicklet with your feedback",close_game:"Close Game",no_items:"No items.",no_description:"No description.",unknown:"Unknown",loading_stats:"Loading stats...",currently_watching:"Currently Watching",want_to_watch:"Want to Watch",already_watched:"Already Watched",core_features:"ðŸ“‹ Core Features",pro_notifications:"â­ Pro Notifications",pro_layout_features:"â­ Pro Layout Features",pro_data_features:"â­ Pro Data Features",theme_packs:"ðŸŽ¨ Theme Packs",about_unique4u:"ðŸ  About Unique4U",about_the_creators:"ðŸ‘¥ About the Creators",about_the_app:"ðŸ“± About the App",copy:"ðŸ“‹ Copy",daily_trivia_game_mounts:"[ Daily Trivia game mounts here ]",enable_advanced_notifications:"Enable advanced notifications",lead_time_hours:"Lead time (hours):",monitor_lists:"Monitor lists:",pro_feature_upgrade:"ðŸ”’ Pro feature - upgrade to unlock advanced notifications",pro_unlocks_more_themes:"ðŸ”’ Pro unlocks more themes",saved:"âœ… Saved",enable_episode_tracking:"Enable Episode Tracking",theme:"Theme:",basic_layout_customization:"Basic layout customization available to all users",show_more_items_per_screen:"Show more items per screen by reducing card spacing and padding",display_poster_images:"Display poster images for each show and movie in your lists",switch_to_dark_theme:"Switch to dark theme. When enabled, follows your system's dark/light mode preference",number_of_curated_sections:"Number of curated recommendation sections to show on the home page",currently_watching_preview_limit:"Currently Watching Preview Limit",number_of_currently_watching:"Number of currently watching shows to display on the home page preview",allow_tracking_of_individual:"Allow tracking of individual episodes for TV series (opt-in per series)",advanced_layout_and_theming:"Advanced layout and theming features for Pro users",choose_a_visual_theme:"Choose a visual theme for your Flicklet experience. Pro users get access to premium themes.",basic_data_management:"Basic data management features available to all users",download_a_complete_backup:"Download a complete backup of your lists and settings as a JSON file",restore_your_data:"Restore your data from a previously exported Flicklet backup file",generate_a_shareable_text:"Generate a shareable text list of your TV shows and movies to send to friends",permanently_delete_all:"âš ï¸ Permanently delete all your lists, settings, and data. This cannot be undone.",advanced_data_management:"Advanced data management features for Pro users",export_your_data_csv:"Export your data in CSV format for use in spreadsheets (Pro feature)",access_additional_trivia:"Access additional trivia questions and behind-the-scenes content (Pro feature)",advanced_features_premium:"Advanced features and premium content available with Flicklet Pro subscription",were_not_here_to_reinvent:"We're not here to reinvent the wheel â€” we're here to make the wheel less squeaky. At Unique4U, our rule is simple: keep it simple. The world already has enough apps that feel like a second job to use. We'd rather give you tools that justâ€¦ work.",everything_we_build:"Everything we build has its own personality, but they all live under one roof: a people-first, all-inclusive, slightly offbeat house we call Unique4U. If it's fun, useful, and a little different from the pack â€” it belongs here.",were_pam_and_travis:"We're Pam and Travis. Think of us as casual builders with a shared allergy to overcomplication. We make things because we need them, and we figure you probably do too.",pam_once_trained_dolphins:'Pam once trained dolphins (true story) and also happens to be really good with numbers. Travis studied English and Philosophy, which means he can overthink and explain it in writing, then somehow turn that into practical business know-how. Together, we\'re like a mash-up of "creative meets operations" â€” and that combo lets us build apps that are simple, useful, and not boring.',heres_the_deal:"Here's the deal: you want to remember what you're watching without needing a PhD in App Navigation. We built this because we got tired of two bad options â€” messy notes on our phones or bloated apps that make you log your \"episode 7 mid-season thoughts.\" (Hard pass.)",so_we_made_this_instead:"So we made this instead:",if_you_watch_tv:"If you watch TV or movies and don't want to make it a hobby just to track them, this app's for you. Simple lists, zero drama.",your_feedback_helps:"Your feedback helps us improve Flicklet. All messages are read and appreciated!",your_name_will_appear:"Your name will appear in the header and personalize your experience",view_your_watching_stats:"View your watching statistics and achievements",view_and_remove_items:'View and remove items from your "Not Interested" list to see them in recommendations again',get_notified_when_new:"Get notified when new episodes of shows you're watching are about to air",receive_weekly_recommendations:"Receive weekly recommendations for new shows and movies based on your preferences",get_a_monthly_summary:"Get a monthly summary of your watching statistics and achievements",advanced_notification_features:"Advanced notification features for Pro users",advanced_notifications_pro:"ðŸ”” Advanced Notifications (PRO)",configure_advanced_notifications:"Configure advanced notification settings with custom lead times and list monitoring",range_1_3:"(1-3)",range_5_20:"(5-20)",personalized_recommendations:"ðŸŽ¨ Personalized Recommendations",based_on_watching_history:"Based on your watching history and preferences",your_anime_suggestions:"Your anime suggestions",your_horror_suggestions:"Your horror suggestions",trending:"Trending",what_everyone_watching:"What everyone is watching",staff_picks:"Staff Picks",curated_by_us:"Curated by us",new_this_week:"New This Week",fresh_releases:"Fresh releases",in_theaters_near_you:"ðŸŽ¬ In Theaters Near You",current_theatrical_releases:"Current theatrical releases",now_playing:"ðŸŽ¬ Now Playing",find_showtimes:"Find Showtimes",click_find_showtimes:'Click "Find Showtimes" to see showtimes at theaters near you',now_playing_status:"Now Playing",movies_count:"Movies",what_everyone_watching:"What everyone is watching",curated_by_us:"Curated by us",fresh_releases:"Fresh releases",now_playing:"Now Playing",click_find_showtimes:'Click "Find Showtimes" to see showtimes at theaters near you',tv_shows_breakdown:"TV Shows Breakdown",movies_breakdown:"Movies Breakdown",not_interested_management:"Not Interested Management",manage_not_interested_description:"Manage shows and movies you've marked as not interested",manage_not_interested_list:"Manage Not Interested List",total_items:"Total Items",notes_tags:"Notes/Tags",mark_watched:"Mark Watched",want_to_watch:"Want to Watch",remove:"Remove",your_rating:"Your Rating",not_interested:"Not Interested",add:"Add",more_actions:"More actions",continue:"Continue",available_on:"Available on",watch_on:"Watch on",upgrade_to_reveal:" â€” upgrade to reveal",upgrade_to_watch:" â€” upgrade to watch",extras:"Extras",already_in_list:"Already in {list}.",moved_to:"Moved to {list}.",added_to:"Added to {list}.",trending_title:"Trending",trending_subtitle:"What everyone is watching",staff_picks_title:"Staff Picks",staff_picks_subtitle:"Curated by us",new_this_week_title:"New This Week",new_this_week_subtitle:"Fresh releases",personalized_recommendations:"ðŸŽ¨ Personalized Recommendations",based_on_watching_history:"Based on your watching history and preferences",your_anime_suggestions:"Your anime suggestions",your_horror_suggestions:"Your horror suggestions",your_suggestions:"Your suggestions",in_theaters_near_you:"ðŸŽ¬ In Theaters Near You",current_theatrical_releases:"Current theatrical releases",now_playing:"ðŸŽ¬ Now Playing",find_showtimes:"Find Showtimes",click_find_showtimes:'Click "Find Showtimes" to see showtimes at theaters near you',now_playing_status:"Now Playing",movies_count:"Movies",discover_description:"Recommendations based on your likes and ratings.",not_enough_signals:"Not enough signals yet. Like or rate a few items first.",recommendations_failed:"Failed to load recommendations.",flickword_title:"FlickWord",flickword_play:"Play",flickword_streak:"Streak",flickword_best:"Best",flickword_played:"Played",flickword_daily_challenge:"FlickWord Daily Challenge",hours_left_motivation:"Hours left to play today's game!",play_todays_word:"Play Today's Word",streak:"STREAK",best:"BEST",played:"PLAYED",quote_title:"Daily Quote",quote_of_the_day:"Quote of the Day",random_quote:"Random Quote",quote_1:'"I am serious... and don\'t call me Shirley." â€” *Airplane!*',quote_2:'"Streaming is a lifestyle, not a choice." â€” Ancient Proverb',quote_3:'"Binge now. Cry later." â€” You, last night at 2AM',quote_4:'"One does not simply watch one episode." â€” Boromir, probably',quote_5:"\"You had me at 'skip recap.'\"",quote_6:'"Art is long, episodes are longer." â€” Someone with no plans',quote_7:'"We were on a break! From reality."',quote_8:'"I came, I saw, I queued it."',quote_9:'"To stream, perchance to nap." â€” Hamlet (director\'s cut)',quote_10:"\"In this house we respect the 'Are you still watching?' prompt.\"",quote_11:"\"The algorithm thinks I'm complicated. It's right.\"",quote_12:'"If found, return to the couch."',quote_13:"\"My love language is 'skip ad.'\"",quote_14:'"I contain multitudes and several watchlists."',quote_15:'"Sundays are for pilots and denial."',quote_16:'"Ctrl+Z for life, play for comfort."',quote_17:'"I fear no man, but I fear finales."',quote_18:'"This app gets me. Terrifying."',quote_19:'"Plot holes are just cardio for the brain."',quote_20:'"We accept the dopamine we think we deserve."',quote_21:'"I have never finished anything. Except seasons."',quote_22:'"Today\'s vibe: closed captions and open snacks."',quote_23:'"Foreshadowing? I hardly know her."',quote_24:'"Character development is my cardio."',quote_25:'"If the title card hits, I\'m staying."',quote_26:'"Minimalism, but for episodes."',quote_27:"\"'Are you still watching?' yes, Netflix, I'm thriving.\"",quote_28:'"I ship productivity with naps."',quote_29:'"Comfort show supremacy."',quote_30:'"This queue is a personality test I\'m failing."',notification_success:"Success",notification_error:"Error",notification_warning:"Warning",notification_info:"Info",cloud_sync_ok:"Data synced successfully",cloud_load_failed:"Failed to load cloud data",cloud_sync_failed:"Cloud sync failed",offline_mode:"Offline Mode",auth_unavailable_offline:"Authentication unavailable - working in offline mode",working_offline_mode:"Working in offline mode - data will be stored locally only",sign_in_title:"Sign in to sync",sign_in_subtitle:"Sign in to back up your lists and sync across devices.",sign_in_create_account:"Sign In / Create Account",signing_in:"Signing in...",sign_in_subtitle_text:"Sign in to back up your lists and sync across devices.",please_enter_display_name:"Please enter a display name.",welcome_title:"Welcome! What should we call you?",welcome_subtitle:"This will personalize your headers and stats.",welcome:"Welcome",display_name:"Display Name",display_name_placeholder:"Display name",save_name:"Save",sign_in_account:"Sign in / Account",account:"Account",user:"User",email_signin:"Email Sign-In",email_label:"Email",continue_google:"Continue with Google",click_to_sign_in:"Click to sign in",signed_in_as:"Signed in as",click_to_sign_out:"Click to sign out.",click_to_log_out:"click to log out",sign_out:"Sign Out",sign_out_confirmation:"Sign out as",signed_in_successfully:"Signed in successfully",signed_out_successfully:"Signed out successfully",sign_out_failed:"Sign out failed",auth_system_unavailable:"Authentication system is not available. Please refresh the page.",error_loading_user_data:"Error loading user data. Please try again.",auth_system_error:"Authentication system error. Please refresh the page.",firestore_not_available:"Firestore not available",no_displayname_field:"No displayName field to remove",auth_system_loading:"Authentication system is loading. Please try again in a moment.",google_signin_unavailable:"Google sign-in is not available. Please refresh the page.",apple_signin_unavailable:"Apple sign-in is not available. Please refresh the page.",email_signin_unavailable:"Email sign-in is not available. Please refresh the page.",unable_to_show_signin:"Unable to show sign-in modal. Please refresh the page.",signin_system_not_ready:"Sign-in system is not ready. Please refresh the page.",action:"Action",adventure:"Adventure",animation:"Animation",comedy:"Comedy",crime:"Crime",documentary:"Documentary",drama:"Drama",family:"Family",fantasy:"Fantasy",history:"History",horror:"Horror",music:"Music",mystery:"Mystery",romance:"Romance",science_fiction:"Science Fiction",tv_movie:"TV Movie",thriller:"Thriller",war:"War",western:"Western",action_adventure:"Action & Adventure",kids:"Kids & Family",news:"News & Current Events",reality:"Reality TV",sci_fi_fantasy:"Sci-Fi & Fantasy",soap:"Soap Opera",talk:"Talk Shows",war_politics:"War & Politics",talk_show:"Talk Shows",reality_tv:"Reality TV",language:"Language",language_changed_to:"Language changed to {lang}","home.my_library":"My Library","home.my_library_sub":"Your personal watchlists and progress","home.community":"Community","home.community_sub":"Spotlight videos and community games","home.curated":"Curated","home.curated_sub":"Trending shows and staff recommendations","home.personalized":"Personalized","home.personalized_sub":"Recommendations just for you","home.theaters":"In Theaters Near Me","home.theaters_sub":"What's playing at your local cinemas","home.feedback_link":"Feedback","home.feedback_link_sub":"Help us improve Flicklet",feedback_link_text:"Have thoughts to share? We'd love to hear them!",trivia_title:"Trivia",trivia_next:"Next",trivia_loading:"Loading...",trivia_error:"Error loading trivia",trivia_correct:"Correct!",trivia_incorrect:"Incorrect",trivia_question:"Question",trivia_answer:"Answer",trivia_completed_today:" â€¢ Completed today",trivia_come_back_tomorrow:"Come back tomorrow for a new question.",trivia_incorrect_answer:"Nope â€” correct answer is",trivia_streak_up:"Trivia: +1 streak",trivia_try_again_tomorrow:"Trivia: try again tomorrow",trivia_ok:"OK"},es:{go_dark:"ðŸŒ™ Modo Oscuro",go_light:"â˜€ï¸ Modo Claro",app_title:"Flicklet",subtitle:"Rastreador de TV y PelÃ­culas",binge_total:"Tiempo Total de MaratÃ³n",currently_watching:"Viendo Actualmente",want_to_watch:"Quiero Ver",already_watched:"Ya Visto",currently_airing:"TransmitiÃ©ndose Actualmente",series_complete:"Serie Completa",coming_soon:"PrÃ³ximamente",next:"Siguiente",last:"Ãšltimo",start:"Comenzar",because_you_liked:"Porque te gustÃ³",home:"Inicio",discover:"Descubrir",settings:"ConfiguraciÃ³n",general:"General",notifications:"Notificaciones",layout:"DiseÃ±o",data:"Datos",pro:"Pro",about:"Acerca de",general_description:"Gestiona tu cuenta y preferencias bÃ¡sicas",notifications_description:"Elige quÃ© tipos de notificaciones quieres recibir",layout_settings:"ConfiguraciÃ³n de DiseÃ±o",layout_description:"Personaliza cÃ³mo se muestran tus listas y tarjetas",data_management:"GestiÃ³n de Datos",data_description:"Exportar, importar o restablecer tus datos",pro_features:"CaracterÃ­sticas Pro",pro_description:"Desbloquea caracterÃ­sticas avanzadas y contenido premium con Flicklet Pro",settings_description:"ConfiguraciÃ³n de la aplicaciÃ³n",condensed_list_view:"Vista de lista condensada (mÃ¡s elementos por pantalla)",show_posters:"Mostrar carteles de pelÃ­culas/programas de TV",dark_mode:"Modo oscuro (detectar automÃ¡ticamente preferencia del sistema)",home_page_lists:"Listas de TV/PelÃ­culas de la PÃ¡gina Principal",export_json:"Exportar JSON",import_json:"Importar JSON",extra_trivia_pro:"Trivia Extra (Pro)",export_csv_pro:"Exportar CSV (Pro)",reset_all_data:"Restablecer Todos los Datos",data_hint:"La exportaciÃ³n guarda flicklet-export.json en la carpeta Descargas/Archivos de tu dispositivo. La importaciÃ³n acepta una exportaciÃ³n vÃ¡lida de Flicklet.",preview_pro_features:"Vista Previa de CaracterÃ­sticas Pro",pro_hint:"Activa/desactiva las caracterÃ­sticas Pro para ver quÃ© estÃ¡ disponible",pro_features_include:"Las CaracterÃ­sticas Pro Incluyen:",pro_simulate:"Pro (simular)",share_your_thoughts:"Comparte Tus Pensamientos",feedback:"Comparte Tus Pensamientos",feedback_working:"Â¡Comparte tus pensamientos! Danos retroalimentaciÃ³n de la app, cuÃ©ntanos quÃ© funciona (o no), comparte una cita para nuestra rotaciÃ³n, haz una confesiÃ³n, o simplemente desahÃ³gate. Â¡Estamos escuchando!",your_message:"Tu Mensaje",feedback_placeholder:"Comparte tus pensamientos, comentarios, citas, confesiones o simplemente desahÃ³gate aquÃ­...",send:"Â¡CompÃ¡rtelo!",share_lists:"Compartir Listas",share_this_list:"Compartir Esta Lista",share_selected:"Seleccionar Elementos para Compartir",share_link:"Compartir enlace",share_instructions:"Haz clic para seleccionar quÃ© series y pelÃ­culas compartir",choose_file:"Elegir Archivo",no_file_chosen:"NingÃºn archivo elegido",search:"Buscar",search_placeholder:"Buscar series o pelÃ­culas...",search_for_shows:"Buscar series o pelÃ­culas...",search_tips:'Consejos de bÃºsqueda: Usa * para comodines (ej., "marvel*" para series de Marvel)',search_results:"Resultados de BÃºsqueda",end_of_search_results:"Fin de resultados de bÃºsqueda",search_failed:"BÃºsqueda fallÃ³",no_results:"Sin resultados",no_results_found:"No se encontraron resultados",searching:"Buscando...",search_loading:"Buscando...",search_results_cleared:"Resultados de bÃºsqueda limpiados debido al cambio de idioma.",please_search_again:"Por favor busca nuevamente para ver resultados en el nuevo idioma.",currently_watching_count:"Viendo Actualmente",want_to_watch_count:"Quiero Ver",already_watched_count:"Ya Visto",stats:"EstadÃ­sticas",total_items:"Total de elementos",watching_count:"Viendo",wishlist_count:"Lista de Deseos",watched_count:"Visto",top_genres:"GÃ©neros Principales",average_rating:"CalificaciÃ³n Promedio",loading:"Cargando...",failed_to_load:"Error al cargar",community:"Comunidad",community_player:"Reproductor de la Comunidad",community_player_placeholder:"El contenido de video aparecerÃ¡ aquÃ­",flickword:"FlickWord",flickword_tagline:"Juego diario de palabras estilo Wordle",daily_trivia:"Trivia Diaria",daily_trivia_tagline:"Pregunta fresca, nuevos derechos de presumir",play_now:"Jugar Ahora",quote_of_the_moment:"Cita del momento",loading_inspirational_quote:"Cargando cita inspiradora...",your_shows:"Tus Programas",for_you:"Para Ti",in_theaters:"En Cines",feedback:"Comentarios",report_bug:"Reportar un Error",suggest_feature:"Sugerir una CaracterÃ­stica",general_feedback:"Comentarios Generales",submit_video:"Enviar Video",app_title:"Flicklet",app_subtitle:"Rastreador de TV y PelÃ­culas",search_tips:"Consejos de BÃºsqueda",dont_show_again:"No mostrar de nuevo",currently_watching_section:"ðŸ‘ï¸ Viendo Actualmente",next_up_this_week:"ðŸ“… PrÃ³ximamente Esta Semana",no_upcoming_episodes:"No hay episodios prÃ³ximos esta semana.",streak:"Racha",best:"Mejor",win_percent:"Porcentaje de Ã‰xito",accuracy:"PrecisiÃ³n",curated_sections:"ðŸŽ¯ Secciones Curadas",location_prompt:"Activa la ubicaciÃ³n para ver pelÃ­culas cerca de ti.",share_your_thoughts:"ðŸ’¬ Comparte Tus Pensamientos",help_improve_feedback:"AyÃºdanos a mejorar Flicklet con tus comentarios",close_game:"Cerrar Juego",no_items:"No hay elementos.",no_description:"Sin descripciÃ³n.",unknown:"Desconocido",loading_stats:"Cargando estadÃ­sticas...",currently_watching:"Viendo Actualmente",want_to_watch:"Quiero Ver",already_watched:"Ya Visto",core_features:"ðŸ“‹ CaracterÃ­sticas Principales",pro_notifications:"â­ Notificaciones Pro",pro_layout_features:"â­ CaracterÃ­sticas de DiseÃ±o Pro",pro_data_features:"â­ CaracterÃ­sticas de Datos Pro",theme_packs:"ðŸŽ¨ Paquetes de Temas",about_unique4u:"ðŸ  Acerca de Unique4U",about_the_creators:"ðŸ‘¥ Acerca de los Creadores",about_the_app:"ðŸ“± Acerca de la App",copy:"ðŸ“‹ Copiar",daily_trivia_game_mounts:"[ El juego de Trivia Diaria se monta aquÃ­ ]",enable_advanced_notifications:"Habilitar notificaciones avanzadas",lead_time_hours:"Tiempo de anticipaciÃ³n (horas):",monitor_lists:"Monitorear listas:",pro_feature_upgrade:"ðŸ”’ CaracterÃ­stica Pro - actualiza para desbloquear notificaciones avanzadas",pro_unlocks_more_themes:"ðŸ”’ Pro desbloquea mÃ¡s temas",saved:"âœ… Guardado",enable_episode_tracking:"Habilitar Seguimiento de Episodios",theme:"Tema:",basic_layout_customization:"PersonalizaciÃ³n bÃ¡sica de diseÃ±o disponible para todos los usuarios",show_more_items_per_screen:"Mostrar mÃ¡s elementos por pantalla reduciendo el espaciado y relleno de las tarjetas",display_poster_images:"Mostrar imÃ¡genes de carteles para cada programa y pelÃ­cula en tus listas",switch_to_dark_theme:"Cambiar a tema oscuro. Cuando estÃ¡ habilitado, sigue la preferencia de modo oscuro/claro de tu sistema",number_of_curated_sections:"NÃºmero de secciones de recomendaciones curadas para mostrar en la pÃ¡gina principal",currently_watching_preview_limit:"LÃ­mite de Vista Previa de Viendo Actualmente",number_of_currently_watching:"NÃºmero de programas que estÃ¡s viendo actualmente para mostrar en la vista previa de la pÃ¡gina principal",allow_tracking_of_individual:"Permitir seguimiento de episodios individuales para series de TV (opcional por serie)",advanced_layout_and_theming:"CaracterÃ­sticas avanzadas de diseÃ±o y temas para usuarios Pro",choose_a_visual_theme:"Elige un tema visual para tu experiencia Flicklet. Los usuarios Pro tienen acceso a temas premium.",basic_data_management:"CaracterÃ­sticas bÃ¡sicas de gestiÃ³n de datos disponibles para todos los usuarios",download_a_complete_backup:"Descargar una copia de seguridad completa de tus listas y configuraciones como archivo JSON",restore_your_data:"Restaurar tus datos desde un archivo de copia de seguridad de Flicklet previamente exportado",generate_a_shareable_text:"Generar una lista de texto compartible de tus programas de TV y pelÃ­culas para enviar a amigos",permanently_delete_all:"âš ï¸ Eliminar permanentemente todas tus listas, configuraciones y datos. Esto no se puede deshacer.",advanced_data_management:"CaracterÃ­sticas avanzadas de gestiÃ³n de datos para usuarios Pro",export_your_data_csv:"Exportar tus datos en formato CSV para usar en hojas de cÃ¡lculo (caracterÃ­stica Pro)",access_additional_trivia:"Acceder a preguntas de trivia adicionales y contenido detrÃ¡s de escena (caracterÃ­stica Pro)",advanced_features_premium:"CaracterÃ­sticas avanzadas y contenido premium disponibles con suscripciÃ³n Flicklet Pro",were_not_here_to_reinvent:"No estamos aquÃ­ para reinventar la rueda â€” estamos aquÃ­ para hacer que la rueda sea menos chirriante. En Unique4U, nuestra regla es simple: mantenerlo simple. El mundo ya tiene suficientes apps que se sienten como un segundo trabajo para usar. Preferimos darte herramientas que simplemente... funcionan.",everything_we_build:"Todo lo que construimos tiene su propia personalidad, pero todos viven bajo un mismo techo: una casa centrada en las personas, inclusiva y un poco excÃ©ntrica que llamamos Unique4U. Si es divertido, Ãºtil y un poco diferente del resto â€” pertenece aquÃ­.",were_pam_and_travis:"Somos Pam y Travis. Piensa en nosotros como constructores casuales con una alergia compartida a la sobrecomplicaciÃ³n. Hacemos cosas porque las necesitamos, y creemos que tÃº probablemente tambiÃ©n.",pam_once_trained_dolphins:'Pam una vez entrenÃ³ delfines (historia real) y tambiÃ©n es muy buena con los nÃºmeros. Travis estudiÃ³ InglÃ©s y FilosofÃ­a, lo que significa que puede sobrepensar y explicarlo por escrito, luego de alguna manera convertir eso en conocimiento empresarial prÃ¡ctico. Juntos, somos como una mezcla de "creativo se encuentra con operaciones" â€” y esa combinaciÃ³n nos permite construir apps que son simples, Ãºtiles y no aburridas.',heres_the_deal:'AquÃ­ estÃ¡ el trato: quieres recordar lo que estÃ¡s viendo sin necesitar un doctorado en NavegaciÃ³n de Apps. Construimos esto porque nos cansamos de dos malas opciones â€” notas desordenadas en nuestros telÃ©fonos o apps infladas que te hacen registrar tus "pensamientos del episodio 7 de mitad de temporada." (Paso duro.)',so_we_made_this_instead:"Entonces hicimos esto en su lugar:",if_you_watch_tv:"Si ves TV o pelÃ­culas y no quieres hacerlo un hobby solo para rastrearlas, esta app es para ti. Listas simples, cero drama.",your_feedback_helps:"Tus comentarios nos ayudan a mejorar Flicklet. Â¡Todos los mensajes son leÃ­dos y apreciados!",your_name_will_appear:"Tu nombre aparecerÃ¡ en el encabezado y personalizarÃ¡ tu experiencia",view_your_watching_stats:"Ver tus estadÃ­sticas de visualizaciÃ³n y logros",view_and_remove_items:'Ver y eliminar elementos de tu lista "No me interesa" para verlos en recomendaciones nuevamente',get_notified_when_new:"Recibir notificaciones cuando nuevos episodios de programas que estÃ¡s viendo estÃ©n a punto de transmitirse",receive_weekly_recommendations:"Recibir recomendaciones semanales de nuevos programas y pelÃ­culas basadas en tus preferencias",get_a_monthly_summary:"Recibir un resumen mensual de tus estadÃ­sticas de visualizaciÃ³n y logros",advanced_notification_features:"CaracterÃ­sticas avanzadas de notificaciones para usuarios Pro",advanced_notifications_pro:"ðŸ”” Notificaciones Avanzadas (PRO)",configure_advanced_notifications:"Configurar configuraciones avanzadas de notificaciones con tiempos de anticipaciÃ³n personalizados y monitoreo de listas",range_1_3:"(1-3)",range_5_20:"(5-20)",personalized_recommendations:"ðŸŽ¨ Recomendaciones Personalizadas",based_on_watching_history:"Basado en tu historial de visualizaciÃ³n y preferencias",your_anime_suggestions:"Tus sugerencias de anime",your_horror_suggestions:"Tus sugerencias de terror",trending:"Tendencia",what_everyone_watching:"Lo que todos estÃ¡n viendo",staff_picks:"Selecciones del Equipo",curated_by_us:"Curado por nosotros",new_this_week:"Nuevo Esta Semana",fresh_releases:"Estrenos frescos",in_theaters_near_you:"ðŸŽ¬ En Cines Cerca de Ti",current_theatrical_releases:"Estrenos teatrales actuales",now_playing:"ðŸŽ¬ En Cartelera",find_showtimes:"Encontrar Horarios",click_find_showtimes:'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',now_playing_status:"En Cartelera",movies_count:"PelÃ­culas",what_everyone_watching:"Lo que todos estÃ¡n viendo",curated_by_us:"Curado por nosotros",fresh_releases:"Estrenos frescos",now_playing:"En Cartelera",click_find_showtimes:'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',tv_shows_breakdown:"Desglose de Programas de TV",movies_breakdown:"Desglose de PelÃ­culas",not_interested_management:"GestiÃ³n de No Me Interesa",manage_not_interested_description:"Gestiona programas y pelÃ­culas que has marcado como no me interesa",manage_not_interested_list:"Gestionar Lista de No Me Interesa",total_items:"Total de Elementos",notes_tags:"Notas/Etiquetas",mark_watched:"Marcar como Visto",want_to_watch:"Quiero Ver",remove:"Eliminar",your_rating:"Tu CalificaciÃ³n",not_interested:"No me interesa",add:"Agregar",more_actions:"MÃ¡s acciones",continue:"Continuar",available_on:"Disponible en",watch_on:"Ver en",upgrade_to_reveal:" â€” actualiza para revelar",upgrade_to_watch:" â€” actualiza para ver",extras:"Extras",already_in_list:"Ya estÃ¡ en {list}.",moved_to:"Movido a {list}.",added_to:"Agregado a {list}.",trending_title:"Tendencia",trending_subtitle:"Lo que todos estÃ¡n viendo",staff_picks_title:"Selecciones del Equipo",staff_picks_subtitle:"Curado por nosotros",new_this_week_title:"Nuevo Esta Semana",new_this_week_subtitle:"Estrenos frescos",personalized_recommendations:"ðŸŽ¨ Recomendaciones Personalizadas",based_on_watching_history:"Basado en tu historial de visualizaciÃ³n y preferencias",your_anime_suggestions:"Tus sugerencias de anime",your_horror_suggestions:"Tus sugerencias de terror",your_suggestions:"Tus sugerencias",in_theaters_near_you:"ðŸŽ¬ En Cines Cerca de Ti",current_theatrical_releases:"Estrenos teatrales actuales",now_playing:"ðŸŽ¬ En Cartelera",find_showtimes:"Encontrar Horarios",click_find_showtimes:'Haz clic en "Encontrar Horarios" para ver horarios en cines cerca de ti',now_playing_status:"En Cartelera",movies_count:"PelÃ­culas",discover_description:"Recomendaciones basadas en tus gustos y calificaciones.",not_enough_signals:"AÃºn no hay suficientes seÃ±ales. Dale like o califica algunos elementos primero.",recommendations_failed:"Error al cargar recomendaciones.",flickword_title:"FlickWord",flickword_play:"Jugar",flickword_streak:"Racha",flickword_best:"Mejor",flickword_played:"Jugado",flickword_daily_challenge:"DesafÃ­o Diario FlickWord",hours_left_motivation:"Â¡Horas restantes para jugar el juego de hoy!",play_todays_word:"Jugar Palabra de Hoy",streak:"RACHA",best:"MEJOR",played:"JUGADO",quote_title:"Cita Diaria",quote_of_the_day:"Cita del DÃ­a",random_quote:"Cita Aleatoria",quote_1:'"Soy serio... y no me llames Shirley." â€” *Â¡Aterriza como puedas!*',quote_2:'"El streaming es un estilo de vida, no una opciÃ³n." â€” Proverbio Antiguo',quote_3:'"MaratÃ³n ahora. Llora despuÃ©s." â€” TÃº, anoche a las 2AM',quote_4:'"Uno no simplemente ve un episodio." â€” Boromir, probablemente',quote_5:"\"Me conquistaste con 'saltar resumen'.\"",quote_6:'"El arte es largo, los episodios son mÃ¡s largos." â€” Alguien sin planes',quote_7:'"Â¡EstÃ¡bamos en un descanso! De la realidad."',quote_8:'"Vine, vi, lo puse en cola."',quote_9:'"Transmitir, tal vez dormitar." â€” Hamlet (versiÃ³n del director)',quote_10:"\"En esta casa respetamos el aviso 'Â¿Sigues viendo?'\"",quote_11:'"El algoritmo piensa que soy complicado. Tiene razÃ³n."',quote_12:'"Si se encuentra, devolver al sofÃ¡."',quote_13:"\"Mi lenguaje del amor es 'saltar anuncio'.\"",quote_14:'"Contengo multitudes y varias watchlists."',quote_15:'"Los domingos son para pilotos y negaciÃ³n."',quote_16:'"Ctrl+Z para la vida, play para consuelo."',quote_17:'"No temo a ningÃºn hombre, pero temo a los finales."',quote_18:'"Esta app me entiende. Aterrador."',quote_19:'"Los agujeros de guiÃ³n son cardio para el cerebro."',quote_20:'"Aceptamos la dopamina que creemos merecer."',quote_21:'"Nunca he terminado nada. Excepto temporadas."',quote_22:'"Vibe de hoy: subtÃ­tulos y snacks."',quote_23:'"Â¿Presagio? Apenas la conozco."',quote_24:'"El desarrollo de personajes es mi cardio."',quote_25:'"Si la tarjeta de tÃ­tulo pega, me quedo."',quote_26:'"Minimalismo, pero para episodios."',quote_27:"\"'Â¿Sigues viendo?' sÃ­, Netflix, estoy prosperando.\"",quote_28:'"EnvÃ­o productividad con siestas."',quote_29:'"SupremacÃ­a de serie de consuelo."',quote_30:'"Esta cola es una prueba de personalidad que estoy fallando."',notification_success:"Ã‰xito",notification_error:"Error",notification_warning:"Advertencia",notification_info:"InformaciÃ³n",cloud_sync_ok:"Datos sincronizados exitosamente",cloud_load_failed:"Error al cargar datos de la nube",cloud_sync_failed:"Error de sincronizaciÃ³n en la nube",offline_mode:"Modo Sin ConexiÃ³n",auth_unavailable_offline:"AutenticaciÃ³n no disponible - trabajando en modo sin conexiÃ³n",working_offline_mode:"Trabajando en modo sin conexiÃ³n - los datos se almacenarÃ¡n solo localmente",sign_in_title:"Inicia sesiÃ³n para sincronizar",sign_in_subtitle:"Inicia sesiÃ³n para respaldar tus listas y sincronizar entre dispositivos.",sign_in_create_account:"Iniciar SesiÃ³n / Crear Cuenta",signing_in:"Iniciando sesiÃ³n...",sign_in_subtitle_text:"Inicia sesiÃ³n para respaldar tus listas y sincronizar entre dispositivos.",please_enter_display_name:"Por favor ingresa un nombre de pantalla.",welcome_title:"Â¡Bienvenido! Â¿CÃ³mo deberÃ­amos llamarte?",welcome_subtitle:"Esto personalizarÃ¡ tus encabezados y estadÃ­sticas.",welcome:"Bienvenido",display_name:"Nombre de pantalla",display_name_placeholder:"Nombre de pantalla",save_name:"Guardar",sign_in_account:"Iniciar sesiÃ³n / Cuenta",account:"Cuenta",user:"Usuario",email_signin:"Inicio de SesiÃ³n por Email",email_label:"Email",continue_google:"Continuar con Google",click_to_sign_in:"Haz clic para iniciar sesiÃ³n",signed_in_as:"Conectado como",click_to_sign_out:"Cerrar sesiÃ³n aquÃ­",click_to_log_out:"haz clic para cerrar sesiÃ³n",sign_out:"Cerrar SesiÃ³n",sign_out_confirmation:"Cerrar sesiÃ³n como",signed_in_successfully:"Inicio de sesiÃ³n exitoso",signed_out_successfully:"SesiÃ³n cerrada exitosamente",sign_out_failed:"Error al cerrar sesiÃ³n",auth_system_unavailable:"El sistema de autenticaciÃ³n no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.",error_loading_user_data:"Error al cargar datos del usuario. Por favor, intÃ©ntalo de nuevo.",auth_system_error:"Error del sistema de autenticaciÃ³n. Por favor, actualiza la pÃ¡gina.",firestore_not_available:"Firestore no disponible",no_displayname_field:"No hay campo displayName que eliminar",auth_system_loading:"El sistema de autenticaciÃ³n se estÃ¡ cargando. Por favor, intÃ©ntalo en un momento.",google_signin_unavailable:"El inicio de sesiÃ³n con Google no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.",apple_signin_unavailable:"El inicio de sesiÃ³n con Apple no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.",email_signin_unavailable:"El inicio de sesiÃ³n por email no estÃ¡ disponible. Por favor, actualiza la pÃ¡gina.",unable_to_show_signin:"No se puede mostrar el modal de inicio de sesiÃ³n. Por favor, actualiza la pÃ¡gina.",signin_system_not_ready:"El sistema de inicio de sesiÃ³n no estÃ¡ listo. Por favor, actualiza la pÃ¡gina.",action:"AcciÃ³n",adventure:"Aventura",animation:"AnimaciÃ³n",comedy:"Comedia",crime:"Crimen",documentary:"Documental",drama:"Drama",family:"Familiar",fantasy:"FantasÃ­a",history:"Historia",horror:"Terror",music:"MÃºsica",mystery:"Misterio",romance:"Romance",science_fiction:"Ciencia FicciÃ³n",tv_movie:"PelÃ­cula de TV",thriller:"Suspenso",war:"Guerra",western:"Western",action_adventure:"AcciÃ³n y Aventura",kids:"NiÃ±os y Familia",news:"Noticias y Actualidad",reality:"Realidad TV",sci_fi_fantasy:"Ciencia FicciÃ³n y FantasÃ­a",soap:"Telenovela",talk:"Programas de Entrevistas",war_politics:"Guerra y PolÃ­tica",talk_show:"Programas de Entrevistas",reality_tv:"Realidad TV",language:"Idioma",language_changed_to:"Idioma cambiado a {lang}","home.my_library":"Mi Biblioteca","home.my_library_sub":"Tus listas de seguimiento y progreso personal","home.community":"Comunidad","home.community_sub":"Videos destacados y juegos de la comunidad","home.curated":"Curado","home.curated_sub":"Series populares y recomendaciones del equipo","home.personalized":"Personalizado","home.personalized_sub":"Recomendaciones solo para ti","home.theaters":"En Cines Cerca de MÃ­","home.theaters_sub":"QuÃ© se estÃ¡ proyectando en tus cines locales","home.feedback_link":"Comentarios","home.feedback_link_sub":"AyÃºdanos a mejorar Flicklet",feedback_link_text:"Â¿Tienes pensamientos que compartir? Â¡Nos encantarÃ­a escucharlos!",trivia_title:"Trivia",trivia_next:"Siguiente",trivia_loading:"Cargando...",trivia_error:"Error al cargar trivia",trivia_correct:"Â¡Correcto!",trivia_incorrect:"Incorrecto",trivia_question:"Pregunta",trivia_answer:"Respuesta",trivia_completed_today:" â€¢ Completado hoy",trivia_come_back_tomorrow:"Vuelve maÃ±ana para una nueva pregunta.",trivia_incorrect_answer:"No â€” la respuesta correcta es",trivia_streak_up:"Trivia: +1 racha",trivia_try_again_tomorrow:"Trivia: intenta de nuevo maÃ±ana",trivia_ok:"OK"}};function l(e,t="en"){return(d[t]||d.en)[e]??d.en[e]??e}function c(e="en"){const t=(t,i)=>{document.querySelectorAll(t).forEach(a=>{const n=a.getAttribute(t.replace(/^\[|\]$/g,"")),o=l(n,e);o&&o!==n&&i(a,o)})};t("[data-i18n]",(e,t)=>{e.hasAttribute("data-role")&&"marquee"===e.getAttribute("data-role")||(e.textContent=t)}),t("[data-i18n-placeholder]",(e,t)=>{e.placeholder=t}),t("[data-i18n-title]",(e,t)=>{e.title=t}),t("[data-i18n-aria-label]",(e,t)=>{e.setAttribute("aria-label",t)})}"undefined"!=typeof window&&(window.I18N=d,window.t=l,window.applyTranslations=c),void 0!==i&&i.exports&&(i.exports={I18N:d,t:l,applyTranslations:c}),window.LanguageManager=new class{getStoredLanguage(){var e;try{let t=localStorage.getItem("flicklet-language");if(t)return t;const i=localStorage.getItem("flicklet-data");if(i){const t=JSON.parse(i);if(null==(e=t.settings)?void 0:e.lang)return t.settings.lang}return null}catch(t){return null}}saveLanguage(e){var t;try{localStorage.setItem("flicklet-language",e),(null==(t=window.appData)?void 0:t.settings)&&(window.appData.settings.lang=e),window.saveAppData&&"function"==typeof window.saveAppData?window.saveAppData():window.appData&&localStorage.setItem("flicklet-data",JSON.stringify(window.appData)),this.triggerLanguageChange(e)}catch(i){}}triggerLanguageChange(e){document.dispatchEvent(new CustomEvent("languagechange",{detail:{language:e}})),this.refreshTMDBData(e)}async refreshTMDBData(e){try{await this.refreshCurrentlyWatchingMetadata(e),window.FlickletApp&&"function"==typeof window.FlickletApp.updateUI&&window.FlickletApp.updateUI(),document.dispatchEvent(new CustomEvent("cards:refreshed",{detail:{language:e}}))}catch(t){}}constructor(){this.isChangingLanguage=!1,this.currentLang=this.getStoredLanguage()||"en",this.observers=[]}init(){var e,t;if(null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.lang)this.currentLang=window.appData.settings.lang;else{const e=this.getStoredLanguage();e?this.currentLang=e:(this.currentLang="en",this.saveLanguage("en"))}this.setupLanguageDropdown(),applyTranslations(this.currentLang)}setupLanguageDropdown(){const e=document.getElementById("langToggle");if(e){e.replaceWith(e.cloneNode(!0));const t=document.getElementById("langToggle");t.addEventListener("change",e=>{this.changeLanguage(e.target.value)}),t.value=this.currentLang}}async changeLanguage(e){if(!this.isChangingLanguage&&e!==this.currentLang){this.isChangingLanguage=!0;try{this.currentLang=e,this.updateAppData(e),applyTranslations(e),this.updateLanguageDependentUI(e),this.saveLanguage(e),this.showLanguageChangeNotification(e),this.notifyObservers(e)}catch(t){this.currentLang=this.currentLang}finally{this.isChangingLanguage=!1}}}updateAppData(e){var t,i,a;(null==(t=window.appData)?void 0:t.settings)&&(window.appData.settings.lang=e),(null==(a=null==(i=window.FlickletApp)?void 0:i.appData)?void 0:a.settings)&&(window.FlickletApp.appData.settings.lang=e),"undefined"!=typeof appData&&(null==appData?void 0:appData.settings)&&(appData.settings.lang=e)}updateLanguageDependentUI(e){var i,a,n,o;const s=document.getElementById("langToggle");s&&(s.value=e);const r=null==(a=null==(i=document.querySelector(".tab.active"))?void 0:i.id)?void 0:a.replace("Tab","");if(r&&["watching","wishlist","watched"].includes(r)){const i=document.getElementById(r+"List");i&&(i.innerHTML=`<div style="text-align: center; padding: 20px;">${t("loading",e)}</div>`)}if(Array.isArray(null==(n=window.appData)?void 0:n.searchCache)&&window.appData.searchCache.length>0&&"function"==typeof displaySearchResults&&displaySearchResults(window.appData.searchCache),"function"==typeof updateTabContent){const e=(null==(o=window.FlickletApp)?void 0:o.currentTab)||"home";updateTabContent(e)}"function"==typeof loadListContent&&["watching","wishlist","watched"].forEach(e=>{window[`render_${e}`]||loadListContent(e)}),"function"==typeof loadHomeContent&&loadHomeContent(),this.refreshCurrentlyWatchingMetadata(e),"function"==typeof rebuildStats&&rebuildStats();const d=()=>{applyTranslations(e)};window.addEventListener("cards:rendered",d,{once:!1}),setTimeout(()=>{window.removeEventListener("cards:rendered",d)},5e3),setTimeout(()=>{applyTranslations(e)},200),this.handleComplexRehydration(e)}async handleComplexRehydration(e){try{await this.refreshCurrentlyWatchingMetadata(e),setTimeout(()=>{"function"==typeof loadGenres&&loadGenres()},200),this.refreshCuratedContent(e),this.refreshDynamicContent(e),setTimeout(()=>{"function"==typeof window.renderHomeRails&&window.renderHomeRails(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview()},500)}catch(t){}}async refreshCurrentlyWatchingMetadata(e){var t,i;try{const n=window.appData;if(!n)return;window.getTMDBLocale(e);let o=!1;if(null==(t=n.tv)?void 0:t.watching)for(let e=0;e<n.tv.watching.length;e++){const t=n.tv.watching[e];if(t.id)try{const i=await window.resolveTMDBItem(t.id,"tv");i&&i.id&&(n.tv.watching[e]={...t,title:i.name||t.title,overview:i.overview||t.overview,original_name:i.original_name||t.original_name},o=!0)}catch(a){}}if(null==(i=n.movies)?void 0:i.watching)for(let e=0;e<n.movies.watching.length;e++){const t=n.movies.watching[e];if(t.id)try{const i=await window.resolveTMDBItem(t.id,"movie");i&&i.id&&(n.movies.watching[e]={...t,title:i.title||t.title,overview:i.overview||t.overview,original_title:i.original_title||t.original_title},o=!0)}catch(a){}}o&&("function"==typeof window.saveAppData&&window.saveAppData(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview())}catch(a){}}refreshCuratedContent(e){["curated:trending","curated:staff","curated:new"].forEach(e=>{localStorage.removeItem(e)}),setTimeout(()=>{"function"==typeof window.renderHomeRails&&window.renderHomeRails(),"function"==typeof window.renderCuratedRows&&window.renderCuratedRows()},100)}refreshDynamicContent(e){if("function"==typeof window.__FlickletRefreshTrivia)try{window.__FlickletRefreshTrivia()}catch(t){}if("function"==typeof window.__FlickletRefreshSeriesOrganizer)try{window.__FlickletRefreshSeriesOrganizer()}catch(t){}"function"==typeof window.loadUpcomingEpisodes&&window.loadUpcomingEpisodes(),"function"==typeof window.startDailyCountdown&&window.startDailyCountdown(),"function"==typeof window.updateFlickWordStats&&window.updateFlickWordStats(),"function"==typeof window.__FlickletRefreshSpotlight&&window.__FlickletRefreshSpotlight(),setTimeout(()=>{const t=document.getElementById("fakeFortune"),i=document.getElementById("randomQuote");t&&"function"==typeof pickDailyHoroscope&&(t.textContent=pickDailyHoroscope()),i&&"function"==typeof drawQuote&&(i.textContent=drawQuote());const a=document.getElementById("importFile");a&&"function"==typeof updateFileLabel&&updateFileLabel(a),this.handleSearchResultsLanguageChange(e)},600)}handleSearchResultsLanguageChange(e){const i=document.getElementById("searchResults");if(i&&!i.hidden){void 0!==window.searchItemCache&&window.searchItemCache.clear&&window.searchItemCache.clear();const a=document.getElementById("searchInput");a&&a.value.trim()?setTimeout(()=>{"function"==typeof window.performSearch&&window.performSearch()},100):i.innerHTML=`<div style="text-align: center; padding: 20px;" class="u-fg">\n          <p>${t("search_results_cleared",e)}</p>\n          <p>${t("please_search_again",e)}</p>\n        </div>`}}t(e,t=this.currentLang){return window.I18N&&window.I18N[t]&&window.I18N[t][e]?window.I18N[t][e]:window.I18N&&window.I18N.en&&window.I18N.en[e]?window.I18N.en[e]:e}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t>-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(t=>{try{t(e)}catch(i){}})}getCurrentLanguage(){return this.currentLang}reinitialize(){var e,t;if(null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.lang){const e=window.appData.settings.lang;e!==this.currentLang&&(this.currentLang=e,this.setupLanguageDropdown(),applyTranslations(this.currentLang),this.updateLanguageDependentUI(this.currentLang))}}isLanguageChangeInProgress(){return this.isChangingLanguage}showLanguageChangeNotification(e){const i="es"===e?"Spanish":"English";let a=t("language_changed_to",e);a=a&&a.includes("{lang}")?a.replace("{lang}",i):`Language changed to ${i}`,"function"==typeof window.showNotification&&window.showNotification(a,"success")}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.LanguageManager.init()}):window.LanguageManager.init(),window.changeLanguage=e=>window.LanguageManager.changeLanguage(e);const u=(()=>{let e,t=null,i=[],a=0,n=8e3;function o(){return e=document.querySelector('[data-role="marquee"]')||document.querySelector("#quoteText.quote-text"),e&&(e.removeAttribute("data-i18n"),e.dataset.role=e.dataset.role||"marquee",e.classList.add("ready","is-ready")),!!e}function s(t){(e||o())&&(e.textContent=t)}function r(){if(!e&&!o())return 8e3;const t=getComputedStyle(e),i=function(e){const t=String(e).split(",")[0].trim();if(t.endsWith("ms"))return parseFloat(t);if(t.endsWith("s"))return 1e3*parseFloat(t);const i=parseFloat(t);return Number.isFinite(i)&&i>0?i:0}(t.animationDuration||t.webkitAnimationDuration||"");if(i>0)return d(Math.ceil(1.15*i),6e3,6e4);const a=e.closest(".marquee-container, .marquee, .home-group, main, body")||document.body,n=(e.scrollWidth||e.clientWidth)+(a.clientWidth||0),s=parseFloat(t.getPropertyValue("--marquee-speed"))||parseFloat(getComputedStyle(a).getPropertyValue("--marquee-speed"))||90,r=n/Math.max(s,40);return d(Math.ceil(1.15*r*1e3),6e3,6e4)}function d(e,t,i){return Math.min(i,Math.max(t,e))}function l(d,l){c(),(e||o())&&(i=Array.isArray(d)&&d.length?d:i,n=Number.isFinite(l)&&l>0?l:r(),a=0,s(i[a]),t=setInterval(()=>{a=(a+1)%i.length,s(i[a])},n))}function c(){t&&(clearInterval(t),t=null)}return{init:function({list:e=[],interval:t=null}={}){o(),l(e,t)},startRotation:l,stopRotation:c,setQuote:s}})();!function(){try{window.guard||(window.guard=(e,t)=>{e&&"function"==typeof t&&t()}),window.resolveTMDBItem=async function(e,t=null){try{if(t&&("movie"===t||"tv"===t))try{const i=await window.tmdbGet(`${t}/${e}`);if(i&&i.id)return{...i,media_type:t}}catch(i){}const a=[window.tmdbGet(`movie/${e}`).then(e=>({...e,media_type:"movie"})).catch(()=>null),window.tmdbGet(`tv/${e}`).then(e=>({...e,media_type:"tv"})).catch(()=>null)],n=(await Promise.allSettled(a)).find(e=>"fulfilled"===e.status&&e.value&&e.value.id);if(n)return n.value.media_type,n.value;throw new Error(`No data found for id ${e} in any media type`)}catch(i){throw i.message,i}},window.addToListFromCache=async function(e,t){var i,a,n,o,s,r,d,l,c;let u=null;const w=document.getElementById("searchResultsList")||document.getElementById("searchResultsGrid")||document.getElementById("searchResults")||document;if(w){const t=w.querySelector(`[data-id="${e}"]`);if(t){if(t.dataset.itemData)try{u=JSON.parse(t.dataset.itemData)}catch(h){}if(!u){const l=(null==(i=t.querySelector(".title"))?void 0:i.textContent)||(null==(a=t.querySelector(".unified-card-title"))?void 0:a.textContent)||(null==(n=t.querySelector(".media-card-title"))?void 0:n.textContent)||(null==(o=t.querySelector("h3"))?void 0:o.textContent)||"Unknown",c=((null==(s=t.querySelector(".sub"))?void 0:s.textContent)||(null==(r=t.querySelector(".unified-card-subtitle"))?void 0:r.textContent)||null==(d=t.querySelector(".media-card-subtitle"))||d.textContent,t.dataset.mediaType||t.dataset.type||"movie");u={id:Number(e),title:l,name:l,media_type:c}}}}if(!u){const t=window.appData||{},i=t.tv||{},a=t.movies||{},n=[...Array.isArray(i.watching)?i.watching:[],...Array.isArray(i.wishlist)?i.wishlist:[],...Array.isArray(i.watched)?i.watched:[],...Array.isArray(a.watching)?a.watching:[],...Array.isArray(a.wishlist)?a.wishlist:[],...Array.isArray(a.watched)?a.watched:[]].find(t=>String(t.id)===String(e));n&&(u=n)}if(!u)try{let t=null;if(w){const i=w.querySelector(`[data-id="${e}"]`);i&&(t=i.dataset.mediaType||i.dataset.type)}const i=await window.resolveTMDBItem(e,t);if(!i||!i.id)throw new Error("No data from TMDB");u={id:Number(e),title:i.title||i.name||`Item ${e}`,name:i.name||i.title||`Item ${e}`,media_type:i.media_type,poster_path:i.poster_path,release_date:i.release_date||i.first_air_date,vote_average:i.vote_average,overview:i.overview}}catch(m){u={id:Number(e),title:`Item ${e}`,name:`Item ${e}`,media_type:"movie"}}if("function"==typeof window.addToList)if(window.addToList(u,t)){"function"==typeof window.showNotification&&window.showNotification(`Added to ${t}`,"success");try{const t=w.querySelector(`[data-id="${e}"]`)||w.querySelector(`[data-item-id="${e}"]`);if(t){t.remove();const e=document.getElementById("resultsCount");if(e){const t=w.querySelectorAll("[data-id], [data-item-id]").length;e.textContent=String(t)}}}catch(h){}}else"function"==typeof window.showNotification&&window.showNotification(`Failed to add to ${t}`,"error");else try{window.appData||(window.appData={tv:{},movies:{}});const i=u.media_type||(u.first_air_date?"tv":"movie"),a="tv"===i?"tv":"movies";u.media_type||(u.media_type=i),window.appData[a]||(window.appData[a]={}),window.appData[a][t]||(window.appData[a][t]=[]);const n=(null==(c=null==(l=window.firebaseAuth)?void 0:l.currentUser)?void 0:c.uid)||null,o=await window.WatchlistsAdapter.load(n),s=t+"Ids";if(o[s]&&o[s].includes(String(u.id)))"function"==typeof window.showNotification&&window.showNotification(`Already in ${t}`,"info");else{window.appData[a][t].push(u),window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.addItem&&window.WatchlistsAdapter.addItem(u.id,t),"function"==typeof window.saveAppData&&window.saveAppData(),"function"==typeof window.saveData&&window.saveData().then(()=>{window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.invalidate&&window.WatchlistsAdapter.invalidate()}).catch(e=>{}),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"addToListFromCache",itemId:e,list:t}})),window.FlickletApp&&"function"==typeof window.FlickletApp.updateUI&&window.FlickletApp.updateUI(),"function"==typeof window.showNotification&&window.showNotification(`Added to ${t}`,"success");try{const t=w.querySelector(`[data-id="${e}"]`)||w.querySelector(`[data-item-id="${e}"]`);if(t){t.remove();const e=document.getElementById("resultsCount");if(e){const t=w.querySelectorAll("[data-id], [data-item-id]").length;e.textContent=String(t)}}}catch(h){}}}catch(m){"function"==typeof window.showNotification&&window.showNotification("Failed to add item","error")}}}catch(r){return}window.FLAGS=window.FLAGS||{},void 0===window.FLAGS.mobilePolishGuard&&(window.FLAGS.mobilePolishGuard=!0),window.mobilePolishGate=function(){try{let e=function(){try{const e=window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error},a=window.innerWidth,n=a<=t,o=navigator.userAgent,s=/iPhone|iPad|iPod|Android|Mobile|BlackBerry|IEMobile|Opera Mini|webOS|Windows Phone/i.test(o),r=a<=640,d=/iPhone/i.test(o);window._mobileDebugLogged||(e.info("ðŸ“± Mobile detection debug:",{viewportWidth:a,userAgent:o.substring(0,50)+"...",isMobileViewport:n,isMobileDevice:s,isMobileSize:r,isIPhone:d,forced:i}),window._mobileDebugLogged=!0);const l=i||s||n||r||d||a<=768;document.body.classList.toggle("mobile-v1",l),e.info(`ðŸ“± Mobile polish ${l?"ENABLED":"DISABLED"} â€” vw:${a} (device: ${s}, viewport: ${n}, size: ${r})`)}catch(r){}};if(!window.FLAGS.mobilePolishGuard)return void FlickletDebug.info("ðŸ“± Mobile polish guard disabled via FLAGS.mobilePolishGuard=false");if(window._mobilePolishInitialized)return void FlickletDebug.info("ðŸ“± Mobile polish already initialized, skipping");window._mobilePolishInitialized=!0;const t=640,i="1"===localStorage.getItem("forceMobileV1");let a;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(e,250)},{passive:!0}),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}catch(r){}};try{mobilePolishGate()}catch(r){}try{window.addEventListener("app:data:ready",()=>{"function"==typeof window.cleanupDuplicateCards&&window.cleanupDuplicateCards(),["watching","wishlist","watched"].forEach(e=>{window[`render_${e}`]||loadListContent(e)}),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"loadListContent"}})),"function"!=typeof window.loadHomeContent||window.render_home||window.loadHomeContent()})}catch(r){}try{window.switchToTab=function(e){if(window.__useLegacyTabs&&window.FlickletApp&&"function"==typeof window.FlickletApp._legacySwitchToTab)return window.FlickletApp._legacySwitchToTab(e);const t=`${e}Section`;window.navEngine&&"function"==typeof window.navEngine.activate&&window.navEngine.activate(t)}}catch(r){}function e(e){var t,i;const a=null==(t=window.FlickletApp)?void 0:t.currentTab;a&&a===e&&("function"==typeof window.updateTabContent?window.updateTabContent(e):"function"==typeof(null==(i=window.FlickletApp)?void 0:i.updateTabContent)&&window.FlickletApp.updateTabContent(e))}window.updateTabContent=function(e){"home"===e?loadHomeContent():"watching"===e||"wishlist"===e||"watched"===e?loadListContent(e):"discover"===e?loadDiscoverContent():"settings"===e&&loadSettingsContent()},window.updateUI=function(){var e;document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"updateUI"}}));const t=(null==(e=window.FlickletApp)?void 0:e.currentTab)||"home";updateTabContent(t)},window.updateTabCounts=async function(){var e,t;try{const i=(...e)=>{},a=(...e)=>{};let n;i("ðŸ”„ [CENTRALIZED] updateTabCounts called from watchlists:updated event");const o=(null==(t=null==(e=window.firebaseAuth)?void 0:e.currentUser)?void 0:t.uid)||null,s=await window.WatchlistsAdapterV2.load(o);return n={watching:s.watchingIds.length,wishlist:s.wishlistIds.length,watched:s.watchedIds.length},i(`[WL v28.99] Canonical adapter counts - watching: ${n.watching}, wishlist: ${n.wishlist}, watched: ${n.watched}`),["watching","wishlist","watched"].forEach(e=>{const t=n[e],o=document.getElementById(`${e}Badge`)||document.querySelector(`[data-count="${e}"]`);o?(o.textContent=t,o.classList.add("tab-badge","tab-badge--visible"),i(`Updated ${e}Badge: ${t}`,{element:o,classes:o.className,style:o.style.cssText,display:getComputedStyle(o).display,visibility:getComputedStyle(o).visibility,opacity:getComputedStyle(o).opacity})):a(`Badge not found for ${e}: ${e}Badge or [data-count="${e}"]`);const s=document.getElementById(`${e}Count`);s?(s.textContent=t,i(`Updated ${e}Count: ${t}`)):a(`List count not found for ${e}: ${e}Count`)}),i("[CENTRALIZED] counts updated:",n),n}catch(i){return{watching:0,wishlist:0,watched:0}}},document.addEventListener("cards:changed",function(e){"function"==typeof window.updateTabCounts&&window.updateTabCounts()}),document.addEventListener("watchlists:updated",async function(e){var t,i;if("function"==typeof window.updateTabCounts&&await window.updateTabCounts(),window.loadListContent&&"function"==typeof window.loadListContent){const e=null==(i=null==(t=document.querySelector(".tab.is-active"))?void 0:t.id)?void 0:i.replace("Tab","");e&&["watching","wishlist","watched"].includes(e)&&window.loadListContent(e)}}),document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"DOMContentLoaded"}}))},1e3)}),document.addEventListener("userDataLoaded",function(){setTimeout(()=>{document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"userDataLoaded"}}))},500)}),window.loadHomeContent=function(){window.render_home||(window.render_home=!0,document.getElementById("homeSection")?(FlickletDebug.info("ðŸ  Loading home content - using improved loading"),window.PerformanceMonitor&&window.PerformanceMonitor.startHomeLoad(),"function"==typeof window.cleanupDuplicateCards&&window.cleanupDuplicateCards(),setTimeout(()=>{try{null==startDailyCountdown||startDailyCountdown()}catch{}try{null==updateFlickWordStats||updateFlickWordStats()}catch{}"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview(),window.PerformanceMonitor&&window.PerformanceMonitor.endHomeLoad(),window.render_home=!1},50)):window.render_home=!1)},window.cleanupDuplicateCards=function(){try{const e=(...e)=>{};e("Starting duplicate card cleanup...");const t=document.querySelectorAll("[data-item-id][data-list-type]"),i=new Map;let a=0;return t.forEach(t=>{const n=`${t.dataset.itemId}-${t.dataset.listType}`;i.has(n)?(t.remove(),a++,e(`Removed duplicate card: ${n}`)):i.set(n,t)}),e(`Cleanup complete. Removed ${a} duplicate cards.`),a}catch(e){return 0}};try{window.WatchlistsAdapter={_cache:null,_lastUid:null,_loading:!1,_loadPromise:null,_hasDataInWatchlists(e){if(!e||"object"!=typeof e)return!1;const t=e.movies&&(e.movies.watching&&e.movies.watching.length>0||e.movies.wishlist&&e.movies.wishlist.length>0||e.movies.watched&&e.movies.watched.length>0),i=e.tv&&(e.tv.watching&&e.tv.watching.length>0||e.tv.wishlist&&e.tv.wishlist.length>0||e.tv.watched&&e.tv.watched.length>0);return t||i},async load(e){try{if(this._cache&&this._lastUid===e)return this._cache;if(this._loading&&this._loadPromise)return await this._loadPromise;this._loading=!0,this._loadPromise=this._performLoad(e);const t=await this._loadPromise;return this._loading=!1,this._loadPromise=null,t}catch(r){return this._loading=!1,this._loadPromise=null,r.message,{watchingIds:[],wishlistIds:[],watchedIds:[]}}},async _performLoad(e){if(window.firebaseDb&&e)try{const t=await window.firebaseDb.collection("users").doc(e).get();if(t.exists){const i=t.data();if(Object.keys(i.watchlists||{}),!i.watchlists||!this._hasDataInWatchlists(i.watchlists)){JSON.stringify(i.movies,null,2),JSON.stringify(i.tv,null,2);const t={movies:i.movies||{},tv:i.tv||{}};JSON.stringify(t,null,2);const a=this._normalizeWatchlists(t);return this._cache=a,this._lastUid=e,window.__wl={watchingIds:a.watchingIds,wishlistIds:a.wishlistIds,watchedIds:a.watchedIds},a.watchingIds.length,a.wishlistIds.length,a.watchedIds.length,a}{JSON.stringify(i.watchlists,null,2);const t=this._normalizeWatchlists(i.watchlists);this._cache=t,this._lastUid=e}}}catch(t){t.message}try{const t=window.appData||{},i=t.tv||{},a=t.movies||{},n={watchingIds:[...Array.isArray(i.watching)?i.watching.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[],...Array.isArray(a.watching)?a.watching.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[]],wishlistIds:[...Array.isArray(i.wishlist)?i.wishlist.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[],...Array.isArray(a.wishlist)?a.wishlist.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[]],watchedIds:[...Array.isArray(i.watched)?i.watched.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[],...Array.isArray(a.watched)?a.watched.map(e=>String(e.id||e.tmdb_id||e.tmdbId)).filter(Boolean):[]]};return n.watchingIds=[...new Set(n.watchingIds)],n.wishlistIds=[...new Set(n.wishlistIds)],n.watchedIds=[...new Set(n.watchedIds)],this._cache=n,this._lastUid=e,n.watchingIds.length,n.wishlistIds.length,n.watchedIds.length,n}catch(r){return r.message,{watchingIds:[],wishlistIds:[],watchedIds:[]}}},_normalizeWatchlists(e){var t,i,a,n,o,s;if(JSON.stringify(e,null,2),!e||"object"!=typeof e)return{watchingIds:[],wishlistIds:[],watchedIds:[]};const r=(e,t)=>{if(Array.isArray(e)){const t=e.map(e=>String("object"==typeof e&&null!==e?e.id||e.tmdb_id||e.tmdbId:e)).filter(Boolean);return t}if("object"==typeof e&&null!==e){const t=Object.keys(e).filter(t=>!0===e[t]);return t}return[]},d=[...r((null==(t=e.movies)?void 0:t.watching)||[]),...r((null==(i=e.tv)?void 0:i.watching)||[])],l=[...r((null==(a=e.movies)?void 0:a.wishlist)||[]),...r((null==(n=e.tv)?void 0:n.wishlist)||[])],c=[...r((null==(o=e.movies)?void 0:o.watched)||[]),...r((null==(s=e.tv)?void 0:s.watched)||[])];return{watchingIds:[...new Set(d.map(String))],wishlistIds:[...new Set(l.map(String))],watchedIds:[...new Set(c.map(String))]}},moveItem(e,t,i){try{if(!this._cache)return!1;const a=String((null==e?void 0:e.id)??e),n=t+"Ids",o=i+"Ids";let s=!1;if(this._cache[n]){const e=new Set(this._cache[n]);e.has(a)&&(e.delete(a),this._cache[n]=Array.from(e),this._cache[n].length,s=!0)}if(this._cache[o]){const e=new Set(this._cache[o]);e.has(a)||(e.add(a),this._cache[o]=Array.from(e),this._cache[o].length,s=!0)}return s&&document.dispatchEvent(new CustomEvent("watchlists:updated",{detail:{list:i,action:"move",id:a,fromList:t}})),s}catch(r){return r.message,!1}},removeItem(e,t){try{if(!this._cache)return!1;const i=String((null==e?void 0:e.id)??e),a=t+"Ids";if(this._cache[a]){const e=new Set(this._cache[a]);if(e.has(i))return e.delete(i),this._cache[a]=Array.from(e),this._cache[a].length,document.dispatchEvent(new CustomEvent("watchlists:updated",{detail:{list:t,action:"remove",id:i}})),!0}return!1}catch(r){return r.message,!1}},addItem(e,t){try{this._cache||(this._cache={watchingIds:[],wishlistIds:[],watchedIds:[]});const i=String((null==e?void 0:e.id)??e),a=t+"Ids";if(this._cache[a]){const e=new Set(this._cache[a]);return!e.has(i)&&(e.add(i),this._cache[a]=Array.from(e),this._cache[a].length,document.dispatchEvent(new CustomEvent("watchlists:updated",{detail:{list:t,action:"add",id:i}})),!0)}return!1}catch(r){return r.message,!1}},invalidate(){this._cache=null,this._lastUid=null},getItemData(e){try{const t=String(e),i=window.appData||{},a=i.tv||{},n=i.movies||{},o=[...Array.isArray(a.watching)?a.watching:[],...Array.isArray(a.wishlist)?a.wishlist:[],...Array.isArray(a.watched)?a.watched:[],...Array.isArray(n.watching)?n.watching:[],...Array.isArray(n.wishlist)?n.wishlist:[],...Array.isArray(n.watched)?n.watched:[]],s=o.find(e=>String(e.id||e.tmdb_id||e.tmdbId)===t);if(s){s.title||s.name;const e={...s,id:s.id||s.tmdb_id||s.tmdbId||t};if(!e.media_type||"unknown"===e.media_type){const t=o.slice(0,3).includes(s),i=o.slice(3,6).includes(s);t&&!i?e.media_type="tv":i&&!t?e.media_type="movie":e.first_air_date?e.media_type="tv":e.release_date&&(e.media_type="movie")}return e}return null}catch(r){return r.message,null}},buildAppDataSnapshot(){try{if(!this._cache)return{tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]}};const e=window.appData||{},t=(e.tv,e.movies,this._cache.watchingIds.map(e=>this.getItemData(e)).filter(e=>e&&("tv"===e.media_type||e.first_air_date)).filter(Boolean)),i=this._cache.wishlistIds.map(e=>this.getItemData(e)).filter(e=>e&&("tv"===e.media_type||e.first_air_date)).filter(Boolean),a=this._cache.watchedIds.map(e=>this.getItemData(e)).filter(e=>e&&("tv"===e.media_type||e.first_air_date)).filter(Boolean),n=this._cache.watchingIds.map(e=>this.getItemData(e)).filter(e=>e&&("movie"===e.media_type||!e.first_air_date&&!e.media_type)).filter(Boolean),o=this._cache.wishlistIds.map(e=>this.getItemData(e)).filter(e=>e&&("movie"===e.media_type||!e.first_air_date&&!e.media_type)).filter(Boolean),s={tv:{watching:t,wishlist:i,watched:a},movies:{watching:n,wishlist:o,watched:this._cache.watchedIds.map(e=>this.getItemData(e)).filter(e=>e&&("movie"===e.media_type||!e.first_air_date&&!e.media_type)).filter(Boolean)}};return s.tv.watching.length,s.tv.wishlist.length,s.tv.watched.length,s.movies.watching.length,s.movies.wishlist.length,s.movies.watched.length,s}catch(r){return r.message,{tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]}}}}}}catch(r){}async function t(e){if(!window.Card)return null;const t=window.Card({variant:"poster",id:e.id||e.tmdb_id||e.tmdbId,title:e.title||e.name,subtitle:e.year?`${e.year} â€¢ ${"tv"===e.mediaType?"TV Series":"Movie"}`:"tv"===e.mediaType?"TV Series":"Movie",posterUrl:e.posterUrl||e.poster_src,rating:e.vote_average||e.rating||0,badges:[{label:"Discover",kind:"status"}],primaryAction:{label:"View Details",onClick:()=>{window.openTMDBLink&&window.openTMDBLink(e.id||e.tmdb_id,e.mediaType||"movie")}},overflowActions:[{label:"Not Interested",onClick:()=>{!function(e){try{const t=i();t.some(t=>t.id===e.id&&t.media_type===e.media_type)||(t.push({id:e.id,title:e.title||e.name,media_type:e.media_type,added_date:(new Date).toISOString()}),localStorage.setItem("flicklet-not-interested",JSON.stringify(t)))}catch(r){}}(e),t.remove(),showToast("info","Added to Not Interested",`${e.title||e.name} won't appear in recommendations`)},icon:"âŒ"}],onOpenDetails:()=>{window.openTMDBLink&&window.openTMDBLink(e.id||e.tmdb_id,e.mediaType||"movie")}});return t}function i(){try{const e=localStorage.getItem("flicklet-not-interested");return e?JSON.parse(e):[]}catch(r){return[]}}function a(){const e=document.getElementById("viewNotInterestedBtn"),t=document.getElementById("clearNotInterestedBtn"),i=document.getElementById("closeNotInterestedBtn"),a=document.getElementById("notInterestedList");document.getElementById("notInterestedItems"),e&&e.addEventListener("click",()=>{n(),a.style.display="block"}),t&&t.addEventListener("click",()=>{confirm('Are you sure you want to clear all "Not Interested" items? This action cannot be undone.')&&(function(){try{localStorage.removeItem("flicklet-not-interested")}catch(r){}}(),showToast("success","Cleared",'All "Not Interested" items have been removed'),a&&(a.style.display="none"))}),i&&i.addEventListener("click",()=>{a&&(a.style.display="none")})}function n(){const e=document.getElementById("notInterestedItems");if(!e)return;const t=i();if(0===t.length)return void(e.innerHTML='\n      <div class="not-interested-empty">\n        <p>No items marked as "Not Interested"</p>\n      </div>\n    ');const a=t.map(e=>`\n    <div class="not-interested-item">\n      <div class="not-interested-item__info">\n        <div class="not-interested-item__title">${e.title}</div>\n        <div class="not-interested-item__type">${"tv"===e.media_type?"TV Show":"Movie"}</div>\n        <div class="not-interested-item__date">Added: ${new Date(e.added_date).toLocaleDateString()}</div>\n      </div>\n      <button class="btn btn--sm btn--secondary not-interested-item__remove" \n              data-id="${e.id}" \n              data-media-type="${e.media_type}">\n        Remove\n      </button>\n    </div>\n  `).join("");e.innerHTML=a,e.querySelectorAll(".not-interested-item__remove").forEach(e=>{e.addEventListener("click",()=>{!function(e,t){try{const a=i().filter(i=>!(i.id===e&&i.media_type===t));localStorage.setItem("flicklet-not-interested",JSON.stringify(a))}catch(r){}}(e.dataset.id,e.dataset.mediaType),showToast("success","Removed",'Item removed from "Not Interested" list'),n()})})}function o(e){let t=null;const i=()=>{e.querySelectorAll(".poster-card").forEach(e=>{if(!e.querySelector(".poster-card__drag-handle")){const t=document.createElement("div");t.className="poster-card__drag-handle",t.innerHTML="â‹®â‹®",t.setAttribute("draggable","true"),t.setAttribute("aria-label","Drag to reorder");const i=e.querySelector(".poster-card__actions");i&&i.insertBefore(t,i.firstChild)}}),e.querySelectorAll(".card.v2 .drag-handle").forEach(e=>{e.hasAttribute("draggable")||(e.setAttribute("draggable","true"),e.style.cursor="grab")})};(()=>{if(!document.getElementById("drag-reorder-styles")){const e=document.createElement("style");e.id="drag-reorder-styles",e.textContent="\n        .poster-card__drag-handle {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 24px;\n          height: 24px;\n          background: var(--color-surface-2, #f5f5f5);\n          border: 1px solid var(--color-border, #e0e0e0);\n          border-radius: 4px;\n          cursor: grab;\n          font-size: 12px;\n          color: var(--color-text-muted, #999999);\n          transition: all 0.2s ease;\n          margin-right: 8px;\n        }\n        .poster-card__drag-handle:hover {\n          background: var(--color-primary-light, #fce4ec);\n          border-color: var(--color-primary, #e91e63);\n          color: var(--color-primary, #e91e63);\n        }\n        .poster-card__drag-handle:active {\n          cursor: grabbing;\n        }\n        .poster-card--dragging {\n          opacity: 0.5;\n          transform: rotate(5deg);\n          z-index: 1000;\n        }\n        .poster-card--drag-over {\n          border-color: var(--color-primary, #e91e63);\n          background: var(--color-primary-light, #fce4ec);\n        }\n        .poster-cards-grid--reordering {\n          cursor: grabbing;\n        }\n        .poster-cards-grid--reordering .poster-card {\n          transition: transform 0.2s ease;\n        }\n        @media (max-width: 768px) {\n          .poster-card__drag-handle {\n            width: 20px;\n            height: 20px;\n            font-size: 10px;\n          }\n        }\n      ",document.head.appendChild(e)}})(),i(),e.addEventListener("dragstart",i=>{(i.target.classList.contains("poster-card__drag-handle")||i.target.classList.contains("drag-handle"))&&(t=i.target.closest(".poster-card")||i.target.closest(".card.v2"),Array.from(e.children).indexOf(t),t.classList.add("poster-card--dragging"),e.classList.add("poster-cards-grid--reordering"),i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("text/html",t.outerHTML))}),e.addEventListener("dragend",i=>{(i.target.classList.contains("poster-card__drag-handle")||i.target.classList.contains("drag-handle"))&&(t.classList.remove("poster-card--dragging"),e.classList.remove("poster-cards-grid--reordering"),e.querySelectorAll(".poster-card, .card.v2").forEach(e=>e.classList.remove("poster-card--drag-over")),t=null)}),e.addEventListener("dragover",i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",s(e,i.clientY);const a=i.target.closest(".poster-card")||i.target.closest(".card.v2");a&&a!==t&&a.classList.add("poster-card--drag-over")}),e.addEventListener("dragleave",e=>{const t=e.target.closest(".poster-card")||e.target.closest(".card.v2");t&&t.classList.remove("poster-card--drag-over")}),e.addEventListener("drop",i=>{i.preventDefault();const a=s(e,i.clientY),n=i.target.closest(".poster-card")||i.target.closest(".card.v2");n&&n!==t&&(null==a?e.appendChild(t):e.insertBefore(t,a),function(e){if(!window.appData)return;const t=e.id,i=t.replace("List",""),a="tv"==("watching"===i||"wishlist"===i||"watched"===i?t.includes("tv")?"tv":"movies":"tv")?"tv":"movies";if(!window.appData[a]||!window.appData[a][i])return;const n=e.querySelectorAll(".poster-card, .card.v2"),o=Array.from(n).map(e=>{var t;const n=e.dataset.id||(null==(t=e.querySelector("[data-id]"))?void 0:t.dataset.id);return window.appData[a][i].find(e=>e.id==n)}).filter(Boolean);window.appData[a][i]=o,window.saveAppData?window.saveAppData():localStorage.setItem("flicklet-data",JSON.stringify(window.appData)),showToast("success","Reordered","List order updated")}(e)),e.querySelectorAll(".poster-card, .card.v2").forEach(e=>e.classList.remove("poster-card--drag-over"))}),new MutationObserver(()=>{i()}).observe(e,{childList:!0,subtree:!0})}function s(e,t){return[...e.querySelectorAll(".poster-card:not(.poster-card--dragging), .card.v2:not(.poster-card--dragging)")].reduce((e,i)=>{const a=i.getBoundingClientRect(),n=t-a.top-a.height/2;return n<0&&n>e.offset?{offset:n,element:i}:e},{offset:Number.NEGATIVE_INFINITY}).element}window.loadListContent=async function(e){var t,i;try{const a=(...e)=>{},n=(...e)=>{};a(`ðŸ”„ loadListContent called for ${e}`);const o=`render_${e}`;if(window[o])return void a(`Skipping duplicate render for ${e}`);let s,r;window[o]=!0;const d=(null==(i=null==(t=window.firebaseAuth)?void 0:t.currentUser)?void 0:i.uid)||null,l=await window.WatchlistsAdapterV2.load(d),c={watching:l.watchingIds||[],wishlist:l.wishlistIds||[],watched:l.watchedIds||[]},u=c[e]||[];if(a(`[WL v28.33] Loaded ${u.length} IDs for ${e} from canonical adapter`),r={watching:c.watching.length,wishlist:c.wishlist.length,watched:c.watched.length},["watching","wishlist","watched"].forEach(e=>{const t=document.getElementById(`${e}Count`);t&&(t.textContent=r[e],a(`[WL v28.33] Set header ${e}Count: ${r[e]}`));const i=document.getElementById(`${e}Badge`);i&&(i.textContent=r[e],i.classList.remove("tab-badge--hidden","tab-badge--visible"),i.classList.add(r[e]>0?"tab-badge--visible":"tab-badge--hidden"),a(`[WL v28.33] Set badge ${e}Badge: ${r[e]}`))}),a(`[WL v28.33] Looking for ${u.length} IDs:`,u),s=u.map(e=>{let t=null;if(window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.getItemData)t=window.WatchlistsAdapterV2.getItemData(e);else if(window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.getItemData)t=window.WatchlistsAdapter.getItemData(e);else{const i=window.appData||{},a=i.tv||{},n=i.movies||{};t=[...Array.isArray(a.watching)?a.watching:[],...Array.isArray(a.wishlist)?a.wishlist:[],...Array.isArray(a.watched)?a.watched:[],...Array.isArray(n.watching)?n.watching:[],...Array.isArray(n.wishlist)?n.wishlist:[],...Array.isArray(n.watched)?n.watched:[]].find(t=>String(t.id||t.tmdb_id||t.tmdbId)===String(e))}return a(`[WL v28.33] ID ${e} ->`,t?t.title||t.name||"Unknown":"NOT FOUND"),t}).filter(Boolean),a(`[WL v28.33] Mapped ${u.length} IDs to ${s.length} items for ${e}`),u.length>s.length){const t=u.filter(e=>{let t=null;return window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.getItemData?t=window.WatchlistsAdapterV2.getItemData(e):window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.getItemData&&(t=window.WatchlistsAdapter.getItemData(e)),!t});a(`[WL v28.33] Missing items for ${e}:`,t)}const w=document.getElementById(`${e}List`)||document.querySelector(`[data-section="${e}"] .section-content`)||(()=>{const e=document.createElement("div");return e.className="list-container",(document.querySelector("main,#app,body")||document.body).appendChild(e),e})();for(a(`Container for ${e}:`,w.id||w.className,"Children before clear:",w.children.length),w.className="list-container";w.firstChild;)w.removeChild(w.firstChild);a("Children after clear:",w.children.length);const h=document.querySelectorAll(`[data-list-type="${e}"]`);if(a(`Found ${h.length} existing cards for ${e}`),h.forEach(e=>{e.parentNode&&e.parentNode!==w&&(a("Removing duplicate card from:",e.parentNode.id||e.parentNode.className),e.remove())}),!s.length)return void(w.innerHTML='<div class="poster-cards-empty">Nothing here yet.</div>');if("function"==typeof window.renderCardV2){a(`Rendering ${s.length} items for ${e} using Cards V2`);const t=document.createDocumentFragment(),i=performance.now();s.forEach((i,o)=>{var r;const d={id:i.id,media_type:i.media_type||(i.first_air_date?"tv":"movie"),title:i.title||i.name||"Unknown",name:i.title||i.name||"Unknown",release_date:i.release_date||null,first_air_date:i.first_air_date||null,poster:i.poster_path?`https://image.tmdb.org/t/p/w200${i.poster_path}`:i.posterUrl||i.poster||"/assets/img/poster-placeholder.png",genre:i.genre||i.genres&&(null==(r=i.genres[0])?void 0:r.name)||"",seasonEpisode:i.seasonEpisode||i.sxxExx||"",nextAirDate:i.next_episode_air_date||i.nextAirDate||i.next_air_date||"",userRating:i.userRating||i.rating||0,progress:i.progress||"",badges:i.badges||[],whereToWatch:i.whereToWatch||"",overview:i.overview||""},l=document.createElement("div"),c=window.renderCardV2(l,d,{listType:e,context:"tab"});c?(c.dataset.itemId=d.id,c.dataset.listType=e,c.dataset.renderIndex=o,t.appendChild(c),a(`Added V2 tab card ${o+1}/${s.length} for ${e}: ${d.title}`)):n(`V2 card creation failed for ${d.title}`)}),w.appendChild(t);const o=performance.now();a(`[Performance] Rendered ${s.length} cards in ${(o-i).toFixed(2)}ms`)}else"function"==typeof window.Card&&"function"==typeof window.createCardData?(a(`Rendering ${s.length} items for ${e} using createCardData + Card`),s.forEach((t,i)=>{try{const o=window.createCardData(t,"tmdb",e);a(`Card data for ${t.title||t.name}:`,o);const r=window.Card({variant:"detail",...o});r?(r.dataset.itemId=o.id,r.dataset.listType=e,r.dataset.renderIndex=i,w.appendChild(r),a(`Added card ${i+1}/${s.length} for ${e}:`,o.title)):n(`Card creation failed for ${t.title||t.name}`)}catch(o){n("render item failed:",(null==o?void 0:o.message)||o)}})):"function"==typeof window.Card?(a(`Rendering ${s.length} items for ${e} using fallback Card method`),s.forEach(t=>{try{const i={variant:"detail",id:t.id||t.tmdb_id||t.tmdbId,title:t.title||t.name,subtitle:t.year?`${t.year} â€¢ ${"tv"===t.mediaType?"TV Series":"Movie"}`:"tv"===t.mediaType?"TV Series":"Movie",posterUrl:t.posterUrl||t.poster_src,rating:t.vote_average||t.rating||0,mediaType:t.mediaType||"movie",currentList:e,onOpenDetails:e=>{window.openTMDBLink&&window.openTMDBLink(e,t.mediaType||"movie")}},a=window.Card(i);a&&w.appendChild(a)}catch(i){n("render item failed:",(null==i?void 0:i.message)||i)}})):w.innerHTML='<div class="poster-cards-empty">Card components not available.</div>';"function"==typeof window.addScrollIndicators&&window.addScrollIndicators(w),window.dispatchEvent(new CustomEvent("cards:rendered",{detail:{count:s.length,section:e}})),a(`Final children count for ${e}:`,w.children.length),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{listType:e,count:w.children.length}})),window.CounterBootstrap&&"function"==typeof window.CounterBootstrap.directRecount&&setTimeout(()=>{window.CounterBootstrap.directRecount()},100),"function"==typeof window.makeSortable&&(window.makeSortable(w),a(`Enabled drag and drop for ${e} container`)),setTimeout(()=>{o&&(window[o]=!1)},100)}catch(a){renderKey&&(window[renderKey]=!1)}},window.openEpisodeTrackingModal=function(e){try{const t=(...e)=>{};let i=null,a="movie";if(window.WatchlistsAdapter&&(i=window.WatchlistsAdapter.getItemData(e),i&&(a=i.media_type||i.mediaType||(i.first_air_date?"tv":"movie"))),!i){const t=window.appData||{},n=t.tv||{},o=t.movies||{};for(const s of["watching","wishlist","watched"]){const t=n[s]||[],r=o[s]||[];if(i=t.find(t=>(t.id||t.tmdb_id)==e)||r.find(t=>(t.id||t.tmdb_id)==e),i){a=i.media_type||i.mediaType||(i.first_air_date?"tv":"movie");break}}}if(!i)return void t("Item not found for episode tracking:",e);if("tv"!==a)return void t("Episode tracking only available for TV shows");const n=`\n      <div class="episode-modal" id="episodeTrackingModal" aria-hidden="false" role="dialog">\n        <div class="episode-modal-overlay" data-close></div>\n        <div class="episode-modal-dialog" role="document">\n          <header class="episode-modal-header">\n            <h3>ðŸ“º Episode Tracking - ${i.title||i.name}</h3>\n            <button class="episode-modal-close" type="button" aria-label="Close" data-close>&times;</button>\n          </header>\n          <main class="episode-modal-body">\n            <div class="episode-progress">\n              <label for="currentSeason">Current Season:</label>\n              <select id="currentSeason" class="episode-select">\n                <option value="1">Season 1</option>\n                <option value="2">Season 2</option>\n                <option value="3">Season 3</option>\n              </select>\n            </div>\n            <div class="episode-progress">\n              <label for="currentEpisode">Current Episode:</label>\n              <select id="currentEpisode" class="episode-select">\n                <option value="1">Episode 1</option>\n                <option value="2">Episode 2</option>\n                <option value="3">Episode 3</option>\n              </select>\n            </div>\n            <div class="episode-actions">\n              <button class="episode-btn episode-btn--primary" data-action="save-progress">Save Progress</button>\n              <button class="episode-btn episode-btn--secondary" data-action="mark-season-complete">Mark Season Complete</button>\n              <button class="episode-btn episode-btn--secondary" data-action="mark-series-complete">Mark Series Complete</button>\n            </div>\n          </main>\n        </div>\n      </div>\n    `,o=document.getElementById("episodeTrackingModal");o&&o.remove(),document.body.insertAdjacentHTML("beforeend",n);const s=document.getElementById("episodeTrackingModal"),r=s.querySelectorAll("[data-close]"),d=s.querySelectorAll("[data-action]");r.forEach(e=>{e.addEventListener("click",()=>{s.remove()})}),d.forEach(i=>{i.addEventListener("click",i=>{const a=i.target.dataset.action,n=parseInt(document.getElementById("currentSeason").value),o=parseInt(document.getElementById("currentEpisode").value);switch(a){case"save-progress":t("Save progress:",{itemId:e,season:n,episode:o});break;case"mark-season-complete":t("Mark season complete:",{itemId:e,season:n});break;case"mark-series-complete":t("Mark series complete:",{itemId:e}),window.moveItem&&window.moveItem(Number(e),"watched"),s.remove()}})}),s.querySelector(".episode-modal-overlay").addEventListener("click",()=>{s.remove()}),t("Episode tracking modal opened for:",i.title||i.name)}catch(t){}},window.updateUserRating=function(e,t){try{const i=(...e)=>{},a=window.appData||{};for(const n of["tv","movies"]){const o=a[n]||{};for(const a of["watching","wishlist","watched"]){const n=(o[a]||[]).find(t=>(t.id||t.tmdb_id)==e);if(n){n.userRating=t,i("Updated rating for",n.title||n.name,"to",t);break}}}window.saveAppData&&window.saveAppData()}catch(i){}},window.updateUserNote=function(e,t){try{const i=(...e)=>{},a=window.appData||{};for(const n of["tv","movies"]){const o=a[n]||{};for(const a of["watching","wishlist","watched"]){const n=(o[a]||[]).find(t=>(t.id||t.tmdb_id)==e);if(n){n.userNote=t,i("Updated note for",n.title||n.name);break}}}window.saveAppData&&window.saveAppData()}catch(i){}},window.reorderItems=function(e,t,i){try{const a=(...e)=>{},n=window.appData||{};for(const o of["tv","movies"]){const s=(n[o]||{})[i]||[],r=s.findIndex(t=>(t.id||t.tmdb_id)==e),d=s.findIndex(e=>(e.id||e.tmdb_id)==t);if(-1!==r&&-1!==d&&r!==d){const e=s.splice(r,1)[0];s.splice(d,0,e),a("Reordered",e.title||e.name,"in",i,"list"),window.saveAppData&&window.saveAppData(),window.loadListContent&&window.loadListContent(i);break}}}catch(a){}},window.loadDiscoverContent=async function(){const e=document.getElementById("discoverList");e&&(e.className="poster-cards-grid",e.innerHTML='\n    <div class="poster-cards-loading">\n      <div class="poster-cards-loading__spinner">â³</div>\n      <div class="poster-cards-loading__text">Loading recommendations...</div>\n    </div>\n  ',async function(){var e,a;try{const n=document.getElementById("discoverList");if(!n)return;const o=i(),s=(null==(a=null==(e=window.appData)?void 0:e.settings)?void 0:a.lang)||"en",r=window.getTMDBLocale(s),[d,l]=await Promise.all([window.tmdbGet("movie/popular",{page:1,language:r}),window.tmdbGet("tv/popular",{page:1,language:r})]);if(!(d&&l&&d.results&&l.results))return[];const c=[...d.results.map(e=>({...e,media_type:"movie"})),...l.results.map(e=>({...e,media_type:"tv"}))].filter(e=>!o.some(t=>t.id===e.id&&t.media_type===e.media_type)),u=c.sort(()=>Math.random()-.5).slice(0,20);if(0===u.length)return void(n.innerHTML='\n        <div class="poster-cards-empty">\n          <div class="poster-cards-empty__icon">âœ¨</div>\n          <div class="poster-cards-empty__title">No Recommendations</div>\n          <div class="poster-cards-empty__description">Try adjusting your preferences or check back later.</div>\n        </div>\n      ');n.innerHTML="";for(const e of u){const i=await t(e);i&&n.appendChild(i)}}catch(r){const t=document.getElementById("discoverList");t&&(t.innerHTML='\n        <div class="poster-cards-error">\n          <div class="poster-cards-error__icon">âŒ</div>\n          <div class="poster-cards-error__title">Failed to Load</div>\n          <div class="poster-cards-error__description">Unable to load recommendations. Please try again later.</div>\n          <button class="btn btn--primary poster-cards-error__retry" onclick="loadDiscoverContent()">\n            Try Again\n          </button>\n        </div>\n      ')}}())},window.openItemDetails=function(e){},window.showToast=function(e,t,i){document.querySelectorAll(".notification").forEach(e=>e.remove());const a=document.createElement("div");a.className=`notification notification--${e}`,a.innerHTML=`<span class="notification-message">${i}</span>`,document.body.appendChild(a),setTimeout(()=>{a.classList.add("notification--visible")},10),setTimeout(()=>{a.parentNode&&(a.classList.remove("notification--visible"),setTimeout(()=>{a.parentNode&&a.remove()},300))},4e3)},window.openNotesModal=function(e){let t=document.getElementById("notesModal");t||(t=document.createElement("div"),t.id="notesModal",t.className="modal modal--notes",t.setAttribute("aria-hidden","true"),t.style.display="none",document.body.appendChild(t));const i=function(e){try{return localStorage.getItem(`flicklet-notes-${e}`)||""}catch(r){return""}}(e.id)||"";t.innerHTML=`\n    <div class="modal-overlay" data-close></div>\n    <div class="modal-dialog" role="document">\n      <div class="modal__header">\n        <h3 class="modal__title">Notes for ${e.title||e.name}</h3>\n        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>\n      </div>\n      <div class="modal__body">\n        <textarea class="modal__textarea" placeholder="Add your notes about this show or movie..." rows="8">${i}</textarea>\n      </div>\n      <div class="modal__footer">\n        <button class="btn btn--secondary modal__cancel" data-close>Cancel</button>\n        <button class="btn btn--primary modal__save">Save Notes</button>\n      </div>\n    </div>\n  `;const a=t.querySelector(".modal__save"),n=t.querySelector(".modal__textarea");a.addEventListener("click",()=>{const t=n.value.trim();!function(e,t){try{t.trim()?localStorage.setItem(`flicklet-notes-${e}`,t):localStorage.removeItem(`flicklet-notes-${e}`)}catch(r){}}(e.id,t),showToast("success","Notes Saved",`Notes saved for ${e.title||e.name}`),window.ModalUtility&&window.ModalUtility.close()}),window.ModalUtility&&(window.ModalUtility.open("notesModal",document.activeElement),setTimeout(()=>n.focus(),100))},window.openEpisodeGuideModal=function(e){let t=document.getElementById("episodeGuideModal");t||(t=document.createElement("div"),t.id="episodeGuideModal",t.className="modal modal--episodes",t.setAttribute("aria-hidden","true"),t.style.display="none",document.body.appendChild(t)),t.innerHTML=`\n    <div class="modal-overlay" data-close></div>\n    <div class="modal-dialog" role="document">\n      <div class="modal__header">\n        <h3 class="modal__title">Episode Guide - ${e.title||e.name}</h3>\n        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>\n      </div>\n      <div class="modal__body">\n        <div class="episode-guide">\n          <div class="episode-guide__seasons">\n            <label for="seasonSelect">Season:</label>\n            <select id="seasonSelect" class="episode-guide__select">\n              <option value="1">Season 1</option>\n              <option value="2">Season 2</option>\n              <option value="3">Season 3</option>\n            </select>\n          </div>\n          <div class="episode-guide__episodes">\n            <div class="episode-guide__episode">\n              <div class="episode-guide__episode-number">S1E1</div>\n              <div class="episode-guide__episode-title">Pilot</div>\n              <div class="episode-guide__episode-date">Jan 15, 2023</div>\n              <button class="btn btn--sm episode-guide__watch-btn">Mark Watched</button>\n            </div>\n            <div class="episode-guide__episode">\n              <div class="episode-guide__episode-number">S1E2</div>\n              <div class="episode-guide__episode-title">The Second Episode</div>\n              <div class="episode-guide__episode-date">Jan 22, 2023</div>\n              <button class="btn btn--sm episode-guide__watch-btn">Mark Watched</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="modal__footer">\n        <button class="btn btn--secondary" data-close>Close</button>\n      </div>\n    </div>\n  `,window.ModalUtility&&window.ModalUtility.open("episodeGuideModal",document.activeElement)},window.confirmRemoveItem=function(e,t){let i=document.getElementById("confirmRemoveModal");i||(i=document.createElement("div"),i.id="confirmRemoveModal",i.className="modal modal--remove",i.setAttribute("aria-hidden","true"),i.style.display="none",document.body.appendChild(i)),i.innerHTML=`\n    <div class="modal-overlay" data-close></div>\n    <div class="modal-dialog" role="document">\n      <div class="modal__header">\n        <h3 class="modal__title">Remove Item</h3>\n        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>\n      </div>\n      <div class="modal__body">\n        <p>Are you sure you want to remove <strong>${e.title||e.name}</strong> from your ${t} list?</p>\n        <p class="modal__warning">This action cannot be undone.</p>\n      </div>\n      <div class="modal__footer">\n        <button class="btn btn--secondary modal__cancel" data-close>Cancel</button>\n        <button class="btn btn--danger modal__confirm">Remove</button>\n      </div>\n    </div>\n  `,i.querySelector(".modal__confirm").addEventListener("click",()=>{!function(e,t){if(!window.appData)return;const i=e.media_type||(e.first_air_date?"tv":"movie"),a="tv"===i?"tv":"movies";if(window.appData[a]&&window.appData[a][t]){const i=window.appData[a][t],n=i.findIndex(t=>t.id===e.id);-1!==n&&(i.splice(n,1),window.saveAppData?window.saveAppData():localStorage.setItem("flicklet-data",JSON.stringify(window.appData)))}}(e,t);const i=document.getElementById(`${t}List`);if(i){const t=i.querySelector(`[data-id="${e.id}"]`);t&&t.remove()}document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"removeItemFromCurrentList",itemId:e.id,section:t}})),showToast("success","Item Removed",`${e.title||e.name} removed from ${t}`),window.ModalUtility&&window.ModalUtility.close()}),window.ModalUtility&&window.ModalUtility.open("confirmRemoveModal",document.activeElement)},window.openProTeaserModal=function(){const e=document.createElement("div");e.className="modal-backdrop",e.dataset.modal="pro";const t=document.createElement("div");t.className="modal modal--pro",t.innerHTML='\n    <div class="modal__header">\n      <h3 class="modal__title">â­ Flicklet PRO</h3>\n      <button class="modal__close" aria-label="Close modal">Ã—</button>\n    </div>\n    <div class="modal__body">\n      <div class="pro-teaser">\n        <div class="pro-teaser__icon">â­</div>\n        <h4 class="pro-teaser__title">Unlock Premium Features</h4>\n        <ul class="pro-teaser__features">\n          <li>ðŸ“ Unlimited notes for all shows & movies</li>\n          <li>ðŸ“º Detailed episode guides with air dates</li>\n          <li>ðŸ“Š Advanced statistics and insights</li>\n          <li>ðŸŽ¨ Custom themes and layouts</li>\n          <li>â˜ï¸ Cloud sync across all devices</li>\n        </ul>\n        <div class="pro-teaser__price">\n          <span class="pro-teaser__amount">$4.99</span>\n          <span class="pro-teaser__period">/month</span>\n        </div>\n      </div>\n    </div>\n    <div class="modal__footer">\n      <button class="btn btn--secondary modal__close">Maybe Later</button>\n      <button class="btn btn--primary modal__upgrade">Upgrade to PRO</button>\n    </div>\n  ',e.appendChild(t),document.body.appendChild(e);const i=t.querySelector(".modal__close"),a=t.querySelector(".modal__upgrade"),n=()=>{e.remove()};i.addEventListener("click",n),e.addEventListener("click",t=>{t.target===e&&n()}),a.addEventListener("click",()=>{showToast("info","Coming Soon","PRO upgrade will be available soon!"),n()})},window.makeSortable=o,window.loadSettingsContent=function(){FlickletDebug.info("âš™ï¸ Loading settings content - adding data tools handlers"),a(),["watchingList","wishlistList","watchedList"].forEach(e=>{const t=document.getElementById(e);t&&o(t)});const t=document.getElementById("btnExport"),i=document.getElementById("fileImport");function n(){const e=window.FLAGS.proEnabled,t=document.getElementById("proBadge");t&&(t.style.display=e?"inline-block":"none");const i=!!window.SettingsManager&&window.SettingsManager.isPro();document.querySelectorAll('[data-pro="true"]').forEach(e=>{i?(e.classList.add("pro-enabled"),e.classList.remove("locked"),e.removeAttribute("aria-disabled")):(e.classList.remove("pro-enabled"),e.classList.add("locked"),e.setAttribute("aria-disabled","true"))})}FlickletDebug.info("ðŸ” Debug: btnExport element found:",t),FlickletDebug.info("ðŸ” Debug: fileImport element found:",i),FlickletDebug.info("ðŸ” Debug: window.guard function exists:",typeof window.guard),FlickletDebug.info("ðŸ” Debug: btnExport exists check:",!!t),window.guard(!!t,()=>{FlickletDebug.info("âœ… Setting up export/import handlers"),t.addEventListener("click",async()=>{var e,t;FlickletDebug.info("ðŸš€ Export button clicked!");try{const t=await async function(){var e;const t=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),i=JSON.parse(localStorage.getItem("tvMovieTrackerData")||"{}");return{meta:{app:"Flicklet",version:(null==(e=window.FlickletApp)?void 0:e.version)||"n/a",exportedAt:(new Date).toISOString()},appData:t.tv||t.movies?t:i,legacyData:i}}();FlickletDebug.info("ðŸ“Š Export data collected:",t),function(e,t){const i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(i),a.download=t,a.click(),URL.revokeObjectURL(a.href)}(t,`flicklet-export-${(new Date).toISOString().slice(0,10)}.json`),FlickletDebug.info("ðŸ’¾ File download initiated"),null==(e=window.showToast)||e.call(window,"Export created.")}catch(r){FlickletDebug.error("âŒ Export failed:",r),null==(t=window.showToast)||t.call(window,"Export failed: "+r.message)}}),i.addEventListener("change",async e=>{var t,i,a;const n=null==(t=e.target.files)?void 0:t[0];if(n)try{const e=await n.text(),t=JSON.parse(e);t.appData&&localStorage.setItem("flicklet-data",JSON.stringify(t.appData)),t.legacyData&&localStorage.setItem("tvMovieTrackerData",JSON.stringify(t.legacyData)),t.lists&&localStorage.setItem("flicklet_lists",JSON.stringify(t.lists)),t.notes&&localStorage.setItem("flicklet_notes",JSON.stringify(t.notes)),t.prefs&&localStorage.setItem("flicklet_prefs",JSON.stringify(t.prefs)),null==(i=window.showToast)||i.call(window,"Import complete. Reloadingâ€¦"),setTimeout(()=>location.reload(),500)}catch(o){FlickletDebug.error(o),null==(a=window.showToast)||a.call(window,"Import failed: invalid file.")}})}),window.guard(!!document.getElementById("btnProTry"),()=>{document.getElementById("btnProTry").addEventListener("click",()=>{var e;window.FLAGS.proEnabled=!window.FLAGS.proEnabled,document.body.classList.toggle("is-pro",window.FLAGS.proEnabled),null==showNotification||showNotification(window.FLAGS.proEnabled?"Pro preview ON":"Pro preview OFF","success"),null==(e=window.updateProState)||e.call(window),FlickletDebug.info("ðŸ”„ Pro toggle (btnProTry): Refreshing providers, extras, playlists, and trivia...",{pro:window.FLAGS.proEnabled}),window.__FlickletRefreshProviders&&(window.__FlickletRefreshProviders(),FlickletDebug.info("âœ… Providers refreshed")),window.__FlickletRefreshExtras&&(window.__FlickletRefreshExtras(),FlickletDebug.info("âœ… Extras refreshed")),window.__FlickletRefreshPlaylists&&window.__FlickletRefreshPlaylists(),window.__FlickletRefreshTrivia&&window.__FlickletRefreshTrivia(),window.__FlickletRefreshSeriesOrganizer&&window.__FlickletRefreshSeriesOrganizer();const t=document.getElementById("notifAdvancedCard");t&&(window.FLAGS.proEnabled||window.FLAGS.notifAdvancedEnabled?t.style.display="block":t.style.display="none")})}),window.guard(!!window.FLAGS.statsEnabled&&!!document.getElementById("statsContent"),()=>{const e=document.getElementById("statsContent");function t(){var t,i,a,n,o,s;const r=function(){var e,t,i,a,n,o,s,r,d,l,c,u;const w=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),h=JSON.parse(localStorage.getItem("tvMovieTrackerData")||"{}"),m=w.tv||w.movies?w:h,p={watching:((null==(t=null==(e=m.tv)?void 0:e.watching)?void 0:t.length)||0)+((null==(a=null==(i=m.movies)?void 0:i.watching)?void 0:a.length)||0),wishlist:((null==(o=null==(n=m.tv)?void 0:n.wishlist)?void 0:o.length)||0)+((null==(r=null==(s=m.movies)?void 0:s.wishlist)?void 0:r.length)||0),watched:((null==(l=null==(d=m.tv)?void 0:d.watched)?void 0:l.length)||0)+((null==(u=null==(c=m.movies)?void 0:c.watched)?void 0:u.length)||0),notes:0};return p.total=p.watching+p.wishlist+p.watched,p}(),d=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),l=JSON.parse(localStorage.getItem("tvMovieTrackerData")||"{}"),c=d.tv||d.movies?d:l,u=(null==(t=c.tv)?void 0:t.watching)||[],w=(null==(i=c.tv)?void 0:i.wishlist)||[],h=(null==(a=c.tv)?void 0:a.watched)||[],m=(null==(n=c.movies)?void 0:n.watching)||[],p=(null==(o=c.movies)?void 0:o.wishlist)||[],g=(null==(s=c.movies)?void 0:s.watched)||[];u.length,w.length,h.length,m.length,p.length,g.length,e.innerHTML=`\n        <div class="stats-grid">\n          <div class="stat">\n            <div class="stat-number">${r.watching}</div>\n            <div class="stat-label">Currently Watching</div>\n          </div>\n          <div class="stat">\n            <div class="stat-number">${r.wishlist}</div>\n            <div class="stat-label">Want to Watch</div>\n          </div>\n          <div class="stat">\n            <div class="stat-number">${r.watched}</div>\n            <div class="stat-label">Already Watched</div>\n          </div>\n          <div class="stat">\n            <div class="stat-number">${r.total}</div>\n            <div class="stat-label">Total Items</div>\n          </div>\n        </div>\n        <div class="card-surface" style="margin-top: 15px;">\n          <h5 class="heading-subtle">ðŸ“º TV Shows Breakdown</h5>\n          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">\n            <div><strong>${u.length}</strong> Watching</div>\n            <div><strong>${w.length}</strong> Want to Watch</div>\n            <div><strong>${h.length}</strong> Watched</div>\n          </div>\n          <h5 class="heading-subtle" style="margin: 10px 0;">ðŸŽ¬ Movies Breakdown</h5>\n          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">\n            <div><strong>${m.length}</strong> Watching</div>\n            <div><strong>${p.length}</strong> Want to Watch</div>\n            <div><strong>${g.length}</strong> Watched</div>\n          </div>\n        </div>\n      `}window.addEventListener("storage",t),t()}),window.guard(!!window.FLAGS.notifEngineEnabled,()=>{const e=document.getElementById("notifMasterToggle");function t(){var e,t;if("false"===localStorage.getItem("flicklet_notif_master"))return;const i=localStorage.getItem("flicklet_last_notif"),a=new Date;if(i){const e=new Date(i);if((a-e)/36e5<6)return}const n=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),o=JSON.parse(localStorage.getItem("tvMovieTrackerData")||"{}"),s=n.tv||n.movies?n:o,r=[...(null==(e=s.tv)?void 0:e.watching)||[],...(null==(t=s.movies)?void 0:t.watching)||[]].filter(e=>{if(!e.nextEpisodeAirDate)return!1;const t=(new Date(e.nextEpisodeAirDate)-a)/36e5;return t>0&&t<=24});if(r.length>0){const e=1===r.length?"episode":"episodes";null==showNotification||showNotification(`ðŸŽ¬ ${r.length} new ${e} coming soon!`,"success")}localStorage.setItem("flicklet_last_notif",a.toISOString())}e&&(e.checked="false"!==localStorage.getItem("flicklet_notif_master"),e.addEventListener("change",e=>{localStorage.setItem("flicklet_notif_master",e.target.checked),null==showNotification||showNotification(e.target.checked?"Notifications enabled":"Notifications disabled","success")})),t(),setInterval(t,216e5)}),setTimeout(function(){document.querySelectorAll(".card .actions button").forEach(e=>{if(e.textContent.includes("Remove")&&!e.getAttribute("aria-label")&&e.setAttribute("aria-label","Remove this item from your list"),e.textContent.includes("Move to")&&!e.getAttribute("aria-label")){const t=e.textContent.replace("Move to ","");e.setAttribute("aria-label",`Move this item to ${t} list`)}})},100),n(),window.updateProState=n,document.addEventListener("settings:changed",e=>{const{key:t,value:i}=e.detail;"pro"===t||"isPro"===t?n():"theme"===t?document.documentElement.setAttribute("data-theme",i):"lang"===t?"function"==typeof window.updateLanguage&&window.updateLanguage(i):"bulk"===t&&i.forEach(e=>{"pro"===e.key||"isPro"===e.key?n():"theme"===e.key?document.documentElement.setAttribute("data-theme",e.value):"lang"===e.key&&"function"==typeof window.updateLanguage&&window.updateLanguage(e.value)})}),window.toggleProPreview=function(){var e,t;window.FLAGS.proEnabled=!window.FLAGS.proEnabled,document.body.classList.toggle("is-pro",window.FLAGS.proEnabled),null==showNotification||showNotification(window.FLAGS.proEnabled?"Pro preview ON":"Pro preview OFF","success"),null==(e=window.updateProState)||e.call(window),null==(t=window.renderProFeaturesList)||t.call(window),window.__FlickletRefreshProviders&&window.__FlickletRefreshProviders(),window.__FlickletRefreshExtras&&window.__FlickletRefreshExtras(),window.__FlickletRefreshPlaylists&&window.__FlickletRefreshPlaylists(),window.__FlickletRefreshTrivia&&window.__FlickletRefreshTrivia(),window.__FlickletRefreshSeriesOrganizer&&window.__FlickletRefreshSeriesOrganizer();const i=document.getElementById("notifAdvancedCard");i&&(window.FLAGS.proEnabled||window.FLAGS.notifAdvancedEnabled?i.style.display="block":i.style.display="none")},window.openShareModal=function(){const e=document.getElementById("shareSelectionModal");e?(e.style.display="flex","function"==typeof window.populateShareModal?window.populateShareModal():null==showNotification||showNotification("Share feature loading...","info")):null==showNotification||showNotification("Share feature coming soon!","info")},window.guard(!(!window.FLAGS.notifAdvancedEnabled&&!window.FLAGS.proEnabled),()=>{const e=document.getElementById("notifAdvancedCard"),t=document.getElementById("leadHoursInput"),i=document.getElementById("notifScopeSelect");if(e){let a=function(){window.FLAGS.proEnabled?e.classList.remove("disabled"):e.classList.add("disabled")};e.style.display="block",t.value=localStorage.getItem("flicklet_notif_lead")||"24",i.value=localStorage.getItem("flicklet_notif_scope")||"watching",t.addEventListener("change",e=>{localStorage.setItem("flicklet_notif_lead",e.target.value)}),i.addEventListener("change",e=>{localStorage.setItem("flicklet_notif_scope",e.target.value)}),a(),document.addEventListener("click",e=>{"btnProTry"===e.target.id&&setTimeout(a,100)})}});try{let t=function(t,a){try{const n=i(t);if(!n)return!1;window.WatchlistsAdapter&&window.WatchlistsAdapter.removeItem(t,a);const o=window.appData[n][a],s=o.findIndex(e=>e.id===t);return-1!==s&&(o.splice(s,1),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"adapterRemove-direct",action:"remove",itemId:t,list:a}})),window.FlickletApp&&window.FlickletApp.updateUI(),e(a),window.renderHomeRails&&window.renderHomeRails(),!0)}catch(r){return!1}},i=function(e){var t,i,a,n,o,s,r,d,l,c,u,w,h,m,p;if(window.WatchlistsAdapter&&window.WatchlistsAdapter._cache){const n=window.WatchlistsAdapter._cache,o=String(e);if((null==(t=n.watchingIds)?void 0:t.includes(o))||(null==(i=n.wishlistIds)?void 0:i.includes(o))||(null==(a=n.watchedIds)?void 0:a.includes(o))){const t=window.WatchlistsAdapter.getItemData(e);if(t)return"tv"===t.media_type?"tv":"movies"}}const g=window.appData||{};return(null==(o=null==(n=g.tv)?void 0:n.watching)?void 0:o.some(t=>t.id===e))||(null==(r=null==(s=g.tv)?void 0:s.wishlist)?void 0:r.some(t=>t.id===e))||(null==(l=null==(d=g.tv)?void 0:d.watched)?void 0:l.some(t=>t.id===e))?"tv":(null==(u=null==(c=g.movies)?void 0:c.watching)?void 0:u.some(t=>t.id===e))||(null==(h=null==(w=g.movies)?void 0:w.wishlist)?void 0:h.some(t=>t.id===e))||(null==(p=null==(m=g.movies)?void 0:m.watched)?void 0:p.some(t=>t.id===e))?"movies":null},a=function(e,t){var i,a,n;if(window.WatchlistsAdapter&&window.WatchlistsAdapter._cache){const t=window.WatchlistsAdapter._cache,a=String(e),n=["watching","wishlist","watched"];for(const e of n)if(null==(i=t[e+"Ids"])?void 0:i.includes(a))return e}const o=window.appData||{},s=["watching","wishlist","watched"];for(const r of s)if(null==(n=null==(a=o[t])?void 0:a[r])?void 0:n.some(t=>t.id===e))return r;return null};window.addToList=function(e,t){try{if(!e||!e.id)return!1;window.appData||(window.appData={tv:{},movies:{}});const i=e.media_type||(e.first_air_date?"tv":"movie"),a="tv"===i?"tv":"movies";window.appData[a]||(window.appData[a]={}),window.appData[a][t]||(window.appData[a][t]=[]),e.media_type||(e.media_type=i);let n=!1;if(window.WatchlistsAdapterV2&&window.WatchlistsAdapterV2._cache){const i=window.WatchlistsAdapterV2._cache,a=t+"Ids";n=i[a]&&i[a].includes(String(e.id))}else if(window.WatchlistsAdapter&&window.WatchlistsAdapter._cache){const i=window.WatchlistsAdapter._cache,a=t+"Ids";n=i[a]&&i[a].includes(String(e.id))}else n=window.appData[a][t].some(t=>Number(t.id)===Number(e.id));return!n&&(window.appData[a][t].push(e),window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.addItem?window.WatchlistsAdapterV2.addItem(e.id,t):window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.addItem&&window.WatchlistsAdapter.addItem(e.id,t),"function"==typeof window.saveAppData&&window.saveAppData(),"function"==typeof window.saveData&&window.saveData().then(()=>{window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.invalidate&&window.WatchlistsAdapter.invalidate()}).catch(e=>{}),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"addToList",itemId:e.id,list:t}})),window.FlickletApp&&"function"==typeof window.FlickletApp.updateUI&&window.FlickletApp.updateUI(),!0)}catch(r){return!1}},window.moveItem=function(t,n){const o=i(t);if(!o)return;const s=a(t,o);if(!s)return;window.WatchlistsAdapter.moveItem(t,s,n);const r=window.appData[o][s],d=r.findIndex(e=>e.id===t);if(-1===d)return;const[l]=r.splice(d,1);window.appData[o][n].push(l),window.saveAppData(),"function"==typeof window.saveData&&window.saveData(),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"moveItem",action:"move",itemId:t,fromList:s,toList:n}})),window.FlickletApp&&window.FlickletApp.updateUI(),e(s),e(n),window.renderHomeRails&&window.renderHomeRails(),showToast("success","Item Moved",`Item moved to ${n}`)},window.addToWatching=function(e){window.moveItem&&e.id&&window.moveItem(Number(e.id),"watching")},window.addToWishlist=function(e){window.moveItem&&e.id&&window.moveItem(Number(e.id),"wishlist")},window.removeItemFromCurrentList=async function(n){var o,s,r;const d=null==(o=firebase.auth().currentUser)?void 0:o.uid,l=window.firebaseDb||firebase.firestore();if(!d||!l)return;const c=i(n);if(!c)return;const u=a(n,c);if(!u)return;const w=JSON.parse(JSON.stringify(window.appData||{}));if(t(n,u))try{const e=window.pruneWatchlistsShape(window.appData||{});await l.doc(`users/${d}`).set({...e,lastUpdated:null==(r=(s=firebase.firestore.FieldValue).serverTimestamp)?void 0:r.call(s)},{merge:!0}),"function"==typeof window.saveData&&window.saveData(),showToast("success","Item Removed","Item removed successfully")}catch(h){window.appData=w,window.FlickletApp&&window.FlickletApp.updateUI(),e(u),window.renderHomeRails&&window.renderHomeRails(),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"adapterRemove-fallback",action:"remove",itemId:n,list:u}})),showToast("error","Remove Failed","Failed to remove item. Please try again.")}},window.startDailyCountdown=function e(){const t=document.getElementById("flickwordCountdown");if(!t)return;const i=new Date,a=new Date(i);a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const n=a-i,o=Math.floor(n/36e5),s=Math.floor(n%36e5/6e4);t.textContent=`${o}h ${s}m`,setTimeout(e,6e4)},window.updateFlickWordStats=function(){var e,t,i;const a=document.getElementById("flickwordTodayScore"),n=document.getElementById("flickwordBestStreak"),o=document.getElementById("flickwordGamesPlayed");a&&(a.textContent=(null==(e=appData.flickword)?void 0:e.todayScore)||0),n&&(n.textContent=(null==(t=appData.flickword)?void 0:t.bestStreak)||"-"),o&&(o.textContent=(null==(i=appData.flickword)?void 0:i.gamesPlayed)||0)},window.startFlickWordGame=function(){showNotification("FlickWord game starting soon! ðŸŽ®","success")},window.addScrollIndicators=function(e){if(!e||!e.classList.contains("list-container"))return;const t=()=>{const t=e.scrollLeft;e.scrollWidth>e.clientWidth?(e.classList.add("scrollable"),t>0?e.classList.add("scrollable-left"):e.classList.remove("scrollable-left")):e.classList.remove("scrollable","scrollable-left")};t(),e.addEventListener("scroll",t),window.addEventListener("resize",t)},window.renderStatsCard=function(){var e,t,i,a,n,o,s;if(!(null==(e=window.FLAGS)?void 0:e.statsEnabled))return;const d=document.getElementById("statsContent");if(d)try{const e=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),r=(null==(t=e.tv)?void 0:t.watching)||[],l=(null==(i=e.tv)?void 0:i.wishlist)||[],c=(null==(a=e.tv)?void 0:a.watched)||[],u=(null==(n=e.movies)?void 0:n.watching)||[],w=(null==(o=e.movies)?void 0:o.wishlist)||[],h=(null==(s=e.movies)?void 0:s.watched)||[],m=r.length+l.length+c.length,p=m+(u.length+w.length+h.length);d.innerHTML=`\n      <div class="stats-grid">\n        <div class="stat">\n          <div class="stat-number">${r.length+u.length}</div>\n          <div class="stat-label">Currently Watching</div>\n        </div>\n        <div class="stat">\n          <div class="stat-number">${l.length+w.length}</div>\n          <div class="stat-label">Want to Watch</div>\n        </div>\n        <div class="stat">\n          <div class="stat-number">${c.length+h.length}</div>\n          <div class="stat-label">Already Watched</div>\n        </div>\n        <div class="stat">\n          <div class="stat-number">${p}</div>\n          <div class="stat-label">Total Items</div>\n        </div>\n      </div>\n      <div class="card-surface" style="margin-top: 15px;">\n        <h5 class="heading-subtle">ðŸ“º TV Shows Breakdown</h5>\n        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">\n          <div><strong>${r.length}</strong> Watching</div>\n          <div><strong>${l.length}</strong> Want to Watch</div>\n          <div><strong>${c.length}</strong> Watched</div>\n        </div>\n        <h5 class="heading-subtle" style="margin: 10px 0;">ðŸŽ¬ Movies Breakdown</h5>\n        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;">\n          <div><strong>${u.length}</strong> Watching</div>\n          <div><strong>${w.length}</strong> Want to Watch</div>\n          <div><strong>${h.length}</strong> Watched</div>\n        </div>\n      </div>\n    `}catch(r){d.innerHTML='<div class="error">Failed to load stats</div>'}},window.renderProFeaturesList=function(){const e=document.getElementById("proFeaturesList");if(!e)return;const t=!!window.SettingsManager&&window.SettingsManager.isPro();e.innerHTML=`\n    <div class="pro-features">\n      <div class="pro-feature ${t?"unlocked":"locked"}">\n        <div class="pro-feature-icon">ðŸ””</div>\n        <div class="pro-feature-content">\n          <div class="pro-feature-title">Smart Notifications</div>\n          ${t?'<div class="pro-feature-desc">Get notified exactly when you want - set custom lead times for new episodes, choose which lists to monitor, and never miss your favorite shows again.</div>':""}\n        </div>\n        <div class="pro-feature-status">${t?"âœ…":"ðŸ”’"}</div>\n      </div>\n      <div class="pro-feature ${t?"unlocked":"locked"}">\n        <div class="pro-feature-icon">ðŸ“Š</div>\n        <div class="pro-feature-content">\n          <div class="pro-feature-title">Your Viewing Journey</div>\n          ${t?'<div class="pro-feature-desc">Discover your watching habits with beautiful charts showing your favorite genres, binge patterns, and viewing trends over time.</div>':""}\n        </div>\n        <div class="pro-feature-status">${t?"âœ…":"ðŸ”’"}</div>\n      </div>\n      <div class="pro-feature ${t?"unlocked":"locked"}">\n        <div class="pro-feature-icon">ðŸŽ¨</div>\n        <div class="pro-feature-content">\n          <div class="pro-feature-title">Advanced Customization</div>\n          ${t?'<div class="pro-feature-desc">Unlock premium color schemes, custom accent colors, and advanced layout options to create your perfect viewing experience.</div>':""}\n        </div>\n        <div class="pro-feature-status">${t?"âœ…":"ðŸ”’"}</div>\n      </div>\n      <div class="pro-feature ${t?"unlocked":"locked"}">\n        <div class="pro-feature-icon">ðŸ‘¥</div>\n        <div class="pro-feature-content">\n          <div class="pro-feature-title">Social Features</div>\n          ${t?'<div class="pro-feature-desc">Connect with friends, compare your taste, share recommendations, and discover what your social circle is watching. See who has similar viewing habits!</div>':""}\n        </div>\n        <div class="pro-feature-status">${t?"âœ…":"ðŸ”’"}</div>\n      </div>\n      <div class="pro-feature ${t?"unlocked":"locked"}">\n        <div class="pro-feature-icon">âš¡</div>\n        <div class="pro-feature-content">\n          <div class="pro-feature-title">VIP Support</div>\n          ${t?'<div class="pro-feature-desc">Get help when you need it with priority support. Our team responds faster to Pro users and provides personalized assistance for any questions or issues.</div>':""}\n        </div>\n        <div class="pro-feature-status">${t?"âœ…":"ðŸ”’"}</div>\n      </div>\n    </div>\n  `},window.loadUpcomingEpisodes=function(){var e,t,i;if(!(null==(e=window.FLAGS)?void 0:e.upcomingEpisodesEnabled)){const e=document.getElementById("upcomingEpisodes");return void(e&&(e.style.display="none"))}const a=document.getElementById("upcomingEpisodes"),n=document.getElementById("upcomingEpisodesList");if(a&&n)try{const e=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),o=(null==(t=e.tv)?void 0:t.watching)||[],s=(null==(i=e.movies)?void 0:i.watching)||[],r=[...o,...s],d=new Date,l=new Date(d.getTime()+6048e5),c=[];if(r.forEach(e=>{var t,i;if(!e||!e.name&&!e.original_name)return;const a=e.name||e.original_name||"Unknown Show",n=e.nextEpisodeAirDate||e.next_air_date||(null==(t=e.next_episode_to_air)?void 0:t.air_date)||(null==(i=e.next_episode_to_air)?void 0:i.first_air_date);if(!n)return;const o=new Date(n);o>=d&&o<=l&&c.push({showName:a,airDate:o,episodeInfo:e.nextEpisodeName||"New Episode"})}),c.sort((e,t)=>e.airDate-t.airDate),0===c.length)n.innerHTML='<div class="no-episodes">No upcoming episodes this week.</div>';else{const e=c.slice(0,8);n.innerHTML=e.map(e=>`\n        <div class="upcoming-episode-item">\n          <div class="show-info">\n            <div class="show-name">${e.showName}</div>\n            <div class="episode-info">${e.episodeInfo}</div>\n          </div>\n          <div class="air-date">\n            ${e.airDate.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}\n          </div>\n        </div>\n      `).join("")}a.style.display="block"}catch(r){a.style.display="none"}},window.CounterBootstrap={observers:new Map,updateThrottle:new Map,lastUpdate:new Map,armed:!1,UNIFIED_CARD_SELECTOR:"[data-item-id][data-list-type]",EXCLUSION_SELECTORS:[".unified-card-poster-skeleton",".unified-card-poster-placeholder",".skeleton",".placeholder",".empty",".ad",".hidden",'[aria-hidden="true"]',"[hidden]"],init(){this.initialized||(this.armed=!0,this.setupGlobalListeners(),this.scanAndAttach()&&(this.initialized=!0))},scanAndAttach(){const e=document.querySelectorAll("[data-count-for]");let t=!0;return e.forEach(e=>{const i=e.getAttribute("data-count-for"),a=document.querySelector(i);if(!a)return void(t=!1);const n=`${e.id}-${a.id}`;this.observers.has(n)||(this.attachObserver(e,a),this.updateCount(e,a))}),t},attachObserver(e,t){const i=`${e.id}-${t.id}`;this.observers.has(i)&&this.observers.get(i).disconnect();const a=new MutationObserver(i=>{this.throttledUpdate(e,t)});a.observe(t,{childList:!0,subtree:!0,attributes:!1}),this.observers.set(i,a)},throttledUpdate(e,t){const i=`${e.id}-${t.id}`,a=Date.now();if(this.lastUpdate.has(i)&&a-this.lastUpdate.get(i)<100)return;this.updateThrottle.has(i)&&clearTimeout(this.updateThrottle.get(i));const n=setTimeout(()=>{this.updateCount(e,t),this.updateThrottle.delete(i),this.lastUpdate.set(i,Date.now())},75);this.updateThrottle.set(i,n)},directRecount(){this.observers.forEach((e,t)=>{const[i,a]=t.split("-"),n=document.getElementById(i),o=document.getElementById(a);n&&o&&this.updateCount(n,o)})},updateCount(e,t){try{let i=this.countVisibleCards(t);if(0===i){const a=this.getFallbackCount(e.id,t.id);a>0&&(i=a)}if((parseInt(e.textContent)||0)===i)return;e.textContent=i,(e.classList.contains("tab-badge")||e.classList.contains("badge"))&&this.applyBadgeStyling(e)}catch(r){}},getFallbackCount(e,t){if(window.WatchlistsAdapter&&window.WatchlistsAdapter._cache){const t=window.WatchlistsAdapter._cache,i={watchingBadge:"watchingIds",watchingCount:"watchingIds",wishlistBadge:"wishlistIds",wishlistCount:"wishlistIds",watchedBadge:"watchedIds",watchedCount:"watchedIds"}[e];if(i&&t[i])return t[i].length}if(!window.appData)return 0;const i=window.appData,a=i.tv||{},n=i.movies||{},o={watchingBadge:"watching",watchingCount:"watching",wishlistBadge:"wishlist",wishlistCount:"wishlist",watchedBadge:"watched",watchedCount:"watched"}[e];if(!o)return 0;const s=[...Array.isArray(a[o])?a[o]:[],...Array.isArray(n[o])?n[o]:[]],r=[],d=new Set;return s.forEach(e=>{const t=e.id||e.tmdb_id||e.tmdbId;t&&!d.has(t)&&(d.add(t),r.push(e))}),r.length},countVisibleCards(e){const t=e.querySelectorAll(this.UNIFIED_CARD_SELECTOR);let i=0;return t.forEach(e=>{this.isCardVisible(e)&&i++}),t.length,i},isCardVisible(e){const t=window.getComputedStyle(e);if("none"===t.display)return!1;if("hidden"===t.visibility)return!1;if(0===parseFloat(t.opacity))return!1;if(e.hasAttribute("hidden"))return!1;if(e.classList.contains("hidden"))return!1;if(e.classList.contains("is-hidden"))return!1;if(e.hasAttribute("aria-hidden")&&"true"===e.getAttribute("aria-hidden"))return!1;const i=e.closest(".tab-section");if(i&&!i.classList.contains("active"))return!1;for(const n of this.EXCLUSION_SELECTORS)if(e.matches(n))return!1;const a=e.style;return"none"!==a.display&&"hidden"!==a.visibility&&"0"!==a.opacity},setupGlobalListeners(){document.addEventListener("cards:changed",()=>{this.directRecount()}),document.addEventListener("app:lists-rendered",()=>{!this.initialized&&this.armed?this.scanAndAttach()&&(this.initialized=!0):this.directRecount()}),document.addEventListener("tab:switched",()=>{this.directRecount()}),document.addEventListener("language:changed",()=>{this.directRecount()})},applyBadgeStyling(e){e.classList.add("tab-badge","tab-badge--visible")},updateAllCounts(){this.observers.forEach((e,t)=>{const[i,a]=t.split("-"),n=document.getElementById(i),o=document.getElementById(a);n&&o&&this.updateCount(n,o)})},destroy(){this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.updateThrottle.forEach(e=>clearTimeout(e)),this.updateThrottle.clear()}},window.FlickletApp={}}catch(r){}}}(),function(){const e=async()=>{let e=0;for(;!window.DataOperations&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(!window.DataOperations)throw new Error("DataOperations not available after timeout");return window.DataOperations};async function t(e,t){try{const i=["watching","wishlist","watched"];for(const a of i)if(await t.hasItem(e,a))return a;return null}catch(i){return i.message,null}}function i(){var e,t;try{"function"==typeof window.updateTabCounts&&window.updateTabCounts(),window.FlickletApp&&"function"==typeof window.FlickletApp.updateUI&&window.FlickletApp.updateUI();const i=(null==(t=null==(e=window.firebaseAuth)?void 0:e.currentUser)?void 0:t.uid)||null;if(window.WatchlistsAdapterV2&&i){const e=()=>{"function"==typeof window.renderHomeRails&&window.renderHomeRails(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview(),document.removeEventListener("watchlists:hydrated",e)};window.WatchlistsAdapterV2._cache&&window.WatchlistsAdapterV2._lastUid===i?("function"==typeof window.renderHomeRails&&window.renderHomeRails(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview()):document.addEventListener("watchlists:hydrated",e)}else"function"==typeof window.renderHomeRails&&window.renderHomeRails(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview();document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"functions-v2"}}))}catch(i){i.message}}window.addToListFromCacheV2=async function(t,a,n={}){try{if(!t)throw new Error("Item ID is required");if(!a||!["watching","wishlist","watched"].includes(a))throw new Error("Invalid list name");const s=await e();if(await s.hasItem(t,a))return"function"==typeof window.showNotification?window.showNotification(`Already in ${a}`,"info"):window.NotificationSystem&&window.NotificationSystem.show(`Already in ${a}`,"info"),i(),!0;let r=n.itemData||null;if(!r){const e=document.getElementById("searchResultsList")||document.getElementById("searchResultsGrid")||document.getElementById("searchResults")||document;if(e){const i=e.querySelector(`[data-id="${t}"]`);if(i&&i.dataset.itemData)try{r=JSON.parse(i.dataset.itemData)}catch(o){}}}if(!r&&(r=await async function(e){var t;try{const a=document.getElementById("searchResultsList")||document.getElementById("searchResultsGrid")||document.getElementById("searchResults")||document;if(a){const i=a.querySelector(`[data-id="${e}"]`);if(i){if(i.dataset.itemData)try{const e=JSON.parse(i.dataset.itemData);return e}catch(o){}const a=(null==(t=i.querySelector(".unified-card-title"))?void 0:t.textContent)||"Unknown",n=i.dataset.mediaType||"movie";return{id:Number(e),title:a,name:a,media_type:n}}}if(window.resolveTMDBItem)try{const t=await window.resolveTMDBItem(e);if(t&&t.id)return{id:Number(e),title:t.title||t.name||`Item ${e}`,name:t.name||t.title||`Item ${e}`,media_type:t.media_type,poster_path:t.poster_path,release_date:t.release_date||t.first_air_date,vote_average:t.vote_average,overview:t.overview}}catch(i){i.message}return{id:Number(e),title:`Item ${e}`,name:`Item ${e}`,media_type:"movie"}}catch(i){return i.message,null}}(t),!r))throw new Error("Could not retrieve item data");if(await s.addItem(t,a,r))return"function"==typeof window.showNotification?window.showNotification(`Added to ${a}`,"success"):window.NotificationSystem&&window.NotificationSystem.show(`Added to ${a}`,"success"),function(e){try{const t=document.getElementById("searchResultsList")||document.getElementById("searchResultsGrid")||document.getElementById("searchResults");if(t){const i=t.querySelector(`[data-id="${e}"]`);if(i){i.remove();const e=document.getElementById("resultsCount");if(e){const i=t.querySelectorAll("[data-id]").length;e.textContent=String(i)}}}}catch(t){t.message}}(t),i(),!0;throw new Error("Failed to add item to list")}catch(s){return s.message,"function"==typeof window.showNotification?window.showNotification("Failed to add item","error"):window.NotificationSystem&&window.NotificationSystem.show("Failed to add item","error"),!1}},window.moveItemV2=async function(a,n){try{if(!a)throw new Error("Item ID is required");if(!n||!["watching","wishlist","watched"].includes(n))throw new Error("Invalid destination list");const o=await e(),s=await t(a,o);if(!s)throw new Error("Item not found in any list");if(s===n)return!0;if(await o.moveItem(a,s,n))return"function"==typeof window.showNotification?window.showNotification(`Moved to ${n}`,"success"):window.NotificationSystem&&window.NotificationSystem.show(`Moved to ${n}`,"success"),i(),!0;throw new Error("Failed to move item")}catch(o){return o.message,"function"==typeof window.showNotification?window.showNotification("Failed to move item","error"):window.NotificationSystem&&window.NotificationSystem.show("Failed to move item","error"),!1}},window.removeItemFromCurrentListV2=async function(a){try{if(!a)throw new Error("Item ID is required");const n=await e(),o=await t(a,n);if(!o)throw new Error("Item not found in any list");if(await n.removeItem(a,o))return"function"==typeof window.showNotification?window.showNotification("Item removed","success"):window.NotificationSystem&&window.NotificationSystem.show("Item removed","success"),i(),!0;throw new Error("Failed to remove item")}catch(n){return n.message,"function"==typeof window.showNotification?window.showNotification("Failed to remove item","error"):window.NotificationSystem&&window.NotificationSystem.show("Failed to remove item","error"),!1}},window.addToListFromCache=window.addToListFromCacheV2,window.moveItem=window.moveItemV2,window.removeItemFromCurrentList=window.removeItemFromCurrentListV2}();const w={},h=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),i=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in w)return;w[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,i&&n.setAttribute("nonce",i),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};window.FlickletDebug=window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error,log:console.log},window.__useLegacyTabs=!1,function(){function e(e){return"function"==typeof window.t?window.t(e):e}const t={isAuthenticated:!1,displayName:"",alias:"",avatarUrl:"",email:"",update(e){var t,i,a,n,o,s,r;if(this.isAuthenticated=!!e,e)if(window.__USERNAME_JUST_SAVED__)this.displayName=window.__USERNAME_JUST_SAVED__,this.alias=window.__USERNAME_JUST_SAVED__,this.avatarUrl=e.photoURL||"",this.email=e.email||"";else{const d=(null==(i=null==(t=window.appData)?void 0:t.settings)?void 0:i.displayName)||(null==(n=null==(a=window.appData)?void 0:a.settings)?void 0:n.username)||(null==(o=window.SettingsManager)?void 0:o.get("displayName"));this.displayName=d||e.displayName||(null==(s=e.email)?void 0:s.split("@")[0])||"User",this.alias=d||e.displayName||(null==(r=e.email)?void 0:r.split("@")[0])||"User",this.avatarUrl=e.photoURL||"",this.email=e.email||""}else this.displayName="",this.alias="",this.avatarUrl="",this.email="";this.notifyUI()},updateDisplayName(e){this.displayName=e,this.alias=e,this.notifyUI()},notifyUI(){const e=document.getElementById("accountButton"),t=document.getElementById("accountButtonLabel");e&&t&&(t.textContent=this.isAuthenticated?`ðŸ‘¤ ${this.displayName}`:"Sign In",e.title=this.isAuthenticated?`Signed in as ${this.email}. Click to sign out.`:"Click to sign in");const i=document.getElementById("leftSnark");if(i&&this.isAuthenticated){const e=[`${this.alias}, your couch has a permanent dent`,`${this.alias}, ready to binge?`,`${this.alias}, what's next on your list?`,`${this.alias}, time to discover something new`,`${this.alias}, your watchlist is calling`];i.textContent=e[Math.floor(Math.random()*e.length)]}else i&&(i.textContent="");document.querySelectorAll("[data-requires-auth]").forEach(e=>{this.isAuthenticated?(e.style.display="",e.removeAttribute("disabled")):(e.style.display="none",e.setAttribute("disabled","true"))})}},i={currentUser:null,currentTab:"home",genresLoaded:!1,authInitialized:!1,firebaseInitialized:!1,async init(){(window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error}).info("ðŸš€ [FlickletApp] init");try{"function"==typeof loadAppData&&loadAppData(),this.applyTheme(),this.applyLanguage(),window.LanguageManager&&"function"==typeof window.LanguageManager.reinitialize&&window.LanguageManager.reinitialize(),this.initializeFABIcons(),window.CounterBootstrap&&window.CounterBootstrap.init(),window.installCardActionHandlers&&window.installCardActionHandlers({addToList:(e,t,i)=>{var a;return null==(a=window.addToListFromCacheV2)?void 0:a.call(window,e,t,i)},removeFromList:(e,t,i)=>{var a;return null==(a=window.removeItemFromCurrentList)?void 0:a.call(window,e,t,i)},markWatched:(e,t)=>{var i;return null==(i=window.addToListFromCacheV2)?void 0:i.call(window,e,"watched",t)}}),this.initFirebase(),this.setupAuthButtonSync(),await this.waitForDataInit(),this.setupEventListeners(),this.setupSettingsTabs(),this.switchToTab("home"),this.updateUI(),this.dockFABsToActiveTab(),setTimeout(()=>{document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"app-initialization"}})),document.dispatchEvent(new CustomEvent("app:lists-rendered",{detail:{source:"initialization"}})),this.dockFABsToActiveTab()},500),setTimeout(()=>{var e,t,i;null==(e=this.initializeFlickWord)||e.call(this),null==(t=this.initializeFlickWordModal)||t.call(this),null==(i=this.initializeTriviaModal)||i.call(this)},150),this.initializeGenres(),FlickletDebug.info("âœ… [FlickletApp] ready")}catch(e){FlickletDebug.error("ðŸ’¥ [FlickletApp] init failed:",e)}},waitForDataInit:async()=>new Promise(e=>{if(window.appData&&"object"==typeof window.appData)return void e();const t=setTimeout(()=>{e()},2e3);window.addEventListener("app:data:ready",()=>{clearTimeout(t),e()},{once:!0})}),applyTheme(){var e;const t=localStorage.getItem("flicklet-theme")||(null==(e=null==appData?void 0:appData.settings)?void 0:e.theme)||"light";document.documentElement.setAttribute("data-theme",t),document.body.classList.toggle("dark-mode","dark"===t),appData.settings.theme=t,localStorage.setItem("flicklet-theme",t)},applyLanguage(){var e;const t=(null==(e=null==appData?void 0:appData.settings)?void 0:e.lang)||"en";try{"function"==typeof applyTranslations&&applyTranslations(t)}catch(i){FlickletDebug.warn("i18n not available yet, continuing.")}},initFirebase(){!window.__NO_FIREBASE__&&window.firebaseApp&&(this.firebaseInitialized?FlickletDebug.info("âš ï¸ Firebase already initialized, skipping"):(FlickletDebug.info("ðŸ”¥ Initializing Firebase..."),this.firebaseInitialized=!0,this.clearExistingUsernameModals(),this.waitForFirebaseReady().then(()=>{FlickletDebug.info("âœ… Firebase available, setting up auth listener"),this.setupAuthListener()}).catch(()=>{FlickletDebug.error("âŒ Firebase initialization timeout after 8 seconds"),this.setupFallbackAuth()})))},waitForFirebaseReady:()=>new Promise((e,t)=>{try{if(!0===window.firebaseInitialized||"undefined"!=typeof firebase&&firebase.apps&&firebase.apps.length>0)return void e(!0)}catch(n){}const i=setTimeout(()=>{t(new Error("Firebase initialization timeout"))},8e3),a=()=>{clearTimeout(i),window.removeEventListener("firebase-ready",a),window.firebaseInitialized?e(!0):t(new Error("Firebase initialization failed"))};window.addEventListener("firebase-ready",a,{once:!0})}),setupFallbackAuth(){FlickletDebug.info("ðŸ”„ Setting up fallback authentication system"),this.currentUser=null,this.firebaseInitialized=!1;const t=document.getElementById("accountBtn");t&&(t.textContent=`ðŸ”’ ${e("offline_mode")||"Offline Mode"}`,t.title=e("auth_unavailable_offline")||"Authentication unavailable - working in offline mode"),this.showNotification(e("working_offline_mode")||"Working in offline mode - data will be stored locally only","info")},setupAuthListener(){try{const e=firebase.auth().currentUser;FlickletDebug.info("ðŸ‘¤ Current user on init:",e?`User: ${e.email}`:"No user"),this.currentUser=e,"undefined"!=typeof window&&(window.currentUser=e),t.update(e),this.authInitialized=!0,e&&this.processUserSignIn(e)}catch(e){FlickletDebug.error("âŒ Auth listener setup failed:",e)}},setupAuthButtonSync(){!function(){const e=document.getElementById("signIn");var t;if(e)if(e.addEventListener("click",async()=>{if(!window.firebase||!firebase.auth)return;const e=firebase.auth();e.currentUser?e.signOut().catch(e=>{}):n()}),window.firebase&&firebase.auth){const o=firebase.auth();o.currentUser?(t=o.currentUser.displayName||o.currentUser.email||"",e.textContent=t||"ðŸ‘¤ Sign Out",e.dataset.state="signed-in",e.title=t?`Signed in as ${t}`:"Signed in",a(!0)):(i(),function(){var e,t;if("1"===sessionStorage.getItem("firstSignInPromptShown"))return;sessionStorage.setItem("firstSignInPromptShown","1");const i=document.createElement("div");i.innerHTML='\n            <div id="signin-info-modal" style="position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);z-index:9999">\n              <div style="background:#fff;padding:16px 20px;border-radius:10px;max-width:420px;width:92%;box-shadow:0 10px 30px rgba(0,0,0,.2)">\n                <h3 style="margin:0 0 8px 0;">Save your shows</h3>\n                <p style="margin:0 0 14px 0;">Sign in to keep your watchlists and pick up on any device.</p>\n                <div style="display:flex;gap:8px;justify-content:flex-end">\n                  <button id="signin-skip" class="btn btn--sm">Not now</button>\n                  <button id="signin-go" class="btn btn--sm">Sign in</button>\n                </div>\n              </div>\n            </div>',document.body.appendChild(i),null==(e=document.getElementById("signin-skip"))||e.addEventListener("click",()=>i.remove()),null==(t=document.getElementById("signin-go"))||t.addEventListener("click",()=>{i.remove(),n()})}())}else i();function i(){e.textContent="ðŸ‘¤ Sign In",e.dataset.state="signed-out",e.title="Sign in",a(!1)}function a(t){var i;let a=document.getElementById("signOutHint");a||(a=document.createElement("div"),a.id="signOutHint",a.style.cssText="font-size:12px;opacity:.8;margin-top:2px;",null==(i=e.parentElement)||i.insertBefore(a,e)),a.textContent=t?"Sign out":"",a.style.display=t?"":"none"}function n(){if(!window.firebase||!firebase.auth)return;const e=firebase.auth(),t=new firebase.auth.GoogleAuthProvider;e.signInWithPopup(t).catch(e=>{})}}()},async processUserSignIn(t){var i,a,n;if(!window.__PROCESS_USER_SIGNIN_LOCK__){window.__PROCESS_USER_SIGNIN_LOCK__=!0;try{FlickletDebug.info("âœ… User signed in, processing...");const s=(await window.ensureUser()).uid;document.querySelectorAll('.modal-backdrop[data-modal="login"]').forEach(e=>e.remove()),window.__currentAuthModal=null,FlickletDebug.info("ðŸ”„ Creating user database entry...");try{const e=firebase.firestore();await e.collection("users").doc(s).set({profile:{email:t.email||"",displayName:t.displayName||"",photoURL:t.photoURL||""},lastLoginAt:firebase.firestore.FieldValue.serverTimestamp()},{merge:!0}),FlickletDebug.info("âœ… User database entry created successfully")}catch(o){FlickletDebug.error("âŒ Failed to create user database entry:",o)}FlickletDebug.info("ðŸ”„ Loading user data from Firebase cloud storage...");try{if("function"==typeof(null==(i=window.DataInit)?void 0:i.trySync)){if(await window.DataInit.trySync("user-sign-in"),FlickletDebug.info("âœ… User data loaded from cloud successfully"),"function"==typeof window.updateUI&&(FlickletDebug.info("ðŸ”„ Refreshing UI after cloud data load..."),window.updateUI()),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"cloud-data-load"}})),FlickletDebug.info("ðŸ”¢ Emitted cards:changed event after cloud data load..."),"function"==typeof(null==(a=window.FlickletApp)?void 0:a.updateTabContent)){const e=(null==(n=window.FlickletApp)?void 0:n.currentTab)||"home";FlickletDebug.info("ðŸ”„ Refreshing current tab content:",e),window.FlickletApp.updateTabContent(e)}}else FlickletDebug.warn("âš ï¸ DataInit.trySync function not available - user data not loaded from cloud")}catch(o){FlickletDebug.error("âŒ Failed to load user data from cloud:",o)}this.setAccountButtonLabel(t.displayName),setTimeout(()=>{this.updateAccountButton()},100);try{const e=await this.readSettings(s);let i=(e.username||"").trim();i&&(window.appData=window.appData||{},window.appData.settings={...window.appData.settings||{},username:i});const a=!!e.usernamePrompted;i||a||(i=await this.promptForUsernameOnce(t.displayName),i&&i.trim()?(await this.writeSettings(s,{username:i.trim(),usernamePrompted:!0}),window.appData=window.appData||{},window.appData.settings={...window.appData.settings||{},username:i.trim()}):await this.writeSettings(s,{usernamePrompted:!0})),this.setLeftSnark(i?this.makeSnark(i):""),await this.runMigration(),await this.cleanupStrayField(),await this.migrateLegacyNameFields(s)}catch(o){this.showNotification(e("error_loading_user_data"),"error")}}catch(o){this.showNotification(e("error_processing_sign_in"),"error")}finally{window.__PROCESS_USER_SIGNIN_LOCK__=!1}}},clearUserData(){this.currentUser=null,window.currentUser=null;try{localStorage.removeItem("flicklet-data"),localStorage.removeItem("tvMovieTrackerData"),localStorage.removeItem("flicklet_lists"),localStorage.removeItem("flicklet_notes"),localStorage.removeItem("flicklet_prefs"),localStorage.removeItem("flicklet-language"),localStorage.removeItem("flicklet-theme"),localStorage.removeItem("flicklet:pro"),localStorage.removeItem("flicklet:episodeTracking:enabled"),localStorage.removeItem("flicklet:episodeTracking:series")}catch(i){}window.appData&&(window.appData.tv={watching:[],wishlist:[],watched:[]},window.appData.movies={watching:[],wishlist:[],watched:[]},window.appData.settings={pro:!1,isPro:!1,episodeTracking:!1,username:"",displayName:"",lang:"en",theme:"light"},window.appData.searchCache=[],window.appData.activeTagFilters=new Set),Object.keys(window).forEach(e=>{e.startsWith("render_")&&(window[e]=!1)}),window.UserViewModel&&window.UserViewModel.update(null);const e=document.getElementById("leftSnark"),t=document.getElementById("headerGreeting");e&&(e.textContent="Welcome back!"),t&&(t.style.display="",t.textContent="Ready to discover your next favorite show?"),"function"==typeof window.cleanupDuplicateCards&&window.cleanupDuplicateCards(),"function"==typeof window.updateUI&&window.updateUI()},async readSettings(e){try{if("function"!=typeof window.ensureUser)throw new Error("ensureUser function not available");const e=(await window.ensureUser()).uid,t=firebase.firestore().collection("users").doc(e).collection("settings").doc("app"),i=await t.get();if(i.exists){const t=i.data();return document.dispatchEvent(new CustomEvent("userDataLoaded",{detail:{uid:e,data:t}})),t}{const e={theme:"light",lang:"en",createdAt:Date.now()};return await t.set(e,{merge:!0}),e}}catch(t){return{}}},async writeSettings(e,t){try{if("function"!=typeof window.ensureUser)throw new Error("ensureUser function not available");const e=(await window.ensureUser()).uid,i=firebase.firestore().collection("users").doc(e).collection("settings").doc("app");await i.set({...t,updatedAt:Date.now()},{merge:!0})}catch(i){throw i}},async migrateLegacyNameFields(e){const t=(await window.ensureUser()).uid,i=await this.readSettings(t);i&&i.displayName&&!i.username&&await this.writeSettings(t,{username:i.displayName});try{const e=firebase.firestore().collection("users").doc(t).collection("settings").doc("app");await e.set({displayName:null},{merge:!0})}catch(a){}},async handlePostAuthSuccess(e){window.AUTH_MANAGER&&window.AUTH_MANAGER._authModalManager&&window.AUTH_MANAGER._authModalManager.isModalOpen()&&window.AUTH_MANAGER._authModalManager.close();try{const t=e.uid,i=window.firebaseDb||firebase.firestore();await this.createOrUpdateUserDoc(e),await this.cloudFirstLoad(i,t)||(await this.seedCloudIfNeeded(i,t),window.__cloudHydrated=!0,window.saveAppData("flicklet-data",window.pruneWatchlistsShape(window.appData||{}))),await this.handleUserIdentity(e),this.updateUI()}catch(t){}},async createOrUpdateUserDoc(e){try{const t=e.uid,i={uid:t,email:e.email,displayName:e.displayName,photoURL:e.photoURL,lastLoginAt:(new Date).toISOString(),createdAt:(new Date).toISOString()};window.firebaseDb&&await window.firebaseDb.collection("users").doc(t).set(i,{merge:!0})}catch(t){}},async cloudFirstLoad(e,t){try{const i=e.doc(`users/${t}`),a=await i.get();if(a.exists){const e=window.pruneWatchlistsShape({...a.data()||{}});return window.appData={...window.appData||{},...e},window.saveAppData("flicklet-data",window.appData),window.__cloudHydrated=!0,!0}return!1}catch(i){return!1}},async seedCloudIfNeeded(e,t){var i,a;try{const n={...window.pruneWatchlistsShape(window.appData||{}),uid:t,lastUpdated:null==(a=(i=firebase.firestore.FieldValue).serverTimestamp)?void 0:a.call(i)},o=JSON.stringify(n);return!(window.computeBytes(o)>921600||(await e.doc(`users/${t}`).set(n,{merge:!0}),0))}catch(n){return!1}},async loadAndMergeCloudData(e){try{if(window.firebaseDb){const t=await window.firebaseDb.collection("users").doc(e).get();if(t.exists){const i=t.data();i.watchlists&&(i.watchlists.tv&&(i.watchlists.tv.watching&&(window.appData.tv.watching=[...new Set([...window.appData.tv.watching,...i.watchlists.tv.watching])]),i.watchlists.tv.wishlist&&(window.appData.tv.wishlist=[...new Set([...window.appData.tv.wishlist,...i.watchlists.tv.wishlist])]),i.watchlists.tv.watched&&(window.appData.tv.watched=[...new Set([...window.appData.tv.watched,...i.watchlists.tv.watched])])),i.watchlists.movies&&(i.watchlists.movies.watching&&(window.appData.movies.watching=[...new Set([...window.appData.movies.watching,...i.watchlists.movies.watching])]),i.watchlists.movies.wishlist&&(window.appData.movies.wishlist=[...new Set([...window.appData.movies.wishlist,...i.watchlists.movies.wishlist])]),i.watchlists.movies.watched&&(window.appData.movies.watched=[...new Set([...window.appData.movies.watched,...i.watchlists.movies.watched])])),"function"==typeof window.saveAppData&&window.saveAppData(),document.dispatchEvent(new CustomEvent("firebaseDataLoaded",{detail:{uid:e,watchlists:i.watchlists}})))}}}catch(t){}},async handleUserIdentity(e){var t;try{const i=e.uid,a=await this.getUsername(i);if(a)this.renderSnark(a);else{const a=e.displayName||(null==(t=e.email)?void 0:t.split("@")[0])||"User",n=await this.promptForUsernameOnce(a);n&&(await this.setUsername(i,n),this.renderSnark(n))}}catch(i){}},async getUsername(e){try{const t=((await this.readSettings(e)).username||"").trim();return t}catch(t){return null}},async setUsername(e,t){try{const i=t.trim();return await this.writeSettings(e,{username:i,displayName:i,usernamePrompted:!0}),window.appData&&(window.appData.settings.username=i,window.appData.settings.displayName=i,"function"==typeof window.saveAppData&&window.saveAppData()),!0}catch(i){return!1}},renderSnark(e){const t=document.getElementById("leftSnark"),i=document.getElementById("headerGreeting");if(t&&e){const a=this.makeSnark(e).replace(e,`<strong>${e}</strong>`);t.innerHTML=a,t.style.textAlign="left",t.style.zIndex="auto",t.style.pointerEvents="none",i&&(i.style.display="none")}else t&&!e&&i&&(i.style.display="")},clearExistingUsernameModals(){document.querySelectorAll('.modal-backdrop[data-modal="username-prompt-modal"]').forEach(e=>{e.remove()})},async promptForUsernameOnce(t=""){return document.querySelector('.modal-backdrop[data-modal="username"]')?null:(this._usernameModalPromise||(this._usernameModalPromise=new Promise(i=>{this.openModal("What do I call you?",`\n          <div style="min-width:320px; max-width:480px;">\n            <p style="margin:0 0 16px; color:#666; font-size:14px;">Choose a name to personalize your experience</p>\n            <input id="usernameInput" type="text" autocomplete="nickname" placeholder="Enter your name" value="${t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]))}" style="display:block;width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;margin-bottom:16px;font-size:16px;">\n            <div style="display:flex;gap:12px;justify-content:flex-end;">\n              <button id="uCancel" class="btn secondary" type="button" style="padding:8px 16px; border:1px solid #ddd; background:#f5f5f5; color:#333; border-radius:6px; cursor:pointer;">Skip</button>\n              <button id="uSave" class="btn primary" type="button" style="padding:8px 16px; background:#1976d2; color:white; border:none; border-radius:6px; cursor:pointer;">Save</button>\n            </div>\n          </div>\n        `,"username-modal");const a=document.querySelector('.modal-backdrop[data-testid="username-modal"]');a&&(a.setAttribute("data-modal","username"),a.addEventListener("click",e=>{e.target===a&&o(null)}));let n=!1;const o=e=>{n||(n=!0,this.closeModal(),document.querySelectorAll('.modal-backdrop[data-modal="username"]').forEach(e=>e.remove()),this._usernameModalPromise=null,i(e))};setTimeout(()=>{const t=document.getElementById("usernameInput"),i=document.getElementById("uSave"),a=document.getElementById("uCancel");a&&a.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),n||o(null)}),i&&(i.removeEventListener("click",i._clickHandler),i._clickHandler=e=>{var i;e.preventDefault(),e.stopPropagation();const a=(null==(i=null==t?void 0:t.value)?void 0:i.trim())||"";if(a.length<1){const e=document.querySelector("[data-auth-msg]");return void(e&&(e.textContent="Please enter a name or click Skip"))}if(a.length>50){const e=document.querySelector("[data-auth-msg]");return void(e&&(e.textContent="Name must be 50 characters or less"))}n||o(a)},i.addEventListener("click",i._clickHandler)),t&&t.addEventListener("keydown",i=>{if(i.key===e("enter_key")){i.preventDefault(),i.stopPropagation();const e=t.value||"";n||o(e.trim())}}),t&&(t.focus(),t.select());const s=document.querySelector('.modal-backdrop[data-modal="username"]');s&&s.addEventListener("click",e=>{e.target===s&&o(null)})},100)})),this._usernameModalPromise)},setAccountButtonLabel(t){var i,a,n;const o=document.getElementById("accountBtn");if(o){const s=(null==(i=this.currentUser)?void 0:i.email)||e("account"),r=s.split("@")[0];let d;d=(null==(n=null==(a=this.currentUser)?void 0:a.displayName)?void 0:n.trim())?this.currentUser.displayName.trim():(null==t?void 0:t.trim())?t.trim():r||e("user"),o.innerHTML=`ðŸ‘¤ ${d}`,o.title=`${e("signed_in_as")} ${s}. ${e("click_to_sign_out")}`}},setLeftSnark(e){const t=document.getElementById("leftSnark");t&&e&&(t.textContent=this.makeSnark(e))},makeSnark(e){const t=[`${e}, try not to binge 12 seasons tonight`,`${e}, your watchlist is judging you`,`${e}, remember to eat between episodes`,`${e}, sleep is also important`,`${e}, your couch has a permanent dent`];return t[Math.floor(Math.random()*t.length)]},openModal(e,t,i="generic-modal"){if("auth-modal"===i&&document.querySelector('.modal-backdrop[data-modal="login"]'))return null;const a=document.createElement("div");a.className="modal-backdrop",a.setAttribute("data-testid","modal-backdrop"),"auth-modal"===i&&(a.setAttribute("data-modal","login"),a.id=`auth-modal-${Date.now()}`,window.__currentAuthModal=a),a.style.cssText="\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        height: 100% !important;\n        background: rgba(0, 0, 0, 0.5) !important;\n        display: flex !important;\n        justify-content: center !important;\n        align-items: center !important;\n        z-index: 99999 !important;\n        pointer-events: auto !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n      ";const n="username-modal"!==i;a.innerHTML=`\n        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" data-testid="${i}" data-modal-body tabindex="-1" style="position:relative; z-index:100000; pointer-events: auto !important;">\n          <h3 id="modal-title">${e}</h3>\n          <div class="modal-body" style="pointer-events: auto !important;">${t}</div>\n          <div data-auth-msg aria-live="polite" style="min-height:1em; margin:8px 0; color:var(--color-error,#b00020); pointer-events: auto !important;"></div>\n          ${n?'\n          <div class="modal-actions" data-modal-actions style="pointer-events: auto !important;">\n            <button class="btn secondary" data-testid="modal-close" type="button" style="width: 120px !important; flex: 0 0 120px !important; font-size: 14px !important; padding: 12px 18px !important; height: 44px !important; min-height: 44px !important; pointer-events: auto !important;">Close</button>\n          </div>\n          ':""}\n        </div>\n      `,document.body.appendChild(a);const o=a.querySelector("[data-modal-body]");return o&&o.focus(),a.querySelector("[data-modal-body]")},closeModal(){document.querySelectorAll(".modal-backdrop").forEach(e=>{e&&e.parentNode&&e.remove()}),window.__currentAuthModal&&(window.__currentAuthModal=null)},async runMigration(){try{const e=(await window.ensureUser()).uid,t=firebase.firestore().collection("users").doc(e),i=await t.get();if(!i.exists)return void(this._migrationCompleted=!0);const a=i.data();let n=!1;const o={};a.settings&&""===a.settings.displayName&&(o["settings.displayName"]=firebase.firestore.FieldValue.delete(),n=!0),n&&await t.update(o),this._migrationCompleted=!0}catch(e){}},async cleanupStrayField(){try{const e=(await window.ensureUser()).uid,t=firebase.firestore().collection("users").doc(e),i=await t.get();if(!i.exists)return;const a=i.data();let n=!1;const o={};a.displayName&&(o.displayName=firebase.firestore.FieldValue.delete(),n=!0),n&&await t.update(o)}catch(e){}},showNotification(e,t="info"){const i=document.createElement("div");i.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${"error"===t?"#ff4444":"success"===t?"#44ff44":"#4444ff"};\n        color: white;\n        padding: 12px 20px;\n        border-radius: 8px;\n        z-index: 100000;\n        font-size: 14px;\n        max-width: 300px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      `,i.textContent=e,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},5e3)},updateAccountButton(){var t;const i=document.getElementById("accountBtn"),a=document.getElementById("accountHint");if(!i)return;if(!this.currentUser)return i.innerHTML=`ðŸ‘¤ <span data-i18n="sign_in_account">${e("sign_in_account")}</span>`,i.title=e("sign_in_account_title"),void(a&&(a.textContent=""));const n=this.currentUser.email||e("account"),o=n.split("@")[0];let s;s=(null==(t=this.currentUser.displayName)?void 0:t.trim())?this.currentUser.displayName.trim():o||e("user"),i.innerHTML=`ðŸ‘¤ ${s}`,i.title=`${e("signed_in_as")} ${n}. ${e("click_to_sign_out")}`,a&&(a.textContent=e("click_to_sign_out"))},updateUI(){document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"FlickletApp-updateUI"}}))},updateTabContent(e){if("function"==typeof window.updateTabContent)return window.updateTabContent(e)},switchToTab(e){if(window.__useLegacyTabs)return this._legacySwitchToTab(e);const t=`${e}Section`;if(!window.navEngine||"function"!=typeof window.navEngine.activate)return this._legacySwitchToTab(e);window.navEngine.activate(t)},_legacySwitchToTab(e){if(this.currentTab=e,document.dispatchEvent(new CustomEvent("tab:switched",{detail:{tab:e,previousTab:this.previousTab}})),this.previousTab=e,window.SearchModule&&"function"==typeof window.SearchModule.getSearchState)try{const e=window.SearchModule.getSearchState();(e.isSearching||e.hasResults)&&window.SearchModule.clearSearch()}catch(n){}if(window.SearchModule&&"function"==typeof window.SearchModule.getSearchState)try{if(!window.SearchModule.getSearchState().isSearching){const t=document.getElementById(`${e}Section`);t&&(t.style.display="")}}catch(n){}const t=["home","watching","wishlist","watched","discover","settings"];let i=!1;if(void 0!==this.isSearching)i=this.isSearching;else if(window.SearchModule&&"function"==typeof window.SearchModule.getSearchState)try{const e=window.SearchModule.getSearchState();i=e.isSearching}catch(n){}if(t.forEach(t=>{const a=document.getElementById(`${t}Tab`);a&&(i?(a.classList.remove("hidden"),a.classList.remove("is-active"),a.classList.remove("active")):t===e?(a.classList.remove("hidden"),a.classList.add("is-active"),a.classList.remove("active"),a.setAttribute("aria-selected","true"),a.setAttribute("tabindex","0")):(a.classList.remove("hidden"),a.classList.remove("is-active"),a.classList.remove("active"),a.setAttribute("aria-selected","false"),a.setAttribute("tabindex","-1")))}),t.forEach(t=>{const i=document.getElementById(`${t}Section`);i&&i.classList.toggle("active",t===e)}),window.VisibilityManager)window.VisibilityManager.manageHomeSections("home"===e,`tab-switch-${e}`).forEach(t=>{t.success?(window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error}).info(`âœ… ${t.sectionId} visibility: ${"home"===e?"visible":"hidden"}`):(window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error}).warn(`âš ï¸ Failed to update visibility for: ${t.sectionId}`)});else if(window.HomeSectionsConfig&&"function"==typeof window.HomeSectionsConfig.getSections){const t=window.HomeSectionsConfig.getSections("tab-switch"),i=window.HomeSectionsConfig.getSectionElements("tab-switch");t.forEach(t=>{const a=i[t];a?(a.style.display="home"===e?"block":"none",(window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error}).info(`âœ… ${t} visibility: ${"home"===e?"visible":"hidden"}`)):(window.FlickletDebug||{info:console.log,warn:console.warn,error:console.error}).warn(`âš ï¸ Home section not found: ${t}`)})}const a=document.querySelector(".top-search");if(a){const t=["settings"].includes(e);a.style.display=t?"none":""}"function"==typeof updateTabContent&&updateTabContent(e),this.updateUI(),window.CounterBootstrap&&"function"==typeof window.CounterBootstrap.directRecount&&setTimeout(()=>{window.CounterBootstrap.directRecount()},200),this.dockFABsToActiveTab()},toggleTheme(){if(!window.ThemeManager)return;const e=window.ThemeManager.theme;let t;t="system"===e?"dark"===window.ThemeManager.effectiveTheme?"light":"dark":"light"===e?"dark":"light",window.ThemeManager.theme=t;const i=document.getElementById("themeToggleFab");if(i){const e=i.querySelector("span");e&&(e.textContent="dark"===t?"â˜€ï¸":"ðŸŒ™")}this.showNotification(`Theme switched to ${t}`,"info")},toggleMardiGras(){if(!window.ThemeManager)return;const e="on"===window.ThemeManager.mardi?"off":"on";window.ThemeManager.mardi=e;const t=document.getElementById("mardiGrasFab");if(t){const i=t.querySelector("span");i&&(i.textContent="on"===e?"ðŸŽ‰":"ðŸŽ­")}this.showNotification("Mardi Gras mode "+("on"===e?"enabled":"disabled"),"info")},initializeFABIcons(){if(!window.ThemeManager)return void setTimeout(()=>this.initializeFABIcons(),100);const e=document.getElementById("themeToggleFab");if(e){const t=e.querySelector("span");if(t){const e=window.ThemeManager.effectiveTheme;t.textContent="dark"===e?"â˜€ï¸":"ðŸŒ™"}}const t=document.getElementById("mardiGrasFab");if(t){const e=t.querySelector("span");if(e){const t=window.ThemeManager.mardi;e.textContent="on"===t?"ðŸŽ‰":"ðŸŽ­"}}},setupEventListeners(){document.addEventListener("keydown",e=>{var t;(e.ctrlKey||e.metaKey)&&("k"===e.key?(e.preventDefault(),null==(t=document.getElementById("search"))||t.focus()):"t"===e.key&&(e.preventDefault(),toggleDarkMode()))}),document.addEventListener("click",e=>{const t=e.target.closest("[data-overflow-toggle]");if(t){const i=t.closest(".overflow"),a="true"===i.getAttribute("aria-expanded");return i.setAttribute("aria-expanded",!a),void e.preventDefault()}document.querySelectorAll('.overflow[aria-expanded="true"]').forEach(e=>e.setAttribute("aria-expanded","false"))}),document.addEventListener("click",e=>{const t=e.target.closest("[data-action]");if(!t)return;const i=t.dataset.action;if(!t.closest(".media-card"))switch(i){case"addFromCache":null==addToListFromCache||addToListFromCache(Number(t.dataset.id),t.dataset.list);break;case"move":null==moveItem||moveItem(Number(t.dataset.id),t.dataset.list);break;case"mark-watched":window.moveItem&&window.moveItem(Number(t.dataset.id),"watched");break;case"want-to-watch":window.moveItem&&window.moveItem(Number(t.dataset.id),"wishlist");break;case"start-watching":window.moveItem&&window.moveItem(Number(t.dataset.id),"watching");break;case"remove":null==removeItemFromCurrentList||removeItemFromCurrentList(Number(t.dataset.id));break;case"rate":null==setRating||setRating(Number(t.dataset.id),Number(t.dataset.rating));break;case"like":null==setLikeStatus||setLikeStatus(Number(t.dataset.id),"like");break;case"dislike":null==setLikeStatus||setLikeStatus(Number(t.dataset.id),"dislike");break;case"open":null==openTMDBLink||openTMDBLink(Number(t.dataset.id),t.dataset.mediaType);break;case"not-interested":case"track-episodes":case"share-lists":break;case"sign-in":window.showSignInModal&&window.showSignInModal();break;case"username-skip":e.preventDefault();break;case"add":const i=t.dataset.id||t.getAttribute("data-id"),a=t.dataset.list||t.getAttribute("data-list")||"wishlist";i&&"function"==typeof window.addToListFromCache&&window.addToListFromCache(Number(i),a);break;case"open-flickword":"function"==typeof window.openFlickWordModal&&window.openFlickWordModal();break;case"start-trivia":"function"==typeof window.openTriviaModal&&window.openTriviaModal();break;case"username-save":e.preventDefault(),e.stopPropagation();const n=document.getElementById("username-modal");if(n){const e=document.getElementById("username-input"),t=e?e.value.trim():"",i=n.parentElement;i&&i._usernameDone&&i._usernameDone(t||null)}break;case"toggle-theme":if("function"==typeof window.applyThemeToggle)window.applyThemeToggle();else{const e="light"===(document.documentElement.getAttribute("data-theme")||"light")?"dark":"light";document.documentElement.setAttribute("data-theme",e)}}}),document.addEventListener("click",e=>{e.target.closest("#btnSettings")&&(e.preventDefault(),e.stopPropagation(),this.switchToTab("settings")),e.target.closest("#themeToggleFab")&&(e.preventDefault(),e.stopPropagation(),this.toggleTheme()),e.target.closest("#mardiGrasFab")&&(e.preventDefault(),e.stopPropagation(),this.toggleMardiGras())});const e=document.getElementById("langToggle");e&&e.addEventListener("change",e=>{changeLanguage(e.target.value)})},showSignInModal(){this.firebaseInitialized?document.querySelector('.modal-backdrop[data-modal="login"]')||("function"==typeof window.openModal?this.createSignInModal():this.waitForOpenModal().then(()=>{this.createSignInModal()}).catch(()=>{this.showNotification("Sign-in system is not ready. Please refresh the page.","error")})):this.showNotification("Authentication is currently unavailable. Your data is stored locally and will sync when Firebase is available.","info")},waitForOpenModal:()=>new Promise((e,t)=>{const i=setTimeout(()=>{t(new Error("openModal function not available"))},5e3),a=()=>{clearTimeout(i),window.removeEventListener("modal-api-ready",a),e()};window.addEventListener("modal-api-ready",a)}),onSettingsReady(e){if(document.getElementById("settingsSection"))return void e();const t=new MutationObserver(i=>{i.forEach(i=>{"childList"===i.type&&document.getElementById("settingsSection")&&(t.disconnect(),e())})});t.observe(document.body,{childList:!0,subtree:!0})},createSignInModal(){try{window.openModal(e("sign_in_to_sync"),`\n            <p style="margin-bottom: 20px;">${e("sign_in_subtitle_text")}</p>\n            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:16px; justify-content:center; align-items:center; max-width:320px; margin:0 auto;">\n              <button id="googleBtn" type="button" class="btn" style="font-size:14px; padding:12px 18px; min-height:44px;">ðŸ”’ Google</button>\n              <button id="appleBtn" type="button" class="btn secondary" style="font-size:14px; padding:12px 18px; min-height:44px;">ðŸŽ Apple</button>\n              <button id="emailBtn" type="button" class="btn secondary" style="font-size:14px; padding:12px 18px; min-height:44px; grid-column: 1 / -1;">âœ‰ï¸ Email</button>\n            </div>\n          `,"auth-modal"),setTimeout(()=>{const t=document.getElementById("googleBtn"),i=document.getElementById("appleBtn"),a=document.getElementById("emailBtn");t&&t.addEventListener("click",()=>{window.FlickletAuth&&window.FlickletAuth.loginWithGoogle?window.FlickletAuth.loginWithGoogle():this.showNotification(e("google_signin_unavailable"),"error")}),i&&i.addEventListener("click",()=>{window.FlickletAuth&&window.FlickletAuth.loginWithApple?window.FlickletAuth.loginWithApple():this.showNotification(e("apple_signin_unavailable"),"error")}),a&&a.addEventListener("click",()=>{window.FlickletAuth&&window.FlickletAuth.loginWithEmail?window.FlickletAuth.loginWithEmail():this.showNotification(e("email_signin_unavailable"),"error")})},100)}catch(t){this.showNotification(e("unable_to_show_signin"),"error")}},showSignOutModal(){if(!this.currentUser)return;const t=this.currentUser.email||e("unknown"),i=this.currentUser.displayName||t.split("@")[0]||e("user");confirm(`${e("sign_out_confirmation")} ${i}?\n\n${e("email_label")}: ${t}`)&&this.signOut()},signOut(){"undefined"!=typeof firebase&&firebase.auth&&firebase.auth().signOut().then(()=>{null==showNotification||showNotification(e("signed_out_successfully"),"success")}).catch(t=>{null==showNotification||showNotification(e("sign_out_failed"),"error")})},initializeFlickWord(){document.getElementById("flickwordTile"),document.getElementById("triviaTile")},initializeFlickWordModal(){try{h(()=>import("./flickword-modal-CsvZZKGv.js"),[]).then(e=>{e.initializeFlickWordModal&&e.initializeFlickWordModal()}).catch(e=>{})}catch(e){}},initializeTriviaModal(){try{h(()=>import("./trivia-modal-ZXr7rOV2.js"),[]).then(e=>{e.initializeTriviaModal&&e.initializeTriviaModal()}).catch(e=>{})}catch(e){}},initializeGenres(){"function"==typeof window.loadGenres&&window.loadGenres()},debugAccountButton(){document.getElementById("accountBtn")},testSignInModal(){try{this.showSignInModal()}catch(e){}},debugAuthSystem(){},changeLanguage:e=>(document.dispatchEvent(new CustomEvent("language:changed",{detail:{newLang:e}})),window.LanguageManager?window.LanguageManager.changeLanguage(e):"function"==typeof window.changeLanguage?window.changeLanguage(e):void 0),async saveData(){var e,t;try{const i=(await window.ensureUser()).uid,a=firebase.firestore();FlickletDebug.info("ðŸ’¾ FlickletApp.saveData: Starting lean save to Firebase");const n=window.pruneWatchlistsShape(window.appData||{}),o={...n,uid:i,lastUpdated:null==(t=(e=firebase.firestore.FieldValue).serverTimestamp)?void 0:t.call(e)},s=JSON.stringify(o);if(window.computeBytes(s)>921600)return void window.saveAppData("flicklet-data",n);await a.doc(`users/${i}`).set(o,{merge:!0}),window.saveAppData("flicklet-data",o),FlickletDebug.info("âœ… FlickletApp.saveData: Lean data saved successfully to Firebase and localStorage")}catch(i){FlickletDebug.error("âŒ FlickletApp.saveData failed:",i);try{const e=window.pruneWatchlistsShape(window.appData||{});window.saveAppData("flicklet-data",e),FlickletDebug.info("ðŸ’¾ Fallback: Lean data saved to localStorage only")}catch(a){FlickletDebug.error("âŒ Even localStorage save failed:",a)}throw i}},setSearching(e){if(this.isSearching=e,e){const e=document.querySelector(".tab-container");e&&(e.style.display="flex")}},dockFABsToActiveTab(){function e(){const e=document.querySelector(".tab-section:not([hidden])");if(!e)return;const t=function(e){if(!e)return null;let t=e.querySelector(":scope > .fab-dock");return t||(t=document.createElement("div"),t.className="fab-dock",e.appendChild(t)),t}(e);if(!t)return;const i=document.querySelector(".fab-left");i&&!t.contains(i)&&(i.style.display="",t.appendChild(i));const a=document.querySelector(".fab-stack");a&&!t.contains(a)&&(a.style.display="flex",t.appendChild(a));const n=Array.from(document.querySelectorAll(".fab")).filter(e=>!e.closest(".fab-stack")&&!t.contains(e));if(n.length>0){let e=t.querySelector(".individual-fab-stack");e||(e=document.createElement("div"),e.className="fab-stack individual-fab-stack",t.appendChild(e)),n.forEach(t=>e.appendChild(t))}}e(),setTimeout(e,100),setTimeout(e,500),document.addEventListener("click",t=>{var i,a;(null==(a=(i=t.target).closest)?void 0:a.call(i,"[data-tab], .tab, .tab-link"))&&setTimeout(e,0)}),window.reDockFABs=e,document.addEventListener("tab:changed",e)},setupSettingsTabs(){const e=document.querySelectorAll(".settings-tabs button[data-target]");e.forEach(t=>{t.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const a=t.getAttribute("data-target");e.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),t.classList.add("active"),t.setAttribute("aria-selected","true"),document.querySelectorAll(".settings-section").forEach(e=>{e.classList.remove("active"),e.style.display="none"});const n=document.querySelector(a);n&&(n.classList.add("active"),n.style.display="block")})})}};window.FlickletApp=i,window.clearUserData=()=>i.clearUserData(),window.FlickletAppInstance=i,document.addEventListener("DOMContentLoaded",()=>{i.init().catch(e=>{})}),window.UserViewModel=t,window.initializeDisplayNameInput=function(){var e,t,i,a,n;const o=document.getElementById("displayNameInput");if(o){const s=(null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.displayName)||(null==(a=null==(i=window.appData)?void 0:i.settings)?void 0:a.username)||(null==(n=window.SettingsManager)?void 0:n.get("displayName"))||"";o.value=s}},document.addEventListener("app:data:ready",e=>{setTimeout(()=>{window.initializeDisplayNameInput(),window.FlickletApp&&window.FlickletApp.currentUser&&t.update(window.FlickletApp.currentUser)},100)}),window.ensureUser=async function(){window.firebase&&window.firebaseAuth||await new Promise(e=>{const t=()=>{window.firebase&&window.firebaseAuth?e():setTimeout(t,100)};t()});const e=window.firebaseAuth.currentUser;if(!e)throw new Error("No authenticated user");return e},window.showYesNoDialog=function(e){return new Promise(t=>{const i=document.createElement("div");i.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ";const a=document.createElement("div");a.style.cssText="\n        background: white;\n        padding: 24px;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        max-width: 400px;\n        text-align: center;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      ",a.innerHTML=`\n        <p style="margin: 0 0 20px 0; font-size: 16px; line-height: 1.4;">${e}</p>\n        <div style="display: flex; gap: 12px; justify-content: center;">\n          <button id="yesBtn" style="\n            background: #ff4c8d;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 500;\n          ">Yes</button>\n          <button id="noBtn" style="\n            background: #6c757d;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 500;\n          ">No</button>\n        </div>\n      `,i.appendChild(a),document.body.appendChild(i);const n=a.querySelector("#yesBtn"),o=a.querySelector("#noBtn");n.onclick=()=>{document.body.removeChild(i),t(!0)},o.onclick=()=>{document.body.removeChild(i),t(!1)};const s=e=>{"Escape"===e.key&&(document.body.removeChild(i),document.removeEventListener("keydown",s),t(!1))};document.addEventListener("keydown",s)})},window.saveDisplayName=async function(){var e,t;const i=document.getElementById("displayNameInput");if(!i)return;const a=i.value.trim();if(!a)return;const n=null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.username;if(!n||n===a||await window.showYesNoDialog(`This will change your username from "${n}" to "${a}". Are you sure you want to continue?`))try{window.appData||(window.appData={settings:{}}),window.appData.settings||(window.appData.settings={}),window.appData.settings.username=a,window.appData.settings.displayName=a,window.SettingsManager&&"function"==typeof window.SettingsManager.set&&(window.SettingsManager.set("displayName",a),window.SettingsManager.set("username",a));try{"function"==typeof window.saveAppData?window.saveAppData():localStorage.setItem("flicklet-data",JSON.stringify(window.appData))}catch(o){throw new Error("Failed to save to localStorage: "+o.message)}if(window.FlickletApp&&window.FlickletApp.currentUser)try{if(!(await window.FlickletApp.setUsername(window.FlickletApp.currentUser.uid,a)))throw new Error("setUsername method returned false")}catch(s){throw new Error("Failed to save to Firebase: "+s.message)}window.FlickletApp&&window.FlickletApp.currentUser&&(window.FlickletApp.currentUser.displayName=a),window.__USERNAME_JUST_SAVED__=a,setTimeout(()=>{delete window.__USERNAME_JUST_SAVED__},5e3);try{window.UserViewModel&&"function"==typeof window.UserViewModel.updateDisplayName&&window.UserViewModel.updateDisplayName(a),window.FlickletApp&&window.FlickletApp.currentUser&&window.UserViewModel&&window.UserViewModel.update(window.FlickletApp.currentUser)}catch(r){}const e=document.getElementById("saveNameBtn");if(e){const t=e.innerHTML;e.innerHTML="âœ… Saved!",e.style.background="#51cf66",setTimeout(()=>{e.innerHTML=t,e.style.background=""},2e3)}}catch(d){const e=d.message||"Unknown error occurred";alert(`Failed to save display name: ${e}. Please try again.`);const t=document.getElementById("saveNameBtn");if(t){const e=t.innerHTML;t.innerHTML="âŒ Error",t.style.background="#dc3545",setTimeout(()=>{t.innerHTML=e,t.style.background=""},3e3)}}},FlickletApp.initBackToTop=function(){try{let e=function(){const e=(window.scrollY||document.documentElement.scrollTop)>n;e!==a&&(a=e,a?i.classList.add("visible"):i.classList.remove("visible"))};const t=(...e)=>{};if(!document.body)return t("DOM not ready, deferring back-to-top initialization"),void setTimeout(()=>FlickletApp.initBackToTop(),100);const i=document.createElement("button");i.className="back-to-top",i.innerHTML="â†‘",i.setAttribute("aria-label","Back to top"),i.setAttribute("title","Back to top"),document.body.appendChild(i);let a=!1;const n=300;i.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",e,{passive:!0}),t("Back-to-top functionality initialized")}catch(e){}},FlickletApp.initBackToTop(),window.saveData=FlickletApp.saveData.bind(FlickletApp)}(),window.__useLegacyTabs=window.__useLegacyTabs||!1;const m={homeSection:"home",watchingSection:"watching",wishlistSection:"wishlist",watchedSection:"watched",discoverSection:"discover",settingsSection:"settings"};function p(){const e=document.querySelector('#navigation[role="tablist"], nav[role="tablist"]');if(!e)return;const t=["homeSection","watchingSection","wishlistSection","watchedSection","discoverSection","settingsSection"].filter(e=>document.getElementById(e)),i=new Map(t.map(e=>[e,document.getElementById(e)])),a=[...e.querySelectorAll('[role="tab"]:not([aria-disabled="true"])')].filter(e=>i.has(e.getAttribute("aria-controls")));document.querySelector(".top-search");const n=document.querySelector(".fab-dock");function o(){const e=[...document.querySelectorAll('[role="tab"]:not([aria-disabled="true"])')],t=e.map(e=>document.getElementById(e.getAttribute("aria-controls"))).filter(Boolean),i=e.filter(e=>"true"===e.getAttribute("aria-selected")),a=t.filter(e=>null!==e.offsetParent);1!==i.length||a.length,function(){const e=document.querySelector('[role="tab"][aria-selected="true"]'),t=document.querySelector(".tab-section:not([hidden])");if(document.body.className.match(/\btab-([a-z0-9-]+)\b/),e&&t&&e.getAttribute("aria-controls")!==t.id);}()}function s(e){const t=document.querySelector('[role="tab"][aria-selected="true"]');if(t&&t.getAttribute("aria-controls")===e)return;performance.now(),i.forEach((t,i)=>{t&&(t.hidden=i!==e,t.style.display="")}),a.forEach(t=>{const i=t.getAttribute("aria-controls")===e;t.classList.toggle("is-active",i),t.setAttribute("aria-selected",i?"true":"false"),t.setAttribute("tabindex",i?"0":"-1")});const s=m[e];s&&(document.body.className=document.body.className.replace(/\btab-[a-z0-9-]+\b/g,"").trim(),document.body.classList.add(`tab-${s}`),["home","discover"].includes(s)?document.body.classList.add("has-search"):document.body.classList.remove("has-search"),("localhost"===window.location.hostname||window.location.hostname.includes("netlify"))&&(o(),function(){if(n){const e=n.getBoundingClientRect();n.dataset.lastX,n.dataset.lastY,n.dataset.lastX=e.x.toString(),n.dataset.lastY=e.y.toString()}}()),Promise.resolve().then(()=>{const i=t?t.getAttribute("aria-controls"):null;document.dispatchEvent(new CustomEvent("tab:switched",{bubbles:!0,composed:!0,detail:{id:e,previousId:i}}));const a=m[e];a&&"function"==typeof window.updateTabContent&&(window.FlickletApp&&(window.FlickletApp.currentTab=a),window.updateTabContent(a)),performance.now()}))}a.forEach(e=>{if(!e.querySelector(".tab-label")){const t=document.createElement("span");t.className="tab-label",t.textContent=(e.textContent||e.getAttribute("aria-label")||"Tab").trim();const i=[...e.querySelectorAll(".badge")];e.innerHTML="",e.appendChild(t),i.forEach(t=>e.appendChild(t))}e.querySelector(".tab-label"),[...e.childNodes].forEach(t=>{if(3===t.nodeType&&t.textContent.trim().match(/^\d+$/)){const i=document.createElement("span");i.className="badge",i.textContent=t.textContent.trim(),e.appendChild(i),t.remove()}})});const r=t.find(e=>i.get(e)&&!i.get(e).hidden)||"homeSection";if(i.forEach((e,t)=>{e&&(e.hidden=t!==r,e.style.display="")}),i.has(r))s(r);else{const e=i.keys().next().value||t[0];e&&(i.get(e).hidden=!1,s(e))}e.addEventListener("click",e=>{if(e.target.closest('[data-scope="settings"]'))return;const t=e.target.closest('[role="tab"]');if(!t)return;e.preventDefault();const a=t.getAttribute("aria-controls");i.has(a)&&s(a)},{capture:!0}),e.addEventListener("keydown",t=>{const i=t.target.closest('[role="tab"]');if(!i)return;const a=[...e.querySelectorAll('[role="tab"]:not([aria-disabled="true"])')],n=a.indexOf(i);if("ArrowRight"===t.key){t.preventDefault();const e=a[(n+1)%a.length];null==e||e.focus(),null==e||e.click()}else if("ArrowLeft"===t.key){t.preventDefault();const e=a[(n-1+a.length)%a.length];null==e||e.focus(),null==e||e.click()}}),window.navEngine.activate=s}function g(e,t="w342"){const i="string"==typeof e?e:(null==e?void 0:e.poster_src)||(null==e?void 0:e.poster_path)||"";return i?/^https?:\/\//i.test(i)?i:`https://image.tmdb.org/t/p/${t}/${i.replace(/^\/+/,"")}`:"/assets/img/poster-placeholder.png"}async function v(e="/data/marquee-quips.json"){const t=await fetch(e,{cache:"no-store"});if(!t.ok)throw new Error(`quips fetch failed: ${t.status}`);const i=await t.json();if(!i||!Array.isArray(i.items))throw new Error("bad quips payload");const a=i.items.filter(e=>e&&"string"==typeof e.text&&e.text.trim()).flatMap(e=>{const t=Number.isFinite(null==e?void 0:e.weight)&&e.weight>0?Math.floor(e.weight):1;return Array(t).fill(e.text.trim())});if(!a.length)throw new Error("no usable quips");return function(e){const t=[...new Set(e)];for(let i=t.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t}(a)}window.navEngine={activate:null,slugMap:m},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.FlickletApp&&window.FlickletApp.switchToTab,p()}):p(),p(),window.DailyTriviaBridge=(()=>{let e=null;return{mount:function(t){const i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error("DailyTrivia root not found");if(e)return e;const a=document.createElement("iframe");a.id="triviaFrame_new",a.title="Daily Trivia Game",a.loading="eager",a.referrerPolicy="no-referrer",a.allow="",a.sandbox="allow-scripts allow-same-origin",a.style.width="100%",a.style.border="none",a.style.borderRadius="10px",a.src=`features/trivia.html?date=${(new Date).toISOString().slice(0,10)}`,i.replaceChildren(a);const n=()=>{try{a.focus()}catch{}};a.addEventListener("load",n);const o=e=>{const t=e.data;if(t&&"trivia:result"===t.type){try{const e={...JSON.parse(localStorage.getItem("trivia:stats")||"{}"),...t.payload};localStorage.setItem("trivia:stats",JSON.stringify(e))}catch{}try{const e=e=>document.querySelector(e),t=JSON.parse(localStorage.getItem("trivia:stats")||"{}");e("[data-tv-streak]")&&e("[data-tv-streak]").replaceChildren(String(t.streak??0)),e("[data-tv-best]")&&e("[data-tv-best]").replaceChildren(String(t.best??0)),e("[data-tv-acc]")&&e("[data-tv-acc]").replaceChildren(String(t.acc??"â€”"))}catch{}}};return window.addEventListener("message",o),e={iframe:a,destroy(){try{a.removeEventListener("load",n)}catch{}try{window.removeEventListener("message",o)}catch{}try{a.src="about:blank"}catch{}a.parentNode&&a.parentNode.replaceChildren(),e=null}},e},unmount:function(){e&&e.destroy()}}})(),document.addEventListener("modal:open",e=>{var t;if("modal-trivia"===(null==(t=e.detail)?void 0:t.id))try{window.DailyTriviaBridge.mount("#dailytrivia-game")}catch(i){}}),document.addEventListener("modal:close",e=>{var t;if("modal-trivia"===(null==(t=e.detail)?void 0:t.id))try{window.DailyTriviaBridge.unmount()}catch(i){}}),function(){try{const e=JSON.parse(localStorage.getItem("trivia:stats")||"{}"),t=(e,t)=>{const i=document.querySelector(e);i&&(i.textContent=String(t))};t("[data-tv-streak]",e.streak??0),t("[data-tv-best]",e.best??0),t("[data-tv-acc]",e.acc??"â€”")}catch{}}(),function(){const e=document.querySelector("#appRoot"),t=document.querySelector("#appRoot > #search-container.top-search, #appRoot > .top-search");function i(){if(e)if(function(e){if(!e)return!1;const t=getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility)return!1;const i=e.getBoundingClientRect();return i.width>0&&i.height>0}(t)){const i=Math.round(t.getBoundingClientRect().height);e.classList.add("has-search"),e.style.setProperty("--search-h",i+"px")}else e.classList.remove("has-search"),e.style.removeProperty("--search-h")}document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i),window.addEventListener("resize",i);for(const a of["app:view:changed","search:toggle","search:updated"])window.addEventListener(a,i)}(),window.getPosterUrl=g,window.getLazyPosterUrl=function(e,t="w200"){const i=g(e,t);return{src:i,"data-src":i}},window.isValidPosterUrl=function(e){return e&&(e.startsWith("http")||e.startsWith("/assets"))},window.getPlaceholderUrl=function(){return"/assets/img/poster-placeholder.png"},window.tmdbSrcset=function(e){if(!e)return"";const t=e||"",i=(e,t)=>`https://image.tmdb.org/t/p/w${e}${t}`;return`${i(200,t)} 200w, ${i(300,t)} 300w, ${i(342,t)} 342w, ${i(500,t)} 500w`},window.createResponsivePosterImg=function(e,t=""){if(!e){const e=document.createElement("img");return e.alt=t||"",e.loading="lazy",e.decoding="async",e.src="/assets/img/poster-placeholder.png",e}const i=e||"",a=(e,t)=>`https://image.tmdb.org/t/p/w${e}${t}`,n=a(200,i),o=a(300,i),s=a(500,i),r=document.createElement("img");return r.alt=t||"",r.loading="lazy",r.decoding="async",r.setAttribute("srcset",`${n} 200w, ${o} 300w, ${s} 500w`),r.setAttribute("sizes","(max-width: 480px) 148px, 200px"),r.src=o,r.onerror=()=>{r.removeAttribute("srcset"),r.removeAttribute("sizes"),r.src="/assets/img/poster-placeholder.png"},r},(()=>{const e="pref_theme",t="pref_mardi",i=window.matchMedia("(prefers-color-scheme: dark)");function a(e,t){try{return localStorage.getItem(e)||t}catch{return t}}function n(e,t){try{localStorage.setItem(e,t)}catch{}}function o(e,t){const a=document.body;a.setAttribute("data-theme",e),a.setAttribute("data-mardi",t),"on"===t?a.classList.add("mardi"):a.classList.remove("mardi"),"system"===e?a.classList.toggle("system-dark",i.matches):a.classList.remove("system-dark")}function s(){var s;o(a(e,"light"),a(t,"off")),null==(s=i.addEventListener)||s.call(i,"change",i=>{const n=a(e,"light");"system"===n&&o(n,a(t,"off"))}),window.ThemeManager={get theme(){return a(e,"light")},set theme(i){n(e,i),o(i,a(t,"off"))},get mardi(){return a(t,"off")},set mardi(i){n(t,i),o(a(e,"light"),i)},get effectiveTheme(){return function(e){return"system"===e?i.matches?"dark":"light":e}(a(e,"light"))}}}"loading"!==document.readyState?s():document.addEventListener("DOMContentLoaded",s)})(),(()=>{function e(){const e=document.getElementById("settingsModal");e&&(e.hidden=!0,e.dataset.keyListener&&(e.removeEventListener("keydown",e.onKey),delete e.dataset.keyListener))}function t(e){const t=e.target;"theme"===t.name&&(window.ThemeManager.theme=t.value),"mardiOverlayToggle"===t.id&&(window.ThemeManager.mardi=t.checked?"on":"off")}function i(){document.getElementById("btnSettings");const i=document.getElementById("settingsClose"),a=document.getElementById("settingsModal");i&&i.addEventListener("click",e),a&&(a.addEventListener("change",t),a.addEventListener("click",t=>{t.target===a&&e()}))}"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)})(),(async()=>{try{const e=await v("/data/marquee-quips.json");u.init({list:e}),window.FlickletMarquee=u}catch(e){u.init({list:["There's no place like 127.0.0.1.","In code we trust. Everyone else bring logs.","Errors are just features with stage fright."]})}})(),function(){var e;let t;if(t="function"==typeof window.getPosterUrl?window.isValidPosterUrl:function(e){return e&&(e.startsWith("http")||e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("/assets"))},!(null==(e=window.FLAGS)?void 0:e.homeRowCurrentlyWatching))return;const i=document.getElementById("currentlyWatchingPreview");i&&(i.style.display="block");let a=!1,n=0;async function o(){if(a)return;if(!document.getElementById("currentlyWatchingPreview"))return;document.addEventListener("click",e=>{const t=e.target.closest(".preview-card");if(!t)return;const i=e.target.closest(".preview-action-btn");if(i)return e.preventDefault(),e.stopPropagation(),void function(e,t){let i,a;if("string"==typeof e&&t&&t.id)i=e,a=t.id;else{const n=t;a=e.dataset.itemId,i=n.dataset.action}if(a&&i)switch(i){case"move-watched":"function"==typeof window.moveItem&&window.moveItem(Number(a),"watched");break;case"move-wishlist":"function"==typeof window.moveItem&&window.moveItem(Number(a),"wishlist");break;case"remove":"function"==typeof window.removeItemFromCurrentList&&window.removeItemFromCurrentList(Number(a))}}(t,i);t.dataset.itemId&&(window.FlickletApp&&"function"==typeof window.FlickletApp.switchToTab?window.FlickletApp.switchToTab("watching"):"function"==typeof window.switchToTab&&window.switchToTab("watching"))}),await d(),document.addEventListener("appDataUpdated",()=>d()),document.addEventListener("curated:rerender",()=>d());const e=window.updateUI;e&&(window.updateUI=function(...t){const i=e.apply(this,t);return setTimeout(d,100),i}),a=!0}let s="";async function r(){var e,i,a,o;const d="cw_preview_render";if(!window[d]){window[d]=!0;try{const d=document.getElementById("currentlyWatchingPreview"),w=document.getElementById("currentlyWatchingScroll");if(!d||!w)return;w.classList.add("row-inner");const h=await l(),m=h.map(e=>`${e.id}:${e.poster}`).join("|");if(m===s)return;if(s=m,!h||0===h.length){const t=window.appData&&((null==(e=window.appData.tv)?void 0:e.watching)&&window.appData.tv.watching.length>0||(null==(i=window.appData.movies)?void 0:i.watching)&&window.appData.movies.watching.length>0),s=(null==(a=window.FlickletApp)?void 0:a.currentUser)||window.currentUser||(null==(o=window.firebaseAuth)?void 0:o.currentUser);if(!t&&!s&&n<5){const e=[{id:"test1",title:"Test Show 1",mediaType:"tv",poster_path:null},{id:"test2",title:"Test Show 2",mediaType:"tv",poster_path:null},{id:"test3",title:"Test Show 3",mediaType:"tv",poster_path:null}];d.style.display="block",w.innerHTML="";for(const t of e)try{const e=await c(t);e&&w.appendChild(e)}catch(u){}!window._currentlyWatchingRetryScheduled&&n<5&&(window._currentlyWatchingRetryScheduled=!0,setTimeout(async()=>{const e=await l();e&&e.length>0&&(w.innerHTML="",await r()),window._currentlyWatchingRetryScheduled=!1},3e3))}else d.style.display="none",w.innerHTML="";return}d.style.display="block",w.innerHTML="";const p=function(){const e=localStorage.getItem("flicklet:currentlyWatching:limit");return e&&!isNaN(e)&&e>0?Math.min(parseInt(e),20):12}(),g=h.slice(0,p),v=g.map(e=>window.toCardProps?window.toCardProps(e):e);for(const e of v)try{const t=await c(e);t&&w.appendChild(t)}catch(u){}h.length,setTimeout(()=>{!function(){const e=document.querySelectorAll("#currentlyWatchingPreview img"),i=[];e.forEach((e,a)=>{var n,o;const s=e.src,r=(null==(o=null==(n=e.closest(".preview-card"))?void 0:n.dataset)?void 0:o.itemId)||`item-${a}`;s.startsWith("data:image/svg+xml")||t(s)||i.push({itemId:r,src:s})}),i.length,i.length}()},500),window.dispatchEvent(new CustomEvent("cards:rendered",{detail:{count:g.length,section:"currently-watching"}}))}catch(u){}finally{window[d]=!1}}}async function d(){if(window.render_currently_watching_preview)return;window.render_currently_watching_preview=!0;const e=document.getElementById("currentlyWatchingPreview"),t=document.getElementById("currentlyWatchingScroll");if(e&&t){t.classList.add("row-inner");try{await r()}finally{window.render_currently_watching_preview=!1}}else window.render_currently_watching_preview=!1}async function l(){var e,t,i,a,o,s,r,l,c,u;if(window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.load)try{const i=(null==(t=null==(e=window.firebaseAuth)?void 0:e.currentUser)?void 0:t.uid)||null,a=await window.WatchlistsAdapterV2.load(i);if(a&&a.watchingIds&&a.watchingIds.length>0){const e=[];for(const t of a.watchingIds)try{const i=window.WatchlistsAdapterV2.getItemData(t);i&&e.push({...i,media_type:i.media_type||"movie"})}catch(p){}return e}}catch(p){return[]}if(!window.appData)return[];const w=[];(null==(i=window.appData.tv)?void 0:i.watching)&&w.push(...window.appData.tv.watching.map(e=>({...e,media_type:"tv"}))),(null==(a=window.appData.movies)?void 0:a.watching)&&w.push(...window.appData.movies.watching.map(e=>({...e,media_type:"movie"})));const h=[],m=new Set;if(w.forEach(e=>{const t=e.id||e.tmdb_id||e.tmdbId;t&&!m.has(t)&&(m.add(t),h.push(e))}),0===h.length){try{const e=localStorage.getItem("flicklet-data");if(e){const t=JSON.parse(e);if((null==(s=null==(o=t.tv)?void 0:o.watching)?void 0:s.length)>0||(null==(l=null==(r=t.movies)?void 0:r.watching)?void 0:l.length)>0){const e=[];return(null==(c=t.tv)?void 0:c.watching)&&e.push(...t.tv.watching.map(e=>({...e,media_type:"tv"}))),(null==(u=t.movies)?void 0:u.watching)&&e.push(...t.movies.watching.map(e=>({...e,mediaType:"movie"}))),e}}}catch(g){}if("function"==typeof window.getWatchingItems){const e=window.getWatchingItems();if(e&&e.length>0)return e}if(window.FlickletApp&&"function"==typeof window.FlickletApp.getWatchingItems){const e=window.FlickletApp.getWatchingItems();if(e&&e.length>0)return e}const e=document.getElementById("watchingList");if(e){const t=e.querySelectorAll(".show-card, .list-card");if(t.length>0){const e=Array.from(t).map(e=>{var t;const i=e.dataset.id||e.getAttribute("data-id"),a=(null==(t=e.querySelector(".card-title, .show-title"))?void 0:t.textContent)||"Unknown",n=e.querySelector("img"),o=null==n?void 0:n.src;return{id:i,title:a,poster_path:o?o.split("/").pop():null,poster_src:o,media_type:"tv"}}).filter(e=>e.id);if(e.length>0)return e}}n<5&&(n++,setTimeout(async()=>{await d()},2e3))}return h}async function c(e){var t,i;if(window.renderCurrentlyWatchingCardV2){const i={id:e.id||e.tmdb_id||e.tmdbId,media_type:e.media_type||(e.first_air_date?"tv":"movie"),title:e.title||e.name||"Unknown",name:e.title||e.name||"Unknown",release_date:e.release_date||null,first_air_date:e.first_air_date||null,poster_path:e.poster_path||null,poster:e.poster||null,posterUrl:e.posterUrl||null,genres:(null==(t=e.genres)?void 0:t.map(e=>e.name))||[],overview:e.overview||""},a=window.renderCurrentlyWatchingCardV2(i,{variant:"preview",context:"home"});return a?(a.classList.add("preview-card"),a):null}{let t=e.posterUrl||e.poster_src||e.poster_path;if(!t&&e.id&&window.tmdbGet)try{const i="tv"===e.media_type?"tv":"movie",a=await window.tmdbGet(`${i}/${e.id}`,{});a&&a.poster_path&&(e.poster_path=a.poster_path,t=!0)}catch(a){}if(!t)return null;try{const{renderCurrentlyWatchingCard:t}=await h(async()=>{const{renderCurrentlyWatchingCard:e}=await import("./card-templates-CVsi9qzX.js");return{renderCurrentlyWatchingCard:e}},__vite__mapDeps([0,1])),a=t(window.toCardProps?window.toCardProps(e):{id:e.id||e.tmdb_id||e.tmdbId,title:e.title||e.name||"Unknown Title",name:e.name||e.title||"Unknown Title",poster:e.posterUrl||e.poster_src||e.poster_path||"",media_type:e.media_type||(e.first_air_date?"tv":"movie"),release_date:e.release_date,first_air_date:e.first_air_date,year:e.year,vote_average:e.vote_average||0,genres:(null==(i=e.genres)?void 0:i.map(e=>e.name))||[],overview:e.overview||""});return a.classList.add("preview-card"),a}catch(a){throw a}}}window.renderCurrentlyWatchingPreview=d,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",async()=>{await o()}):o(),setTimeout(async()=>{await o()},1e3),document.addEventListener("firebaseDataLoaded",async()=>{await o()}),document.addEventListener("userDataLoaded",async()=>{await o()}),document.addEventListener("userSignedOut",()=>{const e=document.getElementById("currentlyWatchingPreview"),t=document.getElementById("currentlyWatchingScroll");e&&(e.style.display="none"),t&&(t.innerHTML=""),n=0}),document.addEventListener("tabSwitched",e=>{e.detail&&"watching"===e.detail.tab&&setTimeout(async()=>{await o()},500)}),window.debugCurrentlyWatchingPreview=function(){d()},window.checkWatchingData=function(){},window.triggerCurrentlyWatchingPreview=function(){n=0,d()},window.checkDataLoadingStatus=function(){const e=document.getElementById("watchingList");e&&e.querySelectorAll(".show-card, .list-card").length}}();let f=0;async function y(e){var t;try{if("function"!=typeof window.tmdbGet)return null;const i=await window.tmdbGet(`tv/${e}`,{});return(null==(t=i.next_episode_to_air)?void 0:t.air_date)||null}catch(i){return null}}async function _(e,t){try{if("function"!=typeof window.tmdbGet)return null;const i="tv"===t?`tv/${e}`:`movie/${e}`;return await window.tmdbGet(i,{})}catch(i){return null}}function b(e){return e.poster_path&&"null"!==e.poster_path&&""!==e.poster_path?`https://image.tmdb.org/t/p/w300${e.poster_path.startsWith("/")?e.poster_path:`/${e.poster_path}`}`:e.backdrop_path&&"null"!==e.backdrop_path&&""!==e.backdrop_path?`https://image.tmdb.org/t/p/w300${e.backdrop_path.startsWith("/")?e.backdrop_path:`/${e.backdrop_path}`}`:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9Ijc1MCIgdmlld0JveD0iMCAwIDUwMCA3NTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNzUwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yNTAgMzAwSDI3NVY0NTBIMjUwVjMwMFoiIGZpbGw9IiNDQ0NDQ0MiLz4KPHBhdGggZD0iTTIwMCAzNzVIMzAwVjQwMEgyMDBWMzc1WiIgZmlsbD0iI0NDQ0NDQyIvPgo8L3N2Zz4K"}async function S(){var e,t,i,a,n,o,s;if(!(null==(e=window.FLAGS)?void 0:e.homeRowNextUp))return;const r=document.getElementById("up-next-row");if(!r)return;const d=r.querySelector(".row-inner");if(!d)return;const l=[];if(window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.load)try{const e=(null==(i=null==(t=window.firebaseAuth)?void 0:t.currentUser)?void 0:i.uid)||null,a=await window.WatchlistsAdapterV2.load(e);if(a&&a.watchingIds&&a.watchingIds.length>0)for(const t of a.watchingIds)try{const e=window.WatchlistsAdapterV2.getItemData(t);e&&l.push({...e,media_type:e.media_type||"movie"})}catch(w){}}catch(w){}if(0===l.length&&((null==(n=null==(a=window.appData)?void 0:a.tv)?void 0:n.watching)&&l.push(...window.appData.tv.watching.map(e=>({...e,media_type:"tv"}))),(null==(s=null==(o=window.appData)?void 0:o.movies)?void 0:s.watching)&&l.push(...window.appData.movies.watching.map(e=>({...e,media_type:e.media_type||"movie"})))),0===l.length){const e=document.getElementById("watchingList");e&&e.querySelectorAll(".show-card").forEach(e=>{const t=e.getAttribute("data-id"),i=e.querySelector(".show-title, .card-title, h3"),a=i?i.textContent.trim().replace("ðŸ”—","").trim():"Unknown Title",n=e.querySelector("img.show-poster, img.poster"),o=n?n.src:"",s=o?o.split("/").pop().split("?")[0]:"";t&&l.push({id:t,name:a,title:a,poster_path:s,media_type:"tv"})})}const c=await async function(e){const t=e.filter(e=>"tv"===e.media_type),i=await Promise.all(t.map(async e=>{const[t,i]=await Promise.all([y(e.id),_(e.id,e.media_type)]);return i&&i.poster_path&&!e.poster_path&&(e.poster_path=i.poster_path),{item:e,show:{...e,next_episode_to_air:t?{air_date:t}:null,status:e.status||"Returning Series"},airDate:t?new Date(t):null}})),{getNextAirInfo:a}=await h(async()=>{const{getNextAirInfo:e}=await import("./airdate-utils-DeQSc8AK.js");return{getNextAirInfo:e}},[]),n=i.map(({item:e,show:t,airDate:i})=>({item:e,show:t,air:a(t),airDate:i})).filter(e=>!1===e.air.ended||"Ended"===e.air.label||e.air.label.startsWith("Up next")),o=n.filter(e=>e.air.date),s=n.filter(e=>!e.air.date&&!e.air.ended&&e.air.label.includes("TBA")),r=n.filter(e=>e.air.ended);return o.sort((e,t)=>new Date(e.air.date)-new Date(t.air.date)),[...o,...s,...r].slice(0,10)}(l);if(!c.length)return r.style.display="none",void(0===l.length&&f<5&&(f++,setTimeout(()=>{S()},2e3)));f=0,r.style.display="block",d.innerHTML="";const{renderNextUpCard:u}=await h(async()=>{const{renderNextUpCard:e}=await import("./card-templates-CVsi9qzX.js");return{renderNextUpCard:e}},__vite__mapDeps([0,1]));for(const{item:h,show:m,air:p}of c){const e=u({...m,posterUrl:b(h)},p);d.appendChild(e)}}document.addEventListener("DOMContentLoaded",()=>{const e=()=>{window.appData&&(window.appData.tv||window.appData.movies)?setTimeout(()=>{S()},2e3):setTimeout(e,100)};e()}),document.addEventListener("appDataUpdated",S),document.addEventListener("curated:rerender",S);const k=window.updateUI;async function E(){const e=await fetch("/js/settings-schema.json",{cache:"no-cache"});if(!e.ok)throw new Error("Failed to load settings schema");const t=await e.json();if(!t||!Array.isArray(t.settings))throw new Error("Invalid settings schema format");return t}function I(e){return`flicklet:${e}`}function A(e,t){try{const i=localStorage.getItem(I(e));return null==i?t:JSON.parse(i)}catch{return t}}function D(e,t){try{return localStorage.setItem(I(e),JSON.stringify(t)),!0}catch{return!1}}function L(e){const t=function(e){const t={};for(const i of e.settings)t[i.storageKey]=i.default;return t}(e);for(const[i,a]of Object.entries(t))void 0===A(i,void 0)&&D(i,a)}function C(e,t=document){return t.querySelector(e)}function T(e,t,i){if("number"===i){const i=Number(e);return Number.isFinite(i)?i:t}return"boolean"===i?Boolean(e):e}function x(e){}async function M(){L(await E());const e={"#displayNameInput":{key:"user.displayName",type:"string"},"#langToggle":{key:"app.language",type:"enum"},"#mardiOverlayToggle":{key:"ui.mardiGrasOverlay",type:"boolean"},"#notifEpisodes":{key:"notif.episodes",type:"boolean"},"#notifDiscover":{key:"notif.discover",type:"boolean"},"#notifDigest":{key:"notif.monthlyDigest",type:"boolean"},"#settingCuratedRows":{key:"home.curatedRows",type:"number"},"#settingCurrentlyWatchingLimit":{key:"home.currentlyWatchingLimit",type:"number"},"#enableEpisodeTracking":{key:"cards.episodeTracking",type:"boolean"},"#advOn":{key:"pro.advancedNotifications",type:"boolean"},"#themePackSelect":{key:"pro.themePack",type:"enum"}};for(const[t,i]of Object.entries(e)){const e=C(t);if(!e){x();continue}const a=A(i.key,null);null!==a&&("checkbox"===e.type||"radio"===e.type?e.checked=!!a:e.value=String(a))}for(const[t,i]of Object.entries(e)){const e=C(t);e&&e.addEventListener("change",()=>{const t=T("checkbox"===e.type||"radio"===e.type?e.checked:e.value,A(i.key,null),i.type);D(i.key,t)})}!function({selectors:e,storageKey:t,values:i}){const a=e.map(e=>C(e)).filter(Boolean);if(a.length!==e.length)return void e.join(", ");const n=A(t,i[0]);a.forEach((e,t)=>{e.checked=i[t]===n}),a.forEach((e,a)=>{e.addEventListener("change",()=>{e.checked&&D(t,i[a])})})}({selectors:["#themeSystem","#themeLight","#themeDark"],storageKey:"ui.theme",values:["system","light","dark"]})}function F(e,t=document){return t.querySelector(e)}function N(e){try{"function"==typeof window.applyTheme?window.applyTheme(e):document.documentElement.setAttribute("data-theme",e)}catch{}}function P(e,t,i){const a=F(e);if(!a)return!1;const n=A(t,null);return null!==n&&i(n),a.addEventListener("change",()=>{const e="checkbox"===a.type||"radio"===a.type?a.checked:a.value;i(e)}),!0}async function $(){L(await E());const e=["#themeSystem","#themeLight","#themeDark"].map(e=>F(e)).filter(Boolean);3===e.length&&(N(A("ui.theme","light")),e.forEach(e=>{e.addEventListener("change",()=>{e.checked&&N("themeLight"===e.id?"light":"themeDark"===e.id?"dark":"system")})})),P("#langToggle","app.language",e=>function(e){try{document.documentElement.lang=e||"en",window.i18n&&"function"==typeof window.i18n.setLanguage&&window.i18n.setLanguage(e)}catch{}}(String(e))),P("#mardiOverlayToggle","ui.mardiGrasOverlay",e=>function(e){try{document.body.classList.toggle("mardi-gras",!!e)}catch{}}(!!e)),window.flickletSettingsEffectsApplied=!0}function B(){const e=["#themeSystem","#themeLight","#themeDark"].map(e=>document.querySelector(e)).filter(Boolean);if(3===e.length){const t=e.find(e=>e.checked);if(t){const e="themeLight"===t.id?"light":"themeDark"===t.id?"dark":"system";try{document.documentElement.setAttribute("data-theme",e)}catch{}}e.forEach(e=>{e.__fx||(e.addEventListener("change",()=>{if(e.checked){const t="themeLight"===e.id?"light":"themeDark"===e.id?"dark":"system";document.documentElement.setAttribute("data-theme",t)}}),e.__fx=!0)})}const t=document.querySelector("#langToggle");t&&!t.__fx&&(t.addEventListener("change",()=>{try{document.documentElement.lang=String(t.value||"en")}catch{}}),t.__fx=!0);const i=document.querySelector("#mardiOverlayToggle");i&&!i.__fx&&(i.addEventListener("change",()=>{document.body.classList.toggle("mardi-gras",!!i.checked)}),i.__fx=!0)}function U(e,t){var i,a,n,o;const s=[];if("number"===e.type){if("number"==typeof t&&Number.isFinite(t)||s.push("Value must be a number."),null!=(null==(i=e.validate)?void 0:i.min)&&t<e.validate.min&&s.push(`Minimum is ${e.validate.min}.`),null!=(null==(a=e.validate)?void 0:a.max)&&t>e.validate.max&&s.push(`Maximum is ${e.validate.max}.`),null!=(null==(n=e.validate)?void 0:n.step)&&Number.isFinite(t)){const i=e.validate.step,a=e.validate.min??0;Math.abs((t-a)/i-Math.round((t-a)/i))>1e-9&&s.push(`Must be in increments of ${i}.`)}}else if("enum"===e.type)(e.options||[]).includes(String(t))||s.push("Select a valid option.");else if("string"===e.type){const i=String(t??"");(null==(o=e.validate)?void 0:o.maxLength)&&i.length>e.validate.maxLength&&s.push(`Maximum length is ${e.validate.maxLength} characters.`)}else e.type;return s}function O(e,t){var i;let a=e.nextElementSibling;a&&(null==(i=a.classList)?void 0:i.contains("settings-error"))||(a=document.createElement("div"),a.className="settings-error",e.insertAdjacentElement("afterend",a)),t.length?(a.textContent=t[0],e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",a.id||(a.id=`err-${e.id||Math.random().toString(36).slice(2)}`))):(a.textContent="",e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"))}function q(e,t,i){const a={};for(const n of e.settings){const e=U(n,t[n.storageKey]);e.length&&(a[n.storageKey]=e)}for(const[n,o]of Object.entries(i)){const e=document.querySelector(n);e&&O(e,a[o]||[])}return a}k&&(window.updateUI=function(...e){const t=k.apply(this,e);return setTimeout(S,100),t}),window.renderNextUpRow=S,async function(){const e={watching:e=>{var t,i;return((null==(t=e.tv)?void 0:t.watching)||[]).concat((null==(i=e.movies)?void 0:i.watching)||[])},wishlist:e=>{var t,i;return((null==(t=e.tv)?void 0:t.wishlist)||[]).concat((null==(i=e.movies)?void 0:i.wishlist)||[])},watched:e=>{var t,i;return((null==(t=e.tv)?void 0:t.watched)||[]).concat((null==(i=e.movies)?void 0:i.watched)||[])},nextUp:e=>{var t;return((null==(t=e.tv)?void 0:t.watching)||[]).filter(e=>{const t=e.next_episode_air_date||e.nextAirDate||e.next_air_date,i=Date.parse(t||"");if(!Number.isFinite(i))return!1;const a=Date.now();return i>=a-864e5&&i<=a+6048e5})},discover:e=>e.discover||[],curated:e=>{const t=[];try{const e=JSON.parse(localStorage.getItem("curated:trending")||"[]"),i=JSON.parse(localStorage.getItem("curated:staff")||"[]"),a=JSON.parse(localStorage.getItem("curated:new")||"[]");t.push(...e,...i,...a)}catch(i){}return t},inTheaters:e=>e.inTheaters||[]};async function t(e,t,a,n="watching"){e.innerHTML="";const o=(a?t.slice(0,a):t).filter(Boolean).filter(e=>{const t=e.posterUrl||e.poster_src||e.poster_path;return t});if(!o.length){const t=document.createElement("div");return t.className="rail-empty",t.textContent="Nothing here yet.",void e.appendChild(t)}for(const r of o)try{const t=await i(r,n);t&&e.appendChild(t)}catch(s){}}async function i(e,t="watching"){var i,a,n,o;if(!e.posterUrl&&!e.poster_src&&!e.poster_path&&e.id&&window.tmdbGet)try{const t="tv"===e.media_type?"tv":"movie",i=await window.tmdbGet(`${t}/${e.id}`,{});i&&i.poster_path&&(e.poster_path=i.poster_path)}catch(w){}try{let s;const r=document.createElement("div");if("watching"===t&&window.renderCardV2){const t={id:e.id,mediaType:e.media_type||"tv",title:e.title||e.name||"Unknown",poster:e.poster_path?`https://image.tmdb.org/t/p/w200${e.poster_path}`:e.posterUrl||"",releaseDate:e.release_date||e.first_air_date||"",genre:e.genre||e.genres&&(null==(i=e.genres[0])?void 0:i.name)||"",seasonEpisode:e.seasonEpisode||e.sxxExx||""};s=window.renderCardV2(r,t,{listType:"watching",context:"home"})}else if("nextUp"===t&&window.renderCardV2){const t={id:e.id,mediaType:e.media_type||"tv",title:e.title||e.name||"Unknown",poster:e.poster_path?`https://image.tmdb.org/t/p/w200${e.poster_path}`:e.posterUrl||"",releaseDate:e.release_date||e.first_air_date||"",genre:e.genre||e.genres&&(null==(a=e.genres[0])?void 0:a.name)||"",seasonEpisode:e.seasonEpisode||e.sxxExx||"",nextAirDate:e.next_episode_air_date||e.nextAirDate||e.next_air_date||"TBA"};s=window.renderCardV2(r,t,{listType:"next-up",context:"home"})}else if("curated"===t&&window.renderCardV2){const t={id:e.id,mediaType:e.media_type||"movie",title:e.title||e.name||"Unknown",poster:e.poster_path?`https://image.tmdb.org/t/p/w200${e.poster_path}`:e.posterPath||e.posterUrl||"",releaseDate:e.release_date||e.first_air_date||"",genre:e.genre||e.genres&&(null==(n=e.genres[0])?void 0:n.name)||"",tmdbId:e.tmdbId||e.id,whereToWatch:e.whereToWatch||e.provider||"",curatorBlurb:e.curatorBlurb||e.description||""};s=window.renderCardV2(r,t,{listType:"curated",context:"home"})}else if(window.renderCardV2){const i={id:e.id,mediaType:e.media_type||"tv",title:e.title||e.name||"Unknown",poster:e.poster_path?`https://image.tmdb.org/t/p/w200${e.poster_path}`:e.posterUrl||"",releaseDate:e.release_date||e.first_air_date||"",genre:e.genre||e.genres&&(null==(o=e.genres[0])?void 0:o.name)||"",seasonEpisode:e.seasonEpisode||e.sxxExx||""};s=window.renderCardV2(r,i,{listType:t,context:"home"})}if(s)return s.classList.add("preview-card"),s}catch(w){}if(window.Card&&window.createCardData){const t=window.createCardData(e,"tmdb","home");return window.Card({variant:"unified",...t})}const s=document.createElement("div");s.className="unified-card",s.dataset.id=e.id||e.tmdb_id||e.tmdbId;const r=e.title||e.name||"Unknown Title",d=e.release_date?new Date(e.release_date).getFullYear():e.first_air_date?new Date(e.first_air_date).getFullYear():e.year||"",l=e.media_type||(e.first_air_date?"tv":"movie"),c=e.posterUrl||e.poster_src||(e.poster_path&&window.getPosterUrl?window.getPosterUrl(e.poster_path,"w342"):e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:null);s.innerHTML=`\n      <div class="unified-card-poster" role="button" tabindex="0" aria-label="${r}">\n        <div class="unified-card-poster-container">\n          ${c?`<img src="${c}" alt="${r} poster" loading="lazy" class="unified-card-poster-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">`:""}\n          <div class="unified-card-poster-placeholder" style="display: ${c?"none":"flex"};">\n            <div class="unified-card-poster-skeleton"></div>\n            <div class="unified-card-poster-brand">ðŸŽ¬</div>\n          </div>\n        </div>\n        <div class="unified-card-actions">\n          <button class="unified-card-action-btn" \n                  data-action="mark-watched" \n                  data-id="${e.id||e.tmdb_id}" \n                  aria-label="Mark as Watched"\n                  title="Mark as Watched">\n            <span class="unified-card-action-icon">âœ…</span>\n            <span class="unified-card-action-label">Mark Watched</span>\n          </button>\n          <button class="unified-card-action-btn" \n                  data-action="want-to-watch" \n                  data-id="${e.id||e.tmdb_id}" \n                  aria-label="Add to Want to Watch"\n                  title="Add to Want to Watch">\n            <span class="unified-card-action-icon">ðŸ“–</span>\n            <span class="unified-card-action-label">Want to Watch</span>\n          </button>\n          <button class="unified-card-action-btn" \n                  data-action="remove" \n                  data-id="${e.id||e.tmdb_id}" \n                  aria-label="Remove from List"\n                  title="Remove from List">\n            <span class="unified-card-action-icon">ðŸ—‘ï¸</span>\n            <span class="unified-card-action-label">Remove</span>\n          </button>\n        </div>\n      </div>\n      <div class="unified-card-content">\n        <h3 class="unified-card-title">${r}</h3>\n        <div class="unified-card-subtitle">${d?`(${d}) â€¢ ${"tv"===l?"TV Show":"Movie"}`:"tv"===l?"TV Show":"Movie"}</div>\n      </div>\n    `;const u=s.querySelector(".unified-card-poster");return u&&window.openTMDBLink&&u.addEventListener("click",t=>{t.target.closest(".unified-card-action-btn")||window.openTMDBLink(e.id||e.tmdb_id,l)}),s.querySelectorAll(".unified-card-action-btn").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const i=e.dataset.action,a=e.dataset.id;switch(i){case"mark-watched":window.moveItem&&window.moveItem(Number(a),"watched");break;case"want-to-watch":window.moveItem&&window.moveItem(Number(a),"wishlist");break;case"remove":window.removeItemFromCurrentList&&window.removeItemFromCurrentList(Number(a))}})}),s}async function a(i){var a,n;let o={tv:{},movies:{}};if(window.WatchlistsAdapterV2&&"function"==typeof window.WatchlistsAdapterV2.load)try{const e=(null==(n=null==(a=window.firebaseAuth)?void 0:a.currentUser)?void 0:n.uid)||null,t=await window.WatchlistsAdapterV2.load(e);if(t){const e=async e=>{if(!e||!Array.isArray(e))return[];const t=[];for(const a of e)try{const e=window.WatchlistsAdapterV2.getItemData(a);e&&t.push(e)}catch(i){}return t},i=await e(t.watchingIds),a=await e(t.wishlistIds),n=await e(t.watchedIds);o={tv:{watching:i.filter(e=>"tv"===e.media_type),wishlist:a.filter(e=>"tv"===e.media_type),watched:n.filter(e=>"tv"===e.media_type)},movies:{watching:i.filter(e=>"movie"===e.media_type),wishlist:a.filter(e=>"movie"===e.media_type),watched:n.filter(e=>"movie"===e.media_type)}}}}catch(s){o={tv:{},movies:{}}}else o=window.appData||{tv:{},movies:{}};for(const r of i.rails){const i=document.querySelector(r.containerSelector);if(!i)continue;const a=(e[r.picker]||(()=>[]))(o);await t(i,a,r.limit,r.picker)}}const n=await async function(){const e=await fetch("/config/home-wiring.json",{cache:"no-store"});if(!e.ok)throw new Error(`home-wiring.json ${e.status}`);return e.json()}();window.addEventListener("app:data:ready",()=>a(n)),window.renderHomeRails=()=>a(n)}().catch(e=>{}),function(){var e;async function t(){try{!function(){if(document.getElementById("theaters-section"))return;const e=document.getElementById("homeSection");if(!e)return;const t=document.createElement("section");t.id="theaters-section",t.className="home-section",t.innerHTML='\n      <h2 class="section-title">What\'s in Theaters Near Me</h2>\n      <div class="section-description" style="font-size: 14px; color: var(--text-secondary, #666); margin-bottom: 16px; text-align: center;">\n        Current theatrical releases and showtimes\n      </div>\n      \n      <div class="theaters-container">\n        <div class="theaters-header">\n          <h3>ðŸŽ¬ Now Playing</h3>\n          <button class="btn secondary" id="refreshTheatersBtn">ðŸ”„ Refresh</button>\n        </div>\n        <div class="theaters-list" id="theatersList">\n          <div class="loading">Loading movies...</div>\n        </div>\n      </div>\n      \n      <div class="theaters-info">\n        <div class="theaters-meta">\n          <h3>Find Showtimes</h3>\n          <p>Click "Find Showtimes" to see showtimes at theaters near you</p>\n          <div class="location-info">\n            <span id="userLocation">ðŸ“ Getting your location...</span>\n          </div>\n        </div>\n        <div class="theaters-cta">\n          <button class="btn btn-primary" id="findShowtimesBtn">ðŸŽ« Find Showtimes</button>\n          <button class="btn secondary" id="refreshLocationBtn">ðŸ“ Update Location</button>\n        </div>\n        <div class="theaters-badges">\n          <span class="badge">Now Playing</span>\n          <span class="badge" id="movieCount">Loading...</span>\n        </div>\n      </div>\n    ',e.appendChild(t)}(),a(await i())}catch(e){a([{title:"Sample Movie",overview:"This is a sample movie description for when the API is unavailable.",vote_average:7.5,release_date:(new Date).toISOString().split("T")[0],poster_path:null}])}}async function i(){var e;try{return(null==(e=(await window.tmdbGet("movie/now_playing",{language:"en-US",page:1,region:"US"})).results)?void 0:e.slice(0,8))||[]}catch(t){return[]}}function a(e){const t=document.getElementById("theatersList"),s=document.getElementById("movieCount");if(t){if(!e||0===e.length)return t.innerHTML='<div class="no-movies"><p>Unable to load current movies. Please try again later.</p></div>',void(s&&(s.textContent="0 Movies"));t.innerHTML=e.map(e=>{var t,i;const a=e.poster_path?window.getPosterUrl?window.getPosterUrl(e.poster_path,"w200"):`https://image.tmdb.org/t/p/w200${e.poster_path}`:null;return`\n        <div class="theater-movie">\n          <div class="movie-poster">\n            ${a?`<img src="${a}" alt="${o(e.title)}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">\n               <div class="movie-poster-placeholder" style="display: none;">ðŸŽ¬</div>`:'<div class="movie-poster-placeholder">ðŸŽ¬</div>'}\n          </div>\n          <div class="movie-info">\n            <h4 class="movie-title">${o(e.title)}</h4>\n            <p class="movie-overview">${o((null==(t=e.overview)?void 0:t.substring(0,120))+"..."||"No description available")}</p>\n            <div class="movie-meta">\n              <span class="movie-rating">â­ ${(null==(i=e.vote_average)?void 0:i.toFixed(1))||"N/A"}</span>\n              <span class="movie-release">${e.release_date?new Date(e.release_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"TBA"}</span>\n            </div>\n          </div>\n        </div>\n      `}).join(""),s&&(s.textContent=`${e.length} Movies`),function(){const e=document.getElementById("refreshTheatersBtn");e&&e.addEventListener("click",async()=>{e.textContent="ðŸ”„ Loading...";try{a(await i())}catch(t){}});const t=document.getElementById("findShowtimesBtn");t&&t.addEventListener("click",()=>{window.open("https://www.fandango.com/","_blank")});const o=document.getElementById("refreshLocationBtn");o&&o.addEventListener("click",()=>{n()}),n()}()}}function n(){const e=document.getElementById("userLocation");var t;e&&(e.textContent="ðŸ“ Getting your location...",navigator.geolocation?(t=()=>{navigator.geolocation.getCurrentPosition(t=>{const{latitude:i,longitude:a}=t.coords;e.textContent=`ðŸ“ ${i.toFixed(2)}, ${a.toFixed(2)}`},t=>{e.textContent="ðŸ“ Location unavailable"})},"requestIdleCallback"in window?requestIdleCallback(t,{timeout:2e3}):setTimeout(t,100)):e.textContent="ðŸ“ Location not supported")}function o(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}(null==(e=window.FLAGS)?void 0:e.homeRowSpotlight)&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t())}(),window.addCurrentlyAiringShows=async function(){if("function"==typeof window.tmdbGet&&window.appData)try{const e=await window.tmdbGet("tv/on_the_air",{page:1});if(!e.results||!Array.isArray(e.results))return;const t=e.results.slice(0,20);window.appData.tv||(window.appData.tv={watching:[],wishlist:[],watched:[]}),window.appData.tv.watching||(window.appData.tv.watching=[]);let i=0;for(const a of t){if(window.appData.tv.watching.findIndex(e=>e.id===a.id)>=0)continue;const e={id:a.id,name:a.name,title:a.name,media_type:"tv",first_air_date:a.first_air_date,poster_path:a.poster_path,backdrop_path:a.backdrop_path,overview:a.overview,vote_average:a.vote_average,vote_count:a.vote_count,genre_ids:a.genre_ids,original_language:a.original_language,original_name:a.original_name,origin_country:a.origin_country,popularity:a.popularity,adult:a.adult,video:a.video};window.appData.tv.watching.push(e),i++}"function"==typeof window.saveAppData&&window.saveAppData(),"function"==typeof window.updateUI&&window.updateUI(),"function"==typeof window.renderNextUpRow&&setTimeout(()=>{window.renderNextUpRow()},1e3)}catch(e){}},function(){const e=[{id:1399,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+864e5).toISOString().split("T")[0],episode_number:1,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+1728e5).toISOString().split("T")[0],episode_number:2,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11},{id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+2592e5).toISOString().split("T")[0],episode_number:3,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+3456e5).toISOString().split("T")[0],episode_number:4,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11},{id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+432e6).toISOString().split("T")[0],episode_number:5,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+5184e5).toISOString().split("T")[0],episode_number:6,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11},{id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+6048e5).toISOString().split("T")[0],episode_number:7,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+6912e5).toISOString().split("T")[0],episode_number:8,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11},{id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+7776e5).toISOString().split("T")[0],episode_number:9,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+864e6).toISOString().split("T")[0],episode_number:10,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11},{id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",poster_path:"/ggFHVNu6YYI5L9pCfOacjizRGt.jpg",first_air_date:"2008-01-20",next_episode_to_air:{air_date:new Date(Date.now()+9504e5).toISOString().split("T")[0],episode_number:11,season_number:6},status:"Returning Series",in_production:!0,number_of_episodes:62,number_of_seasons:5},{id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",poster_path:"/rqeYML0jc3Dv1Uh4MDI3m4Injp0.jpg",first_air_date:"2010-10-31",next_episode_to_air:{air_date:new Date(Date.now()+10368e5).toISOString().split("T")[0],episode_number:12,season_number:12},status:"Returning Series",in_production:!0,number_of_episodes:177,number_of_seasons:11}];window.addMockCurrentlyWatching=function(){try{let i=window.appData||{tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},settings:{},searchCache:[],activeTagFilters:new Set};if(i.tv.watching=[],i.movies.watching=[],i.tv.watching=[...e],i.watchlists||(i.watchlists={tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]}}),i.watchlists.tv.watching=[...e],window.appData=i,localStorage.setItem("flicklet-data",JSON.stringify(i)),window.WatchlistsAdapter&&"function"==typeof window.WatchlistsAdapter.invalidate&&window.WatchlistsAdapter.invalidate(),window.FlickletApp&&window.FlickletApp.currentUser)try{"function"==typeof window.FlickletApp.saveData?window.FlickletApp.saveData():"function"==typeof window.saveAppData&&window.saveAppData()}catch(t){}return void 0!==window.FlickletApp&&window.FlickletApp.updateUI?window.FlickletApp.updateUI():("function"==typeof window.updateUI&&window.updateUI(),"function"==typeof window.updateTabCounts&&window.updateTabCounts()),document.dispatchEvent(new CustomEvent("watchlists:updated",{detail:{list:"watching",action:"add",source:"mock-data"}})),document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"mock-data"}})),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"mock-data"}})),setTimeout(()=>{"function"==typeof window.refreshCurrentlyWatching&&window.refreshCurrentlyWatching()},1e3),!0}catch(t){return!1}},window.clearMockCurrentlyWatching=function(){try{let e=window.appData||{tv:{watching:[],wishlist:[],watched:[]},movies:{watching:[],wishlist:[],watched:[]},settings:{},searchCache:[],activeTagFilters:new Set};return e.tv.watching=[],e.movies.watching=[],window.appData=e,localStorage.setItem("flicklet-data",JSON.stringify(e)),void 0!==window.FlickletApp&&window.FlickletApp.updateUI&&window.FlickletApp.updateUI(),!0}catch(e){return!1}},window.refreshCurrentlyWatching=function(){"function"==typeof window.initCurrentlyWatchingPreview&&window.initCurrentlyWatchingPreview(),"function"==typeof window.renderCurrentlyWatchingPreview&&window.renderCurrentlyWatchingPreview(),document.dispatchEvent(new CustomEvent("app:data:ready",{detail:{source:"force-refresh"}})),document.dispatchEvent(new CustomEvent("cards:changed",{detail:{source:"force-refresh"}}))}}(),function(){function e({id:e,posterUrl:t,title:i,year:a,rating:n,overflowActions:o=[],onClick:s,isDisabled:r=!1,subline:d,hideRating:l=!1}){const c=document.createElement("button");c.className="base-poster-card",c.dataset.id=e,c.dataset.testid="poster-card",r&&c.classList.add("base-poster-card--disabled");const u=i?i.toUpperCase():"",w=a?`${u} (${a})`:u,h=!l&&n&&n>0,m=h?Math.round(10*n)/10:0,p=`\n      <div class="base-poster-card__poster" data-testid="poster-image">\n        ${t?`<img src="${t}" alt="${i}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">`:'<div class="base-poster-card__placeholder">ðŸŽ¬</div>'}\n        <div class="base-poster-card__placeholder" style="display: ${t?"none":"flex"};">ðŸŽ¬</div>\n      </div>\n      <div class="base-poster-card__content">\n        <h3 class="base-poster-card__title" data-testid="poster-title">${w}</h3>\n        ${d?`<p class="base-poster-card__subline">${d}</p>`:""}\n        ${h?`<div class="base-poster-card__rating" data-testid="poster-rating">â˜…${m}</div>`:""}\n        ${o.length>0?`\n          <div class="base-poster-card__overflow" data-testid="poster-menu">\n            <button class="base-poster-card__overflow-btn" aria-label="More options">\n              <span class="base-poster-card__overflow-dots">â€¢â€¢â€¢</span>\n            </button>\n            <div class="base-poster-card__overflow-menu" aria-hidden="true">\n              ${o.map(e=>`\n                <button class="base-poster-card__overflow-item" onclick="(${e.onClick.toString()})()">\n                  ${e.icon?`<span class="base-poster-card__overflow-icon">${e.icon}</span>`:""}\n                  <span class="base-poster-card__overflow-label">${e.label}</span>\n                </button>\n              `).join("")}\n            </div>\n          </div>\n        `:""}\n      </div>\n    `;c.innerHTML=p,s&&c.addEventListener("click",t=>{t.target.closest(".base-poster-card__overflow")||s(e)});const g=c.querySelector(".base-poster-card__overflow-btn"),v=c.querySelector(".base-poster-card__overflow-menu");return g&&v&&(g.addEventListener("click",e=>{e.stopPropagation();const t="false"===v.getAttribute("aria-hidden");v.setAttribute("aria-hidden",t?"true":"false")}),document.addEventListener("click",e=>{c.contains(e.target)||v.setAttribute("aria-hidden","true")})),c.setAttribute("aria-label",`${i}${a?` (${a})`:""}`),c}function t(e=6){const t=[];for(let i=0;i<e;i++){const e=document.createElement("div");e.className="base-poster-card base-poster-card--skeleton",e.innerHTML='\n        <div class="base-poster-card__poster base-poster-card__skeleton-shimmer"></div>\n        <div class="base-poster-card__content">\n          <div class="base-poster-card__title base-poster-card__skeleton-shimmer"></div>\n          <div class="base-poster-card__subline base-poster-card__skeleton-shimmer"></div>\n        </div>\n      ',t.push(e)}return t}function i(e="Nothing here yet"){const t=document.createElement("div");return t.className="base-poster-card base-poster-card--empty",t.innerHTML=`\n      <div class="base-poster-card__empty-content">\n        <div class="base-poster-card__empty-icon">ðŸ“­</div>\n        <p class="base-poster-card__empty-message">${e}</p>\n      </div>\n    `,t}window.BasePosterCard=e,window.createSkeletonCards=t,window.createEmptyState=i,"undefined"!=typeof window&&(window.BasePosterCard=window.BasePosterCard||e,window.createSkeletonCards=window.createSkeletonCards||t,window.createEmptyState=window.createEmptyState||i)}(),function(){function e({streak:e=0,winRate:t=0,totalGames:i=0,lastResult:a="",lastPlayed:n=""}){const o=document.createElement("div");o.className="stats-card",o.dataset.testid="stats-card";const s=Math.round(t),r=n?new Date(n).toLocaleDateString():"",d=`\n      <div class="stats-card__header">\n        <h3 class="stats-card__title">Your Stats</h3>\n      </div>\n      <div class="stats-card__content">\n        <div class="stats-card__stat">\n          <div class="stats-card__stat-value" data-testid="stats-streak">${e}</div>\n          <div class="stats-card__stat-label">Streak</div>\n        </div>\n        <div class="stats-card__stat">\n          <div class="stats-card__stat-value" data-testid="stats-win-rate">${s}%</div>\n          <div class="stats-card__stat-label">Win Rate</div>\n        </div>\n        <div class="stats-card__stat">\n          <div class="stats-card__stat-value" data-testid="stats-total-games">${i}</div>\n          <div class="stats-card__stat-label">Games</div>\n        </div>\n        <div class="stats-card__stat">\n          <div class="stats-card__stat-value" data-testid="stats-last-result">${a||"â€”"}</div>\n          <div class="stats-card__stat-label">Last Result</div>\n        </div>\n      </div>\n      ${r?`\n        <div class="stats-card__footer">\n          <div class="stats-card__last-played">Last played: ${r}</div>\n        </div>\n      `:""}\n    `;return o.innerHTML=d,o}function t(e,t){if(!e)return;const{streak:i,winRate:a,totalGames:n,lastResult:o,lastPlayed:s}=t,r=e.querySelector('[data-testid="stats-streak"]');r&&(r.textContent=i||0);const d=e.querySelector('[data-testid="stats-win-rate"]');d&&(d.textContent=`${Math.round(a||0)}%`);const l=e.querySelector('[data-testid="stats-total-games"]');l&&(l.textContent=n||0);const c=e.querySelector('[data-testid="stats-last-result"]');c&&(c.textContent=o||"â€”");const u=e.querySelector(".stats-card__last-played");u&&s&&(u.textContent=`Last played: ${new Date(s).toLocaleDateString()}`)}function i(){try{const e=localStorage.getItem("flickword-stats");if(e)return JSON.parse(e)}catch(e){}return{streak:0,winRate:0,totalGames:0,lastResult:"",lastPlayed:""}}function a(e){try{localStorage.setItem("flickword-stats",JSON.stringify(e))}catch(t){}}window.StatsCard=e,window.updateStatsCard=t,window.loadStatsFromStorage=i,window.saveStatsToStorage=a,"undefined"!=typeof window&&(window.StatsCard=window.StatsCard||e,window.updateStatsCard=window.updateStatsCard||t,window.loadStatsFromStorage=window.loadStatsFromStorage||i,window.saveStatsToStorage=window.saveStatsToStorage||a)}(),function(){function e({stats:e={},wordArchives:t=[],onPlay:i,onWordClick:a}){const n=document.createElement("div");n.className="flickword-tab",n.dataset.testid="flickword-tab";const o=void 0!==e.streak?e:window.loadStatsFromStorage?window.loadStatsFromStorage():{},s=`\n      \x3c!-- Header Row --\x3e\n      <div class="flickword-tab__header">\n        <h2 class="flickword-tab__title">FLICKWORD</h2>\n        <button class="btn btn--primary" data-testid="play-flickword" onclick="(${i?i.toString():"() => {}"})()">\n          Play\n        </button>\n      </div>\n\n      \x3c!-- Hero Row --\x3e\n      <div class="flickword-tab__hero">\n        <div class="flickword-tab__hero-image">\n          <img src="/icons/word-game-hero.png" alt="FlickWord Game" loading="lazy" \n               style="width: 100%; max-width: 480px; min-width: 280px; height: auto; border-radius: 8px;">\n        </div>\n        <div class="flickword-tab__hero-stats">\n          ${window.StatsCard?window.StatsCard(o).outerHTML:""}\n        </div>\n      </div>\n\n      \x3c!-- Card Grid --\x3e\n      <div class="flickword-tab__grid" data-testid="flickword-grid">\n        ${t.length>0?t.map(e=>`\n            <div class="flickword-word-card" data-word-id="${e.id}">\n              ${window.BasePosterCard?window.BasePosterCard({id:e.id,posterUrl:e.posterUrl||"/icons/word-puzzle.png",title:`WORD #${e.number||e.id}`,year:e.date?new Date(e.date).getFullYear():void 0,onClick:a||(()=>{}),overflowActions:[{label:"Play",onClick:()=>a?a(e.id):null,icon:"â–¶ï¸"},{label:"Archive",onClick:()=>{},icon:"ðŸ“"}]}).outerHTML:""}\n            </div>\n          `).join(""):window.createEmptyState?window.createEmptyState("No games yet â€” hit Play!").outerHTML:""}\n      </div>\n    `;n.innerHTML=s;const r=n.querySelector('[data-testid="play-flickword"]');return r&&i&&r.addEventListener("click",i),n.querySelectorAll(".flickword-word-card").forEach(e=>{const t=e.dataset.wordId;e.addEventListener("click",()=>{a&&a(t)})}),n}function t(e=[]){return e.map((e,t)=>({id:e.id||`word-${t}`,number:e.number||t+1,date:e.date||(new Date).toISOString(),posterUrl:e.posterUrl||"/icons/word-puzzle.png",title:e.title||`Word #${t+1}`,difficulty:e.difficulty||"medium"}))}function i(e,i){if(!e)return;const{stats:a,wordArchives:n}=i;if(a){const t=e.querySelector(".stats-card");t&&window.updateStatsCard&&window.updateStatsCard(t,a)}if(n){const i=e.querySelector(".flickword-tab__grid");if(i&&window.BasePosterCard){const e=t(n);i.innerHTML=e.map(e=>`\n          <div class="flickword-word-card" data-word-id="${e.id}">\n            ${window.BasePosterCard({id:e.id,posterUrl:e.posterUrl,title:`WORD #${e.number}`,year:e.date?new Date(e.date).getFullYear():void 0,onClick:()=>{},overflowActions:[{label:"Play",onClick:()=>{},icon:"â–¶ï¸"},{label:"Archive",onClick:()=>{},icon:"ðŸ“"}]}).outerHTML}\n          </div>\n        `).join("")}}}function a(e){if(!e)return;const t=e.querySelector(".flickword-tab__grid");if(t&&window.createSkeletonCards){const e=window.createSkeletonCards(6);t.innerHTML="",e.forEach(e=>t.appendChild(e))}}window.FlickWordTab=e,window.createWordArchives=t,window.updateFlickWordTab=i,window.showFlickWordLoading=a,"undefined"!=typeof window&&(window.FlickWordTab=window.FlickWordTab||e,window.createWordArchives=window.createWordArchives||t,window.updateFlickWordTab=window.updateFlickWordTab||i,window.showFlickWordLoading=window.showFlickWordLoading||a)}(),function(){function e({categories:e=[],onPlay:a,onCategoryClick:n}){const o=document.createElement("div");o.className="trivia-tab",o.dataset.testid="trivia-tab";const s=`\n      \x3c!-- Header Row --\x3e\n      <div class="trivia-tab__header">\n        <h2 class="trivia-tab__title">TRIVIA</h2>\n        <button class="btn btn--primary" data-testid="play-trivia" onclick="(${a?a.toString():"() => {}"})()">\n          Play\n        </button>\n      </div>\n\n      \x3c!-- Stats Panel --\x3e\n      <div class="trivia-stats-panel" data-testid="trivia-stats">\n        ${function(){var e,t;const i=(null==(t=null==(e=window.appData)?void 0:e.settings)?void 0:t.pro)||!1,a=`flicklet:trivia:daily:${(new Date).toISOString().split("T")[0]}`,n=parseInt(localStorage.getItem(a)||"0");return`\n      <div class="stats-panel">\n        <div class="stats-row ${i?"pro-active":"basic-active"}">\n          <div class="stats-label">Basic Plan</div>\n          <div class="stats-value">${n}/5 questions today</div>\n          <div class="stats-status">${i?"Upgraded":"Active"}</div>\n        </div>\n        <div class="stats-row ${i?"pro-active":"pro-locked"}">\n          <div class="stats-label">Pro Plan</div>\n          <div class="stats-value">${i?`${n}/50 questions today`:"50 questions/day"}</div>\n          <div class="stats-status">${i?"Active":"Locked"}</div>\n        </div>\n        <div class="stats-summary">\n          <div class="streak-info">Current Streak: ${parseInt(localStorage.getItem("flicklet:trivia:v1:streak")||"0")} days</div>\n          ${i?"":'<div class="upgrade-hint">Upgrade to Pro for 10x more questions!</div>'}\n        </div>\n      </div>\n    `}()}\n      </div>\n\n      \x3c!-- Card Grid --\x3e\n      <div class="trivia-tab__grid" data-testid="trivia-grid">\n        ${e.length>0?e.map(e=>`\n            <div class="trivia-category-card" data-category-id="${e.id}">\n              ${window.BasePosterCard?window.BasePosterCard({id:e.id,posterUrl:e.posterUrl||t(e.type),title:e.name||e.title,subline:i(e),hideRating:!0,onClick:n||(()=>{}),overflowActions:[{label:"Play",onClick:()=>n?n(e.id):null,icon:"â–¶ï¸"},{label:"Details",onClick:()=>{},icon:"â„¹ï¸"},{label:"Save",onClick:()=>{},icon:"ðŸ’¾"}]}).outerHTML:""}\n            </div>\n          `).join(""):window.createEmptyState?window.createEmptyState("No trivia categories available").outerHTML:""}\n      </div>\n    `;o.innerHTML=s;const r=o.querySelector('[data-testid="play-trivia"]');return r&&a&&r.addEventListener("click",a),o.querySelectorAll(".trivia-category-card").forEach(e=>{const t=e.dataset.categoryId;e.addEventListener("click",()=>{n&&n(t)})}),o}function t(e){return{movies:"/icons/movie-reel.png",tv:"/icons/tv-screen.png",music:"/icons/music-note.png",sports:"/icons/sports-ball.png",history:"/icons/history-book.png",science:"/icons/science-lab.png",geography:"/icons/globe.png",literature:"/icons/book.png",art:"/icons/palette.png",general:"/icons/brain.png"}[e]||"/icons/trivia-default.png"}function i(e){const t=[];return e.questionCount&&t.push(`${e.questionCount} questions`),e.avgTime&&t.push(`avg ${e.avgTime}`),void 0!==e.lastScore&&t.push(`last score ${e.lastScore}`),t.join(" â€¢ ")||"10 questions â€¢ avg 6:30"}function a(e=[]){return e.map((e,i)=>({id:e.id||`category-${i}`,name:e.name||e.title||`Category ${i+1}`,type:e.type||"general",posterUrl:e.posterUrl||t(e.type||"general"),questionCount:e.questionCount||10,avgTime:e.avgTime||"6:30",lastScore:e.lastScore,difficulty:e.difficulty||"medium",description:e.description||""}))}function n(e,t){if(!e)return;const{categories:n}=t;if(n){const t=e.querySelector(".trivia-tab__grid");if(t&&window.BasePosterCard){const e=a(n);t.innerHTML=e.map(e=>`\n          <div class="trivia-category-card" data-category-id="${e.id}">\n            ${window.BasePosterCard({id:e.id,posterUrl:e.posterUrl,title:e.name,subline:i(e),hideRating:!0,onClick:()=>{},overflowActions:[{label:"Play",onClick:()=>{},icon:"â–¶ï¸"},{label:"Details",onClick:()=>{},icon:"â„¹ï¸"},{label:"Save",onClick:()=>{},icon:"ðŸ’¾"}]}).outerHTML}\n          </div>\n        `).join("")}}}function o(e){if(!e)return;const t=e.querySelector(".trivia-tab__grid");if(t&&window.createSkeletonCards){const e=window.createSkeletonCards(8);t.innerHTML="",e.forEach(e=>t.appendChild(e))}}window.TriviaTab=e,window.createTriviaCategories=a,window.updateTriviaTab=n,window.showTriviaLoading=o,"undefined"!=typeof window&&(window.TriviaTab=window.TriviaTab||e,window.createTriviaCategories=window.createTriviaCategories||a,window.updateTriviaTab=window.updateTriviaTab||n,window.showTriviaLoading=window.showTriviaLoading||o)}(),function(){const e="community-player",t=["#community-content",".player-placeholder",".community-player-placeholder",".loading-spinner"];function i(e,t){var i,a,n,o,s,r,d,l,c,u;const w=(null==t?void 0:t.rotation)||[];if(0===w.length)return void(e.innerHTML='<div class="c-empty" role="status">Community features are coming soon.</div>');const h=function(e){const t=(new Date).toISOString().split("T")[0],i=new Date(t).getTime();return Math.floor(i/864e5)%e.length}(w),m=w[h];e.innerHTML="";const p=m,g=document.createElement("article");g.className=`c-card type-${(p.type||"").toLowerCase()}`,g.setAttribute("tabindex","0"),(null==(i=p.attribution)?void 0:i.watermark)&&(g.dataset.watermark=p.attribution.watermark);let v="";"image"===(null==(a=p.media)?void 0:a.kind)&&p.media.src?v=`<img src="${p.media.src}" alt="${(null==(n=p.accessibility)?void 0:n.alt)||""}" />`:"video"===(null==(o=p.media)?void 0:o.kind)&&p.media.src&&(v=`<video ${p.media.autoplay?"autoplay":""} ${p.media.muted?"muted":""} ${p.media.poster?`poster="${p.media.poster}"`:""} playsinline>\n          <source src="${p.media.src}" type="video/mp4">\n        </video>`);const f=p.subtitle?`<p class="subtitle">${p.subtitle}</p>`:"",y=p.description?`<p class="desc">${p.description}</p>`:"",_=(null==(r=null==(s=p.stats)?void 0:s.poll)?void 0:r.length)?`<div class="poll" aria-label="Poll results">${p.stats.poll.map(e=>`\n          <div class="bar" role="img" aria-label="${e.label} ${e.percent}%">\n            <span class="label">${e.label}</span>\n            <span class="meter" style="width:${e.percent}%"></span>\n            <span class="pct">${e.percent}%</span>\n          </div>`).join("")}\n        </div>`:"",b="number"==typeof(null==(d=p.stats)?void 0:d.trackedCountToday)?`<div class="stat">Tracked today: ${p.stats.trackedCountToday.toLocaleString()}</div>`:"",S=p.cta?"none"!==p.cta.action?`<a class="cta" href="${p.cta.url||"#"}" aria-label="${p.cta.ariaLabel||p.cta.label}">${p.cta.label}</a>`:`<button class="cta disabled" aria-disabled="true">${p.cta.label||"Coming soon"}</button>`:"";g.innerHTML=`\n      <header>\n        <h3 class="title">${p.title}</h3>\n        ${f}\n      </header>\n      <div class="media">${v||""}</div>\n      <div class="body">\n        ${y}\n        ${_}\n        ${b}\n      </div>\n      <footer>\n        <div class="byline">\n          <img class="avatar" src="${(null==(l=p.attribution)?void 0:l.avatarUrl)||"/assets/avatars/staff.png"}" alt="" />\n          <span class="name">${(null==(c=p.attribution)?void 0:c.displayName)||"Flicklet"}</span>\n          ${(null==(u=p.attribution)?void 0:u.watermark)?`<span class="wm">${p.attribution.watermark}</span>`:""}\n        </div>\n        <div class="actions">${S}</div>\n      </footer>\n    `,e.appendChild(g)}function a(){const a=function(){let t=document.getElementById(e);if(!t){t=document.createElement("section"),t.id=e,t.setAttribute("aria-label","Community Player");const i=document.querySelector(".community-left");i?i.appendChild(t):document.body.appendChild(t)}return t}();t.forEach(e=>document.querySelectorAll(e).forEach(e=>e.remove())),async function(){const e=await fetch("/data/community-seed.json",{cache:"no-store"});if(!e.ok)throw new Error("seed fetch failed");return e.json()}().then(e=>{i(a,e)}).catch(e=>{a.innerHTML='<div class="c-empty" role="status">Community features are coming soon.</div>'})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):setTimeout(a,100)}(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>M().catch(e=>{})):M().catch(e=>{}),window.addEventListener("DOMContentLoaded",M),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>$().catch(console.error)):$().catch(console.error),document.addEventListener("click",e=>{const t=e.target;t&&("settingsTab"===t.id||t.closest&&t.closest("#settingsTab"))&&queueMicrotask(B)}),new MutationObserver(()=>{document.querySelector("#settingsSection.tab-section:not([hidden])")&&B()}).observe(document.documentElement,{attributes:!0,subtree:!0,attributeFilter:["class"]}),window.addEventListener("DOMContentLoaded",$);const W={schema:null,saved:{},draft:{},dirty:!1,errors:{}};function R(e,t=document){return t.querySelector(e)}function z(e){W.dirty=!!e;const t=R("#settingsSection");t&&(t.dataset.dirty=W.dirty?"true":"false");const i=R("#settingsSave"),a=R("#settingsCancel"),n=R("#settingsReset");i&&(i.disabled=!W.dirty||Object.keys(W.errors).length>0),a&&(a.disabled=!W.dirty),n&&(n.disabled=!1)}const G={"#displayNameInput":"user.displayName","#langToggle":"app.language","#settingCuratedRows":"home.curatedRows","#settingCurrentlyWatchingLimit":"home.currentlyWatchingLimit","#mardiOverlayToggle":"ui.mardiGrasOverlay","#notifEpisodes":"notif.episodes","#notifDiscover":"notif.discover","#notifDigest":"notif.monthlyDigest","#enableEpisodeTracking":"cards.episodeTracking","#advOn":"pro.advancedNotifications","#themePackSelect":"pro.themePack"};function H(){for(const[t,i]of Object.entries(G)){const e=R(t);if(!e)continue;const a=W.draft[i];"checkbox"===e.type||"radio"===e.type?e.checked=!!a:e.value=String(a??"")}const e={system:"#themeSystem",light:"#themeLight",dark:"#themeDark"}[W.draft["ui.theme"]];e&&R(e)&&(R(e).checked=!0),W.errors=q(W.schema,W.draft,G),z(W.dirty)}function V(){var e,t;const i={"#displayNameInput":["user.displayName",e=>String(e)],"#langToggle":["app.language",e=>String(e)],"#settingCuratedRows":["home.curatedRows",e=>Number(e)],"#settingCurrentlyWatchingLimit":["home.currentlyWatchingLimit",e=>Number(e)],"#mardiOverlayToggle":["ui.mardiGrasOverlay",e=>!!e],"#notifEpisodes":["notif.episodes",e=>!!e],"#notifDiscover":["notif.discover",e=>!!e],"#notifDigest":["notif.monthlyDigest",e=>!!e],"#enableEpisodeTracking":["cards.episodeTracking",e=>!!e],"#advOn":["pro.advancedNotifications",e=>!!e],"#themePackSelect":["pro.themePack",e=>String(e)]};for(const[n,[o,s]]of Object.entries(i)){const e=R(n);if(!e)continue;const t="checkbox"===e.type||"radio"===e.type?e.checked:e.value;W.draft[o]=s(t)}const a=(null==(e=R("#themeLight"))?void 0:e.checked)?"light":(null==(t=R("#themeDark"))?void 0:t.checked)?"dark":"system";W.draft["ui.theme"]=a,W.errors=q(W.schema,W.draft,G)}function j(){(function(e,t=document){return Array.from(t.querySelectorAll(e))})("#settingsSection input, #settingsSection select, #settingsSection textarea").forEach(e=>{e.__draft||(e.addEventListener("input",()=>{V(),z(!0)}),e.addEventListener("change",()=>{V(),z(!0)}),e.__draft=!0)})}async function J(){W.schema=await E(),L(W.schema),W.saved=function(e){const t={};for(const i of e.settings)t[i.storageKey]=A(i.storageKey,i.default);return t}(W.schema),W.draft={...W.saved},z(!1),H(),j();const e=R("#settingsSave"),t=R("#settingsCancel"),i=R("#settingsReset");e&&!e.__fx&&(e.addEventListener("click",()=>{V(),Object.keys(W.errors).length>0||(function(){for(const[e,t]of Object.entries(W.draft))W.saved[e]!==t&&D(e,t);W.saved={...W.draft}}(),document.documentElement.setAttribute("data-theme",W.saved["ui.theme"]||"light"),document.documentElement.lang=String(W.saved["app.language"]||"en"),document.body.classList.toggle("mardi-gras",!!W.saved["ui.mardiGrasOverlay"]),z(!1))}),e.__fx=!0),t&&!t.__fx&&(t.addEventListener("click",()=>{W.draft={...W.saved},H(),z(!1)}),t.__fx=!0),i&&!i.__fx&&(i.addEventListener("click",()=>{if(!confirm("Reset all settings to defaults?"))return;const e={};for(const t of W.schema.settings)e[t.storageKey]=t.default;W.draft=e,H(),z(!0)}),i.__fx=!0)}document.addEventListener("click",e=>{const t=e.target;t&&("settingsTab"===t.id||t.closest&&t.closest("#settingsTab"))&&queueMicrotask(()=>J().catch(console.error))}),new MutationObserver(()=>{document.querySelector("#settingsSection.tab-section:not([hidden])")&&J().catch(console.error)}).observe(document.documentElement,{attributes:!0,subtree:!0,attributeFilter:["class"]}),window.addEventListener("DOMContentLoaded",J),function(){const e=[{sel:"#enableEpisodeTracking",type:"checkbox"},{sel:"#advOn",type:"checkbox"},{sel:"#themePackSelect",type:"select"}];function t(t){e.forEach(({sel:e})=>{const i=document.querySelector(e);i&&(i.disabled=!t,i.classList.toggle("pro-locked",!t),t?(i.removeAttribute("title"),i.removeAttribute("aria-disabled")):(i.setAttribute("title","Pro feature"),i.setAttribute("aria-disabled","true")))});const i=document.querySelector("#settingsSection");i&&(i.dataset.pro=t?"true":"false")}function i(){t(function(){if(window.FLAGS&&"boolean"==typeof window.FLAGS.proEnabled)return!!window.FLAGS.proEnabled;try{const e=localStorage.getItem("flicklet:pro.enabled");return!!e&&!0===JSON.parse(e)}catch{return!1}}())}window.flickletSetPro=function(e){try{window.FLAGS=window.FLAGS||{},window.FLAGS.proEnabled=!!e}catch{}t(!!e)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}()}},function(){return i||(0,e[a(e)[0]])((i={exports:{}}).exports,i),i.exports});export default n();

```

## ios\App\App\public\assets\community-522739e7.js
```
import{_ as j}from"./modals-5fe29d8c.js";import{j as e,b as k,F as R,T as V}from"./games-23f18348.js";import{r as o}from"./react-vendor-b1791c80.js";function Y(l){const[h,d]=o.useState(!0),[b,s]=o.useState(null),[r,x]=o.useState(0),[N,y]=o.useState(""),g=o.useRef(null),n=o.useRef(null),a=o.useRef(null),c=["68xPqmT0jC4","l8XxoeV5LRU","WyXuRmXbS7U","LwBS3a9HOWI","55892jT06aI","Ut1xOFdASa0"],m=["A Year of Shudder (2024) Sizzle","V/H/S/HALLOWEEN | Official Trailer","In a Violent Nature | Official Trailer","The Salvation | Official Trailer","The China Hustle | Official Trailer","Hold Your Fire | Official Trailer"],T=["Horror Collection","Horror Collection","Horror Collection","Action Collection","Dark Documentary","Dark Documentary"],f=()=>{const t=(r+1)%c.length;if(x(t),y(m[t]),n.current)try{n.current.loadVideoById(c[t]),console.log(`ðŸŽ¬ Rotated to video ${t+1}/${c.length}: ${m[t]}`)}catch(u){console.error("ðŸŽ¬ Error rotating to next video:",u),setTimeout(()=>f(),1e3)}},v=()=>{a.current&&clearInterval(a.current),a.current=setInterval(()=>{f()},3e4),console.log("ðŸŽ¬ Video rotation timer started (30s intervals)")},w=()=>{a.current&&(clearInterval(a.current),a.current=null,console.log("ðŸŽ¬ Video rotation timer stopped"))};o.useEffect(()=>{y(m[r]);const t=()=>{if(window.YT&&window.YT.Player)u();else if(document.querySelector('script[src="https://www.youtube.com/iframe_api"]'))window.onYouTubeIframeAPIReady=u;else{const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",i.async=!0,i.onload=()=>{console.log("ðŸŽ¬ YouTube API script loaded")},i.onerror=()=>{console.error("ðŸŽ¬ Failed to load YouTube API script"),s("Failed to load YouTube API"),d(!1)},document.head.appendChild(i),window.onYouTubeIframeAPIReady=u}},u=()=>{if(!g.current){console.error("ðŸŽ¬ Player ref not available"),s("Player container not available"),d(!1);return}try{console.log("ðŸŽ¬ Initializing YouTube player with rotation...");const p=c[r];n.current=new window.YT.Player(g.current,{height:"100%",width:"100%",videoId:p,playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,fs:1,cc_load_policy:0,enablejsapi:1,origin:window.location.origin,privacy_mode:1,host:"https://www.youtube-nocookie.com"},events:{onReady:()=>{console.log(`ðŸŽ¬ YouTube player ready with video: ${m[r]}`),d(!1),s(null),v()},onStateChange:i=>{console.log("ðŸŽ¬ Player state changed:",i.data),i.data===window.YT.PlayerState.PLAYING&&console.log("ðŸŽ¬ Video started playing")},onError:i=>{console.error("ðŸŽ¬ YouTube player error:",i.data),console.log("ðŸŽ¬ Attempting to load next video due to error"),setTimeout(()=>f(),2e3)}}})}catch(p){console.error("ðŸŽ¬ Failed to initialize YouTube player:",p),s("Failed to initialize video player"),d(!1)}},S=setTimeout(()=>{t()},100);return()=>{if(clearTimeout(S),w(),n.current)try{n.current.destroy()}catch(p){console.warn("ðŸŽ¬ Error destroying player:",p)}}},[r]);const P=()=>{n.current&&(n.current.getPlayerState()===window.YT.PlayerState.PLAYING?n.current.pauseVideo():n.current.playVideo())},_=()=>{f()},I=()=>{const t=r===0?c.length-1:r-1;if(x(t),y(m[t]),n.current)try{n.current.loadVideoById(c[t]),console.log(`ðŸŽ¬ Rotated to previous video ${t+1}/${c.length}: ${m[t]}`)}catch(u){console.error("ðŸŽ¬ Error rotating to previous video:",u)}},C=()=>{a.current?w():v()};return b?e.jsx("div",{className:"youtube-player-error",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h3",{children:"ðŸŽ¬ Community Player"}),e.jsx("p",{children:"Unable to load video content"}),e.jsx("button",{className:"retry-btn",onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsxs("div",{className:"youtube-player-container max-w-[420px] md:max-w-[560px] mx-auto bg-neutral-900/70 border border-neutral-800/50 rounded-2xl shadow-[0_0_20px_rgba(0,0,0,0.5)] hover:shadow-[0_0_30px_rgba(0,0,0,0.8)] transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-400 opacity-60",children:"ðŸŽ¬ Community Player"}),e.jsxs("span",{className:"text-xs font-medium text-blue-400",children:[r+1,"/",c.length," ",T[r]]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:I,title:"Previous Video",children:"â®ï¸"}),e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:P,title:"Play/Pause",children:"â¯ï¸"}),e.jsx("button",{className:"control-btn w-5 h-5 hover:bg-blue-500/30 rounded-md p-1 transition-colors",onClick:_,title:"Next Video",children:"â­ï¸"}),e.jsx("button",{className:`control-btn w-5 h-5 rounded-md p-1 transition-colors ${a.current?"bg-blue-500/30 animate-pulse":"hover:bg-blue-500/30"}`,onClick:C,title:a.current?"Stop Auto-Rotation":"Start Auto-Rotation",children:"ðŸ”„"})]})]}),e.jsxs("div",{className:"my-3 px-3",children:[h&&e.jsxs("div",{className:"player-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading video content..."})]}),e.jsx("div",{className:"aspect-video rounded-xl overflow-hidden border border-neutral-700/60 mx-auto shadow-inner",children:e.jsx("div",{ref:g,className:"youtube-player w-full h-full",style:{display:h?"none":"block"}})})]}),e.jsxs("div",{className:"bg-neutral-950/80 rounded-b-2xl p-3 flex flex-col items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-200 text-center",children:N}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center transition-opacity duration-700",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"ðŸŽž Official Trailer"}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"â± 2â€“3 min"}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/80 text-xs text-neutral-300",children:"ðŸ”’ Privacy Enhanced"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs transition-opacity duration-700 ${a.current?"bg-blue-900/40 text-blue-300":"bg-neutral-800/80 text-neutral-300"}`,children:a.current?"â™»ï¸ Auto-Rotating":"â¸ï¸ Manual"})]})]})]})}const A=o.lazy(()=>j(()=>import("./games-23f18348.js").then(l=>l.e),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"])),O=o.lazy(()=>j(()=>import("./games-23f18348.js").then(l=>l.f),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"]));function W(){const l=k(),[h,d]=o.useState(!1),[b,s]=o.useState(!1),r=()=>{typeof window.openFlickWordModal=="function"?window.openFlickWordModal():d(!0)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{"data-rail":"community",className:"grid md:grid-cols-3 gap-4 items-stretch",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(Y,{})}),e.jsxs("div",{className:"grid grid-rows-[1fr_1fr] gap-4 h-full",children:[e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors",onClick:r,children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:l.flickword||"FlickWord"}),e.jsx("p",{className:"text-xs text-neutral-400 mb-3",children:l.flickword_tagline||"Wordle-style daily word play"})]}),e.jsx("div",{className:"mt-auto",children:e.jsx(R,{})}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded-lg transition-colors",onClick:x=>{x.stopPropagation(),r()},children:l.play_now||"Play Now"})})]}),e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-between cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>s(!0),children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:l.daily_trivia||"Daily Trivia"}),e.jsx("p",{className:"text-xs text-neutral-400 mb-3",children:l.daily_trivia_tagline||"Fresh question, new bragging rights"})]}),e.jsx("div",{className:"mt-auto mb-3",children:e.jsx(V,{})}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{className:"w-full px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs font-semibold rounded-lg transition-colors",onClick:x=>{x.stopPropagation(),s(!0)},children:l.play_now||"Play Now"})})]})]}),e.jsxs("div",{className:"rounded-2xl bg-neutral-900 border border-white/5 p-4 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸš€"}),e.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"More community features and interactive content coming your way!"})]})]}),e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading FlickWord..."}),children:e.jsx(A,{isOpen:h,onClose:()=>d(!1)})}),e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading Trivia..."}),children:e.jsx(O,{isOpen:b,onClose:()=>s(!1)})})]})}export{W as C};

```

## ios\App\App\public\assets\games-23f18348.js
```
var me=Object.defineProperty;var ge=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var I=(s,e,t)=>(ge(s,typeof e!="symbol"?e+"":e,t),t);import{r as n,R as Q,a as pe}from"./react-vendor-b1791c80.js";var se={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=n,ye=Symbol.for("react.element"),we=Symbol.for("react.fragment"),Se=Object.prototype.hasOwnProperty,Ae=fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Te={key:!0,ref:!0,__self:!0,__source:!0};function oe(s,e,t){var o,l={},i=null,r=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(r=e.ref);for(o in e)Se.call(e,o)&&!Te.hasOwnProperty(o)&&(l[o]=e[o]);if(s&&s.defaultProps)for(o in e=s.defaultProps,e)l[o]===void 0&&(l[o]=e[o]);return{$$typeof:ye,type:s,key:i,ref:r,props:l,_owner:Ae.current}}q.Fragment=we;q.jsx=oe;q.jsxs=oe;se.exports=q;var a=se.exports;const Ee={en:{home:"Home",currentlyWatching:"Currently Watching",wantToWatch:"Want to Watch",watched:"Watched",alreadyWatched:"Already Watched",holidays:"Holidays",discovery:"Discovery",wantToWatchAction:"Want to Watch",currentlyWatchingAction:"Currently Watching",watchedAction:"Watched",notInterestedAction:"Not Interested",deleteAction:"Delete",removeAction:"Remove",reviewNotesAction:"Review/Notes",addTagAction:"Add Tag",holidayAddAction:"Holiday +",settings:"Settings",general:"General",notifications:"Notifications",layout:"Layout",data:"Data",pro:"Pro",about:"About",displayName:"Display Name",myStatistics:"My Statistics",tvShows:"TV Shows",movies:"Movies",notInterestedManagement:"Not Interested Management",manageNotInterestedList:"Manage Not Interested List",personalityLevel:"Personality Level",regular:"Regular",semiSarcastic:"Semi-sarcastic",severelySarcastic:"Severely sarcastic",friendlyAndHelpful:"Friendly and helpful",aBitCheeky:"A bit cheeky",maximumSass:"Maximum sass",preview:"Preview",resetSystemToDefaults:"Reset System to Defaults",themePreference:"Theme Preference",dark:"Dark",light:"Light",darkBackgroundWithLightText:"Dark background with light text",lightBackgroundWithDarkText:"Light background with dark text",basicCustomization:"Basic Customization",condensedView:"Condensed View",enableEpisodeTracking:"Enable Episode Tracking",proFeatures:"Pro Features",themePacksComingSoon:"Theme packs coming soon...",myLists:"My Lists",enterListName:"Enter list name:",addToList:"Add to List",selectListFor:"Select a list for",items:"items",noListsYet:"No lists created yet",createFirstList:"Create Your First List",createNewList:"Create New List",listName:"List name",listDescription:"List description (optional)",default:"Default",edit:"Edit",setAsDefault:"Set as Default",delete:"Delete",noListsCreated:"No lists created yet",createYourFirstList:"Create Your First List",listsUsed:"Lists used",confirmDeleteList:"Are you sure you want to delete",thisActionCannotBeUndone:"This action cannot be undone.",save:"Save",cancel:"Cancel",darkThemeDescription:"Dark background with light text",lightThemeDescription:"Light background with dark text",enterNewName:"Enter new name:",rename:"Rename",addItemsFromSearchOrDiscovery:"Add items from search or discovery",createListsToOrganize:"Create lists to organize your favorite shows and movies",maxListsReached:"Maximum lists reached",upgradeForMoreLists:"Upgrade to Pro for more lists",upgradeToPro:"Upgrade to Pro",proUpgradeComingSoon:"Pro upgrade coming soon!",itemAlreadyExists:"Item Already Exists",alreadyInList:"is already in",confirmMoveToList:"Do you want to move it to the selected list?",moveToList:"Move to List",notificationTypes:"Notification Types",upcomingEpisodeAlerts:"Upcoming episode alerts",weeklyDiscover:"Weekly discover",monthlyStatsDigest:"Monthly stats digest",alertConfiguration:"Alert Configuration (Pro)",advancedNotificationByLeadTime:"Advanced notification by lead time in hours",pickTheList:"Pick the list (currently watching or want to watch)",standardDataManagement:"Standard Data Management",shareList:"Share List",chooseListsAndShowsToShare:"Choose lists and shows to share",generatesCopyPasteableFormattedList:"Generates copy/pasteable formatted list with Flicklet branding and link",backupSystem:"Backup System (JSON)",exportAllPersonalData:"Export all personal data",import:"Import (JSON)",importPreviouslyExportedData:"Import previously exported data",resetAllData:"Reset All Data",restoreSystemToDefaults:"Restore system to defaults",advancedSharingOptions:"Advanced sharing options",proManagement:"Pro Management",unlockProFeatures:"Unlock pro features button (payment prompt - not implemented)",paymentPromptNotImplemented:"Payment prompt - not implemented",proFeatureList:"Pro feature list and descriptions",alertConfigurationDetails:"Alert configuration details (hourly config)",hourlyConfig:"Hourly config",themePacks:"Theme packs (holiday and movie themes - not implemented)",holidayAndMovieThemes:"Holiday and movie themes - not implemented",socialFeatures:"Social features (FlickWord, Trivia, shared watchlists among friends)",flickwordTriviaSharedWatchlists:"FlickWord, Trivia, shared watchlists among friends",bloopersBehindTheScenes:"Bloopers/Behind the scenes (activates button on show cards)",activatesButtonOnShowCards:"Activates button on show cards",additionalFeaturesTBD:"Additional features TBD",informationSections:"Information Sections",aboutUniqueForYou:"About unique for you",aboutTheCreators:"About the creators",aboutTheApp:"About the app",shareYourThoughts:"Share your thoughts (feedback, quotes for marquee, clips for home page player, venting, etc.)",feedbackQuotesForMarquee:"Feedback, quotes for marquee, clips for home page player, venting, etc.",clipsForHomePagePlayer:"Clips for home page player",venting:"Venting",signIn:"Sign In",signOut:"Sign Out",signInHere:"Sign in here",clickToSignOut:"Click to sign out",clickToSignIn:"Click to sign in",signedInAs:"Signed in as",signInWithGoogle:"Sign in with Google",signInWithApple:"Sign in with Apple",signInWithEmail:"Sign in with Email",signInDescription:"Sign in to sync your lists across devices",welcomeToFlicklet:"Welcome to Flicklet!",whatShouldWeCallYou:"What should we call you?",username:"Username",usernameRequired:"Username is required",usernameDescription:"This will be used for personalized messages",saving:"Saving...",skip:"Skip",close:"Close",confirm:"Confirm",areYouSure:"Are you sure?",comingSoon:"Coming soon...",notImplemented:"Not implemented",yourShows:"Your Shows",upNext:"Up Next",inTheatersNearYou:"In Theaters Near You",noShowsInCurrentlyWatching:"No shows in your currently watching list. Add some from search or discovery!",addSomeFromSearchOrDiscovery:"Add some from search or discovery!",noUpcomingEpisodes:"No upcoming episodes. Add TV shows to your watching list to see when new episodes air!",addTvShowsToWatchingList:"Add TV shows to your watching list to see when new episodes air!",noPoster:"No poster",currentlyWatchingCount:"Currently Watching",wantToWatchCount:"Want to Watch",watchedCount:"Watched",totalCount:"Total",tellUsWhatToImprove:"Tell us what to improve",typeYourFeedback:"Type your feedback...",sendFeedback:"Send Feedback",whatsComing:"What's coming",betterRecommendations:"Better recommendations",episodeUpNextWithDates:'Episode "Up Next" with dates',shareListsWithFriends:"Share lists with friends",yourLocalTheater:"Your Local Theater",logIn:"Log in",logOut:"Log out",guest:"Guest",noSynopsisAvailable:"No synopsis available.",opensInTmdb:"Opens in TMDB",searchFailed:"Search failed",procrastinatingProductively:"Procrastinating productively.",curatingYourIndecision:"Curating your indecision.",becauseTimeIsAnIllusion:"Because time is an illusion.",cinemaNowWithCommitmentIssues:"Cinema, now with commitment issues.",yourBacklogCalledItsGrowing:"Your backlog called. It's growing.",areYouSureChangeDisplayName:"Are you sure you want to change your display name?",thisWillUpdateYourProfile:"This will update your profile.",areYouSureResetSettings:"Are you sure you want to reset all settings to defaults?",language:"Language",english:"English",spanish:"EspaÃ±ol",community:"Community",forYou:"For you",feedback:"Feedback",flickword:"FlickWord",flickword_tagline:"Wordle-style daily word play",daily_trivia:"Daily Trivia",daily_trivia_tagline:"Fresh question, new bragging rights",play_now:"Play Now",close_game:"Close Game",games:"Games",won:"Won",lost:"Lost",streak:"Streak",best:"Best",win_percent:"Win %",played:"Played",accuracy:"Accuracy",detectingLocation:"Detecting your location...",locationUnavailable:"Location unavailable",enableLocation:"Enable location",hideShowtimes:"Hide",findShowtimes:"Find",loadingTheaters:"Loading theaters...",noTheatersFound:"No theaters found nearby. Try expanding your search radius.",kmAway:"km away",hideTimes:"Hide",showTimes:"Show",todaysShowtimes:"Today's Showtimes:",drama:"Drama",comedy:"Comedy",horror:"Horror",nowPlaying:"Now Playing",hasExquisiteTaste:"Has exquisite taste",definitelyNotProcrastinating:"Definitely not procrastinating",breaksForPopcornOnly:"Breaks for popcorn only",curatesChaosLikeAPro:"Curates chaos like a pro",community_player_placeholder:"Community content coming soon",dataManagementComingSoon:"Data management features coming soon",searchPlaceholder:"Search movies, shows, peopleâ€¦",allGenres:"All genres",action:"Action",search:"Search",clear:"Clear",showMarquee:"Show marquee",hideMarquee:"Hide",marqueeMessage1:"I'm sorry, Dave. I'm afraid I can't do that.",marqueeMessage2:"Roads? Where we're going, we don't need roads.",marqueeMessage3:"Houston, we have a problem.",marqueeMessage4:"May the odds be ever in your favor.",marqueeMessage5:"I'll be back."},es:{home:"Inicio",currentlyWatching:"Viendo Ahora",wantToWatch:"Quiero Ver",watched:"Visto",alreadyWatched:"Ya Visto",holidays:"Fiestas",discovery:"Descubrir",wantToWatchAction:"Quiero Ver",currentlyWatchingAction:"Viendo Ahora",watchedAction:"Visto",notInterestedAction:"No Me Interesa",deleteAction:"Eliminar",removeAction:"Quitar",reviewNotesAction:"ReseÃ±a/Notas",addTagAction:"Agregar Etiqueta",holidayAddAction:"Fiesta +",settings:"ConfiguraciÃ³n",general:"General",notifications:"Notificaciones",layout:"DiseÃ±o",data:"Datos",pro:"Pro",about:"Acerca De",displayName:"Nombre de Pantalla",myStatistics:"Mis EstadÃ­sticas",tvShows:"Programas de TV",movies:"PelÃ­culas",notInterestedManagement:"GestiÃ³n de No Me Interesa",manageNotInterestedList:"Gestionar Lista de No Me Interesa",personalityLevel:"Nivel de Personalidad",regular:"Regular",semiSarcastic:"Semi-sarcÃ¡stico",severelySarcastic:"Severamente sarcÃ¡stico",friendlyAndHelpful:"Amigable y Ãºtil",aBitCheeky:"Un poco descarado",maximumSass:"MÃ¡ximo descaro",preview:"Vista Previa",resetSystemToDefaults:"Restablecer Sistema a Valores Predeterminados",themePreference:"Preferencia de Tema",dark:"Oscuro",light:"Claro",darkBackgroundWithLightText:"Fondo oscuro con texto claro",lightBackgroundWithDarkText:"Fondo claro con texto oscuro",basicCustomization:"PersonalizaciÃ³n BÃ¡sica",condensedView:"Vista Condensada",enableEpisodeTracking:"Habilitar Seguimiento de Episodios",proFeatures:"CaracterÃ­sticas Pro",themePacksComingSoon:"Paquetes de temas prÃ³ximamente...",myLists:"Mis Listas",enterListName:"Ingresa nombre de lista:",addToList:"Agregar a Lista",selectListFor:"Selecciona una lista para",items:"elementos",noListsYet:"AÃºn no hay listas creadas",createFirstList:"Crea Tu Primera Lista",createNewList:"Crear Nueva Lista",listName:"Nombre de lista",listDescription:"DescripciÃ³n de lista (opcional)",default:"Predeterminada",edit:"Editar",setAsDefault:"Establecer como Predeterminada",delete:"Eliminar",noListsCreated:"AÃºn no hay listas creadas",createYourFirstList:"Crea Tu Primera Lista",listsUsed:"Listas usadas",confirmDeleteList:"Â¿EstÃ¡s seguro de que quieres eliminar",thisActionCannotBeUndone:"Esta acciÃ³n no se puede deshacer.",save:"Guardar",cancel:"Cancelar",darkThemeDescription:"Fondo oscuro con texto claro",lightThemeDescription:"Fondo claro con texto oscuro",enterNewName:"Ingresa nuevo nombre:",rename:"Renombrar",addItemsFromSearchOrDiscovery:"Agregar elementos desde bÃºsqueda o descubrimiento",createListsToOrganize:"Crea listas para organizar tus programas y pelÃ­culas favoritas",maxListsReached:"MÃ¡ximo de listas alcanzado",upgradeForMoreLists:"Actualiza a Pro para mÃ¡s listas",upgradeToPro:"Actualizar a Pro",proUpgradeComingSoon:"Â¡ActualizaciÃ³n a Pro prÃ³ximamente!",itemAlreadyExists:"El Elemento Ya Existe",alreadyInList:"ya estÃ¡ en",confirmMoveToList:"Â¿Quieres moverlo a la lista seleccionada?",moveToList:"Mover a Lista",notificationTypes:"Tipos de NotificaciÃ³n",upcomingEpisodeAlerts:"Alertas de episodios prÃ³ximos",weeklyDiscover:"Descubrimiento semanal",monthlyStatsDigest:"Resumen de estadÃ­sticas mensuales",alertConfiguration:"ConfiguraciÃ³n de Alertas (Pro)",advancedNotificationByLeadTime:"NotificaciÃ³n avanzada por tiempo de anticipaciÃ³n en horas",pickTheList:"Elige la lista (viendo ahora o quiero ver)",standardDataManagement:"GestiÃ³n de Datos EstÃ¡ndar",shareList:"Compartir Lista",chooseListsAndShowsToShare:"Elige listas y programas para compartir",generatesCopyPasteableFormattedList:"Genera lista formateada copiable/pegable con marca Flicklet y enlace",backupSystem:"Sistema de Respaldo (JSON)",exportAllPersonalData:"Exportar todos los datos personales",import:"Importar (JSON)",importPreviouslyExportedData:"Importar datos previamente exportados",resetAllData:"Restablecer Todos los Datos",restoreSystemToDefaults:"Restaurar sistema a valores predeterminados",advancedSharingOptions:"Opciones de compartir avanzadas",proManagement:"GestiÃ³n Pro",unlockProFeatures:"BotÃ³n de desbloquear caracterÃ­sticas pro (prompt de pago - no implementado)",paymentPromptNotImplemented:"Prompt de pago - no implementado",proFeatureList:"Lista de caracterÃ­sticas pro y descripciones",alertConfigurationDetails:"Detalles de configuraciÃ³n de alertas (configuraciÃ³n por horas)",hourlyConfig:"ConfiguraciÃ³n por horas",themePacks:"Paquetes de temas (temas de fiestas y pelÃ­culas - no implementado)",holidayAndMovieThemes:"Temas de fiestas y pelÃ­culas - no implementado",socialFeatures:"CaracterÃ­sticas sociales (FlickWord, Trivia, listas compartidas entre amigos)",flickwordTriviaSharedWatchlists:"FlickWord, Trivia, listas compartidas entre amigos",bloopersBehindTheScenes:"Bloopers/DetrÃ¡s de escena (activa botÃ³n en tarjetas de programas)",activatesButtonOnShowCards:"Activa botÃ³n en tarjetas de programas",additionalFeaturesTBD:"CaracterÃ­sticas adicionales por determinar",informationSections:"Secciones de InformaciÃ³n",aboutUniqueForYou:"Acerca de Ãºnico para ti",aboutTheCreators:"Acerca de los creadores",aboutTheApp:"Acerca de la aplicaciÃ³n",shareYourThoughts:"Comparte tus pensamientos (comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.)",feedbackQuotesForMarquee:"Comentarios, citas para marquesina, clips para reproductor de pÃ¡gina principal, desahogo, etc.",clipsForHomePagePlayer:"Clips para reproductor de pÃ¡gina principal",venting:"Desahogo",signIn:"Iniciar SesiÃ³n",signOut:"Cerrar SesiÃ³n",signInHere:"Inicia sesiÃ³n aquÃ­",clickToSignOut:"Haz clic para cerrar sesiÃ³n",clickToSignIn:"Haz clic para iniciar sesiÃ³n",signedInAs:"Conectado como",signInWithGoogle:"Iniciar sesiÃ³n con Google",signInWithApple:"Iniciar sesiÃ³n con Apple",signInWithEmail:"Iniciar sesiÃ³n con Email",signInDescription:"Inicia sesiÃ³n para sincronizar tus listas entre dispositivos",welcomeToFlicklet:"Â¡Bienvenido a Flicklet!",whatShouldWeCallYou:"Â¿CÃ³mo deberÃ­amos llamarte?",username:"Nombre de usuario",usernameRequired:"El nombre de usuario es requerido",usernameDescription:"Esto se usarÃ¡ para mensajes personalizados",saving:"Guardando...",skip:"Omitir",close:"Cerrar",confirm:"Confirmar",areYouSure:"Â¿EstÃ¡s seguro?",comingSoon:"PrÃ³ximamente...",notImplemented:"No implementado",yourShows:"Tus Programas",upNext:"PrÃ³ximamente",inTheatersNearYou:"En Cines Cerca de Ti",noShowsInCurrentlyWatching:"No hay programas en tu lista de viendo ahora. Â¡Agrega algunos desde bÃºsqueda o descubrimiento!",addSomeFromSearchOrDiscovery:"Â¡Agrega algunos desde bÃºsqueda o descubrimiento!",noUpcomingEpisodes:"No hay episodios prÃ³ximos. Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!",addTvShowsToWatchingList:"Â¡Agrega programas de TV a tu lista de viendo para ver cuÃ¡ndo salen nuevos episodios!",noPoster:"Sin pÃ³ster",currentlyWatchingCount:"Viendo Ahora",wantToWatchCount:"Quiero Ver",watchedCount:"Visto",totalCount:"Total",tellUsWhatToImprove:"Dinos quÃ© mejorar",typeYourFeedback:"Escribe tu comentario...",sendFeedback:"Enviar Comentario",whatsComing:"Lo que viene",betterRecommendations:"Mejores recomendaciones",episodeUpNextWithDates:'Episodio "PrÃ³ximo" con fechas',shareListsWithFriends:"Compartir listas con amigos",yourLocalTheater:"Tu Cine Local",logIn:"Iniciar sesiÃ³n",logOut:"Cerrar sesiÃ³n",guest:"Invitado",noSynopsisAvailable:"Sin sinopsis disponible.",opensInTmdb:"Abre en TMDB",searchFailed:"BÃºsqueda fallida",procrastinatingProductively:"Procrastinando productivamente.",curatingYourIndecision:"Curando tu indecisiÃ³n.",becauseTimeIsAnIllusion:"Porque el tiempo es una ilusiÃ³n.",cinemaNowWithCommitmentIssues:"Cine, ahora con problemas de compromiso.",yourBacklogCalledItsGrowing:"Tu lista pendiente llamÃ³. EstÃ¡ creciendo.",areYouSureChangeDisplayName:"Â¿EstÃ¡s seguro de que quieres cambiar tu nombre de pantalla?",thisWillUpdateYourProfile:"Esto actualizarÃ¡ tu perfil.",areYouSureResetSettings:"Â¿EstÃ¡s seguro de que quieres restablecer todas las configuraciones a los valores predeterminados?",language:"Idioma",english:"English",spanish:"EspaÃ±ol",community:"Comunidad",forYou:"Para ti",feedback:"Comentarios",flickword:"FlickWord",flickword_tagline:"Juego de palabras diario estilo Wordle",daily_trivia:"Trivia Diaria",daily_trivia_tagline:"Pregunta fresca, nuevos derechos de presumir",play_now:"Jugar Ahora",close_game:"Cerrar Juego",games:"Juegos",won:"Ganados",lost:"Perdidos",streak:"Racha",best:"Mejor",win_percent:"% Ganados",played:"Jugados",accuracy:"PrecisiÃ³n",detectingLocation:"Detectando tu ubicaciÃ³n...",locationUnavailable:"UbicaciÃ³n no disponible",enableLocation:"Habilitar ubicaciÃ³n",hideShowtimes:"Ocultar",findShowtimes:"Buscar",loadingTheaters:"Cargando cines...",noTheatersFound:"No se encontraron cines cerca. Intenta expandir tu radio de bÃºsqueda.",kmAway:"km de distancia",hideTimes:"Ocultar",showTimes:"Mostrar",todaysShowtimes:"Horarios de Hoy:",hasExquisiteTaste:"Tiene gusto exquisito",definitelyNotProcrastinating:"Definitivamente no procrastinando",breaksForPopcornOnly:"Descansos solo para palomitas",curatesChaosLikeAPro:"CuradurÃ­a del caos como profesional",community_player_placeholder:"Contenido comunitario prÃ³ximamente",dataManagementComingSoon:"Funciones de gestiÃ³n de datos prÃ³ximamente",drama:"Drama",comedy:"Comedia",horror:"Terror",nowPlaying:"En Cartelera",searchPlaceholder:"Buscar pelÃ­culas, programas, personasâ€¦",allGenres:"Todos los gÃ©neros",action:"AcciÃ³n",search:"Buscar",clear:"Limpiar",showMarquee:"Mostrar marquesina",hideMarquee:"Ocultar",marqueeMessage1:"Lo siento, Dave. Me temo que no puedo hacer eso.",marqueeMessage2:"Â¿Carreteras? A donde vamos, no necesitamos carreteras.",marqueeMessage3:"Houston, tenemos un problema.",marqueeMessage4:"Que la suerte estÃ© siempre de tu lado.",marqueeMessage5:"VolverÃ©."}},X="flicklet.language.v2";class ve{constructor(){I(this,"currentLanguage");I(this,"subscribers",new Set);this.currentLanguage=this.loadLanguage()}loadLanguage(){try{const e=localStorage.getItem(X);if(e&&(e==="en"||e==="es"))return e}catch(e){console.error("Failed to load language from localStorage",e)}return"en"}saveLanguage(){localStorage.setItem(X,this.currentLanguage),this.emitChange()}emitChange(){this.subscribers.forEach(e=>e())}getLanguage(){return this.currentLanguage}setLanguage(e){this.currentLanguage=e,this.saveLanguage()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}getTranslations(){return Ee[this.currentLanguage]}}const P=new ve;function Ze(){const[s,e]=n.useState(P.getLanguage());return n.useEffect(()=>P.subscribe(()=>{e(P.getLanguage())}),[]),s}function ie(){const[s,e]=n.useState(P.getTranslations());return n.useEffect(()=>P.subscribe(()=>{e(P.getTranslations())}),[]),s}function et(s){P.setLanguage(s)}const Y={displayName:"Guest",personalityLevel:1,notifications:{upcomingEpisodes:!0,weeklyDiscover:!0,monthlyStats:!0},layout:{condensedView:!1,theme:"dark",homePageLists:["currently-watching","up-next","community","for-you-drama","for-you-comedy","for-you-horror","in-theaters","feedback"],forYouGenres:["drama","comedy","horror"],episodeTracking:!1},pro:{isPro:!0,features:{advancedNotifications:!0,themePacks:!0,socialFeatures:!0,bloopersAccess:!0,extrasAccess:!0}}},Z="flicklet.settings.v2";class Ne{constructor(){I(this,"settings");I(this,"subscribers",new Set);this.settings=this.loadSettings(),this.applyTheme(this.settings.layout.theme)}loadSettings(){try{const e=localStorage.getItem(Z);if(e){const t=JSON.parse(e);return{...Y,...t}}}catch(e){console.warn("Failed to load settings:",e)}return{...Y}}saveSettings(){try{localStorage.setItem(Z,JSON.stringify(this.settings)),this.notifySubscribers()}catch(e){console.error("Failed to save settings:",e)}}notifySubscribers(){this.subscribers.forEach(e=>e())}getSettings(){return{...this.settings}}updateSettings(e){this.settings={...this.settings,...e},this.saveSettings()}updateDisplayName(e){this.settings.displayName=e,this.saveSettings()}updatePersonalityLevel(e){this.settings.personalityLevel=e,this.saveSettings()}updateTheme(e){this.settings.layout.theme=e,this.applyTheme(e),this.saveSettings()}applyTheme(e){typeof document<"u"&&document.documentElement.setAttribute("data-theme",e)}toggleEpisodeTracking(){this.settings.layout.episodeTracking=!this.settings.layout.episodeTracking,this.saveSettings()}resetToDefaults(){this.settings={...Y},this.saveSettings()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}}const V=new Ne;function xe(){const[s,e]=Q.useState(()=>V.getSettings());return Q.useEffect(()=>V.subscribe(()=>{e(V.getSettings())}),[]),s}const be={1:{welcome:"Welcome back, {username}! âœ¨",empty:"No shows here yet.",add:"Add some shows to get started!",sarcasm:"",emptyWatching:"No shows in your currently watching list.",emptyWishlist:"Your wishlist is empty.",emptyWatched:"You haven't marked anything as watched yet.",emptyUpNext:"No upcoming episodes scheduled.",itemAdded:"Added to your list!",itemRemoved:"Removed from your list.",searchEmpty:"No results found. Try a different search.",searchLoading:"Searching...",errorGeneric:"Something went wrong. Please try again.",errorNetwork:"Network error. Check your connection.",errorNotFound:"Content not found.",successSave:"Settings saved!",successImport:"Data imported successfully!",successExport:"Data exported successfully!",marquee1:"Discover your next favorite show",marquee2:"Track what you're watching",marquee3:"Never miss an episode",marquee4:"Find your next binge-watch",marquee5:"Organize your entertainment"},2:{welcome:"Oh, you're back, {username}. How... delightful.",empty:"Well, this is awkward. Nothing here.",add:"Maybe try adding something? Just a thought.",sarcasm:"Because clearly you need help.",emptyWatching:"Well, this is awkward. Nothing here.",emptyWishlist:"Your wishlist is as empty as a Monday morning.",emptyWatched:"You haven't watched anything? That's... impressive.",emptyUpNext:"No episodes coming up. Shocking.",itemAdded:"There you go. You're welcome.",itemRemoved:"And it's gone. Poof.",searchEmpty:"Nothing found. Surprise, surprise.",searchLoading:"Searching... this might take a while.",errorGeneric:"Well, that didn't work. Shocking.",errorNetwork:"No internet? In this day and age?",errorNotFound:"It's gone. Vanished. Poof.",successSave:"Settings saved. Finally.",successImport:"Data imported. Hope it's better than the last batch.",successExport:"Data exported. Don't lose it this time.",marquee1:"Because clearly you need help finding shows",marquee2:"Track what you're watching (if anything)",marquee3:"Never miss an episode (that exists)",marquee4:"Find your next binge-watch (good luck)",marquee5:"Organize your entertainment (finally)"},3:{welcome:"Oh joy, {username}. Another visit. I'm absolutely thrilled.",empty:"Shocking. Absolutely shocking that this is empty.",add:"Perhaps you'd like to actually use this app? Revolutionary concept.",sarcasm:"I'm sure this will end well.",emptyWatching:"This list is emptier than a politician's promises.",emptyWishlist:"Your wishlist is emptier than a Monday morning coffee shop.",emptyWatched:"Nothing watched yet. The algorithm is probably confused.",emptyUpNext:"No episodes coming up. What a surprise. I'm devastated.",itemAdded:"There. The algorithm is pleased.",itemRemoved:"Gone. Vanished. Like my will to live.",searchEmpty:"Nothing found. What a shock. I'm devastated.",searchLoading:"Searching... this could take forever. Literally.",errorGeneric:"It broke. Shocking. Absolutely shocking.",errorNetwork:"No internet? What is this, 1995?",errorNotFound:"It's gone. Disappeared. Like my hopes and dreams.",successSave:"Settings saved. The system is pleased.",successImport:"Data imported. Hope it's not as disappointing as everything else.",successExport:"Data exported. Don't lose it. Again.",marquee1:"Discover your next favorite show (if such a thing exists)",marquee2:"Track what you're watching (assuming you watch anything)",marquee3:"Never miss an episode (that actually airs)",marquee4:"Find your next binge-watch (good luck with that)",marquee5:"Organize your entertainment (finally, some order)"}};function tt(s,e,t){const o=be[e][s];return t!=null&&t.username?o.replace("{username}",t.username):o}function ke(s){const e=ie(),[t,o]=n.useState({games:0,wins:0,losses:0,streak:0,maxStreak:0,winRate:0});return n.useEffect(()=>{const l=()=>{try{const r=localStorage.getItem("flickword:stats")||localStorage.getItem("flicklet-data")||localStorage.getItem("flicklet:stats");if(r){const p=JSON.parse(r),y=p.flickword||p;o({games:y.games||0,wins:y.wins||0,losses:y.losses||0,streak:y.streak||0,maxStreak:y.maxStreak||0,winRate:y.games>0?Math.round(y.wins/y.games*100):0})}}catch(r){console.error("Failed to load FlickWord stats:",r)}};l();const i=r=>{(r.key==="flickword:stats"||r.key==="flicklet-data")&&l()};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),a.jsx("div",{className:"flickword-stats",children:a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.games||"Games"}),a.jsx("span",{className:"stat-value",children:t.games})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.won||"Won"}),a.jsx("span",{className:"stat-value",children:t.wins})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.lost||"Lost"}),a.jsx("span",{className:"stat-value",children:t.losses})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.streak||"Streak"}),a.jsx("span",{className:"stat-value",children:t.streak})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.best||"Best"}),a.jsx("span",{className:"stat-value",children:t.maxStreak})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:e.win_percent||"Win %"}),a.jsxs("span",{className:"stat-value",children:[t.winRate,"%"]})]})]})})}const at=()=>{const s=ie(),[e,t]=n.useState({games:0,wins:0,losses:0,correct:0,total:0,streak:0,maxStreak:0}),o=()=>{try{const i=JSON.parse(localStorage.getItem("trivia:stats")||"{}"),r=i.trivia||i||{};t({games:r.games||0,wins:r.wins||0,losses:r.losses||0,correct:r.correct||0,total:r.total||0,streak:r.streak||0,maxStreak:r.maxStreak||0})}catch(i){console.error("Failed to load Trivia stats from localStorage",i)}};n.useEffect(()=>{o();const i=()=>o();return window.addEventListener("trivia:statsUpdated",i),()=>window.removeEventListener("trivia:statsUpdated",i)},[]);const l=e.total>0?Math.round(e.correct/e.total*100):0;return a.jsx("div",{className:"trivia-stats",children:a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.played||"Played"}),a.jsx("span",{className:"stat-value",children:e.games})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.accuracy||"Accuracy"}),a.jsxs("span",{className:"stat-value",children:[l,"%"]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:s.streak||"Streak"}),a.jsx("span",{className:"stat-value",children:e.streak})]})]})})},_="flicklet:daily-word",Le=[{name:"Datamuse API",url:"https://api.datamuse.com/words?sp=?????&max=1&md=d",parser:s=>{var e,t,o,l,i;return{word:(t=(e=s[0])==null?void 0:e.word)==null?void 0:t.toLowerCase(),definition:(i=(l=(o=s[0])==null?void 0:o.defs)==null?void 0:l[0])==null?void 0:i.split("	")[1],difficulty:"medium"}}},{name:"Random Word Generator",url:"https://random-word-api.herokuapp.com/word?length=5",parser:s=>{var e;return{word:(e=s[0])==null?void 0:e.toLowerCase(),definition:"A random 5-letter word",difficulty:"medium"}}}];function K(){return new Date().toISOString().slice(0,10)}async function Re(){const s=K();try{const i=localStorage.getItem(_);if(i){const r=JSON.parse(i);if(Ce(r))return console.log(`ðŸ“¦ Using cached word for ${s}: ${r.word}`),{word:r.word,date:r.date,definition:r.definition,difficulty:r.difficulty}}}catch(i){console.warn("Failed to read cached word:",i)}console.log(`ðŸŒ Fetching new word for ${s}...`);const e=await De();if(e){const i={word:e.word,date:e.date,definition:e.definition,difficulty:e.difficulty,timestamp:Date.now()};try{localStorage.setItem(_,JSON.stringify(i)),console.log(`ðŸ’¾ Cached API word: ${e.word}`)}catch(r){console.warn("Failed to cache word:",r)}return e}const t=Ie(s);console.log(`ðŸ”„ Using deterministic word for ${s}: ${t}`);const o={word:t,date:s,definition:void 0,difficulty:"medium"},l={word:t,date:s,definition:void 0,difficulty:"medium",timestamp:Date.now()};try{localStorage.setItem(_,JSON.stringify(l))}catch(i){console.warn("Failed to cache fallback word:",i)}return o}function Ie(s){const e=s.split("-").join(""),t=parseInt(e,10),o=["ABOUT","ABOVE","ABUSE","ACTOR","ACUTE","ADMIT","ADOPT","ADULT","AFTER","AGAIN","AGENT","AGREE","AHEAD","ALARM","ALBUM","ALERT","ALIEN","ALIGN","ALIKE","ALIVE","ALLOW","ALONE","ALONG","ALTER","AMONG","ANGER","ANGLE","ANGRY","APART","APPLE","APPLY","ARENA","ARGUE","ARISE","ARRAY","ASIDE","ASSET","AVOID","AWAKE","AWARD","AWARE","BADLY","BASIC","BEACH","BEGAN","BEGIN","BEING","BELOW","BENCH","BILLY","BIRTH","BLACK","BLAME","BLIND","BLOCK","BLOOD","BOARD","BOOST","BOOTH","BOUND","BRAIN","BRAND","BRASS","BRAVE","BREAD","BREAK","BREED","BRIEF","BRING","BROAD","BROKE","BROWN","BUILD","BUILT","BUYER","CABLE","CALIF","CARRY","CATCH","CAUSE","CHAIN","CHAIR","CHAOS","CHARM","CHART","CHASE","CHEAP","CHECK","CHEST","CHIEF","CHILD","CHINA","CHOSE","CIVIL","CLAIM","CLASS","CLEAN","CLEAR","CLICK","CLIMB","CLOCK","CLOSE","CLOUD","COACH","COAST","COUCH","COULD","COUNT","COURT","COVER","CRAFT","CRASH","CRAZY","CREAM","CRIME","CROSS","CROWD","CROWN","CRUDE","CURVE","CYCLE","DAILY","DANCE","DATED","DEALT","DEATH","DEBUT","DELAY","DEPTH","DOING","DOUBT","DOZEN","DRAFT","DRAMA","DRANK","DREAM","DRESS","DRILL","DRINK","DRIVE","DROVE","DYING","EAGER","EARLY","EARTH","EIGHT","ELITE","EMPTY","ENEMY","ENJOY","ENTER","ENTRY","EQUAL","ERROR","EVENT","EVERY","EXACT","EXIST","EXTRA","FAITH","FALSE","FAULT","FIBER","FIELD","FIFTH","FIFTY","FIGHT","FINAL","FIRST","FIXED","FLASH","FLEET","FLOOR","FLUID","FOCUS","FORCE","FORTH","FORTY","FORUM","FOUND","FRAME","FRANK","FRAUD","FRESH","FRONT","FROST","FRUIT","FULLY","FUNNY","GIANT","GIVEN","GLASS","GLOBE","GOING","GRACE","GRADE","GRAND","GRANT","GRASS","GRAVE","GREAT","GREEN","GROSS","GROUP","GROWN","GUARD","GUESS","GUEST","GUIDE","HAPPY","HARRY","HEART","HEAVY","HORSE","HOTEL","HOUSE","HUMAN","IDEAL","IMAGE","INDEX","INNER","INPUT","ISSUE","JAPAN","JIMMY","JOINT","JONES","JUDGE","KNOWN","LABEL","LARGE","LASER","LATER","LAUGH","LAYER","LEARN","LEASE","LEAST","LEAVE","LEGAL","LEVEL","LEWIS","LIGHT","LIMIT","LINKS","LIVES","LOCAL","LOOSE","LOWER","LUCKY","LUNCH","LYING","MAGIC","MAJOR","MAKER","MARCH","MARIA","MATCH","MAYBE","MAYOR","MEANT","MEDIA","METAL","MIGHT","MINOR","MINUS","MIXED","MODEL","MONEY","MONTH","MORAL","MOTOR","MOUNT","MOUSE","MOUTH","MOVED","MOVIE","MUSIC","NEEDS","NEVER","NEWLY","NIGHT","NOISE","NORTH","NOTED","NOVEL","NURSE","OCCUR","OCEAN","OFFER","OFTEN","ORDER","OTHER","OUGHT","PAINT","PANEL","PAPER","PARTY","PEACE","PETER","PHASE","PHONE","PHOTO","PIANO","PIECE","PILOT","PITCH","PLACE","PLAIN","PLANE","PLANT","PLATE","PLAZA","PLOT","PLUG","PLUS","POINT","POUND","POWER","PRESS","PRICE","PRIDE","PRIME","PRINT","PRIOR","PRIZE","PROOF","PROUD","PROVE","QUEEN","QUICK","QUIET","QUITE","RADIO","RAISE","RANGE","RAPID","RATIO","REACH","READY","REALM","REBEL","REFER","RELAX","REPAY","REPLY","RIGHT","RIGID","RISKY","RIVER","ROBIN","ROGER","ROMAN","ROUGH","ROUND","ROUTE","ROYAL","RURAL","SCALE","SCENE","SCOPE","SCORE","SENSE","SERVE","SETUP","SEVEN","SHALL","SHAPE","SHARE","SHARP","SHEET","SHELF","SHELL","SHIFT","SHINE","SHIRT","SHOCK","SHOOT","SHORT","SHOWN","SIDED","SIGHT","SILLY","SINCE","SIXTH","SIXTY","SIZED","SKILL","SLEEP","SLIDE","SMALL","SMART","SMILE","SMITH","SMOKE","SNAKE","SNOW","SOLAR","SOLID","SOLVE","SORRY","SOUND","SOUTH","SPACE","SPARE","SPEAK","SPEED","SPEND","SPENT","SPLIT","SPOKE","SPORT","STAFF","STAGE","STAKE","STAND","START","STATE","STEAM","STEEL","STEEP","STEER","STEPS","STICK","STILL","STOCK","STONE","STOOD","STORE","STORM","STORY","STRIP","STUCK","STUDY","STUFF","STYLE","SUGAR","SUITE","SUPER","SWEET","TABLE","TAKEN","TASTE","TAXES","TEACH","TERMS","THANK","THEFT","THEIR","THEME","THERE","THESE","THICK","THING","THINK","THIRD","THOSE","THREE","THREW","THROW","THUMB","TIGHT","TIMES","TIRED","TITLE","TODAY","TOPIC","TOTAL","TOUCH","TOUGH","TOWER","TRACK","TRADE","TRAIN","TREAT","TREND","TRIAL","TRIBE","TRICK","TRIED","TRIES","TRUCK","TRULY","TRUST","TRUTH","TWICE","UNDER","UNDUE","UNION","UNITY","UNTIL","UPPER","UPSET","URBAN","USAGE","USUAL","VALID","VALUE","VIDEO","VIRUS","VISIT","VITAL","VOICE","WASTE","WATCH","WATER","WHEEL","WHERE","WHICH","WHILE","WHITE","WHOLE","WHOSE","WOMAN","WOMEN","WORLD","WORRY","WORSE","WORST","WORTH","WOULD","WRITE","WRONG","WROTE","YOUNG","YOUTH"],l=t%o.length;return o[l]}function Ce(s){return s.date===K()}async function De(){for(const s of Le)try{console.log(`ðŸŽ¯ Trying ${s.name}...`);const e=await fetch(s.url,{method:"GET",headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json(),o=s.parser(t);if(o.word&&o.word.length===5&&/^[a-z]+$/.test(o.word))return console.log(`âœ… Successfully fetched word from ${s.name}: ${o.word}`),{word:o.word,date:K(),definition:o.definition,difficulty:o.difficulty}}catch(e){console.warn(`âŒ ${s.name} failed:`,e)}return null}let B=null;const Oe=["couch","scowl","zesty","zebra","zombi","zoned","stare","cigar","react","watch","other"];class Pe{constructor(e){I(this,"m");I(this,"k");I(this,"bits");this.m=e.m,this.k=e.k,this.bits=Uint8Array.from(atob(e.bitsBase64),t=>t.charCodeAt(0))}_hashes(e){let t=2166136261,o=16777619;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);t^=r,t=Math.imul(t,16777619),o+=r+(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24)}const l=i=>Math.abs((t+i*o)%this.m);return Array.from({length:this.k},(i,r)=>l(r))}has(e){const t=this._hashes(e);for(const o of t)if(!(this.bits[o>>3]>>(o&7)&1))return!1;return!0}}let j=null,U=null;async function We(){if(B||j||U)return U??Promise.resolve();U=(async()=>{try{const s=await fetch("/words/accepted.bloom",{cache:"force-cache"});if(s.ok){const e=await s.json();j=new Pe(e);return}}catch{}B=new Set(Oe);try{const s=await fetch("/words/accepted.json",{cache:"force-cache"});if(s.ok){const e=await s.json();B=new Set(e.map(t=>t.toLowerCase()))}}catch{}})(),await U}async function Me(s){await We();const e=s.toLowerCase();return j?j.has(e):B?B.has(e):!1}const H=new Map,re="word-valid-v1";function Fe(){try{return JSON.parse(localStorage.getItem(re)||"{}")}catch{return{}}}function ee(s){try{localStorage.setItem(re,JSON.stringify(s))}catch{}}const O=Fe();function He(s){return s.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}function ne(s,e=2e3){return new Promise((t,o)=>{const l=setTimeout(()=>o(new Error("timeout")),e);s.then(i=>{clearTimeout(l),t(i)},i=>{clearTimeout(l),o(i)})})}async function Be(s,e){const t=await ne(fetch(`/api/dict/entries?word=${encodeURIComponent(s)}`,{signal:e}),2e3);if(!t.ok)return!1;const o=await t.json();return Array.isArray(o)?o.length>0:!!(o!=null&&o.valid)}async function Ue(s,e){const t=await ne(fetch(`/api/wordnik/definitions?word=${encodeURIComponent(s)}`,{signal:e}),2e3);if(!t.ok)return!1;const o=await t.json();return Array.isArray(o)?o.length>0:!!(o!=null&&o.valid)}const ce={};function te(s){return(ce[s]??0)<Date.now()}function ae(s,e=10){ce[s]=Date.now()+e*6e4}async function je(s){const e=He(s);if(e.length!==5||/[^a-z]/.test(e))return{valid:!1,source:"none",reason:"format"};if(H.has(e))return H.get(e);if(O[e])return H.set(e,O[e]),O[e];if(await Me(e)){const r={valid:!0,source:"local"};return H.set(e,r),O[e]=r,ee(O),r}const t=new AbortController,o=[];te("dictionary")&&o.push(Be(e,t.signal).catch(r=>(r!=null&&r.message.includes("401")&&ae("dictionary"),!1))),te("wordnik")&&o.push(Ue(e,t.signal).catch(r=>(r!=null&&r.message.includes("401")&&ae("wordnik"),!1)));let l=!1;o.length&&(l=(await Promise.allSettled(o)).some(p=>p.status==="fulfilled"&&p.value===!0));const i=l?{valid:!0,source:"remote"}:{valid:!1,source:"none",reason:"not-found"};return H.set(e,i),O[e]=i,ee(O),i}const J=["QWERTYUIOP","ASDFGHJKL","ZXCVBNM"];function qe({onClose:s,onGameComplete:e}){var T;const[t,o]=n.useState({target:"",guesses:[],current:"",maxGuesses:6,done:!1,status:{},lastResults:[],showHint:!1}),[l,i]=n.useState(null),[r,p]=n.useState(!0),y=n.useCallback(async()=>{try{p(!0),console.log("ðŸ”„ Loading today's word...");const d=await Re();if(console.log("ðŸ“¦ Daily word data received:",d),d&&d.word&&d.word.length===5)o(c=>({...c,target:d.word.toUpperCase(),wordInfo:{definition:d.definition,difficulty:d.difficulty},showHint:!1})),console.log("âœ… Game target set to:",d.word.toUpperCase());else throw new Error("Invalid word data received")}catch(d){console.error("âŒ Failed to load daily word:",d);const c="CRANE";console.log("ðŸ”„ Using fallback word:",c),o(m=>({...m,target:c,wordInfo:{definition:"A large wading bird",difficulty:"easy"},showHint:!1}))}finally{p(!1),console.log("ðŸ Word loading complete")}},[]),b=n.useCallback(async d=>{try{const c=await je(d);return console.log(`ðŸ” Word validation: ${d.toUpperCase()} â†’ ${c.valid?"valid":"invalid"} [${c.source}]`),c.valid}catch(c){return console.warn("Word validation failed:",c),!1}},[]),v=n.useCallback((d,c)=>{const m=Array(5).fill("absent"),g=c.split("");for(let u=0;u<5;u++)d[u]===g[u]&&(m[u]="correct",g[u]="");for(let u=0;u<5;u++){if(m[u]==="correct")continue;const h=g.indexOf(d[u]);h!==-1&&(m[u]="present",g[h]="")}return m},[]),E=n.useCallback((d,c)=>{i({message:d,type:c}),setTimeout(()=>i(null),3e3)},[]),N=n.useCallback(()=>{y()},[y]),k=n.useCallback(d=>{t.done||t.current.length>=5||o(c=>({...c,current:c.current+d}))},[t.done,t.current.length]),A=n.useCallback(()=>{t.done||!t.current||o(d=>({...d,current:d.current.slice(0,-1)}))},[t.done,t.current]),w=n.useCallback(async()=>{if(console.log("ðŸŽ¯ Submit pressed:",{current:t.current,length:t.current.length,done:t.done,target:t.target}),t.done||t.current.length!==5){console.log("âŒ Submit blocked:",{done:t.done,length:t.current.length});return}console.log("ðŸ” Validating word:",t.current);const d=await b(t.current);if(console.log("âœ… Word validation result:",d),!d){console.log("âŒ Word invalid, showing notification"),E("Not in word list.","error"),o(h=>({...h,current:""}));return}const c=v(t.current,t.target),m={...t.status};for(let h=0;h<5;h++){const D=t.current[h];c[h]==="correct"?m[D]="correct":c[h]==="present"&&m[D]!=="correct"?m[D]="present":c[h]==="absent"&&!m[D]&&(m[D]="absent")}const g=[...t.guesses,t.current],u=[...t.lastResults,c];t.current===t.target?(E("ðŸŽ‰ Correct! Well done!","success"),o(h=>({...h,done:!0,guesses:g,lastResults:u,status:m})),e==null||e(!0,g.length)):g.length===t.maxGuesses?(E(`Game over! The word was: ${t.target}`,"error"),o(h=>({...h,done:!0,guesses:g,lastResults:u,status:m})),e==null||e(!1,g.length)):o(h=>({...h,guesses:g,lastResults:u,status:m,current:""}))},[t,b,v,E,e]);n.useEffect(()=>{const d=c=>{t.done||r||(c.key==="Backspace"?(c.preventDefault(),A()):c.key==="Enter"?(c.preventDefault(),w()):c.key.length===1&&c.key.match(/[a-zA-Z]/)&&(c.preventDefault(),k(c.key.toUpperCase())))};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t.done,r,A,w,k]),n.useEffect(()=>{N()},[N]);const C=()=>{const d=[];for(let c=0;c<t.maxGuesses;c++){const m=t.guesses[c]||(c===t.guesses.length?t.current:"");for(let g=0;g<5;g++){const u=m[g]||"",h=c<t.guesses.length?t.lastResults[c][g]:"";d.push(a.jsx("div",{className:`fw-tile ${h}`,children:u},`${c}-${g}`))}}return d},f=()=>{const d=[],c=[];for(const u of J[0]){const h=t.status[u]||"";c.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}c.push(a.jsx("button",{className:"fw-key fw-key-back",onClick:A,children:"âŒ«"},"backspace")),d.push(a.jsx("div",{className:"fw-kb-row",children:c},"row1"));const m=[];for(const u of J[1]){const h=t.status[u]||"";m.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}d.push(a.jsx("div",{className:"fw-kb-row",children:m},"row2"));const g=[];for(const u of J[2]){const h=t.status[u]||"";g.push(a.jsx("button",{className:`fw-key ${h}`,onClick:()=>k(u),children:u},u))}return g.push(a.jsx("button",{className:"fw-key fw-key-enter",onClick:w,children:"Enter"},"enter")),d.push(a.jsx("div",{className:"fw-kb-row",children:g},"row3")),d};return r?a.jsxs("div",{className:"flickword-game",children:[a.jsxs("div",{className:"fw-header",children:[a.jsx("h3",{children:"ðŸŽ¯ FlickWord"}),a.jsx("div",{className:"fw-stats",children:a.jsx("span",{className:"fw-streak",children:"Loading..."})})]}),a.jsxs("div",{className:"fw-loading",children:[a.jsx("div",{className:"fw-spinner"}),a.jsx("p",{children:"Loading today's word..."})]})]}):a.jsxs("div",{className:"flickword-game",children:[l&&a.jsx("div",{className:`fw-notification ${l.type}`,children:l.message}),((T=t.wordInfo)==null?void 0:T.definition)&&t.showHint&&a.jsx("div",{className:"fw-word-info",children:a.jsxs("p",{children:[a.jsx("strong",{children:"Hint:"})," ",t.wordInfo.definition]})}),a.jsx("div",{className:"fw-grid","aria-label":"FlickWord board",role:"group",children:C()}),a.jsx("div",{className:"fw-keyboard","aria-label":"Keyboard",role:"group",children:f()}),a.jsxs("div",{className:"fw-actions",children:[a.jsx("button",{className:"fw-btn fw-new-game",onClick:N,children:"New Game"}),s&&a.jsx("button",{className:"fw-btn fw-close",onClick:s,children:"Close"})]})]})}function le({children:s}){const[e,t]=n.useState(!1);return n.useEffect(()=>(t(!0),()=>t(!1)),[]),e?pe.createPortal(s,document.body):null}let W=null;function de(){if(W)return;const s=window.scrollY,e=document.body.style.cssText;document.body.style.cssText=`
    position: fixed;
    top: -${s}px;
    left: 0;
    right: 0;
    overflow: hidden;
  `,W={scrollY:s,bodyStyle:e}}function ue(){W&&(document.body.style.cssText=W.bodyStyle,window.scrollTo(0,W.scrollY),W=null)}function Ge({isOpen:s,onClose:e}){const[t,o]=n.useState(!1),[l,i]=n.useState(!1),[r,p]=n.useState({x:0,y:0}),y=n.useRef(null),b=n.useRef({x:0,y:0}),v=n.useRef({x:0,y:0});n.useEffect(()=>{const f=T=>{T.key==="Escape"&&s&&e()};return s&&(document.addEventListener("keydown",f),de()),()=>{document.removeEventListener("keydown",f),ue()}},[s,e]);const E=n.useCallback(f=>{const T=f.target;T.closest(".gm-header")&&!T.closest(".gm-close")&&(i(!0),b.current={x:f.clientX,y:f.clientY},v.current=r)},[r]),N=n.useCallback(f=>{if(l){const T=f.clientX-b.current.x,d=f.clientY-b.current.y,c=v.current.x+T,m=v.current.y+d,g=(window.innerWidth-500)/2,u=(window.innerHeight-750)/2;p({x:Math.max(-g,Math.min(g,c)),y:Math.max(-u,Math.min(u,m))})}},[l]),k=n.useCallback(()=>{l&&(v.current=r),i(!1)},[l,r]);n.useEffect(()=>{if(l)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",k)}},[l,N,k]);const A=n.useCallback((f,T)=>{console.log("ðŸŽ¯ FlickWord game completed:",{won:f,guesses:T});try{const d=JSON.parse(localStorage.getItem("flicklet-data")||"{}"),c=d.flickword||{games:0,wins:0,losses:0,streak:0,maxStreak:0},m={games:c.games+1,wins:c.wins+(f?1:0),losses:c.losses+(f?0:1),streak:f?c.streak+1:0,maxStreak:f?Math.max(c.maxStreak,c.streak+1):c.maxStreak},g={...d,flickword:m};localStorage.setItem("flicklet-data",JSON.stringify(g)),localStorage.setItem("flickword:stats",JSON.stringify(m)),console.log("ðŸ’¾ FlickWord stats saved:",m)}catch(d){console.error("Failed to save FlickWord stats:",d)}window.handleFlickWordGameComplete&&window.handleFlickWordGameComplete(f,T),setTimeout(()=>{o(!0)},1500)},[]);if(n.useEffect(()=>{s&&(o(!1),p({x:0,y:0}))},[s]),!s)return null;const w={position:"fixed",top:"50%",left:"50%",transform:`translate(calc(-50% + ${r.x}px), calc(-50% + ${r.y}px))`,width:"500px",height:"750px",cursor:l?"grabbing":"default",zIndex:1e4},C={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:9999};return a.jsx(le,{children:a.jsxs("div",{className:"game-modal",role:"dialog","aria-modal":"true","aria-labelledby":"flickword-modal-title",children:[a.jsx("div",{className:"gm-overlay",style:C,onClick:e}),a.jsxs("div",{ref:y,className:`gm-dialog gm-draggable ${l?"gm-dragging":""}`,style:w,onMouseDown:E,children:[a.jsxs("header",{className:"gm-header gm-drag-handle",children:[a.jsx("h3",{id:"flickword-modal-title",children:"ðŸŽ¯ FlickWord"}),a.jsxs("div",{className:"fw-stats",children:[a.jsx("span",{className:"fw-streak",children:"Streak: 0"}),a.jsx("span",{className:"fw-timer",children:"Next: --:--"})]}),a.jsx("button",{className:"gm-close",type:"button","aria-label":"Close",onClick:e,children:"Ã—"})]}),a.jsx("main",{className:"gm-body",children:t?a.jsxs("div",{className:"game-stats-view",children:[a.jsx(ke,{}),a.jsxs("div",{className:"stats-actions",children:[a.jsx("button",{className:"btn-primary",onClick:()=>o(!1),children:"Play Again"}),a.jsx("button",{className:"btn-secondary",onClick:e,children:"Close"})]})]}):a.jsx(qe,{onClose:e,onGameComplete:A})})]})]})})}const st=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"})),Ye="flicklet:daily-trivia",Ve=[{name:"OpenTriviaDB",url:"https://opentdb.com/api.php?amount=10&category=10&difficulty=medium&type=multiple&encode=url3986",parser:s=>s.response_code===0&&s.results&&s.results.length>0?s.results.map(e=>{const t=decodeURIComponent(e.correct_answer),o=e.incorrect_answers.map(p=>decodeURIComponent(p)),i=[...[t,...o]].sort(()=>Math.random()-.5),r=i.indexOf(t);return{question:decodeURIComponent(e.question),options:i,correctAnswer:r,explanation:`The correct answer is ${t}.`,category:"Entertainment",difficulty:e.difficulty}}):[]},{name:"OpenTriviaDB (Easy)",url:"https://opentdb.com/api.php?amount=10&category=10&difficulty=easy&type=multiple&encode=url3986",parser:s=>s.response_code===0&&s.results&&s.results.length>0?s.results.map(e=>{const t=decodeURIComponent(e.correct_answer),o=e.incorrect_answers.map(p=>decodeURIComponent(p)),i=[...[t,...o]].sort(()=>Math.random()-.5),r=i.indexOf(t);return{question:decodeURIComponent(e.question),options:i,correctAnswer:r,explanation:`The correct answer is ${t}.`,category:"Entertainment",difficulty:"easy"}}):[]}];async function _e(){for(const s of Ve)try{console.log(`ðŸ§  Trying ${s.name}...`);const e=await fetch(s.url,{method:"GET",headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json(),o=s.parser(t);if(o&&o.length>0)return console.log(`âœ… Successfully fetched ${o.length} questions from ${s.name}`),o}catch(e){console.warn(`âŒ ${s.name} failed:`,e)}return[]}function Je(){try{localStorage.removeItem(Ye),console.log("ðŸ—‘ï¸ Cleared trivia cache")}catch(s){console.warn("Failed to clear trivia cache:",s)}}async function Ke(){Je(),console.log("ðŸ”„ Force fetching fresh trivia from API...");const s=await _e();if(s&&s.length>0)return console.log("âœ… Got fresh trivia from API:",s.length,"questions"),s;const e=[{question:"Which movie won Best Picture in 2024?",options:["Oppenheimer","Barbie","Killers of the Flower Moon","Poor Things"],correctAnswer:0,explanation:"Oppenheimer won Best Picture at the 96th Academy Awards.",category:"Awards",difficulty:"medium"},{question:"What is the highest-grossing animated movie?",options:["Frozen II","The Lion King (2019)","Incredibles 2","Toy Story 4"],correctAnswer:1,explanation:"The Lion King (2019) is the highest-grossing animated movie.",category:"Box Office",difficulty:"easy"},{question:'Which streaming service produced "The Mandalorian"?',options:["Netflix","Disney+","Amazon Prime","HBO Max"],correctAnswer:1,explanation:"The Mandalorian is a Disney+ original series.",category:"Streaming",difficulty:"easy"},{question:'Who directed "Dune" (2021)?',options:["Denis Villeneuve","Christopher Nolan","Ridley Scott","James Cameron"],correctAnswer:0,explanation:"Denis Villeneuve directed Dune (2021).",category:"Directors",difficulty:"medium"},{question:'What year was "Top Gun: Maverick" released?',options:["2020","2021","2022","2023"],correctAnswer:2,explanation:"Top Gun: Maverick was released in 2022.",category:"History",difficulty:"easy"}];return console.log("ðŸ”„ Using fresh test questions"),e}function $e({onClose:s,onGameComplete:e}){const t=xe(),[o,l]=n.useState([]),[i,r]=n.useState(0),[p,y]=n.useState(null),[b,v]=n.useState(0),[E,N]=n.useState("loading"),[k,A]=n.useState(!1),[w,C]=n.useState(!1),f=[{id:"1",question:"Which movie won the Academy Award for Best Picture in 2023?",options:["Everything Everywhere All at Once","The Banshees of Inisherin","Top Gun: Maverick","Avatar: The Way of Water"],correctAnswer:0,explanation:"Everything Everywhere All at Once won Best Picture at the 95th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"2",question:"What is the highest-grossing movie of all time?",options:["Avatar","Avengers: Endgame","Titanic","Star Wars: The Force Awakens"],correctAnswer:0,explanation:"Avatar (2009) holds the record for highest-grossing movie worldwide.",category:"Box Office",difficulty:"easy"},{id:"3",question:'Which streaming service produced "Stranger Things"?',options:["Hulu","Netflix","Amazon Prime","Disney+"],correctAnswer:1,explanation:"Stranger Things is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"4",question:'Who directed "The Dark Knight"?',options:["Christopher Nolan","Zack Snyder","Tim Burton","Martin Scorsese"],correctAnswer:0,explanation:"Christopher Nolan directed The Dark Knight (2008).",category:"Directors",difficulty:"medium"},{id:"5",question:'What year was the first "Star Wars" movie released?',options:["1975","1977","1979","1981"],correctAnswer:1,explanation:"Star Wars: Episode IV - A New Hope was released in 1977.",category:"History",difficulty:"medium"},{id:"6",question:'Which actor played Jack in "Titanic"?',options:["Brad Pitt","Leonardo DiCaprio","Matt Damon","Ryan Gosling"],correctAnswer:1,explanation:"Leonardo DiCaprio played Jack Dawson in Titanic (1997).",category:"Actors",difficulty:"easy"},{id:"7",question:'What is the name of the main character in "The Matrix"?',options:["Neo","Morpheus","Trinity","Agent Smith"],correctAnswer:0,explanation:"Neo (played by Keanu Reeves) is the main character in The Matrix.",category:"Characters",difficulty:"easy"},{id:"8",question:'Which movie features the quote "May the Force be with you"?',options:["Star Trek","Star Wars","Guardians of the Galaxy","Blade Runner"],correctAnswer:1,explanation:"This iconic quote is from the Star Wars franchise.",category:"Quotes",difficulty:"easy"},{id:"9",question:'Who composed the music for "Jaws"?',options:["John Williams","Hans Zimmer","Danny Elfman","Alan Silvestri"],correctAnswer:0,explanation:"John Williams composed the iconic Jaws theme.",category:"Music",difficulty:"medium"},{id:"10",question:"What is the highest-rated movie on IMDb?",options:["The Godfather","The Shawshank Redemption","The Dark Knight","Pulp Fiction"],correctAnswer:1,explanation:"The Shawshank Redemption currently holds the #1 spot on IMDb.",category:"Ratings",difficulty:"medium"},{id:"11",question:"Which movie won Best Picture in 2020?",options:["1917","Joker","Parasite","Once Upon a Time in Hollywood"],correctAnswer:2,explanation:"Parasite became the first non-English language film to win Best Picture.",category:"Awards",difficulty:"medium"},{id:"12",question:'What is the name of the dinosaur in "Jurassic Park"?',options:["Rex","T-Rex","Rexy","Tyrannosaurus"],correctAnswer:2,explanation:'The T-Rex in Jurassic Park is affectionately called "Rexy".',category:"Characters",difficulty:"easy"},{id:"13",question:'Which director made "Inception"?',options:["Steven Spielberg","Christopher Nolan","Martin Scorsese","Quentin Tarantino"],correctAnswer:1,explanation:"Christopher Nolan directed Inception (2010).",category:"Directors",difficulty:"easy"},{id:"14",question:'What year was "The Lion King" (animated) released?',options:["1992","1994","1996","1998"],correctAnswer:1,explanation:"The animated Lion King was released in 1994.",category:"History",difficulty:"medium"},{id:"15",question:"Which movie features the character Tony Stark?",options:["Batman","Iron Man","Superman","Spider-Man"],correctAnswer:1,explanation:"Tony Stark is the alter ego of Iron Man.",category:"Characters",difficulty:"easy"},{id:"16",question:"What is the highest-grossing movie franchise?",options:["Marvel Cinematic Universe","Star Wars","Harry Potter","Fast & Furious"],correctAnswer:0,explanation:"The Marvel Cinematic Universe is the highest-grossing movie franchise.",category:"Box Office",difficulty:"medium"},{id:"17",question:"Which actor played Wolverine in the X-Men movies?",options:["Ryan Reynolds","Hugh Jackman","Chris Evans","Robert Downey Jr."],correctAnswer:1,explanation:"Hugh Jackman played Wolverine in the X-Men franchise.",category:"Actors",difficulty:"easy"},{id:"18",question:'What year was "The Matrix" released?',options:["1997","1999","2001","2003"],correctAnswer:1,explanation:"The Matrix was released in 1999.",category:"History",difficulty:"medium"},{id:"19",question:"Which movie won Best Picture in 2019?",options:["Black Panther","Bohemian Rhapsody","Green Book","A Star Is Born"],correctAnswer:2,explanation:"Green Book won Best Picture at the 91st Academy Awards.",category:"Awards",difficulty:"medium"},{id:"20",question:'What is the name of the main character in "Forrest Gump"?',options:["Forrest Gump","Tom Hanks","Jenny","Bubba"],correctAnswer:0,explanation:"Forrest Gump is the title character played by Tom Hanks.",category:"Characters",difficulty:"easy"},{id:"21",question:'Which streaming service produced "The Crown"?',options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"The Crown is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"22",question:'Who directed "Pulp Fiction"?',options:["Martin Scorsese","Quentin Tarantino","Steven Spielberg","Christopher Nolan"],correctAnswer:1,explanation:"Quentin Tarantino directed Pulp Fiction (1994).",category:"Directors",difficulty:"medium"},{id:"23",question:"What is the highest-rated TV show on IMDb?",options:["Breaking Bad","The Wire","Game of Thrones","The Sopranos"],correctAnswer:0,explanation:"Breaking Bad currently holds the #1 spot for TV shows on IMDb.",category:"Ratings",difficulty:"medium"},{id:"24",question:`Which movie features the quote "I'll be back"?`,options:["Terminator","Predator","Total Recall","Commando"],correctAnswer:0,explanation:"This iconic quote is from The Terminator (1984).",category:"Quotes",difficulty:"easy"},{id:"25",question:'What year was "Jurassic Park" released?',options:["1991","1993","1995","1997"],correctAnswer:1,explanation:"Jurassic Park was released in 1993.",category:"History",difficulty:"medium"},{id:"26",question:`Which actor played Jack Nicholson's character in "The Shining"?`,options:["Jack Nicholson","Shelley Duvall","Danny Lloyd","Scatman Crothers"],correctAnswer:0,explanation:"Jack Nicholson played Jack Torrance in The Shining.",category:"Actors",difficulty:"easy"},{id:"27",question:'What is the name of the main character in "Casablanca"?',options:["Rick Blaine","Ilsa Lund","Victor Laszlo","Captain Renault"],correctAnswer:0,explanation:"Rick Blaine (played by Humphrey Bogart) is the main character.",category:"Characters",difficulty:"medium"},{id:"28",question:"Which movie won Best Picture in 2018?",options:["The Shape of Water","Three Billboards Outside Ebbing, Missouri","Dunkirk","Get Out"],correctAnswer:0,explanation:"The Shape of Water won Best Picture at the 90th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"29",question:"What is the highest-grossing animated movie franchise?",options:["Toy Story","Shrek","Despicable Me","Frozen"],correctAnswer:2,explanation:"The Despicable Me franchise (including Minions) is the highest-grossing animated franchise.",category:"Box Office",difficulty:"medium"},{id:"30",question:'Which streaming service produced "The Mandalorian"?',options:["Netflix","Disney+","Amazon Prime","HBO Max"],correctAnswer:1,explanation:"The Mandalorian is a Disney+ original series.",category:"Streaming",difficulty:"easy"},{id:"31",question:'Who composed the music for "Star Wars"?',options:["John Williams","Hans Zimmer","Danny Elfman","Alan Silvestri"],correctAnswer:0,explanation:"John Williams composed the iconic Star Wars theme.",category:"Music",difficulty:"easy"},{id:"32",question:'What year was "Titanic" released?',options:["1995","1997","1999","2001"],correctAnswer:1,explanation:"Titanic was released in 1997.",category:"History",difficulty:"easy"},{id:"33",question:"Which movie features the character Hannibal Lecter?",options:["Silence of the Lambs","Hannibal","Red Dragon","All of the above"],correctAnswer:3,explanation:"Hannibal Lecter appears in all three movies.",category:"Characters",difficulty:"medium"},{id:"34",question:'What is the name of the main character in "Goodfellas"?',options:["Henry Hill","Jimmy Conway","Tommy DeVito","Paul Cicero"],correctAnswer:0,explanation:"Henry Hill (played by Ray Liotta) is the main character.",category:"Characters",difficulty:"medium"},{id:"35",question:"Which movie won Best Picture in 2017?",options:["La La Land","Moonlight","Arrival","Hidden Figures"],correctAnswer:1,explanation:"Moonlight won Best Picture at the 89th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"36",question:"What is the highest-grossing R-rated movie?",options:["Deadpool","Joker","It","The Matrix"],correctAnswer:1,explanation:"Joker (2019) is the highest-grossing R-rated movie.",category:"Box Office",difficulty:"medium"},{id:"37",question:'Which streaming service produced "Stranger Things"?',options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"Stranger Things is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"38",question:'Who directed "The Godfather"?',options:["Martin Scorsese","Francis Ford Coppola","Steven Spielberg","Alfred Hitchcock"],correctAnswer:1,explanation:"Francis Ford Coppola directed The Godfather (1972).",category:"Directors",difficulty:"medium"},{id:"39",question:'What year was "The Lion King" (live-action) released?',options:["2017","2019","2021","2023"],correctAnswer:1,explanation:"The live-action Lion King was released in 2019.",category:"History",difficulty:"easy"},{id:"40",question:"Which movie features the character Rocky Balboa?",options:["Rocky","Rambo","Creed","Both Rocky and Creed"],correctAnswer:3,explanation:"Rocky Balboa appears in both the Rocky and Creed franchises.",category:"Characters",difficulty:"medium"},{id:"41",question:'What is the name of the main character in "The Godfather"?',options:["Vito Corleone","Michael Corleone","Sonny Corleone","Fredo Corleone"],correctAnswer:1,explanation:"Michael Corleone (played by Al Pacino) is the main character.",category:"Characters",difficulty:"medium"},{id:"42",question:"Which movie won Best Picture in 2016?",options:["La La Land","Moonlight","Arrival","Hidden Figures"],correctAnswer:0,explanation:"La La Land won Best Picture at the 89th Academy Awards (though Moonlight was the actual winner).",category:"Awards",difficulty:"hard"},{id:"43",question:"What is the highest-grossing movie of 2023?",options:["Barbie","Oppenheimer","Spider-Man: Across the Spider-Verse","Guardians of the Galaxy Vol. 3"],correctAnswer:0,explanation:"Barbie was the highest-grossing movie of 2023.",category:"Box Office",difficulty:"easy"},{id:"44",question:`Which streaming service produced "The Queen's Gambit"?`,options:["Netflix","Amazon Prime","Disney+","HBO Max"],correctAnswer:0,explanation:"The Queen's Gambit is a Netflix original series.",category:"Streaming",difficulty:"easy"},{id:"45",question:'Who directed "Inception"?',options:["Christopher Nolan","Steven Spielberg","Martin Scorsese","Quentin Tarantino"],correctAnswer:0,explanation:"Christopher Nolan directed Inception (2010).",category:"Directors",difficulty:"easy"},{id:"46",question:'What year was "Avatar" released?',options:["2007","2009","2011","2013"],correctAnswer:1,explanation:"Avatar was released in 2009.",category:"History",difficulty:"easy"},{id:"47",question:"Which movie features the character Indiana Jones?",options:["Raiders of the Lost Ark","Indiana Jones and the Temple of Doom","Indiana Jones and the Last Crusade","All of the above"],correctAnswer:3,explanation:"Indiana Jones appears in all three original movies.",category:"Characters",difficulty:"medium"},{id:"48",question:'What is the name of the main character in "Casino"?',options:["Sam Rothstein","Nicky Santoro","Ginger McKenna","Lester Diamond"],correctAnswer:0,explanation:"Sam Rothstein (played by Robert De Niro) is the main character.",category:"Characters",difficulty:"medium"},{id:"49",question:"Which movie won Best Picture in 2015?",options:["Birdman","Boyhood","The Grand Budapest Hotel","Whiplash"],correctAnswer:0,explanation:"Birdman won Best Picture at the 87th Academy Awards.",category:"Awards",difficulty:"medium"},{id:"50",question:"What is the highest-grossing movie of all time (unadjusted)?",options:["Avatar","Avengers: Endgame","Titanic","Star Wars: The Force Awakens"],correctAnswer:0,explanation:"Avatar (2009) holds the record for highest-grossing movie worldwide.",category:"Box Office",difficulty:"easy"}],T=()=>new Date().toISOString().slice(0,10),d=(S=!1)=>{const x=T().split("-").join(""),R=parseInt(x,10),$=Math.floor(R/1e4)%3,z=S?50:5,G=[];for(let F=0;F<z;F++){const he=($*z+F)%f.length;G.push(f[he])}return console.log(`ðŸŽ¯ Today's trivia questions (${S?"Pro":"Free"} user, cycle day ${$}):`,G.map(F=>F.id)),G};n.useEffect(()=>{C(t.pro.isPro),console.log("ðŸŽ¯ Pro user status:",t.pro.isPro)},[t.pro]),n.useEffect(()=>{E==="loading"&&(async()=>{try{console.log(`ðŸ§  Loading fresh trivia questions for ${w?"Pro":"Free"} user...`);const x=(await Ke()).map((R,M)=>({id:`fresh_${M}`,question:R.question,options:R.options,correctAnswer:R.correctAnswer,explanation:R.explanation||void 0,category:R.category,difficulty:R.difficulty}));if(w&&x.length<50){const R=d(!0).slice(x.length).map(M=>({...M,explanation:M.explanation||void 0}));x.push(...R)}console.log(`âœ… Loaded ${x.length} trivia questions for ${w?"Pro":"Free"} user`),l(x),N("playing")}catch(L){console.error("âŒ Failed to load fresh trivia questions:",L);const x=d(w);l(x),N("playing")}})()},[E,w]);const c=n.useCallback(S=>{p===null&&(y(S),A(!0),S===o[i].correctAnswer&&v(L=>L+1))},[p,o,i]),m=n.useCallback(()=>{i<o.length-1?(r(S=>S+1),y(null),A(!1)):(N("completed"),e==null||e(b,o.length))},[i,o.length,b,e]),g=n.useCallback(()=>{r(0),y(null),v(0),A(!1),N("loading")},[]),u=S=>S>=80?"text-green-400":S>=60?"text-yellow-400":"text-red-400";if(E==="loading")return a.jsx("div",{className:"trivia-game",children:a.jsxs("div",{className:"trivia-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading trivia questions..."})]})});if(E==="completed"){const S=Math.round(b/o.length*100);return a.jsx("div",{className:"trivia-game",children:a.jsxs("div",{className:"trivia-completed",children:[a.jsx("h3",{children:"ðŸŽ‰ Quiz Complete!"}),a.jsx("div",{className:"score-display",children:a.jsxs("div",{className:"score-circle",children:[a.jsxs("span",{className:`score-percentage ${u(S)}`,children:[S,"%"]}),a.jsxs("span",{className:"score-fraction",children:[b,"/",o.length]})]})}),a.jsxs("div",{className:"score-message",children:[S>=80&&a.jsx("p",{children:"ðŸ† Excellent! You're a movie trivia master!"}),S>=60&&S<80&&a.jsx("p",{children:"ðŸ‘ Good job! You know your movies!"}),S<60&&a.jsx("p",{children:"ðŸ“š Keep watching! You'll get better!"})]}),a.jsxs("div",{className:"completion-actions",children:[a.jsx("button",{className:"btn-primary",onClick:g,children:"Play Again"}),s&&a.jsx("button",{className:"btn-secondary",onClick:s,children:"Close"})]}),!w&&a.jsx("div",{className:"pro-upsell",children:a.jsx("p",{children:"ðŸ”’ Want more questions? Upgrade to Pro for 50 daily trivia questions!"})})]})})}const h=o[i],D=(i+1)/o.length*100;return!o.length||!h?a.jsxs("div",{className:"trivia-game",children:[a.jsx("div",{className:"trivia-header",children:a.jsx("h3",{children:"ðŸ§  Daily Trivia"})}),a.jsx("div",{className:"trivia-content",children:a.jsx("p",{children:"Loading questions..."})})]}):a.jsxs("div",{className:"trivia-game",children:[a.jsxs("div",{className:"trivia-header",children:[a.jsxs("h3",{children:["ðŸ§  Daily Trivia ",w&&a.jsx("span",{className:"pro-badge",children:"PRO"})]}),a.jsxs("div",{className:"trivia-progress",children:[a.jsxs("span",{children:[i+1,"/",o.length]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${D}%`}})})]})]}),a.jsxs("div",{className:"trivia-question",children:[a.jsxs("div",{className:"question-meta",children:[a.jsx("span",{className:"category",children:h.category}),a.jsx("span",{className:"difficulty",children:h.difficulty})]}),a.jsx("h4",{children:h.question})]}),a.jsx("div",{className:"trivia-options",children:h.options.map((S,L)=>{let x="option-btn";return p!==null&&(L===h.correctAnswer?x+=" correct":L===p&&L!==h.correctAnswer?x+=" incorrect":x+=" disabled"),a.jsx("button",{className:x,onClick:()=>c(L),disabled:p!==null,children:S},L)})}),k&&h.explanation&&a.jsx("div",{className:"trivia-explanation",children:a.jsx("p",{children:h.explanation})}),a.jsxs("div",{className:"trivia-actions",children:[p!==null&&a.jsx("button",{className:"btn-primary",onClick:m,children:i<o.length-1?"Next Question":"Finish Quiz"}),s&&a.jsx("button",{className:"btn-secondary",onClick:s,children:"Close"})]})]})}function ze({isOpen:s,onClose:e}){const[t,o]=n.useState(!1),[l,i]=n.useState({x:0,y:0}),r=n.useRef(null),p=n.useRef({x:0,y:0}),y=n.useRef({x:0,y:0});n.useEffect(()=>{const A=w=>{w.key==="Escape"&&s&&e()};return s&&(document.addEventListener("keydown",A),de()),()=>{document.removeEventListener("keydown",A),ue()}},[s,e]);const b=n.useCallback(A=>{const w=A.target;w.closest(".gm-header")&&!w.closest(".gm-close")&&(o(!0),p.current={x:A.clientX,y:A.clientY},y.current=l)},[l]),v=n.useCallback(A=>{if(t){const w=A.clientX-p.current.x,C=A.clientY-p.current.y,f=y.current.x+w,T=y.current.y+C,d=(window.innerWidth-500)/2,c=(window.innerHeight-750)/2;i({x:Math.max(-d,Math.min(d,f)),y:Math.max(-c,Math.min(c,T))})}},[t]),E=n.useCallback(()=>{t&&(y.current=l),o(!1)},[t,l]);if(n.useEffect(()=>{if(t)return document.addEventListener("mousemove",v),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",E)}},[t,v,E]),n.useEffect(()=>{s&&i({x:0,y:0})},[s]),!s)return null;const N={position:"fixed",top:"50%",left:"50%",transform:`translate(calc(-50% + ${l.x}px), calc(-50% + ${l.y}px))`,width:"500px",height:"750px",cursor:t?"grabbing":"default",zIndex:1e4},k={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:9999};return a.jsx(le,{children:a.jsxs("div",{className:"game-modal",role:"dialog","aria-modal":"true","aria-labelledby":"trivia-modal-title",children:[a.jsx("div",{className:"gm-overlay",style:k,onClick:e}),a.jsxs("div",{ref:r,className:`gm-dialog gm-draggable ${t?"gm-dragging":""}`,style:N,onMouseDown:b,children:[a.jsxs("header",{className:"gm-header gm-drag-handle",children:[a.jsx("h3",{id:"trivia-modal-title",children:"ðŸ§  Daily Trivia"}),a.jsx("button",{className:"gm-close",type:"button","aria-label":"Close",onClick:e,children:"Ã—"})]}),a.jsx("main",{className:"gm-body",children:a.jsx($e,{onClose:e})})]})]})})}const ot=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{ke as F,at as T,xe as a,ie as b,Ze as c,et as d,st as e,ot as f,tt as g,a as j,de as l,V as s,ue as u};

```

## ios\App\App\public\assets\index-e89a78ae.js
```
import{b as D,j as e,a as G,g as P,s as q}from"./games-23f18348.js";import{a as le,r as u,R as M}from"./react-vendor-b1791c80.js";import{u as pt,r as W,f as B,q as z,L as _,t as Ht,v as ve,w as se,x as V,_ as U,y as zt,m as qt,z as Yt,A as Gt,e as Ye,B as Kt,C as Qt}from"./modals-5fe29d8c.js";import{u as Te}from"./settings-b3931a55.js";import{C as bt,u as Ee,s as Xt,m as Y,f as Zt,O as Ae,M as Jt,e as re,a as es,g as yt,b as ce,o as X,S as ts,Q as ss,i as rs,c as ns,d as os,F as as}from"./pages-3e9569ff.js";import{C as Ge}from"./community-522739e7.js";import"./firebase-auth-41bcd574.js";import"./firebase-firestore-b7b9ad2a.js";import"./firebase-app-3e6db42c.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Se={},Ke=le;Se.createRoot=Ke.createRoot,Se.hydrateRoot=Ke.hydrateRoot;function Qe({current:t,onChange:r}){const n=D(),s=pt(),o=W("watching"),i=W("wishlist"),d=W("watched"),c=o.length,l=i.length,m=d.length,a=Array.isArray(s)?s.length:0,x=[{id:"watching",label:n.currentlyWatching,count:c},{id:"want",label:n.wantToWatch,count:l},{id:"watched",label:n.watched,count:m},{id:"mylists",label:n.myLists||"My Lists",count:a},{id:"discovery",label:n.discovery,count:0}];return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"w-full px-4 py-4",children:e.jsx("nav",{"aria-label":"Primary",className:"w-full",children:e.jsx("div",{className:"flex items-center gap-4 w-full",children:e.jsxs("div",{role:"tablist","aria-label":"Navigation",className:"flex gap-4 w-full",children:[e.jsx("button",{"aria-current":t==="home"?"page":void 0,onClick:()=>r("home"),className:"px-6 py-3 rounded-xl text-base font-semibold transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md shadow-sm flex-1 justify-center",style:{backgroundColor:t==="home"?"var(--accent)":"var(--card)",color:t==="home"?"white":"var(--text)",border:t==="home"?"none":"1px solid var(--line)"},children:n.home}),x.map(f=>e.jsxs("button",{role:"tab","aria-selected":t===f.id,onClick:()=>r(f.id),className:"px-6 py-3 rounded-xl text-base font-semibold transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md shadow-sm flex items-center justify-center min-w-0 flex-1",style:{backgroundColor:t===f.id?"var(--accent)":"var(--card)",color:t===f.id?"white":"var(--text)",border:t===f.id?"none":"1px solid var(--line)",flex:"1 1 0%"},children:[e.jsx("span",{className:"truncate",children:f.label}),e.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-sm font-bold flex-shrink-0",style:{backgroundColor:f.count>0?t===f.id?"rgba(255,255,255,0.2)":"var(--accent)":"transparent",color:f.count>0?"white":"transparent",minWidth:"20px",textAlign:"center"},children:f.count>0?f.count:""})]},f.id))]})})})})})}const Le=80,vt=u.createContext({viewportOffset:0}),_e=()=>u.useContext(vt);function Xe({current:t,onChange:r}){var y;const n=D(),s=pt(),[o,i]=u.useState(0);B("ðŸ“± MobileTabs rendering:",{current:t,screenWidth:window.innerWidth,screenHeight:window.innerHeight,viewportHeight:((y=window.visualViewport)==null?void 0:y.height)||"no visualViewport",scrollY:window.scrollY,bodyHeight:document.body.scrollHeight,viewportOffset:o}),u.useEffect(()=>{if(!window.visualViewport){B("ðŸ“± Visual Viewport API not supported, using safe fallback");const S=()=>{B("ðŸ“± Fallback resize detected, checking for keyboard");const A=window.innerHeight-window.screen.height;Math.abs(A)>100?i(Math.abs(A)):i(0)},k=()=>{B("ðŸ“± Orientation change detected"),setTimeout(()=>i(0),100)},T=()=>{B("ðŸ“± Visibility change detected"),document.hidden&&i(0)};return window.addEventListener("resize",S),window.addEventListener("orientationchange",k),document.addEventListener("visibilitychange",T),()=>{window.removeEventListener("resize",S),window.removeEventListener("orientationchange",k),document.removeEventListener("visibilitychange",T)}}let g=0,j=null;const p=()=>{j||(j=setTimeout(()=>{var E;j=null;const S=((E=window.visualViewport)==null?void 0:E.height)||window.innerHeight,k=window.innerHeight,T=window.visualViewport?window.visualViewport.offsetTop:0,A=Math.abs(T-g);if(B("ðŸ“± Visual viewport changed:",{visualHeight:S,screenHeight:k,currentOffsetTop:T,prevOffsetTop:g,offsetTopDelta:A,keyboardOpen:A<=50&&k-S>50}),A>50){B("ðŸ“± Toolbar animation detected, ignoring offset change"),i(0),g=T;return}const b=Math.max(0,k-S);i(b>50?b:0),g=T},50))};let h=null;const w=()=>{h&&clearTimeout(h),h=setTimeout(()=>{if(window.visualViewport&&Math.abs(window.visualViewport.offsetTop)<50){const S=document.querySelector(".mobile-nav");S&&(S.style.bottom="0px")}},100)};return p(),window.visualViewport.addEventListener("resize",p),window.addEventListener("scroll",w,{passive:!0}),()=>{var S;(S=window.visualViewport)==null||S.removeEventListener("resize",p),window.removeEventListener("scroll",w),j&&clearTimeout(j),h&&clearTimeout(h)}},[]);const d=W("watching"),c=W("wishlist"),l=W("watched"),m=d.length,a=c.length,x=l.length,f=Array.isArray(s)?s.length:0,N=[{id:"watching",label:"Watching",count:m},{id:"want",label:"Wishlist",count:a},{id:"watched",label:"Watched",count:x},{id:"mylists",label:"Lists",count:f},{id:"discovery",label:"Discover",count:0}];return e.jsx(vt.Provider,{value:{viewportOffset:o},children:e.jsx("nav",{className:"mobile-nav fixed left-0 right-0 z-nav px-1 py-2",style:{paddingBottom:"calc(8px + env(safe-area-inset-bottom))",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",backgroundColor:"var(--bg)",borderTop:"1px solid var(--line)",height:`${Le}px`,position:"fixed",bottom:o,left:0,right:0,zIndex:9999},children:e.jsxs("div",{className:"flex items-center justify-around h-full",children:[e.jsxs("button",{onClick:()=>r("home"),className:"flex flex-col items-center justify-center p-2 min-h-[60px] transition-all duration-200 ease-out relative flex-1",style:{color:t==="home"?"var(--accent)":"var(--muted)",fontWeight:t==="home"?"600":"500"},children:[e.jsx("span",{className:"text-sm font-medium",children:n.home}),t==="home"&&e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full",style:{backgroundColor:"var(--accent)"}})]}),e.jsx("div",{className:"h-8 w-px",style:{backgroundColor:"var(--line)"}}),N.map((g,j)=>e.jsxs(M.Fragment,{children:[e.jsxs("button",{onClick:()=>r(g.id),className:"flex flex-col items-center justify-center p-2 min-h-[60px] transition-all duration-200 ease-out relative flex-1",style:{color:t===g.id?"var(--accent)":"var(--muted)",fontWeight:t===g.id?"600":"500"},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:g.label}),g.count>0&&e.jsx("span",{className:"bg-gray-500 text-white text-xs font-bold rounded-full min-w-[16px] h-4 flex items-center justify-center px-1",style:{fontSize:"10px"},children:g.count})]}),t===g.id&&e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full",style:{backgroundColor:"var(--accent)"}})]}),j<N.length-1&&e.jsx("div",{className:"h-8 w-px",style:{backgroundColor:"var(--line)"}})]},g.id))]})})})}const is="0.1.11";function de(){const[t,r]=u.useState(null),[n,s]=u.useState(!0),[o,i]=u.useState(!1);return u.useEffect(()=>{const m=z.getCurrentUser();r(m);const a=z.isAuthStateInitialized();return i(a),a&&s(!1),z.subscribe(f=>{r(f);const N=z.isAuthStateInitialized();i(N),N&&s(!1)})},[]),{user:t,loading:n,authInitialized:o,signInWithProvider:async m=>{try{await z.signInWithProvider(m)}catch(a){throw console.error("Sign-in failed:",a),a}},signInWithEmail:async(m,a)=>{try{await z.signInWithEmail(m,a)}catch(x){throw console.error("Email sign-in failed:",x),x}},signOut:async()=>{try{await z.signOut()}catch(m){throw console.error("Sign-out failed:",m),m}},isAuthenticated:!!t}}function wt({children:t}){const[r,n]=u.useState(!1);return u.useEffect(()=>n(!0),[]),!r||typeof document>"u"?null:le.createPortal(t,document.body)}function jt({isOpen:t,onClose:r}){const{signInWithProvider:n}=de(),s=D(),[o,i]=u.useState(null),[d,c]=u.useState(null);if(u.useEffect(()=>{if(!t)return;const{style:a}=document.documentElement,x=a.overflow;return a.overflow="hidden",()=>{a.overflow=x}},[t]),!t)return null;const l=async a=>{i(a),c(null);try{await n(a),r()}catch(x){console.error(`${a} sign-in failed:`,x),c(x.message||"Sign-in failed. Please try again.")}finally{i(null)}},m=()=>{r()};return e.jsx(wt,{children:e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":s.signIn||"Sign In",className:"auth-modal-overlay fixed inset-0 backdrop-blur-sm flex items-start justify-center pt-48 p-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsxs("div",{className:"auth-modal-content rounded-xl w-full max-w-md p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:s.signIn||"Sign In"}),e.jsx("button",{onClick:r,className:"transition-colors",style:{color:"var(--muted)"},onMouseEnter:a=>a.currentTarget.style.color="var(--text)",onMouseLeave:a=>a.currentTarget.style.color="var(--muted)","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d&&e.jsx("div",{className:"mb-4 p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:d}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>l("google"),disabled:o==="google",className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[o==="google"?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:s.signInWithGoogle||"Sign in with Google"})]}),e.jsxs("button",{onClick:()=>l("apple"),disabled:o==="apple",className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[o==="apple"?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),e.jsx("span",{children:s.signInWithApple||"Sign in with Apple"})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{children:s.signInWithEmail||"Sign in with Email"})]})]}),e.jsx("div",{className:"mt-4 text-xs text-center",style:{color:"var(--muted)"},children:s.signInDescription||"Sign in to sync your lists across devices"})]})})})}function ls(){const{user:t,signOut:r,isAuthenticated:n}=de(),s=D(),[o,i]=u.useState(!1),d=async()=>{if(n)try{await r()}catch(m){console.error("Sign-out failed:",m)}else i(!0)},c=()=>{var m;return t?t.displayName||((m=t.email)==null?void 0:m.split("@")[0])||"User":s.signIn||"Sign In"},l=()=>n?s.clickToSignOut||"Click to sign out":s.signInHere||"Sign in here";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"text-xs",style:{color:"var(--muted)"},children:l()}),e.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg transition-colors hover:scale-105",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},title:n?`${s.signedInAs||"Signed in as"} ${t==null?void 0:t.email}. ${s.clickToSignOut||"Click to sign out"}.`:s.clickToSignIn||"Click to sign in",children:n?`ðŸ‘¤ ${c()}`:c()})]}),e.jsx(jt,{isOpen:o,onClose:()=>i(!1)})]})}function cs(){const{username:t}=Te(),r=G();if(!t)return null;const n=P("welcome",r.personalityLevel,{username:t});return e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:n})}function ds({isOpen:t,onClose:r}){const{user:n}=de(),{updateUsername:s,skipUsernamePrompt:o}=Te(),i=D(),[d,c]=u.useState(""),[l,m]=u.useState(!1),[a,x]=u.useState(null);if(u.useEffect(()=>{if(!t)return;const{style:g}=document.documentElement,j=g.overflow;return g.overflow="hidden",()=>{g.overflow=j}},[t]),!t)return null;const f=async g=>{if(g.preventDefault(),!d.trim()){x(i.usernameRequired||"Username is required");return}m(!0),x(null);try{await s(d.trim()),r()}catch(j){console.error("Failed to update username:",j),x(j.message||"Failed to save username")}finally{m(!1)}},N=async()=>{m(!0),x(null);try{await o(),r()}catch(g){console.error("Failed to skip username prompt:",g),x(g.message||"Failed to skip username prompt")}finally{m(!1)}},y=()=>{var g;return n?n.displayName||((g=n.email)==null?void 0:g.split("@")[0])||"User":""};return e.jsx(wt,{children:e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":i.whatShouldWeCallYou||"Choose a username",className:"username-prompt-modal-overlay fixed inset-0 backdrop-blur-sm flex items-start justify-center pt-48 p-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsxs("div",{className:"username-prompt-modal-content rounded-xl w-full max-w-md p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--line)"},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:i.welcomeToFlicklet||"Welcome to Flicklet!"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:i.whatShouldWeCallYou||"What should we call you?"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:i.username||"Username"}),e.jsx("input",{id:"username",type:"text",value:d,onChange:g=>c(g.target.value),placeholder:y(),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},autoFocus:!0}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:i.usernameDescription||"This will be used for personalized messages"})]}),a&&e.jsx("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:a}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:N,disabled:l,className:"flex-1 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i.saving||"Saving..."]}):i.skip||"Skip"}),e.jsx("button",{type:"submit",disabled:l||!d.trim(),className:"flex-1 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--accent)",color:"white"},children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i.saving||"Saving..."]}):i.save||"Save"})]})]})]})})})}const Ze=[{id:null,name:"All Genres"},{id:"28",name:"Action"},{id:"35",name:"Comedy"},{id:"18",name:"Drama"},{id:"27",name:"Horror"},{id:"10749",name:"Romance"},{id:"878",name:"Sci-Fi"},{id:"14",name:"Fantasy"},{id:"53",name:"Thriller"},{id:"16",name:"Animation"},{id:"99",name:"Documentary"},{id:"80",name:"Crime"},{id:"12",name:"Adventure"},{id:"10751",name:"Family"},{id:"36",name:"History"},{id:"10402",name:"Music"},{id:"9648",name:"Mystery"},{id:"10752",name:"War"},{id:"37",name:"Western"}];function us({selectedGenre:t,onGenreChange:r,className:n=""}){var m;const s=D(),[o,i]=u.useState(!1),d=u.useRef(null),c=((m=Ze.find(a=>a.id===t))==null?void 0:m.name)||s.allGenres,l=a=>{r(a),i(!1)};return u.useEffect(()=>{const a=x=>{d.current&&!d.current.contains(x.target)&&i(!1)};if(o)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[o]),e.jsxs("div",{className:`relative ${n}`,ref:d,children:[e.jsxs("button",{onClick:()=>i(!o),className:`\r
          w-full rounded-lg border px-2 py-2 text-xs text-left\r
          bg-card text-foreground border-line\r
          hover:bg-muted transition-colors duration-200\r
          flex items-center justify-between\r
        `,style:{backgroundColor:"var(--card)",color:"var(--foreground)",borderColor:"var(--line)"},children:[e.jsx("span",{className:"truncate text-xs",children:c}),e.jsx("span",{className:`text-xs transition-transform duration-200 flex-shrink-0 ${o?"rotate-180":""}`,children:"â–¼"})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-overlay",onClick:()=>i(!1)}),e.jsx("div",{className:`\r
              fixed bg-card border border-line rounded-xl shadow-lg\r
              max-h-80 overflow-y-auto\r
            `,style:{backgroundColor:"var(--card)",borderColor:"var(--line)",zIndex:9999,top:d.current?d.current.getBoundingClientRect().bottom+4:0,left:d.current?d.current.getBoundingClientRect().left:0,width:d.current?d.current.getBoundingClientRect().width:"auto",maxWidth:"400px"},children:e.jsx("div",{className:"py-2",children:Ze.map(a=>e.jsx("button",{onClick:()=>l(a.id),className:`
                  w-full text-left px-4 py-2 text-sm
                  transition-colors duration-200
                  hover:bg-muted
                  ${t===a.id?"bg-accent text-accent-foreground":"text-foreground"}
                `,style:{backgroundColor:t===a.id?"var(--accent)":"transparent",color:t===a.id?"var(--accent-foreground)":"var(--foreground)"},children:a.name},a.id||"all"))})})]})]})}const hs=["Marvel movies","Netflix originals","Anime series","Horror movies","Romantic comedies","Sci-fi shows","Documentaries","Action movies","Fantasy series","Thriller movies","Comedy shows","Drama series","Crime shows","Mystery movies","Family movies","War movies","Western movies","Musical movies","Historical dramas","Superhero shows"],Nt="flicklet.search-history",ms=10;function kt(){try{const t=localStorage.getItem(Nt);return t?JSON.parse(t):[]}catch{return[]}}function St(t){try{localStorage.setItem(Nt,JSON.stringify(t))}catch(r){console.warn("Failed to save search history:",r)}}function xs(t){if(!t.trim())return;const r=kt(),n=t.trim(),s=r.filter(i=>i!==n),o=[n,...s].slice(0,ms);St(o)}function ne(t){xs(t)}function fs({query:t,onSuggestionClick:r,onClose:n,isVisible:s,className:o=""}){const[i,d]=u.useState([]),[c,l]=u.useState([]),[m,a]=u.useState(-1),x=u.useRef(null);u.useEffect(()=>{d(kt())},[]),u.useEffect(()=>{if(!t.trim()){l([]);return}const y=t.toLowerCase(),g=hs.filter(h=>h.toLowerCase().includes(y)),j=i.filter(h=>h.toLowerCase().includes(y)),p=[...j,...g.filter(h=>!j.includes(h))];l(p.slice(0,8)),a(-1)},[t,i]),u.useEffect(()=>{const y=g=>{if(!(!s||c.length===0))switch(g.key){case"ArrowDown":g.preventDefault(),a(j=>j<c.length-1?j+1:j);break;case"ArrowUp":g.preventDefault(),a(j=>j>0?j-1:-1);break;case"Enter":g.preventDefault(),m>=0&&m<c.length&&f(c[m]);break;case"Escape":g.preventDefault(),n();break}};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s,c,m,n]);const f=y=>{r(y),n()},N=()=>{d([]),St([])};return!s||c.length===0?null:e.jsx("div",{ref:x,className:`
        absolute top-full left-0 right-0 mt-1 bg-card border border-line rounded-xl shadow-lg
        max-h-80 overflow-y-auto
        ${o}
      `,style:{backgroundColor:"var(--card)",borderColor:"var(--line)",zIndex:9999},children:e.jsxs("div",{className:"p-2",children:[i.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium",style:{color:"var(--muted)"},children:"Recent Searches"}),e.jsx("button",{onClick:N,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",style:{color:"var(--muted)"},children:"Clear"})]}),e.jsx("div",{className:"space-y-1",children:i.slice(0,3).map((y,g)=>e.jsx("button",{onClick:()=>f(y),className:`
                    w-full text-left px-3 py-2 rounded-lg text-sm transition-colors
                    ${m===g?"bg-accent text-accent-foreground":"hover:bg-muted text-foreground"}
                  `,style:{backgroundColor:m===g?"var(--accent)":"transparent",color:m===g?"var(--accent-foreground)":"var(--foreground)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ•’"}),e.jsx("span",{children:y})]})},`history-${y}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--muted)"},children:"Suggestions"}),e.jsx("div",{className:"space-y-1",children:c.map((y,g)=>{const j=i.includes(y),p=j?g:g+(i.length>0?3:0);return e.jsx("button",{onClick:()=>f(y),className:`
                    w-full text-left px-3 py-2 rounded-lg text-sm transition-colors
                    ${m===p?"bg-accent text-accent-foreground":"hover:bg-muted text-foreground"}
                  `,style:{backgroundColor:m===p?"var(--accent)":"transparent",color:m===p?"var(--accent-foreground)":"var(--foreground)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:j?"ðŸ•’":"ðŸ’¡"}),e.jsx("span",{children:y})]})},`suggestion-${y}`)})})]})]})})}function gs({onVoiceResult:t,onError:r,className:n=""}){const[s,o]=u.useState(!1),[i,d]=u.useState(!1),[c,l]=u.useState(null),m=u.useRef(null),a=u.useRef(null),x=typeof window<"u"&&(localStorage.getItem("flag:voice_search_disabled")==="true"||localStorage.getItem("flag:voice_search_enabled")!=="true");u.useEffect(()=>{typeof window<"u"&&(window.disableVoiceSearch=()=>{localStorage.setItem("flag:voice_search_disabled","true"),localStorage.removeItem("flag:voice_search_enabled"),console.log("ðŸŽ¤ Voice search disabled. Refresh page to apply.")},window.enableVoiceSearch=()=>{localStorage.setItem("flag:voice_search_enabled","true"),localStorage.removeItem("flag:voice_search_disabled"),console.log("ðŸŽ¤ Voice search enabled. Refresh page to apply.")})},[]),u.useEffect(()=>{const g=window.SpeechRecognition||window.webkitSpeechRecognition;return g?(d(!0),m.current=new g,m.current.continuous=!1,m.current.interimResults=!1,m.current.lang="en-US",m.current.onresult=j=>{const p=j.results[0][0].transcript;console.log("ðŸŽ¤ Voice recognition result:",p);const h=p.trim().toLowerCase();h&&t(h),o(!1),l(null)},m.current.onerror=j=>{console.error("ðŸŽ¤ Voice recognition error:",j.error);let p="Voice recognition failed",h=!0;switch(j.error){case"no-speech":p="No speech detected. Please try again.";break;case"audio-capture":p="Microphone not available. Please check your microphone.";break;case"not-allowed":p="Microphone access denied. Please allow microphone access.";break;case"network":p="Network error. Please check your connection.",h=!1;break;case"aborted":h=!1;break;default:p=`Recognition error: ${j.error}`}o(!1),h?(l(p),r==null||r(p)):l(null)},m.current.onend=()=>{o(!1),a.current&&(clearTimeout(a.current),a.current=null)}):(d(!1),l("Voice search is not supported in this browser")),()=>{a.current&&clearTimeout(a.current),m.current&&m.current.stop()}},[t,r]);const f=()=>{if(!i||!m.current){l("Voice search is not supported");return}if(s){console.log("ðŸŽ¤ Voice recognition already active, ignoring duplicate start");return}try{l(null),o(!0),m.current.start(),a.current=setTimeout(()=>{m.current&&m.current.stop(),o(!1),l("Listening timeout. Please try again.")},1e4),console.log("ðŸŽ¤ Started voice recognition")}catch(g){console.error("ðŸŽ¤ Failed to start voice recognition:",g),l("Failed to start voice recognition"),o(!1)}},N=()=>{m.current&&m.current.stop(),a.current&&(clearTimeout(a.current),a.current=null),o(!1)},y=g=>{if(g.key==="Enter"){g.preventDefault(),g.stopPropagation();return}g.key===" "&&(g.preventDefault(),s?N():f())};return!i||x?null:e.jsxs("div",{className:`relative ${n}`,children:[e.jsx("button",{onClick:s?N:f,onKeyDown:y,disabled:!i,tabIndex:-1,className:`
          flex items-center justify-center w-10 h-10 rounded-lg border transition-all duration-200 ease-out
          hover:scale-105 active:scale-95
          ${s?"bg-red-500 text-white border-red-500 animate-pulse":"bg-card text-muted-foreground border-line hover:bg-muted hover:text-foreground"}
        `,style:{backgroundColor:s?"#ef4444":"var(--card)",color:s?"#ffffff":"var(--muted)",borderColor:s?"#ef4444":"var(--line)"},title:s?"Stop listening":"Start voice search","aria-label":s?"Stop voice search":"Start voice search",children:s?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 6h12v12H6z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})})}),c&&e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-red-500 text-white text-xs rounded-lg shadow-lg z-50 whitespace-nowrap",style:{maxWidth:"200px"},children:[c,e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-red-500 rotate-45"})]}),s&&e.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full animate-ping"})]})}const ps=[{name:"Useless Facts",url:"https://uselessfacts.jsph.pl/random.json?language=en",parser:t=>t.text,source:"useless-facts"},{name:"Dad Jokes",url:"https://icanhazdadjoke.com/",parser:t=>t.joke,source:"dad-jokes"},{name:"Chuck Norris Facts",url:"https://api.chucknorris.io/jokes/random",parser:t=>t.value,source:"chuck-norris"}],bs=["ðŸŽ¬ Did you know? The average person spends 3 years of their life watching TV","ðŸ“º Fun fact: Netflix has over 15,000 titles but you'll still scroll for 20 minutes","ðŸ¿ Irony: We have more entertainment options than ever, yet we're more indecisive","ðŸŽ­ The paradox of choice: 500+ shows to watch, but nothing to watch","ðŸ“± We live in the golden age of content and the dark age of decision-making","ðŸŽª Your watchlist is like a museum you never visit","ðŸŽ¨ Binge-watching: The art of consuming content faster than you can process it","ðŸŽ¯ The algorithm knows you better than you know yourself","ðŸŽª We've turned entertainment into a competitive sport","ðŸŽ¬ The only thing harder than finding something to watch is explaining why you didn't like it"];let we=[],Je=0;const ys=5*60*1e3;async function Ct(){if(we.length>0&&Date.now()-Je<ys)return we;const t=[];for(const r of ps)try{const n=await fetch(r.url,{headers:{Accept:"application/json","User-Agent":"Flicklet/1.0"}});if(n.ok){const s=await n.json(),o=r.parser(s),i=vs(o);i&&t.push({text:i,source:r.source})}}catch(n){console.warn(`Failed to fetch from ${r.name}:`,n)}return t.length>0?(we=t,Je=Date.now(),t):bs.map(r=>({text:r,source:"fallback"}))}function vs(t){if(!t||typeof t!="string")return null;const r=t.trim();if(r.length<10||r.length>200||["damn","hell","crap","stupid","idiot"].some(i=>r.toLowerCase().includes(i)))return null;const s=["ðŸŽ¬","ðŸ“º","ðŸ¿","ðŸŽ­","ðŸŽª","ðŸŽ¨","ðŸŽ¯"];return`${s[Math.floor(Math.random()*s.length)]} ${r}`}async function ws(){try{await Ct()}catch(t){console.warn("Failed to preload marquee content:",t)}}function et({appName:t="Flicklet",showMarquee:r=!1,messages:n,marqueeSpeedSec:s=30,changeEveryMs:o=2e4,pauseOnHover:i=!0,onSearch:d,onClear:c,onHelpOpen:l}){const m=D(),{username:a,needsUsernamePrompt:x}=Te(),[f,N]=u.useState(!1),[y,g]=u.useState(!1);u.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("flicklet.marqueeHidden"):null;g(h==="1")}catch{}},[]);const j=()=>{g(!0);try{window.localStorage.setItem("flicklet.marqueeHidden","1")}catch{}},p=()=>{g(!1);try{window.localStorage.removeItem("flicklet.marqueeHidden")}catch{}};return u.useEffect(()=>{x()?N(!0):N(!1)},[a]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-4 sm:px-6",children:e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4 py-4 sm:py-6",children:[e.jsx("div",{className:"min-w-0 text-left",children:e.jsx(cs,{})}),e.jsx("div",{className:"text-center",children:e.jsx(js,{text:t})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:"select-none text-[11px] leading-none text-muted-foreground",title:"App version","data-testid":"app-version",children:["v",is]}),e.jsx("button",{onClick:()=>{try{l&&l()}catch(h){console.error("Error calling onHelpOpen:",h)}},className:"rounded-full border border-gray-300 dark:border-gray-600 px-2 py-1 text-[11px] leading-none text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors","aria-label":"Open help",title:"Help & Support","data-testid":"help-button",children:"?"}),y&&e.jsx("button",{type:"button",onClick:p,className:"rounded-full border px-2 py-1 text-[11px] leading-none text-muted-foreground hover:bg-accent hover:text-accent-foreground","aria-pressed":"false","data-testid":"marquee-show",title:"Show marquee",children:m.showMarquee}),e.jsx(ls,{})]})]})})}),e.jsx("div",{className:"sticky top-[var(--safe-top,0px)] z-nav border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-3 sm:px-4 py-2",children:e.jsx("div",{className:"relative flex items-center gap-3 rounded-2xl border bg-background p-3 sm:p-4","data-testid":"search-row",children:e.jsx(Ns,{onSearch:d,onClear:c})})})}),r&&!y&&e.jsx(ks,{messages:n||[],speedSec:s,changeEveryMs:o,pauseOnHover:i,onClose:j}),e.jsx(ds,{isOpen:f,onClose:()=>N(!1)})]})}function js({text:t}){return e.jsx("h1",{className:"select-none text-balance font-extrabold tracking-tight text-3xl sm:text-4xl md:text-5xl lg:text-6xl bg-gradient-to-r from-fuchsia-500 via-pink-500 to-amber-400 bg-clip-text text-transparent drop-shadow-[0_1px_0_rgba(255,255,255,0.35)]",title:t,"data-testid":"app-title",children:e.jsx("span",{className:"inline-block transition-transform duration-300 ease-out hover:scale-[1.02]",children:t})})}function Ns({onSearch:t,onClear:r}){const n=D(),[s,o]=M.useState(""),[i,d]=M.useState(null),[c,l]=M.useState("title"),[m,a]=M.useState("all"),[x,f]=M.useState(!1),[N,y]=M.useState(!1),[g,j]=M.useState(!1),p=M.useRef(null),h=M.useRef(null),w=()=>{const C=s.trim();C&&(c==="tag"?t==null||t(`tag:${C}`,i,m):t==null||t(C,i,m),ne(C)),f(!1)},S=()=>{var C;o(""),d(null),l("title"),a("all"),f(!1),r==null||r(),(C=h.current)==null||C.focus()},k=C=>{o(C),f(!1),setTimeout(()=>{c==="tag"?t==null||t(`tag:${C.trim()}`,i,m):t==null||t(C.trim(),i,m),ne(C.trim())},100)},T=C=>{o(C.target.value),f(C.target.value.length>0&&N)},A=C=>{y(!0),f(s.length>0),C.currentTarget.select()},b=()=>{setTimeout(()=>{y(!1),f(!1)},150)},E=C=>{if(C.key==="Enter"&&!g){C.preventDefault();const L=C.target.value.trim();L&&(c==="tag"?t==null||t(`tag:${L}`,i,m):t==null||t(L,i,m),ne(L)),f(!1)}else C.key==="Escape"&&(C.preventDefault(),S())};return M.useEffect(()=>{const C=L=>{p.current&&!p.current.contains(L.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx("form",{onSubmit:C=>{C.preventDefault(),w()},children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{ref:h,type:"search",role:"searchbox",inputMode:"search","aria-label":"Search movies, shows, people",placeholder:c==="tag"?"Search by tag...":n.searchPlaceholder,value:s,onChange:T,onFocus:A,onBlur:b,onKeyDown:E,onCompositionStart:()=>j(!0),onCompositionEnd:()=>j(!1),className:"w-full rounded-xl border px-4 py-3 pr-12 text-sm outline-none ring-0 focus:border-primary",spellCheck:"true"}),e.jsx("div",{className:"absolute right-2",children:e.jsx(gs,{onVoiceResult:C=>{o(C),f(!1),setTimeout(()=>{c==="tag"?t==null||t(`tag:${C.trim()}`,i,m):t==null||t(C.trim(),i,m),ne(C.trim())},100)},onError:C=>{console.warn("Voice search error:",C)}})})]})}),e.jsx(fs,{query:s,onSuggestionClick:k,onClose:()=>f(!1),isVisible:x})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>l("title"),className:`px-3 py-2 text-xs font-medium transition-colors ${c==="title"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Title"}),e.jsx("button",{onClick:()=>l("tag"),className:`px-3 py-2 text-xs font-medium transition-colors ${c==="tag"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Tag"})]}),e.jsxs("div",{className:"flex rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>a("all"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="all"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"All"}),e.jsx("button",{onClick:()=>a("movies-tv"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="movies-tv"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"Movies/TV"}),e.jsx("button",{onClick:()=>a("people"),className:`px-3 py-2 text-xs font-medium transition-colors ${m==="people"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-muted"}`,children:"People"})]}),e.jsx("div",{className:"w-32",children:e.jsx(us,{selectedGenre:i,onGenreChange:d,className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"rounded-lg border px-3 py-2 text-xs font-semibold hover:bg-accent hover:text-accent-foreground transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md",onClick:w,children:n.search}),e.jsx("button",{type:"button",className:"rounded-lg border px-3 py-2 text-xs font-semibold hover:bg-muted transition-all duration-150 ease-out hover:scale-105 active:scale-95 active:shadow-inner hover:shadow-md",onClick:S,children:n.clear})]})]})]})})}function ks({messages:t,speedSec:r=30,changeEveryMs:n=2e4,pauseOnHover:s=!0,onClose:o}){const i=D(),[d,c]=u.useState(0),[l,m]=u.useState([]),a=u.useRef(0);u.useEffect(()=>{(async()=>{try{const g=(await Ct()).map(j=>j.text);m(g)}catch(y){console.warn("Failed to load marquee content from API:",y),m(t)}})()},[t]),u.useEffect(()=>{ws()},[]),u.useEffect(()=>{const N=l.length>0?l:t;if(!(N!=null&&N.length))return;const y=setInterval(()=>{c(g=>(g+1)%N.length),a.current+=1},Math.max(4e3,n));return()=>clearInterval(y)},[l,t,n]);const f=(l.length>0?l:t)[d]||"";return e.jsx("div",{className:"marquee-rail f-marquee-rail w-full border-t bg-muted/60 text-muted-foreground","data-testid":"marquee-rail","data-pause-on-hover":s?"true":"false",children:e.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-3 sm:px-4",children:e.jsxs("div",{className:"relative h-9 sm:h-10 overflow-hidden",children:[o&&e.jsx("button",{type:"button",onClick:o,className:"absolute right-1.5 top-1.5 z-dropdown rounded-md border px-2 py-0.5 text-[11px] leading-none backdrop-blur hover:bg-accent hover:text-accent-foreground","aria-label":"Hide marquee","data-testid":"marquee-hide",children:i.hideMarquee}),e.jsxs("div",{className:"absolute inset-0 whitespace-nowrap f-marquee-scroll",style:{"--marquee-duration":`${Math.max(10,r)}s`},"aria-live":"polite","data-testid":"marquee-scroller",children:[e.jsx("span",{className:"pr-[100vw] align-middle text-sm sm:text-base md:text-lg",children:f}),e.jsx("span",{className:"pr-[100vw] align-middle text-sm sm:text-base md:text-lg","aria-hidden":!0,children:f})]},a.current)]})})})}function tt(t){const r=t.map(n=>new Promise((s,o)=>{const i=new Image;i.onload=()=>s(),i.onerror=()=>o(new Error(`Failed to load image: ${n}`)),i.src=n}));return Promise.all(r)}function Ss(t){u.useEffect(()=>{if(t.length===0)return;const r=t.slice(0,5).map(s=>s.posterUrl).filter(s=>!!s);r.length>0&&tt(r).then(()=>{console.log(`[Rail Preload] Preloaded ${r.length} immediate images`)}).catch(s=>{console.warn("[Rail Preload] Failed to preload immediate images:",s)});const n=t.slice(5,15).map(s=>s.posterUrl).filter(s=>!!s);if(n.length>0){const s=setTimeout(()=>{tt(n).then(()=>{console.log(`[Rail Preload] Preloaded ${n.length} remaining images`)}).catch(o=>{console.warn("[Rail Preload] Failed to preload remaining images:",o)})},1e3);return()=>clearTimeout(s)}},[t])}function je({id:t,title:r,enabled:n=!0,skeletonCount:s=0,items:o}){if(!n)return null;const i=o&&o.length?o:Array.from({length:s}).map(()=>({})),c=(a=>a==="currently-watching"?"tab-watching":a.startsWith("for-you-")||a==="in-theaters"?"tab-foryou":"home")(t);Ss(i.map(a=>({posterUrl:a.poster})));const l={onWant:a=>{console.log("ðŸŽ¬ For You Want button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"wishlist"),console.log("âœ… Item added to wishlist:",a.title))},onWatched:a=>{console.log("ðŸŽ¬ For You Watched button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"watched"),console.log("âœ… Item added to watched:",a.title))},onNotInterested:a=>{console.log("ðŸŽ¬ For You Not Interested button clicked:",a),a.id&&a.mediaType&&(_.upsert({id:a.id,mediaType:a.mediaType,title:a.title,posterUrl:a.posterUrl,year:a.year,voteAverage:a.voteAverage},"not"),console.log("âœ… Item added to not interested:",a.title))},onDelete:a=>{console.log("ðŸŽ¬ For You Delete button clicked:",a),a.id&&a.mediaType&&(_.remove(a.id,a.mediaType),console.log("âœ… Item deleted:",a.title))}};function m(a){const x=a.currentTarget,f=x.querySelector('[data-testid="cardv2"]'),N=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--space-3").replace("px",""))||12,g=(f?f.getBoundingClientRect().width:166)+N;switch(a.key){case"ArrowRight":a.preventDefault(),x.scrollBy({left:+g,behavior:"smooth"});break;case"ArrowLeft":a.preventDefault(),x.scrollBy({left:-g,behavior:"smooth"});break;case"Home":a.preventDefault(),x.scrollTo({left:0,behavior:"smooth"});break;case"End":a.preventDefault(),x.scrollTo({left:x.scrollWidth,behavior:"smooth"});break;case"Enter":{const j=x.querySelector('[data-testid="cardv2"]');j&&j.focus();break}}}return e.jsxs("section",{"data-rail":t,"aria-label":r,className:"px-4 py-3",children:[e.jsx("h2",{className:"mb-2 text-base font-semibold",style:{color:"var(--text)"},children:r}),e.jsx("div",{"data-cards":!0,role:"list",tabIndex:0,onKeyDown:m,className:"flex gap-3 overflow-x-auto snap-x snap-mandatory pb-2",children:i.map((a,x)=>{const f=(()=>typeof a.title=="string"&&a.title.trim()&&a.title!==String(a.id)?a.title.trim():"Untitled")(),N={id:a.id||x,mediaType:a.kind||"movie",title:f,posterUrl:a.poster,year:a.year?String(a.year):void 0,voteAverage:void 0};return e.jsx("div",{role:"listitem",className:"snap-start",children:e.jsx(bt,{item:N,context:c,actions:l,disableSwipe:!0})},a.id??x)})})]})}function Z({title:t,children:r}){return e.jsx("section",{"aria-label":t,className:"px-4 py-4",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",style:{color:"var(--text)"},children:t}),e.jsx("div",{className:"rounded-2xl p-4 md:p-5",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:r})]})})}function Tt(){const[t,r]=u.useState(null),[n,s]=u.useState("loading");return u.useEffect(()=>{(async()=>{try{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async d=>{const{latitude:c,longitude:l}=d.coords;try{const a=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${c}&longitude=${l}&localityLanguage=en`)).json();r({latitude:c,longitude:l,city:a.city||"Unknown",region:a.principalSubdivision||"Unknown",country:a.countryName||"Unknown"}),s("granted")}catch(m){console.error("Failed to get city info:",m);const a=await ve();r(a),s("granted")}},async d=>{console.log("Geolocation denied or failed:",d),s("denied");try{const c=await ve();r(c)}catch(c){console.error("Failed to get IP location:",c),r(null)}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5});else try{const d=await ve();r(d),s("granted")}catch(d){console.error("Failed to get IP location:",d),r(null),s("denied")}}catch(d){console.error("Location setup failed:",d),s("denied")}})()},[]),{location:t,locationPermission:n,requestLocationPermission:()=>{s("prompt"),window.location.reload()},isLoading:n==="loading"}}function Cs(t=10){const{location:r}=Tt();return Ee({queryKey:["theaters",r==null?void 0:r.latitude,r==null?void 0:r.longitude,t],queryFn:()=>r?Ht(r.latitude,r.longitude,t):[],enabled:!!r,staleTime:3e5,retry:2})}function st(){const t=D(),{location:r,locationPermission:n,requestLocationPermission:s,isLoading:o}=Tt(),{data:i,isLoading:d}=Cs(),[c,l]=u.useState(!1);if(o)return e.jsxs("div",{className:"mb-3 flex flex-col gap-1",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:["ðŸ“ ",t.detectingLocation||"Detecting your location..."]})]});if(!r)return e.jsxs("div",{className:"mb-3 flex flex-col gap-1",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[e.jsxs("span",{className:"font-medium",children:["ðŸ“ ",t.locationUnavailable||"Location unavailable"]}),n==="denied"&&e.jsx("button",{onClick:s,className:"ml-2 text-blue-400 hover:text-blue-300 underline",children:t.enableLocation||"Enable location"})]})]});const m=()=>{l(!c)};return e.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-200",children:t.inTheatersNearYou}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[e.jsxs("span",{className:"font-medium",children:["ðŸ“ ",r.city,", ",r.region]}),e.jsxs("button",{onClick:m,className:"ml-2 text-blue-400 hover:text-blue-300 underline",children:[c?t.hideShowtimes||"Hide":t.findShowtimes||"Find"," Showtimes"]})]}),c&&e.jsx("div",{className:"mt-2 space-y-2",children:d?e.jsx("div",{className:"text-xs text-neutral-400",children:t.loadingTheaters||"Loading theaters..."}):i&&i.length>0?e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsx(Ts,{theater:a},a.id))}):e.jsx("div",{className:"text-xs text-neutral-400",children:t.noTheatersFound||"No theaters found nearby. Try expanding your search radius."})})]})}function Ts({theater:t}){const[r,n]=u.useState(!1),s=D();return console.log("ðŸŽ¬ TheaterCard rendering:",t),e.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium",style:{color:"var(--text)"},children:t.name}),e.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:[t.address,t.distance&&e.jsxs("span",{className:"ml-1",children:["â€¢ ",t.distance,s.kmAway||"km away"]})]}),e.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[t.phone&&e.jsxs("span",{className:"text-xs",style:{color:"var(--muted)"},children:["ðŸ“ž ",t.phone]}),t.website&&e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 underline",children:"ðŸŒ Visit Website"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.jsxs("button",{onClick:()=>n(!r),className:"text-xs px-2 py-1 rounded border transition-colors",style:{color:"var(--accent)",borderColor:"var(--accent)",backgroundColor:"transparent"},children:[r?s.hideTimes||"Hide":s.showTimes||"Show"," Times"]}),t.website&&e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 rounded border transition-colors text-center",style:{color:"var(--text)",borderColor:"var(--line)",backgroundColor:"transparent"},children:"Real Showtimes"})]})]}),r&&t.showtimes&&e.jsxs("div",{className:"mt-2 pt-2 border-t",style:{borderColor:"var(--line)"},children:[e.jsx("div",{className:"text-xs font-medium mb-1",style:{color:"var(--text)"},children:s.todaysShowtimes||"Today's Showtimes:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.showtimes.map((o,i)=>e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${o.available?"bg-green-900 text-green-200 border border-green-700":"bg-gray-800 text-gray-400 border border-gray-600"}`,children:[o.time," ",o.format]},i))}),e.jsx("div",{className:"mt-2 text-xs",style:{color:"var(--muted)"},children:e.jsx("span",{className:"italic",children:"* Estimated showtimes. For accurate showtimes and ticket availability, visit the theater website."})})]})]})}function Es({message:t,type:r,onClose:n}){const[s,o]=u.useState(!0);u.useEffect(()=>{const d=setTimeout(()=>{o(!1),setTimeout(n,300)},3e3);return()=>clearTimeout(d)},[n]);const i=()=>{switch(r){case"success":return{backgroundColor:"var(--card)",borderColor:"#10b981",color:"var(--text)",border:"1px solid"};case"error":return{backgroundColor:"var(--card)",borderColor:"#ef4444",color:"var(--text)",border:"1px solid"};default:return{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"}}};return s?e.jsx("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,style:i(),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:t}),e.jsx("button",{onClick:()=>{o(!1),setTimeout(n,300)},className:"ml-3 text-neutral-400 hover:text-neutral-200 transition-colors","aria-label":"Close notification",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}function Et(){const[t,r]=u.useState([]);return{toasts:t,addToast:(o,i="info")=>{const d=Math.random().toString(36).substr(2,9);r(c=>[...c,{id:d,message:o,type:i}])},removeToast:o=>{r(i=>i.filter(d=>d.id!==o))}}}function rt(){const t=D(),{addToast:r}=Et(),[n,s]=u.useState(""),[o,i]=u.useState(!1),d=async c=>{if(c.preventDefault(),!n.trim()){r("Please enter some feedback before submitting.","error");return}i(!0);try{console.log("ðŸŒ Submitting via Netlify Forms");const l=new FormData;l.append("form-name","feedback"),l.append("message",n.trim()),l.append("theme","light"),l.append("timestamp",new Date().toISOString()),console.log("ðŸ“¤ Form data:",{"form-name":"feedback",message:n.trim(),theme:"light",timestamp:new Date().toISOString()});const m=await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l).toString()});if(console.log("ðŸ“¡ Response status:",m.status),console.log("ðŸ“¡ Response headers:",Object.fromEntries(m.headers.entries())),!m.ok){const x=await m.text();throw console.error("âŒ Response error:",x),new Error(`HTTP ${m.status}: ${x}`)}const a=await m.text();console.log("ðŸ“¥ Response body:",a),console.log("âœ… Feedback submitted successfully via Netlify Forms"),r("Thanks for sharing! Your thoughts have been received. ðŸ’­","success"),s("")}catch(l){console.error("âŒ Error submitting feedback:",l),r("Sorry, there was an error submitting your feedback. Please try again.","error")}finally{i(!1)}};return e.jsxs("div",{"data-rail":"feedback",className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--text)"},children:t.tellUsWhatToImprove}),e.jsxs("form",{name:"feedback",method:"POST","data-netlify":"true","netlify-honeypot":"bot-field",className:"flex flex-col gap-3",onSubmit:d,children:[e.jsx("input",{type:"hidden",name:"form-name",value:"feedback"}),e.jsx("input",{type:"hidden",name:"theme",value:"light"}),e.jsx("div",{style:{display:"none"},children:e.jsxs("label",{children:["Don't fill this out if you're human: ",e.jsx("input",{name:"bot-field"})]})}),e.jsx("textarea",{name:"message",className:"w-full h-28 rounded-2xl p-3 text-sm",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:t.typeYourFeedback,value:n,onChange:c=>s(c.target.value),disabled:o,required:!0}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{type:"submit",className:"btn",disabled:o||!n.trim(),children:o?"Sending...":t.sendFeedback})})]})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ“ Submit Content"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",style:{color:"var(--text)"},children:"Marquee Comments"}),e.jsxs("div",{className:"text-xs space-y-1",style:{color:"var(--muted)"},children:[e.jsx("p",{children:"â€¢ Keep comments under 100 characters"}),e.jsx("p",{children:"â€¢ Use feedback form on the left"}),e.jsx("p",{children:'â€¢ Subject: "Marquee Comment: [Show Name]"'}),e.jsx("p",{children:"â€¢ Include your comment in the message body"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium mb-2",style:{color:"var(--text)"},children:"ðŸŽ¬ Video Submissions"}),e.jsxs("div",{className:"text-xs space-y-1",style:{color:"var(--muted)"},children:[e.jsx("p",{children:"â€¢ Max file size: 100MB"}),e.jsx("p",{children:"â€¢ Formats: MP4, MOV, AVI"}),e.jsx("p",{children:"â€¢ Resolution: 720p minimum"}),e.jsx("p",{children:"â€¢ Duration: 30 seconds - 5 minutes"}),e.jsxs("p",{children:["â€¢ Email: ",e.jsx("strong",{children:"support@flickletapp.com"})]}),e.jsx("p",{children:'â€¢ Subject: "Video Submission: [Show Name] - [Type]"'}),e.jsx("p",{children:"â€¢ Include: Show name, video type, your username"})]})]})]})]})}const nt=new Map,As=5*60*1e3;async function Ls(...t){const[r,n,s,o]=t,i=[r,n,s??"",o].join("|"),d=nt.get(i);if(d&&Date.now()-d.t<As)return d.v;const c=await Xt(...t);return nt.set(i,{t:Date.now(),v:c}),c}function _s(t){const r=new URLSearchParams;for(const[n,s]of Object.entries(t))s!=null&&s!==""&&r.set(n,String(s));return r.toString()}async function H(t,r,n){const s=`/api/tmdb-proxy?${_s({path:t,...r})}`,o=await fetch(s,{signal:n});if(!o.ok)throw new Error(`${t} failed: ${o.status}`);return o.json()}function Me(t){return t.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[''']/g,"'").replace(/["""]/g,'"').trim()}function At(t){const r=Me(t),n=r.replace(/[â€“â€”]/g,"-"),s=n.replace(/[-]+/g," "),o=n.replace(/[-\s]+/g,"");return Array.from(new Set([r,n,s,o].map(i=>i.toLowerCase())))}function ot(t){return t.toLowerCase().split(/[^a-z0-9']+/).filter(Boolean)}function Ms(t,r){const n=new Set([...t].filter(o=>r.has(o))).size,s=new Set([...t,...r]).size||1;return n/s}function Lt(t,r){const n=At(t),s=Me(r).toLowerCase();for(const c of n){if(s===c)return 1;if(s.includes(c))return .9}const o=new Set(ot(n[1]||t)),i=new Set(ot(s));let d=Ms(o,i);return/^z[-\s]?nation$/i.test(n[1]||t)&&/nation/.test(s)&&!/zombie|undead|apocalypse|infect|virus|outbreak|plague/i.test(s)&&(d*=.5),d}const Rs=new Set([27,10765,10759]),Is=new Set([27,878,28]);function Ds(t){const r=t.genre_ids||[];return t.mediaType==="tv"?r.some(n=>Rs.has(n))?.25:0:t.mediaType==="movie"&&r.some(n=>Is.has(n))?.25:0}function Ps(t){if(!t)return 0;const r=t.toLowerCase(),s=["zombie","undead","apocalypse","virus","outbreak","plague"].reduce((o,i)=>o+(r.includes(i)?1:0),0);return Math.min(.25,s*.07)}function $s(t){return Math.min(.25,(t??0)/40)}function Fs(t,r){const n=Lt(t,r.title||""),s=Ds(r),o=Ps(r.synopsis),i=$s(r.voteAverage);return n*.7+s+o+i}function at(t){const r=new Set,n=[];for(const s of t){const o=`${s.mediaType}:${s.id}`;r.has(o)||(r.add(o),n.push(s))}return n}async function Bs(t,r=1,n="all",s){const o=(s==null?void 0:s.language)??"en-US",i=(s==null?void 0:s.region)??"US",d=Me(t);if(n==="people")return((await H("search/person",{query:d,page:r,include_adult:!1,language:o,region:i},s==null?void 0:s.signal)).results??[]).map(Y).filter(Boolean);const c=At(d),l=c[1]||d,m=c[0]||d,[a,x]=await Promise.all([H("search/tv",{query:l,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).catch(()=>H("search/tv",{query:m,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal)),H("search/movie",{query:l,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).catch(()=>H("search/movie",{query:m,page:1,include_adult:!1,language:o,region:i},s==null?void 0:s.signal))]),f=(a.results??[]).map(Y).filter(Boolean),N=(x.results??[]).map(Y).filter(Boolean),y=[...f,...N],g=y.map(k=>({c:k,s:Lt(d,k.title||"")})).sort((k,T)=>T.s-k.s),j=g.length&&g[0].s>=.75?g[0].c:null;let p=[];if(j&&(j.mediaType==="tv"||j.mediaType==="movie"))try{const[k,T]=await Promise.all([H(`${j.mediaType}/${j.id}/similar`,{page:1,language:o},s==null?void 0:s.signal),H(`${j.mediaType}/${j.id}/recommendations`,{page:1,language:o},s==null?void 0:s.signal)]),A=(k.results??[]).map(Y).filter(Boolean),b=(T.results??[]).map(Y).filter(Boolean);p=at([...A,...b])}catch{}const h=await H("search/multi",{query:d,page:r,include_adult:!1,language:o,region:i},s==null?void 0:s.signal).then(k=>(k.results??[]).map(Y).filter(Boolean)),S=at([...j?[j]:[],...p,...y,...h]).map(k=>({item:k,score:Fs(d,k)})).sort((k,T)=>T.score-k.score).map(k=>k.item);return n==="movies-tv"?S.filter(k=>k.mediaType==="tv"||k.mediaType==="movie"):S}async function _t(t){var i;const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json();return console.log(`ðŸ” TMDB Response for ${t}:`,{next_episode_to_air:s==null?void 0:s.next_episode_to_air,status:s==null?void 0:s.status,last_air_date:s==null?void 0:s.last_air_date}),((i=s==null?void 0:s.next_episode_to_air)==null?void 0:i.air_date)||null||null}async function Mt(t){const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json();return{status:(s==null?void 0:s.status)||"Unknown",lastAirDate:(s==null?void 0:s.last_air_date)||null}}async function Ws(t){const r=`/.netlify/functions/tmdb-proxy?path=tv/${t}&language=en-US`,n=await fetch(r);if(!n.ok)return null;const s=await n.json(),o=s==null?void 0:s.next_episode_to_air;return o?{season:o.season_number,episode:o.episode_number}:null}function it({query:t,genre:r,searchType:n="all",nonce:s}){const[o,i]=u.useState([]),[d,c]=u.useState(0),[l,m]=u.useState(!0),[a,x]=u.useState(!1),[f,N]=u.useState(null),y=u.useRef(null),g=G();u.useEffect(()=>{var p;(p=y.current)==null||p.abort(),i([]),c(0),m(!0),N(null),j(1,!0)},[t,r,n,s]);async function j(p,h=!1){var S;if(a||!l)return;(S=y.current)==null||S.abort();const w=new AbortController;y.current=w,x(!0);try{const T=n!=="people"&&!t.startsWith("tag:")?await Bs(t,p,n,{signal:w.signal}):await Ls(t,p,r??null,n,{signal:w.signal});i(A=>h?T:[...A,...T]),c(p),m(T.length>=20)}catch(k){(k==null?void 0:k.name)!=="AbortError"&&N((k==null?void 0:k.message)||"Search failed")}finally{x(!1)}}return t?e.jsxs("section",{className:"mx-auto w-full max-w-7xl px-3 sm:px-4 py-3","aria-labelledby":"search-results-heading",children:[e.jsx("h2",{id:"search-results-heading",className:"text-base font-semibold mb-6",children:t.startsWith("tag:")?`Tag search results for "${t.substring(4)}"`:`Search results for "${t}"`}),a&&o.length===0&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:P("searchLoading",g.personalityLevel)}),f&&e.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["âš ï¸ ",f]}),e.jsx("div",{className:"space-y-6",children:o.map(p=>e.jsx(Os,{item:p,onRemove:()=>i(h=>h.filter(w=>w.id!==p.id))},`${p.mediaType}:${p.id}`))}),l&&e.jsx("div",{className:"h-20 flex items-center justify-center",ref:p=>{if(p){const h=new IntersectionObserver(w=>{w[0].isIntersecting&&!a&&j(d+1)},{threshold:.1});return h.observe(p),()=>h.disconnect()}},children:a&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading more..."})})]}):null}function Os({item:t,onRemove:r}){const n=D(),{posterUrl:s,mediaType:o,synopsis:i}=t,[d,c]=M.useState(new Set),[l,m]=M.useState({});M.useEffect(()=>{(o==="movie"||o==="tv")&&Zt(Number(t.id),o).then(m)},[t.id,o]);function a(w){const k=(typeof w.title=="string"?w.title:String(w.title??"").trim())||"Untitled";return w.year?`${k} (${w.year})`:k}const x=a(t),f=w=>{if(!w||w.length===0)return"Genre TBA";const S={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},k=w[0];return S[k]||"Genre TBA"};if(o==="person")return e.jsx(Us,{item:t});const N=f(t.genre_ids),y=o==="movie"?"Movie":"TV Series",g=["NEW","TRENDING"],j=()=>o==="tv"&&l.networks&&l.networks.length>0?`On ${l.networks[0]}${l.networks.length>1?` (+${l.networks.length-1} more)`:""}`:o==="movie"&&l.productionCompanies&&l.productionCompanies.length>0?`From ${l.productionCompanies[0]}${l.productionCompanies.length>1?` (+${l.productionCompanies.length-1} more)`:""}`:null,p=async w=>{console.log("ðŸŽ¬ handleAction called with:",w,"for item:",t.title);const S=`${w}-${t.id}`;c(k=>new Set(k).add(S));try{switch(w){case"want":se(t,"wishlist",()=>{re("card:want",{id:t.id,mediaType:t.mediaType}),r()});break;case"currently-watching":{let k=null,T,A;if(o==="tv"){k=await _t(Number(t.id));const b=await Mt(Number(t.id));b&&(T=b.status,A=b.lastAirDate||void 0)}se({...t,nextAirDate:k,showStatus:T,lastAirDate:A},"watching",()=>{r()});break}case"watched":se(t,"watched",()=>{re("card:watched",{id:t.id,mediaType:t.mediaType}),r()});break;case"not-interested":se(t,"not",()=>{re("card:notInterested",{id:t.id,mediaType:t.mediaType}),r()});break;case"holiday":re("card:holidayAdd",{id:t.id,mediaType:t.mediaType});break;default:console.log(`${w} clicked for ${x}`)}}finally{setTimeout(()=>{c(k=>{const T=new Set(k);return T.delete(S),T})},300)}},h=(w,S,k=!1)=>{const T=`${w}-${t.id}`,A=d.has(T),b=w==="currently-watching"&&d.has(T);return e.jsx("button",{onClick:()=>p(w),className:`px-2.5 py-1.5 rounded-lg text-xs transition-all duration-150 ease-out ${A?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"} ${b?"cursor-wait":"cursor-pointer"}`,style:{backgroundColor:A?"var(--accent)":"var(--btn)",color:k?"white":"var(--text)",borderColor:"var(--line)",border:"1px solid"},disabled:A,children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin mr-1"}),e.jsx("span",{className:"text-[10px]",children:"..."})]}):S})};return e.jsxs("div",{className:"relative flex bg-card border border-line rounded-xl overflow-hidden shadow-lg hover:transform hover:-translate-y-0.5 transition-transform",children:[e.jsx("a",{href:`https://www.themoviedb.org/${o}/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-24 h-36 bg-muted cursor-pointer",title:n.opensInTmdb,children:s?e.jsx(Ae,{src:s,alt:x,context:"poster",className:"w-full h-full",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-neutral-800 flex items-center justify-center text-sm text-muted-foreground",children:"No poster"})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col relative",children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:x}),e.jsxs("div",{className:"text-muted-foreground text-sm mb-1",children:[N," â€¢ ",y]}),j()&&e.jsx("div",{className:"text-accent text-sm mb-2",children:j()}),e.jsx("div",{className:"text-muted-foreground text-sm mb-2 max-h-12 overflow-hidden",children:i||n.noSynopsisAvailable}),e.jsx("div",{className:"flex gap-2 mb-2",children:g.map(w=>e.jsx("span",{className:"border border-line rounded px-2 py-0.5 text-xs text-muted-foreground",children:w},w))}),e.jsxs("div",{className:"flex items-center gap-1 mb-4",children:[e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-lg cursor-pointer",children:"â˜†"}),e.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Your rating)"}),t.voteAverage&&e.jsxs("span",{className:"text-muted-foreground text-xs ml-4",children:["TMDB: ",t.voteAverage.toFixed(1),"/10"]})]}),e.jsx("div",{className:"mt-auto flex flex-wrap gap-2 justify-between items-center",children:e.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded-lg",style:{borderColor:"var(--line)",border:"1px dashed"},children:[h("want",n.wantToWatchAction),h("currently-watching",n.currentlyWatchingAction),h("watched",n.watchedAction),h("not-interested",n.notInterestedAction),e.jsx(Jt,{item:t})]})})]})]})}function Us({item:t}){const{posterUrl:r}=t,[n,s]=M.useState(new Set);function o(a){const f=(typeof a.title=="string"?a.title:String(a.title??"").trim())||"Untitled";return a.year?`${f} (${a.year})`:f}const i=o(t),d=t.known_for||[],c=d.length>0?d.map(a=>a.title||a.name).join(", "):"Actor/Actress",l=async a=>{console.log("ðŸŽ¬ Person action called with:",a,"for person:",t.title);const x=`${a}-${t.id}`;s(f=>new Set(f).add(x));try{switch(a){case"view-profile":window.open(`https://www.themoviedb.org/person/${t.id}`,"_blank");break;case"search-works":{const f=new CustomEvent("search:person-works",{detail:{personName:t.title,personId:t.id}});document.dispatchEvent(f);break}default:console.log(`${a} clicked for ${i}`)}}finally{setTimeout(()=>{s(f=>{const N=new Set(f);return N.delete(x),N})},300)}},m=(a,x,f=!1)=>{const N=`${a}-${t.id}`,y=n.has(N);return e.jsx("button",{onClick:()=>l(a),className:`px-2.5 py-1.5 rounded-lg text-xs transition-all duration-150 ease-out ${y?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"} cursor-pointer`,style:{backgroundColor:y?"var(--accent)":"var(--btn)",color:f?"white":"var(--text)",borderColor:"var(--line)",border:"1px solid"},disabled:y,children:x})};return e.jsxs("div",{className:"relative flex bg-card border border-line rounded-xl overflow-hidden shadow-lg hover:transform hover:-translate-y-0.5 transition-transform",children:[e.jsx("a",{href:`https://www.themoviedb.org/person/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-24 h-36 bg-muted cursor-pointer",title:"View profile on TMDB",children:r?e.jsx(Ae,{src:r,alt:i,context:"poster",className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-neutral-800 flex items-center justify-center text-sm text-muted-foreground",children:"No photo"})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col relative",children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:i}),e.jsxs("div",{className:"text-muted-foreground text-sm mb-2",children:["Known for: ",c]}),e.jsxs("div",{className:"text-accent text-sm mb-2",children:["Popularity: ",t.voteAverage?Math.round(t.voteAverage):"N/A"]}),e.jsx("div",{className:"mt-auto flex flex-wrap gap-2 justify-between items-center",children:e.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded-lg",style:{borderColor:"var(--line)",border:"1px dashed"},children:[m("view-profile","View Profile"),m("search-works","Search Works")]})})]})]})}function lt(){const t=W("watching"),r=D(),n=G();return e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",style:{color:"var(--text)"},children:r.currentlyWatching}),t.length>0?e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:t.map(s=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(bt,{item:s,context:"tab-watching",disableSwipe:!0,actions:{onWant:o=>_.move(o.id,o.mediaType,"wishlist"),onWatched:o=>_.move(o.id,o.mediaType,"watched"),onNotInterested:o=>_.move(o.id,o.mediaType,"not"),onDelete:o=>_.remove(o.id,o.mediaType)}})},`${s.mediaType}:${s.id}`))}):e.jsxs("div",{className:"text-sm text-neutral-400",children:[P("emptyWatching",n.personalityLevel)," ",r.addSomeFromSearchOrDiscovery]})]})}function Vs({item:t}){const{title:r,year:n,posterUrl:s,nextAirDate:o,mediaType:i,id:d,showStatus:c,lastAirDate:l}=t,m=D(),[a,x]=u.useState("S01E01");B(`ðŸ” UpNextCard ${r} received nextAirDate:`,o),B("ðŸŒ Current timezone:",Intl.DateTimeFormat().resolvedOptions().timeZone);const f=p=>{try{const w=new Date(p+"T00:00:00Z").toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"});return B(`ðŸ“… Formatting ${p} â†’ ${w} (UTC)`),w}catch{return p}};u.useEffect(()=>{i==="tv"&&(async()=>{try{const h=await Ws(Number(d));h&&x(`S${h.season.toString().padStart(2,"0")}E${h.episode.toString().padStart(2,"0")}`)}catch(h){B(`Failed to fetch episode info for ${r}:`,h)}})()},[d,r,i]);const N=yt(c),y=(N==null?void 0:N.isCompleted)||!1,g=()=>{if(y){if(c==="Ended")return"Series Complete";if(c==="Canceled")return"Series Cancelled"}if(o)return`Up Next: ${f(o)}`;if(c)switch(c){case"Returning Series":return"Returning Soon";case"In Production":return"In Production";case"Planned":return"Planned";default:return"Coming Soon"}return"Coming Soon"},j=()=>{if(y)return c==="Canceled"?"#dc2626":"var(--muted)";if(!o)switch(c){case"Returning Series":return"#16a34a";case"In Production":return"#ea580c";case"Planned":return"#7c3aed";default:return"var(--accent)"}return"var(--accent)"};return e.jsx("article",{className:"up-next-card group select-none",style:{width:"var(--poster-w, 160px)"},"data-testid":"up-next-card","aria-label":r,children:e.jsxs("div",{className:"relative border shadow-sm overflow-hidden",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",borderRadius:"var(--radius, 12px)"},children:[e.jsx("div",{className:"poster-wrap relative aspect-[2/3] cursor-pointer",role:"img","aria-label":r,style:{backgroundColor:"var(--muted)"},onClick:()=>{if(t.id&&t.mediaType){const p=`https://www.themoviedb.org/${t.mediaType}/${t.id}`;window.open(p,"_blank","noopener,noreferrer")}},children:s?e.jsx(Ae,{src:s,alt:r,context:"poster",className:"h-full w-full",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs",style:{color:"var(--muted)"},children:m.noPoster})}),e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("h3",{className:"font-bold text-sm mb-1 truncate",title:r,style:{color:"var(--text)"},children:r}),e.jsxs("div",{className:"text-xs mb-1",style:{color:"var(--muted)"},children:[n||"TBA"," â€¢ ",a]}),e.jsx("div",{className:"text-xs font-medium",style:{color:j()},children:g()}),y&&l&&e.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:["Last aired: ",es(l)]})]})]})})}function ct(){const t=W("watching"),r=D(),n=G(),[s,o]=u.useState(0);u.useEffect(()=>{const d=()=>{console.log("ðŸ”„ Library updated, forcing re-render of UpNextRail"),o(l=>l+1)},c=()=>{console.log("ðŸ”„ Force refresh triggered for UpNextRail"),o(l=>l+1)};return window.addEventListener("library:updated",d),window.addEventListener("force-refresh",c),()=>{window.removeEventListener("library:updated",d),window.removeEventListener("force-refresh",c)}},[]);const i=u.useMemo(()=>{const d=t.filter(a=>a.mediaType==="tv"),c=d.filter(a=>!!a.nextAirDate).sort((a,x)=>String(a.nextAirDate).localeCompare(String(x.nextAirDate))),l=d.filter(a=>{var x;return!a.nextAirDate&&!((x=yt(a.showStatus))!=null&&x.isCompleted)}).sort((a,x)=>{const f=N=>{switch(N){case"Returning Series":return 1;case"In Production":return 2;case"Planned":return 3;default:return 4}};return f(a.showStatus||"")-f(x.showStatus||"")}),m=[...c,...l].slice(0,12);return console.log("ðŸ” HomeUpNextRail items:",m.map(a=>({title:a.title,nextAirDate:a.nextAirDate,showStatus:a.showStatus,hasDate:!!a.nextAirDate}))),m},[t,s]);return e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",style:{color:"var(--text)"},children:r.upNext}),i.length>0?e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:i.map(d=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Vs,{item:d})},`${d.mediaType}:${d.id}:${d.nextAirDate}`))}):e.jsxs("div",{className:"text-sm text-neutral-400",children:[P("emptyUpNext",n.personalityLevel)," ",r.addTvShowsToWatchingList]})]})}function dt({onClick:t}){const[r,n]=u.useState(!1),{viewportOffset:s}=_e(),o=u.useMemo(()=>Math.max(0,s-50),[s]),i=()=>{n(!0),t(),setTimeout(()=>n(!1),200)};return console.log("ðŸ”§ SettingsFAB rendered"),e.jsx("button",{onClick:i,className:`fixed bottom-4 left-4 lg:bottom-8 lg:left-8 z-nav w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-150 ease-out ${r?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"}`,style:{backgroundColor:r?"var(--accent)":"var(--btn)",borderColor:"var(--line)",color:"var(--text)",...window.innerWidth<1024&&{bottom:`calc(${Le}px + ${o}px + 16px)`,left:"16px"}},"aria-label":"Open Settings",title:"Settings",disabled:r,children:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}function ut({theme:t,onToggle:r}){const[n,s]=u.useState(!1),{viewportOffset:o}=_e(),i=u.useMemo(()=>Math.max(0,o-50),[o]),d=()=>{s(!0),r(),setTimeout(()=>s(!1),200)};return console.log("ðŸŒ™ ThemeToggleFAB rendered"),e.jsx("button",{onClick:d,className:`fixed bottom-4 right-4 lg:bottom-8 lg:right-8 z-nav w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-150 ease-out ${n?"scale-95 active:shadow-inner":"hover:scale-105 hover:shadow-md"}`,style:{backgroundColor:n?"var(--accent)":"var(--btn)",borderColor:"var(--line)",color:"var(--text)",...window.innerWidth<1024&&{bottom:`calc(${Le}px + ${i}px + 16px)`,right:"16px"}},"aria-label":`Switch to ${t==="dark"?"light":"dark"} theme`,title:`Switch to ${t==="dark"?"light":"dark"} theme`,disabled:n,children:t==="dark"?e.jsx("svg",{className:"w-6 h-6",style:{color:"#fbbf24"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-6 h-6",style:{color:"#60a5fa"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}function Rt(t){const r=document.documentElement;t?(r.setAttribute("data-settings-sheet","true"),document.body.style.overflow="hidden"):(r.removeAttribute("data-settings-sheet"),document.body.style.overflow="")}function ie(t){if(t){const r=`#settings/${t}`;location.hash!==r&&history.replaceState(null,"",r)}Rt(!0),window.dispatchEvent(new CustomEvent("settings:open"))}function Hs(){Rt(!1),location.hash.startsWith("#settings/")&&history.replaceState(null,"",location.pathname+location.search),window.dispatchEvent(new Event("settings:close"))}typeof window<"u"&&(window.openSettingsSheet=ie,window.closeSettingsSheet=Hs);function zs({isOpen:t,onClose:r,show:n}){var g,j,p;if(console.log("ðŸ”” ShowNotificationSettingsModal render:",{isOpen:t,show:n==null?void 0:n.title}),!t)return console.log("ðŸ”” Modal not open, returning null"),null;const[s,o]=u.useState(V.getShowSettings(n.id)),[i,d]=u.useState(V.getSettings()),[c,l]=u.useState("default"),a=!!G().pro;u.useEffect(()=>{t&&(o(V.getShowSettings(n.id)),d(V.getSettings()),"Notification"in window&&l(Notification.permission))},[t,n.id]);const x=(h,w)=>{const S={...s,[h]:w};o(S),V.updateShowSettings(n.id,S)},f=(h,w)=>{const S={...s.methods,[h]:w},k={...s,methods:S};o(k),V.updateShowSettings(n.id,k)},N=async()=>{const h=await V.requestPushPermission();l(h?"granted":"denied")},y=async()=>{const h=prompt("Enter your email address to test notifications:");if(h)try{await V.sendTestNotification(h),alert("âœ… Test notification sent! Check your email.")}catch(w){console.error("Test notification failed:",w),alert("âŒ Test notification failed. Please try again.")}};return e.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:r}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",style:{backgroundColor:"var(--card)",color:"var(--text)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--line)"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ”” Notification Settings"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--muted)"},children:["Manage notifications for ",e.jsx("strong",{children:n.title})]})]}),e.jsx("button",{onClick:r,className:"text-2xl hover:opacity-70 transition-opacity",style:{color:"var(--muted)"},children:"Ã—"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Episode Notifications"}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:h=>x("enabled",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"Enable notifications for this show"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:["You will receive notifications for new episodes of ",n.title]})]})]})]}),a&&s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Custom Timing"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Hours before episode airs:"}),e.jsx("select",{value:s.timing||i.proTierTiming,onChange:h=>x("timing",parseInt(h.target.value)),className:"w-full p-2 border rounded",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)",color:"var(--text)"},children:Array.from({length:24},(h,w)=>w+1).map(h=>e.jsxs("option",{value:h,children:[h," hour",h!==1?"s":""," before"]},h))}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Override global timing for this show only"})]})]}),s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notification Methods"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Choose how you want to be notified for this show. These settings override your global preferences."}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((g=s.methods)==null?void 0:g.inApp)!==!1,onChange:h=>f("inApp",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"In-app notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Show notifications within the app"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((j=s.methods)==null?void 0:j.push)!==!1,onChange:h=>f("push",h.target.checked),disabled:c==="denied",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{children:"Push notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Browser notifications (works when app is closed)"}),c==="default"&&e.jsx("button",{onClick:N,className:"text-xs text-blue-500 hover:underline mt-1",children:"Grant permission"}),c==="denied"&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Permission denied. Enable in browser settings."})]})]}),e.jsxs("label",{className:`flex items-center space-x-3 ${a?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("input",{type:"checkbox",checked:((p=s.methods)==null?void 0:p.email)!==!1,onChange:h=>f("email",h.target.checked),disabled:!a,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{children:"Email notifications"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:a?"Receive notifications via email":"Pro feature - upgrade to enable email notifications"}),!a&&e.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded-full mt-1",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"})]})]})]}),s.enabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Test Notifications"}),e.jsx("button",{onClick:y,className:"w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“§ Send Test Email"}),e.jsx("p",{className:"text-xs",style:{color:"var(--muted)"},children:"Test the email notification system to make sure it's working properly"})]}),e.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)"},children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Global Notification Settings"}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--muted)"},children:"These settings apply to all shows unless overridden above."}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Global Notifications:"}),e.jsx("span",{style:{color:"var(--text)"},children:i.globalEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Default Timing:"}),e.jsx("span",{style:{color:"var(--text)"},children:a?`${i.proTierTiming} hours before`:i.freeTierTiming==="24-hours-before"?"24 hours before":"7 days before"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t",style:{borderColor:"var(--line)"},children:e.jsx("button",{onClick:r,className:"px-4 py-2 rounded border transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},children:"Done"})})]})]})}const R={tabs:{bloopers:"Bloopers",extras:"Extras"},buttons:{watchOnProvider:t=>`Watch on ${t}`,checkExtras:"Check Extras",learnMore:"Learn more",reportItem:"Report this item"},emptyStates:{bloopers:{title:"No bloopers available yet",description:"Official bloopers and outtakes for this title haven't been released yet.",cta:"Check Extras",secondaryCta:"Learn more"},extras:{title:"No extras available",description:"Additional content for this title isn't available yet.",cta:"Check back later"}},searchAssist:{title:"Bloopers from around the web",disclaimer:"Videos play on their host site. Availability may change.",providerPills:{youtube:"YouTube",vimeo:"Vimeo",official:"Official",archive:"Archive"}},tooltips:{bloopersDisabled:"Bloopers access requires Pro subscription",extrasDisabled:"Extras access requires Pro subscription",searchAssist:"Curated selection of verified bloopers from official channels"},help:{bloopersArticle:"/help/pro-bloopers-and-extras",learnMoreText:"Learn more about how Flicklet curates bloopers and outtakes"},analytics:{bloopersModalOpen:"bloopers_modal_open",bloopersPlayInApp:"bloopers_play_inapp",bloopersClickOut:"bloopers_click_out",bloopersEmpty:"bloopers_empty",helpOpen:"help_open"},quality:{verifiedChannel:"Verified channel",allowlistedChannel:"Official channel",nonEmbeddable:"Link-out only",highQuality:"High quality"},admin:{searchAssistPreview:"Search Assist Preview",approveItem:"Approve",holdItem:"Hold",reason:"Reason",candidates:"Candidate items"}},Ne=["Marvel Entertainment","DC Comics","Warner Bros. Pictures","Sony Pictures Entertainment","Universal Pictures","Paramount Pictures","20th Century Studios","Disney","Netflix","HBO","AMC Networks","FX Networks","Showtime","Starz","Apple TV","Amazon Prime Video"],ht=["bloopers","gag reel","outtakes","behind the scenes","making of","deleted scenes","blooper reel","funny moments","mistakes","goofs"],oe={MIN_VIEWS:1e3,MAX_DURATION_MINUTES:30,MIN_DURATION_SECONDS:30,MAX_RESULTS:5};class J{static async searchBloopers(r){const{showTitle:n,maxResults:s=oe.MAX_RESULTS}=r;try{const o=this.buildSearchQuery(n),i=await this.searchYouTube(o,s);return this.filterAndRankResults(i,n).slice(0,s)}catch(o){return console.warn("Bloopers search assist failed:",o),[]}}static buildSearchQuery(r){const n=ht.slice(0,3);return`${r} ${n.join(" OR ")}`}static async searchYouTube(r,n){return console.log(`[STUB] Searching YouTube for: "${r}"`),[{title:`${r} - Bloopers and Outtakes`,channel:"Official Channel",url:"https://youtube.com/watch?v=mock1",thumbUrl:"/placeholder-thumb.jpg",verified:!0,embeddable:!0,provider:"youtube",reason:"allowlisted",publishedAt:"2024-01-15T00:00:00Z",duration:"5:30",viewCount:5e4},{title:`${r} - Gag Reel Compilation`,channel:"Verified Creator",url:"https://youtube.com/watch?v=mock2",thumbUrl:"/placeholder-thumb.jpg",verified:!0,embeddable:!1,provider:"youtube",reason:"verified",publishedAt:"2024-01-10T00:00:00Z",duration:"8:15",viewCount:25e3}]}static filterAndRankResults(r,n){return r.filter(s=>this.passesQualityChecks(s,n)).sort((s,o)=>this.rankResult(s,o))}static passesQualityChecks(r,n){return!(!this.isTitleRelevant(r.title,n)||r.viewCount&&r.viewCount<oe.MIN_VIEWS||r.duration&&!this.isDurationValid(r.duration)||this.hasSpammyIndicators(r.title))}static isTitleRelevant(r,n){const s=r.toLowerCase(),d=n.toLowerCase().split(" ").filter(l=>l.length>2).some(l=>s.includes(l)),c=ht.some(l=>s.includes(l.toLowerCase()));return d&&c}static isDurationValid(r){const n=r.split(":").map(Number);let s=0;return n.length===2?s=n[0]*60+n[1]:n.length===3&&(s=n[0]*3600+n[1]*60+n[2]),s>=oe.MIN_DURATION_SECONDS&&s<=oe.MAX_DURATION_MINUTES*60}static hasSpammyIndicators(r){return[/compilation/i,/best of/i,/top 10/i,/reaction/i,/review/i,/explained/i,/theory/i,/fan edit/i,/ai generated/i,/clickbait/i].some(s=>s.test(r))}static rankResult(r,n){const s=Ne.some(c=>r.channel.toLowerCase().includes(c.toLowerCase())),o=Ne.some(c=>n.channel.toLowerCase().includes(c.toLowerCase()));if(s&&!o)return-1;if(!s&&o)return 1;if(r.verified&&!n.verified)return-1;if(!r.verified&&n.verified)return 1;if(r.embeddable&&!n.embeddable)return-1;if(!r.embeddable&&n.embeddable)return 1;const i=r.viewCount||0;return(n.viewCount||0)-i}static isAllowlistedChannel(r){return Ne.some(n=>r.toLowerCase().includes(n.toLowerCase()))}static getProviderDisplayName(r){return R.searchAssist.providerPills[r]||r}}const It=({video:t,onClose:r})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-75 pt-48",children:e.jsxs("div",{className:"relative w-full max-w-4xl mx-4 mt-24",children:[e.jsx("button",{onClick:r,className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10","aria-label":"Close video player",children:"Ã—"}),e.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:e.jsx("iframe",{src:t.embedUrl,title:t.title,className:"absolute top-0 left-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"mt-4 text-white",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-gray-300",children:t.channelName})]})]})}),qs=({isOpen:t,onClose:r,showId:n,showTitle:s})=>{console.log("ðŸŽ¬ BloopersModal render:",{isOpen:t,showId:n,showTitle:s});const[o,i]=u.useState([]),[d,c]=u.useState([]),[l,m]=u.useState(!1),[a,x]=u.useState(null),f=u.useRef(null),N=u.useRef(null),y=ce("EXTRAS_BLOOPERS_SEARCH_ASSIST");u.useEffect(()=>{t&&N.current&&N.current.focus()},[t]),u.useEffect(()=>{const h=w=>{if(t){if(w.key==="Escape")r();else if(w.key==="Tab"){const S=f.current;if(S){const k=S.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),T=k[0],A=k[k.length-1];w.shiftKey&&document.activeElement===T?(w.preventDefault(),A.focus()):!w.shiftKey&&document.activeElement===A&&(w.preventDefault(),T.focus())}}}};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t,r]),u.useEffect(()=>{t&&g()},[t,n]);const g=async()=>{m(!0);try{const{extrasProvider:h}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),w=await h.fetchBloopers(n,s);if(i(w.videos),w.videos.length>0)console.log("ðŸ“Š Analytics: bloopers_official_found",{showId:n,showTitle:s,count:w.videos.length});else if(y){const S=await J.searchBloopers({showTitle:s,showId:n});c(S),console.log("ðŸ“Š Analytics: bloopers_search_assist",{showId:n,showTitle:s,count:S.length})}else c([]),console.log("ðŸ“Š Analytics: bloopers_empty",{showId:n,showTitle:s,reason:"no_official_no_search_assist"});console.log("ðŸ“Š Analytics: bloopers_modal_open",{showId:n,showTitle:s,officialCount:w.videos.length,searchAssistCount:y?(await J.searchBloopers({showTitle:s,showId:n})).length:0})}catch(h){console.error("Failed to load bloopers:",h),i([]),c([])}finally{m(!1)}},j=h=>{if(h.embeddable){const w={id:`bloopers_${h.title.replace(/\s+/g,"_")}`,title:h.title,description:`Bloopers from ${h.channel}`,thumbnail:h.thumbUrl,duration:h.duration||"Unknown",publishedAt:h.publishedAt||new Date().toISOString(),provider:h.provider,channelName:h.channel,channelId:"unknown",embedUrl:h.url,watchUrl:h.url,canEmbed:h.embeddable,category:"bloopers",showId:n,showTitle:s,status:"approved",lastVerified:new Date().toISOString()};x(w),console.log("ðŸ“Š Analytics: bloopers_play_inapp",{showId:n,showTitle:s,title:h.title,provider:h.provider,reason:h.reason})}else window.open(h.url,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,title:h.title,provider:h.provider,reason:h.reason})},p=h=>{h.canEmbed?(x(h),console.log("ðŸ“Š Analytics: bloopers_play",{showId:n,showTitle:s,videoId:h.id,videoTitle:h.title,provider:h.provider,category:h.category})):(window.open(h.watchUrl,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,videoId:h.id,videoTitle:h.title,provider:h.provider,category:h.category,reason:"cannot_embed"}))};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pt-32",children:e.jsxs("div",{ref:f,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-7xl max-h-[75vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"bloopers-modal-title","aria-describedby":"bloopers-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{id:"bloopers-modal-title",className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s," - Bloopers"]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl","aria-label":"Close modal",children:"Ã—"})]}),e.jsx("div",{id:"bloopers-modal-description",className:"p-4 overflow-y-auto max-h-96",children:l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading bloopers..."})]}):o.length===0&&d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.bloopers.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.bloopers.description})]}),e.jsx("div",{className:"space-x-4",children:e.jsx("button",{onClick:()=>window.open(R.help.bloopersArticle,"_blank"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:R.emptyStates.bloopers.secondaryCta})})]}):e.jsxs("div",{className:"space-y-6",children:[o.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Official Bloopers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((h,w)=>e.jsxs("div",{ref:w===0?N:null,onClick:()=>p(h),onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),p(h))},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`Play ${h.title} from ${h.channelName}`,children:[e.jsx("img",{src:h.thumbnail,alt:`Thumbnail for ${h.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:h.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.channelName}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:new Date(h.publishedAt).toLocaleDateString()}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"Official"})]})]})]},h.id))})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:R.searchAssist.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((h,w)=>e.jsx(Dt,{result:h,onClick:()=>j(h)},`search_${w}`))}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 italic",children:R.searchAssist.disclaimer})]})]})})]})}),a&&e.jsx(It,{video:a,onClose:()=>x(null)})]}):null},Dt=M.forwardRef(({result:t,onClick:r},n)=>{const s=J.getProviderDisplayName(t.provider);return e.jsxs("div",{ref:n,onClick:r,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`${t.embeddable?"Play":"Watch"} ${t.title} on ${s}`,children:[e.jsx("img",{src:t.thumbUrl,alt:`Thumbnail for ${t.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.channel}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:s}),t.verified&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"âœ“ Verified"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:t.duration||"Unknown"})]}),t.reason&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:t.reason==="official"?"Official content":t.reason==="allowlisted"?"Official channel":t.reason==="verified"?"Verified channel":t.reason})]})]})});Dt.displayName="BloopersCard";const Ys=({isOpen:t,onClose:r,showId:n,showTitle:s})=>{console.log("ðŸŽ­ ExtrasModal render:",{isOpen:t,showId:n,showTitle:s});const[o,i]=u.useState("bloopers"),[d,c]=u.useState([]),[l,m]=u.useState([]),[a,x]=u.useState(!1),[f,N]=u.useState(null),y=u.useRef(null),g=u.useRef(null),j=ce("EXTRAS_BLOOPERS_SEARCH_ASSIST");u.useEffect(()=>{t&&g.current&&g.current.focus()},[t]),u.useEffect(()=>{const b=E=>{if(t){if(E.key==="Escape")r();else if(E.key==="Tab"){const C=y.current;if(C){const L=C.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),ee=L[0],K=L[L.length-1];E.shiftKey&&document.activeElement===ee?(E.preventDefault(),K.focus()):!E.shiftKey&&document.activeElement===K&&(E.preventDefault(),ee.focus())}}}};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[t,r]),u.useEffect(()=>{t&&p()},[t,n,o]);const p=async()=>{x(!0);try{o==="bloopers"?await h():await w()}finally{x(!1)}},h=async()=>{try{const{extrasProvider:b}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),E=await b.fetchBloopers(n,s);if(E.videos.length>0){const C=E.videos.map(L=>({title:L.title,channel:L.channelName,url:L.watchUrl,thumbUrl:L.thumbnail,verified:!0,embeddable:L.canEmbed,provider:L.provider,reason:"official",publishedAt:L.publishedAt,duration:L.duration}));m(C),console.log("ðŸ“Š Analytics: bloopers_official_found",{showId:n,showTitle:s,count:C.length})}else if(j){const C=await J.searchBloopers({showTitle:s,showId:n});m(C),console.log("ðŸ“Š Analytics: bloopers_search_assist",{showId:n,showTitle:s,count:C.length})}else m([]),console.log("ðŸ“Š Analytics: bloopers_empty",{showId:n,showTitle:s,reason:"no_official_no_search_assist"})}catch(b){console.error("Failed to load bloopers:",b),m([])}},w=async()=>{try{const{extrasProvider:b}=await U(()=>import("./extrasProvider-bcdf59df.js"),[]),E=await b.fetchExtras(n,s);c(E.videos),console.log("ðŸ“Š Analytics: extras_open",{showId:n,showTitle:s,videoCount:E.videos.length})}catch(b){console.error("Failed to load extras:",b);const E=[{id:"mock_extras_1",title:`${s} - Behind the Scenes`,description:"Making of featurette and cast interviews",thumbnail:"https://picsum.photos/320/180?random=3",duration:"8:15",publishedAt:"2023-03-10T00:00:00Z",provider:"youtube",channelName:"Official Channel",channelId:"mock_channel_1",embedUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",watchUrl:"https://youtube.com/watch?v=dQw4w9WgXcQ",canEmbed:!0,category:"extras",showId:n,showTitle:s,status:"approved",lastVerified:"2024-01-15T00:00:00Z"}];c(E),console.log("ðŸ“Š Analytics: extras_fallback",{showId:n,showTitle:s,videoCount:E.length,error:b instanceof Error?b.message:"Unknown error"})}},S=b=>{if(b.embeddable){const E={id:`bloopers_${b.title.replace(/\s+/g,"_")}`,title:b.title,description:`Bloopers from ${b.channel}`,thumbnail:b.thumbUrl,duration:b.duration||"Unknown",publishedAt:b.publishedAt||new Date().toISOString(),provider:b.provider,channelName:b.channel,channelId:"unknown",embedUrl:b.url,watchUrl:b.url,canEmbed:b.embeddable,category:"bloopers",showId:n,showTitle:s,status:"approved",lastVerified:new Date().toISOString()};N(E),console.log("ðŸ“Š Analytics: bloopers_play_inapp",{showId:n,showTitle:s,title:b.title,provider:b.provider,reason:b.reason})}else window.open(b.url,"_blank"),console.log("ðŸ“Š Analytics: bloopers_click_out",{showId:n,showTitle:s,title:b.title,provider:b.provider,reason:b.reason})},k=b=>{b.canEmbed?(N(b),console.log("ðŸ“Š Analytics: extras_play",{showId:n,showTitle:s,videoId:b.id,videoTitle:b.title,provider:b.provider,category:b.category})):(window.open(b.watchUrl,"_blank"),console.log("ðŸ“Š Analytics: extras_click_out",{showId:n,showTitle:s,videoId:b.id,videoTitle:b.title,provider:b.provider,category:b.category,reason:"cannot_embed"}))},T=()=>l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.bloopers.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.bloopers.description})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsx("button",{onClick:()=>i("extras"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:R.emptyStates.bloopers.cta}),e.jsx("button",{onClick:()=>window.open(R.help.bloopersArticle,"_blank"),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:R.emptyStates.bloopers.secondaryCta})]})]}):e.jsxs("div",{className:"space-y-6",children:[l.some(b=>b.reason==="official")&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Official Bloopers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.filter(b=>b.reason==="official").map((b,E)=>e.jsx(Ce,{result:b,onClick:()=>S(b),ref:E===0?g:null},`official_${E}`))})]}),l.some(b=>b.reason!=="official")&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:R.searchAssist.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.filter(b=>b.reason!=="official").map((b,E)=>e.jsx(Ce,{result:b,onClick:()=>S(b)},`search_${E}`))}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 italic",children:R.searchAssist.disclaimer})]})]}),A=()=>d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:R.emptyStates.extras.title}),e.jsx("p",{className:"text-sm",children:R.emptyStates.extras.description})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((b,E)=>e.jsxs("div",{ref:E===0?g:null,onClick:()=>k(b),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),k(b))},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`Play ${b.title} from ${b.channelName}`,children:[e.jsx("img",{src:b.thumbnail,alt:`Thumbnail for ${b.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:b.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:b.channelName}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:new Date(b.publishedAt).toLocaleDateString()}),e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:b.provider})]})]})]},b.id))});return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pt-32",children:e.jsxs("div",{ref:y,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-7xl max-h-[75vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"extras-modal-title","aria-describedby":"extras-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{id:"extras-modal-title",className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s," - Behind the Scenes"]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl","aria-label":"Close modal",children:"Ã—"})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex space-x-8 px-4","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>i("bloopers"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="bloopers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:R.tabs.bloopers}),e.jsx("button",{onClick:()=>i("extras"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="extras"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:R.tabs.extras})]})}),e.jsx("div",{id:"extras-modal-description",className:"p-4 overflow-y-auto max-h-96",children:a?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:["Loading ",o==="bloopers"?"bloopers":"extras","..."]})]}):o==="bloopers"?T():A()})]})}),f&&e.jsx(It,{video:f,onClose:()=>N(null)})]}):null},Ce=M.forwardRef(({result:t,onClick:r},n)=>{const s=J.getProviderDisplayName(t.provider);return e.jsxs("div",{ref:n,onClick:r,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())},className:"cursor-pointer bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"button","aria-label":`${t.embeddable?"Play":"Watch"} ${t.title} on ${s}`,children:[e.jsx("img",{src:t.thumbUrl,alt:`Thumbnail for ${t.title}`,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.channel}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:s}),t.verified&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"âœ“ Verified"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:t.duration||"Unknown"})]}),t.reason&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:t.reason==="official"?"Official content":t.reason==="allowlisted"?"Official channel":t.reason==="verified"?"Verified channel":t.reason})]})]})});Ce.displayName="BloopersCard";const mt=({isOpen:t,onClose:r})=>{var l,m;const n=u.useRef(null),s=u.useRef(null),[o,i]=M.useState("getting-started");if(u.useEffect(()=>{t&&s.current&&s.current.focus()},[t]),u.useEffect(()=>{const a=x=>{t&&x.key==="Escape"&&r()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,r]),u.useEffect(()=>{var y;if(!t)return;const a=(y=n.current)==null?void 0:y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),x=a[0],f=a[a.length-1],N=g=>{g.key==="Tab"&&(g.shiftKey?document.activeElement===x&&(f==null||f.focus(),g.preventDefault()):document.activeElement===f&&(x==null||x.focus(),g.preventDefault()))};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[t]),!t)return null;const d=[{id:"getting-started",title:"Getting Started",icon:"ðŸš€"},{id:"managing-library",title:"Managing Your Library",icon:"ðŸ“š"},{id:"pro-features",title:"Pro Features",icon:"â­"},{id:"search-discovery",title:"Search & Discovery",icon:"ðŸ”"},{id:"notifications",title:"Notifications",icon:"ðŸ””"},{id:"settings-customization",title:"Settings & Customization",icon:"âš™ï¸"},{id:"troubleshooting",title:"Troubleshooting",icon:"ðŸ”§"},{id:"keyboard-shortcuts",title:"Keyboard Shortcuts",icon:"âŒ¨ï¸"}],c=()=>{switch(o){case"getting-started":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Welcome to Flicklet!"})," Your personal TV and movie tracker."]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Home:"})," Your dashboard with personalized content recommendations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Currently Watching:"})," Track shows you're actively watching"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Want to Watch:"})," Build your wishlist of shows and movies"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Watched:"})," Keep track of completed shows and movies"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Discovery:"})," Find new content based on genres and preferences"]})]})]});case"managing-library":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Adding Content:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Use the search function to find shows and movies"}),e.jsx("li",{children:'Click the "+" button on any card to add to your lists'}),e.jsx("li",{children:"Drag and drop cards between lists for quick organization"}),e.jsx("li",{children:`Use the "Not Interested" button to hide content you don't want to see`})]}),e.jsx("p",{children:e.jsx("strong",{children:"Organizing Lists:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Create custom lists for specific themes or genres"}),e.jsx("li",{children:"Add personal notes and tags to any item"}),e.jsx("li",{children:"Rate shows and movies with our 5-star system"}),e.jsx("li",{children:"Track episode progress for ongoing shows"})]})]});case"pro-features":return e.jsxs("div",{className:"space-y-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Enhanced Experience:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Bloopers & Behind-the-Scenes:"})," Access exclusive content on show cards"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Advanced Notifications:"})," Customize when and how you're notified about new episodes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Theme Packs:"})," Holiday and movie-themed visual experiences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Social Features:"})," FlickWord games and trivia challenges"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Episode Tracking:"})," Detailed progress tracking for ongoing series"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸŽ¬"}),"Bloopers & Outtakes (Pro)"]}),e.jsxs("div",{className:"space-y-4 text-blue-800 dark:text-blue-200",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What it is"}),e.jsx("p",{className:"text-sm",children:"Flicklet surfaces behind-the-scenes bloopers, outtakes, and gag reels for supported titles."})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"How it works"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"When official bloopers/outtakes are released by the rights holder and permitted for embedding, Flicklet displays them in-app using the provider's official player."}),e.jsx("li",{children:"If no official bloopers are available, Flicklet curates a short list of off-site videos that meet strict criteria. These open in a new tab and play on the hosting provider's site."})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Curation criteria (when official assets are unavailable)"}),e.jsx("p",{className:"text-sm mb-2",children:"We only surface links that pass all of the following checks:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Source authenticity:"})," posted by an official studio/network/distributor channel, verified creator, or a source with clear permission to publish."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Provider policy compliance:"})," embeddable where permitted; otherwise link-out only. We never rehost, modify, or strip provider branding."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Content relevance:"})," the video is clearly a blooper/outtake/gag reel for the selected title (not general clips, fan edits, or unrelated compilations)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Quality bar:"})," acceptable resolution and audio; no camrips or low-effort reposts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stability:"})," not obviously subject to immediate takedown; periodically re-verified."]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What you'll see"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Bloopers tab:"}),` plays official clips in-app when allowed. If not, you'll see a small set of vetted "Watch on [Provider]" links.`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Extras tab:"})," trailers, featurettes, interviews, and other official bonus materials when available."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"No-clip state:"})," if nothing qualifies, the tab explains that no approved bloopers are available yet."]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"What we won't do"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"No paywalled streamer embeds (e.g., subscription services)."}),e.jsx("li",{children:"No scraping, downloading, or re-uploading third-party content."}),e.jsx("li",{children:"No embedding of videos where the provider or uploader has disabled embedding."})]})]}),e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-800/30 border border-blue-300 dark:border-blue-700 rounded p-3",children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Legal notice"}),e.jsx("p",{className:"text-sm",children:"Flicklet indexes metadata and links to third-party content hosted by their respective providers. Availability, quality, and playback are controlled by those providers and may change or be removed at any time."})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Why this benefits you"}),e.jsx("p",{className:"text-sm",children:"You get the best available bloopers and outtakes without dealing with broken uploads, shady sources, or copyright headaches. When official clips exist, they're featured first. When they don't, you still get a high-quality, trustworthy path to watch them elsewhere and hop right back to Flicklet."})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:[e.jsx("strong",{children:"Note:"}),' Pro features are marked with a golden "PRO" badge and may require upgrading your account.']})})]});case"search-discovery":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Finding Content:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Search by title, actor, director, or genre"}),e.jsx("li",{children:"Filter results by type (TV shows, movies, people)"}),e.jsx("li",{children:"Browse by genre in the Discovery section"}),e.jsx("li",{children:"Get personalized recommendations on the Home page"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Smart Recommendations:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Based on your watching history and preferences"}),e.jsx("li",{children:"Updates automatically as you add more content"}),e.jsx("li",{children:"Considers your ratings and viewing patterns"})]})]});case"notifications":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Stay Updated:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Episode Alerts:"})," Get notified when new episodes air"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weekly Discover:"})," Receive curated recommendations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Monthly Stats:"})," See your viewing statistics and trends"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Custom Timing:"})," Set how far in advance you want to be notified"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"Managing Notifications:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Enable/disable notifications in Settings"}),e.jsx("li",{children:"Set custom notification times for each show"}),e.jsx("li",{children:"Choose which lists trigger notifications"})]})]});case"settings-customization":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Personalization:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Choose between light and dark themes"}),e.jsx("li",{children:"Set your display name and personality level"}),e.jsx("li",{children:"Customize your home page layout"}),e.jsx("li",{children:"Select your preferred genres for recommendations"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Data Management:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Your data syncs across devices when signed in"}),e.jsx("li",{children:"Export your library for backup purposes"}),e.jsx("li",{children:"Import data from other tracking services"})]})]});case"troubleshooting":return e.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{children:e.jsx("strong",{children:"Common Issues:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Content not loading:"})," Check your internet connection and try refreshing"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Search not working:"})," Try different keywords or check your spelling"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Notifications not appearing:"})," Check your browser's notification permissions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Data not syncing:"})," Ensure you're signed in and have a stable connection"]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[e.jsx("strong",{children:"Need more help?"})," Use the feedback form in Settings to report issues or suggest improvements."]})})]});case"keyboard-shortcuts":return e.jsx("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Navigation:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Esc"})," Close modals"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Tab"})," Navigate between elements"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Enter"})," Activate buttons/links"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Search:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"/"})," Focus search bar"]}),e.jsxs("li",{children:[e.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Esc"})," Clear search"]})]})]})]})});default:return null}};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-overlay bg-black bg-opacity-50",onClick:r,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-modal flex items-center justify-center p-4",children:e.jsxs("div",{ref:n,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title","aria-describedby":"help-modal-description",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{id:"help-modal-title",className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Help & Support"}),e.jsx("button",{ref:s,onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl font-bold p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close help modal",children:"Ã—"})]}),e.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[e.jsx("div",{className:"w-64 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:e.jsx("nav",{className:"p-4 space-y-2",children:d.map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${o===a.id?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[e.jsx("span",{className:"mr-2",children:a.icon}),a.title]},a.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:(l=d.find(a=>a.id===o))==null?void 0:l.icon}),(m=d.find(a=>a.id===o))==null?void 0:m.title]})}),e.jsx("div",{id:"help-modal-description",children:c()})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Flicklet v2 â€¢ Last updated: ",new Date().toLocaleDateString()]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Got it!"})]})]})})]}):null};function Gs({onRefresh:t,threshold:r=80,maxPullDistance:n=120,resistance:s=.5,enabled:o=!0}){const[i,d]=u.useState({isPulling:!1,isRefreshing:!1,pullDistance:0,canRefresh:!1}),c=u.useRef(0),l=u.useRef(0),m=u.useRef(!1),a=u.useRef(null),x=u.useCallback(p=>{if(p<=0)return 0;const h=Math.max(.1,1-p/n);return Math.min(p*h,n)},[n,s]),f=u.useCallback(p=>{if(!o||i.isRefreshing)return;const h=a.current;if(!h||h.scrollTop>0)return;const w=p.touches[0];c.current=w.clientY,l.current=w.clientY,m.current=!1},[o,i.isRefreshing]),N=u.useCallback(p=>{if(!o||i.isRefreshing)return;const h=a.current;if(!h||h.scrollTop>0)return;const w=p.touches[0];l.current=w.clientY;const S=l.current-c.current;if(!m.current&&S>10&&(m.current=!0),m.current&&S>0){const k=x(S),T=k>=r;d(A=>({...A,isPulling:!0,pullDistance:k,canRefresh:T})),p.preventDefault()}},[o,i.isRefreshing,r,x]),y=u.useCallback(async()=>{if(!(!o||!i.isPulling)){if(i.canRefresh&&!i.isRefreshing){d(p=>({...p,isRefreshing:!0,isPulling:!1}));try{await t()}catch(p){console.error("Pull-to-refresh error:",p)}finally{d(p=>({...p,isRefreshing:!1,pullDistance:0,canRefresh:!1}))}}else d(p=>({...p,isPulling:!1,pullDistance:0,canRefresh:!1}));m.current=!1}},[o,i.isPulling,i.canRefresh,i.isRefreshing,t]);u.useEffect(()=>{const p=a.current;if(p)return p.addEventListener("touchstart",f,{passive:!1}),p.addEventListener("touchmove",N,{passive:!1}),p.addEventListener("touchend",y,{passive:!0}),()=>{p.removeEventListener("touchstart",f),p.removeEventListener("touchmove",N),p.removeEventListener("touchend",y)}},[f,N,y]);const g=()=>{const p=Math.min(i.pullDistance/r,1),h=i.isPulling?Math.min(p,1):0,w=i.isRefreshing?1:Math.min(p,1);return{transform:`translateY(${i.pullDistance}px) scale(${w})`,opacity:h,transition:i.isRefreshing?"all 0.3s ease-out":"opacity 0.2s ease-out"}},j=()=>({transform:i.isPulling?`translateY(${i.pullDistance}px)`:"translateY(0)",transition:i.isRefreshing?"transform 0.3s ease-out":"none"});return{state:i,containerRef:a,refreshIndicatorStyles:g(),containerStyles:j(),isEnabled:o}}function Ks({state:t,styles:r,className:n=""}){const{isPulling:s,isRefreshing:o,canRefresh:i}=t;return!s&&!o?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-center py-4 ${n}`,style:{...r,backgroundColor:"var(--background)",borderBottom:"1px solid var(--line)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:o?e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:`w-6 h-6 transition-transform duration-200 ${i?"rotate-180":""}`,children:e.jsx("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--primary)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),e.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text)"},children:o?"Refreshing...":i?"Release to refresh":"Pull to refresh"})]})})}function xt({children:t,className:r="",indicatorClassName:n="",compact:s=!1,...o}){const{state:i,containerRef:d,refreshIndicatorStyles:c,containerStyles:l,isEnabled:m}=Gs(o);return m?e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{state:i,styles:c,className:n}),e.jsx("div",{ref:d,className:`relative ${r}`,style:l,children:t})]}):e.jsx(e.Fragment,{children:t})}function Qs(){const[t,r]=u.useState(()=>{try{const n=localStorage.getItem("flicklet:forYouRows");if(n)return JSON.parse(n)}catch(n){console.error("Failed to load For You rows:",n)}return[{id:"1",mainGenre:"anime",subGenre:"action",title:"Anime/Action"},{id:"2",mainGenre:"horror",subGenre:"psychological",title:"Horror/Psychological"},{id:"3",mainGenre:"comedy",subGenre:"romantic",title:"Comedy/Romantic"}]});return u.useEffect(()=>{const n=s=>{r(s.detail)};return window.addEventListener("forYouRows:updated",n),()=>window.removeEventListener("forYouRows:updated",n)},[]),t}function Xs(t,r){return Ee({queryKey:["tmdb","genre",t,r],queryFn:()=>(console.log(`ðŸŽ¬ useGenreContent: Fetching ${t}/${r}`),zt(t,r)),staleTime:3e5,enabled:!!(t&&r),retry:(n,s)=>(console.error(`TMDB ${t}/${r} error:`,s),n<2)})}function Zs(t){console.log("ðŸŽ¬ useForYouContent: Processing rows:",t);const[r,n]=u.useState(0);return u.useEffect(()=>{const o=_.subscribe(()=>{console.log("ðŸ”„ Library changed, updating For You filtering"),n(i=>i+1)});return()=>{o()}},[]),t.map(o=>Xs(o.mainGenre,o.subGenre)).map((o,i)=>{var l,m,a,x,f,N;const d=((l=o.data)==null?void 0:l.filter(y=>{const g=_.has(y.id,y.kind);return g&&console.log(`ðŸš« Filtering out ${y.title} (already in library)`),!g}))||[],c={...o,data:d,rowId:(m=t[i])==null?void 0:m.id,title:((a=t[i])==null?void 0:a.title)||`${(x=t[i])==null?void 0:x.mainGenre}/${(f=t[i])==null?void 0:f.subGenre}`};return console.log(`ðŸŽ¬ useForYouContent: Row ${i} (${c.title}):`,{isLoading:o.isLoading,isError:o.isError,originalDataLength:((N=o.data)==null?void 0:N.length)||0,filteredDataLength:d.length,libraryVersion:r,error:o.error}),c})}function Js(){const[t,r]=u.useState({isSupported:"serviceWorker"in navigator,isRegistered:!1,isOnline:navigator.onLine,registration:null,error:null}),n=u.useCallback(async()=>{if(!t.isSupported){r(c=>({...c,error:"Service Worker not supported"}));return}try{console.log("[SW] Registering service worker...");const c=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("[SW] Service worker registered:",c),r(l=>({...l,isRegistered:!0,registration:c,error:null})),c.addEventListener("updatefound",()=>{console.log("[SW] Update found, installing...");const l=c.installing;l&&l.addEventListener("statechange",()=>{l.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New version available, reloading..."),window.location.reload())})})}catch(c){console.error("[SW] Registration failed:",c),r(l=>({...l,error:c instanceof Error?c.message:"Registration failed"}))}},[t.isSupported]),s=u.useCallback(async()=>{if(t.registration)try{await t.registration.unregister(),console.log("[SW] Service worker unregistered"),r(c=>({...c,isRegistered:!1,registration:null}))}catch(c){console.error("[SW] Unregistration failed:",c),r(l=>({...l,error:c instanceof Error?c.message:"Unregistration failed"}))}},[t.registration]),o=u.useCallback(async c=>{var l;if((l=t.registration)!=null&&l.active)try{t.registration.active.postMessage({type:"CACHE_IMAGES",data:{urls:c}}),console.log("[SW] Pre-caching images:",c.length)}catch(m){console.error("[SW] Pre-cache failed:",m)}},[t.registration]),i=u.useCallback(async()=>{var c;if((c=t.registration)!=null&&c.active)try{t.registration.active.postMessage({type:"CLEAR_CACHE"}),console.log("[SW] Cache cleared")}catch(l){console.error("[SW] Clear cache failed:",l)}},[t.registration]),d=u.useCallback(async()=>{var c;return(c=t.registration)!=null&&c.active?new Promise(l=>{const m=new MessageChannel;m.port1.onmessage=a=>{l(a.data.size)},t.registration.active.postMessage({type:"GET_CACHE_SIZE"},[m.port2])}):0},[t.registration]);return u.useEffect(()=>{const c=()=>{r(m=>({...m,isOnline:!0})),console.log("[SW] Back online")},l=()=>{r(m=>({...m,isOnline:!1})),console.log("[SW] Gone offline")};return window.addEventListener("online",c),window.addEventListener("offline",l),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",l)}},[]),u.useEffect(()=>{t.isSupported&&!t.isRegistered&&!t.error&&n()},[t.isSupported,t.isRegistered,t.error,n]),{...t,register:n,unregister:s,preCacheImages:o,clearCache:i,getCacheSize:d}}let $=null;function er(t){$=t}async function ae(t,r){try{const n=r==="movie"?`/movie/${t}`:`/tv/${t}`,s=await qt(n),o=s.title||s.name||"Untitled",i=r==="movie"?s.release_date:s.first_air_date,d=i?String(i).slice(0,4):void 0;return{title:o,year:d,showStatus:r==="tv"?s.status:void 0,lastAirDate:r==="tv"?s.last_air_date:void 0}}catch(n){return console.warn(`Failed to fetch media data for ${r}:${t}:`,n),{title:"Untitled"}}}function tr(){const t=X("card:want",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"wishlist");const m=q.getSettings(),a=P("itemAdded",m.personalityLevel);$==null||$(a,"success")}),r=X("card:watched",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"watched");const m=q.getSettings(),a=P("itemAdded",m.personalityLevel);$==null||$(a,"success")}),n=X("card:notInterested",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);_.upsert({id:i,mediaType:d,title:l.title,year:l.year,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"not");const m=q.getSettings(),a=P("itemRemoved",m.personalityLevel);$==null||$(a,"success")}),s=X("card:holidayAdd",()=>{}),o=X("card:startWatching",async({id:i,mediaType:d,title:c})=>{const l=c?{title:c}:await ae(String(i),d);let m=null;d==="tv"&&(m=await _t(Number(i))),_.upsert({id:i,mediaType:d,title:l.title,year:l.year,nextAirDate:m,showStatus:l.showStatus,lastAirDate:l.lastAirDate},"watching");const a=q.getSettings(),x=P("itemAdded",a.personalityLevel);$==null||$(x,"success")});return()=>{t(),r(),n(),s(),o()}}function sr(){return Ee({queryKey:["tmdb","in-theaters"],queryFn:Yt,staleTime:6e4,retry:(t,r)=>(console.error("TMDB In Theaters error:",r),t<3)})}class rr extends u.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){Gt("PersonalityErrorBoundary caught an error:",r,n)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const r=q.getSettings(),n=P("errorGeneric",r.personalityLevel);return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:n}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Try Again"})]})}return this.props.children}}console.log("ðŸ”„ backfillShowStatus module loaded");async function nr(){var l,m,a;console.log("ðŸ”„ Starting show status backfill...");const t=_.getByList("watching"),r=_.getByList("wishlist"),n=_.getByList("watched"),s=_.getByList("not");console.log("ðŸ“Š Library contents:",{watching:t.length,wishlist:r.length,watched:n.length,not:s.length});const o=t.concat(r).concat(n).concat(s),i=o.filter(x=>x.mediaType==="tv");console.log("ðŸ“º All TV shows in library:",i.map(x=>({title:x.title,showStatus:x.showStatus,hasShowStatus:x.showStatus!==void 0,lastAirDate:x.lastAirDate,id:x.id,mediaType:x.mediaType})));const d=i.slice(0,3);console.log("ðŸ” First 3 TV shows detailed:",d),console.log("ðŸ” First show showStatus:",(l=d[0])==null?void 0:l.showStatus),console.log("ðŸ” First show showStatus type:",typeof((m=d[0])==null?void 0:m.showStatus)),console.log("ðŸ” First show showStatus === undefined:",((a=d[0])==null?void 0:a.showStatus)===void 0);const c=o.filter(x=>x.mediaType==="tv"&&(!x.showStatus||x.showStatus===void 0));console.log(`ðŸ“º Found ${c.length} TV shows without show status`);for(const x of c)try{console.log(`ðŸ” Fetching status for: ${x.title}`);const f=await Mt(Number(x.id));f?(_.upsert({...x,showStatus:f.status,lastAirDate:f.lastAirDate||void 0},x.list),console.log(`âœ… Updated ${x.title}: ${f.status}`)):console.log(`âŒ No status data for ${x.title}`),await new Promise(N=>setTimeout(N,100))}catch(f){console.error(`âŒ Error fetching status for ${x.title}:`,f)}console.log("âœ… Show status backfill completed")}const ft=u.lazy(()=>U(()=>import("./settings-b3931a55.js").then(t=>t.S),["assets/settings-b3931a55.js","assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),gt=u.lazy(()=>U(()=>import("./modals-5fe29d8c.js").then(t=>t.D),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),or=u.lazy(()=>U(()=>import("./games-23f18348.js").then(t=>t.e),["assets/games-23f18348.js","assets/react-vendor-b1791c80.js"])),ke=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.L),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),ar=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.h),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"])),ir=u.lazy(()=>U(()=>import("./pages-3e9569ff.js").then(t=>t.D),["assets/pages-3e9569ff.js","assets/react-vendor-b1791c80.js","assets/games-23f18348.js","assets/modals-5fe29d8c.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]));function lr(){var ze,qe;const[t,r]=u.useState("home"),n=typeof window<"u"&&window.location.pathname==="/",s=G(),[o,i]=u.useState(!1),d=D(),{viewportOffset:c}=_e(),[l,m]=u.useState(null),[a,x]=u.useState(!1),[f,N]=u.useState(!1),[y,g]=u.useState(null),[j,p]=u.useState(!1),[h,w]=u.useState(null),[S,k]=u.useState(!1),[T,A]=u.useState(null),[b,E]=u.useState(!1),[C,L]=u.useState(!1);u.useEffect(()=>{console.log("ðŸ”” Modal state changed:",{showNotificationModal:j,notificationModalItem:y==null?void 0:y.title})},[j,y]),u.useEffect(()=>{console.log("ðŸŽ¬ Bloopers modal state changed:",{showBloopersModal:S,hasBloopersModalItem:!!h,bloopersModalItemTitle:h==null?void 0:h.title})},[S,h]),u.useEffect(()=>{console.log("ðŸŽ­ Extras modal state changed:",{showExtrasModal:b,hasExtrasModalItem:!!T,extrasModalItemTitle:T==null?void 0:T.title})},[b,T]);const{toasts:ee,addToast:K,removeToast:$t}=Et(),{loading:Re,authInitialized:ue,isAuthenticated:Ie}=de(),[Ft,De]=u.useState(!1);u.useEffect(()=>{if(!Re&&ue&&!Ie){const v=setTimeout(()=>{De(!0)},1e3);return()=>clearTimeout(v)}},[Re,ue,Ie]);const{isOnline:Bt}=Js(),Pe=async()=>{console.log("ðŸ”„ Pull-to-refresh triggered"),window.dispatchEvent(new CustomEvent("force-refresh")),await new Promise(v=>setTimeout(v,1e3))},[F,$e]=u.useState({q:"",genre:null,type:"all",nonce:0}),Q=!!F.q.trim(),Fe=(v,I,O)=>{const be=v.trim();$e(ye=>({q:be,genre:I,type:O,nonce:ye.nonce+1}))},te=()=>$e({q:"",genre:null,type:"all",nonce:0}),Wt=Qs(),Be=Zs(Wt),We=W("watching"),Ot=W("wishlist"),Ut=W("watched"),Vt=sr(),Oe=()=>{const v=Ye(),I=ce("settings_mobile_sheet_v1");v&&I?ie():i(!0)};u.useEffect(()=>{er(K);const v=tr(),I=setTimeout(()=>{console.log("ðŸ”„ App.tsx triggering show status backfill..."),nr()},3e3);return()=>{v(),clearTimeout(I)}},[K]),u.useEffect(()=>{const v=()=>{const I=window.location.hash;if(I.startsWith("#settings/")){const O=I.replace("#settings/","").toLowerCase(),be=Ye(),ye=ce("settings_mobile_sheet_v1");be&&ye&&(["account","display","advanced"].includes(O)?ie(O):ie())}else I==="#games/flickword"&&N(!0)};return v(),window.addEventListener("hashchange",v),()=>window.removeEventListener("hashchange",v)},[]),u.useEffect(()=>(window.openFlickWordModal=()=>{N(!0)},window.closeFlickWordModal=()=>{N(!1)},()=>{delete window.openFlickWordModal,delete window.closeFlickWordModal}),[]);function Ue(v){switch(v){case"currently-watching":return We;case"up-next":return[];case"in-theaters":return Vt.data??[];default:return}}const he=v=>{m(v),x(!0)},me=v=>{m(v),x(!0)},xe=v=>{console.log("ðŸ”” App.tsx handleNotificationToggle called for:",v.title,v.mediaType),console.log("ðŸ”” Setting notification modal state:",{showNotificationModal:!0,notificationModalItem:v}),g(v),p(!0),console.log("ðŸ”” Modal state should now be set")},fe=v=>{console.log("â° App.tsx handleSimpleReminder called for:",v.title,v.mediaType),alert(`â° Simple reminder set for "${v.title}" - you'll be notified 24 hours before the next episode airs!`)},ge=v=>{console.log("ðŸŽ¬ App.tsx handleBloopersOpen called for:",v.title,v.mediaType),console.log("ðŸŽ¬ Setting bloopers modal state:",{showBloopersModal:!0,bloopersModalItem:v}),le.flushSync(()=>{w(v),k(!0)}),console.log("ðŸŽ¬ Bloopers modal state should now be set")},pe=v=>{console.log("ðŸŽ­ App.tsx handleExtrasOpen called for:",v.title,v.mediaType),console.log("ðŸŽ­ Setting extras modal state:",{showExtrasModal:!0,extrasModalItem:v}),le.flushSync(()=>{A(v),E(!0)}),console.log("ðŸŽ­ Extras modal state should now be set")},Ve=()=>{console.log("â“ App.tsx handleHelpOpen called"),console.log("â“ Current showHelpModal state:",C),L(!0),console.log("â“ setShowHelpModal(true) called")},He=(v,I,O)=>{_.updateNotesAndTags(v.id,v.mediaType,I,O),x(!1),m(null)};return t!=="home"?e.jsxs("main",{className:"min-h-screen",style:{backgroundColor:"var(--bg)",color:"var(--text)",minHeight:"100lvh"},children:[b&&e.jsxs("div",{style:{position:"fixed",top:"10px",left:"10px",background:"red",color:"white",padding:"10px",zIndex:9999,fontSize:"12px"},children:["ðŸŽ¬ MODAL SHOULD BE VISIBLE: ",T==null?void 0:T.title]}),e.jsx(et,{appName:"Flicklet",showMarquee:!1,onSearch:(v,I,O)=>Fe(v,I??null,O??"all"),onClear:te,onHelpOpen:()=>{console.log("â“ App.tsx onHelpOpen prop called"),Ve()}}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Qe,{current:t,onChange:r})}),e.jsx("div",{className:"block lg:hidden",children:e.jsx(Xe,{current:t,onChange:r})}),e.jsx("div",{className:"pb-20 lg:pb-0",style:{paddingBottom:c>0&&((ze=window.visualViewport)==null?void 0:ze.offsetTop)===0?`${80+c}px`:void 0},children:Q?e.jsx(it,{query:F.q,genre:F.genre,searchType:F.type,nonce:F.nonce}):e.jsxs(e.Fragment,{children:[t==="home"&&e.jsx("div",{className:"min-h-screen","data-page":"home",children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",style:{color:"var(--text)"},children:"Welcome to Flicklet"}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(lt,{}),e.jsx(ct,{}),Be.map((v,I)=>e.jsx(je,{id:v.rowId,...v},I)),e.jsx(Ge,{}),e.jsx(st,{}),e.jsx(rt,{})]})]})}),t==="watching"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading watching list..."}),children:e.jsx("div",{"data-page":"lists","data-list":"watching",children:e.jsx(ke,{title:"Currently Watching",items:We,mode:"watching",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="want"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading wishlist..."}),children:e.jsx("div",{"data-page":"lists","data-list":"wishlist",children:e.jsx(ke,{title:"Want to Watch",items:Ot,mode:"want",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="watched"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading watched list..."}),children:e.jsx("div",{"data-page":"lists","data-list":"watched",children:e.jsx(ke,{title:"Watched",items:Ut,mode:"watched",onNotesEdit:he,onTagsEdit:me,onNotificationToggle:xe,onSimpleReminder:fe,onBloopersOpen:ge,onExtrasOpen:pe})})}),t==="mylists"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading my lists..."}),children:e.jsx("div",{"data-page":"lists","data-list":"mylists",children:e.jsx(ar,{})})}),t==="discovery"&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading discovery..."}),children:e.jsx(ir,{query:F.q,genreId:F.genre?parseInt(F.genre):null})})]})}),!Bt&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-yellow-500 text-black px-4 py-2 rounded-lg shadow-lg text-sm font-medium",children:"ðŸ“± You're offline - viewing cached content"}),e.jsx(dt,{onClick:Oe}),e.jsx(ut,{theme:s.layout.theme,onToggle:()=>q.updateTheme(s.layout.theme==="dark"?"light":"dark")}),o&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading settings..."}),children:e.jsx(ft,{onClose:()=>i(!1)})}),a&&l&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notes..."}),children:e.jsx(gt,{item:l,isOpen:a,onClose:()=>x(!1),onSave:He})}),(()=>{const v=j&&y;return console.log("ðŸ”” Modal render check:",{showNotificationModal:j,notificationModalItem:y==null?void 0:y.title,shouldRender:v}),v})()&&e.jsx(zs,{isOpen:j,onClose:()=>{console.log("ðŸ”” Closing notification modal"),p(!1)},show:{id:Number(y.id),title:y.title,mediaType:y.mediaType}}),console.log("ðŸŽ¬ BloopersModal render check:",{showBloopersModal:S,hasBloopersModalItem:!!h,bloopersModalItemTitle:h==null?void 0:h.title}),S&&h&&e.jsx(qs,{isOpen:S,onClose:()=>k(!1),showId:(()=>{const v=typeof h.id=="string"?parseInt(h.id):h.id;return console.log("ðŸŽ¬ BloopersModal showId conversion:",{originalId:h.id,convertedId:v,type:typeof v}),v})(),showTitle:h.title}),b&&T&&e.jsx(Ys,{isOpen:b,onClose:()=>E(!1),showId:(()=>{const v=typeof T.id=="string"?parseInt(T.id):T.id;return console.log("ðŸŽ­ ExtrasModal showId conversion:",{originalId:T.id,convertedId:v,type:typeof v}),v})(),showTitle:T.title}),C&&e.jsx(mt,{isOpen:C,onClose:()=>L(!1)})]}):ue?e.jsx(rr,{children:e.jsxs("main",{className:"min-h-screen",style:{backgroundColor:"var(--bg)",color:"var(--text)",minHeight:"100lvh"},children:[e.jsx(et,{appName:"Flicklet",showMarquee:n&&!Q,onSearch:(v,I,O)=>Fe(v,I??null,O??"all"),onClear:te,onHelpOpen:Ve,messages:[P("marquee1",s.personalityLevel),P("marquee2",s.personalityLevel),P("marquee3",s.personalityLevel),P("marquee4",s.personalityLevel),P("marquee5",s.personalityLevel)],marqueeSpeedSec:60,changeEveryMs:3e4}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Qe,{current:t,onChange:v=>{r(v),Q&&te()}})}),e.jsx("div",{className:"block lg:hidden",children:e.jsx(Xe,{current:t,onChange:v=>{r(v),Q&&te()}})}),Q?e.jsx(xt,{onRefresh:Pe,children:e.jsx(it,{query:F.q,genre:F.genre,searchType:F.type,nonce:F.nonce})}):e.jsx(xt,{onRefresh:Pe,children:e.jsx(e.Fragment,{children:t==="home"&&e.jsxs("div",{className:"pb-20 lg:pb-0",style:{paddingBottom:c>0&&((qe=window.visualViewport)==null?void 0:qe.offsetTop)===0?`${80+c}px`:void 0},children:[e.jsx(Z,{title:d.yourShows,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(lt,{}),e.jsx(ct,{})]})}),e.jsx(Z,{title:d.community,children:e.jsx(Ge,{})}),e.jsx(Z,{title:d.forYou,children:e.jsx("div",{className:"space-y-4",children:Be.map(v=>e.jsx(je,{id:`for-you-${v.rowId}`,title:v.title,items:Array.isArray(v.data)?v.data:[],skeletonCount:12},`for-you-${v.rowId}`))})}),e.jsxs(Z,{title:d.inTheatersNearYou,children:[e.jsx(st,{}),e.jsx(je,{id:"in-theaters",title:d.nowPlaying,items:Array.isArray(Ue("in-theaters"))?Ue("in-theaters").map(v=>({...v,id:String(v.id),year:v.year?parseInt(String(v.year)):void 0})):[],skeletonCount:12})]}),e.jsx(Z,{title:d.feedback,children:e.jsx(rt,{})}),e.jsx(ts,{threshold:400})]})})}),e.jsx(dt,{onClick:Oe}),e.jsx(ut,{theme:s.layout.theme,onToggle:()=>q.updateTheme(s.layout.theme==="dark"?"light":"dark")}),o&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading settings..."}),children:e.jsx(ft,{onClose:()=>i(!1)})}),a&&l&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notes..."}),children:e.jsx(gt,{item:l,isOpen:a,onClose:()=>x(!1),onSave:He})}),ee.map(v=>e.jsx(Es,{message:v.message,type:v.type,personalityLevel:s.personalityLevel,onClose:()=>$t(v.id)},v.id)),e.jsx(jt,{isOpen:Ft,onClose:()=>De(!1)}),f&&e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading game..."}),children:e.jsx(or,{isOpen:f,onClose:()=>N(!1)})}),C&&e.jsx(mt,{isOpen:C,onClose:()=>L(!1)})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg)",color:"var(--text)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Loading..."})]})})}const Pt=new ss,cr=[{id:"currently-watching",title:"Currently Watching",group:"your-shows"},{id:"up-next",title:"Up Next",group:"your-shows"},{id:"community",title:"Community",group:"community"},{id:"for-you-drama",title:"Drama",group:"for-you"},{id:"for-you-comedy",title:"Comedy",group:"for-you"},{id:"for-you-horror",title:"Horror",group:"for-you"},{id:"in-theaters",title:"In Theaters Near You",group:"in-theaters"},{id:"feedback",title:"Feedback",group:"feedback"}],dr=[{id:"watching",title:"Currently Watching"},{id:"want",title:"Want to Watch"},{id:"watched",title:"Watched"},{id:"discovery",title:"Discovery"}];document.documentElement.dataset.density="compact";Kt({"compact-mobile-v1":!1,"actions-split":!1,"debug-logging":!1});rs();ns();function ur(){window.debugRails=()=>Array.from(document.querySelectorAll("[data-rail]")).map(r=>{const n=r.getAttribute("data-rail")||"",s=r.getAttribute("aria-label")||"",o=r.querySelector("[data-cards]"),i=o?getComputedStyle(o):null;return{id:n,title:s,enabled:getComputedStyle(r).display!=="none",scrollX:(i==null?void 0:i.overflowX)||"n/a"}}),window.debugCards=()=>Array.from(document.querySelectorAll("[data-card]")).slice(0,24).map((r,n)=>{const s=r.closest("[data-rail]"),o=(s==null?void 0:s.getAttribute("data-rail"))||"",i=r.querySelector("[data-poster]"),d=r.querySelector("[data-actions]"),c=i?getComputedStyle(i):null,l=d?getComputedStyle(d):null;return{i:n,railId:o,posterAR:(c==null?void 0:c.aspectRatio)||"n/a",actionsDisplay:(l==null?void 0:l.display)||"n/a",actionsCols:(l==null?void 0:l.gridTemplateColumns)||"n/a"}})}typeof window<"u"&&ur();window.debugEnv=()=>({hasViteTmdbKey:!!"your_tmdb_key_here"});window.debugQueries=()=>Array.from(Pt.getQueryCache().getAll()).map(t=>{var r,n;return{key:((r=t.queryKey)==null?void 0:r.join("/"))??"unknown",status:t.state.status,error:((n=t.state.error)==null?void 0:n.message)??null,dataLen:Array.isArray(t.state.data)?t.state.data.length:t.state.data?1:0}});window.debugTmdbSource=()=>Qt();window.debugStructure=()=>({rails:cr,tabs:dr});window.debugLists=()=>{try{const t=JSON.parse(localStorage.getItem("flicklet.library.v2")||"{}"),r=Object.values(t).reduce((o,i)=>(o[i.list]=(o[i.list]||0)+1,o),{}),n=JSON.parse(localStorage.getItem("flicklet:v2:saved")||"[]"),s=n.reduce((o,i)=>(o[i.status]=(o[i.status]||0)+1,o),{});return{new:{total:Object.keys(t).length,...r},old:{total:n.length,...s}}}catch{return{new:{total:0},old:{total:0}}}};window.debugTabs=()=>[...document.querySelectorAll('header button,[role="tab"]')].map(t=>{var r;return(r=t.textContent)==null?void 0:r.trim()}).filter(Boolean);window.debugCardButtons=t=>{const r=document.querySelector(`[data-rail="${t}"]`),n=r==null?void 0:r.querySelector("[data-card]");return[...(n==null?void 0:n.querySelectorAll("[data-actions] button"))||[]].map(s=>{var o;return(o=s.textContent)==null?void 0:o.trim()})};window.debugLibrary=()=>{try{return{message:"Library debug function disabled in browser environment"}}catch{return{watching:0,wishlist:0,watched:0,not:0}}};Se.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(os,{client:Pt,children:e.jsx(as,{children:e.jsx(lr,{})})})}));

```

## ios\App\App\public\assets\settings-b3931a55.js
```
var H=Object.defineProperty;var q=(t,s,c)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[s]=c;var F=(t,s,c)=>(q(t,typeof s!="symbol"?s+"":s,c),c);import{q as S,N as Q,_ as D,r as P,u as K,c as R}from"./modals-5fe29d8c.js";import{j as e,g as $,a as M,b as W,c as X,l as Z,u as ee,d as se,s as O}from"./games-23f18348.js";import{r as g}from"./react-vendor-b1791c80.js";class te{constructor(){F(this,"username","");F(this,"usernamePrompted",!1);F(this,"loading",!0);F(this,"subscribers",new Set)}getState(){return{username:this.username,usernamePrompted:this.usernamePrompted,loading:this.loading}}setUsername(s){this.username=s,this.notifySubscribers()}setUsernamePrompted(s){this.usernamePrompted=s,this.notifySubscribers()}setLoading(s){this.loading=s,this.notifySubscribers()}subscribe(s){return this.subscribers.add(s),()=>this.subscribers.delete(s)}notifySubscribers(){this.subscribers.forEach(s=>s())}}const w=new te;function V(){const[t,s]=g.useState(()=>w.getState());g.useEffect(()=>{const a=w.subscribe(()=>{s(w.getState())});return()=>{a()}},[]);const{username:c,usernamePrompted:h,loading:d}=t;g.useEffect(()=>{const a=async()=>{const l=S.getCurrentUser();if(console.log("ðŸ”„ Loading username for user:",l==null?void 0:l.uid),!(l!=null&&l.uid)){console.log("âŒ No user, resetting state"),w.setUsername(""),w.setUsernamePrompted(!1),w.setLoading(!1);return}try{const j=await S.getUserSettings(l.uid);if(j){const v=j.username||"",N=j.usernamePrompted||!1;N&&!v?(console.log("ðŸ”„ Resetting usernamePrompted flag - username is empty"),await S.updateUserSettings(l.uid,{usernamePrompted:!1}),w.setUsernamePrompted(!1),console.log("âœ… Flag reset complete, username should trigger modal")):w.setUsernamePrompted(N),w.setUsername(v),console.log("âœ… Username loaded:",{username:v,prompted:N})}}catch(j){console.error("Failed to load username:",j)}finally{w.setLoading(!1)}};return a(),S.subscribe(l=>{console.log("ðŸ”” Auth subscription triggered:",{hasUser:!!(l!=null&&l.uid),uid:l==null?void 0:l.uid}),l!=null&&l.uid?a():(w.setUsername(""),w.setUsernamePrompted(!1),w.setLoading(!1))})},[]);const m=async a=>{const r=S.getCurrentUser();if(!r)throw new Error("No authenticated user");try{await S.updateUserSettings(r.uid,{username:a,usernamePrompted:!0}),w.setUsername(a),w.setUsernamePrompted(!0),console.log("âœ… Username updated:",a)}catch(l){throw console.error("Failed to update username:",l),l}},n=async()=>{const a=S.getCurrentUser();if(!a)throw new Error("No authenticated user");try{await S.updateUserSettings(a.uid,{usernamePrompted:!0}),w.setUsernamePrompted(!0),console.log("âœ… Username prompt skipped")}catch(r){throw console.error("Failed to skip username prompt:",r),r}},y=g.useCallback(()=>{const a=S.getCurrentUser(),r=!!(a!=null&&a.uid&&!c&&!h);return console.log("ðŸŽ¯ needsUsernamePrompt check:",{hasUser:!!(a!=null&&a.uid),username:c,usernamePrompted:h,result:r,currentUser:a?{uid:a.uid,email:a.email}:null}),r},[c,h]);return{username:c,usernamePrompted:h,loading:d,updateUsername:m,skipUsernamePrompt:n,needsUsernamePrompt:y}}function ae({personalityLevel:t}){const s=[{category:"Welcome Message",key:"welcome"},{category:"Empty List",key:"emptyWatching"},{category:"Item Added",key:"itemAdded"},{category:"Search Empty",key:"searchEmpty"},{category:"Error Message",key:"errorGeneric"},{category:"Marquee Message",key:"marquee1"}],c=d=>{switch(d){case 1:return"Regular";case 2:return"Semi-sarcastic";case 3:return"Severely sarcastic";default:return"Regular"}},h=d=>{switch(d){case 1:return"Friendly and helpful";case 2:return"A bit cheeky";case 3:return"Maximum sass";default:return"Friendly and helpful"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:[c(t)," Personality"]}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:h(t)})]}),e.jsx("div",{className:"grid gap-3",children:s.map(({category:d,key:m})=>e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"text-xs font-medium mb-1",style:{color:"var(--muted)"},children:[d,":"]}),e.jsxs("div",{className:"text-sm",style:{color:"var(--text)"},children:['"',$(m,t),'"']})]},m))}),e.jsxs("div",{className:"text-center text-xs",style:{color:"var(--muted)"},children:["These messages will appear throughout the app based on your personality setting.",e.jsx("br",{}),e.jsx("span",{className:"text-green-400",children:"âœ“ Apple App Store compliant"})]})]})}const U=[{id:"anime",name:"Anime",subgenres:[{id:"action",name:"Action"},{id:"romance",name:"Romance"},{id:"fantasy",name:"Fantasy"},{id:"slice-of-life",name:"Slice of Life"},{id:"thriller",name:"Thriller"},{id:"comedy",name:"Comedy"}]},{id:"horror",name:"Horror",subgenres:[{id:"psychological",name:"Psychological"},{id:"supernatural",name:"Supernatural"},{id:"slasher",name:"Slasher"},{id:"gothic",name:"Gothic"},{id:"found-footage",name:"Found Footage"},{id:"body-horror",name:"Body Horror"}]},{id:"comedy",name:"Comedy",subgenres:[{id:"romantic",name:"Romantic"},{id:"dark",name:"Dark"},{id:"satirical",name:"Satirical"},{id:"slapstick",name:"Slapstick"},{id:"parody",name:"Parody"},{id:"stand-up",name:"Stand-up"}]},{id:"drama",name:"Drama",subgenres:[{id:"period",name:"Period"},{id:"legal",name:"Legal"},{id:"medical",name:"Medical"},{id:"family",name:"Family"},{id:"political",name:"Political"},{id:"crime",name:"Crime"}]},{id:"action",name:"Action",subgenres:[{id:"martial-arts",name:"Martial Arts"},{id:"spy",name:"Spy"},{id:"war",name:"War"},{id:"adventure",name:"Adventure"},{id:"superhero",name:"Superhero"},{id:"thriller",name:"Thriller"}]},{id:"science-fiction",name:"Science Fiction",subgenres:[{id:"space-opera",name:"Space Opera"},{id:"cyberpunk",name:"Cyberpunk"},{id:"dystopian",name:"Dystopian"},{id:"time-travel",name:"Time Travel"},{id:"alien",name:"Alien"},{id:"post-apocalyptic",name:"Post-Apocalyptic"}]},{id:"fantasy",name:"Fantasy",subgenres:[{id:"high-fantasy",name:"High Fantasy"},{id:"urban-fantasy",name:"Urban Fantasy"},{id:"dark-fantasy",name:"Dark Fantasy"},{id:"fairy-tale",name:"Fairy Tale"},{id:"mythology",name:"Mythology"},{id:"magic",name:"Magic"}]},{id:"thriller",name:"Thriller",subgenres:[{id:"psychological",name:"Psychological"},{id:"crime",name:"Crime"},{id:"mystery",name:"Mystery"},{id:"espionage",name:"Espionage"},{id:"legal",name:"Legal"},{id:"political",name:"Political"}]},{id:"romance",name:"Romance",subgenres:[{id:"romantic-comedy",name:"Romantic Comedy"},{id:"period",name:"Period"},{id:"young-adult",name:"Young Adult"},{id:"erotic",name:"Erotic"},{id:"lgbtq",name:"LGBTQ+"},{id:"historical",name:"Historical"}]},{id:"documentary",name:"Documentary",subgenres:[{id:"nature",name:"Nature"},{id:"biographical",name:"Biographical"},{id:"historical",name:"Historical"},{id:"social",name:"Social"},{id:"scientific",name:"Scientific"},{id:"true-crime",name:"True Crime"}]}];function re({row:t,onUpdate:s,onRemove:c,canRemove:h}){const d=U.find(a=>a.id===t.mainGenre),m=(d==null?void 0:d.subgenres)||[],n=a=>{var j,v;const r=U.find(N=>N.id===a),l={...t,mainGenre:a,subGenre:((j=r==null?void 0:r.subgenres[0])==null?void 0:j.id)||"",title:r?`${r.name}/${((v=r.subgenres[0])==null?void 0:v.name)||""}`:""};s(l)},y=a=>{const r=m.find(v=>v.id===a),l=U.find(v=>v.id===t.mainGenre),j={...t,subGenre:a,title:l&&r?`${l.name}/${r.name}`:t.title};s(j)};return e.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium",style:{color:"var(--text)"},children:["Row ",t.id]}),h&&e.jsx("button",{onClick:c,className:"text-sm px-2 py-1 rounded border transition-colors",style:{color:"var(--muted)",borderColor:"var(--line)",backgroundColor:"transparent"},children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Main Genre"}),e.jsxs("select",{value:t.mainGenre,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 rounded border text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},children:[e.jsx("option",{value:"",children:"Select Genre"}),U.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Sub Genre"}),e.jsxs("select",{value:t.subGenre,onChange:a=>y(a.target.value),className:"w-full px-3 py-2 rounded border text-sm",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)"},disabled:!d,children:[e.jsx("option",{value:"",children:"Select Sub Genre"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]}),t.title&&e.jsxs("div",{className:"mt-3 p-2 rounded text-sm",style:{backgroundColor:"var(--btn)",color:"var(--muted)"},children:[e.jsx("strong",{children:"Preview:"}),' "',t.title,'" will appear in For You section']})]})}function le(){const[t,s]=g.useState(()=>{try{const n=localStorage.getItem("flicklet:forYouRows");if(n)return JSON.parse(n)}catch(n){console.error("Failed to load For You rows:",n)}return[{id:"1",mainGenre:"anime",subGenre:"action",title:"Anime/Action"},{id:"2",mainGenre:"horror",subGenre:"psychological",title:"Horror/Psychological"},{id:"3",mainGenre:"comedy",subGenre:"romantic",title:"Comedy/Romantic"}]}),c=n=>{s(n),localStorage.setItem("flicklet:forYouRows",JSON.stringify(n)),window.dispatchEvent(new CustomEvent("forYouRows:updated",{detail:n}))},h=n=>{const y=t.map(a=>a.id===n.id?n:a);c(y)},d=()=>{if(t.length>=3)return;const n={id:String(t.length+1),mainGenre:"",subGenre:"",title:""};c([...t,n])},m=n=>{const y=t.filter(a=>a.id!==n);c(y)};return e.jsxs("div",{className:"space-y-4",children:[t.map(n=>e.jsx(re,{row:n,onUpdate:h,onRemove:()=>m(n.id),canRemove:t.length>1},n.id)),t.length<3&&e.jsxs("button",{onClick:d,className:"w-full p-4 rounded-lg border-2 border-dashed transition-colors",style:{borderColor:"var(--line)",color:"var(--muted)",backgroundColor:"transparent"},children:["+ Add Another Row (",t.length,"/3)"]}),e.jsxs("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"var(--btn)",color:"var(--muted)"},children:[e.jsx("strong",{children:"ðŸ’¡ Tip:"})," Your For You section will show personalized recommendations based on these genre combinations. The titles will automatically update as you make selections."]})]})}const oe=g.lazy(()=>D(()=>import("./modals-5fe29d8c.js").then(t=>t.F),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]).then(t=>({default:t.NotificationSettings}))),ie=g.lazy(()=>D(()=>import("./modals-5fe29d8c.js").then(t=>t.G),["assets/modals-5fe29d8c.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/firebase-auth-41bcd574.js","assets/firebase-firestore-b7b9ad2a.js","assets/firebase-app-3e6db42c.js"]).then(t=>({default:t.NotificationCenter}))),ne=g.lazy(()=>D(()=>import("./AdminExtrasPage-81d592be.js"),["assets/AdminExtrasPage-81d592be.js","assets/games-23f18348.js","assets/react-vendor-b1791c80.js","assets/extrasProvider-bcdf59df.js"]));function ce({onClose:t}){const[s,c]=g.useState("general"),[h,d]=g.useState(!1),[m,n]=g.useState(!1),[y,a]=g.useState(!1),[r,l]=g.useState(!1),j=M(),v=W(),N=X();g.useEffect(()=>(Z(),()=>{ee()}),[]);const C=[{id:"general",label:v.general},{id:"notifications",label:v.notifications},{id:"layout",label:v.layout},{id:"data",label:v.data},{id:"social",label:"ðŸ‘¥ Social"},{id:"community",label:"ðŸ† Community"},{id:"pro",label:v.pro},{id:"admin",label:"âš™ï¸ Admin"},{id:"about",label:v.about}];return e.jsxs("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-start justify-center pt-24 p-4",style:{backgroundColor:"rgba(0,0,0,0.8)"},children:[e.jsxs("div",{className:"rounded-xl w-full max-w-4xl h-[80vh] flex overflow-hidden",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"w-48 p-4",style:{backgroundColor:"var(--btn)",borderRightColor:"var(--line)",borderRight:"1px solid"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:v.settings}),e.jsx("button",{onClick:t,className:"transition-colors",style:{color:"var(--muted)"},onMouseEnter:o=>o.currentTarget.style.color="var(--text)",onMouseLeave:o=>o.currentTarget.style.color="var(--muted)","aria-label":"Close Settings",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"space-y-1",children:C.map(o=>e.jsx("button",{onClick:()=>c(o.id),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:s===o.id?"var(--card)":"transparent",color:s===o.id?"var(--text)":"var(--muted)"},onMouseEnter:p=>{s!==o.id&&(p.currentTarget.style.backgroundColor="var(--card)",p.currentTarget.style.opacity="0.5")},onMouseLeave:p=>{s!==o.id&&(p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.opacity="1")},children:o.label},o.id))})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s==="general"&&e.jsx(de,{settings:j,translations:v,currentLanguage:N,onShowNotInterestedModal:()=>n(!0)}),s==="notifications"&&e.jsx(me,{onOpenSettings:()=>a(!0),onOpenCenter:()=>l(!0)}),s==="layout"&&e.jsx(xe,{settings:j}),s==="data"&&e.jsx(he,{setShowSharingModal:d}),s==="social"&&e.jsx(ge,{}),s==="community"&&e.jsx(ye,{}),s==="pro"&&e.jsx(ue,{}),s==="admin"&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading admin..."}),children:e.jsx(ne,{})}),s==="about"&&e.jsx(pe,{})]})]}),h&&e.jsx(ve,{onClose:()=>d(!1)}),e.jsx(Q,{isOpen:m,onClose:()=>n(!1)}),y&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notification settings..."}),children:e.jsx(oe,{isOpen:y,onClose:()=>a(!1)})}),r&&e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"loading-spinner",children:"Loading notification center..."}),children:e.jsx(ie,{isOpen:r,onClose:()=>l(!1)})})]})}function de({settings:t,translations:s,currentLanguage:c,onShowNotInterestedModal:h}){const d=P("watching"),m=P("wishlist"),n=P("watched"),y=P("not"),a={watching:d.filter(x=>x.mediaType==="tv").length,wishlist:m.filter(x=>x.mediaType==="tv").length,watched:n.filter(x=>x.mediaType==="tv").length,not:y.filter(x=>x.mediaType==="tv").length},r={watching:d.filter(x=>x.mediaType==="movie").length,wishlist:m.filter(x=>x.mediaType==="movie").length,watched:n.filter(x=>x.mediaType==="movie").length,not:y.filter(x=>x.mediaType==="movie").length},{username:l,updateUsername:j}=V(),[v,N]=g.useState(l),[C,o]=g.useState(!1);g.useEffect(()=>{N(l)},[l]);const p=x=>{N(x),o(x!==l)},A=async()=>{if(C&&window.confirm("Are you sure you want to change your username? This will update your profile."))try{await j(v),o(!1)}catch(L){console.error("Failed to update username:",L),alert("Failed to update username. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:s.general}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:[s.language," / Idioma"]}),e.jsx("div",{className:"space-y-2",children:[{lang:"en",label:s.english,flag:"ðŸ‡ºðŸ‡¸"},{lang:"es",label:s.spanish,flag:"ðŸ‡ªðŸ‡¸"}].map(({lang:x,label:L,flag:E})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"language",value:x,checked:c===x,onChange:()=>se(x),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsx("div",{children:e.jsxs("div",{className:"font-medium",style:{color:"var(--text)"},children:[E," ",L]})})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.username}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:x=>p(x.target.value),className:"flex-1 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.username}),C&&e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:s.save})]}),C&&e.jsx("p",{className:"mt-1 text-sm text-yellow-400",children:"âš ï¸ Changing your display name will update your profile"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"My Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)"},children:[e.jsx("h5",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"TV Shows"}),e.jsxs("div",{className:"space-y-1 text-sm",style:{color:"var(--muted)"},children:[e.jsxs("div",{children:["Currently Watching: ",a.watching]}),e.jsxs("div",{children:["Want to Watch: ",a.wishlist]}),e.jsxs("div",{children:["Watched: ",a.watched]}),e.jsxs("div",{children:["Not Interested: ",a.not]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)"},children:[e.jsx("h5",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Movies"}),e.jsxs("div",{className:"space-y-1 text-sm",style:{color:"var(--muted)"},children:[e.jsxs("div",{children:["Currently Watching: ",r.watching]}),e.jsxs("div",{children:["Want to Watch: ",r.wishlist]}),e.jsxs("div",{children:["Watched: ",r.watched]}),e.jsxs("div",{children:["Not Interested: ",r.not]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"Not Interested Management"}),e.jsx("button",{className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},onClick:h,children:"Manage Not Interested List"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.personalityLevel}),e.jsx("div",{className:"space-y-2",children:[{level:1,label:s.regular,description:s.friendlyAndHelpful},{level:2,label:s.semiSarcastic,description:s.aBitCheeky},{level:3,label:s.severelySarcastic,description:s.maximumSass}].map(({level:x,label:L,description:E})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"personality",value:x,checked:t.personalityLevel===x,onChange:()=>O.updatePersonalityLevel(x),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text)"},children:L}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:E})]})]},x))}),e.jsx("div",{className:"mt-2 p-3 rounded-lg",style:{backgroundColor:"var(--card)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--text)"},children:[s.preview,": ",$("welcome",t.personalityLevel)]})}),e.jsx("div",{className:"mt-4",children:e.jsx(ae,{personalityLevel:t.personalityLevel})})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset all settings to defaults?")&&O.resetToDefaults()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Reset System to Defaults"})})]})}function me({onOpenSettings:t,onOpenCenter:s}){const h=M().pro||!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ”” Notifications"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Manage your notification preferences and view notification history."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:t,className:"p-4 rounded-lg border transition-colors hover:opacity-80",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"âš™ï¸"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Notification Settings"}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:"Configure timing and methods"})]})]})}),e.jsx("button",{onClick:s,className:"p-4 rounded-lg border transition-colors hover:opacity-80",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",color:"var(--text)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“‹"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Notification Center"}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:"View notification history"})]})]})})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"Current Settings"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Episode Reminders:"}),e.jsx("span",{style:{color:"var(--text)"},children:"Enabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Timing:"}),e.jsx("span",{style:{color:"var(--text)"},children:h?"Custom (Pro)":"24 hours before"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Methods:"}),e.jsxs("span",{style:{color:"var(--text)"},children:["In-app, Push",h?", Email":""]})]})]})]}),!h&&e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--btn)",borderColor:"var(--accent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ’Ž"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:"Upgrade to Pro"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Get precise timing control, email notifications, and advanced features"})]}),e.jsx("span",{className:"px-3 py-1 text-sm font-semibold rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"})]})})]})}function xe({settings:t}){const s=W(),c=K(),[h,d]=g.useState(null),[m,n]=g.useState(""),[y,a]=g.useState(""),r=()=>{const o=prompt(s.enterListName||"Enter list name:");if(o!=null&&o.trim())try{R.createList(o.trim())}catch(p){alert(p instanceof Error?p.message:"Failed to create list")}},l=o=>{const p=R.getListById(o);p&&(d(o),n(p.name),a(p.description||""))},j=()=>{if(!(!h||!m.trim()))try{R.updateList(h,{name:m.trim(),description:y.trim()||void 0}),d(null),n(""),a("")}catch(o){alert(o instanceof Error?o.message:"Failed to update list")}},v=()=>{d(null),n(""),a("")},N=o=>{const p=R.getListById(o);if(!p)return;if(window.confirm(`${s.confirmDeleteList||"Are you sure you want to delete"} "${p.name}"? ${s.thisActionCannotBeUndone||"This action cannot be undone."}`))try{R.deleteList(o)}catch(x){alert(x instanceof Error?x.message:"Failed to delete list")}},C=o=>{try{R.setSelectedList(o)}catch(p){alert(p instanceof Error?p.message:"Failed to set default list")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:s.layout}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:s.themePreference}),e.jsx("div",{className:"space-y-2",children:[{theme:"dark",label:s.dark,description:s.darkThemeDescription},{theme:"light",label:s.light,description:s.lightThemeDescription}].map(({theme:o,label:p,description:A})=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"theme",value:o,checked:t.layout.theme===o,onChange:()=>O.updateTheme(o),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text)"},children:p}),e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:A})]})]},o))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-medium",style:{color:"var(--text)"},children:s.myLists||"My Lists"}),c.customLists.length<c.maxLists&&e.jsx("button",{onClick:r,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.createNewList||"Create New List"})]}),e.jsxs("div",{className:"space-y-3",children:[c.customLists.map(o=>e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:h===o.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:m,onChange:p=>n(p.target.value),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.listName||"List name"}),e.jsx("input",{type:"text",value:y,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",color:"var(--text)",border:"1px solid"},placeholder:s.listDescription||"List description (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.save||"Save"}),e.jsx("button",{onClick:v,className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:s.cancel||"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-medium",style:{color:"var(--text)"},children:o.name}),o.isDefault&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:"var(--accent)",color:"white"},children:s.default||"Default"})]}),o.description&&e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--muted)"},children:o.description}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:[o.itemCount," ",s.items||"items"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>l(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.edit||"Edit",children:"âœï¸"}),!o.isDefault&&e.jsx("button",{onClick:()=>C(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.setAsDefault||"Set as Default",children:"â­"}),e.jsx("button",{onClick:()=>N(o.id),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)"},title:s.delete||"Delete",children:"ðŸ—‘ï¸"})]})]})},o.id)),c.customLists.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:s.noListsCreated||"No lists created yet"}),e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:s.createYourFirstList||"Create Your First List"})]})]}),e.jsxs("div",{className:"mt-3 text-xs",style:{color:"var(--muted)"},children:[s.listsUsed||"Lists used",": ",c.customLists.length,"/",c.maxLists]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:s.basicCustomization}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.layout.condensedView,onChange:o=>O.updateSettings({layout:{...t.layout,condensedView:o.target.checked}}),className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"}),e.jsx("span",{style:{color:"var(--text)"},children:s.condensedView})]}),e.jsx("p",{className:"text-xs ml-7",style:{color:"var(--muted)"},children:"Show more items per screen with smaller cards and shorter button labels. Hides episode tracking and detailed features."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:`flex items-center space-x-3 ${t.layout.condensedView?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:t.layout.episodeTracking,onChange:()=>O.toggleEpisodeTracking(),disabled:t.layout.condensedView,className:"w-4 h-4 text-blue-600 bg-neutral-800 border-neutral-600 rounded focus:ring-blue-500"}),e.jsx("span",{style:{color:"var(--text)"},children:s.enableEpisodeTracking})]}),t.layout.condensedView&&e.jsx("p",{className:"text-xs ml-7",style:{color:"var(--muted)"},children:"Episode tracking is disabled in condensed view"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"For You Section Configuration"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:'Customize the three "For You" rows on your home page. Each row combines a main genre with a subgenre for personalized recommendations.'}),e.jsx(le,{})]}),t.pro.isPro&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:s.proFeatures}),e.jsx("p",{style:{color:"var(--muted)"},children:s.themePacksComingSoon})]})]})}function he({setShowSharingModal:t}){const s=W(),c=async()=>{try{const m={watchlists:{movies:{watching:JSON.parse(localStorage.getItem("flicklet-movies-watching")||"[]"),wishlist:JSON.parse(localStorage.getItem("flicklet-movies-wishlist")||"[]"),watched:JSON.parse(localStorage.getItem("flicklet-movies-watched")||"[]")},tv:{watching:JSON.parse(localStorage.getItem("flicklet-tv-watching")||"[]"),wishlist:JSON.parse(localStorage.getItem("flicklet-tv-wishlist")||"[]"),watched:JSON.parse(localStorage.getItem("flicklet-tv-watched")||"[]")}},settings:JSON.parse(localStorage.getItem("flicklet-settings")||"{}"),user:JSON.parse(localStorage.getItem("flicklet-user")||"{}"),timestamp:new Date().toISOString(),version:"1.0"},n=JSON.stringify(m,null,2),y=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(y),r=document.createElement("a");r.href=a,r.download=`flicklet-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),alert("âœ… Backup downloaded successfully!")}catch(m){console.error("Backup failed:",m),alert("âŒ Backup failed. Please try again.")}},h=()=>{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async n=>{var a;const y=(a=n.target.files)==null?void 0:a[0];if(y)try{const r=await y.text(),l=JSON.parse(r);if(!l.watchlists||!l.timestamp)throw new Error("Invalid backup file format");if(!confirm(`âš ï¸ This will replace ALL your current data with the backup from ${new Date(l.timestamp).toLocaleDateString()}.

This action cannot be undone. Continue?`))return;l.watchlists.movies&&(localStorage.setItem("flicklet-movies-watching",JSON.stringify(l.watchlists.movies.watching||[])),localStorage.setItem("flicklet-movies-wishlist",JSON.stringify(l.watchlists.movies.wishlist||[])),localStorage.setItem("flicklet-movies-watched",JSON.stringify(l.watchlists.movies.watched||[]))),l.watchlists.tv&&(localStorage.setItem("flicklet-tv-watching",JSON.stringify(l.watchlists.tv.watching||[])),localStorage.setItem("flicklet-tv-wishlist",JSON.stringify(l.watchlists.tv.wishlist||[])),localStorage.setItem("flicklet-tv-watched",JSON.stringify(l.watchlists.tv.watched||[]))),l.settings&&localStorage.setItem("flicklet-settings",JSON.stringify(l.settings)),l.user&&localStorage.setItem("flicklet-user",JSON.stringify(l.user)),alert("âœ… Data restored successfully! Please refresh the page to see changes."),setTimeout(()=>{window.location.reload()},1e3)}catch(r){console.error("Restore failed:",r),alert("âŒ Restore failed. Please check the backup file and try again.")}},m.click()},d=()=>{if(!confirm(`ðŸš¨ NUCLEAR OPTION: This will permanently delete ALL your data including:

â€¢ All watchlists (movies & TV)
â€¢ All settings
â€¢ All user preferences
â€¢ Everything stored locally

This action CANNOT be undone. Are you absolutely sure?`)||!confirm(`âš ï¸ FINAL WARNING: This will completely wipe your Flicklet data.

Type "DELETE" in the next prompt to confirm.`))return;if(prompt('Type "DELETE" to confirm system wipe:')!=="DELETE"){alert("âŒ System wipe cancelled.");return}try{Object.keys(localStorage).filter(r=>r.startsWith("flicklet-")).forEach(r=>localStorage.removeItem(r)),alert("ðŸ’¥ System wiped successfully! The page will refresh."),setTimeout(()=>{window.location.reload()},1e3)}catch(a){console.error("System wipe failed:",a),alert("âŒ System wipe failed. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:s.data}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ“¤ Share with Friends"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Create Shareable List"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Create a shareable list of your shows and movies to send to friends"}),e.jsx("button",{onClick:()=>t(!0),className:"px-3 py-2 rounded-lg text-sm transition-colors bg-pink-500 hover:bg-pink-600 text-white",children:"ðŸ“¤ Share with Friends"})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ’¾ Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"ðŸ’¾ Backup Data"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Download a complete backup of all your watchlists and settings"}),e.jsx("button",{onClick:c,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-blue-500 hover:bg-blue-600 text-white",children:"ðŸ’¾ Download Backup"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"ðŸ“¥ Restore Data"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600 dark:text-gray-400",children:"Upload a backup file to restore your watchlists and settings"}),e.jsx("button",{onClick:h,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-green-500 hover:bg-green-600 text-white",children:"ðŸ“¥ Restore from Backup"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[e.jsx("h5",{className:"font-medium mb-2 text-red-900 dark:text-red-100",children:"ðŸš¨ System Wipe"}),e.jsx("p",{className:"text-sm mb-3 text-red-700 dark:text-red-300",children:"Permanently delete ALL your data. This action cannot be undone."}),e.jsx("button",{onClick:d,className:"px-3 py-2 rounded-lg text-sm transition-colors bg-red-500 hover:bg-red-600 text-white",children:"ðŸš¨ Nuclear Option"})]})]})]})]})}function ue(){const s=M().pro||!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-6 rounded-lg",style:{backgroundColor:"var(--btn)"},children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ’Ž"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--text)"},children:s?"You are a Pro User!":"Upgrade to Flicklet Pro"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:s?"Thank you for supporting Flicklet! Enjoy all Pro features.":"Unlock advanced features and premium content to enhance your TV and movie tracking experience."}),!s&&e.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"Upgrade to Pro"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-4",style:{color:"var(--text)"},children:"Planned Pro Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸŽ¬"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Bloopers & Behind-the-Scenes"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to bloopers, extras, and behind-the-scenes content on movie and TV show cards"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ””"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Advanced Notifications"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Customizable episode notifications with multiple methods, custom timing, and per-show settings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"â°"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Simple Reminder"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Basic reminder notifications 24 hours before episodes air (in-app only)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--success)",color:"white"},children:"FREE"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Available Now"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ””"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Smart Notifications"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Customizable episode notifications with advanced scheduling and timing options"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“Š"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Advanced Analytics"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Detailed watching statistics and viewing journey insights"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸŽ¨"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Premium Themes"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to premium theme packs and advanced customization options"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ§ "}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Extra Trivia Content"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Access to additional trivia questions and behind-the-scenes content"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“Š"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"CSV Export"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Export your lists to CSV format for use in spreadsheets"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})}),e.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg)",borderColor:"var(--line)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸš€"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium mb-1",style:{color:"var(--text)"},children:"Priority Support"}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--muted)"},children:"Faster help when you need it with priority customer support"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:"var(--accent)",color:"white"},children:"PRO"}),e.jsx("span",{className:"text-xs",style:{color:"var(--muted)"},children:"Coming Soon"})]})]})]})})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)"},children:[e.jsx("h5",{className:"font-medium mb-2",style:{color:"var(--text)"},children:"ðŸš€ What's Coming Next"}),e.jsxs("ul",{className:"text-sm space-y-1",style:{color:"var(--muted)"},children:[e.jsx("li",{children:"â€¢ Social Features: Friend connections and shared lists"}),e.jsx("li",{children:"â€¢ Advanced Recommendations: AI-powered suggestions"}),e.jsx("li",{children:"â€¢ Community Content: User-submitted videos and reviews"}),e.jsx("li",{children:"â€¢ Mobile App: Native iOS and Android apps"}),e.jsx("li",{children:"â€¢ Offline Mode: Full functionality without internet"})]})]})]})}function pe(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ  About Unique4U"}),e.jsxs("div",{className:"space-y-4 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:"We're not here to reinvent the wheel â€” we're here to make the wheel less squeaky. At Unique4U, our rule is simple: keep it simple. The world already has enough apps that feel like a second job to use. We'd rather give you tools that justâ€¦ work."}),e.jsx("p",{children:"Everything we build has its own personality, but they all live under one roof: a people-first, all-inclusive, slightly offbeat house we call Unique4U. If it's fun, useful, and a little different from the pack â€” it belongs here."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"ðŸ‘¥ About the Creators"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:"We're Pam and Travis. Think of us as casual builders with a shared allergy to overcomplication. We make things because we need them, and we figure you probably do too."}),e.jsx("p",{children:`Pam once trained dolphins (true story) and also happens to be really good with numbers. Travis studied English and Philosophy, which means he can overthink and explain it in writing, then somehow turn that into practical business know-how. Together, we're like a mash-up of "creative meets operations" â€” and that combo lets us build apps that are simple, useful, and not boring.`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"ðŸ“± About the App"}),e.jsxs("div",{className:"space-y-3 text-sm leading-relaxed",style:{color:"var(--text)"},children:[e.jsx("p",{children:`Here's the deal: you want to remember what you're watching without needing a PhD in App Navigation. We built this because we got tired of two bad options â€” messy notes on our phones or bloated apps that make you log your "episode 7 mid-season thoughts." (Hard pass.)`}),e.jsx("p",{className:"text-xs italic",style:{color:"var(--muted)"},children:"Data Attribution: This product uses the TMDB API but is not endorsed or certified by TMDB."}),e.jsx("p",{children:"So we made this instead:"}),e.jsxs("ul",{className:"space-y-2 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Stupidly easy."})," Open it, add your show, done."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Always free at the core."})," No paywalls for the basics."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Friend-proof sharing."}),' Copy your list and drop it in a text when someone asks, "What should I watch?"']})]})]}),e.jsx("p",{children:"If you watch TV or movies and don't want to make it a hobby just to track them, this app's for you. Simple lists, zero drama."})]})]})]})}function ge(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ‘¥ Social Features"}),e.jsx("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš§"}),e.jsx("h4",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:"Coming Soon!"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--muted)"},children:"Social features are in development. Here's what we're planning:"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ‘¥ Friend Connections"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Connect with friends and see what they're watching"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ“‹ Shared Watchlists"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Create collaborative watchlists with friends and family"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸ’¬ Activity Feed"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"See what your friends are watching and their ratings"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--text)"},children:"ðŸŽ¯ Recommendations"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Get personalized recommendations based on your friends' tastes"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(77, 163, 255, 0.1)",borderColor:"var(--accent)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:"var(--accent)"},children:"ðŸ”’ Pro Features"}),e.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"Advanced social features like private groups, custom recommendations, and priority support will be available with Pro."})]})]})}function ye(){const t={games:{flickword:{played:12,won:8,lost:4,streak:3,bestStreak:7},trivia:{played:25,won:18,lost:7,correct:89,total:125}},media:{movies:{watching:5,wishlist:12,watched:47},tv:{watching:8,wishlist:15,watched:23}},community:{friends:0,sharedLists:0,recommendationsGiven:0,recommendationsReceived:0}},s=(h,d)=>d>0?Math.round(h/d*100):0,c=(h,d)=>d>0?Math.round(h/d*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"ðŸ† Community Stats"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸŽ® Game Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸŽ¯ FlickWord"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Games Played:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.played})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Win Rate:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[s(t.games.flickword.won,t.games.flickword.played),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Current Streak:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.streak})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Best Streak:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.flickword.bestStreak})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ§  Trivia"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Games Played:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.games.trivia.played})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Win Rate:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[s(t.games.trivia.won,t.games.trivia.played),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Accuracy:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[c(t.games.trivia.correct,t.games.trivia.total),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Questions Correct:"}),e.jsxs("span",{style:{color:"var(--text)"},children:[t.games.trivia.correct,"/",t.games.trivia.total]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸ“º Media Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸŽ¬ Movies"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Currently Watching:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watching})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Want to Watch:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.wishlist})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Watched:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watched})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{style:{color:"var(--text)"},children:"Total:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.movies.watching+t.media.movies.wishlist+t.media.movies.watched})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("h5",{className:"font-semibold mb-3",style:{color:"var(--text)"},children:"ðŸ“º TV Shows"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Currently Watching:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watching})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Want to Watch:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.wishlist})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Watched:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watched})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{style:{color:"var(--text)"},children:"Total:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.media.tv.watching+t.media.tv.wishlist+t.media.tv.watched})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",style:{color:"var(--text)"},children:"ðŸ‘¥ Community Engagement"}),e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--card)",borderColor:"var(--line)",border:"1px solid"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Friends Connected:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.friends})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Shared Lists:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.sharedLists})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Recommendations Given:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.recommendationsGiven})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--muted)"},children:"Recommendations Received:"}),e.jsx("span",{style:{color:"var(--text)"},children:t.community.recommendationsReceived})]})]})})]})]})}function ve({onClose:t}){const{username:s}=V(),c=P("watching"),h=P("wishlist"),d=P("watched"),[m,n]=g.useState({watching:!0,wishlist:!0,watched:!0}),[y,a]=g.useState(new Set),[r,l]=g.useState({includeMovies:!0,includeTV:!0,includeRatings:!0,includeDescriptions:!1}),[j,v]=g.useState(!1),[N,C]=g.useState(""),o=()=>{const i=[];return m.watching&&i.push(...c),m.wishlist&&i.push(...h),m.watched&&i.push(...d),i},p=()=>{let i=o();return!r.includeMovies&&!r.includeTV?[]:(r.includeMovies||(i=i.filter(u=>u.mediaType!=="movie")),r.includeTV||(i=i.filter(u=>u.mediaType!=="tv")),i)},A=()=>{const i=p();return y.size===0?i:i.filter(u=>y.has(u.id.toString()))},x=i=>{n(u=>({...u,[i]:!u[i]}))},L=i=>{l(u=>({...u,[i]:!u[i]}))},E=i=>{a(u=>{const f=new Set(u);return f.has(i)?f.delete(i):f.add(i),f})},B=()=>{const i=p().map(u=>u.id.toString());a(new Set(i))},_=()=>{a(new Set)},J=()=>{const i=s||"Flicklet User",u=A();let f=`ðŸŽ¬ Flicklet - ${i}'s Watchlist
`;return f+=`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

`,m.watching&&u.some(T=>c.some(b=>b.id===T.id))&&(f+=`â–¶ï¸ Currently Watching
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>c.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),m.wishlist&&u.some(T=>h.some(b=>b.id===T.id))&&(f+=`â¤ï¸ Want to Watch
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>h.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),m.watched&&u.some(T=>d.some(b=>b.id===T.id))&&(f+=`âœ… Already Watched
`,f+=`${"â”€".repeat(30)}
`,u.filter(b=>d.some(k=>k.id===b.id)).forEach(b=>{const k=b.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º",I=r.includeRatings&&b.voteAverage?` â­ ${b.voteAverage.toFixed(1)}`:"";f+=`${k} ${b.title}${I}
`}),f+=`
`),f+=`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`,f+=`ðŸ“± Track your shows and movies with Flicklet!
`,f+=`ðŸ”— https://flicklet.app
`,f},Y=()=>{const i=J();C(i),v(!0)},z=async()=>{try{await navigator.clipboard.writeText(N),alert("Copied to clipboard!")}catch{const u=document.createElement("textarea");u.value=N,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),alert("Copied to clipboard!")}},G=p();return j?e.jsx("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ðŸ“‹ Your Shareable List"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"âœ•"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy the text below and share it with your friends! They can see what you're watching and get recommendations."})}),e.jsx("textarea",{value:N,readOnly:!0,className:"w-full h-64 p-3 border rounded-lg font-mono text-sm bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Close"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“‹ Copy to Clipboard"})]})]})})}):e.jsx("div",{className:"fixed inset-0 z-modal backdrop-blur-sm flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ðŸ“¤ Share Your Lists"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸ“‹ Select Lists to Share"}),e.jsx("div",{className:"space-y-2",children:[{key:"watching",label:"â–¶ï¸ Currently Watching",items:c},{key:"wishlist",label:"â¤ï¸ Want to Watch",items:h},{key:"watched",label:"âœ… Already Watched",items:d}].map(({key:i,label:u,items:f})=>e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg cursor-pointer",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:m[i],onChange:()=>x(i),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:u})]}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," items"]})]},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-200",children:"ðŸŽ¯ Content Options"}),e.jsx("div",{className:"space-y-2",children:[{key:"includeMovies",label:"ðŸŽ¬ Include Movies"},{key:"includeTV",label:"ðŸ“º Include TV Shows"},{key:"includeRatings",label:"â­ Include Ratings"},{key:"includeDescriptions",label:"ðŸ“ Include Descriptions"}].map(({key:i,label:u})=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer",style:{backgroundColor:"var(--btn)",borderColor:"var(--line)",border:"1px solid"},children:[e.jsx("input",{type:"checkbox",checked:r[i],onChange:()=>L(i),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:u})]},i))})]}),G.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"ðŸŽ¬ Select Items to Share"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:B,className:"px-3 py-1 rounded text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"Select All"}),e.jsx("button",{onClick:_,className:"px-3 py-1 rounded text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Select None"})]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:G.map(i=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("input",{type:"checkbox",checked:y.has(i.id.toString()),onChange:()=>E(i.id.toString()),className:"w-4 h-4"}),e.jsxs("span",{className:"flex-1 text-sm text-gray-900 dark:text-gray-100",children:[i.mediaType==="movie"?"ðŸŽ¬":"ðŸ“º"," ",i.title,r.includeRatings&&i.voteAverage&&e.jsxs("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:["â­ ",i.voteAverage.toFixed(1)]})]})]},i.id))})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",style:{borderColor:"var(--line)"},children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--btn)",color:"var(--text)",borderColor:"var(--line)",border:"1px solid"},children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:"var(--accent)",color:"white"},children:"ðŸ“‹ Generate Shareable List"})]})]})]})})})}const we=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{we as S,V as u};

```

## migration-pack\checksums.json
```
{
  "archive\\js\\inline-script-1.js": "2d9bfa2476df155294e29c4d09b6db287e888a14",
  "archive\\js\\inline-script-10.js": "5698894914e95a1350bccb879ec448ec1a7e23fe",
  "archive\\js\\inline-script-11.js": "a8e46ea51453de2d4e395a6d233dcd9a7874ae8c",
  "archive\\js\\inline-script-12.js": "62f4eb2dded3796387552a9ed70fff55ea15d803",
  "archive\\js\\inline-script-13.js": "df5927e57c162c5f8b4019b98e162f8885bcdac6",
  "archive\\js\\inline-script-14.js": "5c541f80234730f0b1f3a245de9083a92474e44b",
  "archive\\js\\inline-script-15.js": "e31d651a9b464b93972a4d69bfd936ae8d7a02e6",
  "archive\\js\\inline-script-16.js": "df6f105f3edb4c550dceb257f056f904a267d3cf",
  "archive\\js\\inline-script-2.js": "35789c72172e2758b899081c047336bc1fc044ac",
  "archive\\js\\inline-script-3.js": "1cab90f2b31b7bee5a083118e8d03432056cc248",
  "archive\\js\\inline-script-4.js": "52ea2c9c13e08b2da966667846d719fdd16eadbc",
  "archive\\js\\inline-script-5.js": "f288b2180a878a6703d1f9ea80b38ab018bc898d",
  "archive\\js\\inline-script-6.js": "99984d479b5d3e85f8d47744fb68b77bb45a70c6",
  "archive\\js\\inline-script-7.js": "9949adbf6394dfcb06fba30d97c2230c886d72b5",
  "archive\\js\\inline-script-8.js": "976e9b7b7062b7462f1e4966e27aac53da7b93e5",
  "archive\\js\\inline-script-9.js": "de5eaecb756ea1a35967606b9efb231fc996d4b5",
  "archive\\js\\performance-monitor.js": "36b3eb1ac3f92006c7b4e42979ea348df95b1158",
  "archive\\js\\security-scanner.js": "ab1a1555ffa10ce3f0073238d2a3cb9e77385c6a",
  "archive\\scripts\\debug-homeclean.js": "1ca138c9d7634c73fb5fdde2d37d40a5a63b7ece",
  "archive\\scripts\\force-refresh-homeclean.js": "e6fca38e963e10bfb67b8c6a817a37053bb3466f",
  "archive\\scripts\\inline-script-01-optimized.js": "7108afcbecec8ea3232d2c74ec2ec3c1364f0703",
  "archive\\scripts\\inline-script-01.js": "7108afcbecec8ea3232d2c74ec2ec3c1364f0703",
  "archive\\scripts\\inline-script-02-optimized.js": "a5889b2c241278b5ec330b596bf25632838118ad",
  "archive\\scripts\\inline-script-02.js": "750f9895ad40926a1da61fd1bba173b9397cd453",
  "archive\\scripts\\inline-script-03.js": "dc11f7189aa63e636b433b7e1684af9fa0403dd1",
  "archive\\scripts\\test-homeclean-implementation.js": "20d3b280e73250c83d33600dca8e593638b74c78",
  "archive\\scripts\\test-real-data-connection.js": "736cb1928c9a24b95507554d9df4e7b8168729ea",
  "archive\\styles\\inline-style-01.css": "3244ece49a6bb9f51014adadc5aa5219ecf8f5c7",
  "archive\\styles\\inline-style-02.css": "c2d882d56ab6a13b42d64849e34996c33991e6f2",
  "components\\home-clean\\archive-files\\home-clean-old.js": "31d30b355f3362ef1bc56471d86efe0465ec436d",
  "components\\home-clean\\CardCW.js": "707633ec97218060ba29359f80d763bd3dd6bf9c",
  "components\\home-clean\\CardForYou.js": "82000ae6cec6288b39c9f236bd01c2e876d7a5a9",
  "components\\home-clean\\CardNextUp.js": "407bd3e45f69d56eb0c487baf2b32047dfdb3409",
  "components\\home-clean\\holiday-modal.js": "2c3441a70f149e7873dfc467e8b8f7f493fa70e9",
  "components\\home-clean\\HolidayModal.js": "65b36d8557bf9727850f3d8b4b19bf0cf5a9943f",
  "components\\home-clean\\HomeClean.js": "a6a9280fd3791a379b18bbcdcec692457cb04e1c",
  "components\\home-clean\\index.js": "2e509dcbf253d32c9b6290f4bff6149c9cbfc98c",
  "css\\community-player.css": "fb8c026b1f46cd7e0bd89817f43231adc5e69f5a",
  "css\\theme.css": "5e7317de98416798877fcf43de93432723488ee7",
  "docs\\phase5-summary.js": "926ae648e29ca28142b2e724080601abb883159d",
  "features\\flickword-v2.html": "cf5d7a05aba48feb9e370d2dd38d376f2336e9ef",
  "features\\flickword.html": "6d0f51acd15ba8ed6674b930b81cf47193608826",
  "features\\trivia-safe.js": "73caca917e7a1e65c1d2578bd729260788b81ef4",
  "features\\trivia.html": "967bae62d749aa50eff8a4edff4e5c7bd0d06450",
  "firebase-config.js": "534b4ba25332c728bf3316f96a211c05b55e1cef",
  "index.html": "0d8e3dda7f8f5aa2776b94c81342c945b166a9e3",
  "js\\actions\\card-actions.js": "44e3dee6c85bde566309cb20ea87479a9bc10fe6",
  "js\\actions.js": "faa1c23ba2fcb82af50753ecee0434e8649f5853",
  "js\\adapters\\card-data-adapter.js": "fe8f09f46728d59767a1227e578473a98956e8e8",
  "js\\app-init-marquee.js": "ae775a4aefba9ad273fb58943ef07491c01b86e5",
  "js\\app.js": "5c974d6f201d6c48c03ebefabe3e4b4498b2e63f",
  "js\\auth-manager.js": "6b52c78b25ff6e61d37a5ffcc30ade609276086b",
  "js\\auth.js": "9acb99f3f00baca43fae5f90ed84c98347dc4f6f",
  "js\\bootstrap.js": "62132d72eb25e59027eb98a6193dd8c040958c1d",
  "js\\cards-v2-config.js": "4be6173f7a0f26312ee56fa5b8d2c6e316939fe7",
  "js\\clean-data-loader.js": "ad768fa03346b0ccc3fb60f3f2d9bbcf796d7ce3",
  "js\\common-utils.js": "02bc7f32429f040dae300bd20a268747ca4a4fad",
  "js\\community-player.js": "4512538f32a15cb1c6c10581e0571219062840f7",
  "js\\community-rotator.js": "f897dd794ffb059cba2e8e1a26c503913a109a3d",
  "js\\community-schema.d.ts": "9fa9e55b5eff1a60e879d2d8163a1804295ff3c1",
  "js\\config.js": "352e5602e0cece76fd1d2fd0657ead848d00dcdf",
  "js\\data-api.js": "24e5d64abaca89ee7d54b1c26781aab9e4065ad5",
  "js\\data-init.js": "8e0f712ebe10f974423af71ca470aeab5111f58b",
  "js\\data-migration.js": "006d1e615c6c7d29db32707b5d35271e1b8f4820",
  "js\\data-operations.js": "1149fc84114b875f431061c381b4843c96feccfe",
  "js\\data-optimizer.js": "9474e3f2ba6cda799d9a6cd67bd019085ecc936e",
  "js\\demo-settings.js": "8182b442ed445958c6ab316bf05aca140a0ecc84",
  "js\\dom-cache.js": "81a281ccec9dafa95009fbcb3b664508aaa0e2b7",
  "js\\emergency-functions.js": "a98cfba1d7829a6c9e5c70f326e94780e8e0d877",
  "js\\error-handler.js": "fadf83267e886d41bf945742bacc53887cab7ad3",
  "js\\firebase-cleanup.js": "5d5eb10fb20994f0d7896efe302326ab2715b9e8",
  "js\\firebase-init.js": "17c4ebc8420417f71701cf1929014f78500a59e2",
  "js\\firebase-migration.js": "e56c49624434d80c1fa886bb9e59571a4622609e",
  "js\\fix-auth-state.js": "9fa109fda9c0e79093f5bc2644f7400fd9f0706c",
  "js\\fix-auth-ui.js": "014b9a4aceeb3db9ac1be6ed67975d2b8a43675c",
  "js\\flags.js": "50ebc2c5761451ab45e70dbe987e883a725900a3",
  "js\\force-data-load.js": "039a2688db7bdbc4395c06fe2a3733b9f8125b75",
  "js\\functions-v2.js": "961909de74e6ddb2d480187237683b7a823b5af6",
  "js\\functions.js": "fe69cf6ef83e8a40e6b81d044972fa50eef493b5",
  "js\\home-sections-config.js": "7d34d6014525692dbe874bd5b74509f4b8bc9298",
  "js\\home-selftest.js": "7fbe2bd728ed01b462e8d6c4e439a9ab272bbc4b",
  "js\\home-wire-strict.js": "8e76dfda715d44bae42829c83adf1824fbbca61f",
  "js\\i18n.js": "3c20e80dd99ac632a0f38d8da0f0a8bb7a8c7433",
  "js\\iframe-auth-helper.js": "f33c7e7314a269bd2a7da5bf1feeff366cc65949",
  "js\\language-manager.js": "82d565090cf14f8680e695b35f30a6aebef959a3",
  "js\\layout\\search-sticky.js": "5a6470f136445441c12d21782b87c18e522ced9d",
  "js\\layout-enhancements.js": "f2947f26b79c733a046452022aceb18179085c36",
  "js\\marquee-data.js": "7b6ff000b3454d1a07ec7c92e4bcd0595fdaedd1",
  "js\\marquee.js": "42fe4d0dde0fe9f2765181f13a8fcfb1903e9a08",
  "js\\modal-utility.js": "2677493a438127eaeab74720c8f85052f3ea2e34",
  "js\\modals\\episode-guide-modal.js": "a0391f2d75d64bd2fcd2c9b0494e7bfb5fe49a9d",
  "js\\modals\\notes-modal.js": "76a554252ffe1513de5ed83f990f17230f17248e",
  "js\\nav-init.js": "f0b3307447fcf60d1e6c54b2fea73ab2fa8d8ab0",
  "js\\notification-system.js": "d9ce5eacc5ecf789e58f10139d3bbb6802b2a537",
  "js\\renderers\\card-templates.js": "ebcae6da36cd21ced9ed9aab01ae25b9b6f95d51",
  "js\\renderers\\card-v2-curated.js": "7630c86ebb8ae2429fda49b26c879621f95250e1",
  "js\\renderers\\card-v2-cw.js": "acd0259b850dee59e7e021ed35908be2d0550132",
  "js\\renderers\\card-v2.js": "0858197c6e52822ed1ff4bd301945c584cece481",
  "js\\rtl-scroll-helper.js": "15111e6b7a8699ff3d4187134d2cf12249d4913c",
  "js\\scroll-top.js": "02d7e827737d6149421d78158982152f11266631",
  "js\\search.js": "ffca224082ce160b14b976a134c6cb43ac16fdd0",
  "js\\settings-effects.js": "1016561b332f6567b721564f0fcd984b6bdb2a59",
  "js\\settings-manager.js": "70fea0783cff0cef9da5a50d5f642167704a1fd8",
  "js\\settings-modal.js": "556f0a1e8ada54dccdf06873abfe83dd4922daa4",
  "js\\settings-pro-gate.js": "d14d4bf174c4b3c9480e65d0098cdfe4f4d6f45b",
  "js\\settings-renderer.js": "8fd9bb3e41455569eaa57e8f115d3e031be9321e",
  "js\\settings-schema.js": "0bb69295eeb943da5fbb7c28a66b8922bbda2b8a",
  "js\\settings-selftest.js": "41a55dff341d7c6356a61a0a09edab3bfc5fff0d",
  "js\\settings-state.js": "725eb3d0e49bf9dc7e2c7244ac01dea85fe653ff",
  "js\\settings-validate.js": "3c9f7d00e242c25819690a7d3efe757bc687120c",
  "js\\settings-wire-strict.js": "e5bc337f77ffe81c3d8c58062a560ea7f8a187fa",
  "js\\syntax-fix.js": "36c40104998cb17429149ca4b14eee7de0b112ed",
  "js\\theme-manager.js": "15d6ccec4c24087d561f283f5ff8d9a780213f31",
  "js\\ui-integration.js": "0bf28d59ead2ffa20e238cb9d45cb3e45e25a717",
  "js\\unified-data-loader.js": "c4bb235636ab70e896100d71acad60da71d34d9f",
  "js\\utils\\airdate-utils.js": "c94169a00bd6d51a4c805a9b21a79adcb7b47565",
  "js\\utils.js": "06f05f8cf2cc98b0ee269246fb7fdcd4fecfa6e3",
  "js\\verify-home-frames.js": "ed07eac16fb70201b5f806aa7a8229b2545a7669",
  "js\\verify-panel-gutters.js": "65b045bd13fce9a8123254be4691aa75863ce16a",
  "js\\verify-rail-normalization.js": "49295661fa6bd73777026af3d6dd69d13845c5b9",
  "js\\visibility-manager.js": "6f1e774a505bb3b5832a8d9d2265036512b6ef43",
  "js\\watchlists-adapter-v2.js": "a268630636a5f6cb3f2b7545bd5f9acabf15e3ad",
  "scripts\\add-test-cards-firebase.js": "e1c559f738ab53f5d5731492af2cfa8778097ffc",
  "scripts\\add-test-cards-manual.js": "de24371567ff830c2154d3b4e2d895e92f1e957a",
  "scripts\\add-test-cards.js": "10ae9194ed492ed04ece4d2abd123026f93429bb",
  "scripts\\analytics.js": "0cda6581d37537e3ae9ceccec295fcd3dc308574",
  "scripts\\anti-jump.js": "d65953acfcc5b942384b9b5b2d47af93e6b02c74",
  "scripts\\api\\content.js": "8c6bac76388c9f5ea8ea8559e930cd6fff88442b",
  "scripts\\app-state.js": "99114d977066bd96b1733cceeb224229a32c31e0",
  "scripts\\auth.js": "1aff84e98f9456b04e49d179a315766ddb5f6440",
  "scripts\\build\\firebase.bundle.js": "6e48bff3496156252ee8ba667eabd0aa59cd0b05",
  "scripts\\button-visibility-test.js": "e7069baa8b859f731dbcb445b00f95ab4c201020",
  "scripts\\centralized-add-handler.js": "19bf8b9e73d018368ad6ee0452a64298f8baba00",
  "scripts\\community\\games.js": "6ae31255fff28983dccd01ce66cc3fa222f842b4",
  "scripts\\community-final-verification.js": "037bf374ed32c291d32130eec9bc0c4c079eb1f5",
  "scripts\\community-player.js": "a16c052f6632f5a13cdbfd804230b9d06fbc31b5",
  "scripts\\community-spotlight.js": "596127f407ba3697decfd6b4be1e00953dfed04f",
  "scripts\\compat-utils.js": "873a513c84b19310183b602acb7e0f9ea7126f33",
  "scripts\\components\\ActionBar.js": "9bf6e1d0a0f2892a92d77478f2c81f7b48a1450d",
  "scripts\\components\\BasePosterCard.js": "74eb4a8cfeafe7960ed9ee1c0b5df3c0b97ad071",
  "scripts\\components\\FlickWordTab.js": "33dac95d3f12758753ee673901f4affe4cf76bde",
  "scripts\\components\\StatsCard.js": "496950430ed152bb0f690063d76fd6113fc2cf9e",
  "scripts\\components\\TriviaTab.js": "8110b2fd23dc697bbc180b54c9c5087e6ac940c5",
  "scripts\\css-loader.js": "0ad113075bd7b95b68bd71eea8ffb6e74e5f2a22",
  "scripts\\css-purge.js": "0e57582d289a7304888ca92d40e95f9ba0965093",
  "scripts\\curated-genre-settings.js": "6f1ae31713a53459ba0893da6810e2742044bc93",
  "scripts\\curated-lists.js": "f6baa02ec5829ef7e39a7aaf06cce15991eec5d2",
  "scripts\\curated-seed.js": "d159af25ec8d5999fe64836aa8e32517b90bb8c5",
  "scripts\\custom-genre-selector.js": "a812c7c7e81f0e1f2fdc38e0f490b044183e7c63",
  "scripts\\data\\user-settings.js": "3e9b2776553d6f6d913c974f671df43aa6e04036",
  "scripts\\dom-structure-test.js": "7a70af97ea75d02844ed8a916afec425bb4baa3b",
  "scripts\\episode-tracking.js": "0d80861f076e8ab911d0e41c6e37c3e3a5a96a59",
  "scripts\\export-csv.js": "c85abd68e8b17db7800821d887ca72b84439f7a7",
  "scripts\\feedback-layout-fix.js": "6fb9518cd7f9d4a3129f769d0eca01c68273f128",
  "scripts\\flags-init.js": "9466451b748888fdf93d6bc09d0d2712808b9e98",
  "scripts\\flickword.js": "33a306fd86bd0d19d80f6860af57a0ebb81451a4",
  "scripts\\game-tabs-init.js": "698657b1258cc977df347d1b6518e0deb6d79d76",
  "scripts\\home-clean-data.js": "868d191e4792c09499ae4d577379f0e246859499",
  "scripts\\home-clean-integration.js": "1732906ac786b5e53c1bc8b5911c2db278d8f362",
  "scripts\\home-clean-performance.js": "ef2489115696ff323c062b4c4194ba58f2934a91",
  "scripts\\home-rails-fix.js": "74c7a14d1efa6bd3f5f0dfcfd77a5ad64a46dd8e",
  "scripts\\list-actions.js": "cafce9f823e624e8587a64237e51ad94ce048fb9",
  "scripts\\manual-home-clean-test.js": "a47823f2da36a64e8b11cdb2e0816ff01d58b6a3",
  "scripts\\modals\\core.js": "e2dcaf6a722dd78cd78eb6a44d1ebb1f927aa9b9",
  "scripts\\modals\\games-teaser.js": "fc5a7debfe180ddec281f2cd341dba4eb2cfc1b1",
  "scripts\\modules\\flickword-modal.js": "bb0577e94bdabe277fc19a96043862469dba677f",
  "scripts\\modules\\game-cards-modal.js": "4f062d960b97dc436ee7268d272cc7d54fc63019",
  "scripts\\modules\\mobile-detection.js": "3d386dccf65c0989e6f9cc4ca0244a228eca7fe5",
  "scripts\\modules\\poster-reconciler.js": "04bc29b9052dd153fb94c02b5f45d28aae5dc214",
  "scripts\\modules\\trivia-modal.js": "a866268c4065867a145b159fd8039267c9aa4abc",
  "scripts\\notifications-test.js": "3849c5495435afc697b919abbd39f624260f7f0d",
  "scripts\\notifications.js": "f56dc6c27644451c153f038addd58ef93c30e200",
  "scripts\\performance-monitor.js": "5db6737f7a1e080ff95ea834f9bbaeb84e9cad4e",
  "scripts\\polyfill.js": "bc9fe900c71c4e57379c5b09ba8e6e5f6668218a",
  "scripts\\pro-gate.js": "2b2b24001861979fa3c5d4a6590f56cbea8d4251",
  "scripts\\pro-preview.js": "3c68cb91f8824b9642aa384086da7c7485b650da",
  "scripts\\quotes-enhanced.js": "8fa0dea75c36846b00cdc673bcd05e635cb9359f",
  "scripts\\refactor-validation.js": "cfc2294b0c49742f52eef9f60fc382072a5bf3b9",
  "scripts\\route-fix.js": "6bdfd5f99bcd3c269597b00f1ae1c8558fb1fa3a",
  "scripts\\safe-console-replacement.js": "d80053d547f1ed5f7f14436a7348604c046dc337",
  "scripts\\search-controller.js": "24ddca487abedd5709b79900fd30ad3e2041b351",
  "scripts\\search-tips.js": "797f3445581387e6937c7c01b62413b563d65728",
  "scripts\\series-org.js": "cd2adb3be070f2060fd1880a7bd9e003adc2afe4",
  "scripts\\settings\\index.js": "71b9dbc12470ecaf315f25f26c5b52ad1e762d66",
  "scripts\\settings\\my-rows.js": "70a8b1d3af653c31f4baee0de366cc1f942c787f",
  "scripts\\settings-tie-ins.js": "4fe96643da93b0656ba56210e8f16995ccfef812",
  "scripts\\share-enhanced.js": "bdc5fc070603e7e0f80a9a33372d4131303b7cc7",
  "scripts\\share-modal.js": "5904eddb13f49f9b124bcc641d3d018f733dc3ae",
  "scripts\\simple-tab-manager.js": "df25fb07d37c29c5628305dc8b8d1adbc3f1545d",
  "scripts\\spotlight.js": "1bf7d848f136316a350e65ec8c5daf236eb8bfd3",
  "scripts\\tab-position-fix.js": "cb07afd7627bae35c390e202fc154ea6e9763673",
  "scripts\\test-data-restorer.js": "3d9b96eddb1e331016de68040cddeff833f810d4",
  "scripts\\tmdb-images.js": "0848b868946e64d0d0184d5e8b43bbf80be32ff2",
  "scripts\\tmdb-seed.js": "d00f05d1f5a46a4285dcb6bf3e24fc6c171c5024",
  "scripts\\tmdb.js": "9ec9bd750ecf3fad6be1e1f9c34276985fc5bb5e",
  "scripts\\trivia.js": "92bd282131356f79e4911220a68e02aa5ecd8fe4",
  "scripts\\visual-card-test.js": "38afc7648f474a49e2c22db1e441dffe104216fa",
  "styles\\action-bar.css": "30c196ded9b1fa6048c1260ede52762ae0ae2fe1",
  "styles\\cards.css": "bd73ac5a55e5e7fb11eea652f7bb1b0cc5ba402c",
  "styles\\community-layout.v2.css": "ae0be388d309495d9e872a31233cd09bd3ec8ff8",
  "styles\\community.css": "d62f61b5d1fc8c8c5ff160d1836839ea6f92949e",
  "styles\\components.css": "1683e2803051a89e0e1f63b2eee3aa83a3421c85",
  "styles\\consolidated-layout.css": "b1309b6a338821e81d022de03164f5c2884e21b6",
  "styles\\critical.css": "2cf52a9e9b42fccd07c5fc72e6d5db1506031751",
  "styles\\css-optimization.css": "21abb135b66c29b1f2cb202280b9d2595a58de78",
  "styles\\design-tokens.css": "79246875e173add6ae6e9a998c92c4b8122c65ee",
  "styles\\home-clean.css": "609f0da13546cf790a6f580ed4c747ae88a3f23d",
  "styles\\home-layout.css": "9e06dd9bb46d7d0caddfe03b274a36b4f7c10b10",
  "styles\\home-rails-fix.css": "42388ef7f4ecac8bd4ce3e415a2ec05c6ac22ecc",
  "styles\\home.css": "512fa67b76c9a2354bff6650d4b6cca21d5e1831",
  "styles\\main.css": "13603d1ad0131bacc09d124776a0926e3351a9b5",
  "styles\\mobile-hotfix.css": "3270fdfc8f3638a3211d82ce1c77d14d5628b49b",
  "styles\\mobile.css": "61922c5235aede9f98d8560d8c2b2de3767ccb7d",
  "styles\\modals.css": "33a51e23b618def91d399095457eb3a6ec891f57",
  "styles\\spacing-system.css": "b2b5d4302db9885a21f081d4cb4466161ba2ccee",
  "styles\\tabs-layout.css": "07f323bddecbee450b3aad7f33a8a8606dde05d3",
  "styles\\tabs.css": "7d9ab08fef6af740b69258f1b5a6e07270d6aaf2",
  "styles\\tokens.css": "38f83fab7b307d645f4683b6dd9d16c6f4f6e252",
  "styles\\your-shows.css": "f5251eef1e086b2305232160a5f9655cb0e0bd0d",
  "test-holiday-chips.html": "28a88d853b207e4809950accffe15db57f47a812",
  "test-holiday-fix.html": "d54362015500820394040010731fb8b883d48660",
  "tests\\home-clean.spec.js": "a936e835f4b4ff4f53236226b626aee0f4ef8444",
  "tests\\phase5-validation.js": "fd9053c674a51a6eadce25451478bec1e9e1c594",
  "tmdb-config.js": "4fe505c2aa16f72145dd982ab71a292a5be23f43"
}
```

## migration-pack\deps\dependency-graph.json
```
[
  {
    "file": "features\\flickword-v2.html",
    "dependency": "/js/iframe-auth-helper.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/main-advanced.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/firebase-config.js?v=v28.95",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/firebase-init.js?v=v28.95",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/tmdb-config.js?v=28.147.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/tmdb.js?v=28.147.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/modal-utility.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/rtl-scroll-helper.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/verify-home-frames.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/verify-panel-gutters.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/verify-rail-normalization.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/settings-manager.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/adapters/card-data-adapter.js?v=28.141.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/actions/card-actions.js?v=28.113.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/cards-v2-config.js?v=28.113.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/renderers/card-v2.js?v=28.500.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/renderers/card-v2-cw.js?v=28.113.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/renderers/card-v2-curated.js?v=28.113.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/search.js?v=28.150.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/app-state.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/search-controller.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/data-migration.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/watchlists-adapter-v2.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/unified-data-loader.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/data-operations.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/notification-system.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/ui-integration.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/data-init.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/firebase-migration.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/data-optimizer.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/firebase-cleanup.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/auth-manager.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/flags.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/utils.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/i18n.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/language-manager.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/marquee.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/functions.js?v=28.150.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/functions-v2.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/app.js?v=28.149.0",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/feedback-layout-fix.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/modules/trivia-modal.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/layout/search-sticky.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/tmdb-images.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/actions.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/demo-settings.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/theme-manager.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/settings-modal.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/app-init-marquee.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/curated-seed.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/custom-genre-selector.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/curated-genre-settings.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/tmdb-seed.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/components/home-clean/CardCW.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/components/home-clean/CardNextUp.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/components/home-clean/CardForYou.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/components/home-clean/HolidayModal.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/components/home-clean/index.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/home-clean-integration.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/manual-home-clean-test.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/visual-card-test.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/add-test-cards-firebase.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/tests/home-clean.spec.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/home-clean-performance.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/components/BasePosterCard.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/components/StatsCard.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/components/FlickWordTab.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/components/TriviaTab.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/community-player.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/scroll-top.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/js/settings-pro-gate.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/home-rails-fix.js",
    "type": "script"
  },
  {
    "file": "index.html",
    "dependency": "/scripts/test-data-restorer.js",
    "type": "script"
  }
]
```

## migration-pack\models\storage-keys.json
```
[
  {
    "key": "trivia:stats",
    "operation": "write",
    "storage": "localStorage",
    "file": "archive\\js\\inline-script-10.js",
    "context": "rage.getItem('trivia:stats') || '{}');\r\n        const next = { ...prev, ...data.payload };\r\n        localStorage.setItem('trivia:stats', JSON.stringify(next));\r\n      } catch {}\r\n\r\n      try {\r\n      "
  },
  {
    "key": "flicklet:episodeTracking:enabled",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\settings-tie-ins.js",
    "context": ";\r\n    console.log('ðŸ“º Setting episode tracking to:', enabled);\r\n\r\n    // Save to localStorage\r\n    localStorage.setItem('flicklet:episodeTracking:enabled', String(enabled));\r\n\r\n    // Update appData\r"
  },
  {
    "key": "pref_homeListsCount",
    "operation": "write",
    "storage": "localStorage",
    "file": "archive\\js\\inline-script-15.js",
    "context": " Math.min(3, Number(input.value) || 3));\n      console.log('ðŸ”§ Setting curated rows to:', n);\n      localStorage.setItem('pref_homeListsCount', String(n));\n      document.dispatchEvent(new CustomEvent"
  },
  {
    "key": "flicklet:curated:rows",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\curated-lists.js",
    "context": "tings getter for: Settings â†’ Layout â†’ \"Home Page TV/Movie Lists\"\r\n    try {\r\n      const n = Number(localStorage.getItem('flicklet:curated:rows'));\r\n      if ([1, 2, 3].includes(n)) return n;\r\n      r"
  },
  {
    "key": "flicklet:currentlyWatching:limit",
    "operation": "write",
    "storage": "localStorage",
    "file": "archive\\js\\inline-script-16.js",
    "context": "mber(input.value) || 12));\r\n      console.log('ðŸ”§ Setting currently watching limit to:', n);\r\n      localStorage.setItem('flicklet:currentlyWatching:limit', String(n));\r\n\r\n      // Trigger currently w"
  },
  {
    "key": "flickword:stats",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\modules\\flickword-modal.js",
    "context": "    flickword: flickwordStats,\r\n      };\r\n\r\n      // Save updated stats back to localStorage\r\n      localStorage.setItem('flickword:stats', JSON.stringify(newStats));\r\n      localStorage.setItem('flic"
  },
  {
    "key": "flicklet_performance",
    "operation": "write",
    "storage": "localStorage",
    "file": "archive\\js\\performance-monitor.js",
    "context": "N.parse(localStorage.getItem('flicklet_performance') || '{}');\r\n      stored[name] = metric;\r\n      localStorage.setItem('flicklet_performance', JSON.stringify(stored));\r\n    } catch (error) {\r\n      "
  },
  {
    "key": "flicklet-data",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\test-data-restorer.js",
    "context": ": \"TestUser\",\n            displayName: \"Test User\"\n        }\n    };\n    \n    // Store test data\n    localStorage.setItem('flicklet-data', JSON.stringify(testAppData));\n    console.log('ðŸ’¾ [TEST DATA] "
  },
  {
    "key": "tvMovieTrackerData",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\series-org.js",
    "context": "a title/backdrop if available\r\n    let title = hintTitle || 'Series';\r\n    try {\r\n      const raw = localStorage.getItem('tvMovieTrackerData');\r\n      if (raw) {\r\n        const data = JSON.parse(raw);"
  },
  {
    "key": "flicklet-theme",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\utils.js",
    "context": "ocument.body.classList.toggle('dark-mode');\r\n  appData.settings.theme = next ? 'dark' : 'light';\r\n  localStorage.setItem('flicklet-theme', appData.settings.theme);\r\n\r\n  // Update the theme icon\r\n  con"
  },
  {
    "key": "holidayAssignments",
    "operation": "write",
    "storage": "localStorage",
    "file": "components\\home-clean\\HomeClean.js",
    "context": "localStorage.getItem('holidayAssignments') || '{}');\n        assignments[cardId] = holiday;\n        localStorage.setItem('holidayAssignments', JSON.stringify(assignments));\n        \n        // Update "
  },
  {
    "key": "flicklet:trivia:v1:streak",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\components\\TriviaTab.js",
    "context": "   const dailyCount = parseInt(localStorage.getItem(dailyKey) || '0');\r\n    const streak = parseInt(localStorage.getItem('flicklet:trivia:v1:streak') || '0');\r\n\r\n    return `\r\n      <div class=\"stats-"
  },
  {
    "key": "flicklet:trivia:v1:best",
    "operation": "write",
    "storage": "localStorage",
    "file": "features\\trivia-safe.js",
    "context": "patibility\r\n    localStorage.setItem('flicklet:trivia:v1:streak', String(triviaStats.streak));\r\n    localStorage.setItem('flicklet:trivia:v1:best', String(triviaStats.maxStreak));\r\n\r\n    // Increment "
  },
  {
    "key": "firstSignInPromptShown",
    "operation": "write",
    "storage": "sessionStorage",
    "file": "js\\app.js",
    "context": "rompt() {\n          if (sessionStorage.getItem('firstSignInPromptShown') === '1') return;\n          sessionStorage.setItem('firstSignInPromptShown', '1');\n\n          const wrap = document.createElemen"
  },
  {
    "key": "auth:redirectPending",
    "operation": "write",
    "storage": "sessionStorage",
    "file": "js\\auth-manager.js",
    "context": "rovider = 'unknown') {\r\n      const flagData = JSON.stringify({ ts: Date.now(), provider });\r\n      sessionStorage.setItem('auth:redirectPending', flagData);\r\n    },\r\n\r\n    /**\r\n     * Check if redire"
  },
  {
    "key": "flicklet-app-data",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\emergency-functions.js",
    "context": "warn('âš ï¸ No appData to save');\n          return;\n        }\n\n        // Save to localStorage\n        localStorage.setItem('flicklet-app-data', JSON.stringify(window.appData));\n        FlickletDebug.inf"
  },
  {
    "key": "flicklet-backup-pre-cleanup",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\firebase-cleanup.js",
    "context": "       backup_reason: 'pre_cleanup',\r\n        };\r\n\r\n        // Save backup to localStorage\r\n        localStorage.setItem('flicklet-backup-pre-cleanup', JSON.stringify(backup));\r\n        console.log('âœ…"
  },
  {
    "key": "flicklet-migration-status",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\firebase-migration.js",
    "context": "nStatus.hasMigrated = true;\r\n      migrationStatus.lastMigration = new Date().toISOString();\r\n      localStorage.setItem('flicklet-migration-status', JSON.stringify(migrationStatus));\r\n\r\n      console"
  },
  {
    "key": "forceMobileV1",
    "operation": "read",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "og('ðŸ”§ Mobile polish gate initialized...');\n      const MOBILE_BP = 640; // px\n      const forced = localStorage.getItem('forceMobileV1') === '1';\n      function applyMobileFlag() {\n        try {\n    "
  },
  {
    "key": "flicklet-not-interested",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "(\n        (notItem) => !(notItem.id === itemId && notItem.media_type === mediaType),\n      );\n      localStorage.setItem('flicklet-not-interested', JSON.stringify(filtered));\n    } catch (error) {\n   "
  },
  {
    "key": "flicklet-notes-${itemId}",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\modals\\notes-modal.js",
    "context": "xt\r\n   */\r\n  function saveItemNotes(itemId, notes) {\r\n    try {\r\n      if (notes.trim()) {\r\n        localStorage.setItem(`flicklet-notes-${itemId}`, notes);\r\n      } else {\r\n        localStorage.remov"
  },
  {
    "key": "flicklet_notif_master",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "klet_notif_master') !== 'false';\n        masterToggle.addEventListener('change', (e) => {\n          localStorage.setItem('flicklet_notif_master', e.target.checked);\n          showNotification?.(\n     "
  },
  {
    "key": "flicklet_last_notif",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "ing soon!`,\n            'success',\n          );\n        }\n        // Update last check time\n        localStorage.setItem('flicklet_last_notif', now.toISOString());\n      }\n      // Run check on load\n "
  },
  {
    "key": "flicklet_notif_lead",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": " // Save preferences on change\n        leadHoursInput.addEventListener('change', (e) => {\n          localStorage.setItem('flicklet_notif_lead', e.target.value);\n        });\n        notifScopeSelect.ad"
  },
  {
    "key": "flicklet_notif_scope",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "e.target.value);\n        });\n        notifScopeSelect.addEventListener('change', (e) => {\n          localStorage.setItem('flicklet_notif_scope', e.target.value);\n        });\n        // Visual feedback"
  },
  {
    "key": "flicklet_lists",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "yData));\n          }\n          // Legacy format support (for old exports)\n          if (json.lists) localStorage.setItem('flicklet_lists', JSON.stringify(json.lists));\n          if (json.notes) localS"
  },
  {
    "key": "flicklet_notes",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "ists) localStorage.setItem('flicklet_lists', JSON.stringify(json.lists));\n          if (json.notes) localStorage.setItem('flicklet_notes', JSON.stringify(json.notes));\n          if (json.prefs) localS"
  },
  {
    "key": "flicklet_prefs",
    "operation": "write",
    "storage": "localStorage",
    "file": "js\\functions.js",
    "context": "otes) localStorage.setItem('flicklet_notes', JSON.stringify(json.notes));\n          if (json.prefs) localStorage.setItem('flicklet_prefs', JSON.stringify(json.prefs));\n          window.showToast?.('Im"
  },
  {
    "key": "curated:trending",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\tmdb-seed.js",
    "context": "ite if we have data (always overwrite if we have fresh data)\r\n      if (trending.length) {\r\n        localStorage.setItem('curated:trending', JSON.stringify(trending));\r\n        console.log('ðŸŒ± Seeder:"
  },
  {
    "key": "curated:staff",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\tmdb-seed.js",
    "context": "der: Saved trending data:', trending.length, 'items');\r\n      }\r\n      if (staff.length) {\r\n        localStorage.setItem('curated:staff', JSON.stringify(staff));\r\n        console.log('ðŸŒ± Seeder: Saved"
  },
  {
    "key": "curated:new",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\tmdb-seed.js",
    "context": "ðŸŒ± Seeder: Saved staff data:', staff.length, 'items');\r\n      }\r\n      if (fresh.length) {\r\n        localStorage.setItem('curated:new', JSON.stringify(fresh));\r\n        console.log('ðŸŒ± Seeder: Saved n"
  },
  {
    "key": "flicklet-language",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\tmdb.js",
    "context": "r.getCurrentLanguage();\n    }\n\n    // Try direct localStorage access\n    try {\n      const stored = localStorage.getItem('flicklet-language');\n      if (stored) return stored;\n    } catch (error) {\n  "
  },
  {
    "key": "flicklet:pro.enabled",
    "operation": "read",
    "storage": "localStorage",
    "file": "js\\settings-pro-gate.js",
    "context": "bled;\r\n    }\r\n    // Fallback to storage if your app mirrors it there\r\n    try {\r\n      const raw = localStorage.getItem('flicklet:pro.enabled');\r\n      return raw ? JSON.parse(raw) === true : false;\r"
  },
  {
    "key": "flicklet_analytics",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\analytics.js",
    "context": " > 100) {\r\n            analyticsLog.splice(0, analyticsLog.length - 100);\r\n          }\r\n\r\n          localStorage.setItem('flicklet_analytics', JSON.stringify(analyticsLog));\r\n        }\r\n\r\n        // F"
  },
  {
    "key": "flicklet_stats",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\community\\games.js",
    "context": "-PII); keeps it snappy\r\n  function getLightweightStats() {\r\n    try {\r\n      const raw = JSON.parse(localStorage.getItem('flicklet_stats') || '{}');\r\n      return {\r\n        streak: raw.streak || 0,\r\n"
  },
  {
    "key": "flickword-stats",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\modules\\flickword-modal.js",
    "context": "\r\n      const rawStats = JSON.parse(\r\n        localStorage.getItem('flickword:stats') ||\r\n          localStorage.getItem('flickword-stats') ||\r\n          localStorage.getItem('flicklet-data') ||\r\n    "
  },
  {
    "key": "curated:${kind}",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\curated-lists.js",
    "context": "urce(kind) {\r\n    console.log(`ðŸŽ¬ loadSource called for: ${kind}`);\r\n\r\n    try {\r\n      const raw = localStorage.getItem(`curated:${kind}`);\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r"
  },
  {
    "key": "my_rows",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\data\\user-settings.js",
    "context": "always store exactly 2 slots\r\n      const normalized = [rows[0] || null, rows[1] || null];\r\n\r\n      localStorage.setItem('my_rows', JSON.stringify(normalized));\r\n      console.log('âœ… My rows saved:', "
  },
  {
    "key": "flicklet:pro",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\settings-tie-ins.js",
    "context": " || false;\r\n    if (isPro) {\r\n      localStorage.setItem('flicklet:pro', '1');\r\n    } else {\r\n      localStorage.setItem('flicklet:pro', '0');\r\n    }\r\n\r\n    // Notification settings persistence\r\n    c"
  },
  {
    "key": "flickword:word:${today}",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\flickword.js",
    "context": "(new Date() - start) / (1000 * 60 * 60 * 24));\r\n    const word = WORDS[days % WORDS.length];\r\n\r\n    localStorage.setItem(`flickword:word:${today}`, word);\r\n    return word.toUpperCase();\r\n  }\r\n\r\n  // "
  },
  {
    "key": "flickword:streak",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\flickword.js",
    "context": " const streakEl = el.querySelector('.fw-streak');\r\n    if (streakEl) {\r\n      const streak = Number(localStorage.getItem('flickword:streak') || 0);\r\n      streakEl.textContent = `Streak: ${streak}`;\r\n"
  },
  {
    "key": "community-enabled",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\home-rails-fix.js",
    "context": " }\n            \n            // Check localStorage override\n            const localStorageOverride = localStorage.getItem('community-enabled');\n            if (localStorageOverride === 'false') {\n     "
  },
  {
    "key": "flicklet:notifications:mode",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\notifications-test.js",
    "context": "\n\r\n  // Set notification mode\r\n  function setNotificationMode(mode) {\r\n    currentMode = mode;\r\n    localStorage.setItem('flicklet:notifications:mode', mode);\r\n    updateModeIndicator();\r\n    console."
  },
  {
    "key": "flicklet:quote:deck",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\quotes-enhanced.js",
    "context": "ENHANCED_QUOTES[0];\r\n\r\n    // Save remaining deck\r\n    try {\r\n      if (deck.length > 0) {\r\n        localStorage.setItem('flicklet:quote:deck', JSON.stringify(deck));\r\n      } else {\r\n        localSto"
  },
  {
    "key": "flicklet:notif:${key}",
    "operation": "write",
    "storage": "localStorage",
    "file": "scripts\\settings-tie-ins.js",
    "context": "pData?.settings?.notif || {};\r\n    Object.entries(notifSettings).forEach(([key, value]) => {\r\n      localStorage.setItem(`flicklet:notif:${key}`, String(value));\r\n    });\r\n\r\n    console.log('ðŸ’¾ Settin"
  },
  {
    "key": "flicklet:spotlight:v1",
    "operation": "read",
    "storage": "localStorage",
    "file": "scripts\\spotlight.js",
    "context": "--\r\n  function loadSpotlight() {\r\n    // 1) explicit single item wins\r\n    try {\r\n      const raw = localStorage.getItem('flicklet:spotlight:v1');\r\n      if (raw) {\r\n        const one = JSON.parse(raw"
  }
]
```

## migration-pack\styles\css-tokens.json
```
[
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "text",
    "value": "#121212",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "primary",
    "value": "#e91e63",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#f7f7f9",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#dedee3",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "success",
    "value": "#51cf66",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "warning",
    "value": "#ffd43b",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "danger",
    "value": "#f06292",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "purple",
    "value": "#845ec2",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "mardi1",
    "value": "#6a0dad",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "mardi2",
    "value": "#28a745",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "mardi3",
    "value": "#ffd43b",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "focus",
    "value": "#1a73e8",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "root"
  },
  {
    "token": "text);\n  line-height",
    "value": "1.5",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary",
    "value": "#b0b0b0",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "mardi3) ;\n}\n.mardi .btn {\n  background",
    "value": "linear-gradient(45deg, var(--mardi1), var(--mardi3))",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3)) ;\n  color",
    "value": "#fff",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi2)) ;\n}\n\n.main-container {\n  max-width",
    "value": "1200px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border-radius",
    "value": "16px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  padding-bottom",
    "value": "16px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  font-weight",
    "value": "800",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  background",
    "value": "var(--card)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  font-weight",
    "value": "700",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary), var(--purple));\n  color",
    "value": "#fff",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  border-radius",
    "value": "12px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border",
    "value": "2px solid var(--accent)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  text-align",
    "value": "center",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  margin",
    "value": "0",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  color",
    "value": "white",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  font-weight",
    "value": "500",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.stat-label {\n  display",
    "value": "block",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  margin-bottom",
    "value": "4px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.flickword-actions {\n  text-align",
    "value": "center",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "focus, #1a73e8);\n  outline-offset",
    "value": "2px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border",
    "value": "1px solid var(--border)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  font-size",
    "value": "14px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n/* Enhanced genre filter focus */\n.genre-filter",
    "value": "focus {\n  transform: scale(1.02)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  transition",
    "value": "all 0.2s ease",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-desktop); /* Using centralized desktop poster width */\n  height",
    "value": "var(--poster-h-desktop)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  margin-bottom",
    "value": "4px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  font-size",
    "value": "1.05rem",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  display",
    "value": "-webkit-box",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border-radius",
    "value": "8px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.share-list-section h4 {\n  margin",
    "value": "0 0 15px 0",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "hover);\n  border-color",
    "value": "var(--primary)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.share-item-meta {\n  font-size",
    "value": "0.85rem",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n}\n\n.select-all-controls {\n  border",
    "value": "2px solid var(--primary)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "hover);\n}\n.modal {\n  background",
    "value": "var(--bg)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  max-width",
    "value": "500px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  padding",
    "value": "24px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  word-wrap",
    "value": "break-word",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  opacity",
    "value": "0.8",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  border-radius",
    "value": "8px",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  color",
    "value": "var(--text)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "card);\n    border",
    "value": "2px solid var(--primary)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile); /* Using centralized mobile poster width */\n    height",
    "value": "var(--poster-h-mobile)",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3));\n  color",
    "value": "white",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  text-align",
    "value": "center",
    "file": "archive\\styles\\inline-style-01.css",
    "context": "standalone"
  },
  {
    "token": "border, #e5e7eb);\n  border-radius",
    "value": "12px",
    "file": "css\\community-player.css",
    "context": "standalone"
  },
  {
    "token": "shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.06));\n  color",
    "value": "#1f2937 !important",
    "file": "css\\community-player.css",
    "context": "standalone"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "text",
    "value": "#121212",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "surface",
    "value": "#f6f7fb",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#ffffff",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#e6e8f0",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "accent",
    "value": "#6c5ce7",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "accent-2",
    "value": "#00b894",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "link",
    "value": "#2962ff",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "btn-text",
    "value": "#ffffff",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "shadow",
    "value": "0 6px 20px rgba(0, 0, 0, 0.08)",
    "file": "css\\theme.css",
    "context": "root"
  },
  {
    "token": "bg);\r\n  color",
    "value": "var(--text)",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  box-shadow",
    "value": "var(--shadow)",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  transition",
    "value": "background-color 0.3s ease,\r\n    border-color 0.3s ease,\r\n    box-shadow 0.3s ease",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "accent);\r\n  color",
    "value": "var(--btn-text)",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "accent-2);\r\n}\r\n\r\na {\r\n  color",
    "value": "var(--link)",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  color",
    "value": "var(--text)",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  border-radius",
    "value": "12px",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "shadow);\r\n  padding",
    "value": "16px 20px",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "surface);\r\n}\r\n\r\n.field-group input[type='radio'] {\r\n  margin",
    "value": "0",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "surface);\r\n}\r\n\r\n.switch input[type='checkbox'] {\r\n  margin",
    "value": "0",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "surface);\r\n}\r\n\r\n/* Settings FAB styling - follows existing FAB architecture */\r\n#btnSettings.fab-left {\r\n  /* Inherit FAB styles from existing CSS */\r\n  background",
    "value": "var(--accent) !important",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "btn-text) !important;\r\n  border-radius",
    "value": "50% !important",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "accent-2) !important;\r\n  transform",
    "value": "scale(1.05) !important",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "accent) !important;\r\n  outline-offset",
    "value": "2px !important",
    "file": "css\\theme.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #e5e7eb);\r\n  background",
    "value": "var(--color-surface, #ffffff)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #1f2937);\r\n  font-size",
    "value": "14px",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2, #f3f4f6);\r\n  border-color",
    "value": "var(--color-border, #d1d5db)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "primary {\r\n  background",
    "value": "linear-gradient(\r\n    90deg,\r\n    var(--color-primary-start, #ff4c8d),\r\n    var(--color-primary-end, #9b4dff)\r\n  )",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "primary",
    "value": "hover {\r\n  background: linear-gradient(90deg, #e91e63, #8e24aa)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "secondary {\r\n  background",
    "value": "var(--color-surface-2, #f3f4f6)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #6b7280);\r\n  border-color",
    "value": "var(--color-border, #e5e7eb)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "secondary",
    "value": "hover {\r\n  background: var(--color-surface, #ffffff)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #374151);\r\n  border-color",
    "value": "var(--color-border, #d1d5db)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-danger, #ef4444);\r\n  color",
    "value": "#ffffff",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #6b7280);\r\n  border-radius",
    "value": "6px",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2, #f3f4f6);\r\n  color",
    "value": "var(--color-text, #374151)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #d1d5db);\r\n}\r\n\r\n.action-overflow-btn[aria-expanded='true'] {\r\n  background",
    "value": "var(--color-surface-2, #f3f4f6)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #d1d5db);\r\n}\r\n\r\n.action-overflow-dots {\r\n  font-size",
    "value": "18px",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-surface, #ffffff);\r\n  border",
    "value": "1px solid var(--color-border, #e5e7eb)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #374151);\r\n  font-size",
    "value": "14px",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2, #f3f4f6);\r\n}\r\n\r\n.action-overflow-item",
    "value": "first-child {\r\n  border-radius: 8px 8px 0 0",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "card, #2a2a2a);\r\n  color",
    "value": "var(--text, #f5f5f5)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "border, #404040);\r\n}\r\n\r\n.dark-mode .action-btn",
    "value": "hover {\r\n  background: var(--card, #3a3a3a)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "border, #505050);\r\n}\r\n\r\n.dark-mode .action-btn--secondary {\r\n  background",
    "value": "var(--card, #2a2a2a)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #b0b0b0);\r\n}\r\n\r\n.dark-mode .action-btn--secondary",
    "value": "hover {\r\n  background: var(--card, #3a3a3a)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "text, #f5f5f5);\r\n}\r\n\r\n.dark-mode .action-overflow-btn {\r\n  background",
    "value": "var(--card, #2a2a2a)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #b0b0b0);\r\n  border-color",
    "value": "var(--border, #404040)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "card, #3a3a3a);\r\n  color",
    "value": "var(--text, #f5f5f5)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "card, #2a2a2a);\r\n  border-color",
    "value": "var(--border, #404040)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "text, #f5f5f5);\r\n}\r\n\r\n.dark-mode .action-overflow-item",
    "value": "hover {\r\n  background: var(--card, #3a3a3a)",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "focus, #1a73e8);\r\n  outline-offset",
    "value": "2px",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "primary {\r\n    border",
    "value": "2px solid #000000",
    "file": "styles\\action-bar.css",
    "context": "standalone"
  },
  {
    "token": "surface, #171a21);\n  border",
    "value": "1px solid var(--border, #242a33)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #e6eaf0);\n}\n\n.light-mode .card.v2 {\n  background",
    "value": "var(--surface, #ffffff)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #e5e7eb);\n  color",
    "value": "var(--fg, #1f2937)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "muted-bg, #0b0d12);\n  border-radius",
    "value": "10px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "muted-bg, #f3f4f6);\n}\n\n/* Home vertical cards - full width poster */\n.card.v2.v2-home-cw .poster-wrap,\n.card.v2.v2-home-nextup .poster-wrap,\n.card.v2.v2-home-curated .poster-wrap {\n  width",
    "value": "100%",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #e6eaf0);\n  margin",
    "value": "0",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #1f2937);\n}\n\n/* Meta information */\n.card.v2 .meta {\n  color",
    "value": "var(--fg-muted, #a9b3c1)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n/* Next up styling */\n.card.v2 .next-air {\n  color",
    "value": "var(--accent, #4da3ff)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "accent, #4da3ff);\n  font-size",
    "value": "12px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #a9b3c1);\n  font-size",
    "value": "12px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n/* Actions Styling - Keep flex for tab/search contexts only */\n.card.v2.v2-tab-card .actions,\n.card.v2.v2-search-card .actions {\n  margin-top",
    "value": "16px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "surface-secondary, #232a34);\n  color",
    "value": "var(--fg, #e6eaf0)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #242a33);\n  padding",
    "value": "8px 12px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "surface-secondary, #f3f4f6);\n  color",
    "value": "var(--fg, #374151)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #d1d5db);\n}\n\n.card.v2 .actions button",
    "value": "hover:not([disabled]) {\n  background: var(--surface-hover, #2a3441)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "surface-hover, #e5e7eb);\n}\n\n.card.v2 .actions button[disabled] {\n  opacity",
    "value": "0.5",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #242a33);\n}\n\n/* Pro Actions - horizontal layout with wrapping */\n.card.v2 .pro-actions {\n  display",
    "value": "flex",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "pro, #f0b90b);\n}\n\n/* 2x2 Action Grid for Home Currently Watching */\n.card.v2 .action-grid-2x2,\n.cw-card.v2 .action-grid-2x2,\n.v2-home-cw .action-grid-2x2 {\n  display",
    "value": "grid",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "btn-bg, #232a34);\n  color",
    "value": "var(--fg, #e6eaf0)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "btn-hover, #2a3441);\n  transform",
    "value": "translateY(-1px)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "btn-bg, #f3f4f6);\n  color",
    "value": "var(--fg, #1f2937)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #e5e7eb);\n}\n\n.light-mode .card.v2 .btn",
    "value": "hover {\n  background: var(--btn-hover, #e5e7eb)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "pro-outline {\n  border-color",
    "value": "var(--pro, #f0b90b)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "pro, #f0b90b);\n  background",
    "value": "transparent",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "pro-outline",
    "value": "hover {\n  background: var(--pro, #f0b90b)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #1f2937);\n}\n\n/* Delete button */\n.card.v2 .delete-btn {\n  position",
    "value": "absolute",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #a9b3c1);\n  padding",
    "value": "4px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #e6eaf0);\n}\n\n.light-mode .card.v2 .drag-handle {\n  color",
    "value": "var(--fg-muted, #6b7280)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg, #1f2937);\n}\n\n/* Overview styling */\n.card.v2 .overview {\n  color",
    "value": "var(--fg-muted, #a9b3c1)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n/* Where to Watch styling */\n.card.v2 .where-to-watch {\n  color",
    "value": "var(--fg-muted, #a9b3c1)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n/* User Rating Stars */\n.card.v2 .user-rating {\n  display",
    "value": "flex",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "accent, #4da3ff);\n  cursor",
    "value": "pointer",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "accent, #4da3ff);\n}\n\n.card.v2 .user-rating .star",
    "value": "hover {\n  color: var(--accent-hover, #66b3ff)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n/* Status Badges */\n.card.v2 .status-badges {\n  display",
    "value": "flex",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "border, #242a33);\n  border-radius",
    "value": "6px",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #a9b3c1);\n}\n\n.light-mode .card.v2 .badge {\n  border-color",
    "value": "var(--border, #e5e7eb)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted, #6b7280);\n}\n\n.card.v2 .badge.pro {\n  border-color",
    "value": "var(--pro, #f0b90b)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "pro, #f0b90b);\n}\n\n/* Date styling */\n.search-card.v2 .date,\n.cw-card.v2 .date,\n.curated-card.v2 .date {\n  color",
    "value": "#a9b3c1",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "card-w, 154px);                 /* fixed poster rail */\n  flex",
    "value": "0 0 var(--card-w, 154px)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "cw-col);\n  min-width",
    "value": "var(--cw-col)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "curated-col);\n  min-width",
    "value": "var(--curated-col)",
    "file": "styles\\cards.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n  align-items",
    "value": "start",
    "file": "styles\\community-layout.v2.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px);\n  height",
    "value": "100%",
    "file": "styles\\community-layout.v2.css",
    "context": "standalone"
  },
  {
    "token": "bp-tablet)) {\n  #group-2-community.community-v2.home-group .community-content {\n    grid-template-columns",
    "value": "1fr",
    "file": "styles\\community-layout.v2.css",
    "context": "standalone"
  },
  {
    "token": "- Community Layout (Scoped) --- */\r\n#group-2-community {\r\n  --comm-gap",
    "value": "16px",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "comm-sticky-top",
    "value": "var(--header-offset, 64px)",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "comm-gap);\r\n}\r\n\r\n/* Mobile",
    "value": "single column */\r\n@media (max-width: 959px) {\r\n  #group-2-community .community-content {\r\n    grid-template-columns: 1fr",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "comm-sticky-top);\r\n  }\r\n}\r\n\r\n/* Tidy feed spacing without touching global cards */\r\n#group-2-community .community-feed .community-card {\r\n  margin-bottom",
    "value": "var(--comm-gap)",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "border, #ddd);\r\n  background",
    "value": "var(--card, #fff)",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "primary, #6b5bff);\r\n  outline-offset",
    "value": "2px",
    "file": "styles\\community.css",
    "context": "standalone"
  },
  {
    "token": "fg",
    "value": "#1f2937",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "muted",
    "value": "#374151",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#ffffff",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#e5e7eb",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "accent",
    "value": "#ff4c8d",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-primary-start",
    "value": "var(--accent)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-primary-end",
    "value": "#9b4dff",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-text",
    "value": "var(--fg)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-muted",
    "value": "var(--muted)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-surface",
    "value": "var(--bg)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-surface-2",
    "value": "#f3f4f6",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-border",
    "value": "var(--border)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-danger",
    "value": "#ef4444",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "text-secondary",
    "value": "#374151",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "placeholder",
    "value": "#6b7280",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "badge-text",
    "value": "#1f2937",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "meta-text",
    "value": "#374151",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "r",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "gap-1",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "gap-2",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "gap-3",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "gap-4",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "gap-5",
    "value": "20px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "skeleton-bg",
    "value": "#f3f4f6",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "skeleton-shimmer",
    "value": "#e5e7eb",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "skeleton-animation-duration",
    "value": "1.5s",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fs-body",
    "value": "14px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fs-label",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fs-button",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fs-h3",
    "value": "22px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "btn-h",
    "value": "40px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "btn-radius",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "z-header",
    "value": "200",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "z-modal",
    "value": "1000",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "z-overlay",
    "value": "999",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-1",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-2",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-3",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-4",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-5",
    "value": "20px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "space-6",
    "value": "24px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "radius-sm",
    "value": "6px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "radius-md",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "radius-lg",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "radius-xl",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "shadow-sm",
    "value": "0 1px 2px rgba(0, 0, 0, 0.05)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "shadow-md",
    "value": "0 4px 6px rgba(0, 0, 0, 0.1)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "shadow-lg",
    "value": "0 10px 15px rgba(0, 0, 0, 0.1)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "shadow-xl",
    "value": "0 20px 25px rgba(0, 0, 0, 0.1)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-gap-desktop",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-pad-y-desktop",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-pad-x-desktop",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "meta-title-size-desktop",
    "value": "18px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "meta-line-desktop",
    "value": "1.3",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-gap-mobile",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-pad-y-mobile",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-pad-x-mobile",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "meta-title-size-mobile",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "meta-line-mobile",
    "value": "1.2",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-bg",
    "value": "#1e1f25",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-border",
    "value": "1px solid var(--color-border, #e0e0e0)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "card-shadow",
    "value": "0 2px 8px rgba(0, 0, 0, 0.1)",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fab-size",
    "value": "45px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fab-gap",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "fab-rail-height",
    "value": "70px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "safe-top",
    "value": "0px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "safe-bottom",
    "value": "0px",
    "file": "styles\\components.css",
    "context": "root"
  },
  {
    "token": "color-text-primary",
    "value": "var(--fg)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text-secondary",
    "value": "var(--muted)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "btn-h);\n  padding",
    "value": "0 var(--gap-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "btn-radius);\n  border",
    "value": "1px solid var(--color-border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n  color",
    "value": "var(--color-text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start), var(--color-primary-end));\n}\n.btn.secondary {\n  background",
    "value": "var(--color-surface-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n.btn.danger {\n  background",
    "value": "var(--color-danger)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "z-overlay);\n  display",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "z-modal);\n  pointer-events",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n  border-radius",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface, #ffffff);\n  border-radius",
    "value": "var(--radius-xl, 16px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n  padding",
    "value": "var(--space-4, 16px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n  border",
    "value": "1px solid var(--color-border, #e1e5e9)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2, 8px);\n  margin-bottom",
    "value": "var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text-primary, #1a1a1a);\n  line-height",
    "value": "1.3",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text-secondary, #6b7280);\n  line-height",
    "value": "1.4",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "community .section__body {\n  display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n  align-items",
    "value": "start",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border-color",
    "value": "var(--border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.dark-mode .section__header h3 {\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n}\n\n/* Dark mode home section styling */\n.dark-mode .home-section {\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n/* Dark mode card styling */\n.dark-mode .card {\n  background",
    "value": "var(--card)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact {\n  background",
    "value": "var(--card)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n/* Dark mode curated section styling */\n.dark-mode .curated-sections {\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.dark-mode .curated-section .section-subtitle {\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.dark-mode .btn.primary {\n  background",
    "value": "var(--accent)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "accent);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.dark-mode .feedback-link-card p {\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.dark-mode .theaters-info {\n  background",
    "value": "var(--card)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.dark-mode .theaters-meta h3 {\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n}\n\n.dark-mode .location-info {\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .section--community .section__body {\n    grid-template-columns",
    "value": "1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px);\n  }\n}\n\n/* Ghost rows for personalized */\n.row--ghost {\n  margin",
    "value": "1rem 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface, #ffffff);\n  border",
    "value": "1px solid var(--color-border, #e1e5e9)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .row__header h4 {\n  font-size",
    "value": "1.1rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  margin",
    "value": "0 0 12px 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .row__ghost-cards {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .ghost-card {\n  flex",
    "value": "0 0 auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-desktop);\n  height",
    "value": "var(--home-card-height-desktop)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #e1e5e9);\n  border-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .row__cta {\n  background",
    "value": "var(--primary, #e91e63)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .row__cta",
    "value": "hover {\n  background: var(--primary-dark, #c2185b)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "ghost .ghost-card {\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "home-card-height-mobile);\n  }\n}\n\n/* Community Games Container */\n.community-games-container {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px);\n  height",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-lg, 12px);\n  padding",
    "value": "var(--space-4, 16px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n}\n\n.game-box",
    "value": "hover {\n  transform: translateY(-2px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-md, 0 4px 6px rgba(0, 0, 0, 0.1));\n}\n\n.game-header {\n  margin-bottom",
    "value": "var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n  margin-bottom",
    "value": "var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary, #007bff);\n  line-height",
    "value": "1",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1, 4px);\n}\n\n.stat-label {\n  font-size",
    "value": "0.75rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text-secondary, #6b7280);\n  text-transform",
    "value": "uppercase",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary, #007bff);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-md, 8px);\n  padding",
    "value": "var(--space-2, 8px) var(--space-4, 16px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-dark, #0056b3);\n  transform",
    "value": "translateY(-1px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .community-games-grid {\n    grid-template-rows",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2, 8px);\n  }\n\n  .game-box {\n    padding",
    "value": "var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2, 8px);\n    margin-bottom",
    "value": "var(--space-2, 8px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1, 4px) var(--space-3, 12px);\n    font-size",
    "value": "0.8125rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2, 8px);\n  }\n\n  .game-title {\n    font-size",
    "value": "0.875rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  .section {\n    padding",
    "value": "var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px);\n  }\n\n  .section__header h3 {\n    font-size",
    "value": "1.125rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px) 0;\n}\n\n.feedback-link-card {\n  background",
    "value": "var(--color-surface, #ffffff)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #e0e0e0);\n  border-radius",
    "value": "var(--radius-lg, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n  transition",
    "value": "all 0.2s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-md, 0 4px 6px rgba(0, 0, 0, 0.1));\n  transform",
    "value": "translateY(-1px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px) 0;\n  color",
    "value": "var(--color-text-secondary, #666)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4, 16px);\n}\n\n.feedback-form .settings-textarea {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3, 12px);\n}\n\n/* === END FEEDBACK STYLES === */\n\n/* Mobile responsiveness for feedback link */\n@media (max-width",
    "value": "var(--bp-mobile)) {\n  .feedback-link-card {\n    padding: var(--space-3, 12px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n  border",
    "value": "1px solid var(--color-border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-md);\n  transition",
    "value": "all 0.2s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-md);\n  transform",
    "value": "translateY(-2px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "disabled {\n  opacity",
    "value": "0.6",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "skeleton {\n  pointer-events",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "empty {\n  pointer-events",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  overflow",
    "value": "hidden",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  background",
    "value": "var(--color-surface-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1);\n  white-space",
    "value": "nowrap",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  right",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-sm);\n  padding",
    "value": "var(--space-1)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-sm);\n  box-shadow",
    "value": "var(--shadow-lg)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  padding",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  transition",
    "value": "background-color 0.2s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n}\n\n.base-poster-card__overflow-icon {\n  font-size",
    "value": "1rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2) 25%,\n    var(--color-surface) 50%,\n    var(--color-surface-2) 75%\n  );\n  background-size",
    "value": "200% 100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n.base-poster-card__empty-icon {\n  font-size",
    "value": "2rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n}\n\n.base-poster-card__empty-message {\n  font-size",
    "value": "0.9rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-md);\n  padding",
    "value": "var(--space-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "shadow-sm);\n}\n\n.stats-card__header {\n  margin-bottom",
    "value": "var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n}\n\n.stats-card__stat {\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start);\n  line-height",
    "value": "1",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1);\n}\n\n.stats-card__stat-label {\n  font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  text-transform",
    "value": "uppercase",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n  padding-top",
    "value": "var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n\n.stats-card__last-played {\n  font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  .stats-card {\n    padding",
    "value": "var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  }\n\n  .stats-card__stat-value {\n    font-size",
    "value": "1.25rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-6);\n  padding",
    "value": "0 var(--space-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-6);\n  margin-bottom",
    "value": "var(--space-6)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n  align-items",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-md);\n  box-shadow",
    "value": "var(--shadow-md)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n}\n\n/* Mobile adjustments for FlickWord tab */\n@media (max-width",
    "value": "var(--bp-mobile-lg)) {\n  .flickword-tab__header {\n    padding: 0 var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n  }\n\n  .flickword-tab__title {\n    font-size",
    "value": "1.25rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n    padding",
    "value": "0 var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n  }\n\n  .flickword-tab__hero-image {\n    order",
    "value": "2",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n}\n\n/* Mobile adjustments for Trivia tab */\n@media (max-width",
    "value": "var(--bp-mobile-lg)) {\n  .trivia-tab__header {\n    padding: 0 var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n  }\n\n  .trivia-tab__title {\n    font-size",
    "value": "1.25rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  margin-bottom",
    "value": "var(--space-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-4);\n  border-bottom",
    "value": "1px solid var(--color-border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3) var(--space-4);\n  font-size",
    "value": "1rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  cursor",
    "value": "pointer",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  background",
    "value": "var(--color-surface-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start);\n  border-bottom-color",
    "value": "var(--color-primary-start)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .game-tab-nav {\n    padding",
    "value": "0 var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n  }\n\n  .game-tab-btn {\n    padding",
    "value": "var(--space-2) var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  display",
    "value": "inline-block",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface, var(--card));\n  border",
    "value": "1px solid var(--color-border, var(--border))",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-lg, 8px);\n  box-shadow",
    "value": "var(--shadow-sm)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact {\n  width",
    "value": "var(--card-w)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-h);\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__poster {\n  position",
    "value": "relative",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-md);\n  overflow",
    "value": "hidden",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n}\n\n.card--compact .card__poster img {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__poster-placeholder {\n  position",
    "value": "absolute",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__overlay {\n  position",
    "value": "absolute",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n}\n\n.card--compact",
    "value": "hover .card__overlay {\n  opacity: 1",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__overlay-content {\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__title {\n  font-size",
    "value": "0.9rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1);\n  display",
    "value": "-webkit-box",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__subtitle {\n  font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n}\n\n.card--compact .card__rating {\n  margin-bottom",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__stars {\n  color",
    "value": "#fbbf24",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__primary-action {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1) var(--space-2);\n  font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-sm);\n}\n\n/* Expanded variant (lists & detail contexts) */\n.card--expanded {\n  display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-3);\n  padding",
    "value": "var(--space-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__poster {\n  width",
    "value": "var(--poster-w-desktop)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-h-desktop); /* Using centralized desktop poster height */\n  border-radius",
    "value": "var(--radius-md)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  cursor",
    "value": "pointer",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__poster img {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__poster-placeholder {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n.card--expanded .card__content {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  min-width",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__title {\n  font-size",
    "value": "1.1rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n}\n\n.card--expanded .card__subtitle {\n  font-size",
    "value": "0.9rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__rating {\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__stars {\n  color",
    "value": "#fbbf24",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__actions {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  margin-top",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n}\n\n.card__title-row .card__badge--status {\n  flex-shrink",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  left",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1) var(--space-2);\n  border-radius",
    "value": "var(--radius-sm)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "status {\n  background",
    "value": "var(--color-primary-start)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "provider {\n  top",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  background",
    "value": "var(--color-surface)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  border",
    "value": "1px solid var(--color-border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1);\n  cursor",
    "value": "pointer",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-sm);\n  color",
    "value": "var(--color-muted)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  color",
    "value": "var(--color-text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1);\n  min-width",
    "value": "160px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-1));\n  opacity",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "radius-sm);\n  cursor",
    "value": "pointer",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  text-align",
    "value": "left",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n}\n\n.card__more-item",
    "value": "focus-visible {\n  outline: 2px solid var(--color-primary-start)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  .card--compact {\n    width",
    "value": "var(--card-w-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-h-mobile);\n  }\n\n  .card--compact .card__overlay {\n    padding",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__title {\n    font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__subtitle {\n    font-size",
    "value": "0.7rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .card__primary-action {\n    min-height",
    "value": "28px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded {\n    grid-template-columns",
    "value": "var(--poster-w-mobile) 1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n    padding",
    "value": "var(--space-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-h-mobile);\n  }\n\n  .card--expanded .card__poster {\n    width",
    "value": "var(--poster-w-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-h-mobile);\n  }\n\n  .card--expanded .card__title {\n    font-size",
    "value": "1rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded .card__subtitle {\n    font-size",
    "value": "0.8rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile);\n    height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile) 1fr;\n    min-height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "space-2);\n    margin-bottom",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .show-card {\n    display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-desktop) 1fr;\n    gap",
    "value": "var(--card-gap-desktop)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-pad-y-desktop) var(--card-pad-x-desktop);\n    background",
    "value": "var(--card-bg)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-border);\n    border-radius",
    "value": "var(--card-radius)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-shadow);\n    align-items",
    "value": "start",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-h-desktop);\n  }\n\n  .show-card .show-title-row {\n    display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "meta-title-size-desktop);\n    line-height",
    "value": "var(--meta-line-desktop)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n    font-size",
    "value": "20px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text-secondary, #888);\n    margin",
    "value": "0 0 8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n    margin",
    "value": "0 0 12px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  animation",
    "value": "tabContainerSlideIn 0.8s ease-out 0.4s both",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border-bottom",
    "value": "1px solid var(--border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border-radius",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n/* Ensure search results appear between search bar and tabs */\n.top-search + #searchResults {\n  margin-top",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-muted);\n}\n\n.tab",
    "value": ":before {\n  content: ''",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.tab.is-active {\n  background",
    "value": "transparent",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  border-bottom-color",
    "value": "var(--primary)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-muted);\n  color",
    "value": "var(--bg)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary), var(--purple));\n  color",
    "value": "#fff",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "focus, #1a73e8);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  background",
    "value": "var(--bg)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  font-size",
    "value": "14px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n.genre-filter {\n  padding",
    "value": "8px 6px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n.search-help {\n  position",
    "value": "absolute",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w);\n  height",
    "value": "var(--poster-h)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-radius);\n  object-fit",
    "value": "cover",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted, #666);\n  transition",
    "value": "all 0.2s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2, #f5f5f5);\n  color",
    "value": "var(--color-text, #121212)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start, #ff4c8d);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n  font-size",
    "value": "14px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2, #f5f5f5);\n}\n\n.card-more-item",
    "value": "focus-visible {\n  outline: 2px solid var(--color-primary-start, #ff4c8d)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-radius);\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-secondary, #f5f5f5);\n  color",
    "value": "var(--color-text-secondary, #777)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border, #ddd);\n}\n\n.poster-button {\n  background",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-radius);\n  overflow",
    "value": "hidden",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary, #007bff);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .show-details {\n    display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .show-title {\n    margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n    font-size",
    "value": "1.05rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  display",
    "value": "-webkit-box",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border",
    "value": "3px solid var(--border)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3));\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  border-top",
    "value": "2px solid var(--primary)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border) 25%, var(--card) 50%, var(--border) 75%);\n  background-size",
    "value": "200% 100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  padding",
    "value": "24px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  word-wrap",
    "value": "break-word",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  opacity",
    "value": "0.8",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  border-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "fab-rail-height);\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "fab-gap);\n  pointer-events",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text, #1f2937);\n  font-size",
    "value": "24px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {",
    "value": "root {\n    --fab-size: 45px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "fab-rail-height) + 20px);\n  }\n}\n\n/* Tab visibility control */\n.tab[style*='display",
    "value": "none'] {\n  display: none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  .fab-dock {\n    padding",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .tab-container {\n    padding",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  .stats-grid {\n    grid-template-columns",
    "value": "repeat(2, 1fr)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .tab-container .tab.hidden {\n    display",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n.tips-pop[hidden] {\n  display",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  opacity",
    "value": "0.85",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  font-weight",
    "value": "500",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.stat-label {\n  display",
    "value": "block",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  margin-bottom",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.flickword-actions {\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .quote-flickword-container {\n    flex-direction",
    "value": "column",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  font-weight",
    "value": "900",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n  text-transform",
    "value": "uppercase",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  padding-top",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .advanced-search-grid {\n    grid-template-columns",
    "value": "1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\n}\n\n.filter-icon {\n  font-size",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "danger);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .show-card {\n    overflow",
    "value": "hidden",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .show-title,\n  .show-meta,\n  .rating-container,\n  .show-actions {\n    min-width",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .search-row {\n    display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n.search-container {\n    display",
    "value": "block",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  /* Tighter search cluster - only target main search, not modals */\n.search-row .search-input {\n    font-size",
    "value": "14px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile) ; /* Using centralized mobile poster width */\n    height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary), var(--purple)) ;\n    color",
    "value": "#fff",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n.show-card .star-rating {\n      gap",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n    body.condensed-list .show-card .right-actions .icon-btn {\n      height",
    "value": "32px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  /* Switch row to grid so controls never wrap between 1024â€“1920px */\n  .top-search .search-row {\n    display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "focus-color, #2684ff);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-pad-y-desktop, 14px) * 0.6) calc(var(--card-pad-x-desktop, 14px) * 0.7);\n  gap",
    "value": "calc(var(--card-gap-desktop, 16px) * 0.6)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  body.condensed .show-card {\n    padding",
    "value": "calc(var(--card-pad-y, 8px) * 0.6) calc(var(--card-pad-x, 12px) * 0.7)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-gap, 8px) * 0.6);\n  }\n}\n\n/* Titles/overview slightly smaller; keep legibility */\nbody.condensed .show-card .show-title {\n  font-size",
    "value": "calc(var(--meta-title-size-desktop, 18px) * 0.9)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "meta-line-desktop, 1.3) * 0.95);\n}\n@media (max-width",
    "value": "var(--bp-mobile)) {\n  body.condensed .show-card .show-title {\n    font-size: calc(var(--meta-title-size, 16px) * 0.9)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "meta-line, 1.2) * 0.95);\n  }\n}\n\n/* Overview clamp",
    "value": "same lines, reduced spacing */\nbody.condensed .show-card .show-overview {\n  margin-top: 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "safe-* variables */\n  --safe-top",
    "value": "env(safe-area-inset-top, 0px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "safe-bottom)); /* base 16px + notch */\n}\n\n/* Common bottom-fixed UI",
    "value": "keep clear of the notch without changing their behavior */\n.floating-action,\n.toast,\n.bottom-bar,\n.floating-toolbar {\n  bottom: max(16px, calc(8px + var(--safe-bottom)))",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "safe-top);\n}\n\n/* Horizontal scroll guard for common layout wrappers (safe; does not touch body/html) */\n.app-container,\n.page,\n.tab-content {\n  max-width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\n  body.a11y .show-card .show-actions .btn,\n  body.a11y .show-card .show-actions button {\n    min-width",
    "value": "40px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text",
    "value": "#f5f5f5",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary",
    "value": "#2684ff",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "muted, #9aa6b2);\n  margin-right",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card, #2a2a2a);\n  color",
    "value": "var(--text, #f5f5f5)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border, #404040);\n  font-weight",
    "value": "500",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg, #1a1a1a) ;\n  color",
    "value": "var(--muted, #9aa6b2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border, #404040) ;\n}\n\n.providers-row[data-locked='1'] .provider-badge img {\n  filter",
    "value": "blur(2px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg-elev, #1a1f27);\n  color",
    "value": "var(--text, #e6ecf2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg-elev, #141a22);\n  border",
    "value": "1px solid rgba(255, 255, 255, 0.06)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg, #0b0e13);\n  color",
    "value": "var(--muted, #a6b3c2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text, #e6ecf2);\n  padding",
    "value": "6px 8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-2);\n  padding",
    "value": "var(--gap-2) var(--gap-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  position",
    "value": "sticky",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n  z-index",
    "value": "var(--z-header)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  background",
    "value": "var(--color-surface-2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start), var(--color-primary-end));\n}\n.settings-section {\n  padding",
    "value": "var(--gap-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-3); /* Match the tab padding",
    "value": "0 12px */\n}\n\n/* Settings Sections */\n.settings-section {\n  display: none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\n  margin",
    "value": "0 0 16px 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  margin-bottom",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border, #ddd);\n  border-radius",
    "value": "6px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff);\n  color",
    "value": "var(--text)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\n  box-shadow",
    "value": "0 0 0 3px rgba(233, 30, 99, 0.1)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\n  cursor",
    "value": "pointer",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  user-select",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #888);\n  margin",
    "value": "8px 0 0 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "success, #51cf66);\n  font-weight",
    "value": "500",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card, #f7f7f9);\n  border",
    "value": "1px solid var(--border, #dedee3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .settings-container {\n    padding",
    "value": "0 16px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\n  .playlist-grid {\n    grid-template-columns",
    "value": "1.2fr 1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg, #0b0e13);\n  text-decoration",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text, #e6ecf2);\n  font-size",
    "value": "13px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "muted, #a6b3c2);\n  border-radius",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-gap",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-gap);\n  flex-wrap",
    "value": "wrap",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "muted, #9aa6b2);\n  font-size",
    "value": "12px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg-elev, #141a22);\n  color",
    "value": "var(--text, #e6ecf2)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-gap);\n  border",
    "value": "1px solid rgba(255, 255, 255, 0.08)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg, #0b0e13);\n}\n\n.so-card .card-drawer[hidden] {\n  display",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-divider",
    "value": "rgba(0, 0, 0, 0.08)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-card-pad-y",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-divider);\n  margin-top",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-card-pad-y);\n}\n\n/* if you want slightly stronger separation on wide viewports, keep it subtle */\n@media (min-width",
    "value": "calc(var(--bp-mobile) + 1px)) {\n  .so-card + .so-card {\n    border-top-color: rgba(0, 0, 0, 0.1)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-gap);\n}\n.so-card .card-pills {\n  margin-top",
    "value": "var(--so-gap)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "so-gap);\n}\n\n/* Optional",
    "value": "tighten the \"Your Rating\" row spacing when present */\n.so-card .rating-container {\n  margin: 6px 0 0 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-bg);\n  border-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-bg) 96%, #000 4%);\n}\n\n/* Dark mode support",
    "value": "provide a darker base bg if you have a dark theme var */\n@media (prefers-color-scheme: dark) {\n  :root {\n    /* If you already define a dark card bg, remove this and rely on your theme */\n    --card-bg: #1e1f25",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card-bg) 96%, #fff 4%);\n  }\n}\n\n/* ========== Notifications (shared) ========== */\n\n/* Toast region",
    "value": "mobile = bottom",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  font-size",
    "value": "0.85rem",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n  min-width",
    "value": "80px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  box-shadow",
    "value": "0 0 0 2px rgba(156, 39, 176, 0.1)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n/* Mobile responsive */\n@media (max-width",
    "value": "768px) {\n  .genre-selector-row {\n    flex-direction: column",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg-secondary, rgba(0, 0, 0, 0.02));\n  border-radius",
    "value": "8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.curated-genre-title {\n  font-size",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n.settings-section-title {\n  font-size",
    "value": "18px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .curated-row .card {\n    width",
    "value": "44vw",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  border-radius",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n.trivia-choices li.correct {\n  background",
    "value": "#0f5e20",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n.trivia-modal-content .trivia-choices {\n  display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "card, #fff);\n  color",
    "value": "var(--text, #333)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  background",
    "value": "var(--primary-light, rgba(102, 126, 234, 0.1))",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n}\n\n.trivia-modal-content .trivia-feedback {\n  min-height",
    "value": "24px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\n  text-align",
    "value": "center",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .trivia-modal-content .trivia-question {\n    font-size",
    "value": "15px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n}\n\n.season-toggle {\n  all",
    "value": "unset",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "primary);\n  border-radius",
    "value": "6px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface);\n  font-size",
    "value": "13px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  border-radius",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n/* ===== Theaters Near Me Styles ===== */\n#theaters-section {\n  margin",
    "value": "20px 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n\n/* Ensure theaters-section follows light theme even when it has home-preview-row class */\n#theaters-section.home-preview-row {\n  background",
    "value": "var(--color-surface) !important",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text) !important;\n}\n\n/* Additional specificity to override any conflicting rules */\n#theaters-section.home-preview-row,\nsection#theaters-section.home-preview-row {\n  background",
    "value": "var(--color-surface) !important",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface) !important;\n  color",
    "value": "var(--color-text) !important",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n\n.theaters-header h3 {\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  font-size",
    "value": "18px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  color",
    "value": "var(--color-muted)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n  line-height",
    "value": "1.3",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  line-height",
    "value": "1.4",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n.movie-rating {\n  font-weight",
    "value": "500",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  width",
    "value": "600px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .theaters-info {\n    grid-template-columns",
    "value": "1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-text);\n}\n\n.theaters-cta {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n.no-movies p {\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .theaters-list {\n    display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n\n.episode-modal-body {\n  flex",
    "value": "1",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\n.episode-progress-bar {\n  width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start), var(--color-primary-end));\n  width",
    "value": "0%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  border",
    "value": "none",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n}\n\n.season-episodes {\n  background",
    "value": "var(--color-surface)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n}\n\n.episode-row",
    "value": "focus {\n  outline: 2px solid var(--color-primary-start)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-border);\n  transition",
    "value": "0.3s",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start), var(--color-primary-end));\n}\n\ninput",
    "value": "checked + .slider:before {\n  transform: translateX(20px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n}\n\ninput",
    "value": "checked + .slider:hover {\n  opacity: 0.8",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-start), var(--color-primary-end));\n  transition",
    "value": "width 0.3s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-muted);\n  transition",
    "value": "transform 0.2s ease",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  /* Only apply when mobile fix flag is enabled */\n  .layout-mobile-fix {\n    /* 1) Header/Search mobile responsive fixes - COMPACT HORIZONTAL */\n    .header {\n      display",
    "value": "grid",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bg) ;\n    }\n\n    .search-row {\n      display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact {\n      min-width",
    "value": "150px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "full-width {\n      width",
    "value": "100%",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-primary-dark, #c2185b);\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "accent);\n  outline-offset",
    "value": "2px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "skeleton-bg);\n  border-radius",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "skeleton-animation-duration) ease-in-out infinite;\n}\n\n.skeleton",
    "value": ":before {\n  content: ''",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "skeleton-shimmer), transparent);\n  animation",
    "value": "skeleton-shimmer var(--skeleton-animation-duration) ease-in-out infinite",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "r);\n  margin-bottom",
    "value": "var(--gap-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile);\n  height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-2);\n  border-radius",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-3);\n  border-radius",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-1);\n  border-radius",
    "value": "4px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile);\n  height",
    "value": "var(--home-card-height-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "r);\n  margin",
    "value": "var(--gap-3) 0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-desktop) 1fr;\n  gap",
    "value": "var(--gap-4)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-4);\n  background",
    "value": "var(--card)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-4);\n}\n\n/* Card Component Styles - consolidated with base card styles above */\n\n.card",
    "value": "hover {\n  transform: translateY(-2px)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact {\n  flex-direction",
    "value": "row",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "expanded {\n  padding",
    "value": "16px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster {\n  width",
    "value": "200px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster .card-poster {\n  height",
    "value": "280px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n  margin",
    "value": "0",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  padding",
    "value": "4px 8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  border-color",
    "value": "var(--accent)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile) 1fr;\n  gap",
    "value": "var(--gap-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-3);\n  background",
    "value": "var(--card)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-3);\n}\n\n.skeleton-content {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-2);\n}\n\n.skeleton-actions {\n  display",
    "value": "flex",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-2);\n  margin-top",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .skeleton-show-card {\n    grid-template-columns",
    "value": "var(--poster-w-mobile) 1fr",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "gap-3);\n    padding",
    "value": "var(--gap-3)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile);\n    height",
    "value": "var(--home-card-height-mobile)",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "text);\n}\n\n/* Horizontal scroll container with snap behavior */\n.curated-row-scroll {\n  overflow-x",
    "value": "auto",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .curated-item {\n    width",
    "value": "44vw",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "remove {\n  background-color",
    "value": "#dc3545",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "remove",
    "value": "hover {\n  background-color: #c82333",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "remove .unified-card-action-icon {\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "remove .unified-card-action-label {\n  color",
    "value": "white",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact {\n  padding",
    "value": "6px 8px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .unified-card-action-icon {\n  font-size",
    "value": "14px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .unified-card-action-label {\n  font-size",
    "value": "11px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\n  .unified-card-action-btn--compact {\n    padding",
    "value": "4px 6px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "compact .unified-card-action-label {\n    font-size",
    "value": "10px",
    "file": "styles\\components.css",
    "context": "standalone"
  },
  {
    "token": "spacing-xs",
    "value": "2px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "spacing-sm",
    "value": "4px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "spacing-md",
    "value": "8px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "spacing-lg",
    "value": "16px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "spacing-xl",
    "value": "24px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "spacing-2xl",
    "value": "32px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-margin-top",
    "value": "4px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-margin-bottom",
    "value": "4px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-padding",
    "value": "8px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-gap",
    "value": "6px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-mobile-padding",
    "value": "6px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "tab-container-mobile-gap",
    "value": "4px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "search-to-tab-spacing",
    "value": "4px",
    "file": "styles\\consolidated-layout.css",
    "context": "root"
  },
  {
    "token": "fg",
    "value": "#1f2937",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "muted",
    "value": "#374151",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#ffffff",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#e5e7eb",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "accent",
    "value": "#ff4c8d",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "text-secondary",
    "value": "#374151",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "placeholder",
    "value": "#6b7280",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "badge-text",
    "value": "#1f2937",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "meta-text",
    "value": "#374151",
    "file": "styles\\critical.css",
    "context": "root"
  },
  {
    "token": "text);\n  line-height",
    "value": "1.5",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  border-radius",
    "value": "16px",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n.header-bar {\n  display",
    "value": "flex",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n  font-size",
    "value": "1.1rem",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n  font-style",
    "value": "italic",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  border-radius",
    "value": "6px",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  color",
    "value": "var(--fg)",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  border-color",
    "value": "var(--accent)",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n  margin",
    "value": "0",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n  margin",
    "value": "4px 0 0 0",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  padding",
    "value": "16px",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  box-shadow",
    "value": "0 2px 8px rgba(0, 0, 0, 0.1)",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "color-surface-2);\n  border-color",
    "value": "var(--accent)",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "accent);\n  outline-offset",
    "value": "2px",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "border);\n  position",
    "value": "relative",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n  font-size",
    "value": "16px",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n  border-bottom-color",
    "value": "var(--accent)",
    "file": "styles\\critical.css",
    "context": "standalone"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "text",
    "value": "#121212",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "primary",
    "value": "#e91e63",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#f7f7f9",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#dedee3",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "success",
    "value": "#51cf66",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "warning",
    "value": "#ffd43b",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "danger",
    "value": "#f06292",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "purple",
    "value": "#845ec2",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "focus",
    "value": "#1a73e8",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "surface",
    "value": "#f9f9f9",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "bg-page",
    "value": "#ffffff",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "bg-elevated",
    "value": "#f7f7f9",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fg",
    "value": "#1f2937",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fg-default",
    "value": "#1f2937",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fg-muted",
    "value": "#6b7280",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fg-subtle",
    "value": "#7f8c8d",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fg-on-elevated",
    "value": "#111827",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "text-secondary",
    "value": "#666",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "accent",
    "value": "#2563eb",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "s-4",
    "value": "1rem",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-xs",
    "value": "2px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-sm",
    "value": "4px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-md",
    "value": "8px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-lg",
    "value": "16px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-xl",
    "value": "24px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "spacing-2xl",
    "value": "32px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "r-2",
    "value": "8px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "r",
    "value": "12px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fs-0",
    "value": "1rem",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "shadow-1",
    "value": "0 2px 4px rgba(0, 0, 0, 0.1)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-w",
    "value": "154px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-h",
    "value": "270px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "home-card-width-desktop",
    "value": "184px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "home-card-height-desktop",
    "value": "276px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "home-card-width-mobile",
    "value": "64px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "home-card-height-mobile",
    "value": "96px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "tab-card-poster-width-desktop",
    "value": "120px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "tab-card-poster-height-desktop",
    "value": "180px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "tab-card-poster-width-mobile",
    "value": "80px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "tab-card-poster-height-mobile",
    "value": "120px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "poster-w",
    "value": "var(--poster-w-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "poster-h",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "poster-w-mobile",
    "value": "64px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "poster-h-mobile",
    "value": "96px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-gap",
    "value": "var(--card-gap-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-gap-mobile",
    "value": "12px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-pad-y",
    "value": "var(--card-pad-y-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-pad-y-mobile",
    "value": "8px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-pad-x",
    "value": "var(--card-pad-x-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-pad-x-mobile",
    "value": "12px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "meta-title-size",
    "value": "var(--meta-title-size-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "meta-title-size-mobile",
    "value": "12px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "meta-line",
    "value": "var(--meta-line-mobile)",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "meta-line-mobile",
    "value": "1.1",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-bg",
    "value": "#e91e63",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-color",
    "value": "white",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-font-size",
    "value": "11px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-padding",
    "value": "2px 6px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-border-radius",
    "value": "10px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-margin-left",
    "value": "6px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-font-weight",
    "value": "600",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-min-width",
    "value": "16px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-line-height",
    "value": "1.2",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "badge-z-index",
    "value": "1",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fab-size",
    "value": "45px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fab-gap",
    "value": "10px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "fab-rail-height",
    "value": "70px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "safe-top",
    "value": "0px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "safe-bottom",
    "value": "0px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "safe-left",
    "value": "0px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "safe-right",
    "value": "0px",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "card-bg",
    "value": "#1e1f25",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "mardi1",
    "value": "#6a0dad",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "mardi2",
    "value": "#28a745",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "mardi3",
    "value": "#ffd43b",
    "file": "styles\\design-tokens.css",
    "context": "root"
  },
  {
    "token": "surface",
    "value": "#f9fafb",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border",
    "value": "#e5e7eb",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg",
    "value": "#111827",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "muted",
    "value": "#6b7280",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent",
    "value": "#2b63ff",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent-hover",
    "value": "#1e4cd8",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "surface);\n    border",
    "value": "1px solid var(--border)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n#clean-root .group-divider {\n    height",
    "value": "1px",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n    margin",
    "value": "8px 0 16px",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n    border-radius",
    "value": "12px",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n/* Rails - Exact Mockup Specs */\n#clean-root .rail {\n    display",
    "value": "flex",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n    box-shadow",
    "value": "0 6px 24px rgba(0,0,0,.2)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n#clean-root .meta {\n    font",
    "value": "12px/1.25 system-ui, Segoe UI, Roboto",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n    text-align",
    "value": "center",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent);\n    color",
    "value": "#fff",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent-hover);\n}\n\n/* DUPLICATE REMOVED - Using stronger definition below */\n\n/* DUPLICATE REMOVED - Using stronger definition below */\n\n/* Up Next",
    "value": "200px, Read-Only */\n#clean-root .up-card {\n    width: 200px",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent-hover);\n}\n\n/* Holiday Chip - Absolute Position */\n/* DUPLICATE REMOVED - Using stronger definition below */\n\n/* DUPLICATE REMOVED - Using stronger definition below */\n\n/* Community Section Layout - Exact Specs */\n#clean-root #community-container .community-split {\n    display",
    "value": "flex",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n#clean-root #community-container .now-playing video {\n    width",
    "value": "100%",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n    font-size",
    "value": "14px",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n/* Community section layout constraints */\n#clean-root .community-split {\n    display",
    "value": "flex",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n#clean-root .clean-group {\n    background",
    "value": "var(--surface)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n#clean-root .home-preview-row {\n    background",
    "value": "rgba(0,0,0,0.05)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n}\n\n#clean-root .card {\n    background",
    "value": "var(--surface)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "border);\n    color",
    "value": "var(--fg)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "surface);\n    border-color",
    "value": "var(--border)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n#clean-root .game-card {\n    background",
    "value": "var(--surface)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n}\n\n/* Ensure proper contrast for accessibility */\n#clean-root .title,\n#clean-root .group-title,\n#clean-root .home-preview-row h3 {\n    color",
    "value": "var(--fg)",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n}\n\n/* CardCW Component Styles */\n#clean-root .card-cw .poster-container {\n    width",
    "value": "100%",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "fg);\n    text-align",
    "value": "center",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent-hover);\n}\n\n#clean-root .card-cw .holiday-chip {\n    position",
    "value": "absolute",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "accent, #ff4c8d);\n    color",
    "value": "white",
    "file": "styles\\home-clean.css",
    "context": "standalone"
  },
  {
    "token": "home-gutter",
    "value": "32px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "home-min-height",
    "value": "400px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "rail-col-w",
    "value": "180px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "rail-col-w-sm",
    "value": "200px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "rail-gap",
    "value": "16px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "bp-xs",
    "value": "480px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "bp-sm",
    "value": "640px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "bp-md",
    "value": "768px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "bp-lg",
    "value": "1024px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "bp-xl",
    "value": "1280px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "rail-col-w-nextup",
    "value": "200px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "rail-col-w-curated",
    "value": "200px",
    "file": "styles\\home-layout.css",
    "context": "root"
  },
  {
    "token": "home-gutter, --rail-col-w, etc.)\n * 4. Follow the established pattern",
    "value": "Frame â†’ Panels â†’ Rails â†’ Cards â†’ Actions\n * \n * FORBIDDEN: Adding home layout rules to main.css, components.css, or mobile.css\n * \n * If you need to modify home layout:\n * 1. Edit this file ONLY\n * 2. Use proper CSS specificity\n * 3. Test that no other file conflicts\n * 4. Update this comment if architecture changes\n */\n\n/* === DESIGN TOKENS === */\n:root {\n  /* Frame gutters */\n  --home-gutter: 16px",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "home-min-height); /* Prevent layout shift during loading */\n}\n\n/* Smooth section appearance */\n#homeSection .section {\n  transition",
    "value": "opacity 0.2s ease-in-out",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "home-gutter, 32px);\n  padding-right",
    "value": "var(--home-gutter, 32px)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w);\n  gap",
    "value": "var(--rail-gap)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w, 224px);\n  gap",
    "value": "var(--rail-gap, 12px)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "bp-md)) {",
    "value": "is(#group-1-your-shows,\n      #group-2-community,\n      #group-3-for-you)\n    :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll, .curated-row) {\n    grid-auto-columns: var(--rail-col-w-sm)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "game {\n  max-height",
    "value": "220px",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "home-gutter);\n  padding-right",
    "value": "var(--home-gutter)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w);\n}\n\n/* Specific card sizing based on design specs */\n#homeSection .card.v2-home-cw {\n  width",
    "value": "var(--rail-col-w)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w);\n  max-width",
    "value": "var(--rail-col-w)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w-nextup);\n  min-width",
    "value": "var(--rail-col-w-nextup)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w-nextup);\n}\n\n#homeSection .curated-card.v2-home-curated {\n  width",
    "value": "var(--rail-col-w-curated)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w-curated);\n  max-width",
    "value": "var(--rail-col-w-curated)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border",
    "value": "1px solid var(--line)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "shadow);\n  padding",
    "value": "12px",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "muted);\n  font-size",
    "value": "12px",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "btn);\n  border",
    "value": "1px solid var(--line)",
    "file": "styles\\home-layout.css",
    "context": "standalone"
  },
  {
    "token": "card-w",
    "value": "200px",
    "file": "styles\\home-rails-fix.css",
    "context": "root"
  },
  {
    "token": "home-frame-gutter",
    "value": "32px",
    "file": "styles\\home.css",
    "context": "root"
  },
  {
    "token": "safe-gutter);\n  padding-block",
    "value": "var(--section-gap)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "space-xs) 0; /* H1.1",
    "value": "No gap above, minimal below */\n  padding: var(--space-sm) var(--space-md)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "space-sm);\n  background-color",
    "value": "var(--bg-elevated, #f8f9fa)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "border, #ddd);\n  display",
    "value": "block",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "card-w);\n  min-width",
    "value": "var(--card-w)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "card-w);\n}\n.preview-card-poster,\n.unified-card-poster {\n  height",
    "value": "var(--card-h)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "row-gap);\n  align-items",
    "value": "start",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "bp-tablet)) {\n  .community-content { grid-template-columns",
    "value": "1fr",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "row-gap);\n}\n\n/* H1",
    "value": "Kill legacy width hacks on columns left by old CSS (scoped to home) */\n.home-content .left-column,\n.home-content .flickword-card {\n  width: auto",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "section-gap); }\n#quote-bar, .quote-bar { margin",
    "value": "0 0 var(--section-gap-lg)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "header-h, 120px); /* Stick below header */\n  z-index",
    "value": "1000",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff);\n  border-bottom",
    "value": "1px solid var(--border, #ddd)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "border, #ddd);\n  padding",
    "value": "8px 4px",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "border, #ddd);\n  border-bottom-color",
    "value": "var(--primary, #2563eb)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "bg-elevated, #fff);\n  color",
    "value": "var(--text, #111)",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "bg-elevated,#fff) 90%, #000 10% / 6%); }\n\n/* H1.1",
    "value": "Duplicate up-arrow: keep #scrollTopBtn, hide/remove any legacy arrow */\n/* Common legacy selectors to neutralize",
    "file": "styles\\home.css",
    "context": "standalone"
  },
  {
    "token": "bg",
    "value": "#ffffff",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "text",
    "value": "#1f2937",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fg",
    "value": "#1f2937",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fg-default",
    "value": "#1f2937",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fg-muted",
    "value": "#6b7280",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fg-subtle",
    "value": "#7f8c8d",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fg-on-elevated",
    "value": "#111827",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "text-secondary",
    "value": "#666",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "card",
    "value": "#ffffff",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "border",
    "value": "#e5e7eb",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "stack",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "stack-sm",
    "value": "12px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "container-max",
    "value": "1200px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "container-pad",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fab-gap",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "fab-size",
    "value": "56px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "accent",
    "value": "#2563eb",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "primary",
    "value": "#e91e63",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "surface",
    "value": "#f9f9f9",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "bg-page",
    "value": "#ffffff",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "bg-elevated",
    "value": "#f7f7f9",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "header-h",
    "value": "120px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "tabs-h",
    "value": "48px",
    "file": "styles\\main.css",
    "context": "root"
  },
  {
    "token": "visible {\r\n  opacity",
    "value": "1",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "success {\r\n  border-color",
    "value": "#10b981",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "error {\r\n  border-color",
    "value": "#ef4444",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "warning {\r\n  border-color",
    "value": "#f59e0b",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "info {\r\n  border-color",
    "value": "#3b82f6",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\r\n  font-style",
    "value": "italic",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  border-radius",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* Modal Utility Styles */\r\n.modal-backdrop {\r\n  position",
    "value": "fixed",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "google {\r\n  background",
    "value": "#4285f4",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "google",
    "value": "hover {\r\n  background: #3367d6",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "apple {\r\n  background",
    "value": "#000",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "apple",
    "value": "hover {\r\n  background: #333",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "email {\r\n  background",
    "value": "#f5f5f5",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "email",
    "value": "hover {\r\n  background: #e8e8e8",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary {\r\n  background",
    "value": "#1976d2",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "cancel {\r\n  background",
    "value": "#f5f5f5",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "cancel",
    "value": "hover {\r\n  background: #e8e8e8",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "danger {\r\n  background",
    "value": "#dc2626",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "danger",
    "value": "hover {\r\n  background: #b91c1c",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\r\n  .auth-modal-content,\r\n  .signout-modal {\r\n    margin",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-font-size) ;\r\n  background-color",
    "value": "var(--badge-bg)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-color) ;\r\n  padding",
    "value": "var(--badge-padding)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-border-radius) ;\r\n  margin-left",
    "value": "var(--badge-margin-left)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-font-weight) ;\r\n  min-width",
    "value": "var(--badge-min-width)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-line-height) ;\r\n  position",
    "value": "relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "badge-z-index) ;\r\n}\r\n\r\n.tab-badge--hidden {\r\n  display",
    "value": "none",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "visible {\r\n  display",
    "value": "inline-block",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  /* Home group layout moved to home-layout.css */\r\n\r\n  .feedback-actions {\r\n    flex-direction",
    "value": "column",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "body-height);\r\n}\r\n\r\nbody {\r\n  font-family",
    "value": "Inter,\r\n    system-ui,\r\n    -apple-system,\r\n    'Segoe UI',\r\n    Roboto,\r\n    Arial,\r\n    sans-serif",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  line-height",
    "value": "1.5",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "app-root-min-height);\r\n  overflow-x",
    "value": "var(--app-root-overflow-x)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "app-root-overflow-y);\r\n  /* Reserve space so content isn't covered by floating buttons */\r\n  padding-bottom",
    "value": "calc(env(safe-area-inset-bottom) + 120px)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "s-4",
    "value": "1rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "r-2",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fs-0",
    "value": "1rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "shadow-1",
    "value": "0 2px 4px rgba(0, 0, 0, 0.3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg);\r\n  box-shadow",
    "value": "0 8px 32px rgba(0, 0, 0, 0.3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg);\r\n  border-color",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* Dark mode tab styling */\r\n.dark-mode .tab {\r\n  color",
    "value": "var(--text-muted)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n.dark-mode .tab.is-active {\r\n  background",
    "value": "transparent",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n  border-bottom-color",
    "value": "var(--primary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n.dark-mode .preview-row-header h3 {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n  background",
    "value": "rgba(255, 255, 255, 0.2)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\r\n}\r\n\r\n/* COMPREHENSIVE GLOBAL DARK MODE THEME */\r\n/* Universal text color inheritance - fixes ALL text readability issues */\r\n.dark-mode * {\r\n  color",
    "value": "inherit",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "header-h);\r\n  z-index",
    "value": "100",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n/* Secondary text elements */\r\n.dark-mode .text-secondary,\r\n.dark-mode .subtitle,\r\n.dark-mode .description,\r\n.dark-mode .meta,\r\n.dark-mode .caption {\r\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card) ;\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n/* COMPREHENSIVE OVERRIDE - Force all elements to use theme colors */\r\n.dark-mode [style*='color'] {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card) ;\r\n}\r\n\r\n/* Specific overrides for common problematic elements */\r\n.dark-mode .loading,\r\n.dark-mode .error,\r\n.dark-mode .success,\r\n.dark-mode .info,\r\n.dark-mode .warning {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border) ;\r\n}\r\n\r\n/* Links and interactive elements */\r\n.dark-mode a {\r\n  color",
    "value": "var(--accent)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n/* Movie card content - specific overrides for visible elements */\r\n.dark-mode .movie-card,\r\n.dark-mode .show-card,\r\n.dark-mode .card-content,\r\n.dark-mode .card-description,\r\n.dark-mode .card-title,\r\n.dark-mode .card-meta {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\r\n}\r\n\r\n/* Theater section specific styling */\r\n.dark-mode .theaters-near-me,\r\n.dark-mode .theater-section,\r\n.dark-mode .theater-content {\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n.dark-mode .theater-description {\r\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\r\n}\r\n\r\n.dark-mode .show-overview {\r\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n/* Additional title classes that might be used */\r\n.dark-mode .card__title,\r\n.dark-mode .card-title,\r\n.dark-mode .show-title,\r\n.dark-mode .preview-card-title {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n.dark-mode .movie-rating {\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\r\n}\r\n\r\n.dark-mode .search-input,\r\n.dark-mode .genre-filter {\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  border-color",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.dark-mode .flickword-card {\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n.dark-mode .list-container {\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* MP-2.1",
    "value": "fence legacy card rules to desktop to avoid mobile collisions */\r\n@media (min-width: calc(var(--bp-mobile) + 1px)) {\r\n  .dark-mode .show-card {\r\n    background: var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  }\r\n}\r\n\r\n.mardi .header {\r\n  border-color",
    "value": "var(--mardi3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3)) ;\r\n}\r\n\r\n.mardi .tab {\r\n  background",
    "value": "linear-gradient(45deg, var(--mardi1), var(--mardi3))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi2)) ;\r\n}\r\n\r\n/* Mardi Gras Settings Tabs Styling */\r\n.mardi .settings-tabs button {\r\n  background",
    "value": "linear-gradient(45deg, var(--mardi1), var(--mardi3))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi2) ;\r\n  font-weight",
    "value": "bold",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi3), var(--mardi1)) ;\r\n  transform",
    "value": "scale(1.05)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi2), var(--mardi1)) ;\r\n  border-color",
    "value": "var(--mardi3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi3) ;\r\n}\r\n\r\n/* Mardi Gras Settings Sections */\r\n.mardi .settings-section {\r\n  background",
    "value": "linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi2) ;\r\n  border-radius",
    "value": "10px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3)) ;\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi3) ;\r\n}\r\n\r\n/* Mardi Gras Cards */\r\n.mardi .card {\r\n  background",
    "value": "linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi3) ;\r\n  box-shadow",
    "value": "0 4px 8px rgba(0, 0, 0, 0.3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi1), var(--mardi3)) ;\r\n  -webkit-background-clip",
    "value": "text",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi1) ;\r\n  font-weight",
    "value": "bold",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi2) ;\r\n  background",
    "value": "linear-gradient(135deg, rgba(106, 13, 173, 0.05), rgba(40, 167, 69, 0.05))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "mardi3) ;\r\n  background",
    "value": "linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1))",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "page-max, 1200px);\r\n  margin",
    "value": "0 auto",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg);\r\n  border-radius",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary);\r\n  font-weight",
    "value": "800",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  font-weight",
    "value": "700",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* Currently Watching Preview Row Styles - MOVED to home-layout.css */\r\n/* Layout rules now handled by token-driven system */\r\n\r\n.preview-row-header {\r\n  margin-bottom",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  font-weight",
    "value": "400",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w); /* H1 - using unified card sizing */\r\n  background",
    "value": "var(--bg)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  overflow",
    "value": "hidden",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w) ;\r\n}\r\n\r\n.preview-card",
    "value": "hover {\r\n  transform: translateY(-2px)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w); /* H1 - using unified card sizing */\r\n  height",
    "value": "var(--card-h)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  position",
    "value": "relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n.preview-card-content {\r\n  padding",
    "value": "4px 6px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  margin",
    "value": "0 0 1px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  margin",
    "value": "0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "success);\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* === UNIFIED CARD SYSTEM ===\r\n   Unified card component for Home and Curated sections\r\n   Desktop",
    "value": "184px width, 276px height (2:3 aspect ratio)\r\n   Mobile: 64px width, 96px height (2:3 aspect ratio)\r\n   Features: 3 large labeled buttons, skeleton loader, branded placeholder\r\n*/\r\n\r\n/* Unified Card Base Styles */\r\n.unified-card {\r\n  flex: 0 0 var(--card-w)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w) ;\r\n}\r\n\r\n/* Detail variant for tabs - horizontal layout */\r\n.unified-card--detail {\r\n  flex-direction",
    "value": "row",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-poster {\r\n  width",
    "value": "120px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  z-index",
    "value": "2",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-actions {\r\n  position",
    "value": "static",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  border",
    "value": "none",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-content {\r\n  flex",
    "value": "1",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-title {\r\n  font-size",
    "value": "18px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "accent);\r\n  text-align",
    "value": "center",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  border-radius",
    "value": "4px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg);\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "pro {\r\n  background",
    "value": "linear-gradient(135deg, #ff6b6b, #ff8e8e)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "pro",
    "value": "hover {\r\n  background: linear-gradient(135deg, #ff5252, #ff7979)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  font-size",
    "value": "1.2rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  cursor",
    "value": "pointer",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.episode-modal-body {\r\n  padding",
    "value": "20px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.episode-select {\r\n  width",
    "value": "100%",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "secondary {\r\n  background",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.episode-btn--secondary",
    "value": "hover {\r\n  background: var(--text-secondary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary);\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary-dark);\r\n  transform",
    "value": "translateY(-2px)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .back-to-top {\r\n    bottom",
    "value": "15px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary);\r\n  background",
    "value": "rgba(var(--primary-rgb), 0.1)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .unified-card {\r\n    width",
    "value": "var(--card-w-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w-mobile); /* H1 - using unified mobile card sizing */\r\n    min-width",
    "value": "var(--card-w-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w-mobile); /* H1 - using unified mobile card sizing */\r\n    height",
    "value": "var(--card-h-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail {\r\n    flex-direction",
    "value": "column",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-poster {\r\n    width",
    "value": "80px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-content {\r\n    padding",
    "value": "12px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-title {\r\n    font-size",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "detail .unified-card-actions {\r\n    justify-content",
    "value": "center",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  border-color",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n.dark-mode .unified-card-poster-placeholder {\r\n  background",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.dark-mode .unified-card-action-btn",
    "value": "hover {\r\n  background: rgba(255, 255, 255, 1)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n/* Scroll indicators for horizontal carousels */\r\n.preview-row-scroll {\r\n  position",
    "value": "relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg) 0%, transparent 100%);\r\n  pointer-events",
    "value": "none",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  cursor",
    "value": "pointer",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary);\r\n}\r\n\r\n.scroll-dot",
    "value": "hover {\r\n  background: var(--accent)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "tab-card-poster-width-desktop) ;\r\n  height",
    "value": "var(--tab-card-poster-height-desktop)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n}\r\n\r\n/* Tab card meta information */\r\n.tab-section .list-container .poster-card .poster-card__meta {\r\n  font-size",
    "value": "14px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\r\n  margin",
    "value": "0 0 12px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border) ;\r\n  background",
    "value": "var(--surface)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text) ;\r\n  cursor",
    "value": "pointer",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary) ;\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary) ;\r\n}\r\n\r\n/* Tab card overflow button */\r\n.tab-section .list-container .poster-card .poster-card__overflow-btn {\r\n  padding",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary) ;\r\n}\r\n\r\n/* Mobile layout - vertical cards */\r\n@media (max-width",
    "value": "var(--bp-mobile-lg)) {\r\n  .tab-section .list-container {\r\n    flex-direction: column",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "tab-card-poster-width-mobile) ;\r\n    height",
    "value": "var(--tab-card-poster-height-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-w) ; /* Standard home page card width */\r\n  height",
    "value": "var(--home-card-height-desktop)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .preview-card {\r\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile) ;\r\n  }\r\n\r\n  .preview-card-poster {\r\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-height-mobile) ; /* Using home card height mobile */\r\n  }\r\n\r\n  .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner > * {\r\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile) ;\r\n    min-width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile) ; /* Standard home page card width mobile */\r\n    height",
    "value": "var(--home-card-height-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-height-desktop); /* Standard home page card height */\r\n  border-radius",
    "value": "6px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  white-space",
    "value": "nowrap",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  #up-next-row .row-inner > * {\r\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile);\r\n    min-width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile); /* Standard home page card width mobile */\r\n    height",
    "value": "var(--home-card-height-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "surface-2, #111); /* fallback token */\r\n}\r\n#spotlight-row .spotlight-video iframe,\r\n#spotlight-row .spotlight-video .thumb {\r\n  width",
    "value": "100%",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n#spotlight-row .spotlight-credit {\r\n  font-size",
    "value": "0.9rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\r\n}\r\n#spotlight-row .spotlight-desc {\r\n  font-size",
    "value": "0.9rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  margin-bottom",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "surface-3, #222);\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n  padding",
    "value": "12px 24px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary-dark, #c2185b);\r\n  border-color",
    "value": "var(--primary-dark, #c2185b)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  #spotlight-row .spotlight-grid {\r\n    grid-template-columns",
    "value": "1fr",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "surface-2, #f8f9fa);\r\n  border",
    "value": "1px solid var(--border, #dee2e6)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n}\r\n\r\n#feedback-row .feedback-icon {\r\n  font-size",
    "value": "20px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  margin-bottom",
    "value": "2px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\r\n  line-height",
    "value": "1.3",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  #feedback-row .feedback-card {\r\n    grid-template-columns",
    "value": "32px 1fr auto",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile) + 1px)) {\r\n  .header-bar {\r\n    display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\r\n  .header-bar {\r\n    display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "sm {\r\n  font-size",
    "value": "0.9rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary, #666);\r\n  text-align",
    "value": "center",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "muted);\r\n}\r\n\r\n.placeholder-content h3 {\r\n  margin",
    "value": "0 0 8px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.placeholder-content p {\r\n  margin",
    "value": "0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  font-style",
    "value": "italic",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  cursor",
    "value": "pointer",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "accent);\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "muted);\r\n}\r\n\r\n/* Ensure trivia content fits in container */\r\n#triviaTile {\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card) 0%, rgba(255, 255, 255, 0.05) 100%);\r\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "accent) 0%, rgba(255, 255, 255, 0.1) 100%);\r\n  transform",
    "value": "translateY(-2px)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  margin-bottom",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.teaser-play-btn {\r\n  background",
    "value": "var(--accent)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "accent);\r\n}\r\n\r\n/* FlickWord Modal Styles */\r\n.flickword-modal {\r\n  max-width",
    "value": "90vw",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg);\r\n  overflow",
    "value": "hidden",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.fw-stats {\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.fw-grid {\r\n  display",
    "value": "grid",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card);\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "success);\r\n}\r\n\r\n.fw-tile.present {\r\n  background",
    "value": "var(--warning)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  color",
    "value": "white",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.fw-keyboard {\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  min-width",
    "value": "16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "success);\r\n}\r\n\r\n.fw-key.present {\r\n  background",
    "value": "var(--warning)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.fw-key-back,\r\n.fw-key-enter {\r\n  min-width",
    "value": "24px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n  border-radius",
    "value": "3px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "danger);\r\n  color",
    "value": "var(--danger)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-tablet)) {\r\n  .community-content {\r\n    flex-direction",
    "value": "column",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  transition",
    "value": "all 0.2s ease",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  opacity",
    "value": "0.6",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n  font-size",
    "value": "13px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.stats-summary {\r\n  display",
    "value": "flex",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  margin-top",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .community-content {\r\n    flex-direction",
    "value": "column",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary);\r\n  display",
    "value": "inline-block",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  margin",
    "value": "16px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg) + 1px)) {\r\n  /* Home group layout moved to home-layout.css */\r\n\r\n  .group-divider {\r\n    margin",
    "value": "8px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  /* Home group layout moved to home-layout.css */\r\n\r\n  .group-title {\r\n    font-size",
    "value": "1.3rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n#up-next-row .preview-card-poster {\r\n  width",
    "value": "var(--card-w)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-height-desktop) ;\r\n  border-radius",
    "value": "6px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  #up-next-row .preview-card {\r\n    width",
    "value": "var(--home-card-width-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "home-card-width-mobile) ;\r\n    height",
    "value": "var(--home-card-height-mobile)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "- GAME TEASER COLUMN LAYOUT --- */\r\n.home-games {\r\n  display",
    "value": "contents",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-bg, #fff);\r\n  box-shadow",
    "value": "0 1px 2px rgba(0, 0, 0, 0.06)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-bd, #eaeaea);\r\n  cursor",
    "value": "pointer",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "brand-200, #d7e3ff);\r\n}\r\n.gc-bg {\r\n  position",
    "value": "absolute",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "muted, #6b7280);\r\n}\r\n\r\n/* Stats row fills middle section */\r\n.gc-stats {\r\n  flex",
    "value": "1",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "muted, #6b7280);\r\n}\r\n.gc-stat-val {\r\n  font-weight",
    "value": "700",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "- Teaser cards",
    "value": "compact CTA, consistent placement --- */\r\n.home-games .game-card {\r\n  position: relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "brand-500, #5a88ff), var(--brand-600, #3b6cff));\r\n  color",
    "value": "#fff",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .flickword-hero-image,\r\n  .flickword-hero-placeholder {\r\n    max-width",
    "value": "150px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-muted, #6b7280);\r\n  text-transform",
    "value": "uppercase",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-primary, #1f2937);\r\n  line-height",
    "value": "1",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\r\n  #flickwordTile .game-stats {\r\n    grid-template-columns",
    "value": "repeat(2, 1fr)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "- Modal",
    "value": "make dialog a flexible column and the body fill the rest --- */\r\n.game-modal .gm-dialog {\r\n  width: min(1200px, 96vw)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg, #ffffff);\r\n  box-shadow",
    "value": "0 20px 40px rgba(0, 0, 0, 0.3)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "card-bd, #eaeaea);\r\n}\r\n\r\n.game-modal .gm-header h3 {\r\n  font-size",
    "value": "1.5rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text, #1f2937);\r\n}\r\n\r\n.game-modal .gm-close {\r\n  position",
    "value": "relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg)) {\r\n  .home-games {\r\n    gap",
    "value": "12px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile)) {\r\n  .game-modal {\r\n    padding",
    "value": "0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text);\r\n}\r\n\r\n.dark-mode .gc-tagline {\r\n  color",
    "value": "var(--text-secondary)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n.dark-mode .gm-dialog {\r\n  background",
    "value": "var(--card)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n  color",
    "value": "var(--text)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border);\r\n}\r\n\r\n.dark-mode .gm-placeholder {\r\n  border-color",
    "value": "var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary);\r\n}\r\n\r\n/* --- Tabs > Search layering fix (policy-safe, no sticky edits) --- */\r\nhtml,\r\nbody {\r\n  /* prevent global overflow from creating unwanted stacking contexts */\r\n  overflow",
    "value": "visible",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "- end Tabs > Search layering fix --- */\r\n\r\n/* Theme tokens moved to design-tokens.css */\r\n\r\n/* Base usage */\r\nbody {\r\n  background",
    "value": "var(--bg-page)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-default);\r\n}\r\n\r\n/* Utilities + small components (token-based) */\r\n.u-fg {\r\n  color",
    "value": "var(--fg-default)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg-elevated);\r\n}\r\n.u-fg-on {\r\n  color",
    "value": "var(--fg-on-elevated)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-subtle);\r\n}\r\n\r\n.tab-version {\r\n  font-size",
    "value": "8px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-subtle);\r\n  opacity",
    "value": "0.7",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-muted);\r\n}\r\n.card-surface {\r\n  /* replaces inline background/border token usage */\r\n  padding",
    "value": "10px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg-elevated);\r\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text, #333) on h5 etc. */\r\n  margin",
    "value": "10px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-default);\r\n}\r\n/* Tabs/results already layered earlier â€” leave as-is */\r\n\r\n/* Auth visibility utility */\r\n[hidden] {\r\n  display",
    "value": "none",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-primary, #000);\r\n  font-size",
    "value": "0.875rem",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg-elevated);\r\n  color",
    "value": "var(--fg-on-elevated)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg-default);\r\n  font-weight",
    "value": "600",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg-page);\r\n}\r\n\r\n/* Layout Shell - Option A",
    "value": "Co-located tabs and panels */\r\n:root {\r\n  /* Use existing tokens if available",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "body-height);\r\n}\r\n#appRoot {\r\n  height",
    "value": "auto",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fab-size, 56px) + var(--fab-gap, 16px)); /* Reserve space for fixed FAB dock */\r\n}\r\n\r\n/* Header sticks at top - force it to stay on top */\r\n#appRoot > header.header {\r\n  position",
    "value": "static",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg, #ffffff); /* Ensure solid background */\r\n  border-bottom",
    "value": "none",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "header-h, 120px); /* Stick below header */\r\n  z-index",
    "value": "1000",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg, #ffffff); /* Ensure solid background */\r\n  padding",
    "value": "16px 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border, #e5e7eb); /* Visual separation */\r\n}\r\n\r\n/* Search row within search container - no need for sticky since container is sticky */\r\n#desktop-search-row,\r\n.search-row {\r\n  position",
    "value": "relative",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "header-h, 120px) + 80px); /* Below header + search bar + margin */\r\n  z-index",
    "value": "800",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "tabs-h);\r\n  background",
    "value": "var(--bg)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "border); /* Visual separation */\r\n}\r\n\r\n/* Panels fill the rest; let window/body be the scroller so sticky works */\r\n#appRoot > .panels {\r\n  flex",
    "value": "1 1 auto",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "content-overflow); /* IMPORTANT",
    "value": "sticky parents must not be overflow:auto */\r\n  padding: 12px 16px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg, #ffffff);\r\n  border",
    "value": "1px solid var(--border, #e5e7eb)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "r-2, 8px);\r\n  padding",
    "value": "var(--spacing-md, 12px) var(--spacing-lg, 16px)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "spacing-lg, 16px) 0 var(--spacing-sm, 8px) 0;\r\n  text-align",
    "value": "center",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg, #1f2937);\r\n  min-height",
    "value": "40px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fs-0, 1rem);\r\n  font-weight",
    "value": "normal",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fg, #1f2937);\r\n  font-size",
    "value": "var(--fs-0, 1rem)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "font-weight-normal, normal);\r\n  font-style",
    "value": "italic",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "bg, #ffffff); /* Ensure solid background */\r\n}\r\n\r\n.tab-section",
    "value": "not([hidden]) > *:first-child {\r\n  margin-top: 0",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fab-gap);\r\n  width",
    "value": "min(var(--container-max), 100%)",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "container-pad);\r\n  z-index",
    "value": "50",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "fab-gap, 12px);\r\n  align-items",
    "value": "flex-end",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "primary, #2563eb);\r\n  outline-offset",
    "value": "2px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "text, #333);\r\n  font-size",
    "value": "24px",
    "file": "styles\\main.css",
    "context": "standalone"
  },
  {
    "token": "safe-top",
    "value": "env(safe-area-inset-top)",
    "file": "styles\\mobile-hotfix.css",
    "context": "root"
  },
  {
    "token": "safe-bottom",
    "value": "env(safe-area-inset-bottom)",
    "file": "styles\\mobile-hotfix.css",
    "context": "root"
  },
  {
    "token": "safe-top);\n  padding-bottom",
    "value": "var(--safe-bottom)",
    "file": "styles\\mobile-hotfix.css",
    "context": "standalone"
  },
  {
    "token": "safe-top) + 0px);\n  z-index",
    "value": "1000",
    "file": "styles\\mobile-hotfix.css",
    "context": "standalone"
  },
  {
    "token": "safe-top) + 64px);\n}\n\n/* FABs not under the iOS home bar */\n.fab,\n.fab-left,\n.fab-stack {\n  bottom",
    "value": "calc(16px + var(--safe-bottom))",
    "file": "styles\\mobile-hotfix.css",
    "context": "standalone"
  },
  {
    "token": "bg);\n  }\n\n  /* Mobile search tips - prevent wrapping and overlap */\n  .top-search .search-help {\n    position",
    "value": "relative",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile); /* Using centralized mobile poster width */\n    height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "text-secondary) ;\n    margin",
    "value": "2px 0",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "primary) ;\n    color",
    "value": "white",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "poster-w",
    "value": "var(--poster-w-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "poster-h",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-gap",
    "value": "var(--card-gap-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-pad-y",
    "value": "var(--card-pad-y-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-pad-x",
    "value": "var(--card-pad-x-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "meta-title-size",
    "value": "var(--meta-title-size-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "meta-line",
    "value": "var(--meta-line-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile) 1fr ;\n    gap",
    "value": "var(--card-gap-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-pad-y-mobile) var(--card-pad-x-mobile) ;\n    background",
    "value": "var(--card-bg)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-border);\n    width",
    "value": "100%",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-radius);\n    align-items",
    "value": "start",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-shadow);\n    min-height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "meta-title-size-mobile);\n    line-height",
    "value": "var(--meta-line-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n  }\n\n  .show-card .show-meta {\n    font-size",
    "value": "13px",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "color-text-secondary, #666);\n    margin",
    "value": "0 0 6px",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n  }\n\n  /* UNIFIED",
    "value": "Mobile details layout with actions at bottom */\n  .mobile-v1 .show-card .show-details {\n    display: grid",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "poster-w-mobile);\n    height",
    "value": "var(--poster-h-mobile)",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "card-radius);\n    display",
    "value": "block",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "color-text, #121212);\n  }\n\n  .mobile-v1 .show-card .show-meta {\n    font-size",
    "value": "13px",
    "file": "styles\\mobile.css",
    "context": "standalone"
  },
  {
    "token": "visible {\r\n  opacity",
    "value": "1",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "visible .modal {\r\n  transform",
    "value": "scale(1) translateY(0)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "border, #dedee3);\r\n  background",
    "value": "var(--surface, #f9f9f9)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  white-space",
    "value": "nowrap",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "muted, #999);\r\n  cursor",
    "value": "pointer",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "surface, #f9f9f9);\r\n  color",
    "value": "var(--text, #121212)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "episode-guide {\r\n  max-width",
    "value": "600px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "border, #dedee3);\r\n  border-radius",
    "value": "6px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  min-width",
    "value": "150px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n  box-shadow",
    "value": "0 0 0 2px rgba(233, 30, 99, 0.2)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "muted, #999);\r\n  font-style",
    "value": "italic",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "danger, #f06292);\r\n}\r\n\r\n.episode-guide__episode {\r\n  display",
    "value": "grid",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "border, #dedee3);\r\n  transition",
    "value": "background-color 0.2s ease",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "surface, #f9f9f9);\r\n}\r\n\r\n.episode-guide__episode--watched {\r\n  background",
    "value": "var(--success-light, #d4edda)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "success, #51cf66);\r\n}\r\n\r\n.episode-guide__episode-number {\r\n  font-weight",
    "value": "600",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n  font-size",
    "value": "12px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "muted, #999);\r\n  text-align",
    "value": "center",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "accent, #ffd43b);\r\n  font-weight",
    "value": "600",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n}\r\n\r\n.episode-guide__episode-checkbox input[type='checkbox'] {\r\n  width",
    "value": "16px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n}\r\n\r\n.episode-guide__episode-label {\r\n  font-weight",
    "value": "500",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "notes {\r\n  max-width",
    "value": "500px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  margin-bottom",
    "value": "4px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  background",
    "value": "white",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "muted, #999);\r\n}\r\n\r\n/* === MOBILE RESPONSIVE === */\r\n@media (max-width",
    "value": "767px) {\r\n  .modal-backdrop {\r\n    padding: 10px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "loading .modal__body {\r\n  display",
    "value": "flex",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "loading .modal__body",
    "value": ":after {\r\n  content: ''",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "border, #dedee3);\r\n  border-top",
    "value": "3px solid var(--primary, #e91e63)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "visible .modal {\r\n    transform",
    "value": "none",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "text, #121212);\r\n  }\r\n\r\n  .modal__header {\r\n    border-bottom-width",
    "value": "2px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "watched {\r\n    border-left-width",
    "value": "6px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "primary, #e91e63);\r\n  outline-offset",
    "value": "2px",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "slide-up {\r\n  transform",
    "value": "translateY(100%)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "visible .modal--slide-up {\r\n  transform",
    "value": "translateY(0)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "slide-down {\r\n  transform",
    "value": "translateY(-100%)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "visible .modal--slide-down {\r\n  transform",
    "value": "translateY(0)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "fade-in {\r\n  transform",
    "value": "scale(1)",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "visible .modal--fade-in {\r\n  opacity",
    "value": "1",
    "file": "styles\\modals.css",
    "context": "standalone"
  },
  {
    "token": "space-xs",
    "value": "4px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-sm",
    "value": "8px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-md",
    "value": "12px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-lg",
    "value": "16px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-xl",
    "value": "20px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-2xl",
    "value": "24px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-3xl",
    "value": "32px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-4xl",
    "value": "40px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "space-5xl",
    "value": "48px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "container-gutter",
    "value": "var(--space-2xl)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "container-max-width",
    "value": "1200px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "section-gap",
    "value": "var(--mobile-section-gap)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "section-gap-lg",
    "value": "var(--space-3xl)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "row-gap",
    "value": "var(--mobile-row-gap)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-gap",
    "value": "var(--mobile-card-gap)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-padding",
    "value": "var(--space-md)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-padding-sm",
    "value": "var(--space-sm)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-padding-lg",
    "value": "var(--space-lg)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "button-padding",
    "value": "var(--space-sm) var(--space-md)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "input-padding",
    "value": "var(--space-sm) var(--space-md)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-w",
    "value": "var(--card-w-large)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-h",
    "value": "var(--card-h-large)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-w-mobile",
    "value": "140px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-h-mobile",
    "value": "210px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-w-desktop",
    "value": "200px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-h-desktop",
    "value": "300px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-w-large",
    "value": "220px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "card-h-large",
    "value": "330px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-w",
    "value": "var(--poster-w-desktop)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-h",
    "value": "var(--poster-h-desktop)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-w-mobile",
    "value": "80px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-h-mobile",
    "value": "120px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-w-desktop",
    "value": "140px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "poster-h-desktop",
    "value": "210px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "mobile-section-gap",
    "value": "var(--space-xl)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "mobile-row-gap",
    "value": "var(--space-md)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "mobile-card-gap",
    "value": "var(--space-xs)",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "body-height",
    "value": "auto",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "app-root-min-height",
    "value": "100vh",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "app-root-overflow-x",
    "value": "hidden",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "app-root-overflow-y",
    "value": "visible",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "content-overflow",
    "value": "visible",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "safe-gutter",
    "value": "max(var(--container-gutter), env(safe-area-inset-left))",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-mobile-xs",
    "value": "375px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-mobile-sm",
    "value": "480px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-mobile",
    "value": "640px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-mobile-lg",
    "value": "768px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-tablet",
    "value": "900px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-desktop",
    "value": "1200px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-desktop-lg",
    "value": "1440px",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "safe-gutter-right",
    "value": "max(var(--container-gutter), env(safe-area-inset-right))",
    "file": "styles\\spacing-system.css",
    "context": "root"
  },
  {
    "token": "bp-mobile-lg)) {",
    "value": "root {\n    --section-gap: var(--space-3xl)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "bp-desktop)) {",
    "value": "root {\n    --container-gutter: var(--space-2xl)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-xs); }\n.spacing-sm { margin",
    "value": "var(--space-sm)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-md); }\n.spacing-lg { margin",
    "value": "var(--space-lg)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-xl); }\n\n.padding-xs { padding",
    "value": "var(--space-xs)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-sm); }\n.padding-md { padding",
    "value": "var(--space-md)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-lg); }\n.padding-xl { padding",
    "value": "var(--space-xl)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "container-max-width);\n  margin-inline",
    "value": "auto",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "safe-gutter);\n}\n\n.section {\n  margin-bottom",
    "value": "var(--section-gap)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "row-gap);\n  margin-bottom",
    "value": "var(--space-lg)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "bp-mobile-lg) - 1px)) {",
    "value": "root {\n    --section-gap: var(--mobile-section-gap)",
    "file": "styles\\spacing-system.css",
    "context": "standalone"
  },
  {
    "token": "space-md);\r\n}\r\n\r\n.tab-content {\r\n  padding",
    "value": "var(--space-lg)",
    "file": "styles\\tabs-layout.css",
    "context": "standalone"
  },
  {
    "token": "border-radius);\r\n  background",
    "value": "var(--color-background)",
    "file": "styles\\tabs-layout.css",
    "context": "standalone"
  },
  {
    "token": "tab-accent",
    "value": "#0ea5e9",
    "file": "styles\\tabs.css",
    "context": "root"
  },
  {
    "token": "tab-text",
    "value": "#111827",
    "file": "styles\\tabs.css",
    "context": "root"
  },
  {
    "token": "tab-muted",
    "value": "#6b7280",
    "file": "styles\\tabs.css",
    "context": "root"
  },
  {
    "token": "tab-edge",
    "value": "#e5e7eb",
    "file": "styles\\tabs.css",
    "context": "root"
  },
  {
    "token": "badge-bg",
    "value": "#f3f4f6",
    "file": "styles\\tabs.css",
    "context": "root"
  },
  {
    "token": "tab-edge);\r\n  margin-top",
    "value": "0",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-edge);\r\n  border-radius",
    "value": ".6rem",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-text);\r\n  text-decoration",
    "value": "none",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-accent);\r\n  border-color",
    "value": "var(--tab-accent)",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "badge-bg);\r\n  color",
    "value": "var(--tab-muted)",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-edge);\r\n}\r\n\r\nnav#navigation.tabs .tab.is-active .badge {\r\n  background",
    "value": "rgba(255,255,255,.18)",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-text);\r\n}\r\n\r\n.dark-mode nav#navigation.tabs .tab",
    "value": "hover {\r\n  background: #fff",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "tab-text);\r\n}\r\n\r\n.dark-mode nav#navigation.tabs .tab.is-active {\r\n  background",
    "value": "var(--tab-accent)",
    "file": "styles\\tabs.css",
    "context": "standalone"
  },
  {
    "token": "color-primary",
    "value": "#ff4c8d",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "color-secondary",
    "value": "#1f2937",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "color-background",
    "value": "#ffffff",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "color-text",
    "value": "#1f2937",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "color-muted",
    "value": "#374151",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "space-xs",
    "value": "4px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "space-sm",
    "value": "8px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "space-md",
    "value": "16px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "space-lg",
    "value": "24px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "space-xl",
    "value": "32px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "container-padding",
    "value": "32px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "border-radius",
    "value": "8px",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "shadow-sm",
    "value": "0 1px 2px rgba(0, 0, 0, 0.1)",
    "file": "styles\\tokens.css",
    "context": "root"
  },
  {
    "token": "home-gutter",
    "value": "16px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "home-frame-gutter",
    "value": "32px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "rail-col-w",
    "value": "260px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "rail-col-w-sm",
    "value": "200px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "rail-gap",
    "value": "16px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "bp-xs",
    "value": "480px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "bp-sm",
    "value": "640px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "bp-md",
    "value": "768px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "bp-lg",
    "value": "1024px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "bp-xl",
    "value": "1280px",
    "file": "styles\\your-shows.css",
    "context": "root"
  },
  {
    "token": "home-gutter, 32px);\n  padding-right",
    "value": "var(--home-gutter, 32px)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w);\n  gap",
    "value": "var(--rail-gap)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "rail-col-w, 224px);\n  gap",
    "value": "var(--rail-gap, 12px)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bp-md)) {",
    "value": "is(#group-1-your-shows,\n      #group-2-community,\n      #group-3-for-you)\n    :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll) {\n    grid-auto-columns: var(--rail-col-w-sm)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "card);\n  border",
    "value": "1px solid var(--border)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "card-w);\n  min-width",
    "value": "var(--card-w)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "card-w);\n}\n\n.preview-card-poster,\n.unified-card-poster {\n  height",
    "value": "var(--card-h)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "section-gap); \n}\n\n#quote-bar, .quote-bar { \n  margin",
    "value": "0 0 var(--section-gap-lg)",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff), transparent);\n}\n\n#homeSection .preview-row-scroll",
    "value": ":after {\n  right: 0",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff), transparent);\n}\n\n/* RTL flip scroll indicators */\n[dir=\"rtl\"] #homeSection .preview-row-scroll",
    "value": ":before {\n  left: auto",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff), transparent);\n}\n\n[dir=\"rtl\"] #homeSection .preview-row-scroll",
    "value": ":after {\n  right: auto",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bg, #fff), transparent);\n}\n\n/* === DARK MODE ADJUSTMENTS === */\n/* Dark mode adjustments for preview row */\n#group-1-your-shows .dark-mode .home-preview-row {\n  background",
    "value": "none",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  },
  {
    "token": "bp-sm)) {\n  /* Preview row spacing for mobile */\n  #group-1-your-shows .home-preview-row {\n    margin",
    "value": "12px 0",
    "file": "styles\\your-shows.css",
    "context": "standalone"
  }
]
```

## migration-pack\ui\selectors-map.json
```
[
  {
    "selector": "#ffffff;\n  --text: #121212;\n  --primary: #e91e63;\n  --card: #f7f7f9;\n  --border: #dedee3;\n  --success: #51cf66;\n  --warning: #ffd43b;\n  --danger: #f06292;\n  --purple: #845ec2;\n  --mardi1: #6a0dad;\n  --mardi2: #28a745;\n  --mardi3: #ffd43b;\n  --focus: #1a73e8;\n}\n*",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#667eea 0%, #764ba2 100%);\n  margin: 0;\n  padding: 20px;\n  color: var(--text);\n  line-height: 1.5;\n  min-height: 100svh;\n  /* Ensure sticky positioning works */\n  overflow-y: visible;\n}\n.dark-mode",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#1a1a1a;\n  --text: #f5f5f5;\n  --card: #2a2a2a;\n  --border: #404040;\n  --text-secondary: #b0b0b0;\n  background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6b 100%) ;\n}\n\n/* REMOVED: Duplicate dark mode component styles - now consolidated in main.css */\n\n.mardi .header",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".mardi .tab",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".main-container",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".6s ease-out;\n}\n\n.header-center",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header-left",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  color: var(--primary);\n  font-weight: 800;\n  letter-spacing: 0.2px;\n}\n.subtitle",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".css */\n\n@keyframes tabContainerSlideIn",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab.is-active",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n}\n.tab-badge",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#fff;\n  color: var(--primary);\n  border-radius: 12px;\n  padding: 2px 8px;\n  font-size: 12px;\n  margin-left: 6px;\n}\n\n/* FlickWord Container Styling */\n.quote-flickword-container",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".9s ease-out 0.6s both;\n  justify-content: space-between ;\n  width: 100% ;\n}\n\n.left-column",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".quote-card",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  transition: all 0.3s ease;\n  opacity: 0.9;\n  width: 100%;\n}\n\n.quote-card:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".15);\n}\n\n.random-quote-card",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  transition: all 0.3s ease;\n  opacity: 0.9;\n  width: 100%;\n}\n\n.random-quote-card:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".15);\n}\n\n/* FlickWord Card Styling */\n.flickword-card",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".9;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.flickword-card:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".quote-content",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".quote-card,\n  .flickword-card",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".quote-title,\n  .flickword-title",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n  border-radius: 8px;\n  padding: 8px 16px;\n  font-weight: 600;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n  letter-spacing: 0.3px;\n  min-height: 44px;\n  min-width: 44px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.btn:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#737d8c, #57606f);\n}\n.btn.success",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#2ed573, #1dd1a1);\n}\n.btn.danger",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#f06292, #e91e63);\n}\n\n/* Notification animations */\n@keyframes notificationSlideIn",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".search-row .search-btn,\n  .search-row .clear-search-btn",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".css */\n.tab",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n.tab.is-active",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n  color: var(--primary);\n  border-radius: 12px;\n  padding: 2px 8px;\n  font-size: 12px;\n  margin-left: 6px;\n}\n\n.search-input",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#888;\n  font-size: 11px;\n  text-align: center;\n  padding: 6px 10px;\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 8px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  opacity: 0.8;\n  transition: opacity 0.2s ease;\n}\n\n.search-help:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".8);\n}\n\n.onboarding-hint:hover .tooltip,\n.keyboard-hint:hover .tooltip",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".15);\n  color: #9c27b0;\n  border-radius: 50%;\n  text-align: center;\n  line-height: 18px;\n  font-size: 12px;\n  font-weight: bold;\n  transition: all 0.2s ease;\n  border: 1px solid rgba(156, 39, 176, 0.2);\n}\n\n.keyboard-hint:hover::before",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".25);\n  transform: scale(1.1);\n  border-color: rgba(156, 39, 176, 0.4);\n}\n\nkbd",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 3px;\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);\n  color: #495057;\n  display: inline-block;\n  font-size: 0.85em;\n  font-weight: 700;\n  line-height: 1;\n  padding: 2px 4px;\n  white-space: nowrap;\n}\n\n.dark-mode kbd",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#495057;\n  border-color: #6c757d;\n  color: #f8f9fa;\n}\n\n/* Touch target optimization for mobile */\nbutton,\ninput[type='button'],\ninput[type='submit'],\ninput[type='reset'],\nselect,\n.clickable",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.tab::before",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".2), transparent);\n  transition: left 0.5s ease;\n}\n\n.tab:hover::before",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".15);\n}\n\n.tab.active",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".4s ease-out;\n}\n\n@keyframes tabActivate",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.btn:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".02);\n  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);\n  transition: all 0.2s ease;\n  border-color: var(--primary);\n}\n\n/* Enhanced genre filter focus */\n.genre-filter:focus",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".02);\n  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);\n  border-color: var(--primary);\n  transition: all 0.2s ease;\n}\n\n/* Smooth transitions for all form elements */\ninput,\nselect,\nbutton",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n/* Enhanced theme toggle button */\n.theme-toggle",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#f8f9fa, #e9ecef);\n  border: 2px solid #dee2e6;\n  color: #495057;\n  transition: all 0.3s ease;\n}\n\n.theme-toggle:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".05);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.theme-toggle:active",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#495057, #343a40);\n  border-color: #6c757d;\n  color: #f8f9fa;\n}\n\n.dark-mode .theme-toggle:hover",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".8rem;\n  color: var(--primary);\n  font-weight: 900;\n}\n.stat-label",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".95rem;\n  line-height: 1.45;\n  color: var(--text);\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  line-clamp: 3;\n  overflow: hidden;\n}\n.rating-container",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".85rem;\n  color: #666;\n  font-style: italic;\n}\n.like-btn,\n.dislike-btn",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#2ed573, #1dd1a1) ;\n  color: #fff ;\n  border-color: #1dd1a1 ;\n  box-shadow: 0 2px 4px rgba(46, 213, 115, 0.3) ;\n}\n.dislike-btn.active",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#ff4757, #ff3742) ;\n  color: #fff ;\n  border-color: #ff3742 ;\n  box-shadow: 0 2px 4px rgba(255, 71, 87, 0.3) ;\n}\n\n.series-pill",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".88rem;\n  border-radius: 16px;\n  color: #fff;\n  background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);\n  background-size: 400% 400%;\n  animation: rainbow 3s ease-in-out infinite;\n  border: 2px solid rgba(255, 255, 255, 0.85);\n}\n@keyframes rainbow",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": "#1f2937 ;\n  font-weight: 500 ;\n  font-size: 16px ;\n  box-shadow:\n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04) ;\n  max-width: 400px ;\n  min-width: 250px ;\n  word-wrap: break-word ;\n  text-align: center ;\n  cursor: default ;\n  display: block ;\n  animation: fadeInScale 0.3s ease-out ;\n  border: 1px solid #e5e7eb ;\n  background: #ffffff ;\n}\n\n.notification-message",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": "#ffffff ;\n  border-left: 4px solid #1976d2 ; /* Blue accent like sign-in modal */\n}\n\n.notification.error",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "id"
  },
  {
    "selector": ".9);\n    opacity: 0;\n  }\n}\n\n/* Floating buttons now handled by components.css */\n\n/* Tab visibility control */\n.tab[style*='display: none']",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".hidden class on tabs - show tab but hide text for mobile optimization */\n.tab.hidden",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab.hidden span,\n.tab.hidden .tab-badge",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab[style*='visibility: hidden']",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab-container .tab.hidden rules - now in components.css */\n\n/* Modal */\n.modal-backdrop",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".55);\n  display: none; /* Default to hidden */\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n}\n\n.modal-backdrop.active,\n.modal-backdrop[style*='display: flex'],\n.modal-backdrop[style*='display:block']",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".share-modal",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".85rem;\n  color: var(--text-secondary);\n}\n\n.select-all-controls",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".3);\n  position: relative;\n  overflow: visible;\n  box-sizing: border-box;\n  margin: auto;\n  text-align: center;\n}\n.modal h3",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal .modal-actions",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal .modal-body",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal input[type='text'],\n.modal .search-input",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal-content-wrapper",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".modal-instruction",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".8;\n}\n\n.modal-input",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".section-header",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".section-header h3",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".tab-section",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".feedback-card",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".9em;\n  color: var(--text-secondary);\n  text-align: center;\n  margin: 8px 0 16px 0;\n  font-style: italic;\n  opacity: 0.8;\n}\n\n.form-error",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".show-title,\n  .show-meta,\n  .rating-container,\n  .show-actions",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".poster-button",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".2) brightness(1.1);\n  color: #0066cc;\n  transform: scale(1.1);\n  text-shadow: 0 0 6px rgba(0, 102, 204, 0.6);\n  font-weight: bold;\n  font-size: 1.3rem;\n}\n\n.star-btn",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  color: #333;\n}\n\n/**\n       * Process: Tab-Search Spacing Fix\n       * Purpose: Reduces excessive spacing between search bar and tab navigation for compact, user-friendly layout\n       * Data Source: CSS margin and padding rules controlling tab container positioning\n       * Update Path: Modify margin-top values in .tab-container rules to adjust spacing\n       * Dependencies: .top-search element, .tab-container element, mobile responsive breakpoints\n       */\n\n/* Tab container layout moved to consolidated-layout.css */\n\n/* Header layout */\n.header-bar",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header-right",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header-right > *",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  color: var(--primary);\n  font-weight: 800;\n  letter-spacing: 0.2px;\n}\n\n.tagline",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header-bar",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".header-left,\n  .header-right",
    "file": "archive\\styles\\inline-style-01.css",
    "type": "class"
  },
  {
    "selector": ".top-search,\r\nheader.header",
    "file": "archive\\styles\\inline-style-02.css",
    "type": "class"
  },
  {
    "selector": "#appRoot */\r\n#appRoot.main-container",
    "file": "archive\\styles\\inline-style-02.css",
    "type": "id"
  },
  {
    "selector": ".community-content",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#community-player .c-card",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb;\n  border-radius: 16px;\n  overflow: hidden;\n  background: #fff;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);\n  outline: none;\n  contain: layout; /* CSS containment */\n  position: relative; /* Establish positioning context */\n}\n#community-player .c-card:focus",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".5);\n}\n#community-player .c-card header",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#community-player .c-card .title",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#community-player .c-card .subtitle",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#6b7280;\n  margin: 0;\n}\n#community-player .c-card .media img,\n#community-player .c-card .media video",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#community-player .c-card .media-container",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".25%; /* 16:9 aspect ratio */\n  overflow: hidden;\n  border-radius: 8px;\n}\n\n#community-player .c-card .media-container iframe",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#community-player .c-card .media",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#community-player .c-card .body",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".95rem;\n  color: #111827;\n}\n#community-player .c-card .poll .bar",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#f3f4f6;\n  border-radius: 8px;\n  overflow: hidden;\n}\n#community-player .c-card .poll .bar .meter",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#d1d5db;\n}\n#community-player .c-card .poll .bar .label,\n#community-player .c-card .poll .bar .pct",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".85rem;\n}\n#community-player .c-card footer",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#f3f4f6;\n}\n#community-player .c-card .byline",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#community-player .c-card .avatar",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb;\n}\n#community-player .c-card .wm",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".75rem;\n  color: #6b7280;\n  border: 1px solid #e5e7eb;\n  padding: 2px 6px;\n  border-radius: 9999px;\n}\n#community-player .c-card .actions .cta",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#111827;\n  text-decoration: none;\n  font-weight: 600;\n}\n#community-player .c-card .actions .cta.disabled",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#6b7280;\n}\n#community-player .c-card[data-watermark]:before",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".7rem;\n  background: #111827;\n  color: white;\n  border-radius: 9999px;\n}\n\n/* Community player card styling - keep white background */\n#community-player .c-card",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#ffffff !important;\n  border: 1px solid var(--border, #e5e7eb);\n  border-radius: 12px;\n  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.06));\n  color: #1f2937 !important;\n}\n\n/* Regular home cards - transparent background */\n.home-group .card",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community,\n#group-2-community .community-content,\n#group-2-community .community-left,\n#group-2-community .community-right,\n#group-2-community .community-player,\n#group-2-community #community-player",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#ffffff !important;\n  color: #1f2937 !important;\n}\n\n/* Override any dark mode styles for community sections */\n.dark-mode #group-2-community,\n.dark-mode #group-2-community .community-content,\n.dark-mode #group-2-community .community-left,\n.dark-mode #group-2-community .community-right,\n.dark-mode #group-2-community .community-player,\n.dark-mode #group-2-community #community-player",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#ffffff !important;\n  color: #1f2937 !important;\n}\n\n/* Fix section backgrounds only (not cards) */\n.home-group,\n.home-group .section,\n.home-group .preview-row-container",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": "#ffffff !important;\n  color: #1f2937 !important;\n}\n\n/* Keep cards with their proper backgrounds */\n.home-group .rail,\n.home-group .card",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".dark-mode .home-group,\n.dark-mode .home-group .section,\n.dark-mode .home-group .preview-row-container",
    "file": "css\\community-player.css",
    "type": "class"
  },
  {
    "selector": "#ffffff !important;\n  color: #1f2937 !important;\n}\n\n/* Keep cards transparent in dark mode too */\n.dark-mode .home-group .rail,\n.dark-mode .home-group .card",
    "file": "css\\community-player.css",
    "type": "id"
  },
  {
    "selector": ".js, settings-modal.js\r\n */\r\n\r\n/* Base variables (light defaults) */\r\n:root",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": "#ffffff;\r\n  --text: #121212;\r\n  --surface: #f6f7fb;\r\n  --card: #ffffff;\r\n  --border: #e6e8f0;\r\n  --accent: #6c5ce7; /* primary */\r\n  --accent-2: #00b894; /* secondary */\r\n  --link: #2962ff;\r\n  --btn-text: #ffffff;\r\n  --shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n/* Apply to body and descendants */\r\nbody",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": ".3s ease,\r\n    color 0.3s ease;\r\n}\r\n\r\n/* Dark theme overrides */\r\nbody[data-theme='dark']",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": "#0e0f13;\r\n  --text: #eef2ff;\r\n  --surface: #141720;\r\n  --card: #1a1f2b;\r\n  --border: #2a3142;\r\n  --accent: #7c83ff;\r\n  --accent-2: #00d1a0;\r\n  --link: #7aa2ff;\r\n  --btn-text: #0e0f13;\r\n  --shadow: 0 6px 24px rgba(0, 0, 0, 0.35);\r\n}\r\n\r\n/* Light theme - explicit definition */\r\nbody[data-theme='light']",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": "#ffffff;\r\n  --text: #121212;\r\n  --surface: #f6f7fb;\r\n  --card: #ffffff;\r\n  --border: #e6e8f0;\r\n  --accent: #6c5ce7;\r\n  --accent-2: #00b894;\r\n  --link: #2962ff;\r\n  --btn-text: #ffffff;\r\n  --shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n/* System theme - uses media query for actual values */\r\nbody[data-theme='system']",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": "#0e0f13;\r\n  --text: #eef2ff;\r\n  --surface: #141720;\r\n  --card: #1a1f2b;\r\n  --border: #2a3142;\r\n  --accent: #7c83ff;\r\n  --accent-2: #00d1a0;\r\n  --link: #7aa2ff;\r\n  --btn-text: #0e0f13;\r\n  --shadow: 0 6px 24px rgba(0, 0, 0, 0.35);\r\n}\r\n\r\n/* Mardi Gras overlay: accent-only swap + subtle confetti hook class (optional) */\r\nbody[data-mardi='on']",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": "#6a00ff; /* purple */\r\n  --accent-2: #16a34a; /* green */\r\n  --link: #b45309; /* golden-amber for links */\r\n}\r\n\r\n/* Generic UI hooks that will inherit variables */\r\n.card",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": ".3s ease,\r\n    border-color 0.3s ease,\r\n    box-shadow 0.3s ease;\r\n}\r\n\r\n.button",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".3s ease,\r\n    color 0.3s ease;\r\n}\r\n\r\n.button.secondary",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".3s ease;\r\n}\r\n\r\n/* Settings Modal Styles */\r\n.modal[hidden]",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".modal",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".45);\r\n  display: grid;\r\n  place-items: center;\r\n  z-index: 99999;\r\n  pointer-events: auto;\r\n}\r\n\r\n.modal-content",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".modal-header",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".modal-section",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".modal-section h3",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": "#btnSettings.fab-left",
    "file": "css\\theme.css",
    "type": "id"
  },
  {
    "selector": ".2s ease !important;\r\n}\r\n\r\n#btnSettings.fab-left:hover",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": ".05) !important;\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2) !important;\r\n}\r\n\r\n#btnSettings.fab-left:focus",
    "file": "css\\theme.css",
    "type": "class"
  },
  {
    "selector": "#e5e7eb);\r\n  background: var(--color-surface, #ffffff);\r\n  color: var(--color-text, #1f2937);\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  white-space: nowrap;\r\n  min-height: 32px;\r\n}\r\n\r\n.action-btn:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\r\n  border-color: var(--color-border, #d1d5db);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.action-btn:active",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": ".action-btn--primary",
    "file": "styles\\action-bar.css",
    "type": "class"
  },
  {
    "selector": "#ff4c8d),\r\n    var(--color-primary-end, #9b4dff)\r\n  );\r\n  color: #ffffff;\r\n  border: none;\r\n  font-weight: 600;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.action-btn--primary:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#e91e63, #8e24aa);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n/* Secondary Action Styles */\r\n.action-btn--secondary",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\r\n  color: var(--color-text, #6b7280);\r\n  border-color: var(--color-border, #e5e7eb);\r\n}\r\n\r\n.action-btn--secondary:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#ffffff);\r\n  color: var(--color-text, #374151);\r\n  border-color: var(--color-border, #d1d5db);\r\n}\r\n\r\n/* Danger Action Styles */\r\n.action-btn.danger",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#dc2626;\r\n  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);\r\n}\r\n\r\n/* Action Icons */\r\n.action-icon",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb);\r\n  background: var(--color-surface, #ffffff);\r\n  color: var(--color-text, #6b7280);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.action-overflow-btn:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\r\n  color: var(--color-text, #374151);\r\n  border-color: var(--color-border, #d1d5db);\r\n}\r\n\r\n.action-overflow-btn[aria-expanded='true']",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\r\n  border-color: var(--color-border, #d1d5db);\r\n}\r\n\r\n.action-overflow-dots",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#ffffff);\r\n  border: 1px solid var(--color-border, #e5e7eb);\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  z-index: 1000;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transform: translateY(-8px);\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.action-overflow-menu[aria-hidden='false']",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#2a2a2a);\r\n  color: var(--text, #f5f5f5);\r\n  border-color: var(--border, #404040);\r\n}\r\n\r\n.dark-mode .action-btn:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#3a3a3a);\r\n  border-color: var(--border, #505050);\r\n}\r\n\r\n.dark-mode .action-btn--secondary",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#2a2a2a);\r\n  color: var(--text-secondary, #b0b0b0);\r\n}\r\n\r\n.dark-mode .action-btn--secondary:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#3a3a3a);\r\n  color: var(--text, #f5f5f5);\r\n}\r\n\r\n.dark-mode .action-overflow-btn",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#2a2a2a);\r\n  color: var(--text-secondary, #b0b0b0);\r\n  border-color: var(--border, #404040);\r\n}\r\n\r\n.dark-mode .action-overflow-btn:hover",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#3a3a3a);\r\n  color: var(--text, #f5f5f5);\r\n}\r\n\r\n.dark-mode .action-overflow-menu",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": "#2a2a2a);\r\n  border-color: var(--border, #404040);\r\n}\r\n\r\n.dark-mode .action-overflow-item",
    "file": "styles\\action-bar.css",
    "type": "id"
  },
  {
    "selector": ".action-btn,\r\n  .action-overflow-btn,\r\n  .action-overflow-menu,\r\n  .action-overflow-item",
    "file": "styles\\action-bar.css",
    "type": "class"
  },
  {
    "selector": ".card.v2",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".35);\n  transition: transform .2s ease;\n  margin-bottom: 16px;\n}\n\n.card.v2:hover",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#171a21);\n  border: 1px solid var(--border, #242a33);\n  color: var(--fg, #e6eaf0);\n}\n\n.light-mode .card.v2",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#ffffff);\n  border: 1px solid var(--border, #e5e7eb);\n  color: var(--fg, #1f2937);\n  box-shadow: 0 6px 24px rgba(0,0,0,.1);\n}\n\n/* Home Vertical Cards - Width controlled by home-layout.css */\n.card.v2.v2-home-cw,\n.card.v2.v2-home-nextup,\n.card.v2.v2-home-curated",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".css */\n}\n\n/* Tab/List Horizontal Cards - Maximum specificity to override all other rules */\n.card.v2.v2-tab-card,\n.card.v2.v2-tab-card.card,\n.card.v2.v2-tab-card.card.card,\nbody .card.v2.v2-tab-card,\nhtml body .card.v2.v2-tab-card,\nhtml body .card.v2.v2-tab-card.card,\nhtml body .card.v2.v2-tab-card.card.card,\nhtml body .card.v2.v2-tab-card.card.card.card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-search-card,\n.card.v2.v2-search-card.card,\n.card.v2.v2-search-card.card.card,\nbody .card.v2.v2-search-card,\nhtml body .card.v2.v2-search-card,\nhtml body .card.v2.v2-search-card.card,\nhtml body .card.v2.v2-search-card.card.card,\nhtml body .card.v2.v2-search-card.card.card.card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-tab-card,\n.card.v2.v2-search-card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2[class*=\"v2-tab\"],\n.card.v2[class*=\"v2-search\"]",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".list-container:has(.card.v2)",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#0b0d12);\n  border-radius: 10px;\n  overflow: hidden;\n  position: relative;\n  flex: 0 0 120px; /* Fixed width for poster */\n}\n\n.light-mode .card.v2 .poster-wrap",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\n}\n\n/* Home vertical cards - full width poster */\n.card.v2.v2-home-cw .poster-wrap,\n.card.v2.v2-home-nextup .poster-wrap,\n.card.v2.v2-home-curated .poster-wrap",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".card.v2.v2-tab-card .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-search-card .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .poster-wrap img",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw .card-content,\n.card.v2.v2-home-nextup .card-content,\n.card.v2.v2-home-curated .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-tab-card .card-content,\n.card.v2.v2-search-card .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .title",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#e6eaf0);\n  margin: 0;\n  line-height: 1.2;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n.light-mode .card.v2 .title",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#1f2937);\n}\n\n/* Meta information */\n.card.v2 .meta",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  font-size: 14px;\n  margin: 0;\n  font-weight: 500;\n  line-height: 1.4;\n}\n\n.light-mode .card.v2 .meta",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n/* Next up styling */\n.card.v2 .next-air",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#4da3ff);\n  font-size: 12px;\n  text-align: center;\n}\n\n/* Where to watch styling */\n.card.v2 .where-to-watch",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#4da3ff);\n  font-size: 12px;\n  text-align: center;\n}\n\n/* Curator blurb styling */\n.card.v2 .curator-blurb",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  font-size: 12px;\n  text-align: center;\n  max-height: 3.2em;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.light-mode .card.v2 .curator-blurb",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n/* Actions Styling - Keep flex for tab/search contexts only */\n.card.v2.v2-tab-card .actions,\n.card.v2.v2-search-card .actions",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".card.v2.v2-tab-card .actions,\n.card.v2.v2-search-card .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .actions button",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#232a34);\n  color: var(--fg, #e6eaf0);\n  border: 1px solid var(--border, #242a33);\n  padding: 8px 12px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  flex: 0 0 auto;\n}\n\n.light-mode .card.v2 .actions button",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\n  color: var(--fg, #374151);\n  border-color: var(--border, #d1d5db);\n}\n\n.card.v2 .actions button:hover:not([disabled])",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#2a3441);\n  transform: translateY(-1px);\n}\n\n.light-mode .card.v2 .actions button:hover:not([disabled])",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb);\n}\n\n.card.v2 .actions button[disabled]",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* Tab and search card content - left-aligned */\n.card.v2.v2-tab-card .card-content,\n.card.v2.v2-search-card .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .title + .meta",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .meta + .overview",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .overview + .where-to-watch",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .where-to-watch + .user-rating",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .user-rating + .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-tab-card .free-actions,\n.card.v2.v2-search-card .free-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-tab-card .pro-actions,\n.card.v2.v2-search-card .pro-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .free-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#242a33);\n}\n\n/* Pro Actions - horizontal layout with wrapping */\n.card.v2 .pro-actions",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b);\n}\n\n/* 2x2 Action Grid for Home Currently Watching */\n.card.v2 .action-grid-2x2,\n.cw-card.v2 .action-grid-2x2,\n.v2-home-cw .action-grid-2x2",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card.v2 .action-grid-2x2,\n#homeSection .cw-card.v2 .action-grid-2x2,\n#homeSection .v2-home-cw .action-grid-2x2",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card.v2 .action-row,\n#homeSection .cw-card.v2 .action-row,\n#homeSection .v2-home-cw .action-row",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card.v2 .action-grid-2x2 .action-row,\n#homeSection .cw-card.v2 .action-grid-2x2 .action-row,\n#homeSection .v2-home-cw .action-grid-2x2 .action-row",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".css conflicting rules with even higher specificity */\n#homeSection .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .action-grid-2x2 .action-row,\n#homeSection .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .action-grid-2x2 .action-row,\n#homeSection .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .action-grid-2x2 .action-row",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .card.v2 .action-grid-2x2 .action-row,\n#homeSection .cw-card.v2 .action-grid-2x2 .action-row,\n#homeSection .v2-home-cw .action-grid-2x2 .action-row,\n#homeSection .card.v2 .actions .action-grid-2x2 .action-row,\n#homeSection .cw-card.v2 .actions .action-grid-2x2 .action-row,\n#homeSection .v2-home-cw .actions .action-grid-2x2 .action-row",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".card.v2 .action-row,\n.cw-card.v2 .action-row,\n.v2-home-cw .action-row",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2 .btn",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#232a34);\n  color: var(--fg, #e6eaf0);\n  border: 1px solid var(--border, #242a33);\n  padding: 6px 8px;\n  border-radius: 8px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.card.v2 .btn:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#2a3441);\n  transform: translateY(-1px);\n}\n\n.light-mode .card.v2 .btn",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6);\n  color: var(--fg, #1f2937);\n  border: 1px solid var(--border, #e5e7eb);\n}\n\n.light-mode .card.v2 .btn:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb);\n}\n\n/* Pro button outline style */\n.card.v2 .btn--pro-outline",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b);\n  color: var(--pro, #f0b90b);\n  background: transparent;\n}\n\n.card.v2 .btn--pro-outline:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b);\n  color: var(--fg, #1f2937);\n}\n\n/* Delete button */\n.card.v2 .delete-btn",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#802626;\n  color: #fff;\n  border: none;\n  padding: 4px 8px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 11px;\n}\n\n.card.v2 .delete-btn:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a03030;\n}\n\n/* Drag handle */\n.card.v2 .drag-handle",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  padding: 4px;\n}\n\n.card.v2 .drag-handle:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#e6eaf0);\n}\n\n.light-mode .card.v2 .drag-handle",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n.light-mode .card.v2 .drag-handle:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#1f2937);\n}\n\n/* Overview styling */\n.card.v2 .overview",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  font-size: 14px;\n  line-height: 1.5;\n  margin: 8px 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.light-mode .card.v2 .overview",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n/* Where to Watch styling */\n.card.v2 .where-to-watch",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  font-size: 13px;\n  margin: 4px 0;\n  font-style: italic;\n}\n\n.light-mode .card.v2 .where-to-watch",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n/* User Rating Stars */\n.card.v2 .user-rating",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".card.v2 .user-rating .star",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#4da3ff);\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n\n.card.v2 .user-rating .star.filled",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#4da3ff);\n}\n\n.card.v2 .user-rating .star:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#66b3ff);\n}\n\n.card.v2 .user-rating .rating-label",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1);\n  font-size: 12px;\n  margin-left: 4px;\n  white-space: nowrap;\n  overflow: visible;\n  text-overflow: unset;\n}\n\n.light-mode .card.v2 .user-rating .rating-label",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280);\n}\n\n/* Status Badges */\n.card.v2 .status-badges",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".card.v2 .badge",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#242a33);\n  border-radius: 6px;\n  padding: 2px 6px;\n  font-size: 11px;\n  color: var(--fg-muted, #a9b3c1);\n}\n\n.light-mode .card.v2 .badge",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb);\n  color: var(--fg-muted, #6b7280);\n}\n\n.card.v2 .badge.pro",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b);\n  color: var(--pro, #f0b90b);\n}\n\n/* Date styling */\n.search-card.v2 .date,\n.cw-card.v2 .date,\n.curated-card.v2 .date",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#a9b3c1;\n  font-size: 12px;\n  margin: 0;\n}\n\n/* Light theme date */\n.light-mode .search-card.v2 .date,\n.light-mode .cw-card.v2 .date,\n.light-mode .curated-card.v2 .date",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280;\n}\n\n.search-card.v2 .actions,\n.cw-card.v2 .actions,\n.curated-card.v2 .actions",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .v2-home-cw .actions",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".search-card.v2 .actions button,\n.cw-card.v2 .actions button,\n.curated-card.v2 .actions button",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#232a34;\n  color: #e6eaf0;\n  border: 1px solid #242a33;\n  padding: 6px 10px;\n  border-radius: 8px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: background .15s ease;\n}\n\n/* Light theme buttons */\n.light-mode .search-card.v2 .actions button,\n.light-mode .cw-card.v2 .actions button,\n.light-mode .curated-card.v2 .actions button",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n  color: #374151;\n  border: 1px solid #d1d5db;\n}\n\n.search-card.v2 .actions button:hover:not([disabled]),\n.cw-card.v2 .actions button:hover:not([disabled]),\n.curated-card.v2 .actions button:hover:not([disabled])",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#2a3441;\n}\n\n/* Light theme button hover */\n.light-mode .search-card.v2 .actions button:hover:not([disabled]),\n.light-mode .cw-card.v2 .actions button:hover:not([disabled]),\n.light-mode .curated-card.v2 .actions button:hover:not([disabled])",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb;\n}\n\n.search-card.v2 .actions button[disabled],\n.cw-card.v2 .actions button[disabled],\n.curated-card.v2 .actions button[disabled]",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".5;\n  cursor: not-allowed;\n}\n\n/* Preview variant styling */\n.cw-card.v2.preview-variant",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.preview-variant .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.preview-variant .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.preview-variant .actions .preview-action",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".list-container:has(.media-card)",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".media-card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n  border: 1px solid #e5e7eb;\n  border-radius: 14px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0,0,0,.06);\n  transition: box-shadow .15s ease, transform .15s ease;\n  gap: 16px;\n}\n\n.media-card:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n}\n\n/* Card Body */\n.card-body",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#fee2e2; /* red-100 */\n  border-color: #ef4444; /* red-500 */\n}\n\n/* Overflow Menu - REMOVED - All buttons now show inline */\n\n/* Hint */\n.hint",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".cw-card.v2.vertical,\n.curated-card.v2.vertical,\n.next-up-card.v2.vertical",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".css */\n  min-height: auto;\n  padding: 12px;\n}\n\n/* Next Up cards - width controlled by home-layout.css */\n.next-up-card.v2.vertical",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".css */\n}\n\n/* Curated cards - width controlled by home-layout.css */\n.curated-card.v2.vertical",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".css */\n}\n\n/* Horizontal layout for tab and search cards */\n.search-card.v2.horizontal,\n.cw-card.v2.horizontal,\n.curated-card.v2.horizontal",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.horizontal .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".search-card.v2.horizontal .poster-wrap",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.vertical .card-content,\n.curated-card.v2.vertical .card-content,\n.next-up-card.v2.vertical .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": "#6b7280;\n}\n\n/* Overview text for horizontal cards */\n.overview",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#6b7280;\n}\n\n/* Action grid for vertical cards */\n.action-grid",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b;\n  margin-top: 6px;\n}\n\n.pro-actions button",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": "#f0b90b;\n  border: 1px solid #f0b90b;\n}\n\n.pro-actions button:hover",
    "file": "styles\\cards.css",
    "type": "id"
  },
  {
    "selector": ".1);\n}\n\n/* Delete button */\n.delete-btn",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".9;\n}\n\n/* Mobile responsive for vertical cards - width controlled by home-layout.css */\n@media (max-width: 640px)",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".cw-card.v2.vertical,\n  .curated-card.v2.vertical,\n  .next-up-card.v2.vertical",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".css */\n  }\n  \n  .next-up-card.v2.vertical,\n  .curated-card.v2.vertical",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".v2-home-cw .card-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".v2-home-nextup .card-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".v2-home-curated .card-actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card-actions button,\n.card-actions [role=\"button\"],\n.card-actions a.button",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card.with-actions .actions,\n.card.v2.v2-home-nextup.preview-card.with-actions .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card.with-actions .actions > *,\n.card.v2.v2-home-nextup.preview-card.with-actions .actions > *",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .card-content",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .actions > *",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".tab-home #curated-section .curated-card.v2,\nbody.tab-home #curated-section .curated-card.v2.preview-card,\nbody.tab-home #curated-section .card.v2.v2-home-curated,\nbody.tab-home #curated-section .card.v2.preview-card",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".tab-home #curated-section .curated-card.v2 .actions,\nbody.tab-home #curated-section .curated-card.v2.preview-card .actions,\nbody.tab-home #curated-section .card.v2.v2-home-curated .actions,\nbody.tab-home #curated-section .card.v2.preview-card .actions",
    "file": "styles\\cards.css",
    "type": "class"
  },
  {
    "selector": ".v2.css */\n/* Contract: two equal columns desktop (1:1), single column â‰¤ 960px. No sticky behavior. */\n\n/* Clean CSS with maximum specificity to override all conflicting rules */\n#group-2-community.community-v2.home-group .community-content",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": ".css padding */\n}\n\n#group-2-community.community-v2.home-group .community-left",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": ".css grid-row: 1 / span 2 */\n  align-self: stretch; /* Stretch to fill grid cell height */\n  height: 100%; /* Take full height of grid cell */\n  min-height: 0;\n  display: flex; /* Keep flex from community-player.css */\n  width: 100%;\n  min-width: 0;\n  max-width: none; /* Override main.css max-width: 50% */\n  flex: none; /* Override main.css flex: 0 1 50% */\n}\n\n#group-2-community.community-v2.home-group .community-right",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": ".css grid */\n  flex-direction: column;\n  grid-template-rows: none; /* Override community-player.css grid-template-rows */\n  height: 100%;\n  min-height: 0;\n  align-items: stretch;\n  flex: none;\n  max-width: none;\n  min-width: 0;\n  width: 100%;\n  overflow: visible;\n  align-self: stretch;\n  gap: 0; /* Override community-player.css gap */\n}\n\n/* Player section - fill full width and height with maximum specificity */\nbody #group-2-community.community-v2.home-group .community-left #community-player",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left #community-player > *",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": ".css card width constraints */\nbody #group-2-community.community-v2.home-group .community-left #community-player .c-card",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left #community-player iframe",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": ".25%; /* 16:9 aspect ratio */\n  position: relative;\n  border: none;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n/* Ensure iframe is properly contained */\nbody #group-2-community.community-v2.home-group .community-left #community-player .media,\nbody #group-2-community.community-v2.home-group .community-left #community-player .media-container",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left #community-player .media-container",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": ".25%; /* 16:9 aspect ratio */\n}\n\nbody #group-2-community.community-v2.home-group .community-left #community-player .media-container iframe",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left #community-player .c-card",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left #community-player .c-card header,\nbody #group-2-community.community-v2.home-group .community-left #community-player .c-card footer",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": ".95);\n  backdrop-filter: blur(10px);\n}\n\nbody #group-2-community.community-v2.home-group .community-left #community-player .c-card .body",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": ".95);\n  backdrop-filter: blur(10px);\n}\n\n/* Games grid defaults - stacked vertically on desktop */\n#group-2-community.community-v2.home-group #home-games",
    "file": "styles\\community-layout.v2.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-content",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community.community-v2.home-group .community-left",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community.community-v2.home-group #home-games",
    "file": "styles\\community-layout.v2.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community .community-content",
    "file": "styles\\community.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community .community-feed .community-card",
    "file": "styles\\community.css",
    "type": "id"
  },
  {
    "selector": ".95rem;\r\n  opacity: 0.9;\r\n}\r\n\r\n/* Nav controls (if injected) */\r\n#group-2-community .community-player .player-controls",
    "file": "styles\\community.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community .community-player .player-controls button",
    "file": "styles\\community.css",
    "type": "id"
  },
  {
    "selector": "#ddd);\r\n  background: var(--card, #fff);\r\n  cursor: pointer;\r\n}\r\n\r\n#group-2-community .community-player .player-controls button:focus-visible",
    "file": "styles\\community.css",
    "type": "id"
  },
  {
    "selector": "#1f2937; /* Primary text color */\n  --bg: #ffffff; /* Background color */\n  --muted: #374151; /* Muted text color - WCAG AA compliant (4.5:1) */\n  --card: #ffffff; /* Card background */\n  --border: #e5e7eb; /* Border color */\n  --accent: #ff4c8d; /* Accent color */\n\n  /* Legacy color mappings for compatibility */\n  --color-primary-start: var(--accent);\n  --color-primary-end: #9b4dff;\n  --color-text: var(--fg);\n  --color-muted: var(--muted);\n  --color-surface: var(--bg);\n  --color-surface-2: #f3f4f6;\n  --color-border: var(--border);\n  --color-danger: #ef4444;\n\n  /* High contrast tokens for accessibility */\n  --text-secondary: #374151; /* 4.5:1 contrast ratio */\n  --placeholder: #6b7280; /* 3:1 contrast ratio for placeholders */\n  --badge-text: #1f2937; /* 4.5:1 contrast ratio for badges */\n  --meta-text: #374151; /* 4.5:1 contrast ratio for meta text */\n}\n\n/* Dark mode CSS variables */\n.dark-mode",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5; /* Light text on dark background */\n  --bg: #1a1a1a; /* Dark background */\n  --muted: #b0b0b0; /* Muted text on dark */\n  --card: #2a2a2a; /* Dark card background */\n  --border: #404040; /* Dark border */\n  --accent: #ff4c8d; /* Accent color (unchanged) */\n\n  /* Legacy color mappings for compatibility */\n  --color-text: var(--fg);\n  --color-text-primary: var(--fg);\n  --color-text-secondary: var(--muted);\n  --color-muted: var(--muted);\n  --color-surface: var(--bg);\n  --color-surface-2: var(--card);\n  --color-border: var(--border);\n\n  /* High contrast tokens for dark mode */\n  --text-secondary: #d1d5db; /* 4.5:1 contrast ratio on dark */\n  --placeholder: #9ca3af; /* 3:1 contrast ratio for placeholders */\n  --badge-text: #f9fafb; /* 4.5:1 contrast ratio for badges */\n  --meta-text: #d1d5db; /* 4.5:1 contrast ratio for meta text */\n}\n\n/* Additional design tokens */\n:root",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n  --skeleton-shimmer: #e5e7eb;\n  --skeleton-animation-duration: 1.5s;\n\n  /* Type scale (mobile) */\n  --fs-body: 14px;\n  --fs-label: 16px;\n  --fs-button: 16px;\n  --fs-h3: 22px;\n\n  /* Buttons */\n  --btn-h: 40px;\n  --btn-radius: 10px;\n\n  /* Z-index */\n  --z-header: 200;\n  --z-modal: 1000;\n  --z-overlay: 999;\n}\n\n/* Shared button styles */\n.btn",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#fff;\n  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));\n}\n.btn.secondary",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#fff;\n  border: none;\n}\n\n/* Modal primitives (overlay + container shell) */\n.modal-overlay",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".6);\n  z-index: var(--z-overlay);\n  display: none;\n}\n.modal",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal > .modal-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25);\n}\n\n/* === CARD COMPONENT TOKENS === */\n:root",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".css */\n\n  /* Spacing tokens */\n  --space-1: 4px;\n  --space-2: 8px;\n  --space-3: 12px;\n  --space-4: 16px;\n  --space-5: 20px;\n  --space-6: 24px;\n\n  /* Radius tokens */\n  --radius-sm: 6px;\n  --radius-md: 8px;\n  --radius-lg: 12px;\n  --radius-xl: 16px;\n\n  /* Shadow tokens */\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);\n  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);\n\n  /* === POSTER STANDARDIZATION SYSTEM - now handled by spacing-system.css === */\n\n  /* Card layout variables */\n  --card-gap-desktop: 16px;\n  --card-pad-y-desktop: 16px;\n  --card-pad-x-desktop: 16px;\n  --meta-title-size-desktop: 18px;\n  --meta-line-desktop: 1.3;\n  --card-gap-mobile: 12px;\n  --card-pad-y-mobile: 12px;\n  --card-pad-x-mobile: 16px;\n  --meta-title-size-mobile: 16px;\n  --meta-line-mobile: 1.2;\n  --card-bg: var(--color-surface, #ffffff);\n  --card-border: 1px solid var(--color-border, #e0e0e0);\n  --card-radius: 8px;\n  --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* === SECTION BOXING (Home Layout v2) === */\n.section",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ffffff);\n  border-radius: var(--radius-xl, 16px);\n  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n  padding: var(--space-4, 16px);\n  margin-block: var(--space-4, 16px);\n  border: 1px solid var(--color-border, #e1e5e9);\n}\n\n.section__header",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".section__header h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\n  font-weight: 600;\n  color: var(--color-text-primary, #1a1a1a);\n  line-height: 1.3;\n}\n\n.section__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".875rem;\n  color: var(--color-text-secondary, #6b7280);\n  line-height: 1.4;\n  font-weight: 400;\n}\n\n.section__body",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".section--community .section__body",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .section__header h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .home-section",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .home-section .section-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .card--compact",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .feedback-link-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .feedback-link-card p",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .theaters-header h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".row--ghost",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ffffff);\n  border: 1px solid var(--color-border, #e1e5e9);\n  border-radius: 8px;\n  text-align: center;\n}\n\n.row--ghost .row__header h4",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".1rem;\n  font-weight: 700;\n  color: var(--text);\n  margin: 0 0 12px 0;\n}\n\n.row--ghost .row__ghost-cards",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".row--ghost .ghost-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#e1e5e9);\n  border-radius: 8px;\n  animation: pulse 2s infinite;\n}\n\n.row--ghost .row__cta",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#e91e63);\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.row--ghost .row__cta:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#c2185b);\n}\n\n.row--ghost .ghost-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ffffff);\n  border: 1px solid var(--color-border, #e1e5e9);\n  border-radius: var(--radius-lg, 12px);\n  padding: var(--space-4, 16px);\n  display: flex;\n  flex-direction: column;\n  transition: all 0.2s ease;\n  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n}\n\n.game-box:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".1));\n}\n\n.game-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".125rem;\n  font-weight: 600;\n  color: var(--color-text-primary, #1a1a1a);\n  line-height: 1.3;\n}\n\n.game-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\n  font-weight: 700;\n  color: var(--color-primary, #007bff);\n  line-height: 1;\n  margin-bottom: var(--space-1, 4px);\n}\n\n.stat-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\n  color: var(--color-text-secondary, #6b7280);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  font-weight: 500;\n}\n\n.game-play-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#007bff);\n  color: white;\n  border: none;\n  border-radius: var(--radius-md, 8px);\n  padding: var(--space-2, 8px) var(--space-4, 16px);\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-height: 36px;\n}\n\n.game-play-btn:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#8b5cf6;\n}\n\n/* Mobile Layout */\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".625rem;\n  }\n}\n\n/* Responsive section padding */\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".feedback-link-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ffffff);\n  border: 1px solid var(--color-border, #e0e0e0);\n  border-radius: var(--radius-lg, 12px);\n  padding: var(--space-4, 16px);\n  text-align: center;\n  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));\n  transition: all 0.2s ease;\n}\n\n.feedback-link-card:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".1));\n  transform: translateY(-1px);\n}\n\n.feedback-link-card p",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#666);\n  font-size: 0.875rem;\n}\n\n.feedback-link-card .btn",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".feedback-link-card p",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8125rem;\n  }\n}\n\n/* === BASE POSTER CARD COMPONENT STYLES === */\n\n/* Base Poster Card - Unified 2:3 aspect ratio cards */\n.base-poster-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  cursor: pointer;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  aspect-ratio: 2/3;\n  padding: 0;\n  text-align: left;\n  font-family: inherit;\n}\n\n.base-poster-card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card--disabled",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".6;\n  pointer-events: none;\n}\n\n.base-poster-card--skeleton",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card--empty",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__poster img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8));\n  padding: var(--space-3);\n  color: white;\n}\n\n.base-poster-card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  font-weight: 600;\n  line-height: 1.2;\n  margin: 0 0 var(--space-1);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.base-poster-card__subline",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  opacity: 0.9;\n  margin: 0 0 var(--space-1);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.base-poster-card__rating",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: #fbbf24;\n  margin: 0;\n}\n\n/* Overflow menu */\n.base-poster-card__overflow",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__overflow-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7);\n  border: none;\n  border-radius: var(--radius-sm);\n  padding: var(--space-1);\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.base-poster-card__overflow-btn:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9);\n}\n\n.base-poster-card__overflow-dots",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  font-weight: bold;\n  line-height: 1;\n}\n\n.base-poster-card__overflow-menu",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  z-index: 10;\n}\n\n.base-poster-card__overflow-menu[aria-hidden='false']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__overflow-item",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.base-poster-card__overflow-item:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__overflow-icon",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__overflow-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n}\n\n/* Skeleton loading */\n.base-poster-card__skeleton-shimmer",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__empty-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__empty-icon",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".base-poster-card__empty-message",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  margin: 0;\n}\n\n/* Responsive grid system - only for FlickWord/Trivia content */\n.flickword-tab__grid,\n.trivia-tab__grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__grid,\n  .trivia-tab__grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin: 0;\n}\n\n.stats-card__content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__stat",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__stat-value",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\n  font-weight: 700;\n  color: var(--color-primary-start);\n  line-height: 1;\n  margin-bottom: var(--space-1);\n}\n\n.stats-card__stat-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: var(--color-muted);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.stats-card__footer",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__last-played",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: var(--color-muted);\n  text-align: center;\n}\n\n/* Mobile adjustments */\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".stats-card__content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\n  }\n\n  .stats-card__stat-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\n  }\n}\n\n/* === FLICKWORD TAB STYLES === */\n\n.flickword-tab",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin: 0;\n}\n\n.flickword-tab__hero",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__hero-image",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__hero-image img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__hero-stats",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-tab__grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\n  }\n\n  .flickword-tab__hero",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-tab",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-tab__header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-tab__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin: 0;\n}\n\n.trivia-tab__grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\n  }\n}\n\n/* === GAME TAB NAVIGATION STYLES === */\n\n.game-tab-nav",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".game-tab-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.game-tab-btn:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".game-tab-btn.active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".game-tab",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".game-tab.active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".game-tab-nav",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\n  font-weight: 600;\n  color: var(--color-muted);\n  background: var(--color-surface-2);\n  padding: 2px 6px;\n  border-radius: 4px;\n  margin-right: var(--space-2);\n  display: inline-block;\n}\n\n/* === CARD COMPONENT STYLES === */\n\n/* Base card styles */\n.card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--disabled",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".6;\n  pointer-events: none;\n}\n\n/* Compact variant (Home rows & search) */\n.card--compact",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__poster img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__poster-placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__overlay",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7) 100%);\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  display: flex;\n  align-items: flex-end;\n  padding: var(--space-3);\n}\n\n.card--compact:hover .card__overlay",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__overlay-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  font-weight: 600;\n  line-height: 1.2;\n  margin: 0 0 var(--space-1);\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.card--compact .card__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  opacity: 0.9;\n  margin: 0 0 var(--space-2);\n}\n\n.card--compact .card__rating",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact .card__stars",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fbbf24;\n  font-size: 0.9rem;\n}\n\n.card--compact .card__primary-action",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".8rem;\n  border-radius: var(--radius-sm);\n}\n\n/* Expanded variant (lists & detail contexts) */\n.card--expanded",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__poster img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__poster-placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\n  color: var(--color-muted);\n}\n\n.card--expanded .card__content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  font-weight: 600;\n  line-height: 1.3;\n  margin: 0;\n  color: var(--color-text);\n}\n\n.card--expanded .card__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  color: var(--color-muted);\n  margin: 0;\n}\n\n.card--expanded .card__rating",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__stars",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fbbf24;\n  font-size: 1rem;\n}\n\n.card--expanded .card__actions",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".card__title-row",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__title-row .card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  font-weight: 600;\n  line-height: 1.3;\n  color: var(--color-text);\n}\n\n.card__title-row .card__badge--status",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__badge",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  z-index: 2;\n}\n\n.card__badge--status",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\n    padding: 3px 6px;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  /* On mobile, status badge moves below title and right-aligned */\n  .show-title-row",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__badge--provider",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  min-width: 32px;\n  min-height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.card__more-btn:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-btn:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-dots",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2rem;\n  font-weight: bold;\n  line-height: 1;\n}\n\n.card__more-menu",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.card__more-menu[aria-hidden='false']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-item",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  color: var(--color-text);\n  text-align: left;\n  transition: background-color 0.2s ease;\n}\n\n.card__more-item:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-item:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-icon",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--compact",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  }\n\n  .card--compact .card__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\n  }\n\n  .card--compact .card__primary-action",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\n  }\n\n  .card--expanded",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded .card__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  }\n\n  /* === MOBILE POSTER STANDARDIZATION === */\n  /* Ensure all posters use standardized mobile dimensions */\n  .show-poster,\n  .poster-placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-title-row",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#watchingList,\n  #wishlistList,\n  #watchedList",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".card:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__poster:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#121212);\n    font-size: 20px;\n    flex: 1;\n  }\n\n  .show-card .show-meta",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#888);\n    margin: 0 0 8px;\n    line-height: 1.4;\n    font-weight: 400;\n  }\n\n  .show-card .program-status-badge",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".show-card .program-status-badge.status-ongoing",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".16);\n    color: #2f9e44;\n    border-color: #2f9e44;\n  }\n\n  .show-card .program-status-badge.status-ended",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".16);\n    color: #d63031;\n    border-color: #d63031;\n  }\n\n  .show-card .program-status-badge.status-upcoming",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".16);\n    color: #b08900;\n    border-color: #b08900;\n  }\n\n  .show-card .show-overview",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".5;\n    color: var(--color-text, #121212);\n    margin: 0 0 12px;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    line-clamp: 3;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n\n  /* Ensure proper spacing between cards on desktop */\n  .show-card + .show-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8s ease-out 0.4s both;\n  position: relative;\n  z-index: 100; /* PART2C */\n  overflow-x: auto;\n  background: var(--bg);\n  border-bottom: 1px solid var(--border);\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n/* Ensure tabs are always visible during search */\n.tab-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#searchResults + .tab-container",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".tab-container::-webkit-scrollbar",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".top-search + .tab-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  border-bottom: 3px solid transparent;\n  color: var(--text-muted);\n}\n\n.tab::before",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2), transparent);\n  transition: left 0.5s ease;\n}\n\n.tab:hover::before",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".05);\n  color: var(--text);\n}\n\n.tab.is-active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-badge",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2;\n  transition: all 0.2s ease;\n  display: inline-block;\n  visibility: visible;\n  opacity: 1;\n}\n\n.tab.is-active .tab-badge",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n  border-radius: 8px;\n  padding: 8px 16px;\n  min-height: 44px;\n  flex-shrink: 0;\n  font-weight: 600;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  letter-spacing: 0.3px;\n  min-height: 44px;\n  min-width: 44px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.btn:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#737d8c, #57606f);\n}\n\n.btn.success",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#2ed573, #1dd1a1);\n}\n\n.btn.danger",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f06292, #e91e63);\n}\n\n/* Search Components */\n.top-search",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".02);\n  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);\n  border-color: var(--primary);\n}\n\n.genre-filter",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".02);\n  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);\n  border-color: var(--primary);\n}\n\n.search-help",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem ;\n  line-height: 1.2 ;\n  font-style: italic ;\n  color: rgba(255, 255, 255, 0.65) ; /* dark theme */\n  background: transparent ;\n  border: none ;\n  box-shadow: none ;\n  padding: 0 ;\n  margin: 0 ;\n  margin-bottom: 0 ;\n  text-align: left ;\n  border-radius: 0 ;\n  pointer-events: auto ; /* allow clicks for tooltips */\n  z-index: 2 ;\n  opacity: 0.7 ;\n  transition: opacity 0.2s ease ;\n}\n\nhtml[data-theme='light'] .search-help,\n.light-mode .search-help,\nhtml:not([data-theme='dark']) .search-help",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".onboarding-hint,\n.keyboard-hint",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".onboarding-hint::after,\n.keyboard-hint::before",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".upcoming-episodes .card-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#f8f9fa 0%, #e9ecef 100%);\n  border-radius: 12px;\n  border-left: 4px solid #667eea;\n  margin-bottom: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  transition: all 0.2s ease;\n}\n\n.upcoming-episode-item:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#667eea;\n  font-weight: 500;\n  text-align: right;\n  background: rgba(102, 126, 234, 0.1);\n  padding: 4px 8px;\n  border-radius: 6px;\n  white-space: nowrap;\n  margin-left: 12px;\n}\n\n.no-episodes",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#007bff;\n  background: #f8f9ff;\n  box-shadow: 0 2px 4px rgba(0, 123, 255, 0.1);\n}\n\n.pro-feature.locked",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".pro-feature-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".streaming-horoscope,\n.feedback-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2rem;\n  font-weight: 500;\n  color: #e91e63;\n  text-align: center;\n  z-index: 10000;\n  opacity: 1;\n  transition: opacity 0.8s ease;\n  pointer-events: none;\n  max-width: 90%;\n  line-height: 1.4;\n  text-shadow: 0 2px 8px rgba(233, 30, 99, 0.25);\n  background: none;\n  padding: 0;\n  border: none;\n  border-radius: 0;\n  backdrop-filter: none;\n  box-shadow: none;\n  animation: welcomePulse 2s ease-in-out infinite;\n}\n\nhtml[data-theme='light'] .welcome-message",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#9c27b0;\n  background: none;\n  text-shadow: 0 2px 8px rgba(156, 39, 176, 0.25);\n}\n\n.welcome-message.fade-out",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".02);\n  }\n}\n\n/* === MP-2.2 DESKTOP ANIMATION === */\n@keyframes cardSlideIn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n/* === CARD 3-DOTS MENU STYLING === */\n.card-more-menu",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-more-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#666);\n  transition: all 0.2s ease;\n  min-width: 32px;\n  min-height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.card-more-btn:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5);\n  color: var(--color-text, #121212);\n}\n\n.card-more-btn:focus-visible",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ff4c8d);\n  outline-offset: 2px;\n}\n\n.card-more-dots",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".2rem;\n  font-weight: bold;\n  line-height: 1;\n}\n\n.card-more-dropdown",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ffffff);\n  border: 1px solid var(--color-border, #e5e7eb);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  padding: 4px;\n  min-width: 140px;\n  z-index: 10;\n  transform: translateY(4px);\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n}\n\n.card-more-dropdown[aria-hidden='false']",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".card-more-item",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#121212);\n  font-size: 14px;\n  transition: background-color 0.2s ease;\n}\n\n.card-more-item:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5);\n}\n\n.card-more-item:focus-visible",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ff4c8d);\n  outline-offset: -2px;\n}\n\n.card-more-icon",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".card-more-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-pills",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#f5f5f5);\n  color: var(--color-text-secondary, #777);\n  font-size: 14px;\n  border: 2px dashed var(--color-border, #ddd);\n}\n\n.poster-button",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".2s ease;\n}\n\n.poster-button:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".02);\n}\n\n.poster-button:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#007bff);\n  outline-offset: 2px;\n}\n\n@media (min-width: calc(var(--bp-mobile) + 1px))",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".95rem;\n  line-height: 1.45;\n  color: var(--text);\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.rating-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2) brightness(1.1);\n  color: #0066cc;\n  transform: scale(1.1);\n  text-shadow: 0 0 6px rgba(0, 102, 204, 0.6);\n  font-weight: bold;\n  font-size: 1.3rem;\n}\n\n/* List Container */\n.list-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3s ease;\n}\n\n/* Tab sections use default vertical layout - no special horizontal rules needed */\n\n/* Tab sections use default vertical layout - no scroll indicators needed */\n\n.list-container:empty::before",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ". Start by searching for something!';\n  display: block;\n  text-align: center;\n  color: #888;\n  font-style: italic;\n  padding: 40px 20px;\n  opacity: 0.7;\n}\n\n/* Tab Sections - Visibility controlled by [hidden] attribute */\n.tab-section",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".section-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".section-header h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".88rem;\n  border-radius: 16px;\n  color: #fff;\n  background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);\n  background-size: 400% 400%;\n  animation: rainbow 3s ease-in-out infinite;\n  border: 2px solid rgba(255, 255, 255, 0.85);\n}\n\n@keyframes rainbow",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#666;\n  padding: 20px;\n  font-style: italic;\n}\n\n/* Smooth transitions for all form elements */\ninput,\nselect,\nbutton",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#fff;\n}\n\n/* Touch target optimization for mobile */\nbutton,\ninput[type='button'],\ninput[type='submit'],\ninput[type='reset'],\nselect,\n.clickable",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".skeleton-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skeleton-button",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".btn.loading .btn-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8;\n}\n\n/* Modal */\n.modal-backdrop",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".55);\n  display: none; /* Default to hidden */\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  margin: 0;\n  padding: 0;\n}\n\n/* Removed inline style sniffing - Phase B: Use class-based visibility only */\n\n.modal",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3);\n  position: relative;\n  overflow: visible;\n  box-sizing: border-box;\n  margin: auto;\n  text-align: center;\n}\n\n.modal h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal .modal-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal .modal-body",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal input[type='text'],\n.modal .search-input",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-content-wrapper",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-instruction",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8;\n}\n\n.modal-input",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#settingsTab span",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#settingsTab",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".fab-rail",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-stack",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab,\n.fab-left",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1f2937);\n  font-size: 24px;\n  transition: all 0.2s ease;\n  pointer-events: auto;\n  background: none;\n  box-shadow: none;\n  border-radius: 0;\n  width: auto;\n  height: auto;\n  padding: 0;\n  margin: 0;\n}\n\n/* Hover effects */\n.fab:hover,\n.fab-left:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".05);\n  opacity: 0.8;\n}\n\n/* Mobile adjustments */\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-left",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08s ease,\n    opacity 0.12s ease;\n}\n\n/* Hover/active/focus affordances without adding a box */\n.fab:hover,\n.fab-left:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9;\n}\n.fab:active,\n.fab-left:active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab:focus-visible,\n.fab-left:focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".main-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab[style*='display: none']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-section",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab-left",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab-stack",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".05);\n  opacity: 0.8;\n}\n\n/* Ultra-specific override to remove blue background from settings FAB */\n.fab-dock #btnSettings.fab-left",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock #btnSettings.fab-left:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".05);\n  opacity: 0.8;\n}\n\n.fab-dock #btnSettings.fab-left:active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock #btnSettings.fab-left:focus",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".hidden class on tabs - show tab but hide text for mobile optimization */\n.tab.hidden",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab.hidden span,\n.tab.hidden .tab-badge",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab[style*='visibility: hidden']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-container .tab.hidden",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".85rem;\n  opacity: 0.8;\n}\n\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#notifAdvancedCard.disabled",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".5;\n  pointer-events: none;\n}\n\n#notifAdvancedCard.disabled input,\n#notifAdvancedCard.disabled select",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s infinite;\n  border-radius: 4px;\n}\n\n.skel-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#fff;\n  border: 1px solid var(--border);\n  border-radius: 12px;\n  padding: 16px;\n  margin-bottom: 12px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.skel-card .skel",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".skel-card .skel:first-child",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skel-card .skel:last-child",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".fw-modal",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fw-modal-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.fw-modal-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#667eea 0%, #764ba2 100%);\n  border-bottom: 1px solid #5a67d8;\n  border-radius: 12px 12px 0 0;\n  cursor: move;\n  user-select: none;\n}\n\n.fw-modal-title",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".2);\n}\n\n.fw-modal-controls",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fbbf24;\n  color: #000;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fw-control-btn.minimize:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#10b981;\n  color: #fff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fw-control-btn.maximize:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ef4444;\n  color: #fff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fw-control-btn.close:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#dc2626;\n  transform: translateY(-1px);\n}\n\n.fw-modal iframe",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ff6b6b, #ffa500);\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  padding: 2px 6px;\n  border-radius: 8px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin: 2px auto 0;\n  display: inline-block;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n/* Locked Pro features */\n.locked",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".8;\n}\n\n/* Override grid display for hidden tabs on mobile - show compact version */\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#666666;\n  background: #f8f9fa;\n  cursor: pointer;\n  font-weight: 700;\n  line-height: 1;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 11px ;\n  transition: all 0.2s ease;\n  color: #333333 ;\n  opacity: 1;\n  padding: 0 ;\n  margin: 0 ;\n}\n.tips-trigger:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".12);\n  padding: 0 4px;\n  border-radius: 6px;\n  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;\n}\n\n.tips-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25);\n  padding: 6px 8px;\n  font-size: 0.9rem;\n  white-space: nowrap;\n  display: none;\n}\n.pro-locked:hover .pro-lock-tip,\n.pro-locked:focus-within .pro-lock-tip",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\n  padding: 2px 6px;\n  border-radius: 999px;\n  border: 1px solid var(--color-border);\n  opacity: 0.85;\n}\n\n/* FlickWord Container Styling */\n.quote-flickword-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9s ease-out 0.6s both;\n  justify-content: space-between ;\n  width: 100% ;\n}\n\n.left-column",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".quote-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  transition: all 0.3s ease;\n  opacity: 0.9;\n  width: 100%;\n}\n\n.quote-card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".15);\n}\n\n.random-quote-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  transition: all 0.3s ease;\n  opacity: 0.9;\n  width: 100%;\n}\n\n.random-quote-card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".15);\n}\n\n/* FlickWord Card Styling */\n.flickword-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.flickword-card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".quote-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".quote-card,\n  .flickword-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".flickword-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".quote-title,\n  .flickword-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: var(--primary);\n  font-weight: 900;\n}\n\n.stat-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".like-btn,\n.dislike-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#2ed573, #1dd1a1) ;\n  color: #fff ;\n  border-color: #1dd1a1 ;\n  box-shadow: 0 2px 4px rgba(46, 213, 115, 0.3) ;\n}\n\n.dislike-btn.active",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ff4757, #ff3742) ;\n  color: #fff ;\n  border-color: #ff3742 ;\n  box-shadow: 0 2px 4px rgba(255, 71, 87, 0.3) ;\n}\n\n/* File Input */\n.file-input-label",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#666;\n  font-size: 11px;\n  text-align: center;\n}\n\n/* Button Link */\n.btn-link",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#b00020;\n  margin-top: 6px;\n  font-size: 0.9rem;\n}\n\n/* Feedback Card */\n.feedback-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".9em;\n  color: var(--text-secondary);\n  text-align: center;\n  margin: 8px 0 16px 0;\n  font-style: italic;\n  opacity: 0.8;\n}\n\n@keyframes fadeInUp",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.dark-mode .network-status",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".rating-filter,\n.media-type-filter,\n.sort-by-filter,\n.search-type-filter,\n.language-filter",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3s ease-out;\n}\n\n.active-filters-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#dc2626;\n  transform: translateY(-1px);\n}\n\n/* Enhanced theme toggle button */\n.theme-toggle",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f8f9fa, #e9ecef);\n  border: 2px solid #dee2e6;\n  color: #495057;\n  transition: all 0.3s ease;\n}\n\n.theme-toggle:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".05);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.theme-toggle:active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#495057, #343a40);\n  border-color: #6c757d;\n  color: #f8f9fa;\n}\n\n.dark-mode .theme-toggle:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".3s ease;\n}\n\n/* Card overflow & wrapping - Desktop only */\n@media (min-width: calc(var(--bp-mobile) + 1px))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-title,\n  .show-meta,\n  .rating-container,\n  .show-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".poster-button",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n  color: #9c27b0;\n  border: 1px solid rgba(156, 39, 176, 0.2);\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-top: 4px;\n}\n\n.notes-chip:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".15);\n  border-color: rgba(156, 39, 176, 0.3);\n  transform: translateY(-1px);\n}\n\n.notes-chip:active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2);\n  color: #bb86fc;\n  border-color: rgba(187, 134, 252, 0.3);\n}\n\nhtml[data-theme='dark'] .notes-chip:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25);\n  border-color: rgba(187, 134, 252, 0.4);\n}\n\n/* Ensure modals are visible when opened */\n.modal-backdrop[style*='display: flex']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".search-row .search-input,\n  .search-row #searchInput",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".search-row select,\n  .search-row .btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".nav-tiles",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".nav-tiles .nav-tile",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".nav-tiles .nav-tile h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".nav-tiles .nav-tile p",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".4;\n  }\n\n  /* Quotes: keep primary (Quote of the Day), collapse Random Quote by ID */\n#randomQuoteCard",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#quoteCard",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".3;\n  }\n\n  /* Settings/Stats small-screen adjustments */\n.settings-container .card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fwModal",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".header h1",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".header .btn.secondary",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fff ;\n    pointer-events: auto ;\n    z-index: 10 ;\n  }\n\n  /* Tab visibility controlled by [hidden] attribute - CSS does not control visibility */\n.tab-section",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".search-controls .btn::before,\n.search-controls .btn::after",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".css to avoid conflicts */\n  @media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .star-rating",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .star-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .like-dislike",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".show-card .like-btn,\n.show-card .dislike-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed-list .show-card .right-actions .icon-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed-list .show-card .show-overview",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".15s ease;\n}\n.modal-backdrop[data-open='true']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-open",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop .modal-dialog:focus",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop .modal-dialog :focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#2684ff);\n  outline-offset: 2px;\n}\n\n/* === MP-CondensedModeHardening (scoped, safe) === */\n/* Applies only when body has .condensed (opt-in). */\nbody.condensed .show-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".6) calc(var(--card-pad-x-desktop, 14px) * 0.7);\n  gap: calc(var(--card-gap-desktop, 16px) * 0.6);\n}\n\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed .show-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".6) calc(var(--card-pad-x, 12px) * 0.7);\n    gap: calc(var(--card-gap, 8px) * 0.6);\n  }\n}\n\n/* Titles/overview slightly smaller; keep legibility */\nbody.condensed .show-card .show-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9);\n  line-height: calc(var(--meta-line-desktop, 1.3) * 0.95);\n}\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed .show-card .show-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9);\n    line-height: calc(var(--meta-line, 1.2) * 0.95);\n  }\n}\n\n/* Overview clamp: same lines, reduced spacing */\nbody.condensed .show-card .show-overview",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".95;\n}\n\n/* Actions column: keep target sizes usable (â‰¥36px) */\nbody.condensed .show-card .show-actions .btn,\nbody.condensed .show-card .show-actions button",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed .show-card .show-meta,\nbody.condensed .show-card .rating-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".condensed .icon,\nbody.condensed [aria-hidden='true']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".\n   Scope narrowly to known wrappers; do NOT touch .top-search ancestors. */\n.main-content,\n#homeTab .list-container,\n#watchingTab .list-container,\n#wishlistTab .list-container,\n#watchedTab .list-container,\n#discoverTab .list-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".floating-action,\n.toast,\n.bottom-bar,\n.floating-toolbar",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".top-search itself.\n   If there is a sticky header wrapper, allow for top inset. */\n.sticky-header,\n.app-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".app-container,\n.page,\n.tab-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".a11y .show-card .show-actions .btn,\nbody.a11y .show-card .show-actions button,\nbody.a11y .toolbar .btn,\nbody.a11y button,\nbody.a11y .btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".a11y .btn:focus-visible,\nbody.a11y button:focus-visible,\nbody.a11y [tabindex]:not([tabindex='-1']):focus-visible",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#2684ff);\n  outline-offset: 2px;\n  border-radius: 6px;\n}\n\n/* Keep icon-only buttons readable: ensure reasonable min width in action stacks */\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".a11y .show-card .show-actions .btn,\n  body.a11y .show-card .show-actions button",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1a1a1a;\n  --text: #f5f5f5;\n  --card: #2a2a2a;\n  --border: #404040;\n  --text-secondary: #b0b0b0;\n  --primary: #2684ff;\n  background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6b 100%) ;\n}\n\n/* Sunset (PRO) â€” warm coral */\nbody[data-theme='sunset']",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#1a0f0f;\n  --text: #ffeae5;\n  --card: #2a1a1a;\n  --border: #4a2a2a;\n  --text-secondary: #f5bdb2;\n  --primary: #ff6b6b;\n  background: linear-gradient(135deg, #4a1a1a 0%, #6b2a2a 100%) ;\n}\n\n/* Midnight (PRO) â€” cyan on graphite */\nbody[data-theme='midnight']",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#0f0f1a;\n  --text: #e9f7ff;\n  --card: #1a1a2a;\n  --border: #2a2a4a;\n  --text-secondary: #a9c6d6;\n  --primary: #19b2ff;\n  background: linear-gradient(135deg, #1a2a4a 0%, #2a3a6b 100%) ;\n}\n\n/* Forest (PRO) â€” emerald */\nbody[data-theme='forest']",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#0f1a0f;\n  --text: #e8ffee;\n  --card: #1a2a1a;\n  --border: #2a4a2a;\n  --text-secondary: #b4d2bf;\n  --primary: #2ecc71;\n  background: linear-gradient(135deg, #1a4a1a 0%, #2a6b2a 100%) ;\n}\n\n/* === MP-Providers (scoped) === */\n.providers-row",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#2a2a2a);\n  color: var(--text, #f5f5f5);\n  text-decoration: none;\n  font-size: 12px;\n  line-height: 1;\n  border: 1px solid var(--border, #404040);\n  font-weight: 500;\n}\n\n.provider-badge img",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".25;\n  pointer-events: none; /* no clicks when locked */\n  filter: blur(1px);\n  background: var(--bg, #1a1a1a) ;\n  color: var(--muted, #9aa6b2) ;\n  border-color: var(--border, #404040) ;\n}\n\n.providers-row[data-locked='1'] .provider-badge img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1a1f27);\n  color: var(--text, #e6ecf2);\n  font-size: 12px;\n  line-height: 1;\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  text-decoration: none;\n  white-space: nowrap;\n}\n\n.extra-chip:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".playlist-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#141a22);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 10px;\n  padding: 10px;\n  margin: 10px 0 14px;\n}\n\n.playlist-card .video-embed",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#000;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.playlist-card .video-embed iframe",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".playlist-card .video-meta",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".playlist-card .video-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25;\n}\n\n.playlist-card .pill",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  background: var(--bg, #0b0e13);\n  color: var(--muted, #a6b3c2);\n  font-size: 12px;\n  line-height: 1;\n}\n\n.playlist-card .video-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".playlist-card .btn-ghost",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  color: var(--text, #e6ecf2);\n  padding: 6px 8px;\n  border-radius: 6px;\n  font-size: 12px;\n  line-height: 1;\n}\n\n/* Settings segmented control */\n.settings-tabs",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".settings-tabs button",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".settings-tabs button.active",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));\n}\n.settings-section",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".5rem;\n  font-weight: 700;\n  color: var(--text);\n  margin: 0 0 8px 0;\n  line-height: 1.3;\n}\n\n.settings-subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  font-weight: 600;\n  color: var(--text);\n  margin: 0 0 8px 0;\n  line-height: 1.3;\n}\n\n/* Settings Descriptions */\n.settings-description",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  color: var(--text-secondary, #666);\n  margin: 0 0 16px 0;\n  line-height: 1.4;\n}\n\n/* Settings Control Groups */\n.settings-control-group",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  font-weight: 500;\n  color: var(--text);\n  margin-bottom: 8px;\n  line-height: 1.3;\n}\n\n/* Settings Input Groups */\n.settings-input-group",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ddd);\n  border-radius: 6px;\n  font-size: 0.9rem;\n  background: var(--bg, #fff);\n  color: var(--text);\n  transition: all 0.2s ease;\n  min-width: 200px;\n}\n\n.settings-input:focus",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#e91e63);\n  box-shadow: 0 0 0 3px rgba(233, 30, 99, 0.1);\n}\n\n.settings-input-number",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ddd);\n  border-radius: 6px;\n  font-size: 0.9rem;\n  background: var(--bg, #fff);\n  color: var(--text);\n  font-family: inherit;\n  resize: vertical;\n  min-height: 80px;\n  transition: all 0.2s ease;\n}\n\n.settings-textarea:focus",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#e91e63);\n  box-shadow: 0 0 0 3px rgba(233, 30, 99, 0.1);\n}\n\n/* Settings Checkboxes */\n.settings-checkbox-label",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".settings-button-group",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: var(--text-secondary, #888);\n  margin: 8px 0 0 0;\n  line-height: 1.3;\n}\n\n.settings-status",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\n  color: var(--success, #51cf66);\n  font-weight: 500;\n}\n\n/* Settings Stats */\n.settings-stats",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#f7f7f9);\n  border: 1px solid var(--border, #dedee3);\n  border-radius: 8px;\n  padding: 16px;\n  margin-top: 8px;\n}\n\n/* Settings Pro Features */\n.settings-pro-features",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f7f7f9);\n  border: 1px solid var(--border, #dedee3);\n  border-radius: 8px;\n  padding: 16px;\n  margin-top: 8px;\n}\n\n/* Settings Form */\n.settings-form",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".settings-button-group .btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".settings-tabs",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#141a22);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 10px;\n  padding: 10px;\n  margin-bottom: 12px;\n}\n\n.playlist-row .row-head",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".08);\n  background: var(--bg, #0b0e13);\n  color: var(--muted, #a6b3c2);\n  font-size: 12px;\n  line-height: 1;\n}\n\n.playlist-grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#000;\n  border-radius: 8px;\n  overflow: hidden;\n  aspect-ratio: 16/9;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n.playlist-item iframe",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".06);\n  background: var(--bg, #0b0e13);\n  text-decoration: none;\n  color: var(--text, #e6ecf2);\n  font-size: 13px;\n}\n.playlist-link:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#141a22);\n  border: 1px dashed rgba(255, 255, 255, 0.15);\n  color: var(--muted, #a6b3c2);\n  border-radius: 10px;\n  padding: 10px;\n  text-align: center;\n  font-size: 13px;\n}\n\n/* === Loading States & Skeleton Screens === */\n.loading-skeleton",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: loading-shimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n@keyframes loading-shimmer",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".1);\n  border-radius: inherit;\n}\n\n/* Skeleton card styles */\n.skeleton-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".css - Home layout rules belong there */\n\n/* Smooth section appearance */\n.section",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1a1f27);\n  color: var(--text, #e6ecf2);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  font-size: 12px;\n  line-height: 1;\n  white-space: nowrap;\n}\n.trivia-chip .ic",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".8;\n}\n\n/* FlickWord Boost (Home) - FlickFact feature removed */\n\n/* === SO-1: Series Organizer (progressive disclosure) === */\n.so-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .card-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .card-header .h-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".25;\n  max-width: 100%;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  font-size: 14px;\n}\n\n.so-card .card-header .h-meta",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#9aa6b2);\n  font-size: 12px;\n}\n\n.so-card .show-overview",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".3;\n  font-size: 12px;\n}\n\n.so-card .card-pills",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .pill",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n  background: var(--bg-elev, #141a22);\n  color: var(--text, #e6ecf2);\n  font-size: 12px;\n  line-height: 1;\n  cursor: pointer;\n}\n.so-card .pill[hidden]",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .pill .ic",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9;\n}\n.so-card .pill[aria-expanded='true']",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".06);\n}\n\n.so-card .card-drawer",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08);\n  border-radius: 8px;\n  padding: 8px;\n  background: var(--bg, #0b0e13);\n}\n\n.so-card .card-drawer[hidden]",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .providers-slot,\n.so-card .extras-slot,\n.so-card .trivia-slot",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1: Visual separation & title suppression (scoped) === */\n\n/* 1) Don't show the legacy title when Series Organizer header is present */\n.so-card .show-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".08); /* adjust in dark via theme if needed */\n  --so-card-pad-y: 10px;\n}\n\n/* soft divider between successive cards without changing the parent container */\n.so-card + .so-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card + .so-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n  }\n}\n\n/* 3) Trim excess space so the card body feels compact */\n.so-card .card-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .card-pills",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .card-drawer",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".so-card .rating-container",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2: Card framing for Series Organizer cards (scoped to .so-card) === */\n/* Uses theme var if present; falls back to white */\n:root",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fff;\n}\n\n/* Make each card read as its own box */\n.so-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".08);\n  margin-bottom: 12px;\n}\n\n/* Remove the old divider behavior now that cards are boxed */\n.so-card + .so-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1 */\n.so-card .show-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3 (optional): Alternating light tint for scanability === */\n/* Comment this block out if you don't want alternation */\n.so-card:nth-of-type(even)",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1e1f25;\n  }\n  .so-card",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".45);\n  }\n  .so-card:nth-of-type(even)",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#222;\n  color: #fff;\n  border-radius: 12px;\n  padding: 10px 12px;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  opacity: 0;\n  transform: translateY(10px);\n  transition:\n    transform 0.18s ease,\n    opacity 0.18s ease;\n  font-size: 0.95rem;\n}\n.toast.show",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#ffe9cc;\n  color: #5b3b00;\n  padding: 10px 12px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 0.95rem;\n}\n.banner[data-type='error']",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".header .header-bar",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".header .app-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".15;\n  margin: 2px 0 0 0;\n}\n.header .app-subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-section .section-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  opacity: 0.75;\n}\n\n/* Horizontal row with scroll-snap - scoped to non-Home pages */\nbody:not(.home) .curated-row",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".home) .curated-row::-webkit-scrollbar",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".home) .curated-row::-webkit-scrollbar-thumb",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2);\n  border-radius: 8px;\n}\n\n/* Curated card - scoped to non-Home pages */\nbody:not(.home) .curated-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".06);\n}\nbody:not(.home) .curated-card + .curated-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-card .poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#f2f2f2;\n}\n.curated-card .poster img",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".curated-card .poster.placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#eee, #f7f7f7, #eee);\n}\n.curated-card .title",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".95rem;\n  line-height: 1.2;\n  margin: 8px 0 4px 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.card-meta",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".92rem;\n  opacity: 0.9;\n}\n.curated-card .stars",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fbbf24;\n  margin-right: 4px;\n}\n.curated-card .votes",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".85rem;\n}\n.curated-card .actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-card .btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-row .card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".02));\n  border-radius: 8px;\n  border: 1px solid var(--border);\n}\n\n.curated-genre-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-row .card:last-child",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-modal-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-modal-content .trivia-question",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".4;\n  color: var(--text);\n}\n\n.trivia-modal-content .trivia-choices",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#ddd);\n  border-radius: 8px;\n  background: var(--card, #fff);\n  color: var(--text, #333);\n  cursor: pointer;\n  text-align: left;\n  transition: all 0.2s;\n  font-size: 14px;\n  font-family: inherit;\n}\n\n.trivia-choice-btn:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".trivia-modal-content .trivia-feedback",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-modal-content .trivia-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".trivia-modal-content .trivia-stats",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#666);\n  text-align: center;\n  margin-top: 12px;\n  opacity: 0.8;\n}\n\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".spotlight-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#000;\n}\n.spotlight-media iframe,\n.spotlight-media video",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".modal[hidden]",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".45);\n}\n.modal-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".35);\n  padding: 12px;\n  display: grid;\n  gap: 10px;\n}\n.modal-head",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-body",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".modal-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#episode-modal .modal",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .modal-body",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-seasons",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .season-container",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .season-header",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .season-episodes",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-row",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-info",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-title",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-meta",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".7;\n}\n\n#episode-modal .ep-actions .btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#episode-modal .episode-seasons::-webkit-scrollbar,\n#episode-modal .season-episodes::-webkit-scrollbar",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-seasons::-webkit-scrollbar-track,\n#episode-modal .season-episodes::-webkit-scrollbar-track",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-seasons::-webkit-scrollbar-thumb,\n#episode-modal .season-episodes::-webkit-scrollbar-thumb",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#episode-modal .episode-seasons::-webkit-scrollbar-thumb:hover,\n#episode-modal .season-episodes::-webkit-scrollbar-thumb:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#theaters-section.home-preview-row",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#theaters-section.home-preview-row,\nsection#theaters-section.home-preview-row",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".theaters-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".theaters-header h3",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease,\n    box-shadow 0.2s ease;\n  cursor: pointer;\n  flex: 0 0 200px; /* Fixed width for horizontal scrolling */\n  min-width: 200px;\n}\n\n.theater-movie:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-body",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".season-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.season-header:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#1a1a1a;\n    border-bottom-color: #333;\n  }\n\n  .episode-modal-body",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#1a1a1a;\n  }\n\n  .season-header",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#2d2d2d;\n    color: #fff;\n  }\n\n  .season-header:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#2d2d2d;\n  }\n}\n\n/* ========== MOBILE LAYOUT FIXES (layout_mobile_fix flag) ========== */\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".header-left",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".header-center",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".header-right",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-rail",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".tab-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".row-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2) ;\n      border-radius: 8px ;\n    }\n\n    /* Card mobile adjustments */\n    .card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem ;\n      line-height: 1.2 ;\n      margin-bottom: 4px ;\n    }\n\n    .card__subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem ;\n      line-height: 1.2 ;\n      margin-bottom: 6px ;\n    }\n\n    .card__actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__primary-action",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".8rem ;\n      min-height: 32px ;\n    }\n\n    .card__more-btn",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card__more-menu",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".section__header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".spotlight-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem ;\n      min-height: 44px ;\n    }\n\n    /* 6) Feedback & misc mobile fixes */\n    .feedback-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem ;\n      min-height: 44px ;\n    }\n\n    /* Form inputs mobile fixes */\n    input[type='text'],\n    input[type='email'],\n    textarea,\n    select",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".btn--full-width",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.skip-link:focus",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skeleton-preview-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skeleton-preview-card-mobile",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skeleton-game-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#374151;\n  --skeleton-shimmer: #4b5563;\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce)",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".skeleton-show-card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n}\n\n.card--compact",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--expanded",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card--poster .card-poster",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-poster img",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-poster-placeholder",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-badges",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-badge",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-badge--status",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-title",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".3;\n}\n\n.card-subtitle",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".card-rating",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#fbbf24;\n  font-size: 14px;\n}\n\n.card-primary-action",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".2s ease;\n}\n\n.card-primary-action:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#e91e63;\n}\n\n.card-overflow-actions",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".card-overflow-action",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n}\n\n.card-overflow-action:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".6;\n  pointer-events: none;\n}\n\n.skeleton-show-card-mobile",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".skeleton-content",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".curated-row-header",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\n  margin: 0;\n  color: var(--text);\n}\n\n/* Horizontal scroll container with snap behavior */\n.curated-row-scroll",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".1);\n  cursor: pointer;\n  transition:\n    transform 0.2s ease,\n    box-shadow 0.2s ease;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.curated-item:hover",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  line-height: 1.2;\n  margin: 0;\n  color: var(--text);\n  text-align: center;\n}\n\n/* Card component styling within curated rows */\n.curated-row .card",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#btnSettings,\nbutton#btnSettings.fab-left,\n.fab-dock button#btnSettings,\n.fab-dock button#btnSettings.fab-left,\nbutton#btnSettings.fab-left.fab",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#btnSettings:hover,\nbutton#btnSettings.fab-left:hover,\n.fab-dock button#btnSettings:hover,\n.fab-dock button#btnSettings.fab-left:hover,\nbutton#btnSettings.fab-left.fab:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".05);\n  opacity: 0.8;\n}\n\n/* Remove Button Styling */\n.unified-card-action-btn--remove",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": "#dc3545 ;\n  color: white ;\n  border: 1px solid #dc3545 ;\n}\n\n.unified-card-action-btn--remove:hover",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": "#c82333 ;\n  border-color: #bd2130 ;\n  transform: scale(1.05);\n}\n\n.unified-card-action-btn--remove .unified-card-action-icon",
    "file": "styles\\components.css",
    "type": "id"
  },
  {
    "selector": ".unified-card-action-btn--remove .unified-card-action-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-actions-grid",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-actions-left,\n.unified-card-actions-right",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-action-btn--compact",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-action-btn--compact .unified-card-action-icon",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-action-btn--compact .unified-card-action-label",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-actions",
    "file": "styles\\components.css",
    "type": "class"
  },
  {
    "selector": ".css, components.css\r\n */\r\n\r\n/* ===== CONSOLIDATED LAYOUT SYSTEM ===== */\r\n\r\n:root",
    "file": "styles\\consolidated-layout.css",
    "type": "class"
  },
  {
    "selector": "#1f2937;\n  --bg: #ffffff;\n  --muted: #374151;\n  --card: #ffffff;\n  --border: #e5e7eb;\n  --accent: #ff4c8d;\n  --text-secondary: #374151;\n  --placeholder: #6b7280;\n  --badge-text: #1f2937;\n  --meta-text: #374151;\n}\n*",
    "file": "styles\\critical.css",
    "type": "id"
  },
  {
    "selector": "#667eea 0%, #764ba2 100%);\n  color: var(--text);\n  line-height: 1.5;\n  min-height: 100svh;\n  overflow-y: visible;\n}\n.main-container",
    "file": "styles\\critical.css",
    "type": "id"
  },
  {
    "selector": ".12);\n  min-height: calc(100vh - 40px);\n}\n.header",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".header-bar",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".header-left",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".header-center",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".header-right",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  color: var(--muted);\n  font-style: italic;\n}\n.account-btn",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  min-height: 44px;\n  min-width: 44px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.btn:hover",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".tab-container",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".tab",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\n  border-bottom: 2px solid transparent;\n  min-height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.tab.is-active",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".tab:focus-visible",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".main-container",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": ".header",
    "file": "styles\\critical.css",
    "type": "class"
  },
  {
    "selector": "#ffffff;\n  --text: #121212;\n  --primary: #e91e63;\n  --card: #f7f7f9;\n  --border: #dedee3;\n  --success: #51cf66;\n  --warning: #ffd43b;\n  --danger: #f06292;\n  --purple: #845ec2;\n  --focus: #1a73e8;\n\n  /* ===== SURFACE & ELEVATION ===== */\n  --surface: #f9f9f9;\n  --bg-page: #ffffff;\n  --bg-elevated: #f7f7f9;\n\n  /* ===== TEXT COLORS ===== */\n  --fg: #1f2937;\n  --fg-default: #1f2937;\n  --fg-muted: #6b7280;\n  --fg-subtle: #7f8c8d;\n  --fg-on-elevated: #111827;\n  --text-secondary: #666;\n\n  /* ===== ACCENT COLORS ===== */\n  --accent: #2563eb;\n\n  /* ===== SPACING SYSTEM ===== */\n  --s-4: 1rem;\n  --spacing-xs: 2px;\n  --spacing-sm: 4px;\n  --spacing-md: 8px;\n  --spacing-lg: 16px;\n  --spacing-xl: 24px;\n  --spacing-2xl: 32px;\n\n  /* ===== BORDER RADIUS ===== */\n  --r-2: 8px;\n  --r: 12px;\n\n  /* ===== TYPOGRAPHY ===== */\n  --fs-0: 1rem;\n\n  /* ===== SHADOWS ===== */\n  --shadow-1: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n  /* ===== CARD DIMENSIONS ===== */\n  --card-w: 154px;\n  --card-h: 270px;\n  --home-card-width-desktop: 184px;\n  --home-card-height-desktop: 276px;\n  --home-card-width-mobile: 64px;\n  --home-card-height-mobile: 96px;\n  --tab-card-poster-width-desktop: 120px;\n  --tab-card-poster-height-desktop: 180px;\n  --tab-card-poster-width-mobile: 80px;\n  --tab-card-poster-height-mobile: 120px;\n\n  /* ===== POSTER SYSTEM ===== */\n  --poster-w: 180px;\n  --poster-h: 270px;\n  --poster-w-mobile: 64px;\n  --poster-h-mobile: 96px;\n  --card-gap: 16px;\n  --card-gap-mobile: 12px;\n  --card-pad-y: 12px;\n  --card-pad-y-mobile: 8px;\n  --card-pad-x: 16px;\n  --card-pad-x-mobile: 12px;\n\n  /* ===== TYPOGRAPHY SCALE ===== */\n  --meta-title-size: 14px;\n  --meta-title-size-mobile: 12px;\n  --meta-line: 1.2;\n  --meta-line-mobile: 1.1;\n\n  /* ===== BADGE SYSTEM ===== */\n  --badge-bg: #e91e63;\n  --badge-color: white;\n  --badge-font-size: 11px;\n  --badge-padding: 2px 6px;\n  --badge-border-radius: 10px;\n  --badge-margin-left: 6px;\n  --badge-font-weight: 600;\n  --badge-min-width: 16px;\n  --badge-line-height: 1.2;\n  --badge-z-index: 1;\n\n  /* ===== FAB SYSTEM ===== */\n  --fab-size: 50px;\n  --fab-gap: 10px;\n  --fab-rail-height: 80px;\n\n  /* ===== SAFE AREAS ===== */\n  --safe-top: 0px;\n  --safe-bottom: 0px;\n  --safe-left: 0px;\n  --safe-right: 0px;\n\n  /* ===== CARD BACKGROUNDS ===== */\n  --card-bg: #fff;\n\n  /* ===== MARDI GRAS THEME ===== */\n  --mardi1: #6a0dad;\n  --mardi2: #28a745;\n  --mardi3: #ffd43b;\n}\n\n/* ===== THEME VARIANTS ===== */\n\n/* Light Theme (default) */\n:root[data-theme='light']",
    "file": "styles\\design-tokens.css",
    "type": "id"
  },
  {
    "selector": "#ffffff;\n  --bg-elevated: #f7f7f9;\n  --fg-default: #1f2937;\n  --fg-muted: #6b7280;\n  --fg-subtle: #7f8c8d;\n  --fg-on-elevated: #111827;\n  --border: #e5e7eb;\n  --accent: #2563eb;\n}\n\n/* Dark Theme */\n:root[data-theme='dark']",
    "file": "styles\\design-tokens.css",
    "type": "id"
  },
  {
    "selector": "#0b0f14;\n  --bg-elevated: #111827;\n  --fg-default: #e5e7eb;\n  --fg-muted: #9ca3af;\n  --fg-subtle: #9aa2a6;\n  --fg-on-elevated: #f9fafb;\n  --border: #243140;\n  --accent: #60a5fa;\n  --bg: #121212;\n  --surface: #1e1e1e;\n  --text: #f5f5f5;\n  --primary: #0066ff;\n  --shadow-1: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n/* Mardi Gras Theme */\n:root[data-theme='mardi']",
    "file": "styles\\design-tokens.css",
    "type": "id"
  },
  {
    "selector": "#0f1024;\n  --bg-elevated: #17183a;\n  --fg-default: #f2f2fb;\n  --fg-muted: #c9caf2;\n  --fg-subtle: #b3b7ff;\n  --fg-on-elevated: #ffffff;\n  --border: #31337a;\n  --accent: #ffbf00;\n}\n\n/* Dark Mode Support */\n@media (prefers-color-scheme: dark)",
    "file": "styles\\design-tokens.css",
    "type": "id"
  },
  {
    "selector": "#f9fafb;\n    --border: #e5e7eb;\n    --fg: #111827;\n    --muted: #6b7280;\n    --bg: #ffffff;\n    --accent: #2b63ff;\n    --accent-hover: #1e4cd8;\n}\n\n/* Clean Group Structure - Match Mockup Exactly */\n#clean-root .clean-group",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".2);\n}\n\n#clean-root .group-header h2.group-title",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".2 system-ui, Segoe UI, Roboto;\n    color: var(--fg);\n}\n\n#clean-root .group-divider",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .home-preview-row",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".05); /* Light tint */\n    border: 1px solid var(--border);\n    border-radius: 12px;\n}\n\n#clean-root .home-preview-row h3",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".2 system-ui, Segoe UI, Roboto;\n    color: var(--fg);\n}\n\n/* Rails - Exact Mockup Specs */\n#clean-root .rail",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".2);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    transition: all 0.3s ease;\n    cursor: pointer;\n}\n\n#clean-root .card:hover",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".02);\n    box-shadow: 0 10px 30px rgba(0,0,0,.3);\n}\n\n#clean-root .poster-wrap",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    text-align: center;\n    margin: 8px 0 0;\n    color: var(--fg);\n}\n\n#clean-root .meta",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: var(--muted);\n    text-align: center;\n    margin: 4px 0 8px;\n}\n\n/* CW Cards: 200px, 2x2 Actions */\n#clean-root .cw-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .cw-actions button",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#2a3340;\n    background: var(--accent);\n    color: #fff;\n    font: 500 13px/1 system-ui, Segoe UI, Roboto;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .cw-actions button:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .up-card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: #10b981;\n    text-align: center;\n}\n\n/* For You: 200px, Single CTA */\n#clean-root .fy-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: #3b82f6;\n    text-align: center;\n}\n\n#clean-root .blurb",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".3 system-ui, Segoe UI, Roboto;\n    color: var(--muted);\n    text-align: center;\n    max-height: 3.9em;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n}\n\n#clean-root .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .fy-actions button",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#2a3340;\n    background: var(--accent);\n    color: #fff;\n    font: 500 13px/1 system-ui, Segoe UI, Roboto;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .fy-actions button:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#000;\n    border-radius: 14px;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-size: 1rem;\n    border: 1px solid var(--border);\n}\n\n#clean-root #community-container .now-playing video",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".5rem;\n}\n\n#clean-root #community-container .game-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".3s;\n    font: 12px system-ui, Segoe UI, Roboto;\n    padding: 8px;\n}\n\n#clean-root #community-container .game-card:hover",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".02);\n    box-shadow: 0 10px 30px rgba(0,0,0,.3);\n}\n\n#clean-root #community-container .game-card h3",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#000;\n    height: 200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-size: 16px;\n    border-radius: 14px;\n    border: 1px solid var(--border);\n}\n\n/* Community section layout constraints */\n#clean-root .community-split",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#000;\n    border-radius: 14px;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-size: 1rem;\n}\n#clean-root .now-playing video",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".5rem;\n}\n#clean-root .game-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".3s;\n    font: 12px system-ui, Segoe UI, Roboto;\n    padding: 8px;\n}\n#clean-root .game-card:hover",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".02);\n    box-shadow: 0 10px 30px rgba(0,0,0,.3);\n}\n#clean-root .game-card h3",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .card-content",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .cw-actions, #clean-root .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .action-btn, #clean-root .cta-btn",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb; \n    background: #2b63ff; \n    color: #fff; \n    font: 500 13px/1 system-ui; \n    cursor: pointer; \n    transition: background 0.3s; \n    display: block; \n}\n#clean-root .action-btn:hover, #clean-root .cta-btn:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#e5e7eb; \n    background: rgba(43,99,255,0.12); \n    color: #93c5fd; \n    font: 600 11px/1 system-ui; \n    cursor: pointer; \n    transition: background 0.3s; \n    display: block; \n    visibility: visible;\n    opacity: 1;\n    pointer-events: auto;\n}\n#clean-root .holiday-chip:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card.cw-card,\n#clean-root .card.fy-card,\n#clean-root .card.up-card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#000; \n    border-radius: 14px; \n    position: relative; \n    overflow: hidden; \n    display: flex; \n    align-items: center; \n    justify-content: center; \n    color: #fff; \n    font-size: 1rem; \n}\n#clean-root .now-playing video",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".5rem; \n}\n#clean-root .game-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#f9fafb; \n    border: 1px solid #e5e7eb; \n    border-radius: 14px; \n    display: flex; \n    flex-direction: column; \n    align-items: center; \n    justify-content: center; \n    cursor: pointer; \n    transition: all 0.3s; \n    font: 12px system-ui; \n    padding: 8px; \n}\n#clean-root .game-card h3",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".2);\n    font: 14px/1.4 system-ui, Segoe UI, Roboto;\n}\n\n/* Mobile Responsive - Exact Specs */\n@media (max-width: 768px)",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .cw-card,\n    #clean-root .up-card,\n    #clean-root .fy-card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .section, \n#clean-root .home-clean-container",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#homeSection.tab-section.home-content",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card .description",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".05);\n    border-color: var(--border);\n}\n\n#clean-root .card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .game-card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .game-card h3",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .title,\n#clean-root .group-title,\n#clean-root .home-preview-row h3",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .meta,\n#clean-root .blurb",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card-cw .poster-container",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n    position: relative;\n}\n\n#clean-root .card-cw .poster-container .poster",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card-cw .poster-container .poster-fallback",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n}\n\n#clean-root .card-cw .poster-container .poster-fallback-img",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card-cw .card-content",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card-cw .card-content .title",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: var(--fg);\n    text-align: center;\n}\n\n#clean-root .card-cw .card-content .meta",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: var(--muted);\n    text-align: center;\n}\n\n#clean-root .card-cw .card-content .blurb",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".3 system-ui, Segoe UI, Roboto;\n    color: var(--muted);\n    text-align: center;\n    max-height: 3.9em;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n}\n\n#clean-root .card-cw .card-content .actions",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .card-cw .card-content .action-btn",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#2a3340;\n    background: var(--accent);\n    color: #fff;\n    font: 500 13px/1 system-ui, Segoe UI, Roboto;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .card-cw .card-content .action-btn:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card-cw .holiday-chip",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#3a4250;\n    background: rgba(43,99,255,.12);\n    color: #93c5fd;\n    font: 600 11px/1 system-ui, Segoe UI, Roboto;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .card-cw .holiday-chip:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#f3f4f6;\n}\n\n/* FIXED: Up Next Specifics */\n#clean-root .up-card",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".card-content */\n}\n\n#clean-root .up-next-line",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: #10b981;  /* Green for queue feel */\n    text-align: center;\n    margin-top: 4px;\n}\n\n/* FIXED: FY Specifics */\n#clean-root .fy-card",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".25 system-ui, Segoe UI, Roboto;\n    color: #3b82f6;  /* Blue tag */\n    text-align: center;\n    margin: 4px 0;\n}\n\n#clean-root .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": ".3 system-ui, Segoe UI, Roboto;\n    color: var(--muted);\n    text-align: center;\n    max-height: 3.9em;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n}\n\n/* FIXED: Mobile Grid Tweaks */\n@media (max-width: 768px)",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .cw-actions,\n    #clean-root .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".css) */\n#clean-root .action-btn, #clean-root .cta-btn",
    "file": "styles\\home-clean.css",
    "type": "class"
  },
  {
    "selector": "#e5e7eb;\n    background: #2b63ff;\n    color: #fff;\n    font: 500 13px/1 system-ui;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .cw-actions, #clean-root .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card .fy-actions .action-btn,\n#clean-root .card .cw-actions .action-btn,\n#clean-root .fy-card .fy-actions .action-btn,\n#clean-root .cw-card .cw-actions .action-btn",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#ff4c8d);\n    color: white;\n    border: none;\n    padding: 8px 12px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n#clean-root .card .fy-actions,\n#clean-root .card .cw-actions,\n#clean-root .fy-card .fy-actions,\n#clean-root .cw-card .cw-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .fy-card .fy-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .cw-card .cw-actions",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .card .fy-actions .action-btn:hover,\n#clean-root .card .cw-actions .action-btn:hover,\n#clean-root .fy-card .fy-actions .action-btn:hover,\n#clean-root .cw-card .cw-actions .action-btn:hover",
    "file": "styles\\home-clean.css",
    "type": "id"
  },
  {
    "selector": ".css to override layout rules */\n\n/* ===== CSS ARCHITECTURE GUARD ===== */\n/*\n * SINGLE SOURCE OF TRUTH: This file contains ALL home page layout rules\n * \n * CRITICAL RULES:\n * 1. NO other CSS file should contain home layout rules\n * 2. All home page styling must be defined here\n * 3. Use design tokens (--home-gutter, --rail-col-w, etc.)\n * 4. Follow the established pattern: Frame â†’ Panels â†’ Rails â†’ Cards â†’ Actions\n * \n * FORBIDDEN: Adding home layout rules to main.css, components.css, or mobile.css\n * \n * If you need to modify home layout:\n * 1. Edit this file ONLY\n * 2. Use proper CSS specificity\n * 3. Test that no other file conflicts\n * 4. Update this comment if architecture changes\n */\n\n/* === DESIGN TOKENS === */\n:root",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#appRoot.has-search #search-container,\n#appRoot.has-search .top-search,\nbody.has-search #search-container,\nbody.has-search .top-search",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection, \n.home-content, \nmain#panels",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .section",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".2s ease-in-out;\n}\n\n/* Top-level group wrappers: fill width; zero inner L/R padding */\n#group-1-your-shows.home-group,\n#group-2-community.home-group,\n#group-3-for-you.home-group,\n#group-4-theaters.home-group",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .home-preview-row,\n#homeSection .section-content,\n#group-1-your-shows section,\n#group-2-community section",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows,\n    #group-2-community,\n    #group-3-for-you,\n    #group-4-theaters)\n  :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll)",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#currentlyWatchingScroll and .preview-row-scroll */\n#homeSection #currentlyWatchingScroll,\n#homeSection .preview-row-scroll",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection #currentlyWatchingScroll > *,\n#homeSection .preview-row-scroll > *",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows,\n      #group-2-community,\n      #group-3-for-you)\n    :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll, .curated-row)",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card img, \n#homeSection .card picture",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions)",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions) :is(button, [role=\"button\"], a.button)",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions) > *",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ". COMMUNITY GRID - Override main.css conflicting rules */\n#group-2-community .community-content",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ". COMMUNITY RIGHT (games container) - Override main.css conflicting rules */\n#group-2-community .community-right",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ". HOME GAMES CARDS */\n#group-2-community #home-games",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community #home-games .card--game",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ". OVERRIDE CONFLICTING RULES FROM MAIN.CSS */\n/* Fix cards being cut off by removing min-height constraints */\n#group-2-community .community-section",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .preview-row-scroll *",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .preview-row-scroll",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows .dark-mode .home-preview-row",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".home-preview-row.collapsed",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-container",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-header",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-title",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".7;\n}\n\n/* === HOME WRAPPER CONTRACT === */\n/* Enforce 32px gutters on all home panels - highest specificity */\n#homeSection .home-preview-row,\n#homeSection .section-content,\n#homeSection .panel,\n#homeSection .home-group section,\n#homeSection #up-next-row",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#home-games is a grid container, not a panel - don't force block display */\n#homeSection #home-games",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .actions,\n#homeSection .card-actions,\n#homeSection .preview-card .actions,\n#homeSection .unified-card .actions,\n#homeSection .curated-card .actions",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows.home-group",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .home-preview-row .preview-row-container",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .home-preview-row .preview-row-scroll.row-inner,\n#homeSection .home-preview-row .cw-row #currentlyWatchingScroll,\n#homeSection .home-preview-row .up-next-scroll",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-5-feedback.home-group",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-5-feedback .home-preview-row .preview-row-container",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-5-feedback .feedback-content",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-5-feedback .feedback-card",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-4-theaters .theaters-info,\n#group-4-theaters .theaters-meta",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows.home-group,\n#group-3-for-you.home-group,\n#group-4-theaters.home-group",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows .home-preview-row .preview-row-container,\n#group-3-for-you .home-preview-row .preview-row-container,\n#group-4-theaters .home-preview-row .preview-row-container",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows .home-preview-row .preview-row-scroll.row-inner,\n#group-1-your-shows .home-preview-row .cw-row #currentlyWatchingScroll,\n#group-1-your-shows .home-preview-row .up-next-scroll,\n#group-3-for-you  .home-preview-row .preview-row-scroll.row-inner,\n#group-4-theaters .home-preview-row .preview-row-scroll.row-inner",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows .actions,\n#group-1-your-shows .card-actions,\n#group-3-for-you  .actions,\n#group-3-for-you  .card-actions,\n#group-4-theaters .actions,\n#group-4-theaters .card-actions",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".css conflicting rules with correct specificity */\n#homeSection .card.v2 .action-grid-2x2,\n#homeSection .cw-card.v2 .action-grid-2x2,\n#homeSection .v2-home-cw .action-grid-2x2",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows .actions > *,\n#group-1-your-shows .card-actions > *,\n#group-3-for-you  .actions > *,\n#group-3-for-you  .card-actions > *,\n#group-4-theaters .actions > *,\n#group-4-theaters .card-actions > *,\n#group-5-feedback .actions > *,\n#group-5-feedback .card-actions > *",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows .actions > .span-2,\n#group-1-your-shows .card-actions > .span-2,\n#group-3-for-you  .actions > .span-2,\n#group-3-for-you  .card-actions > .span-2,\n#group-4-theaters .actions > .span-2,\n#group-4-theaters .card-actions > .span-2",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection #group-2-community.home-group",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection #group-2-community.community-v2.home-group .community-content",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".v2.css */\n}\n\n/* Community rails should maintain their existing behavior */\n#group-2-community .home-preview-row .preview-row-container",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#group-2-community .home-preview-row .preview-row-scroll.row-inner,\n#group-2-community .home-preview-row .cw-row #currentlyWatchingScroll,\n#group-2-community .home-preview-row .up-next-scroll",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#group-2-community .actions,\n#group-2-community .card-actions",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".card.v2.preview-card",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card.with-actions .actions,\n.card.v2.v2-home-nextup.preview-card.with-actions .actions",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .card-content,\n.card.v2.v2-home-nextup.preview-card .card-content",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .preview-row-scroll,\n#homeSection #currentlyWatchingScroll",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card.v2-home-cw",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card.v2-home-nextup",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .curated-card.v2-home-curated",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".docx spec) === */\n.card.v2.v2-home-cw.preview-card,\n.home-card",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .poster,\n.home-card .poster",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": "#0b0d12;\n  object-fit: cover;\n  margin-bottom: 8px;\n}\n\n.card.v2.v2-home-cw.preview-card .card-content,\n.home-card .card-content",
    "file": "styles\\home-layout.css",
    "type": "id"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .title,\n.home-card .home-title",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .meta,\n.home-card .home-meta",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .actions,\n.home-card .row2",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".card.v2.v2-home-cw.preview-card .actions button,\n.home-card .row2 button",
    "file": "styles\\home-layout.css",
    "type": "class"
  },
  {
    "selector": ".css\n * Purpose: Minimal fix for rail scrolling, card sizing, and viewport issues\n * Scope: Only affects #clean-root and descendants\n */\n\n/* 1. Root sizing sanity - normalize viewport calculations */\nhtml, body, #clean-root",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": ". Card sizing - prevent inflation */\n#clean-root .rail > .card",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": ". Poster sizing - maintain aspect ratio */\n#clean-root .rail .card .poster,\n#clean-root .rail .card .thumb,\n#clean-root .rail .card img,\n#clean-root .rail .card video",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .rail .card .poster,\n#clean-root .rail .card .thumb",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": ".css hidden */\n    overflow-y: hidden;\n    display: flex;\n    flex-wrap: nowrap;\n    gap: 12px;\n    padding: 0 12px;\n    scroll-snap-type: x mandatory;\n    align-items: flex-start;\n    box-sizing: border-box;\n}\n\n/* Override any conflicting rail rules from other CSS files */\n#clean-root .home-preview-row .rail,\n#clean-root .clean-group .rail",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .rail > .card",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": ".css expectations */\n  flex: 0 0 200px;\n  width: 200px;\n  max-width: 200px;\n  display: block;\n  box-sizing: border-box;\n  /* set an explicit card height for 2:3 media + buttons */\n  height: calc(200px * 1.5 + 120px); /* 300px + 120px = 420px */\n  overflow: visible; /* Allow buttons to show */\n}\n\n/* make the actual media fill the 2:3 box correctly, overriding legacy image rules */\n#clean-root .rail > .card img.poster,\n#clean-root .rail > .card img,\n#clean-root .rail > .card video",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": ".curated-row .card */\n#clean-root .rail.rail > .card.card",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": ".5 + 120px); /* 300px + 120px = 420px */\n    flex-basis: 200px;\n  }\n}\n\n/* === Set CSS variable for card width === */\n:root",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .rail > .card .cw-actions",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .rail > .card .cw-actions button",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .rail > .card .poster-wrap",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": ".2); /* 240px - reduced to make room for actions */\n  height: calc(200px * 1.2); /* 240px - reduced to make room for actions */\n}\n\n/* === Fix image overflow with higher specificity === */\n#clean-root .rail > .card .poster-wrap img",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .rail > .card .poster-container",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": ".2); /* 240px for poster area - reduced to make room for actions */\n  padding-top: 0;\n  aspect-ratio: auto;\n  display: block;\n  box-sizing: border-box;\n  position: relative;\n}\n\n/* === Poster/fallback arbitration: show ONE thing, not both === */\n/* Fallback visible by default */\n#clean-root .rail > .card .poster-fallback",
    "file": "styles\\home-rails-fix.css",
    "type": "class"
  },
  {
    "selector": "#clean-root .rail > .card .poster-container.is-ready .poster-fallback",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": "#clean-root .rail > .card img.poster,\n#clean-root .rail > .card img.poster-fallback-img,\n#clean-root .rail > .card img,\n#clean-root .rail > .card video",
    "file": "styles\\home-rails-fix.css",
    "type": "id"
  },
  {
    "selector": ".css */\n\n/* === Home Frame Normalization =========================================== */\n:root",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ". Update in one place if design changes. */\n  --home-frame-gutter: 32px;\n}\n\n/* Remove upstream caps so Home can actually reach the frame width */\nmain#panels,\n#homeSection,\n.home-content",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".css) */\n#group-1-your-shows.home-group,\n#group-2-community.home-group,\n#group-3-for-you.home-group,\n#group-4-theaters.home-group,\n#group-5-feedback.home-group",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".css */\n\n/* Rail layout rules moved to home-layout.css for proper cascade control */\n\n/* === Your Shows: actions layout (2Ã—2), centered ========================= */\n#group-1-your-shows :is(.actions, .card-actions)",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows :is(.actions, .card-actions)\n  :is(button, [role=\"button\"], a.button)",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".home-content",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: Quote bar positioned between search and tabs */\n.quote-bar, #quote-bar",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: No gap above, minimal below */\n  padding: var(--space-sm) var(--space-md);\n  border-radius: var(--space-sm);\n  background-color: var(--bg-elevated, #f8f9fa);\n  border: 1px solid var(--border, #ddd);\n  display: block;\n}\n\n/* H1: Home groups - Visual styling only (layout moved to home-layout.css) */\n.home-group",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".12);\n  /* Layout properties moved to home-layout.css */\n}\n\n/* H1: Preview rows - Layout moved to home-layout.css */\n/* Visual styling only preserved here */\n\n/* H1: Card sizing alignment (use unified vars; do not hardcode px in other files) */\n.preview-card,\n.unified-card,\n.tab-section .list-container .poster-card",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-poster,\n.unified-card-poster",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".community-content",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".community-left iframe,\n.community-left .video-frame,\n.community-left .embed-responsive",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".community-right #home-games,\n.community-right .games-grid",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".home-content .left-column,\n.home-content .flickword-card",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".home-content #bingeMeter",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: home wrapper sizing */\n#homeSection.home-content:not([hidden])",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#homeSection",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .page-shell, #homeSection .container, #homeSection .wrapper",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".1: Normalize vertical rhythm (even spacing between containers) */\n/* Section spacing - REMOVED conflicting .home-group padding rule for frame normalization */\n.home-content .home-group + .home-group",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#quote-bar, .quote-bar",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".home-content .preview-row,\n.home-content .home-preview-row",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".home-group */\n}\n/* Rail layout rules moved to home-layout.css */\n\n/* Ensure normal flow in the Your Shows group only */\n#group-1-your-shows",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows > .home-preview-row",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows #up-next-row.home-preview-row",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".05);\n}\n\n/* Currently Watching card actions grid */\n.cw-card .action-grid",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".cw-card .action-grid .btn",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".nu-card .meta",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  opacity: 0.85;\n  margin-top: 8px;\n}\n.nu-card .meta .line",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".card .poster-wrap",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#up-next-row, .up-next-row",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".1: Header spacing - override main.css fixed positioning */\n#appRoot > header.header, header.header, .header",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: Minimal space between header and search - force override */\n  position: static ; /* H1.1: Make header scroll with page - force override */\n  z-index: auto ; /* H1.1: Remove high z-index - force override */\n  top: auto ; /* H1.1: Remove fixed positioning - force override */\n  left: auto ; /* H1.1: Remove fixed positioning - force override */\n  right: auto ; /* H1.1: Remove fixed positioning - force override */\n  height: auto ; /* H1.1: Remove fixed height - force override */\n  width: auto ; /* H1.1: Remove fixed width - force override */\n  box-shadow: none ; /* H1.1: Remove fixed header shadow - force override */\n  border-bottom: none; /* H1.1: Remove red border */\n}\n\n/* H1.1: Search bar sticky behavior */\n.top-search, #search-container.top-search",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#fff);\n  border-bottom: 1px solid var(--border, #ddd);\n  margin-top: 20px; /* Add space between header and search bar */\n  margin-bottom: 0; /* H1.1: Quote bar handles spacing */\n}\n\n/* H1.1: Override main.css margin-top: 130px rule with higher specificity */\n#appRoot .top-search, #appRoot #search-container.top-search",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".1: Force override of main.css 130px margin */\n}\n\n/* H1.1: Override main-container padding that creates gap between search and quote */\n#appRoot.main-container",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: Remove padding that creates gap */\n}\n\n/* H1.1: Force tabs close to quote bar with higher specificity */\n#appRoot #navigation.tab-container, #appRoot .tab-container[role=\"tablist\"]",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: Force minimal gap to quote bar */\n}\n\n/* H1.1: Tabs: even, tab-like, not sticky */\n/* Scope to the nav container so we don't touch other tablists */\n#navigation.tab-container, .tab-container[role=\"tablist\"], [role=\"tablist\"].tab-container",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#ddd);\n  padding: 8px 4px; \n  margin: 2px 0 20px 0; /* H1.1: Minimal top margin to quote bar, bottom margin for content */\n  position: static ; /* H1.1: Force tabs to scroll with page */\n  top: auto ; /* H1.1: Remove any sticky positioning */\n  z-index: auto ; /* H1.1: Remove high z-index */\n  height: auto ;\n  min-height: 40px ;\n  visibility: visible ;\n  opacity: 1 ;\n}\n.tab-container [role=\"tab\"], .tab-container .tab",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".tab-container [role=\"tab\"].is-active,\n.tab-container [aria-selected=\"true\"],\n.tab-container .tab.is-active",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": "#ddd);\n  border-bottom-color: var(--primary, #2563eb);\n  background: var(--bg-elevated, #fff);\n  color: var(--text, #111);\n}\n/* Hover affordance */\n.tab-container [role=\"tab\"]:hover,\n.tab-container .tab:hover",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": "#fff) 90%, #000 10% / 6%); }\n\n/* H1.1: Duplicate up-arrow: keep #scrollTopBtn, hide/remove any legacy arrow */\n/* Common legacy selectors to neutralize; safe, layout-only */\n.legacy-up, .up-arrow, .scroll-to-top, .fab .icon-up, .fab-up",
    "file": "styles\\home.css",
    "type": "id"
  },
  {
    "selector": ".1: Guard against some ancestor creating a containing block that clips children */\n/* If #appRoot or .panels accidentally has transform/contain set elsewhere, neutralize here */\n#appRoot, #appRoot > .panels",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".1: Let app root height be determined by content naturally */\n#appRoot",
    "file": "styles\\home.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n\r\n/* Per-rail width variables removed - now controlled by home-layout.css */\r\n/* These per-rail specials caused inconsistency and are replaced by centralized sizing */\r\n\r\n/* Notification System - Rules Compliant (v28.70+) */\r\n.notification",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff;\r\n  border: 2px solid #3b82f6;\r\n  border-radius: 12px;\r\n  padding: 16px 24px;\r\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\r\n  z-index: 20000;\r\n  opacity: 0;\r\n  transform: translate(-50%, -50%) scale(0.9);\r\n  transition: all 0.3s ease;\r\n  max-width: 400px;\r\n  text-align: center;\r\n}\r\n\r\n.notification--visible",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".notification--success",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#10b981;\r\n}\r\n\r\n.notification--error",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ef4444;\r\n}\r\n\r\n.notification--warning",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#f59e0b;\r\n}\r\n\r\n.notification--info",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1f2937;\r\n  margin: 0;\r\n}\r\n\r\n/* Quote Bar - Moved to card-system.css for standardization */\r\n\r\n/* Home Groups - MOVED to home-layout.css */\r\n/* Layout rules now handled by token-driven system */\r\n\r\n/* Placeholder Messages */\r\n.placeholder-message",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#666);\r\n  font-style: italic;\r\n  padding: 20px;\r\n  background: var(--card);\r\n  border-radius: 8px;\r\n  border: 2px dashed var(--border);\r\n}\r\n\r\n/* Modal Utility Styles */\r\n.modal-backdrop",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 10000;\r\n  visibility: visible;\r\n  opacity: 1;\r\n}\r\n\r\n.modal-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15);\r\n  position: relative;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-close",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#999;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.modal-close:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5;\r\n  color: #333;\r\n}\r\n\r\n/* Auth Modal Styles - Phase B: Class-based visibility */\r\n.auth-modal-backdrop",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".5);\r\n  z-index: 20000; /* Above Share/Games modals */\r\n  display: none;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.auth-modal-backdrop.is-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".auth-modal-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3);\r\n  border: 3px solid #1976d2;\r\n  position: relative;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  transform: scale(0.9) translateY(20px);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.auth-modal-backdrop.is-active .auth-modal-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".auth-modal-content h2",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#1976d2;\r\n  text-align: center;\r\n}\r\n\r\n.auth-modal-content p",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#666;\r\n  text-align: center;\r\n}\r\n\r\n.auth-buttons",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".auth-button",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s;\r\n}\r\n\r\n.auth-button--google",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#4285f4;\r\n  color: white;\r\n}\r\n\r\n.auth-button--google:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#3367d6;\r\n}\r\n\r\n.auth-button--apple",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#000;\r\n  color: white;\r\n}\r\n\r\n.auth-button--apple:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#333;\r\n}\r\n\r\n.auth-button--email",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5;\r\n  color: #333;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.auth-button--email:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#e8e8e8;\r\n}\r\n\r\n.auth-button--primary",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1976d2;\r\n  color: white;\r\n}\r\n\r\n.auth-button--primary:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1565c0;\r\n}\r\n\r\n.auth-button--cancel",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#f5f5f5;\r\n  color: #333;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.auth-button--cancel:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#e8e8e8;\r\n}\r\n\r\n.auth-button--danger",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#dc2626;\r\n  color: white;\r\n}\r\n\r\n.auth-button--danger:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#b91c1c;\r\n}\r\n\r\n/* Signout Modal - Matches auth modal design */\r\n.signout-modal-backdrop",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".5);\r\n  z-index: 20000; /* Same as auth modal */\r\n  display: none;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.signout-modal-backdrop.is-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".signout-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1),\r\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\r\n  position: relative;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.signout-modal h2",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#1f2937;\r\n  text-align: center;\r\n}\r\n\r\n.signout-modal p",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#6b7280;\r\n  text-align: center;\r\n  font-size: 14px;\r\n}\r\n\r\n/* Mobile responsive for modals */\r\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".auth-modal-content,\r\n  .signout-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".auth-modal-content h2,\r\n  .signout-modal h2",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".modal-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".email-modal .form-group",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".email-modal .form-group:last-of-type",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".email-modal label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#333;\r\n}\r\n\r\n.email-modal input",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.email-modal input:focus",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1976d2;\r\n  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);\r\n}\r\n\r\n.error-message",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".tab-badge",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-badge--hidden",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-badge--visible",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#666);\r\n  font-style: italic;\r\n  text-align: left;\r\n  margin: 4px 0;\r\n  pointer-events: none;\r\n  z-index: auto;\r\n  font-weight: 500;\r\n}\r\n\r\n/* Provider Modal Styling */\r\n.modal-backdrop",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".modal-backdrop .modal-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".feedback-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#667eea 0%, #764ba2 100%);\r\n  margin: 0;\r\n  padding: 20px;\r\n  color: var(--text);\r\n  line-height: 1.5;\r\n  min-height: var(--app-root-min-height);\r\n  overflow-x: var(--app-root-overflow-x);\r\n  /* Ensure sticky positioning works */\r\n  overflow-y: var(--app-root-overflow-y);\r\n  /* Reserve space so content isn't covered by floating buttons */\r\n  padding-bottom: calc(env(safe-area-inset-bottom) + 120px);\r\n}\r\n\r\n.dark-mode",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1a1a1a;\r\n  --text: #f5f5f5;\r\n  --card: #2a2a2a;\r\n  --surface: #1e1e1e;\r\n  --s-4: 1rem;\r\n  --r-2: 8px;\r\n  --fs-0: 1rem;\r\n  --shadow-1: 0 2px 4px rgba(0, 0, 0, 0.3);\r\n  --border: #404040;\r\n  --text-secondary: #b0b0b0;\r\n  background: #ffffff; /* Override dark gradient with white */\r\n}\r\n\r\n.dark-mode .main-container",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".2);\r\n}\r\n\r\n.dark-mode .tab-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .tab",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .tab:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1) ;\r\n  color: var(--text) ;\r\n}\r\n\r\n.dark-mode .tab.is-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .section-title,\r\n.dark-mode .preview-row-title,\r\n.dark-mode h2,\r\n.dark-mode h3",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .preview-row-header h3",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .tab-badge",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff ;\r\n  --text: #1f2937 ;\r\n  --fg: #1f2937 ;\r\n  --fg-default: #1f2937 ;\r\n  --fg-muted: #6b7280 ;\r\n  --fg-subtle: #7f8c8d ;\r\n  --fg-on-elevated: #111827 ;\r\n  --text-secondary: #666 ;\r\n  --card: #ffffff ;\r\n  --border: #e5e7eb ;\r\n  \r\n  /* Spacing tokens for vertical rhythm */\r\n  --stack: 16px;\r\n  --stack-sm: 12px;\r\n}\r\n\r\n/* Home preview row wrappers - MOVED to home-layout.css */\r\n/* Layout rules now handled by token-driven system */\r\n\r\n/* Tab state management - home-only elements */\r\n.home-only",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".tab-home .home-only",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#2563eb ;\r\n  --primary: #e91e63 ;\r\n  --surface: #f9f9f9 ;\r\n  --bg-page: #ffffff ;\r\n  --bg-elevated: #f7f7f9 ;\r\n}\r\n\r\n/* Force light theme on body */\r\nbody",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff ;\r\n  color: #1f2937 ;\r\n}\r\n\r\n/* Override any dark mode classes */\r\n.dark-mode,\r\n[data-theme=\"dark\"],\r\n[data-theme=\"mardi\"]",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff ;\r\n  --text: #1f2937 ;\r\n  --fg: #1f2937 ;\r\n  --fg-default: #1f2937 ;\r\n  --fg-muted: #6b7280 ;\r\n  --fg-subtle: #7f8c8d ;\r\n  --fg-on-elevated: #111827 ;\r\n  --text-secondary: #666 ;\r\n  --card: #ffffff ;\r\n  --border: #e5e7eb ;\r\n  --accent: #2563eb ;\r\n  --primary: #e91e63 ;\r\n  --surface: #f9f9f9 ;\r\n  --bg-page: #ffffff ;\r\n  --bg-elevated: #f7f7f9 ;\r\n  background: #ffffff ;\r\n  color: #1f2937 ;\r\n}\r\n\r\n/* Fix specific containers that use dark CSS variables */\r\n.dark-mode .main-container,\r\n.dark-mode .home-group,\r\n.dark-mode .preview-card,\r\n.dark-mode .unified-card,\r\n.dark-mode .list-container",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff;\r\n}\r\n\r\n/* FORCE TAB VISIBILITY - Ensure tabs are always visible */\r\n.tab-container,\r\n#navigation,\r\n[role=\"tablist\"]",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  height: 48px;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.tab-container .tab,\r\n#navigation .tab,\r\n[role=\"tablist\"] .tab",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1f2937;\r\n  background: transparent;\r\n  border: none;\r\n  padding: 12px 16px;\r\n  margin: 0;\r\n  flex: 1 1 0;\r\n  min-height: 44px;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* OVERRIDE SEARCH HIDING - Force tabs to always be visible */\r\n.tab-container,\r\n#navigation,\r\n[role=\"tablist\"]",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  height: 48px;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n/* Handle .hidden class on tabs - simplified without  */\r\n.tab.hidden",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".has-search .tab-container,\r\nbody.has-search #navigation,\r\nbody.has-search [role=\"tablist\"],\r\n#appRoot.has-search .tab-container,\r\n#appRoot.has-search #navigation,\r\n#appRoot.has-search [role=\"tablist\"]",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode body,\r\n.dark-mode html",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff; /* Force white background */\r\n}\r\n\r\n/* All text elements inherit proper colors */\r\n.dark-mode p,\r\n.dark-mode span,\r\n.dark-mode div,\r\n.dark-mode h1,\r\n.dark-mode h2,\r\n.dark-mode h3,\r\n.dark-mode h4,\r\n.dark-mode h5,\r\n.dark-mode h6,\r\n.dark-mode a,\r\n.dark-mode li,\r\n.dark-mode td,\r\n.dark-mode th,\r\n.dark-mode label,\r\n.dark-mode input,\r\n.dark-mode textarea,\r\n.dark-mode select",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".dark-mode .text-secondary,\r\n.dark-mode .subtitle,\r\n.dark-mode .description,\r\n.dark-mode .meta,\r\n.dark-mode .caption",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .container,\r\n.dark-mode .wrapper,\r\n.dark-mode .content,\r\n.dark-mode .main,\r\n.dark-mode .panel,\r\n.dark-mode .box",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .row-inner,\r\n.dark-mode .preview-row-container,\r\n.dark-mode .scroll-container,\r\n.dark-mode .list-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .loading,\r\n.dark-mode .error,\r\n.dark-mode .success,\r\n.dark-mode .info,\r\n.dark-mode .warning",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode input[type='text'],\r\n.dark-mode input[type='email'],\r\n.dark-mode input[type='password'],\r\n.dark-mode textarea",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .movie-card,\r\n.dark-mode .show-card,\r\n.dark-mode .card-content,\r\n.dark-mode .card-description,\r\n.dark-mode .card-title,\r\n.dark-mode .card-meta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .card-description",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .theaters-near-me,\r\n.dark-mode .theater-section,\r\n.dark-mode .theater-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .card__title,\r\n.dark-mode .card-title,\r\n.dark-mode .show-title,\r\n.dark-mode .preview-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .search-input,\r\n.dark-mode .genre-filter",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .search-input:focus,\r\n.dark-mode .genre-filter:focus",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.dark-mode .flickword-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1: fence legacy card rules to desktop to avoid mobile collisions */\r\n@media (min-width: calc(var(--bp-mobile) + 1px))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .show-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".mardi .header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".mardi .tab",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".mardi .settings-tabs button",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5) ;\r\n}\r\n\r\n.mardi .settings-tabs button:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05) ;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n.mardi .settings-tabs button.active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  border: 2px solid var(--mardi2) ;\r\n  border-radius: 10px ;\r\n}\r\n\r\n/* Mardi Gras Main Tabs */\r\n.mardi .tab-container .tab",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5) ;\r\n}\r\n\r\n.mardi .tab-container .tab:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05); /* PART2C */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n.mardi .tab-container .tab.is-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".mardi .card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  border: 2px solid var(--mardi2) ;\r\n  border-radius: 10px ;\r\n}\r\n\r\n.mardi .card:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3) ;\r\n}\r\n\r\n/* Mardi Gras Buttons */\r\n.mardi .btn.primary",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05) ;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n/* Mardi Gras Game Boxes (FlickWord & Daily Trivia) */\r\n.mardi .game-box",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15), rgba(40, 167, 69, 0.15)) ;\r\n  border: 3px solid var(--mardi2) ;\r\n  border-radius: 15px ;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;\r\n}\r\n\r\n.mardi .game-box:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5) ;\r\n  border-radius: 8px ;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) ;\r\n}\r\n\r\n.mardi .game-play-btn:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05) ;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n.mardi .game-stats",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  border: 1px solid var(--mardi2) ;\r\n  border-radius: 8px ;\r\n}\r\n\r\n.mardi .stat-value",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2) ;\r\n}\r\n\r\n/* Mardi Gras FlickWord Card */\r\n.mardi .flickword-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  border: 3px solid var(--mardi2) ;\r\n  border-radius: 15px ;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;\r\n}\r\n\r\n.mardi .flickword-card:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05) ;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n/* Mardi Gras Trivia Elements */\r\n.mardi .trivia-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  border: 3px solid var(--mardi2) ;\r\n  border-radius: 15px ;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;\r\n}\r\n\r\n.mardi .trivia-card:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05), rgba(40, 167, 69, 0.05)) ;\r\n}\r\n\r\n.mardi .trivia-choices li:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(40, 167, 69, 0.1)) ;\r\n  transform: scale(1.02) ;\r\n}\r\n\r\n.mardi .trivia-actions .btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05) ;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;\r\n}\r\n\r\n.main-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6s ease-out;\r\n}\r\n\r\n.header-bar",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header-center",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header-left",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header-right",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\r\n  color: var(--primary);\r\n  font-weight: 800;\r\n  letter-spacing: 0.2px;\r\n}\r\n\r\n.subtitle",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".mobile-header-layout",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffd43b;\r\n}\r\n\r\n.like-display,\r\n.dislike-display",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".1rem;\r\n  opacity: 0.3;\r\n  transition: opacity 0.2s ease;\r\n}\r\n\r\n.like-display.active,\r\n.dislike-display.active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n/* Layout rules now handled by token-driven system */\r\n\r\n.preview-row-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\r\n  font-weight: 700;\r\n  color: var(--text);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.preview-row-header .section-subtitle",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  color: var(--text-secondary);\r\n  font-weight: 400;\r\n}\r\n\r\n.preview-row-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-row-scroll layout rules moved to home-layout.css */\r\n\r\n.preview-row-scroll::-webkit-scrollbar",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2);\r\n  border-radius: 8px;\r\n}\r\n\r\n.preview-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease,\r\n    box-shadow 0.2s ease;\r\n  cursor: pointer;\r\n  position: relative;\r\n  display: flex ;\r\n  flex-direction: column ;\r\n  height: auto ;\r\n  width: var(--card-w) ;\r\n}\r\n\r\n.preview-card:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15);\r\n}\r\n\r\n.preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-poster img",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-poster-placeholder",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".65rem ;\r\n  font-weight: 600;\r\n  color: var(--text);\r\n  margin: 0 0 1px 0 ;\r\n  line-height: 1.1 ;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1 ;\r\n  line-clamp: 1 ;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n\r\n.preview-card-year",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".55rem ;\r\n  color: var(--text-secondary);\r\n  margin: 0;\r\n  line-height: 1 ;\r\n}\r\n\r\n.preview-card-status",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5rem ;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.2px;\r\n}\r\n\r\n.preview-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\r\n  display: flex;\r\n  gap: 1px;\r\n}\r\n\r\n.preview-card:hover .preview-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 2px ;\r\n  padding: 1px 2px ;\r\n  font-size: 0.5rem ;\r\n  cursor: pointer;\r\n  transition: background 0.2s ease;\r\n  min-width: 16px ;\r\n  height: 16px ;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.preview-action-btn:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9);\r\n}\r\n\r\n/* Dark mode adjustments for preview row - MOVED to home-layout.css */\r\n\r\n.dark-mode .preview-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease,\r\n    box-shadow 0.2s ease;\r\n  position: relative;\r\n  display: flex ;\r\n  flex-direction: column ;\r\n  height: auto ;\r\n  width: var(--card-w) ;\r\n}\r\n\r\n/* Detail variant for tabs - horizontal layout */\r\n.unified-card--detail",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15);\r\n}\r\n\r\n/* Poster Area */\r\n.unified-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card--detail .unified-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster-image",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster-skeleton",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200% 100%;\r\n  animation: skeleton-loading 1.5s infinite;\r\n}\r\n\r\n@keyframes skeleton-loading",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".unified-card-poster-brand",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster-placeholder",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease;\r\n  padding: 12px;\r\n}\r\n\r\n.unified-card:hover .unified-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card--detail .unified-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-action-btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9);\r\n  color: var(--text);\r\n  border: none;\r\n  border-radius: 6px;\r\n  padding: 8px 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  min-width: 120px;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.unified-card-action-btn:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15);\r\n}\r\n\r\n.unified-card-action-btn:active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-action-icon",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n}\r\n\r\n.unified-card-action-label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* Content Area */\r\n.unified-card-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card--detail .unified-card-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\r\n  font-weight: 600;\r\n  color: var(--text);\r\n  margin: 0 0 2px 0;\r\n  line-height: 1.2;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-align: center;\r\n}\r\n\r\n/* Detail variant title - larger */\r\n.unified-card--detail .unified-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3 ;\r\n  display: block;\r\n  -webkit-line-clamp: initial;\r\n  line-clamp: initial;\r\n  -webkit-box-orient: initial;\r\n  overflow: visible;\r\n  text-align: left;\r\n}\r\n\r\n.unified-card-subtitle",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  color: var(--text-secondary);\r\n  margin: 0 0 4px 0;\r\n  line-height: 1;\r\n  text-align: center;\r\n}\r\n\r\n.unified-card-rating",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  color: var(--accent);\r\n  text-align: center;\r\n  margin: 0;\r\n}\r\n\r\n/* Detail variant rating input */\r\n.unified-card-rating-input",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-rating-input label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  color: var(--text-secondary);\r\n  font-weight: 500;\r\n}\r\n\r\n.unified-card-rating-select",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  min-width: 120px;\r\n}\r\n\r\n/* Detail variant notes */\r\n.unified-card-notes",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-notes label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  color: var(--text-secondary);\r\n  font-weight: 500;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.unified-card-note-input",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  resize: vertical;\r\n  min-height: 40px;\r\n  font-family: inherit;\r\n}\r\n\r\n/* Pro action buttons */\r\n.unified-card-action-btn--pro",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ff6b6b, #ff8e8e) ;\r\n  color: white ;\r\n  border: 1px solid #ff6b6b ;\r\n}\r\n\r\n.unified-card-action-btn--pro:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ff5252, #ff7979) ;\r\n}\r\n\r\n/* Danger action buttons */\r\n.unified-card-action-btn--danger",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".9) ;\r\n  color: white ;\r\n}\r\n\r\n.unified-card-action-btn--danger:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".95) ;\r\n}\r\n\r\n/* Episode Tracking Modal */\r\n.episode-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-overlay",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5);\r\n  cursor: pointer;\r\n}\r\n\r\n.episode-modal-dialog",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3);\r\n  max-width: 500px;\r\n  width: 90%;\r\n  max-height: 80vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.episode-modal-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-header h3",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2rem;\r\n}\r\n\r\n.episode-modal-close",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\r\n  color: var(--text-secondary);\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.episode-modal-close:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-modal-body",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.episode-btn--primary",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-btn--primary:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-btn--secondary",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".episode-btn--secondary:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2rem;\r\n  cursor: pointer;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  transition: all 0.3s ease;\r\n  z-index: 1000;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transform: translateY(20px);\r\n  pointer-events: none; /* Safe default: not interactive when invisible */\r\n}\r\n\r\n.back-to-top.visible",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3);\r\n}\r\n\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card.draggable",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\r\n}\r\n\r\n.unified-card.draggable:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2);\r\n}\r\n\r\n.unified-card.dragging",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5;\r\n  transform: rotate(5deg);\r\n  cursor: grabbing;\r\n  z-index: 1000;\r\n}\r\n\r\n.unified-card.drag-over",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1);\r\n}\r\n\r\n.unified-card.drag-over::before",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  font-weight: 500;\r\n  z-index: 1001;\r\n  pointer-events: none;\r\n}\r\n\r\n/* Mobile Adjustments */\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".65rem;\r\n    min-width: 80px;\r\n  }\r\n\r\n  .unified-card-action-label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  }\r\n\r\n  .unified-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".65rem;\r\n  }\r\n\r\n  .unified-card-subtitle",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".55rem;\r\n  }\r\n\r\n  .unified-card-rating",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".55rem;\r\n  }\r\n\r\n  /* Detail variant mobile adjustments */\r\n  .unified-card--detail",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".unified-card--detail .unified-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .unified-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .unified-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .unified-card-poster-placeholder",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .unified-card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".85);\r\n}\r\n\r\n.dark-mode .unified-card-action-btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9);\r\n  color: var(--text);\r\n}\r\n\r\n.dark-mode .unified-card-action-btn:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".\r\n   Desktop: 184px width, 276px height (2:3 aspect ratio)\r\n   Mobile: 64px width, 96px height (2:3 aspect ratio)\r\n   Use these dimensions for all home page card sections.\r\n*/\r\n\r\n/* Card dimensions moved to design-tokens.css */\r\n\r\n/* Aspect ratio enforcement to prevent CLS */\r\n.show-poster,\r\n.poster-placeholder,\r\n.preview-card-poster,\r\n.preview-card-poster img",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".show-poster[src=''],\r\n.poster-placeholder:empty",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container::after",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3s ease;\r\n}\r\n\r\n.tab-section .list-container.scrollable::after",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container::before",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3s ease;\r\n}\r\n\r\n.tab-section .list-container.scrollable-left::before",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\r\n}\r\n\r\n/* Tab card poster section - left side on desktop */\r\n.tab-section .list-container .poster-card .poster-card__poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3 ;\r\n  color: var(--text) ;\r\n}\r\n\r\n/* Tab card meta information */\r\n.tab-section .list-container .poster-card .poster-card__meta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__rating",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__move-buttons",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__move-buttons button",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease ;\r\n}\r\n\r\n.tab-section .list-container .poster-card .poster-card__move-buttons button:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__overflow-btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease ;\r\n}\r\n\r\n.tab-section .list-container .poster-card .poster-card__overflow-btn:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section .list-container .poster-card .poster-card__meta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#currentlyWatchingScroll layout rules moved to home-layout.css */\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner > *",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".css */\r\n  display: flex ;\r\n  flex-direction: column ;\r\n  border-radius: 8px;\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster img,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .poster,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .show-poster,\r\n.cw-row\r\n  #currentlyWatchingScroll.preview-row-scroll.row-inner\r\n  .preview-card-poster\r\n  .poster-placeholder",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-content,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\r\n  font-weight: 600;\r\n  color: var(--text);\r\n  margin: 0 0 2px 0;\r\n  line-height: 1.2;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-align: center;\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-year",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  color: var(--text-secondary);\r\n  margin: 0;\r\n  line-height: 1;\r\n  text-align: center;\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-title,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .title",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  line-height: 1.1;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-status",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".95);\r\n  color: white;\r\n  padding: 2px 6px;\r\n  border-radius: 6px;\r\n  font-size: 0.5rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.2px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-stamp,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-pill",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".65rem;\r\n  padding: 2px 6px;\r\n  border-radius: 999px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .card-actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .card-actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .actions,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .card-actions",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .action-grid-2x2,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .action-grid-2x2,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .action-grid-2x2",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .action-row,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .action-row,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .action-row",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions .btn,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .action-btn,\r\n.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .more-btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2);\r\n  border-radius: 8px;\r\n}\r\n\r\n/* #up-next-row .row-inner layout rules moved to home-layout.css */\r\n\r\n/* Match Currently Watching sizing - width controlled by home-layout.css */\r\n#up-next-row .row-inner > *",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 8px;\r\n  position: relative;\r\n}\r\n\r\n/* Poster frame - width controlled by home-layout.css */\r\n#up-next-row .row-inner .media",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n  height: var(--home-card-height-desktop); /* Standard home page card height */\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  flex-shrink: 0;\r\n}\r\n#up-next-row .row-inner .media img",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem; /* Match Currently Watching font size */\r\n  font-weight: 600; /* Match Currently Watching font weight */\r\n  line-height: 1.2;\r\n  color: var(--text);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  text-align: center; /* Match Currently Watching text alignment */\r\n}\r\n\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#111); /* fallback token */\r\n}\r\n#spotlight-row .spotlight-video iframe,\r\n#spotlight-row .spotlight-video .thumb",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 8px;\r\n  color: var(--text);\r\n}\r\n#spotlight-row .spotlight-credit",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  opacity: 0.8;\r\n  margin-bottom: 12px;\r\n  color: var(--text-secondary, #666);\r\n}\r\n#spotlight-row .spotlight-desc",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  line-height: 1.4;\r\n  max-height: 4.2em; /* ~3 lines */\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  color: var(--text);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n#spotlight-row .spotlight-badges",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\r\n  padding: 4px 8px;\r\n  border-radius: 999px;\r\n  background: var(--surface-3, #222);\r\n  color: var(--text);\r\n}\r\n\r\n#spotlight-row .spotlight-cta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#e91e63);\r\n  color: white;\r\n  border: 2px solid var(--primary, #e91e63);\r\n  padding: 12px 24px;\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  border-radius: 8px;\r\n  transition: all 0.2s ease;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#spotlight-row .spotlight-cta .btn:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#c2185b);\r\n  border-color: var(--primary-dark, #c2185b);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n#spotlight-row .spotlight-cta .btn:active",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".1);\r\n}\r\n\r\n/* Mobile: stack vertically, video on top */\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#feedback-row .feedback-card",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#f8f9fa);\r\n  border: 1px solid var(--border, #dee2e6);\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n#feedback-row .feedback-card:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".1);\r\n  border-color: var(--primary, #e91e63);\r\n}\r\n\r\n#feedback-row .feedback-icon",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".95rem;\r\n  font-weight: 600;\r\n  color: var(--text, #121212);\r\n  margin-bottom: 2px;\r\n}\r\n\r\n#feedback-row .feedback-sub",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  opacity: 0.85;\r\n  color: var(--text-secondary, #666);\r\n  line-height: 1.3;\r\n}\r\n\r\n#feedback-row .feedback-cta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".8rem;\r\n  padding: 6px 12px;\r\n  border-radius: 6px;\r\n}\r\n\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header-bar",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".header-left,\r\n  .header-right",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".btn--sm",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  line-height: 1.1;\r\n  padding: 6px 10px;\r\n  height: 36px;\r\n  border-radius: 10px;\r\n}\r\n.select--sm",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  line-height: 1.1;\r\n  padding: 4px 10px;\r\n  height: 36px;\r\n  border-radius: 10px;\r\n}\r\n.header-right > *",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\r\n  color: var(--text-secondary, #666);\r\n  text-align: center;\r\n  margin-bottom: 2px;\r\n  min-height: 1em;\r\n  opacity: 0.8;\r\n}\r\n\r\n/* Home section visibility is now handled by tab switching system */\r\n\r\n/* Ensure Next Up section is visible */\r\n#up-next-row",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n/* Layout rules now handled by token-driven system in home-layout.css */\r\n/* Visual styling (borders, shadows, radius) preserved in home.css */\r\n\r\n/* COMMUNITY LAYOUT v14 â€” simplified three-section layout */\r\n\r\n/* Two-column shell */\r\n.community-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".placeholder-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".placeholder-content h3",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".placeholder-content p",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".community-left .home-row-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n/* Layout rules now handled by token-driven system */\r\n\r\n/* Override preview row header and container */\r\n.community-left .preview-row-header,\r\n.community-left .preview-row-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".community-left iframe,\r\n.community-left .video-frame,\r\n.community-left .embed-responsive",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3s ease; /* Smooth transitions on zoom */\r\n  position: absolute; /* Fill the container */\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n/* Optional: if a given video is landscape, add .landscape to the wrapper */\r\n.community-left .landscape iframe",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".section-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".section-content h4",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".4;\r\n  color: var(--text);\r\n  font-style: italic;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n}\r\n\r\n/* FlickWord card styling - FlickFact feature removed */\r\n\r\n/* Game-specific styling - compact for small containers */\r\n.trivia-question",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".trivia-choices button,\r\n.trivia-choices li,\r\n.trivia-choices div",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2s ease;\r\n  font-size: 10px;\r\n  text-align: left;\r\n  margin-bottom: 2px;\r\n  word-wrap: break-word;\r\n  overflow-wrap: break-word;\r\n  line-height: 1.2;\r\n  min-height: 20px;\r\n}\r\n\r\n.trivia-choices button:hover,\r\n.trivia-choices li:hover,\r\n.trivia-choices div:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".flickword-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3s ease;\r\n  border-radius: 8px;\r\n  background: linear-gradient(135deg, var(--card) 0%, rgba(255, 255, 255, 0.05) 100%);\r\n  border: 1px solid var(--border);\r\n}\r\n\r\n.flickword-teaser:hover",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1) 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.teaser-icon",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".flickword-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".flickword-modal .modal-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".flickword-modal iframe",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".fw-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".fw-header h4",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".fw-key-back,\r\n.fw-key-enter",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".community-right .game-cards-wrapper",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".game-cards-wrapper",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".marquee-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".03);\r\n  border: 1px solid var(--border);\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.marquee-text",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5;\r\n  color: var(--text);\r\n  font-style: italic;\r\n  text-align: left;\r\n}\r\n\r\n/* Game cards share height and don't crowd the top */\r\n.flickword-section,\r\n.trivia-section",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".02);\r\n  border: 1px solid var(--border);\r\n  border-radius: 10px;\r\n  padding: clamp(12px, 1.5vw, 18px); /* Responsive padding */\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  flex: 0 0 auto; /* Don't grow/shrink, maintain fixed size */\r\n  height: clamp(160px, 15vh, 200px); /* Responsive height */\r\n  transition: all 0.3s ease; /* Smooth transitions on zoom */\r\n}\r\n\r\n/* Responsive stack */\r\n@media (max-width: var(--bp-tablet))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".community-content",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".community-left,\r\n  .community-right",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".flickword-section,\r\n  .trivia-section",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(34, 197, 94, 0.05));\r\n  border-color: rgba(34, 197, 94, 0.3);\r\n}\r\n\r\n.stats-row.pro-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1), rgba(59, 130, 246, 0.05));\r\n  border-color: rgba(59, 130, 246, 0.3);\r\n}\r\n\r\n.stats-row.pro-locked",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".02);\r\n  border-color: var(--border);\r\n  opacity: 0.6;\r\n}\r\n\r\n.stats-label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2);\r\n  color: rgb(21, 128, 61);\r\n}\r\n\r\n.stats-row.pro-active .stats-status",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2);\r\n  color: rgb(29, 78, 216);\r\n}\r\n\r\n.stats-row.pro-locked .stats-status",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1);\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.stats-summary",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15), rgba(34, 197, 94, 0.08));\r\n}\r\n\r\n.dark-mode .stats-row.pro-active",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".15), rgba(59, 130, 246, 0.08));\r\n}\r\n\r\n.dark-mode .stats-row.pro-locked",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".02);\r\n}\r\n\r\n/* Mobile responsive */\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".group-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".5rem;\r\n  font-weight: 700;\r\n  color: var(--text);\r\n  margin: 0;\r\n  padding: 0 0 8px 0;\r\n  border-bottom: 2px solid var(--primary);\r\n  display: inline-block;\r\n}\r\n\r\n.group-divider",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6;\r\n}\r\n\r\n/* Desktop: Two neat sub-rows with divider */\r\n@media (min-width: calc(var(--bp-mobile-lg) + 1px))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n\r\n  /* Snap scroll for carousels on mobile - moved to home-layout.css */\r\n}\r\n\r\n/* Next Up section specific styling */\r\n/* #up-next-row .preview-row-scroll layout rules moved to home-layout.css */\r\n\r\n#up-next-row .preview-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: var(--bg);\r\n  border-radius: 8px;\r\n  border: 1px solid var(--border);\r\n}\r\n\r\n#up-next-row .preview-card-poster",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#up-next-row .preview-card-content",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#up-next-row .preview-card-title",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".8rem;\r\n  font-weight: 600;\r\n  color: var(--text);\r\n  margin: 0 0 4px 0;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n#up-next-row .preview-card-year",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".7rem;\r\n  color: var(--text-secondary);\r\n  margin: 0;\r\n}\r\n\r\n#up-next-row .preview-card-status",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Mobile adjustments for Next Up */\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#up-next-row .preview-card",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#up-next-row .preview-card-poster",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".7rem;\r\n  }\r\n\r\n  #up-next-row .preview-card-year",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".6rem;\r\n  }\r\n}\r\n\r\n/* Collapsed section styling moved to home-layout.css */\r\n\r\n/* === HOME LAYOUT RULES MOVED TO home-layout.css === */\r\n/* \r\n * CRITICAL: All home page layout rules are now in home-layout.css\r\n * This file should NOT contain home layout rules to prevent conflicts\r\n * \r\n * If you need to modify home layout:\r\n * 1. Edit www/styles/home-layout.css\r\n * 2. Do NOT add home layout rules to this file\r\n * 3. Follow the CSS Architecture Guard rules\r\n */\r\n\r\n/* PERMANENT OVERRIDE: Force action-row elements to be contents for 2x2 grid */\r\n#homeSection .card.v2 .action-grid-2x2 .action-row,\r\n#homeSection .cw-card.v2 .action-grid-2x2 .action-row,\r\n#homeSection .v2-home-cw .action-grid-2x2 .action-row",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .card.v2 .actions .btn,\r\n#homeSection .cw-card.v2 .actions .btn,\r\n#homeSection .v2-home-cw .actions .btn",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".2;\r\n}\r\n\r\n/* NUCLEAR OPTION: Override ALL button sizing with maximum specificity */\r\n#homeSection .actions .btn,\r\n#homeSection .card-actions .btn,\r\n#homeSection .action-grid-2x2 .btn,\r\n#homeSection .action-row .btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".2;\r\n}\r\n\r\n/* Fix card spacing - ensure even spacing between cards */\r\n#homeSection .preview-row-scroll.row-inner,\r\n#homeSection #currentlyWatchingScroll",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".home-games",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#flickwordTile,\r\n#triviaTile,\r\n.home-games .game-card",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#fff);\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);\r\n  border: 1px solid var(--card-bd, #eaeaea);\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  transition:\r\n    transform 0.18s ease,\r\n    box-shadow 0.18s ease,\r\n    border-color 0.18s ease;\r\n  outline: none;\r\n}\r\n.game-card:hover,\r\n.game-card:focus",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".08);\r\n  border-color: var(--brand-200, #d7e3ff);\r\n}\r\n.gc-bg",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".18) 0%, rgba(120, 169, 255, 0) 60%),\r\n    linear-gradient(135deg, rgba(255, 255, 255, 0) 0%, rgba(120, 169, 255, 0.06) 100%);\r\n  pointer-events: none;\r\n}\r\n/* Head and tagline tighter */\r\n.gc-head",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  color: var(--muted, #6b7280);\r\n}\r\n\r\n/* Stats row fills middle section */\r\n.gc-stats",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".06);\r\n  border: 1px dashed rgba(120, 169, 255, 0.25);\r\n  text-align: center;\r\n  padding: 8px 6px;\r\n}\r\n.gc-stat-label",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\r\n  color: var(--muted, #6b7280);\r\n}\r\n.gc-stat-val",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".home-games .game-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".92rem;\r\n  line-height: 1.1;\r\n  align-self: flex-end; /* right-aligned within card */\r\n  margin-top: 10px;\r\n  font-weight: 700;\r\n  background: linear-gradient(135deg, var(--brand-500, #5a88ff), var(--brand-600, #3b6cff));\r\n  color: #fff;\r\n  border: 0;\r\n  transition:\r\n    filter 0.18s ease,\r\n    transform 0.18s ease;\r\n}\r\n.game-card:hover .gc-cta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".05);\r\n}\r\n.game-card:active .gc-cta",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#667eea 0%, #764ba2 100%);\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.flickword-hero-icon",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".flickword-hero-image,\r\n  .flickword-hero-placeholder",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\r\n  }\r\n}\r\n\r\n/* Enhanced FlickWord Stats Layout - Specific to FlickWord card */\r\n#flickwordTile .game-stats",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".75rem;\r\n  font-weight: 600;\r\n  color: var(--text-muted, #6b7280);\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.05em;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n#flickwordTile .game-stats .stat-value",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".25rem;\r\n  font-weight: 700;\r\n  color: var(--text-primary, #1f2937);\r\n  line-height: 1;\r\n}\r\n\r\n@media (max-width: var(--bp-mobile))",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1rem;\r\n  }\r\n}\r\n\r\n/* Game Modals - Phase E: Fenced with lower z-index than auth */\r\n.game-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".game-modal[aria-hidden='false']",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".45);\r\n  backdrop-filter: blur(2px);\r\n  z-index: 1;\r\n  pointer-events: auto;\r\n}\r\n/* --- Modal: make dialog a flexible column and the body fill the rest --- */\r\n.game-modal .gm-dialog",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff);\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n  z-index: 10001; /* Ensure it's above everything */\r\n  position: relative;\r\n  pointer-events: auto;\r\n  overflow: hidden; /* Prevent content from spilling out */\r\n}\r\n.game-modal[aria-hidden='false'] .gm-dialog",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".game-modal .gm-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#eaeaea);\r\n}\r\n\r\n.game-modal .gm-header h3",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".5rem;\r\n  font-weight: 800;\r\n  margin: 0;\r\n  color: var(--text, #1f2937);\r\n}\r\n\r\n.game-modal .gm-close",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".game-modal .gm-body",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#d7e3ff;\r\n  border-radius: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n/* On smaller screens, cards shrink in height naturally */\r\n@media (max-width: var(--bp-mobile-lg))",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#glickword-game, /* fallback if typo */\r\n#flickword-game",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#flickword-game,\r\n#dailytrivia-game",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".game-modal",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".game-modal .gm-dialog",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .game-card",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".dark-mode .gm-header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tabs-rail,\r\n.tab-container",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#searchResults,\r\n.search-results",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#7f8c8d */\r\n  font-size: 10px;\r\n  margin-right: 8px;\r\n  color: var(--fg-subtle);\r\n}\r\n\r\n.tab-version",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#666 italic */\r\n  font-size: 0.8rem;\r\n  font-style: italic;\r\n  color: var(--fg-muted);\r\n}\r\n.card-surface",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#333) on h5 etc. */\r\n  margin: 10px 0;\r\n  font-size: 0.9rem;\r\n  color: var(--fg-default);\r\n}\r\n/* Tabs/results already layered earlier â€” leave as-is */\r\n\r\n/* Auth visibility utility */\r\n[hidden]",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".account-signout button; username now toggles sign-out) */\r\n.user-btn",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".1: Allow natural height based on content */\r\n  min-height: auto; /* H1.1: Allow natural height based on content */\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n  padding-bottom: calc(var(--fab-size, 56px) + var(--fab-gap, 16px)); /* Reserve space for fixed FAB dock */\r\n}\r\n\r\n/* Header sticks at top - force it to stay on top */\r\n#appRoot > header.header",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff); /* Ensure solid background */\r\n  border-bottom: none; /* Remove red border */\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add shadow for separation */\r\n  width: 100%;\r\n  padding: 16px 0; /* Add padding to prevent cut-off */\r\n}\r\n\r\n/* Search sticks under header when visible */\r\n#appRoot > #search-container.top-search,\r\n#appRoot > .top-search",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff); /* Ensure solid background */\r\n  padding: 16px 0; /* Add padding to make it visible */\r\n  border-bottom: 1px solid var(--border, #e5e7eb); /* Visual separation */\r\n}\r\n\r\n/* Search row within search container - no need for sticky since container is sticky */\r\n#desktop-search-row,\r\n.search-row",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#appRoot > #navigation.tab-container,\r\n#appRoot > .tab-container,\r\n#appRoot > [role='tablist']",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#ffffff);\r\n  border: 1px solid var(--border, #e5e7eb);\r\n  border-radius: var(--r-2, 8px);\r\n  padding: var(--spacing-md, 12px) var(--spacing-lg, 16px);\r\n  margin: var(--spacing-lg, 16px) 0 var(--spacing-sm, 8px) 0;\r\n  text-align: center;\r\n  color: var(--fg, #1f2937);\r\n  min-height: 40px;\r\n  font-size: var(--fs-0, 1rem);\r\n  font-weight: normal;\r\n  font-style: italic;\r\n}\r\n\r\n.quote-marquee",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#1f2937);\r\n  font-size: var(--fs-0, 1rem);\r\n  font-weight: var(--font-weight-normal, normal);\r\n  font-style: italic;\r\n}\r\n\r\n/* Override conflicting CSS rules with higher specificity */\r\n#quote-bar .quote-text,\r\n.quote-bar .quote-text",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".tab-section[hidden], .tab-panel[hidden]",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".tab-section:not([hidden]), .tab-panel:not([hidden])",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#ffffff); /* Ensure solid background */\r\n}\r\n\r\n.tab-section:not([hidden]) > *:first-child",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": "#appRoot > .tab-container + .panels",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".fab-dock",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".3);\r\n  opacity: 0; \r\n  visibility: hidden;\r\n  transition: opacity .2s ease, visibility .2s ease, transform .08s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 36px;\r\n  font-weight: normal;\r\n}\r\n\r\n/* Fix arrow color and content */\r\n.scroll-top-btn::before",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".css */\r\n.fab-dock .fab,\r\n.fab-dock .fab-left,\r\n.fab-dock .fab-stack",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab-stack",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock #btnSettings,\r\n.fab-dock #btnSettings.fab-left",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#333);\r\n  font-size: 24px;\r\n  width: auto;\r\n  height: auto;\r\n  min-width: auto;\r\n  min-height: auto;\r\n  padding: 8px;\r\n}\r\n\r\n.fab-dock #btnSettings:hover,\r\n.fab-dock #btnSettings.fab-left:hover",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".8;\r\n}\r\n\r\n/* Tab Activation System - Home-only elements and search policy */\r\n\r\n/* Home-only elements: hidden by default, shown only on home tab */\r\n.home-only",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".top-search,\r\n.search-row",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#navigation,\r\n.tab-container,\r\nnav[role=\"tablist\"]",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".tab-home #homeSection:not([hidden])",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#homeSection",
    "file": "styles\\main.css",
    "type": "id"
  },
  {
    "selector": ".tab-watching #homeSection,\r\nbody.tab-wishlist #homeSection,\r\nbody.tab-watched #homeSection,\r\nbody.tab-discover #homeSection,\r\nbody.tab-settings #homeSection",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": ".has-search .top-search,\r\n.has-search .search-row",
    "file": "styles\\main.css",
    "type": "class"
  },
  {
    "selector": "#desktop-search-row,\n.search-row",
    "file": "styles\\mobile-hotfix.css",
    "type": "id"
  },
  {
    "selector": ".search-input,\n.search-area-input,\n#search,\n#genreSelect,\n.search-area-genre",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".search-buttons-row,\n.search-area-search,\n.search-area-clear",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".search-buttons-row .btn,\n#searchBtn,\n#clearSearchBtn,\n.search-btn,\n.clear-search-btn",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".1;\n}\n\n/* If there are two \"Search\" buttons (desktop+mobile variants), collapse spacing so it looks intentional */\n.search-buttons-row .btn + .btn",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".tab,\n.fab,\n.icon-btn,\n.settings-checkbox-label,\n.select,\n.search-btn",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".tab,\n.group-title,\n.preview-row-title,\nh1,\nh2,\nh3,\nh4",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".list-container,\n.home-section",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".modal .preview-row-scroll,\n.popup .preview-row-scroll",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".list-container,\n  .home-section",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".card img,\n.poster,\n.tile img,\n.row-inner img",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".card:hover,\n  .btn:hover",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".tab-section,\n#homeSection",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".fab,\n.fab-left,\n.fab-stack",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".main-container,\n#appRoot,\nbody,\nhtml",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".app,\n  .app-root,\n  .page,\n  .content,\n  .container,\n  .shell,\n  #appRoot",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".top-header,\n  .header-bar,\n  .app-header",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".tab-section:first-of-type",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".6;\n  cursor: not-allowed;\n}\n/* Prevent double top offset when main uses scroll-padding */\nmain,\n.tab-section,\n#homeSection",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".tab-section,\n  #homeSection",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".top-header,\n.header-bar",
    "file": "styles\\mobile-hotfix.css",
    "type": "class"
  },
  {
    "selector": ".badge,\n  .count,\n  .meta,\n  .tag,\n  .pill,\n  .chip",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".5rem, 20px);\n  }\n  h3",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".25rem, 18px);\n  }\n  h4",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".1rem, 16px);\n  }\n  h5,\n  h6",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".main-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".75rem ;\n    line-height: 1.1 ;\n    margin: 0 ;\n    padding: 2px 4px ;\n    background: rgba(0, 0, 0, 0.1) ;\n    border-radius: 4px ;\n    white-space: nowrap ;\n    overflow: hidden ;\n    text-overflow: ellipsis ;\n    max-width: 100% ;\n  }\n\n  /* Mobile search tips - truncate long text */\n  .search-help span[data-i18n='search_tips']",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".75rem ;\n    line-height: 1.1 ;\n    margin: 0 ;\n    padding: 2px 4px ;\n    background: rgba(0, 0, 0, 0.1) ;\n    border-radius: 4px ;\n    white-space: nowrap ;\n    overflow: hidden ;\n    text-overflow: ellipsis ;\n    max-width: 100% ;\n  }\n\n  .mobile-v1 .search-help span[data-i18n='search_tips']",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".search-row .search-buttons-row",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".search-row .search-btn,\n  .search-row .clear-search-btn,\n  .search-row .advanced-search-btn",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".tab-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".main-container .top-search + .tab-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".tab",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".tab .count",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n    -webkit-line-clamp: 2;\n    line-clamp: 2; /* FIXED: Added standard property for compatibility */\n  }\n\n  /* Button adjustments */\n  .btn",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".flickword-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".feedback-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".modal",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".modal .modal-actions",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".section-header h3",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".2rem;\n  }\n\n  /* Mobile-specific animations - now handled by MP-2.2 ANIMATION SCOPE */\n\n  /* Safe-area insets for mobile devices */\n  .main-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab-left",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".fab-dock .fab-stack",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".fab,\n  .fab-left",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".unified-card,\n  .preview-card,\n  .show-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-poster,\n  .preview-card-poster,\n  .show-poster,\n  .poster-placeholder",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-title,\n  .preview-card-title,\n  .show-title",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".2 ;\n    max-height: 2.4em ; /* 2 lines max */\n  }\n\n  /* Star rating visibility */\n  .star-rating,\n  .rating-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".unified-card-subtitle,\n  .preview-card-year,\n  .show-meta",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".1 ;\n  }\n\n  /* Ensure no overlapping content */\n  .unified-card-content,\n  .preview-card-content,\n  .show-details",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".group-title,\n  .preview-row-title,\n  .section-title",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".2rem ;\n    font-weight: 600 ;\n    display: flex ;\n    align-items: center ;\n    gap: 8px ;\n  }\n\n  /* Decorative emojis with proper insets */\n  .group-title::before,\n  .preview-row-title::before,\n  .section-title::before",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".1em ;\n    flex-shrink: 0 ;\n  }\n\n  /* Count badges alignment */\n  .count,\n  .tab-badge",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".home-group",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows .home-preview-row",
    "file": "styles\\mobile.css",
    "type": "id"
  },
  {
    "selector": ".1) ; /* Lighter shadow */\n    filter: none ; /* Remove heavy filters */\n  }\n\n  /* Disable confetti and heavy animations on mobile */\n  .confetti,\n  .celebration-animation",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".01ms ;\n      animation-iteration-count: 1 ;\n      transition-duration: 0.01ms ;\n    }\n  }\n\n  /* Optimize scrolling performance */\n  .preview-row-container,\n  .carousel-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".blur,\n  .backdrop-blur",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".genre-filter,\n  .search-row .search-btn,\n  .search-row .clear-search-btn,\n  .search-row .advanced-search-btn",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".css */\n}\n\n/* === UNIFIED MOBILE CARD SYSTEM (â‰¤768px) === */\n@media (max-width: 768px)",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-details",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-actions",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-actions .btn",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-title",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": "#121212);\n  }\n\n  .show-card .show-meta",
    "file": "styles\\mobile.css",
    "type": "id"
  },
  {
    "selector": "#666);\n    margin: 0 0 6px ;\n    padding: 0 ;\n    line-height: 1.3 ;\n  }\n\n  .show-card .show-overview",
    "file": "styles\\mobile.css",
    "type": "id"
  },
  {
    "selector": ".4 ;\n    margin: 0 0 8px ;\n    padding: 0 ;\n    color: var(--color-text, #121212);\n  }\n\n  /* UNIFIED: Mobile details layout with actions at bottom */\n  .mobile-v1 .show-card .show-details",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .show-actions",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .poster-button",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .show-poster,\n  .mobile-v1 .show-card .poster-placeholder",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card .show-poster,\n  .show-card .poster-placeholder",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .show-details",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .show-title",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": "#121212);\n  }\n\n  .mobile-v1 .show-card .show-meta",
    "file": "styles\\mobile.css",
    "type": "id"
  },
  {
    "selector": "#666);\n    margin: 0 0 6px ;\n    padding: 0 ;\n    line-height: 1.3 ;\n  }\n  .mobile-v1 .show-card .show-overview",
    "file": "styles\\mobile.css",
    "type": "id"
  },
  {
    "selector": ".2 ;\n  }\n\n  .mobile-v1 .show-card .show-actions .btn,\n  .mobile-v1 .show-card .show-actions button",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .rating-container",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .star-rating",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card .like-dislike",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".mobile-v1 .show-card + .show-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".show-card + .show-card",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".2b CLEANUP NOTE ===\n   Remove any other `.show-card` rules in this file that sit OUTSIDE the block above\n   (especially unfenced 2-col grids or unfenced animation hooks). The single block\n   above is the only valid source of truth for mobile cards. */\n\n/* Mobile header fix: neutralize legacy grid and center title */\nheader.header",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header .app-title",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".2 ;\n}\n\nheader.header .username-snark",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header[data-lang-layout='inline'] .account-controls",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header[data-lang-layout='inline'] #accountBtn,\n  .header[data-lang-layout='inline'] #langSelect",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header[data-lang-layout='row'] .account-controls",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header[data-lang-layout='row'] #langSelect",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header .header-bar",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".header .account-controls",
    "file": "styles\\mobile.css",
    "type": "class"
  },
  {
    "selector": ".css, CSS variables\r\n */\r\n\r\n/* === MODAL BACKDROP === */\r\n.modal-backdrop",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".5);\r\n  z-index: 10000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.modal-backdrop--visible",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".3);\r\n  max-width: 90vw;\r\n  max-height: 90vh;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  transform: scale(0.9) translateY(20px);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.modal-backdrop--visible .modal",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal__header",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#dedee3);\r\n  background: var(--surface, #f9f9f9);\r\n}\r\n\r\n.modal__title",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#121212);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  flex: 1;\r\n  margin-right: 16px;\r\n}\r\n\r\n.modal__close",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#999);\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.modal__close:hover",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#f9f9f9);\r\n  color: var(--text, #121212);\r\n}\r\n\r\n/* === MODAL BODY === */\r\n.modal__body",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".modal__footer",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#dedee3);\r\n  background: var(--surface, #f9f9f9);\r\n}\r\n\r\n/* === EPISODE GUIDE MODAL === */\r\n.modal--episode-guide",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#dedee3);\r\n  border-radius: 6px;\r\n  background: white;\r\n  font-size: 14px;\r\n  color: var(--text, #121212);\r\n  min-width: 150px;\r\n}\r\n\r\n.episode-guide__select:focus",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#e91e63);\r\n  box-shadow: 0 0 0 2px rgba(233, 30, 99, 0.2);\r\n}\r\n\r\n.episode-guide__episodes",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#dedee3);\r\n  border-radius: 8px;\r\n  background: white;\r\n}\r\n\r\n.episode-guide__loading,\r\n.episode-guide__error,\r\n.episode-guide__empty",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#f9f9f9);\r\n}\r\n\r\n.episode-guide__episode--watched",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#d4edda);\r\n  border-left: 4px solid var(--success, #51cf66);\r\n}\r\n\r\n.episode-guide__episode-number",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".modal--notes",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".notes-modal",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".notes-modal__label",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#121212);\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.notes-modal__textarea",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#dedee3);\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-family: inherit;\r\n  line-height: 1.5;\r\n  color: var(--text, #121212);\r\n  background: white;\r\n  resize: vertical;\r\n  min-height: 120px;\r\n  max-height: 300px;\r\n}\r\n\r\n.notes-modal__textarea:focus",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": "#e91e63);\r\n  box-shadow: 0 0 0 2px rgba(233, 30, 99, 0.2);\r\n}\r\n\r\n.notes-modal__char-count",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".modal-backdrop",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal__title",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal__body",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal__footer .btn",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".episode-guide__episode-date,\r\n  .episode-guide__episode-rating",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".notes-modal__textarea",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal--loading .modal__body",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal--loading .modal__body::after",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#dedee3);\r\n  border-top: 3px solid var(--primary, #e91e63);\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".modal-backdrop,\r\n  .modal",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop--visible .modal",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#121212);\r\n  }\r\n\r\n  .modal__header",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".episode-guide__episode--watched",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal:focus",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal__close:focus",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": "#e91e63);\r\n  outline-offset: 2px;\r\n}\r\n\r\n/* === ANIMATION VARIANTS === */\r\n.modal--slide-up",
    "file": "styles\\modals.css",
    "type": "id"
  },
  {
    "selector": ".modal-backdrop--visible .modal--slide-up",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal--slide-down",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop--visible .modal--slide-down",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal--fade-in",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".modal-backdrop--visible .modal--fade-in",
    "file": "styles\\modals.css",
    "type": "class"
  },
  {
    "selector": ".25rem - micro spacing */\n  --space-sm: 8px;    /* 0.5rem - small spacing */\n  --space-md: 12px;   /* 0.75rem - medium spacing */\n  --space-lg: 16px;   /* 1rem - large spacing */\n  --space-xl: 20px;   /* 1.25rem - extra large spacing */\n  --space-2xl: 24px;  /* 1.5rem - double large spacing */\n  --space-3xl: 32px;  /* 2rem - triple large spacing */\n  --space-4xl: 40px;  /* 2.5rem - quadruple large spacing */\n  --space-5xl: 48px;  /* 3rem - quintuple large spacing */\n\n  /* === LAYOUT SPACING === */\n  /* Container and section spacing */\n  --container-gutter: var(--space-lg);           /* 16px - side margins */\n  --container-max-width: 1200px;                 /* Max container width */\n  --section-gap: var(--space-2xl);               /* 24px - space between sections */\n  --section-gap-lg: var(--space-3xl);            /* 32px - large section gap */\n  --row-gap: var(--space-lg);                    /* 16px - space between rows */\n  --card-gap: var(--space-sm);                   /* 8px - space between cards */\n\n  /* === COMPONENT SPACING === */\n  /* Card and component internal spacing */\n  --card-padding: var(--space-md);               /* 12px - card internal padding */\n  --card-padding-sm: var(--space-sm);            /* 8px - small card padding */\n  --card-padding-lg: var(--space-lg);            /* 16px - large card padding */\n  --button-padding: var(--space-sm) var(--space-md); /* 8px 12px - button padding */\n  --input-padding: var(--space-sm) var(--space-md);  /* 8px 12px - input padding */\n\n  /* === UNIFIED CARD SIZING === */\n  /* Single source of truth for all card dimensions */\n  --card-w: 154px;                               /* Standard card width */\n  --card-h: 270px;                               /* Standard card height (3:2 aspect ratio) */\n  --card-w-mobile: 140px;                        /* Mobile card width */\n  --card-h-mobile: 210px;                        /* Mobile card height */\n  --card-w-desktop: 200px;                       /* Desktop card width */\n  --card-h-desktop: 300px;                       /* Desktop card height */\n  --card-w-large: 220px;                         /* Large screen card width */\n  --card-h-large: 330px;                         /* Large screen card height */\n\n  /* === POSTER SIZING === */\n  /* Unified poster dimensions for all contexts */\n  --poster-w: 120px;                             /* Standard poster width (2:3 aspect ratio) */\n  --poster-h: 180px;                             /* Standard poster height */\n  --poster-w-mobile: 80px;                       /* Mobile poster width */\n  --poster-h-mobile: 120px;                      /* Mobile poster height */\n  --poster-w-desktop: 140px;                     /* Desktop poster width */\n  --poster-h-desktop: 210px;                     /* Desktop poster height */\n\n  /* === RESPONSIVE SPACING === */\n  /* Mobile-first responsive adjustments */\n  --mobile-section-gap: var(--space-xl);         /* 20px - mobile section gap */\n  --mobile-row-gap: var(--space-md);             /* 12px - mobile row gap */\n  --mobile-card-gap: var(--space-xs);            /* 4px - mobile card gap */\n\n  /* === OVERFLOW & HEIGHT SYSTEM === */\n  /* Unified overflow and height management to fix container issues */\n  --body-height: auto;                           /* Allow body to expand with content */\n  --app-root-min-height: 100vh;                  /* App root minimum viewport height */\n  --app-root-overflow-x: hidden;                 /* Prevent horizontal overflow */\n  --app-root-overflow-y: visible;                /* Allow vertical expansion */\n  --content-overflow: visible;                   /* Allow content to expand naturally */\n  --safe-gutter: max(var(--container-gutter), env(safe-area-inset-left)); /* Safe area aware gutters */\n\n  /* === UNIFIED BREAKPOINT SYSTEM === */\n  /* Single source of truth for all responsive breakpoints */\n  --bp-mobile-xs: 375px;                         /* Extra small mobile */\n  --bp-mobile-sm: 480px;                         /* Small mobile */\n  --bp-mobile: 640px;                            /* Standard mobile */\n  --bp-mobile-lg: 768px;                         /* Large mobile / small tablet */\n  --bp-tablet: 900px;                            /* Tablet */\n  --bp-desktop: 1200px;                          /* Desktop */\n  --bp-desktop-lg: 1440px;                       /* Large desktop */\n}\n\n/* === RESPONSIVE BREAKPOINTS === */\n@media (min-width: var(--bp-mobile-lg))",
    "file": "styles\\spacing-system.css",
    "type": "class"
  },
  {
    "selector": ".css and components.css */\n\n/* === MOBILE ADJUSTMENTS === */\n@media (max-width: calc(var(--bp-mobile-lg) - 1px))",
    "file": "styles\\spacing-system.css",
    "type": "class"
  },
  {
    "selector": ".tab-container",
    "file": "styles\\tabs-layout.css",
    "type": "class"
  },
  {
    "selector": ".tab-content",
    "file": "styles\\tabs-layout.css",
    "type": "class"
  },
  {
    "selector": "#0ea5e9;     /* cyan-500 */\r\n  --tab-text:   #111827;     /* gray-900 */\r\n  --tab-muted:  #6b7280;     /* gray-500 */\r\n  --tab-edge:   #e5e7eb;     /* gray-200 */\r\n  --badge-bg:   #f3f4f6;     /* gray-100 */\r\n}\r\n\r\n/* Tab navigation container */\r\nnav#navigation.tabs",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": ".25rem;\r\n  padding: .25rem .5rem;\r\n  border-bottom: 1px solid var(--tab-edge);\r\n  margin-top: 0;\r\n  position: static;\r\n  top: auto;\r\n  z-index: auto;\r\n  height: auto;\r\n  margin-bottom: 0;\r\n}\r\n\r\nnav#navigation.tabs::before,\r\nnav#navigation.tabs::after",
    "file": "styles\\tabs.css",
    "type": "class"
  },
  {
    "selector": "#navigation.tabs .tab",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": ".5rem;\r\n  padding: .45rem .8rem;\r\n  border: 1px solid var(--tab-edge);\r\n  border-radius: .6rem;\r\n  background: #fff;\r\n  color: var(--tab-text);\r\n  text-decoration: none;\r\n  line-height: 1;\r\n  transition: background .15s ease, color .15s ease, border-color .15s ease, box-shadow .15s ease;\r\n  cursor: pointer;\r\n  visibility: visible;\r\n  opacity: 1;\r\n  min-height: 44px; /* Respect mobile accessibility */\r\n  min-width: auto;\r\n}\r\n\r\nnav#navigation.tabs .tab:hover,\r\nnav#navigation.tabs .tab:focus-visible",
    "file": "styles\\tabs.css",
    "type": "class"
  },
  {
    "selector": "#cbd5e1; /* gray-300 */\r\n  box-shadow: 0 0 0 3px rgba(14,165,233,.15);\r\n}\r\n\r\nnav#navigation.tabs .tab.is-active",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": "#fff;\r\n}\r\n\r\nnav#navigation.tabs .tab-label",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": "#navigation.tabs .badge",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": ".25rem;\r\n  height: 1.25rem;\r\n  padding: 0 .4rem;\r\n  border-radius: 999px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: .72rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  background: var(--badge-bg);\r\n  color: var(--tab-muted);\r\n  border: 1px solid var(--tab-edge);\r\n}\r\n\r\nnav#navigation.tabs .tab.is-active .badge",
    "file": "styles\\tabs.css",
    "type": "class"
  },
  {
    "selector": ".18);\r\n  border-color: rgba(255,255,255,.35);\r\n  color: #fff;\r\n}\r\n\r\n/* Ensure active tab labels are visible */\r\nnav#navigation.tabs .tab.is-active .tab-label",
    "file": "styles\\tabs.css",
    "type": "class"
  },
  {
    "selector": "#fff;\r\n  opacity: 1;\r\n  visibility: visible;\r\n  display: inline;\r\n}\r\n\r\n/* Dark mode styles */\r\n.dark-mode nav#navigation.tabs .tab",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": "#fff;\r\n  color: var(--tab-text);\r\n}\r\n\r\n.dark-mode nav#navigation.tabs .tab:hover",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": "#fff;\r\n  color: var(--tab-text);\r\n}\r\n\r\n.dark-mode nav#navigation.tabs .tab.is-active",
    "file": "styles\\tabs.css",
    "type": "id"
  },
  {
    "selector": ".4rem .6rem; \r\n  }\r\n  nav#navigation.tabs .tab-label",
    "file": "styles\\tabs.css",
    "type": "class"
  },
  {
    "selector": "#panels,\n#homeSection,\n.home-content",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows.home-group,\n#group-2-community.home-group,\n#group-3-for-you.home-group,\n#group-4-theaters.home-group",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .home-preview-row,\n#homeSection .section-content,\n#group-1-your-shows section,\n#group-2-community section",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows,\n    #group-2-community,\n    #group-3-for-you,\n    #group-4-theaters)\n  :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#currentlyWatchingScroll and .preview-row-scroll */\n#homeSection #currentlyWatchingScroll,\n#homeSection .preview-row-scroll",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection #currentlyWatchingScroll > *,\n#homeSection .preview-row-scroll > *",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows,\n      #group-2-community,\n      #group-3-for-you)\n    :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .card img, \n#homeSection .card picture",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows :is(.actions, .card-actions)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows :is(.actions, .card-actions)\n  :is(button, [role=\"button\"], a.button)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions) :is(button, [role=\"button\"], a.button)",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection :is(.actions, .card-actions) > *",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".home-group",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows > .home-preview-row",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#group-1-your-shows #up-next-row.home-preview-row",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".css */\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n/* Currently Watching card actions grid */\n.cw-card .action-grid",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".cw-card .action-grid .btn",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".nu-card .meta",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".9rem;\n  opacity: 0.85;\n  margin-top: 8px;\n}\n\n.nu-card .meta .line",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".card .poster-wrap",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#up-next-row, .up-next-row",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".preview-card,\n.unified-card,\n.tab-section .list-container .poster-card",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".preview-card-poster,\n.unified-card-poster",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-content .home-group + .home-group",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#quote-bar, .quote-bar",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".home-content .preview-row,\n.home-content .home-preview-row",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-group */\n}\n\n/* === SAFETY & RTL SUPPORT === */\n/* Safety: prevent content from forcing tracks wider than panels */\n#homeSection .preview-row-scroll *",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#homeSection .preview-row-scroll",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .preview-row-scroll::before,\n#homeSection .preview-row-scroll::after",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .preview-row-scroll::before",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#fff), transparent);\n}\n\n#homeSection .preview-row-scroll::after",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#fff), transparent);\n}\n\n/* RTL flip scroll indicators */\n[dir=\"rtl\"] #homeSection .preview-row-scroll::before",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#fff), transparent);\n}\n\n[dir=\"rtl\"] #homeSection .preview-row-scroll::after",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#fff), transparent);\n}\n\n/* === DARK MODE ADJUSTMENTS === */\n/* Dark mode adjustments for preview row */\n#group-1-your-shows .dark-mode .home-preview-row",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".home-preview-row.collapsed",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-container",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-header",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-preview-row.collapsed .preview-row-title",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".7;\n}\n\n/* === MOBILE RESPONSIVE RULES === */\n/* Mobile-specific adjustments without !important */\n@media (max-width: var(--bp-sm))",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#group-1-your-shows .home-preview-row",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": ".unified-card,\n  .preview-card,\n  .show-card",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".1); /* Lighter shadow */\n    filter: none; /* Remove heavy filters */\n  }\n\n  /* Disable confetti and heavy animations on mobile */\n  .confetti,\n  .celebration-animation",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".01ms;\n      animation-iteration-count: 1;\n      transition-duration: 0.01ms;\n    }\n  }\n\n  /* Optimize scrolling performance */\n  .preview-row-container,\n  .carousel-container",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".blur,\n  .backdrop-blur",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-content .left-column,\n.home-content .flickword-card",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": ".home-content #bingeMeter",
    "file": "styles\\your-shows.css",
    "type": "class"
  },
  {
    "selector": "#homeSection.home-content:not([hidden])",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#homeSection .page-shell, \n#homeSection .container, \n#homeSection .wrapper",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#scrollTopBtn, hide/remove any legacy arrow */\n/* Common legacy selectors to neutralize; safe, layout-only */\n.legacy-up, \n.up-arrow, \n.scroll-to-top, \n.fab .icon-up, \n.fab-up",
    "file": "styles\\your-shows.css",
    "type": "id"
  },
  {
    "selector": "#appRoot or .panels accidentally has transform/contain set elsewhere, neutralize here */\n#appRoot, \n#appRoot > .panels",
    "file": "styles\\your-shows.css",
    "type": "id"
  }
]
```

## migration-pack\ui\strings.json
```
[
  "Firebase modular bridge not ready yet; skip init",
  "Firebase modular bridge ready",
  "Firebase bridge error",
  "features/trivia.html",
  "DailyTrivia root not found",
  "Daily Trivia Game",
  ";\r\n    iframe.sandbox = ",
  ";\r\n    iframe.style.width = ",
  ";\r\n    /* Height now managed by card system */\r\n    iframe.style.border = ",
  ";\r\n    iframe.style.borderRadius = ",
  ";\r\n\r\n    // If your trivia uses a daily seed, pass date (safe even if ignored)\r\n    iframe.src = ",
  ");\r\n        const next = { ...prev, ...data.payload };\r\n        localStorage.setItem(",
  ");\r\n        $(",
  ") && $(",
  ").replaceChildren(String(stats.streak ?? 0));\r\n        $(",
  ").replaceChildren(String(stats.best ?? 0));\r\n        $(",
  ").replaceChildren(String(stats.acc ?? ",
  "));\r\n      } catch {}\r\n    };\r\n    window.addEventListener(",
  ", onMsg);\r\n\r\n    handle = {\r\n      iframe,\r\n      destroy() {\r\n        try {\r\n          iframe.removeEventListener(",
  ", onLoad);\r\n        } catch {}\r\n        try {\r\n          window.removeEventListener(",
  ", onMsg);\r\n        } catch {}\r\n        try {\r\n          iframe.src = ",
  "Trivia mount failed",
  "Trivia unmount failed",
  ".gm-body",
  "use strict",
  "ðŸ” Fallback search initialization starting...",
  "clearSearchBtn",
  "âœ… Setting up search button (fallback)",
  "ðŸ” Search button clicked (fallback)",
  "âœ… Setting up clear search button (fallback)",
  "ðŸ§¹ Clear search button clicked (fallback)",
  "âœ… Setting up search input Enter key (fallback)",
  "âŒ¨ï¸ Enter key pressed (fallback)",
  "âœ… Fallback search initialization complete",
  "ðŸ’¬ Opening settings to feedback section",
  ".settings-tabs button[data-target=",
  "#about .settings-subsection:last-child",
  "ðŸ’¬ Settings tab not found",
  "Please go to Settings â†’ About to share your feedback",
  "ðŸ”§ Episode tracking toggle handler starting...",
  "ðŸ”§ Episode tracking toggle already set up, skipping",
  "ðŸ”§ Episode tracking toggle found:",
  "ðŸ”§ Episode tracking toggle not found, will retry...",
  "ðŸ”§ Stored episode tracking value:",
  "ðŸ”§ Episode tracking toggle changed:",
  "ðŸ”§ Setting episode tracking to:",
  "ðŸ”§ updateEpisodeTrackingUI called with enabled:",
  ");\r\n    console.log(",
  ", episodeButtons.length);\r\n    episodeButtons.forEach((btn, index) => {\r\n      console.log(\r\n        ",
  ",\r\n        btn.textContent,\r\n        ",
  ",\r\n        enabled ? ",
  " : ",
  ",\r\n      );\r\n      btn.style.display = enabled ? ",
  ";\r\n    });\r\n\r\n    // Update any existing progress hints\r\n    const progressHints = document.querySelectorAll(",
  ");\r\n    progressHints.forEach((hint) => {\r\n      hint.style.display = enabled ? ",
  "ðŸ”§ Retrying to find episode tracking toggle, attempt:",
  "ðŸ”§ Failed to find episode tracking toggle after 20 attempts",
  "ðŸ”§ Page load - updating episode tracking UI, enabled:",
  "ðŸ”§ Curated rows setting handler starting...",
  "t do it again\n    if (input && input.dataset.setupComplete) {\n      console.log(",
  ");\n      return true;\n    }\n\n    input = document.querySelector(",
  ");\n    console.log(",
  ", !!input, input);\n    if (!input) {\n      console.warn(",
  "ðŸ”§ setValueSafely called with:",
  "isSettingValue will be set to true",
  "ðŸ”§ Set value safely to:",
  "ðŸ”§ setValueSafely completed, isSettingValue reset to false",
  "ðŸ”§ Stored value:",
  ");\n    }\n\n    // Function to apply the setting\n    function applySetting() {\n      console.log(\n        ",
  ",\n        input.value,\n        ",
  ",\n        isInitialSetup,\n        ",
  ",\n        hasUserInteracted,\n        ",
  "ðŸ”§ Setting curated rows to:",
  "ðŸ”§ Dispatched curated:rerender event",
  "ðŸ”§ Showing notification for user interaction - value changed from",
  ",\n          n,\n        );\n        window.showNotification(",
  "t notify again\n      } else {\n        console.log(\n          ",
  ",\n          hasUserInteracted,\n          ",
  ",\n          isSettingValue,\n          ",
  ",\n          lastNotifiedValue !== n,\n          ",
  "âœ… Saved",
  ";\n        }, 2000);\n      }\n\n      setTimeout(() => {\n        input.style.borderColor = ",
  ";\n        input.style.backgroundColor = ",
  ";\n      }, 1000);\n    }\n\n    // Debounced function for input events\n    function debouncedApply() {\n      console.log(",
  "ðŸ”§ User interacted with input - notifications enabled, reset lastNotifiedValue",
  "ðŸ”§ User changed input - notifications enabled",
  "ðŸ”§ User blurred input - notifications enabled",
  "ðŸ”§ Initial setup complete - notifications enabled",
  "ðŸ”§ refreshValue called - resetting hasUserInteracted to false",
  "ðŸ”§ Refreshing value from storage:",
  "ðŸ”§ No refresh needed - value already correct:",
  "ðŸ”§ Input clicked",
  "ðŸ”§ Input focused",
  "ðŸ”§ Event listeners attached to input",
  "ðŸ”§ Input is hidden - user needs to go to Settings > Layout tab to see it",
  "ðŸ”§ Input is visible and ready",
  "ðŸ”§ Retrying to find input, attempt:",
  "ðŸ”§ Failed to find input after 20 attempts",
  "ðŸ”§ Layout section became active, re-setting up input",
  ")) {\n        console.log(",
  ");\n        clearInterval(checkForTabs);\n\n        const layoutTab = document.querySelector(",
  ");\n        if (layoutTab) {\n          layoutTab.addEventListener(",
  ", () => {\n            console.log(",
  ");\n            setTimeout(() => {\n              if (!input) {\n                console.log(",
  ");\n                setupInput();\n              } else {\n                console.log(",
  ");\n                console.log(",
  ", input.offsetParent !== null);\n                console.log(",
  ", input.parentElement?.offsetParent !== null);\n                console.log(",
  ", input.parentElement?.className);\n                console.log(\n                  ",
  "ðŸ”§ Refreshing curated rows setting on Layout tab click",
  "ðŸ”§ Currently watching limit setting handler starting...",
  "t do it again\r\n    if (input && input.dataset.setupComplete) {\r\n      console.log(",
  ");\r\n      return true;\r\n    }\r\n\r\n    input = document.querySelector(\r\n      ",
  ",\r\n    );\r\n    console.log(",
  ", !!input, input);\r\n    if (!input) {\r\n      console.warn(",
  "ðŸ”§ Stored currently watching limit value:",
  ");\r\n    }\r\n\r\n    // Function to apply the setting\r\n    function applySetting() {\r\n      console.log(\r\n        ",
  ",\r\n        input.value,\r\n        ",
  ",\r\n        isInitialSetup,\r\n        ",
  ",\r\n        hasUserInteracted,\r\n        ",
  "ðŸ”§ Setting currently watching limit to:",
  "ðŸ”§ Dispatched currentlyWatching:rerender event",
  ",\r\n          n,\r\n        );\r\n        window.showNotification(",
  "t notify again\r\n      } else {\r\n        console.log(\r\n          ",
  ",\r\n          hasUserInteracted,\r\n          ",
  ",\r\n          isSettingValue,\r\n          ",
  ",\r\n          lastNotifiedValue !== n,\r\n          ",
  ";\r\n        }, 2000);\r\n      }\r\n\r\n      setTimeout(() => {\r\n        input.style.borderColor = ",
  ";\r\n        input.style.backgroundColor = ",
  "ðŸ”§ debouncedApply called for currently watching limit",
  "ðŸ”§ Debounced apply executing for currently watching limit",
  "ðŸ”§ Currently watching limit input event fired",
  "ðŸ”§ Currently watching limit change event fired",
  "ðŸ”§ Currently watching limit input setup complete",
  "ðŸ”§ Currently watching limit setup attempt",
  "ðŸ”§ Failed to setup currently watching limit input after",
  "ðŸ”§ Refreshing currently watching limit setting...",
  "â„¹ï¸ Firebase modular bridge not ready â€” cloud features disabled",
  ".local",
  ".lan",
  "netlify.app",
  "[SW] Registration skipped in this environment:",
  "ðŸ“± Mobile class applied - viewport width:",
  "ðŸ“± Mobile class added on resize",
  "ðŸ“± Mobile class removed on resize",
  "SW disabled on preview",
  "[SW] Disabled for deploy preview:",
  "Firebase modular bridge not ready yet; skipping init",
  "âŒ Firebase config missing apiKey[REDACTED],
  "âœ… Firebase modular bridge ready:",
  "ðŸ”¥ Firebase bridge error:",
  "ðŸ  Home Layout Guardrails loaded",
  "âŒ HOME ORDER VIOLATION: homeSection not found",
  "ðŸ  Home sections found:",
  "âŒ HOME ORDER VIOLATION: Missing required section ",
  ");\r\n        orderViolation = true;\r\n      } else if (foundIndex !== index) {\r\n        console.error(\r\n          ",
  "âŒ HOME ORDER VIOLATION: Unexpected section ",
  " at position ${index}",
  "âŒ HOME ORDER VIOLATION: Removing unexpected nodes",
  "ðŸ—‘ï¸ Removing unexpected section: ${child.id}",
  ".stats",
  "ðŸ—‘ï¸ Purging legacy section: ${selector}",
  "ðŸ’¬ Quote bar initialized - content handled by marquee system",
  "ðŸš« Auto-inject systems disabled",
  ".flickword-mount",
  "ðŸŽ¯ FlickWord mount found: .flickword-mount",
  "ðŸŽ¯ FlickWord mount fallback: #homeSection",
  "ðŸŽ¯ FlickWord system overridden for new layout",
  ".community-content",
  ".community-left",
  ".community-right",
  "ðŸ”„ Community containers resized",
  "ðŸ  Initializing Home Layout Guardrails...",
  "ðŸŽ® Initializing Community Games...",
  "ðŸŽ® Game script check:",
  "ðŸŽ® FlickletTrivia found, checking for init function...",
  "ðŸŽ® Available methods:",
  "ðŸŽ® Trivia elements found:",
  ") {\r\n          console.log(",
  ");\r\n          // Apply compact styling to existing content\r\n          questionEl.style.fontSize = ",
  ";\r\n          questionEl.style.lineHeight = ",
  ";\r\n          questionEl.style.marginBottom = ",
  ";\r\n\r\n          // Style existing choice buttons\r\n          const existingButtons = choicesEl.querySelectorAll(",
  ");\r\n          existingButtons.forEach((btn) => {\r\n            btn.style.padding = ",
  ";\r\n            btn.style.fontSize = ",
  ";\r\n            btn.style.marginBottom = ",
  ";\r\n            btn.style.borderRadius = ",
  "ðŸŽ® Community games containers ready",
  "âœ… Home layout order validated",
  "ðŸ  Home section DOM changed, re-asserting order...",
  "ðŸŽ¯ Opening FlickWord modal",
  "s date for the game\r\n    const today = new Date().toISOString().split(",
  ")[0];\r\n    frame.src = ",
  ";\r\n    modal.style.display = ",
  ";\r\n\r\n    // Focus management\r\n    const closeBtn = modal.querySelector(",
  ");\r\n    if (closeBtn) closeBtn.focus();\r\n  }\r\n}\r\n\r\nfunction closeFlickWordModal() {\r\n  console.log(",
  ");\r\n  const modal = document.getElementById(",
  ");\r\n  const frame = document.getElementById(",
  ");\r\n\r\n  if (modal) {\r\n    modal.style.display = ",
  ";\r\n    if (frame) frame.src = ",
  ".flickword-teaser .streak",
  ".flickword-teaser .best",
  ");\r\n    streakEl.textContent = ",
  ";\r\n    bestEl.textContent = ",
  ";\r\n  }\r\n}\r\n\r\n// Initialize FlickWord teaser\r\nfunction initFlickWordTeaser() {\r\n  console.log(",
  ");\r\n  updateFlickWordStats();\r\n\r\n  // Listen for game results to update stats\r\n  window.addEventListener(",
  ", function (event) {\r\n    if (event.data && event.data.type === ",
  ") {\r\n      console.log(",
  ", event.data);\r\n      updateFlickWordStats();\r\n    }\r\n  });\r\n}\r\n\r\n// Initialize when ready\r\nif (document.readyState === ",
  ") {\r\n  document.addEventListener(",
  "ðŸŽ® Script starting...",
  "ðŸŽ® Initializing Game Cards Modal System",
  "ðŸŽ® Opening modal:",
  " + id);\r\n    if (!m) {\r\n      console.error(",
  ", id);\r\n      return;\r\n    }\r\n    lastOpener = opener || document.activeElement;\r\n    m.setAttribute(",
  "ðŸŽ® Modal opened:",
  "s date\r\n    if (id === ",
  ") {\r\n      const frame = qs(",
  ");\r\n      if (frame) {\r\n        const today = new Date().toISOString().split(",
  ")[0];\r\n        frame.src = ",
  ";\r\n      }\r\n    }\r\n\r\n    // Focus trap\r\n    const focusables = qsa(\r\n      ",
  "ðŸ”´ Closing modal:",
  "ðŸŽ® Wiring card:",
  "to modal:",
  " + cardId);\r\n    if (!card) {\r\n      console.error(",
  ", cardId);\r\n      return;\r\n    }\r\n    const open = (e) => {\r\n      console.log(",
  ", cardId);\r\n      e.preventDefault();\r\n      openModal(modalId, card);\r\n    };\r\n    card.addEventListener(",
  ", open);\r\n    card.addEventListener(",
  ", (e) => {\r\n      if (e.key === ",
  " || e.key === ",
  ") open(e);\r\n    });\r\n    const btn = qs(",
  " + cardId + ",
  ");\r\n    if (btn) {\r\n      console.log(",
  ", cardId);\r\n      btn.addEventListener(",
  ", open);\r\n    } else {\r\n      console.warn(",
  ", cardId);\r\n    }\r\n  }\r\n  // Check if modals exist\r\n  console.log(\r\n    ",
  ",\r\n    qsa(",
  ").map((m) => m.id),\r\n  );\r\n  console.log(",
  ", qs(",
  "));\r\n  console.log(",
  "));\r\n\r\n  wireCard(",
  ".game-modal",
  "ðŸ”´ Close button clicked for modal:",
  "ðŸŽ® Opening Trivia modal with data:",
  ".game-modal[aria-hidden=",
  "ðŸ“Š Performance monitoring initialized",
  ".tab",
  "âš ï¸ High memory usage:",
  "âŒ Module load error: ${modulePath}",
  "[perf] recordInteraction: invalid type",
  "[perf] recordInteraction guard",
  "ðŸ“Š ${name}: ${metric.value.toFixed(2)}ms (${metric.rating})",
  ");\r\n      stored[name] = metric;\r\n      localStorage.setItem(",
  ", JSON.stringify(stored));\r\n    } catch (error) {\r\n      console.warn(",
  "${metric} is poor (${this.metrics[metric].value.toFixed(2)}ms)",
  "${metric} needs improvement (${this.metrics[metric].value.toFixed(2)}ms)",
  "Optimize images and reduce server response time for better LCP",
  "Reduce JavaScript execution time and optimize third-party scripts",
  "Add size attributes to images and avoid inserting content above existing content",
  "Consider code splitting for slow modules: ${slowModules\r\n            .map((m) => m.module)\r\n            .join(",
  "ðŸ”’ Security scanner initialized",
  ");\r\n\r\n    if (!cspMeta) {\r\n      this.addVulnerability(",
  "Content Security Policy not implemented",
  ")) {\r\n      this.addWarning(",
  "CSP allows unsafe-inline",
  "CSP allows unsafe-eval",
  "CSP missing default-src directive",
  "CSP missing script-src directive",
  "Potential XSS vulnerability: innerHTML usage",
  "Potential XSS vulnerability: insertAdjacentHTML usage",
  "document.write",
  "Potential XSS vulnerability: document.write usage",
  "Critical XSS vulnerability: eval() usage",
  "new Function",
  "Critical XSS vulnerability: new Function() usage",
  "Potentially dangerous URL: ",
  "Mixed content: HTTP image on HTTPS page",
  "Mixed content: HTTP script on HTTPS page",
  "Security headers should be verified server-side",
  "Potential hardcoded API key found",
  ")) {\r\n        this.addWarning(",
  "Potential hardcoded password found",
  "], [data-action*=",
  ",\r\n    );\r\n    if (authButtons.length === 0) {\r\n      this.addInfo(",
  "No authentication buttons found",
  "input, textarea, select",
  "Input missing required attribute",
  "Consider input sanitization for text inputs",
  "No try-catch error handling found",
  "console.error",
  "Consider adding console.error for error logging",
  ")) {\r\n          this.addWarning(",
  "Old jQuery version detected",
  "Old Bootstrap version detected",
  ") && !src.startsWith(",
  ");\r\n    });\r\n\r\n    if (externalScripts.length > 0) {\r\n      this.addInfo(",
  "${externalScripts.length} external dependencies found",
  "ðŸš¨ Security Vulnerability [${severity.toUpperCase()}]: ${message}",
  "âš ï¸ Security Warning [${severity.toUpperCase()}]: ${message}",
  "â„¹ï¸ Security Check [${severity.toUpperCase()}]: ${message}",
  "Implement proper input validation and output encoding to prevent XSS attacks",
  "Implement a strict Content Security Policy",
  "Ensure all resources are served over HTTPS",
  "Implement secure authentication and avoid hardcoded credentials",
  "Add proper input validation and sanitization",
  "ðŸ”’ Running security scan...",
  "ðŸ”’ Security scan completed:",
  "t showing\r\n */\r\n\r\nconsole.log(",
  ");\r\n\r\n// Check if HomeClean class exists\r\nif (window.HomeClean) {\r\n    console.log(",
  ");\r\n    \r\n    // Check if it has the new methods\r\n    const instance = new window.HomeClean();\r\n    console.log(",
  ", {\r\n        hasCreateCWCardContent: typeof instance.createCWCardContent === ",
  ",\r\n        hasGetRealCurrentlyWatching: typeof instance.getRealCurrentlyWatching === ",
  ",\r\n        hasTransformItemToCardData: typeof instance.transformItemToCardData === ",
  "\r\n    });\r\n    \r\n    // Check if it",
  "âœ… [DEBUG] Using NEW HomeClean implementation",
  "Test Show",
  "S1 E1",
  "/assets/img/poster-placeholder.png",
  "ðŸ” [DEBUG] Card content preview:",
  "...",
  "Want to Watch",
  "Not Interested",
  "Delete",
  "âœ… [DEBUG] All 4 buttons found in card content",
  "âŒ [DEBUG] Missing buttons in card content",
  "âŒ [DEBUG] Using OLD HomeClean implementation",
  "âŒ [DEBUG] HomeClean class not found",
  "ðŸ” [DEBUG] HomeClean state:",
  "âš ï¸ [DEBUG] No homeCleanState found",
  "âœ… [DEBUG] #clean-root found",
  ".card",
  "ðŸ” [DEBUG] Found ${cards.length} cards",
  "ðŸ” [DEBUG] First card classes:",
  "ðŸ” [DEBUG] Found ${buttons.length} buttons in first card",
  "ðŸ” [DEBUG] Button ${i}:",
  "âŒ [DEBUG] No buttons found in first card",
  "ðŸ” [DEBUG] First card HTML:",
  ".holiday-chip",
  "âœ… [DEBUG] Holiday chip found",
  "âš ï¸ [DEBUG] No holiday chip found",
  "âŒ [DEBUG] #clean-root not found",
  ");\r\nif (homeCleanCSS) {\r\n    console.log(",
  ");\r\n} else {\r\n    console.error(",
  ");\r\n}\r\n\r\nconsole.log(",
  "ðŸ”„ [FORCE REFRESH] Starting HomeClean force refresh...",
  "ðŸ—‘ï¸ [FORCE REFRESH] Destroying existing component...",
  ");\r\n        existingScripts.forEach(script => {\r\n            console.log(",
  "ðŸ“¥ [FORCE REFRESH] Reloading HomeClean script...",
  "âœ… [FORCE REFRESH] HomeClean script reloaded",
  "âŒ [FORCE REFRESH] Failed to reload HomeClean script",
  "âœ… [FORCE REFRESH] New implementation loaded successfully",
  "ðŸš€ [FORCE REFRESH] Mounting component...",
  "âœ… [FORCE REFRESH] Component mounted successfully",
  "ðŸ” [FORCE REFRESH] Final check:",
  "ðŸŽ‰ [FORCE REFRESH] SUCCESS! Buttons are now visible",
  "âŒ [FORCE REFRESH] Buttons still not visible",
  "âŒ [FORCE REFRESH] Failed to mount component",
  "âŒ [FORCE REFRESH] mountHomeClean not available",
  "âŒ [FORCE REFRESH] Old implementation still loaded",
  "âŒ [FORCE REFRESH] HomeClean class not found after reload",
  "âŒ [FORCE REFRESH] Force refresh failed:",
  "ðŸ [FORCE REFRESH] Force refresh completed",
  "\r\n      <div class=",
  ">\r\n        <div class=",
  "></div>\r\n        <div class=",
  "></div>\r\n      </div>\r\n    ",
  "âœ… Core UI initialized",
  "ðŸ” Searching for:",
  "âœ… Search completed",
  "âœ… App functionality initialized",
  "ðŸ”„ No Firebase document found, preserving local settings",
  ";\r\n        const localTheme = appData.settings?.theme || ",
  "ðŸ”„ User signed in - loading from Firebase",
  ";\r\n      const localTheme = appData.settings?.theme || ",
  "ðŸ”„ Loading TV data from Firebase",
  "ðŸ” Firebase TV watching count:",
  "ðŸ”„ No TV data in Firebase, preserving local data",
  "ðŸ”„ Loading movie data from Firebase",
  "ðŸ” Firebase movie watching count:",
  "ðŸ”„ No movie data in Firebase, preserving local data",
  "ðŸ”„ No Firebase data found, preserving local data",
  "âœ… User data loaded from Firebase successfully",
  "âŒ Failed to load user data from Firebase:",
  ".modal-backdrop",
  ";\r\n\r\n    // Create modal content\r\n    const modal = document.createElement(",
  ");\r\n    modal.className = ",
  ";\r\n\r\n    // Add title\r\n    if (title) {\r\n      const titleEl = document.createElement(",
  ";\r\n      modal.appendChild(titleEl);\r\n    }\r\n\r\n    // Add content\r\n    if (html) {\r\n      if (typeof html === ",
  ";\r\n    closeBtn.addEventListener(",
  ";\r\n      modal.style.transform = ",
  ";\r\n    });\r\n\r\n    // Close on backdrop click\r\n    backdrop.addEventListener(",
  ".settings-tabs button",
  "ðŸ”§ Settings tabs found on page load:",
  "ðŸ”§ Tab ${index}:",
  ".card-more-menu",
  ".card-more-btn",
  "ðŸ”§ Click event detected on:",
  "ðŸ”§ Click target classes:",
  "ðŸ”§ Click target parent classes:",
  "ðŸ”§ Click target parent parent classes:",
  "ðŸ”§ Is settings tab button?",
  "ðŸ”§ All settings tabs found:",
  "âš™ï¸ Settings tab clicked via event delegation:",
  "âš™ï¸ Found tabs:",
  ".settings-section",
  "âš™ï¸ Found sections:",
  "âš™ï¸ Hiding section:",
  "âš™ï¸ Target element:",
  "for selector:",
  "âš™ï¸ Showing section:",
  "âŒ Target not found:",
  "t log this as an error - it",
  "ðŸ”§ Found data-action element:",
  "ðŸ”§ Button element details:",
  "ðŸ“º Opening episode tracking for:",
  "ðŸ“º Episode tracking enabled:",
  "ðŸ“º openEpisodeModal available:",
  "ðŸ“º Modal function called successfully",
  "ðŸ“º Error calling episode modal:",
  "ðŸ“º Episode tracking modal function not available",
  "ðŸ”— Button element:",
  "ðŸ”— Button ID:",
  "ðŸ”— Button classes:",
  "ðŸ”— Calling openShareSelectionModal with event:",
  "ðŸ”— Share modal function called successfully",
  "ðŸ”— Error calling share modal:",
  "ðŸ”— Share modal function not available",
  "ðŸ”— Available functions:",
  "ðŸ”— Poster button clicked:",
  ".show-card",
  ".card-more-dropdown",
  ".providers-slot",
  ".extras-slot",
  ".trivia-slot",
  "ðŸ”§ DOMContentLoaded - FABs should be visible now",
  "ðŸš€ Using centralized FlickletApp initialization",
  "ðŸ”§ Initializing FAB docking system",
  "ðŸ”§ Manual FAB docking trigger",
  "âš ï¸ Using fallback initialization sequence",
  "Share import guard error:",
  "\r\n              <option value=",
  ">EN</option>\r\n              <option value=",
  ">ES</option>\r\n            ",
  "ðŸ” Feedback form submit handler called",
  "ðŸ” Hostname:",
  "127.0.0.1",
  "ðŸ  Local development mode - showing success message",
  "Thanks for sharing! Your thoughts have been received. ðŸ’­ (Local mode - will work in production)",
  "ðŸŒ Production mode - submitting to Netlify",
  "/.netlify/functions/feedback",
  "âœ… Feedback submitted successfully:",
  "Thanks for sharing! Your thoughts have been received. ðŸ’­",
  "âŒ Error submitting feedback:",
  "Sorry, there was an error submitting your feedback. Please try again.",
  ");\r\n    if (feedbackForm) {\r\n      console.log(",
  ");\r\n      feedbackForm.addEventListener(",
  ", handleFeedbackSubmit);\r\n    } else {\r\n      console.log(",
  ");\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = ",
  "[Flicklet] Boot OK",
  "ðŸ§ª [VALIDATION] Starting HomeClean implementation test...",
  "âœ… [VALIDATION] HomeClean class found",
  "âŒ [VALIDATION] HomeClean class not found",
  "249, 250, 251",
  "âœ… [VALIDATION] Light theme variables applied",
  "âš ï¸ [VALIDATION] Light theme variables may not be applied",
  "âœ… [VALIDATION] #homeSection found",
  "âŒ [VALIDATION] #homeSection not found",
  "ðŸ§ª [VALIDATION] Testing HomeClean initialization...",
  "âœ… [VALIDATION] HomeClean initialized successfully",
  "âœ… [VALIDATION] #clean-root created",
  "âœ… [VALIDATION] All containers created",
  "âš ï¸ [VALIDATION] Only ${containersFound}/${containers.length} containers found",
  "âœ… [VALIDATION] All rails created",
  "âš ï¸ [VALIDATION] Only ${railsFound}/${rails.length} rails found",
  "âœ… [VALIDATION] ${cards.length} cards rendered",
  "âš ï¸ [VALIDATION] No cards rendered",
  ".rail",
  "âœ… [VALIDATION] Rail scroll-snap configured",
  "âš ï¸ [VALIDATION] Rail scroll-snap not configured",
  "âŒ [VALIDATION] #clean-root not created",
  "âŒ [VALIDATION] HomeClean initialization failed",
  "âŒ [VALIDATION] HomeClean test failed:",
  "ðŸ§ª [VALIDATION] Testing accessibility...",
  ".title, .group-title",
  "âœ… [VALIDATION] Text contrast appears adequate",
  "âš ï¸ [VALIDATION] Text contrast may need improvement",
  ");\r\n        const h3Elements = cleanRoot.querySelectorAll(",
  ");\r\n        \r\n        if (h2Elements.length > 0 && h3Elements.length > 0) {\r\n            console.log(",
  ");\r\n        } else {\r\n            console.warn(",
  ");\r\n        }\r\n    }\r\n}\r\n\r\n// Run tests\r\ntestHomeCleanInit().then(() => {\r\n    testAccessibility();\r\n    console.log(",
  "ðŸ§ª [REAL DATA TEST] Testing Currently Watching data connection...",
  "ðŸ” [REAL DATA TEST] Checking data sources...",
  "âœ… [REAL DATA TEST] WatchlistsAdapterV2 found",
  "ðŸ” [REAL DATA TEST] User UID:",
  "No user (local data)",
  "ðŸ“Š [REAL DATA TEST] Adapter data:",
  "âœ… [REAL DATA TEST] Found ${adapterData.watchingIds.length} watching IDs",
  "ðŸ“º [REAL DATA TEST] Item ${id}:",
  "\r\n                        });\r\n                    } else {\r\n                        console.warn(",
  ");\r\n                    }\r\n                }\r\n            } else {\r\n                console.warn(",
  ");\r\n            }\r\n        } else {\r\n            console.warn(",
  "ðŸ§ª [REAL DATA TEST] Testing HomeClean with real data...",
  "âœ… [REAL DATA TEST] #homeSection found, initializing HomeClean...",
  "âœ… [REAL DATA TEST] HomeClean initialized successfully",
  "ðŸ“º [REAL DATA TEST] Rendered ${cards.length} cards in CW rail",
  ".title",
  ".meta",
  "ðŸŽ¬ [REAL DATA TEST] First card: ",
  " - ${meta}",
  "âŒ [REAL DATA TEST] HomeClean initialization failed",
  "âŒ [REAL DATA TEST] #homeSection not found",
  "âŒ [REAL DATA TEST] HomeClean class not found",
  "âŒ [REAL DATA TEST] Test failed:",
  "ðŸŽ‰ [REAL DATA TEST] Test completed",
  "[home-clean] Failed to load holiday assignments:",
  "[home-clean] Failed to save holiday assignments:",
  "\r\n            <svg width=",
  " height=",
  " xmlns=",
  ">\r\n                <rect width=",
  " fill=",
  "/>\r\n                <text x=",
  " y=",
  " text-anchor=",
  " dominant-baseline=",
  " \r\n                      font-family=",
  " font-size=",
  ">\r\n                    ${text}\r\n                </text>\r\n            </svg>\r\n        ",
  "Title ${i}",
  "S${Math.floor(Math.random() * 3) + 1} â€¢ E${Math.floor(Math.random() * 10) + 1}",
  "Poster ${i}",
  "cw-${item.title}",
  "Unknown Title",
  "No Poster",
  "S${item.season || 1} â€¢ E${item.episode || 1}",
  "[home-clean] Next Up Data from tv.watching:",
  "[home-clean] No TV watching data for Next Up",
  "t have nextAirDate/airDate, just show all items as ",
  "\r\n        return source.slice(0, 12).map(item => {\r\n            return {\r\n                id: item.id || ",
  ",\r\n                title: item.name || item.title || ",
  ",\r\n                poster: item.poster_path ? \r\n                    ",
  " : \r\n                    this.generatePosterSVG(",
  ", 220, 330),\r\n                upNextText: ",
  "${genre.toLowerCase()}-show",
  "flicklet:curatedCache:${genre.toLowerCase()}",
  "[home-clean] Using cached data for ${genre}",
  "[home-clean] Fetching ${genre} data from TMDB...",
  "),\r\n                    sort_by: ",
  "for-you-${item.name}",
  "No description available.",
  "[home-clean] Failed to fetch ${genre} data:",
  "[home-clean] No data available for ${genre}. tmdbGet:",
  "[home-clean] Cache read error:",
  "[home-clean] Cache write error:",
  "card cw",
  "<div class=",
  ">Holiday: ${this.holidayAssignments[item.id]}</div>",
  ";\r\n\r\n        card.innerHTML = ",
  "background-image: url(",
  "); background-size: cover; background-position: center;",
  "${item.id}",
  "card up-next",
  "\r\n            <div class=",
  " style=",
  "${item.poster}",
  "></div>\r\n            <div class=",
  ">\r\n                <div class=",
  ">${item.title}</div>\r\n                <div class=",
  ">${item.upNextText}</div>\r\n            </div>\r\n        ",
  "card for-you",
  ")\r\n            : ",
  "[home-clean] Rail ${railId} not found",
  ".card-container",
  "[home-clean] Card container not found in ${railId}",
  ":\r\n                    card = this.createCWCard(item);\r\n                    break;\r\n                case ",
  ":\r\n                    card = this.createUpNextCard(item);\r\n                    break;\r\n                case ",
  "[home-clean] Rail ${railId} has ${data.length} cards, expected 12",
  ");\r\n        this.renderRail(",
  ", upNextData, ",
  "[home-clean] Failed to render For You rails:",
  "[home-clean] Action ${action} executed for ${title}",
  "[home-clean] Analytics track:",
  "[home-clean] Analytics tracking failed:",
  "Added ",
  " to wishlist",
  "[home-clean] Move to wishlist failed:",
  "Marked ",
  " as watched",
  "[home-clean] Mark as watched failed:",
  "Dismissed ",
  ");\r\n        } catch (error) {\r\n            console.error(",
  "Deleted ",
  ", error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show toast notification\r\n     */\r\n    showToast(message, type = ",
  "[home-clean] Toast: ${message}",
  "[home-clean] Toast failed:",
  "] .title",
  "[home-clean] Holiday assigned:",
  ");\r\n        if (!card) return;\r\n\r\n        let content = card.querySelector(",
  ");\r\n        let existingBadge = content.querySelector(",
  ");\r\n        \r\n        if (existingBadge) {\r\n            existingBadge.textContent = ",
  ";\r\n        } else {\r\n            const badge = document.createElement(",
  ");\r\n            badge.className = ",
  ";\r\n            badge.textContent = ",
  ";\r\n            content.insertBefore(badge, content.querySelector(",
  "Currently Watching",
  "Next Up",
  "Not found",
  "x mandatory",
  "[home-clean] Rail Report:",
  "[home-clean] Rerendered with current data sources",
  "card cw-card",
  ".poster-fallback",
  "Holiday +",
  "Add to Holiday",
  ";\n        chip.style.padding = ",
  ";\n        chip.style.borderRadius = ",
  ";\n        chip.style.border = ",
  ";\n        chip.style.background = ",
  ";\n        chip.style.color = ",
  ";\n        chip.style.fontSize = ",
  ";\n        chip.style.fontWeight = ",
  ";\n        chip.style.cursor = ",
  ";\n        \n        const blurb = document.createElement(",
  ");\n        blurb.className = ",
  ";\n        blurb.textContent = this.data.blurb || ",
  "[CardCW] Generated actions container with ${buttons.length} buttons for ${this.data.title}",
  "\n            <svg width=",
  ">\n                <rect width=",
  "/>\n                <text x=",
  " \n                      font-family=",
  ">\n                    ${title}\n                </text>\n            </svg>\n        ",
  "<img src=",
  " alt=",
  " class=",
  " />",
  "card fy-card",
  ";\n        \n        const where = document.createElement(",
  ");\n        where.className = ",
  ";  // FIXED: Dedicated class for blue tag\n        where.textContent = ",
  "cta-btn action-btn",
  "action-btn cta-btn",
  "[CardForYou] Generated actions container with 1 button for ${this.data.title}",
  "card up-card",
  ";\n        \n        const upNext = document.createElement(",
  ");\n        upNext.className = ",
  ";  // FIXED: Dedicated class for green line\n        upNext.textContent = this.data.upNextLine || ",
  " id=",
  " role=",
  " aria-modal=",
  ">\r\n                    <div class=",
  ">ðŸŽ„ Assign Holiday Theme</div>\r\n                    <div class=",
  ">\r\n                        <div class=",
  " data-holiday=",
  ">ðŸŽƒ Halloween</div>\r\n                        <div class=",
  ">ðŸ¦ƒ Thanksgiving</div>\r\n                        <div class=",
  ">ðŸŽ„ Christmas</div>\r\n                        <div class=",
  ">ðŸŽŠ New Year</div>\r\n                        <div class=",
  ">ðŸ’ Valentine",
  "holiday-modal-btn primary",
  ";\r\n\r\n        // Add modal styles\r\n        const styles = ",
  ";\r\n\r\n        // Insert styles and modal\r\n        document.head.insertAdjacentHTML(",
  ", styles);\r\n        document.body.insertAdjacentHTML(",
  ", modalHTML);\r\n        \r\n        this.modal = document.getElementById(",
  ".holiday-option",
  ".holiday-option.selected",
  "New Year\\",
  "Independence Day",
  "Labor Day",
  "Memorial Day",
  "Veterans Day",
  " data-close=",
  ">\r\n                    <h3>Assign Holiday</h3>\r\n                    <button class=",
  ">&times;</button>\r\n                </div>\r\n                <div class=",
  ">\r\n                    <p class=",
  "></p>\r\n                    <div class=",
  ">\r\n                        ${this.holidays.map(holiday => ",
  ").join(",
  ")}\r\n                    </div>\r\n                </div>\r\n                <div class=",
  ">\r\n                    <button class=",
  ">Cancel</button>\r\n                </div>\r\n            </div>\r\n        ",
  ".card-title",
  "Assign holiday for: ${options.title || ",
  ";\r\n        }\r\n        \r\n        // Show modal\r\n        this.modal.style.display = ",
  ";\r\n        document.body.style.overflow = ",
  ";\r\n        \r\n        // Focus first holiday option\r\n        const firstOption = this.modal.querySelector(",
  ");\r\n        if (firstOption) {\r\n            firstOption.focus();\r\n        }\r\n        \r\n        console.log(",
  ";\r\n        \r\n        // Clear current card\r\n        this.currentCard = null;\r\n        \r\n        console.log(",
  "[HolidayModal] Selected holiday:",
  "[HomeClean] Initializing component...",
  "[HomeClean] Content replaced successfully",
  "[HomeClean] No root element provided",
  "[HomeClean] Component initialized successfully",
  "[HomeClean] Initialization failed:",
  "[HomeClean] Preserved community section",
  "[HomeClean] Preserved feedback section",
  "[HomeClean] Restored community content",
  "[HomeClean] Restored feedback content",
  "\n            <!-- 1. Your Shows Container (2 rails: CW + Next Up) -->\n            <div class=",
  ">\n                <div class=",
  ">\n                    <h2 class=",
  ">Your Shows</h2>\n                </div>\n                <div class=",
  "></div>\n                \n                <!-- Currently Watching Subsection -->\n                <div class=",
  ">\n                    <h3>Currently Watching</h3>\n                    <div class=",
  "></div>\n                </div>\n\n                <!-- Next Up Subsection -->\n                <div class=",
  ">\n                    <h3>Up Next</h3>\n                    <div class=",
  "Scream into the void... What devours your soul about Flicklet?",
  ";\n        \n        console.log(",
  "[HomeClean] Rendering all rails...",
  "[HomeClean] AppData available:",
  "[HomeClean] TV data:",
  "[HomeClean] Movies data:",
  "[HomeClean] Combined watching:",
  ", 3),\n            nextup: tvData.watching?.slice(0, 3) || this.generateMockData(",
  ", 3),\n            foryou: {\n                drama: moviesData.wishlist?.slice(0, 4) || this.generateMockData(",
  ", 4, ",
  "),\n                comedy: moviesData.wishlist?.slice(4, 8) || this.generateMockData(",
  "),\n                horror: moviesData.wishlist?.slice(8, 12) || this.generateMockData(",
  ")\n            },\n            theaters: moviesData.watching?.slice(0, 6) || this.generateMockData(",
  ", 6, ",
  ")\n        };\n        \n        console.log(",
  ");\n        \n        // Render CW rail\n        await this.renderRail(",
  ", realData.cw);\n        \n        // Render Next Up rail\n        await this.renderRail(",
  "[HomeClean] All rails rendered successfully",
  ") {\n        const baseData = {\n            id: Math.random().toString(36).substr(2, 9),\n            title: ",
  ",\n            meta: ",
  ",\n            blurb: ",
  ",\n            poster: null  // FIXED: Use null to trigger fallback SVG\n        };\n        \n        if (type === ",
  ") {\n            baseData.upNextLine = ",
  ";\n            delete baseData.blurb;  // No blurb for read-only\n        }\n        \n        if (type === ",
  ") {\n            baseData.meta = ",
  " #${i + 1}",
  ") {\n        const rail = this.container.querySelector(",
  ");\n        if (!rail) {\n            console.warn(",
  ");\n            return;\n        }\n        \n        console.log(",
  " (${genre})",
  "} in #${railId}",
  "[HomeClean] Skipped invalid card at index ${index} in ${railId}",
  "[HomeClean] Rendered ${data.length} cards in #${railId}",
  ":\n                    card = new window.CardCW(item);\n                    break;\n                case ",
  ":\n                    card = new window.CardNextUp(item);\n                    break;\n                case ",
  ":\n                    card = new window.CardForYou(item);\n                    break;\n                case ",
  "[HomeClean] Unknown card type: ${cardType}",
  "[HomeClean] Failed to create card instance for ${cardType}",
  "[HomeClean] Failed to render card element for ${cardType}",
  ");\n            \n            // Store card reference\n            this.cards.set(",
  ", card);\n            \n            return cardElement;\n            \n        } catch (error) {\n            console.error(",
  ", error);\n            return document.createElement(",
  "[HomeClean] Setting up event listeners...",
  "[HomeClean] Event listeners set up",
  "[HomeClean] Data ready event received, refreshing rails...",
  "[HomeClean] Cards changed event received, refreshing rails...",
  "[HomeClean] Item added event received, refreshing rails...",
  "[HomeClean] Item removed event received, refreshing rails...",
  "[HOLIDAY DEBUG] Setting up holiday chip monitoring...",
  "[HOLIDAY DEBUG] Holiday chip ADDED at ${new Date().toISOString()}:",
  "[HOLIDAY DEBUG] Holiday chip REMOVED at ${new Date().toISOString()}:",
  ") {\n                        // Holiday debug disabled\n                        // console.log(",
  "[HOLIDAY DEBUG] Found ${existingChips.length} existing holiday chips at ${new Date().toISOString()}",
  ";\n            \n            if (!isVisible) {\n                // Holiday debug disabled\n                // console.log(",
  "[HomeClean] Action clicked: ${action} for ${title}",
  "[HomeClean] Unknown action: ${action}",
  "[HomeClean] HolidayModal not initialized",
  "[HomeClean] Assigning holiday ${holiday} to card ${cardId}",
  ");\n        assignments[cardId] = holiday;\n        localStorage.setItem(",
  ");\n        if (card) {\n            let holidayChip = card.querySelector(",
  "Holiday: ${holiday}",
  "[HomeClean] Refreshing component...",
  "[HomeClean] Global refresh called",
  "[HomeClean] No instance available for global refresh",
  "[HomeClean] Moving ${title} to wishlist",
  "[HomeClean] No moveItem function available",
  "[HomeClean] Marking ${title} as watched",
  "[HomeClean] Dismissing ${title}",
  "[HomeClean] No removeItem function available",
  "[HomeClean] Deleting ${title}",
  "[HomeClean] Destroying component...",
  "[HomeClean] Constructor exported â€“ ready for resurrection!",
  "[HomeClean] Starting mount process...",
  "[HomeClean] Component already mounted",
  "[HomeClean] Component mounted successfully",
  "[HomeClean] Failed to initialize component",
  "[HomeClean] Mount failed:",
  "[HomeClean] Starting destroy process...",
  "[HomeClean] Component destroyed successfully",
  "[HomeClean] Destroy failed:",
  "[HomeClean] All component files loaded",
  "[HomeClean] Failed to load component files:",
  ");\n        if (existingScript) {\n            console.log(",
  "[HomeClean] HomeClean component already available, skipping load",
  "[HomeClean] Loading script: ${src}",
  "[HomeClean] Successfully loaded: ${src}",
  "[HomeClean] Failed to load: ${src}",
  "Failed to load ${src}",
  "[HomeClean] Mock mode ${window.FLAGS.mockMode ? ",
  "[HomeClean] Entry point loaded",
  "ðŸš€ Phase 5 Implementation Complete!",
  "\r\nðŸ“‹ Phase 5 Deliverables:\r\n\r\nâœ… 1. Updated HomeClean Component Structure:\r\n   - Changed container ID from ",
  " to ",
  "#clean-root .rail",
  ");\r\n\r\n// Auto-run validation if HomeClean is mounted\r\nif (window.homeCleanState?.isMounted) {\r\n    console.log(",
  "triviaTile not found, skipping trivia initialization",
  ".trivia-stats",
  "Required trivia elements missing:",
  "/.netlify/functions/trivia-proxy",
  ",\r\n      q: ",
  ",\r\n      choices: [",
  "Alien: Earth",
  "Star Trek",
  "The Expanse",
  "Martin Freeman",
  "David Tennant",
  "Matt Smith",
  "House of the Dragon",
  "Apple TV+",
  "The Mandalorian",
  "HBO Max",
  "Amazon Prime",
  "Breaking Bad",
  "Stranger Things",
  "The Duffer Brothers",
  "Shonda Rhimes",
  "David Fincher",
  "The Walking Dead",
  ") {\r\n    const langCode = lang === ",
  " ? ",
  ";\r\n    const cacheKey = ",
  ")[0];\r\n      const seed = utcDate.replace(/-/g, ",
  "${TRIVIA_API_BASE}?amount=5&category=14&difficulty=medium&type=multiple&encode=url3986&seed=${seed}",
  "Proxy error ",
  "Trivia API failed, using fallback:",
  "Unable to load trivia questions right now.",
  "[Trivia] fetch failed",
  ")[0];\r\n    const seed = utcDate.replace(/-/g, ",
  ")[0];\r\n    const dailyKey = ",
  ";\r\n    const currentCount = parseInt(localStorage.getItem(dailyKey) || ",
  ";\r\n    const dailyCount = parseInt(localStorage.getItem(dailyKey) || ",
  ");\r\n\r\n    // Simple counter in top left\r\n    const statsHTML = ",
  ");\r\n    safeSetTextContent(fEl, ",
  ");\r\n    safeSetHidden(nBtn, true);\r\n\r\n    q.choices.forEach((text, idx) => {\r\n      const li = document.createElement(",
  ");\r\n      li.setAttribute(",
  ");\r\n      li.className = ",
  ";\r\n    cEl.style.pointerEvents = ",
  ".choice-btn",
  "feedback-${isCorrect ? ",
  ";\r\n    fEl.style.display = ",
  ";\r\n    safeSetTextContent(\r\n      fEl,\r\n      isCorrect\r\n        ? ",
  "\r\n        : ",
  ")[0];\r\n      const dailyKey = ",
  ";\r\n      const dailyCount = parseInt(localStorage.getItem(dailyKey) || ",
  "Daily limit reached!",
  "\r\n          <div style=",
  ">\r\n            <p>You",
  "Pro users get 50 questions per day",
  "Upgrade to Pro for 50 questions per day",
  ",\r\n        );\r\n        safeSetTextContent(fEl, ",
  "Error loading trivia question:",
  "Error loading question. Please try again.",
  "Error initializing trivia:",
  "Daily Trivia",
  "Loading question...",
  "Next Question",
  "Firebase not loaded",
  "flicklet-71dff.firebaseapp.com",
  "flicklet-71dff.appspot.com",
  "[firebase-config] ready for projectId:",
  "[firebase-config] Firebase initialized successfully",
  "[Firestore] exists:",
  "[Firestore] test failed:",
  "[Firestore] Test function available: window._testFirestore(uid)",
  "[firebase-config] Firebase initialization failed:",
  "[firebase-config] Firebase SDK not loaded yet",
  "Flicklet v28.148.0 - TV & Movie Tracker",
  "Skip to main content",
  "Skip to search",
  "Skip to navigation",
  "Ready to discover your next favorite show?",
  "TV &amp; Movie Tracker",
  "v28.147.0",
  "Sign In",
  "Search",
  "Loading inspirational quote...",
  "Already Watched",
  "Search Results",
  "Your Shows",
  "Target FlickWord",
  "Win %",
  "Word Game",
  "Wordle-style daily word play",
  "Play Now",
  "Brain Daily Trivia",
  "Fresh question, new bragging rights",
  "For You",
  "ðŸ’¬ Share Your Thoughts",
  "Help us improve Flicklet with your feedback",
  "ðŸ› Report a Bug",
  "ðŸ’¡ Suggest a Feature",
  "ðŸ’¬ General Feedback",
  "ðŸ“¹ Submit Video",
  "Recommendations based on your likes and ratings.",
  "Manage your account and basic preferences",
  "Display Name",
  "Save",
  "Your name will appear in the header and personalize your experience",
  "My Statistics",
  "View your watching statistics and achievements",
  "Loading stats...",
  "Not Interested Management",
  "Manage shows and movies you've marked as not interested",
  "Manage Not Interested List",
  "Choose which types of notifications you'd like to receive",
  "Upcoming episode alerts",
  "Get notified when new episodes of shows you're watching are about to air",
  "Weekly discover picks",
  "Monthly stats digest",
  "Get a monthly summary of your watching statistics and achievements",
  "â­ Pro Notifications",
  "Advanced notification features for Pro users",
  "ðŸ”” Advanced Notifications (PRO)",
  "Enable advanced notifications",
  "Lead time (hours):",
  "Monitor lists:",
  "ðŸ”’ Pro feature - upgrade to unlock advanced notifications",
  "Layout Settings",
  "Customize how your lists and cards are displayed",
  "ðŸ“‹ Core Features",
  "Basic layout customization available to all users",
  "Condensed list view (more items per screen)",
  "Show more items per screen by reducing card spacing and padding",
  "Show movie/TV show posters",
  "Display poster images for each show and movie in your lists",
  "Theme Preference",
  "Dark Mode",
  "Click to switch between light and dark themes",
  "Home Page TV/Movie Lists",
  "Number of curated recommendation sections to show on the home page",
  "ðŸŽ¯ Customize Curated Row Genres",
  "Curated Row 1",
  "Curated Row 2",
  "Curated Row 3",
  "Reset to Smart Defaults",
  "Currently Watching Preview Limit",
  "Number of currently watching shows to display on the home page preview",
  "Movie Enable Episode Tracking",
  "â€¢ Track your progress through each season",
  "â€¢ Get notifications for new\n                        episodes",
  "â€¢ See detailed watching statistics",
  "â­ Pro Layout Features",
  "Advanced layout and theming features for Pro users",
  "Art Theme Packs",
  "Dark Pro ðŸ”’",
  "Neon Pro ðŸ”’",
  "Minimal Pro ðŸ”’",
  "ðŸ”’ Pro unlocks more themes",
  "Data Management",
  "Export, import, or reset your data",
  "Basic data management features available to all users",
  "Export JSON",
  "Download a complete backup of your lists and settings as a JSON file",
  "Import JSON",
  "Restore your data from a previously exported Flicklet backup file",
  "ðŸš« Not Interested List",
  "Manage items you don't want to see in recommendations",
  "Eye View Not Interested Items",
  "ðŸ—‘ï¸ Clear All",
  "Items you're not interested in:",
  "Items marked as \"Not Interested\" won't appear in your Discover recommendations",
  "Share Lists",
  "Generate a shareable text list of your TV shows and movies to send to friends",
  "Reset All Data",
  "âš ï¸ Permanently delete all your lists, settings, and data. This cannot be undone.",
  "â­ Pro Data Features",
  "Advanced data management features for Pro users",
  "Export CSV (Pro)",
  "Export your data in CSV format for use in spreadsheets (Pro feature)",
  "Pro Features",
  "Unlock advanced features and premium content with Flicklet Pro",
  "Preview Pro Features",
  "Toggle Pro features on/off to see what's available without purchasing",
  "Extra Trivia (Pro)",
  "Access additional trivia questions and behind-the-scenes content (Pro feature)",
  "Pro Features Include:",
  "Advanced features and premium content available with Flicklet Pro subscription",
  "ðŸ  About Unique4U",
  "ðŸ‘¥ About the Creators",
  "ðŸ“± About the App",
  "Data Attribution:",
  "This product uses the TMDB API but is not\n                  endorsed or certified by TMDB.",
  "So we made this instead:",
  "Stupidly easy.",
  "Open it, add your show, done.",
  "Always free at the core.",
  "No paywalls for the basics.",
  "Friend-proof sharing.",
  "Copy your list and drop it in a text when\n                    someone asks, \"What should I watch?\"",
  "Share Your Thoughts",
  "Don't fill this out if you're human:",
  "Your Message",
  "Share It!",
  "Cancel",
  "Reset to Defaults",
  "Share Selected Items",
  "Select Everything",
  "Select what to share",
  "ðŸ“‹ Copy",
  "ðŸŽ¯ FlickWord",
  "ðŸ§  Daily Trivia",
  "Use\n              system",
  "Light (default)",
  "Mardi Gras overlay",
  "[card-actions] Unknown action",
  "[card-actions] Failed",
  "Failed to update list",
  "âœ… Card actions loaded",
  "Unknown action handler: ${name}",
  "[actions] Moving to wishlist:",
  "[actions] Calling window.moveItem with:",
  "[actions] Calling window.addToListFromCache with:",
  "[actions] No move function available, using fallback",
  "[actions] Moving to watching:",
  "[actions] Debug - window.moveItem available:",
  "[actions] Debug - window.addToListFromCache available:",
  "[actions] Debug - fallbackMoveItem available:",
  "[actions] Calling fallbackMoveItem with:",
  "re sure the main system isn",
  "[actions] WatchlistsAdapter is available but moveItem is not - this might be a timing issue",
  "[actions] Retrying with window.moveItem after delay",
  "[actions] Still no moveItem after delay, using fallback",
  "[actions] WatchlistsAdapter not available, using fallback",
  "[actions] Undoing to wishlist:",
  "[actions] Marking not interested:",
  "[actions] Adding to wishlist:",
  "[actions] Calling addToListFromCache for:",
  "[actions] addToListFromCache completed",
  "[actions] addToListFromCache function not available, polling for availability...",
  "[actions] Function available after ${attempts} attempts, calling addToListFromCache for:",
  "[actions] Attempt ${attempts}/${maxAttempts}, retrying in ${delay}ms...",
  "[actions] addToListFromCache still not available after",
  "[actions] Marking as watched:",
  "[actions] moveItem function not available, polling for availability...",
  "[actions] Function available after ${attempts} attempts, calling moveItem for:",
  "[actions] moveItem still not available after",
  "[actions] Opening details:",
  "[actions] Exporting item:",
  "Exporting ${item.title}...",
  "[actions] Sharing item:",
  "Sharing ${item.title}...",
  "[actions] Recommending item:",
  "Recommending ${item.title} to a friend...",
  "[actions] Opening episode modal:",
  "[actions] Opening Smart Notifications for:",
  "ðŸ”” Smart Notifications for ",
  "\\n\\nSet custom lead times for new episodes and choose which lists to monitor.",
  "[actions] Opening Viewing Journey for:",
  "ðŸ“Š Viewing Journey for ",
  ",\r\n  );\r\n}\r\n\r\nfunction openAdvancedCustomization(item) {\r\n  console.log(",
  "ðŸŽ¨ Advanced Customization for ",
  "\\n\\nUnlock premium color schemes, custom accent colors, and advanced layout options.",
  "[actions] Opening Extra Trivia for:",
  "ðŸ§  Extra Trivia for ",
  "\\n\\nAccess additional trivia questions and behind-the-scenes content.",
  "[actions] Opening Pro Preview for:",
  "â­ Pro Preview for ",
  "\\n\\nToggle Pro features on/off to see what",
  "Delete item",
  "Remove ",
  "this title",
  " from your lists?",
  "Delete ",
  "? This cannot be undone.",
  "[delete] Debug - removeItemFromCurrentList available:",
  "[delete] Debug - window.removeItemFromCurrentList:",
  "[delete] Removing item:",
  "ðŸ”„ [delete] Syncing deletion to Firebase...",
  "ðŸ”„ [delete] Invalidating WatchlistsAdapter cache...",
  "[delete] removeItemFromCurrentList not available, trying fallback...",
  "[delete] Using fallback removal from appData",
  "[delete] Removed from ${mediaType}.${list}",
  "[delete] No remover wired for",
  "t loaded yet\r\nfunction fallbackMoveItem(itemId, destinationList) {\r\n  console.log(",
  ", itemId, ",
  ", destinationList);\r\n  console.log(",
  ", window.appData);\r\n\r\n  // Don",
  "[actions] No appData available for fallback move",
  "[actions] Item not found for fallback move:",
  "[actions] Available items in appData:",
  "[actions] Item already in target list:",
  "[actions] Source array is not valid:",
  "[actions] Removed item from source list:",
  "[actions] Added item to destination list:",
  "ðŸ”„ [actions] Syncing fallback move to Firebase...",
  "ðŸ”„ [actions] Invalidating WatchlistsAdapter cache...",
  "[actions] Fallback move completed:",
  ";\n\n  function resolvePosterUrl(poster_path) {\n    if (!poster_path || poster_path.trim() === ",
  ") return PLACEHOLDER_SVG;\n    if (poster_path.startsWith(",
  ") || poster_path.startsWith(",
  ")) return poster_path;\n    if (poster_path.startsWith(",
  ")) return ",
  ");\n    const mediaType = raw.media_type || raw.mediaType || raw.type || (raw.first_air_date ? ",
  ") || ",
  ";\n    const title = raw.title || raw.name || raw.original_title || raw.original_name || ",
  ";\n    const overview = raw.overview || ",
  ";\n    \n    // Normalize additional fields to remove ",
  " values\n    // Extract genres - prefer first genre, but handle multiple\n    let genre = raw.genre || ",
  ");\n    }\n    const seasonEpisode = raw.seasonEpisode || raw.sxxExx || ",
  ";\n    const nextAirDate = raw.next_episode_air_date || raw.nextAirDate || raw.next_air_date || ",
  ";\n    const runtime = raw.runtime || raw.episode_run_time || ",
  ";\n    const whereToWatch = raw.whereToWatch || raw.provider || ",
  ";\n    const curatorBlurb = raw.curatorBlurb || raw.description || ",
  ";\n    const userRating = raw.userRating || raw.rating || 0;\n    const progress = raw.progress || ",
  "âœ… Card data adapter loaded",
  "[marquee] using fallback quotes:",
  ",\r\n          ",
  "[FIX] Legacy disabled",
  ",\n    alias: ",
  ",\n    avatarUrl: ",
  ",\n    email: ",
  "t override it\n        if (window.__USERNAME_JUST_SAVED__) {\n          console.log(",
  ";\n          this.email = user.email || ",
  ")[0] || ",
  ";\n          this.alias = settingsDisplayName || user.displayName || user.email?.split(",
  ";\n          this.avatarUrl = user.photoURL || ",
  ";\n          \n          console.log(",
  ", this.displayName, ",
  ", !!settingsDisplayName);\n        }\n      } else {\n        this.displayName = ",
  ";\n        this.alias = ",
  ";\n        this.avatarUrl = ",
  ";\n        this.email = ",
  "ðŸ‘¤ ${this.displayName}",
  "Signed in as ${this.email}. Click to sign out.",
  "Click to sign in",
  "${this.alias}, your couch has a permanent dent",
  "${this.alias}, ready to binge?",
  "${this.alias}, what",
  ",\n          ",
  ";\n      }\n\n      // Update settings access\n      const settingsElements = document.querySelectorAll(",
  ");\n      settingsElements.forEach((el) => {\n        if (this.isAuthenticated) {\n          el.style.display = ",
  ";\n          el.removeAttribute(",
  ");\n        } else {\n          el.style.display = ",
  ";\n          el.setAttribute(",
  "[app] Refreshing tab discovery after auth state change...",
  "ðŸš€ [FlickletApp] init",
  "ðŸ”¢ Emitted cards:changed event during initialization",
  "âœ… [FlickletApp] ready",
  "ðŸ’¥ [FlickletApp] init failed:",
  "[FlickletApp] Data init timeout, proceeding anyway",
  ";\n      try {\n        if (typeof applyTranslations === ",
  ") {\n          applyTranslations(lang);\n        }\n      } catch (e) {\n        FlickletDebug.warn(",
  "initFirebase skipped (SDK not present)",
  "âš ï¸ Firebase already initialized, skipping",
  "ðŸ”¥ Initializing Firebase...",
  "âœ… Firebase available, setting up auth listener",
  "âŒ Firebase initialization timeout after 8 seconds",
  "Firebase initialization timeout",
  "Firebase initialization failed",
  "ðŸ”„ Setting up fallback authentication system",
  "ðŸ”’ ${t(",
  ";\n        accountBtn.title =\n          t(",
  ";\n      }\n\n      // Show a notification about offline mode\n      this.showNotification(\n        t(",
  ",\n        ",
  ",\n      );\n    },\n\n    setupAuthListener() {\n      try {\n        console.log(",
  "ðŸ‘¤ Current user on init:",
  "User: ${user.email}",
  "No user",
  "âŒ Auth listener setup failed:",
  "ðŸ‘¤ Sign Out",
  "Signed in as ${emailOrName}",
  "Signed in",
  "ðŸ‘¤ Sign In",
  "Sign in",
  "font-size:12px;opacity:.8;margin-top:2px;",
  "Sign out",
  ";\n          hint.style.display = show ? ",
  ") return;\n          sessionStorage.setItem(",
  ");\n\n          const wrap = document.createElement(",
  ");\n          wrap.innerHTML = ",
  "position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);z-index:9999",
  "background:#fff;padding:16px 20px;border-radius:10px;max-width:420px;width:92%;box-shadow:0 10px 30px rgba(0,0,0,.2)",
  "margin:0 0 8px 0;",
  "margin:0 0 14px 0;",
  "btn btn--sm",
  ";\n          document.body.appendChild(wrap);\n          document.getElementById(",
  ")?.addEventListener(",
  ", () => wrap.remove());\n          document.getElementById(",
  "\n              <div id=",
  ">\n                <div style=",
  ">\n                  <h3 style=",
  ">what should we call you?</h3>\n                  <input id=",
  " value=",
  " />\n                  <div style=",
  ">\n                    <button id=",
  " type=",
  " data-action=",
  ">Skip</button>\n                    <button id=",
  ">Save</button>\n                  </div>\n                </div>\n              </div>",
  "Firestore not available",
  "margin:8px 0;font-weight:600;",
  "#header-left, header .left, body",
  "${name}<div style=",
  ">I have a PhD in binge-watching.</div>",
  "[auth] username flow failed",
  "[auth] Firebase not available",
  "[auth] Sign-in failed",
  "[auth] Sign-out failed",
  "[app] processUserSignIn already in progress, skipping duplicate call",
  "âœ… User signed in, processing...",
  ".modal-backdrop[data-modal=",
  "ðŸ”„ Creating user database entry...",
  ",\n                  displayName: user.displayName || ",
  ",\n                  photoURL: user.photoURL || ",
  "âœ… User database entry created successfully",
  "âŒ Failed to create user database entry:",
  "ðŸ”„ Loading user data from Firebase cloud storage...",
  "âœ… User data loaded from cloud successfully",
  "already in list",
  "ðŸ”„ Refreshing UI after cloud data load...",
  "ðŸ”¢ Emitted cards:changed event after cloud data load...",
  "ðŸ”„ Refreshing current tab content:",
  "âš ï¸ DataInit.trySync function not available - user data not loaded from cloud",
  "âŒ Failed to load user data from cloud:",
  "ðŸ” User signed in, Firebase user data:",
  "ðŸ” Setting account button label with Firebase displayName:",
  "s using the latest Firebase data\n        setTimeout(() => {\n          console.log(",
  "âœ… Loaded existing username into appData:",
  "ðŸ” Username check:",
  "ðŸ”§ Prompting for username...",
  "ðŸ”§ Username prompt result:",
  "âœ… Username saved:",
  "âœ… Username prompt marked as completed (skipped)",
  "ðŸ” Username already exists or was prompted:",
  "âŒ Error in user sign-in processing:",
  "âŒ Error in processUserSignIn:",
  "ðŸ§¹ FlickletApp.clearUserData called",
  "ðŸ§¹ localStorage cleared",
  "ðŸ§¹ Failed to clear localStorage:",
  ",\n          displayName: ",
  ",\n          lang: ",
  ",\n          theme: ",
  "ðŸ§¹ appData reset to empty state",
  "Welcome back!",
  ";\n        headerGreeting.textContent = ",
  ";\n      }\n\n      // Clear any duplicate cards\n      if (typeof window.cleanupDuplicateCards === ",
  ") {\n        window.cleanupDuplicateCards();\n      }\n\n      // Trigger UI refresh\n      if (typeof window.updateUI === ",
  ") {\n        window.updateUI();\n      }\n\n      console.log(",
  "ensureUser function not available",
  "ðŸ”¥ Reading from Firestore:",
  "âœ… Firestore read successful:",
  ", createdAt: Date.now() };\n          await ref.set(defaults, { merge: true });\n          console.log(",
  ", defaults);\n          return defaults;\n        }\n      } catch (error) {\n        console.error(",
  "ðŸ”¥ Writing to Firestore:",
  "âœ… Firestore write successful",
  "âŒ Firestore write failed:",
  "âŒ [FlickletApp] handlePostAuthSuccess failed:",
  "âœ… User doc updated in Firestore",
  "âŒ Failed to update user doc:",
  "[CloudLoad] Hydrated from Firestore. Bytes:",
  "[CloudLoad] Failed:",
  "[SeedCloud] payload too large, aborting seed:",
  ",\n          );\n          return false;\n        }\n\n        await db.doc(",
  ").set(payload, { merge: true });\n        console.info(\n          ",
  ",\n          (bytes / 1024).toFixed(1),\n          ",
  ",\n        );\n        return true;\n      } catch (error) {\n        console.error(",
  "ðŸ”„ Merging cloud watchlists data:",
  "âœ… Cloud data merged with local",
  "âŒ Failed to load/merge cloud data:",
  "[identity] username:missing â†’ prompt",
  "âŒ Failed to handle user identity:",
  ").trim();\n        if (username) {\n          console.info(",
  ");\n        }\n        return username;\n      } catch (error) {\n        console.error(",
  "[identity] username:saved=${trimmedUsername}",
  "âŒ Failed to set username:",
  "[identity] snark:render=${snarkText}",
  ",\n      );\n      existingModals.forEach((modal) => {\n        console.log(",
  ");\n        modal.remove();\n      });\n    },\n\n    async promptForUsernameOnce(suggest = ",
  ") {\n      // Check if username modal is already open\n      if (document.querySelector(",
  "âš ï¸ Username modal already in progress, waiting for existing promise",
  "ðŸ”§ Creating username modal...",
  "What do I call you?",
  "\n          <div style=",
  ">\n            <p style=",
  ">Choose a name to personalize your experience</p>\n            <input id=",
  " autocomplete=",
  " placeholder=",
  "]/g, (m) => ({ ",
  ">\n            <div style=",
  ">\n              <button id=",
  ">Skip</button>\n              <button id=",
  ">Save</button>\n            </div>\n          </div>\n        ",
  "s distinct from login modal\n        const wrap = document.querySelector(",
  ");\n        if (wrap) {\n          wrap.setAttribute(",
  "ðŸ”§ Modal backdrop clicked, closing",
  "ðŸ”§ Username modal already closed, ignoring duplicate call",
  "ðŸ”§ Username modal closing with value:",
  "uSave",
  "uCancel",
  "ðŸ”§ Setting up username modal buttons:",
  "ðŸ”§ Cancel button clicked",
  ";\n              console.log(",
  ", value);\n\n              // Validate input\n              if (value.length < 1) {\n                console.log(",
  ");\n                const errorEl = document.querySelector(",
  ");\n                if (errorEl) {\n                  errorEl.textContent = ",
  "ðŸ”§ Username too long, showing error",
  "Name must be 50 characters or less",
  "ðŸ”§ Username validated, closing modal",
  "ðŸ”§ Save button event listener attached",
  "âŒ Save button not found!",
  ";\n                console.log(",
  ");\n          if (backdrop) {\n            backdrop.addEventListener(",
  ", (e) => {\n              if (e.target === backdrop) {\n                console.log(",
  "ðŸ” Using Firebase displayName:",
  "ðŸ” Using passed displayName:",
  "ðŸ” Using email prefix:",
  "ðŸ‘¤ ${finalName}",
  ")} ${email}. ${t(",
  ";\n        console.log(",
  "${username}, try not to binge 12 seasons tonight",
  "${username}, your watchlist is judging you",
  "${username}, remember to eat between episodes",
  "${username}, sleep is also important",
  "${username}, your couch has a permanent dent",
  "ðŸ”§ openModal called:",
  ")\n      ) {\n        console.log(",
  ");\n        return null;\n      }\n\n      const wrap = document.createElement(",
  ");\n      wrap.className = ",
  ";\n      wrap.setAttribute(",
  "auth-modal-${Date.now()}",
  ";\n\n      // Don",
  "\n        <div class=",
  " aria-labelledby=",
  " data-testid=",
  " data-modal-body tabindex=",
  ">\n          <h3 id=",
  ">${title}</h3>\n          <div class=",
  ">${html}</div>\n          <div data-auth-msg aria-live=",
  "></div>\n          ${\n            showDefaultClose\n              ? ",
  "pointer-events: auto;",
  "btn secondary",
  ">Close</button>\n          </div>\n          ",
  "\n          }\n        </div>\n      ",
  "ðŸ”§ closeModal called",
  "ðŸ”§ Removing modal:",
  "ðŸ”§ Modal closed",
  "ðŸ”„ Running Firebase document migration...",
  "ðŸ“„ No document to migrate",
  ") {\n          updates[",
  "âœ… Migration completed",
  "âœ… No migration needed",
  "âŒ Migration failed:",
  "ðŸ§¹ Running cleanup for stray field...",
  "ðŸ“„ No document to clean up",
  "âœ… Cleanup completed",
  "âœ… No cleanup needed",
  "âŒ Cleanup failed:",
  "ðŸ”” ${type.toUpperCase()}: ${message}",
  "\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${type === ",
  " : type === ",
  "ðŸ‘¤ <span data-i18n=",
  "ðŸ” updateAccountButton using Firebase displayName:",
  "ðŸ” updateAccountButton using email prefix:",
  ";\n      if (accountHint) accountHint.textContent = t(",
  "updateTabContent function not available",
  ".tab-section",
  ");\n      allTabs.forEach(tab => {\n        tab.setAttribute(",
  ");\n      if (homeTab) {\n        homeTab.setAttribute(",
  "ðŸ”„ LEGACY: Switching to tab: ${tab}",
  "ðŸ” Search state check:",
  "ðŸ§¹ Clearing search due to tab switch to:",
  "ðŸ” Search not active, no clearing needed",
  "âš ï¸ Error checking search state:",
  "âš ï¸ SearchModule not available for search clearing",
  ");\n            }\n          }\n        } catch (error) {\n          console.warn(",
  "âš ï¸ Error getting search state for tab visibility:",
  "ðŸ” Search mode - showing tab: ${name}Tab",
  ");\n            console.log(",
  ");\n          } else {\n            // Show other tabs without active styling\n            btn.classList.remove(",
  ");\n            btn.classList.remove(",
  "); // Remove old active class\n            btn.setAttribute(",
  "t override with inline styles\n          console.log(",
  ");\n        } else {\n          console.error(",
  "âœ… ${result.sectionId} visibility: ${tab === ",
  "âš ï¸ Failed to update visibility for: ${result.sectionId}",
  "âœ… ${sectionId} visibility: ${tab === ",
  "âš ï¸ Home section not found: ${sectionId}",
  "t manage home sections\n          console.log(",
  ".top-search",
  "ðŸ” Search bar hidden for",
  ";\n          console.log(",
  ", tab, ",
  ");\n        }\n      }\n\n      // Load content for this tab first\n      if (typeof updateTabContent === ",
  "âš ï¸ ThemeManager not available",
  ";\n        }\n      }\n\n      console.log(",
  ");\n      this.showNotification(",
  "ðŸŽ­ toggleMardiGras called",
  "ðŸŽ­ Current Mardi Gras state:",
  ";\n      console.log(",
  "ðŸŽ­ Body data-mardi attribute:",
  "ðŸŽ­ Body classes:",
  "ðŸŽ­ Mardi Gras FAB element:",
  "ðŸŽ­ Mardi Gras FAB icon element:",
  ", icon.textContent);\n        }\n      }\n\n      console.log(",
  ");\n      this.showNotification(\n        ",
  ";\n        }\n      }\n\n      // Set Mardi Gras toggle icon\n      const mardiFab = document.getElementById(",
  ");\n      if (mardiFab) {\n        const icon = mardiFab.querySelector(",
  ") {\n            e.preventDefault();\n            document.getElementById(",
  ")?.focus();\n          } else if (e.key === ",
  ".overflow",
  ".overflow[aria-expanded=",
  ").forEach(o => \n          o.setAttribute(",
  ".media-card",
  "[App] Button clicked:",
  "ðŸ” Sign-in button clicked",
  "âŒ showSignInModal not available",
  "ðŸŽ¯ FlickWord button clicked",
  "âŒ openFlickWordModal function not available",
  "ðŸ§  Trivia button clicked",
  "âŒ openTriviaModal function not available",
  ", action);\n        }\n      });\n\n      // FAB Event Handlers\n      document.addEventListener(",
  ", (e) => {\n        // Settings FAB\n        if (e.target.closest(",
  ")) {\n          e.preventDefault();\n          e.stopPropagation();\n          console.log(",
  ");\n          console.log(",
  ", !!window.navEngine);\n          console.log(",
  ", typeof window.navEngine?.activate);\n          this.switchToTab(",
  ");\n        }\n\n        // Theme Toggle FAB\n        if (e.target.closest(",
  ");\n          this.toggleTheme();\n        }\n\n        // Mardi Gras Toggle FAB\n        if (e.target.closest(",
  "ðŸ” showSignInModal called - using FlickletAuth",
  "ðŸ”’ Offline mode active, not showing sign-in modal",
  "Authentication is currently unavailable. Your data is stored locally and will sync when Firebase is available.",
  "âœ… openModal now available, creating sign-in modal",
  "âŒ openModal function not available after timeout",
  "Sign-in system is not ready. Please refresh the page.",
  "openModal function not available",
  "ðŸ” Creating sign-in modal...",
  "\n            <p style=",
  ")}</p>\n            <div style=",
  ">ðŸ”’ Google</button>\n              <button id=",
  ">ðŸŽ Apple</button>\n              <button id=",
  ">âœ‰ï¸ Email</button>\n            </div>\n          ",
  "âŒ FlickletAuth.loginWithGoogle not available",
  "âŒ FlickletAuth.loginWithApple not available",
  "âŒ FlickletAuth.loginWithEmail not available",
  "âŒ Error creating sign-in modal:",
  "ðŸšª showSignOutModal called, currentUser:",
  "âŒ No current user, cannot show sign out modal",
  ")[0] || t(",
  ");\n\n      const confirmed = confirm(\n        ",
  ",\n      );\n      if (confirmed) {\n        console.log(",
  ");\n        // Call the new sign out method\n        this.signOut();\n      } else {\n        console.log(",
  ");\n      }\n    },\n\n    signOut() {\n      if (typeof firebase !== ",
  "âœ… User signed out successfully",
  "âŒ Sign out failed:",
  "âŒ Firebase auth not available for sign out",
  "[FlickletApp] Games containers not found, skipping games initialization",
  "[FlickletApp] flickwordTile not found",
  "[FlickletApp] triviaTile not found",
  "ðŸŽ¯ Initializing FlickWord modal...",
  "âœ… FlickWord modal initialized successfully",
  "âš ï¸ initializeFlickWordModal function not found in module",
  "âŒ Failed to load FlickWord modal module:",
  "âŒ Error initializing FlickWord modal:",
  "ðŸ§  Initializing Trivia modal...",
  "âœ… Trivia modal initialized successfully",
  "âš ï¸ initializeTriviaModal function not found in module",
  "âŒ Failed to load Trivia modal module:",
  "âŒ Error initializing Trivia modal:",
  "ðŸŽ¬ Initializing genres...",
  "âœ… loadGenres function found, calling it",
  "âŒ loadGenres function not available",
  "âœ… Genres initialization complete",
  "ðŸ” Account button debug info:",
  "ðŸ§ª Testing sign-in modal...",
  "âœ… Sign-in modal test successful",
  "âŒ Sign-in modal test failed:",
  "ðŸ” Authentication system debug info:",
  "ðŸŒ FlickletApp.changeLanguage delegating to LanguageManager:",
  "ðŸŒ LanguageManager not available, falling back to window.changeLanguage",
  "ðŸ’¾ FlickletApp.saveData: Starting lean save to Firebase",
  "[saveData] payload too large, skipping Firestore save:",
  ",\n          );\n          // Still try to save locally with lean data\n          window.saveAppData(",
  ", minimal);\n          return;\n        }\n\n        // Save to Firestore\n        await db.doc(",
  ").set(payload, { merge: true });\n        console.info(",
  ", (bytes / 1024).toFixed(1), ",
  ");\n\n        // Mirror to LocalStorage (guarded)\n        window.saveAppData(",
  ", payload);\n\n        FlickletDebug.info(\n          ",
  ",\n        );\n      } catch (error) {\n        FlickletDebug.error(",
  "ðŸ’¾ Fallback: Lean data saved to localStorage only",
  "âŒ Even localStorage save failed:",
  "ðŸ” FlickletApp search state changed:",
  ".tab-container",
  "ðŸ” Tab container made visible during search",
  ".fab, .fab-left",
  ".tab-section:not([hidden])",
  ":scope > .fab-dock",
  ".fab-left",
  ".fab-stack",
  "t in a stack\n        const individualFabs = Array.from(document.querySelectorAll(",
  ")).filter(\n          (btn) => !btn.closest(",
  "t exist\n          let individualStack = dock.querySelector(",
  ");\n          if (!individualStack) {\n            individualStack = document.createElement(",
  ");\n            individualStack.className = ",
  "[data-tab], .tab, .tab-link",
  ".settings-tabs button[data-target]",
  "Settings tab clicked:",
  "ðŸš€ DOMContentLoaded - initializing FlickletApp",
  "âŒ FlickletApp initialization failed:",
  ";\n      input.value = currentName;\n      console.log(",
  "ðŸ“Š Data ready event received:",
  "âœ… UserViewModel refreshed with settings data",
  "[ensureUser] Waiting for Firebase...",
  "No authenticated user",
  ";\n\n      // Create dialog box\n      const dialog = document.createElement(",
  "Segoe UI",
  ";\n\n      dialog.innerHTML = ",
  "margin: 0 0 20px 0; font-size: 16px; line-height: 1.4;",
  "display: flex; gap: 12px; justify-content: center;",
  ">Yes</button>\n          <button id=",
  ">No</button>\n        </div>\n      ",
  "Display name input not found",
  "Display name is empty",
  "This will change your username from ",
  ". Are you sure you want to continue?",
  "Username change cancelled by user",
  "ðŸ”„ Starting display name save process for:",
  "ðŸ“ Created new appData object",
  "ðŸ“ Created new appData.settings object",
  "âœ… Updated appData.settings:",
  "âœ… Display name saved to SettingsManager:",
  "âš ï¸ SettingsManager not available or set method missing",
  "âœ… Data saved via saveAppData function",
  "âœ… Data saved to localStorage directly",
  "âŒ Failed to save to localStorage:",
  "Failed to save to localStorage: ",
  "âœ… Username saved to Firebase via setUsername:",
  "âŒ setUsername returned false",
  "setUsername method returned false",
  "âŒ Failed to save username to Firebase:",
  "t continue if Firebase save fails - this is critical\n          throw new Error(",
  "âœ… Updated currentUser.displayName:",
  "âœ… UserViewModel.updateDisplayName called",
  "âš ï¸ UserViewModel not available or updateDisplayName method missing",
  "âœ… UserViewModel.update called with currentUser",
  "âŒ Failed to update UI:",
  "t throw here - data is saved, just UI update failed\n      }\n\n      console.log(",
  ", newName);\n\n      // Show success feedback\n      const btn = document.getElementById(",
  ");\n      if (btn) {\n        const originalText = btn.innerHTML;\n        btn.innerHTML = ",
  ";\n        btn.style.background = ",
  ";\n        setTimeout(() => {\n          btn.innerHTML = originalText;\n          btn.style.background = ",
  ";\n        }, 2000);\n      }\n    } catch (error) {\n      console.error(",
  ", error);\n      const errorMessage = error.message || ",
  ";\n      alert(",
  ");\n      \n      // Show error feedback\n      const btn = document.getElementById(",
  "DOM not ready, deferring back-to-top initialization",
  ";\n      backToTopBtn.setAttribute(",
  "Back to top",
  "Back-to-top functionality initialized",
  "[app] initBackToTop failed:",
  "[auth] apply:init",
  "[auth] apply:redirect:skip (no-flag)",
  "[auth] handleRedirectResult(): ERROR",
  "âœ… Auth Manager ready",
  "[auth] AuthManager ready (top):",
  "â³ Firebase not ready, waiting...",
  "[auth] Auth listener already registered, skipping",
  "ðŸ”¥ Setting up CENTRALIZED Firebase auth listener",
  "[auth] apply:single-listener:attached",
  "ðŸ”¥ [CENTRALIZED] Auth state changed:",
  "ðŸ‘¤ User signed in:",
  "ðŸ‘‹ User signed out",
  "ðŸ” Auth listeners active = 1",
  "Account: ${displayName}",
  "Sign in to your account",
  "Signed in as ${displayName}",
  "Not signed in",
  "${provider}-${method || ",
  "}-${Date.now()}",
  "[auth] ${provider} login already in progress, ignoring duplicate request",
  "ðŸ” Starting ${provider} login${method ? ",
  "} [${requestId}]",
  "[auth] Apple login coerced from popup to redirect",
  "Unknown provider: ${provider}",
  "âŒ ${provider} login failed:",
  "Sign-in failed. Please try again.",
  "Firebase not available",
  "[auth] startGoogleLogin(): Firebase methods available:",
  "[auth] Mobile detection:",
  "[auth] apply:provider:start google ${method}",
  "[auth] signInWithPopup not available, falling back to redirect",
  "[auth] unsupported login method for provider",
  "[auth] Popup error:",
  "window.closed",
  "ðŸ”„ Popup blocked or COOP error, falling back to redirect",
  "[auth] Unexpected popup error:",
  "[auth] apply:redirect:flag:set google",
  "No redirect method available",
  "[auth] apply:provider:start apple redirect",
  ",\r\n        );\r\n      }\r\n\r\n      // mark that we expect a redirect result\r\n      sessionStorage.setItem(\r\n        ",
  ",\r\n        JSON.stringify({ provider: ",
  ", ts: Date.now() }),\r\n      );\r\n\r\n      const provider = new firebase.auth.OAuthProvider(",
  ");\r\n      provider.addScope(",
  "[auth] apple redirect error:",
  "[auth] apply:provider:start email form",
  "âœ… ${provider} login successful:",
  "Signed in with ${provider}",
  "ðŸ”„ [CENTRALIZED] Starting post-login data loading...",
  "â˜ï¸ Cloud sync enabled for user:",
  "ðŸ” [CENTRALIZED] Available functions:",
  "ðŸ”„ [CENTRALIZED] Attempting cloud sync with DataInit...",
  "âœ… [CENTRALIZED] DataInit.trySync completed",
  "ðŸ”„ [CENTRALIZED] Attempting cloud sync with legacy trySync...",
  "âœ… [CENTRALIZED] Legacy trySync completed",
  "ðŸ”„ [CENTRALIZED] Loading data directly from Firebase...",
  "âœ… [CENTRALIZED] Direct Firebase load completed",
  "ðŸ”„ [CENTRALIZED] Calling FlickletApp.handlePostAuthSuccess for username logic...",
  "âœ… [CENTRALIZED] FlickletApp.handlePostAuthSuccess completed",
  "âš ï¸ [CENTRALIZED] FlickletApp.handlePostAuthSuccess not available - username logic may not work",
  "ðŸ” [CENTRALIZED] Data after loading:",
  "ðŸ”„ [CENTRALIZED] Triggering UI refresh after auth change",
  "âœ… [CENTRALIZED] UI refresh triggered",
  "âŒ [CENTRALIZED] Post-login data loading failed:",
  "âŒ [CENTRALIZED] Error stack:",
  "âŒ ${provider} login error:",
  "[auth] showEmailModal(): ENTER",
  "auth-modal-backdrop email-modal-backdrop",
  "\r\n        <div class=",
  ">\r\n          <h2 id=",
  ">Sign in with Email</h2>\r\n          <form id=",
  ">\r\n            <div class=",
  ">\r\n              <label for=",
  ">Email</label>\r\n              <input type=",
  " required>\r\n            </div>\r\n            <div class=",
  ">Password</label>\r\n              <input type=",
  " required>\r\n            </div>\r\n            <div id=",
  ">\r\n              <button type=",
  ">Cancel</button>\r\n              <button type=",
  ">Sign In</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      ",
  "[auth] Email form submitted",
  "[auth] closeEmailModal(): ENTER",
  ";\r\n        console.log(",
  ");\r\n      } else {\r\n        console.log(",
  "[auth] handleEmailSubmit: starting email authentication",
  "[auth] Email form data:",
  "Signing in...",
  "Email and password are required",
  ")) {\r\n          throw new Error(",
  ");\r\n        }\r\n\r\n        if (password.length < 6) {\r\n          throw new Error(",
  ");\r\n        }\r\n\r\n        console.log(",
  ");\r\n        const result = await window.firebaseAuth.signInWithEmailAndPassword(email, password);\r\n        console.log(",
  ", result.user?.email);\r\n        this.handleLoginSuccess(result.user, ",
  ");\r\n      } catch (error) {\r\n        console.error(",
  ", error);\r\n        errorEl.textContent = error.message || ",
  ";\r\n        errorEl.style.display = ",
  ";\r\n      } finally {\r\n        submitBtn.disabled = false;\r\n        submitBtn.textContent = ",
  ";\r\n        accountLabel.textContent = displayName;\r\n        accountBtn.title = ",
  ";\r\n\r\n        // Set context instruction\r\n        if (accountContext) {\r\n          accountContext.textContent = ",
  ";\r\n        }\r\n\r\n        console.info(",
  ";\r\n\r\n      // Create modal using the same pattern as auth modal\r\n      let modal = document.getElementById(",
  ");\r\n      if (!modal) {\r\n        modal = document.createElement(",
  ");\r\n        modal.id = ",
  ";\r\n        modal.className = ",
  ";\r\n        modal.setAttribute(",
  ">Sign out confirmation</h2>\r\n          <p>You",
  "auth-button auth-button--danger",
  "auth-button auth-button--cancel",
  ";\r\n      };\r\n\r\n      if (confirmBtn) {\r\n        confirmBtn.addEventListener(",
  ", () => {\r\n          console.log(",
  "[auth] User cancelled sign out",
  "button, [href], input, select, textarea, [tabindex]:not([tabindex=",
  "âœ… Signed out successfully",
  "Sign out failed. Please try again.",
  "ðŸ§¹ Starting sign out process...",
  "accounts.google.com",
  "google.com",
  "ðŸ” [CENTRALIZED] Checking redirect status:",
  "â³ [CENTRALIZED] Auth state change during redirect - waiting for redirect result",
  "ðŸ§¹ [CENTRALIZED] Closing auth modal on sign out",
  "ðŸ§¹ [CENTRALIZED] User signed out - clearing local data",
  "ðŸ”„ [AUTHMANAGER] Loading user data from Firebase for:",
  "â„¹ï¸ [AUTHMANAGER] No user document found in Firebase",
  "âœ… [AUTHMANAGER] User data loaded from Firebase:",
  "âœ… [AUTHMANAGER] Updated watchlists from Firebase",
  "âœ… [AUTHMANAGER] Updated direct TV data from Firebase:",
  "âœ… [AUTHMANAGER] Updated direct movies data from Firebase:",
  "âœ… [AUTHMANAGER] Updated settings from Firebase",
  "âœ… [AUTHMANAGER] Saved data to localStorage",
  "âœ… [AUTHMANAGER] Cleared WatchlistsAdapter cache",
  "âœ… [AUTHMANAGER] Data loading completed successfully",
  "âŒ [AUTHMANAGER] Failed to load user data from Firebase:",
  "ðŸ§¹ Calling clearUserData function...",
  "ðŸ§¹ Using data-init clearUserData...",
  "ðŸ§¹ Calling FlickletApp.clearUserData...",
  ";\r\n        window.appData.settings.displayName = ",
  ");\r\n      }\r\n\r\n      // Clear localStorage\r\n      try {\r\n        localStorage.removeItem(",
  ");\r\n        console.log(",
  ");\r\n      } catch (e) {\r\n        console.warn(",
  "ðŸ§¹ [AUTHMANAGER] Cleared WatchlistsAdapter cache",
  ".list-container",
  ">Nothing here yet.</div>",
  "ðŸ§¹ [AUTHMANAGER] Cleared rendered cards",
  "ðŸ§¹ [AUTHMANAGER] Emitted cards:changed event after clear",
  "âœ… Sign out process completed",
  "[auth] AuthModalManager.open()",
  "re open but element isn",
  "[auth] AuthModalManager: self-healing - resetting state",
  "[auth] AuthModalManager: already open, skipping",
  "[auth] AuthModalManager: failed to create modal element",
  "[auth] AuthModalManager: modal opened successfully",
  "[auth] AuthModalManager.close()",
  "[auth] AuthModalManager: not open, nothing to close",
  "[auth] AuthModalManager: modal closed successfully",
  "\r\n          <div class=",
  ">\r\n            <h2 id=",
  ">Sign in to sync</h2>\r\n            <p>Continue to Flicklet</p>\r\n            <div class=",
  ">\r\n              <button id=",
  ">\r\n                Continue with Google\r\n              </button>\r\n              <button id=",
  ">\r\n                Continue with Apple\r\n              </button>\r\n              <button id=",
  ">\r\n                Continue with Email\r\n              </button>\r\n            </div>\r\n            <div class=",
  ">Cancel</button>\r\n            </div>\r\n          </div>\r\n        ",
  "[auth] Google provider selected",
  "[auth] Apple provider selected",
  "[auth] Email provider selected",
  "[auth] Auth modal cancelled",
  "[auth] Auth modal closed via overlay click",
  "[auth] Auth modal closed via Escape key",
  "[auth] showProviderModal(): ENTER (top)",
  "[auth] showProviderModal(): blocked â†’ userSignedIn",
  "[auth] closeProviderModal(): using AuthModalManager",
  "[auth] apply:button:bind:skipped (already)",
  "[auth] CLICK (top) accountButton",
  "re in top window\r\n          if (window !== window.parent) {\r\n            console.log(",
  ");\r\n            window.parent.postMessage({ type: ",
  ", provider: ",
  " }, ",
  "[auth] User signed in, showing sign-out confirmation",
  "[auth] User not signed in, showing provider modal",
  "[auth] Account button action completed",
  "[auth] apply:button:bind:attached",
  "ðŸ“¨ Received auth request from iframe:",
  "FLICKLET_${type.toUpperCase()}",
  "[auth] handleRedirectResult(): checking redirect result...",
  "[auth] apply:redirect:skip (flag-missing at entry)",
  "[auth] apply:redirect:defer (no body)",
  "[auth] apply:redirect:resolve:start",
  "No location for new iframe",
  "[auth] handleRedirectResult(): Firebase auth not ready for redirect",
  "[auth] handleRedirectResult(): success â†’",
  "[auth] handleRedirectResult(): no user in result",
  ");\r\n            if (info?.provider === ",
  ") {\r\n              console.warn(\r\n                ",
  ",\r\n              );\r\n              console.warn(",
  ");\r\n              console.warn(",
  ");\r\n              console.warn(\r\n                ",
  "[auth] Apple login completed, user is signed in:",
  "[auth] Error details:",
  "[auth] Iframe error - likely no actual redirect in progress",
  "[auth] No auth event - redirect may have been cancelled or already processed",
  "[auth] User is signed in despite no-auth-event error:",
  "Sign-in failed: ${error.message}",
  "[auth] apply:redirect:clear",
  "[auth] apply:redirect:resolve:done",
  "[auth] Mobile UA detected but desktop viewport - using desktop auth flow",
  "ðŸ” [DIAGNOSTIC] Starting data loading diagnosis...",
  "âŒ [DIAGNOSTIC] No user signed in",
  "âœ… [DIAGNOSTIC] User signed in:",
  "ðŸ” [DIAGNOSTIC] User UID:",
  "âŒ [DIAGNOSTIC] Firebase Firestore not available",
  "âŒ [DIAGNOSTIC] No Firebase document found for user",
  "âœ… [DIAGNOSTIC] Firebase document found",
  "ðŸ” [DIAGNOSTIC] Firebase data keys:",
  "âœ… [DIAGNOSTIC] Watchlists data found",
  "ðŸ” [DIAGNOSTIC] TV data:",
  "ðŸ” [DIAGNOSTIC] Movies data:",
  "âŒ [DIAGNOSTIC] No watchlists data in Firebase",
  "âœ… [DIAGNOSTIC] Direct TV data found",
  "ðŸ” [DIAGNOSTIC] Direct TV:",
  "âœ… [DIAGNOSTIC] Direct Movies data found",
  "ðŸ” [DIAGNOSTIC] Direct Movies:",
  "ðŸ” [DIAGNOSTIC] Local appData:",
  "ðŸ”„ [DIAGNOSTIC] Attempting to force load data...",
  "ðŸ” [DIAGNOSTIC] Local appData after loading:",
  "ðŸ”„ [DIAGNOSTIC] Triggering UI update...",
  "âœ… [DIAGNOSTIC] Diagnosis complete",
  "âŒ [DIAGNOSTIC] Error during diagnosis:",
  "[auth] clearAllAuthModals(): cleaning up all auth modals",
  "#providerModal, .modal-backdrop[data-modal=",
  "], #signInModal, #emailAuthModal, .modal-backdrop",
  "[auth] clearAllAuthModals(): removing modal",
  "ðŸš€ Starting sign-in process...",
  "waiting for Firebase ready...",
  "firebaseApp missing",
  "using redirect method for sign in",
  "signIn bootstrap failed:",
  "â„¹ï¸ No sign-in attempt detected, skipping redirect result check",
  "ðŸ” Checking for redirect result...",
  "ðŸ” Current URL:",
  "ðŸ” URL search:",
  "ðŸ” URL hash:",
  "ðŸ” Referrer:",
  "ðŸ” Calling getRedirectResult...",
  "ðŸ” Redirect result:",
  "âœ… redirect sign-in successful",
  "ðŸ”„ triggering data sync after redirect sign-in",
  "â„¹ï¸ no redirect result - user not returning from sign-in",
  "âŒ redirect result handling failed:",
  ";\r\n        button.innerHTML = ",
  ";\r\n        button.title = ",
  ";\r\n        button.dataset.state = ",
  ";\r\n      }\r\n      if (label) label.textContent = user.displayName || user.email || ",
  ";\r\n      if (greeting) {\r\n        greeting.innerHTML = ",
  "UI updated for signed-in user:",
  "ðŸ”‘ Sign In",
  "UI updated for signed-out state",
  "[auth] DEPRECATED: setupAuthListener() - use AuthManager instead",
  "[auth] DEPRECATED: startSignIn() - use AuthManager.startLogin() instead",
  "[auth] DEPRECATED: handleRedirectResult() - handled by AuthManager",
  "[auth] DEPRECATED: startSignOut() - use AuthManager.signOut() instead",
  "[auth] DEPRECATED: initRedirectHandler() - handled by AuthManager",
  "FlickletApp.init missing",
  "Set Episode Progress",
  "Add Tag",
  "Trailer / Extras",
  "Remind Me (Configurable)",
  "âœ… Cards V2 config loaded",
  "ðŸ”„ Clean Data Loader starting...",
  "ðŸ”„ Loading user data and replacing cards...",
  "âŒ No user signed in - cannot load data",
  "âœ… User signed in:",
  "âŒ Firebase Firestore not available",
  "ðŸ”„ Loading data from Firebase...",
  "âŒ No Firebase document found for user",
  "âœ… Firebase document found",
  "âŒ No watchlists data in Firebase document",
  "ðŸ”„ Loading TV data...",
  "ðŸ” TV watching count:",
  "ðŸ” TV wishlist count:",
  "ðŸ” TV watched count:",
  "âœ… TV data loaded into appData",
  "ðŸ”„ Loading movie data...",
  "ðŸ” Movie watching count:",
  "ðŸ” Movie wishlist count:",
  "ðŸ” Movie watched count:",
  "âœ… Movie data loaded into appData",
  "âœ… Data saved to localStorage",
  "ðŸ”„ Updating UI...",
  "âœ… UI updated",
  "âœ… Emitted cards:changed event",
  "âœ… Tab content updated:",
  "âœ… Data loading and card replacement completed successfully!",
  "Data Loaded",
  "Your shows and movies have been loaded with the new design!",
  "âŒ Error loading user data:",
  "Data Load Failed",
  "Failed to load your data. Please try again.",
  "ðŸ”„ Replacing all cards with clean unified cards...",
  "âš ï¸ Container ${containerId} not found",
  ";\r\n\r\n        // Get section name\r\n        const section = containerId.replace(",
  "ðŸ”„ Creating ${sectionData.length} clean cards for ${section} section",
  "${item.year} â€¢ ${item.mediaType === ",
  "\r\n                : item.mediaType === ",
  "\r\n                  ? ",
  "\r\n                  : ",
  "âœ… Card replacement complete: ${replacedCount} cards replaced",
  "âŒ Card replacement failed:",
  ">ðŸŽ¬</div>\r\n      <div class=",
  ">Nothing here yet</div>\r\n      <div class=",
  ">Your ${sectionName.toLowerCase()} list is empty</div>\r\n    ",
  "ðŸ”„ User already signed in, loading data...",
  "âœ… Clean Data Loader ready. Use window.loadUserDataAndReplaceCards() to manually load data.",
  "Cannot add event listener: element not found",
  "storage.get(${key})",
  "storage.set(${key})",
  "storage.remove(${key})",
  "storage.clear",
  ";\r\n        },\r\n        ",
  ";\r\n      return str.replace(\r\n        /[&<>",
  "]/g,\r\n        (match) =>\r\n          ({\r\n            ",
  "\r\n            position: fixed;\r\n            top: 20px;\r\n            right: 20px;\r\n            background: ${type === ",
  "ðŸ”§ Common Utilities loaded",
  ".player-placeholder",
  ".community-player-placeholder",
  ".loading-spinner",
  "Community Player",
  "seed fetch failed",
  ">Community features are coming soon.</div>",
  ";\n\n    const c = dailyCard;\n    const card = document.createElement(",
  ");\n    card.className = ",
  ").toLowerCase()}",
  ");\n    if (c.attribution?.watermark) card.dataset.watermark = c.attribution.watermark;\n\n    let mediaEl = ",
  ";\n    if (c.media?.kind === ",
  " && c.media.src) {\n      mediaEl = ",
  "${c.media.src}",
  "${c.accessibility?.alt || ",
  ";\n      const muted = c.media.muted ? ",
  ";\n      const poster = c.media.poster ? ",
  "${c.media.poster}",
  ";\n      mediaEl = ",
  ";\n    } else if (c.media?.kind === ",
  " && c.media.src) {\n      const autoplay = c.media.autoplay ? ",
  ";\n      const controls = c.media.controls !== false ? ",
  ";\n      const showinfo = c.media.showinfo !== false ? ",
  ";\n      const rel = c.media.rel !== false ? ",
  ";\n      const loop = c.media.loop ? ",
  ";\n      \n      // Build clean YouTube embed URL\n      let embedUrl = c.media.src;\n      if (!embedUrl.includes(",
  ")) {\n        embedUrl += ",
  ";\n      } else {\n        embedUrl += ",
  ";\n      }\n      \n      embedUrl += ",
  ";\n      \n      // Only add playlist if loop is enabled and we have a playlist\n      if (loop === ",
  " && c.media.playlist) {\n        embedUrl += ",
  ";\n      }\n      \n      mediaEl = ",
  " \n          allow=",
  " \n          allowfullscreen\n          loading=",
  "\n          title=",
  "YouTube video",
  "\n          aria-label=",
  ">\n        </iframe>\n      </div>",
  "<p class=",
  ">${c.subtitle}</p>",
  ";\n    const desc = c.description ? ",
  ";\n    const poll = c.stats?.poll?.length\n      ? ",
  "Poll results",
  "\n          <div class=",
  " aria-label=",
  ">\n            <span class=",
  ">${p.label}</span>\n            <span class=",
  "></span>\n            <span class=",
  ">${p.percent}%</span>\n          </div>",
  ")}\n        </div>",
  ";\n\n    const tracked =\n      typeof c.stats?.trackedCountToday === ",
  "\n        ? ",
  "\n        : ",
  ";\n\n    const cta = c.cta\n      ? c.cta.action !== ",
  "${c.cta.url || ",
  ">${c.cta.label}</a>",
  "<button class=",
  " aria-disabled=",
  ">${c.cta.label || ",
  ";\n\n    card.innerHTML = ",
  "}</div>\n      <div class=",
  ">\n        ${desc}\n        ${poll}\n        ${tracked}\n      </div>\n      <footer>\n        <div class=",
  ">\n          <img class=",
  " src=",
  "/assets/avatars/staff.png",
  " />\n          <span class=",
  ">${c.attribution?.displayName || ",
  "}</span>\n          ${c.attribution?.watermark ? ",
  ">${c.attribution.watermark}</span>",
  "}\n        </div>\n        <div class=",
  ">${cta}</div>\n      </footer>\n    ",
  ".community-section",
  ".community-player",
  ") ||\n                   root.querySelector(",
  ".player-viewport",
  ".player-caption",
  ".player-controls",
  "\n        <button type=",
  ">Prev</button>\n        <button type=",
  ">Next</button>\n      ",
  ";\n    const hasVideo = type.includes(",
  ") || !!card.querySelector(",
  ");\n    const hasImage = !!card.querySelector(",
  ");\n    const likes = parseInt(card.dataset.score || card.dataset.likes || ",
  ", 10) || 0;\n    const ts = parseInt(card.dataset.timestamp || card.getAttribute(",
  "community data fetch failed",
  "failed to fetch community data:",
  ");\n    title.className = ",
  ");\n      subtitle.className = ",
  ";\n      const muted = item.media.muted ? ",
  ";\n      const controls = item.media.controls !== false ? ",
  ";\n      const showinfo = item.media.showinfo !== false ? ",
  ";\n      const rel = item.media.rel !== false ? ",
  ";\n      const loop = item.media.loop ? ",
  ";\n      \n      // Build clean YouTube embed URL\n      let embedUrl = item.media.src;\n      if (!embedUrl.includes(",
  " && item.media.playlist) {\n        embedUrl += ",
  ";\n      }\n      \n      iframe.src = embedUrl;\n      iframe.frameBorder = ",
  ";\n      iframe.allow = ",
  ";\n      iframe.allowFullscreen = true;\n      iframe.loading = ",
  ";\n      iframe.title = item.title || ",
  ";\n      iframe.setAttribute(",
  ", item.accessibility?.alt || item.title || ",
  ");\n      desc.className = ",
  ".community-card",
  ";\n    // try clone poster/video safely\n    const media = card.querySelector(",
  ")?.cloneNode(true);\n    const title = card.querySelector(",
  ")?.textContent?.trim() || ",
  "no DOM cards found, fetching community data...",
  "items from community data",
  ".prev",
  ".next",
  "; caption.textContent = ",
  "; }\n      else { renderInto(viewport, caption, items[idx]); start(); }\n      console.info(NS, ",
  "root not found",
  "missing parts",
  "Staff Pick",
  ",\r\n      firebase: {\r\n        apiKey[REDACTED],
  ",\r\n        authDomain: ",
  ",\r\n        projectId: ",
  ",\r\n      },\r\n      google: {\r\n        clientId: ",
  ",\r\n      },\r\n      app: {\r\n        version: ",
  ",\r\n        name: ",
  ",\r\n        authDomain: process.env.FIREBASE_AUTH_DOMAIN || ",
  ",\r\n        projectId: process.env.FIREBASE_PROJECT_ID || ",
  ",\r\n      };\r\n      config.google = {\r\n        clientId: process.env.GOOGLE_CLIENT_ID || ",
  "TMDB API key is required",
  "TMDB API key appears to be invalid (too short)",
  "Configuration validation failed:",
  ", primary:true,  pro:false },\r\n      { id:",
  ",     label:",
  ",       icon:",
  ",      label:",
  ",        icon:",
  ", primary:false, pro:false },\r\n    ],\r\n    wishlist: [\r\n      { id:",
  ", label:",
  ", icon:",
  ",            icon:",
  ",     icon:",
  ",             icon:",
  ", primary:false, pro:false },\r\n    ],\r\n    watched: [\r\n      { id:",
  ",      icon:",
  ", primary:false, pro:false },\r\n    ],\r\n    discover: [\r\n      { id:",
  "missing id",
  "[data-api] Saving rating for ${id}: ${rating}",
  "[data-init] warn function error:",
  "User data cleared successfully",
  "Failed to clear user data:",
  "local appData loaded:",
  "loadUserDataAndReplaceCards failed:",
  "Firebase not available - using local-only mode",
  "Cloud enabled - auth state changes handled by centralized AuthManager",
  "cloud disabled (auth/db not ready) â€” local-only mode",
  "Firebase ready event received, re-evaluating cloud status",
  "Cloud sync enabled after Firebase ready event",
  "auth state:",
  "Triggering UI refresh after auth change (ready event)",
  "Emitted cards:changed event after auth change (ready event)",
  "sync on auth-change failed:",
  "ðŸ” Checking redirect status (ready event):",
  "â³ Auth state change during redirect (ready event) - waiting for redirect result",
  "ðŸ§¹ User signed out after sign-in attempt (ready event) - clearing local data",
  "â„¹ï¸ No sign-in attempt detected (ready event) - keeping existing data",
  "immediate sync failed:",
  "init failure:",
  "sync skipped:",
  "- no user",
  "- no db",
  "sync: starting (auth ready)",
  "Local data is newer than Firebase data, skipping overwrite:",
  "Firebase data is newer or equal, will sync:",
  "Firebase data is empty, preserving local data to prevent data loss",
  "Data transformation complete:",
  "window.appData updated from localStorage after sync",
  "Skipping Firebase sync - local data is newer",
  "sync complete:",
  "sync error:",
  "Unknown error",
  ")) + ",
  "[data-init] init: no auth user after wait; aborting sync",
  "[data-init] sync: starting (auth ready)",
  "No appData to migrate",
  "Data already in Firebase structure",
  "Migrating data to Firebase structure...",
  "Migration complete:",
  "Migrating from Firebase structure for compatibility...",
  "Syncing data between old and new structures...",
  "No appData provided",
  "No valid data structure found",
  "Incomplete watchlists structure",
  "Invalid movies structure in watchlists",
  "Invalid tv structure in watchlists",
  "Invalid movies structure",
  "Invalid tv structure",
  "Starting data migration process...",
  "Data validation failed:",
  "Data migration completed successfully",
  "Data migration utility loaded",
  "Initializing DataOperations...",
  "WatchlistsAdapterV2 not available",
  "DataOperations initialized",
  "DataOperations.addItem called:",
  "Item ID is required",
  "Invalid list name",
  "Adding item to list:",
  "Adapter not available",
  "Calling adapter.addItem...",
  "Adapter.addItem result:",
  "Saving data...",
  "Emitting event...",
  "Item added successfully",
  "Failed to add item to adapter",
  "Add item failed:",
  "Invalid list names",
  "Item already in target list",
  "Moving item between lists:",
  "Item moved successfully",
  "Failed to move item in adapter",
  "Move item failed:",
  "Removing item from list:",
  "Item removed successfully",
  "Failed to remove item from adapter",
  "Remove item failed:",
  "Get items failed:",
  "Has item check failed:",
  "Data saved to localStorage",
  "Data saved to Firebase",
  "Skipping Firebase save - no authenticated user",
  "Data saved successfully",
  "Save data failed:",
  "Event emitted:",
  "Event emission failed:",
  "DataOperations loaded",
  "[DataOptimizer] Invalid item for full details:",
  "[DataOptimizer] Failed to get full details:",
  ",\r\n      );\r\n\r\n      // Save optimized data\r\n      localStorage.setItem(",
  ", JSON.stringify(optimized));\r\n\r\n      // Update window.appData\r\n      if (typeof window.loadAppData === ",
  ") {\r\n        window.loadAppData();\r\n      }\r\n\r\n      return optimized;\r\n    } catch (error) {\r\n      console.error(",
  "[DataOptimizer] Pre-save optimization: ${Math.round(size / 1024)}KB",
  ", \r\n        primary: true, \r\n        pro: false, \r\n        handler: ",
  " \r\n      },\r\n      { \r\n        id: ",
  ", \r\n        label: ",
  ", \r\n        icon: ",
  ", \r\n        primary: false, \r\n        pro: false, \r\n        handler: ",
  ", \r\n        primary: false, \r\n        pro: true, \r\n        handler: ",
  " \r\n      }\r\n    ],\r\n    \r\n    wishlist: [\r\n      { \r\n        id: ",
  " \r\n      }\r\n    ],\r\n    \r\n    watched: [\r\n      { \r\n        id: ",
  " \r\n      }\r\n    ],\r\n    \r\n    discover: [\r\n      { \r\n        id: ",
  " \r\n      }\r\n    ],\r\n    \r\n    home: [\r\n      { \r\n        id: ",
  "Pro status:",
  ".tab.active",
  ");\r\n    if (currentTab && [",
  "UPSELL MODAL:",
  "Upgrade to Pro to unlock this feature!",
  "Unknown Item",
  "Advanced Analytics",
  "Upgrade to Pro to unlock ${item?.title || ",
  "}!\\n\\nPro features include:\\nâ€¢ Export data\\nâ€¢ Share recommendations\\nâ€¢ Advanced analytics\\nâ€¢ Priority support",
  "Upsell event received:",
  "ðŸŽ¬ MediaCard Demo Settings Loaded",
  "ðŸ’¡ Use toggleProStatus() to switch between Pro/Free views",
  "ðŸ”’ Pro actions will show upsell modal when clicked by non-Pro users",
  "ðŸ—‘ï¸ DOM cache invalidated",
  "ðŸ“‹ Cache hit for element: ${id}",
  "ðŸ—‘ï¸ Removed stale cache entry for: ${id}",
  "ðŸ’¾ Cached element: ${id}",
  "âŒ Element not found: ${id}",
  "ðŸ“‹ Cache hit for selector: ${selector}",
  "ðŸ’¾ Cached selector: ${selector}",
  "ðŸ“‹ Cache hit for selectorAll: ${selector}",
  "ðŸ’¾ Cached selectorAll: ${selector}",
  "ðŸ—‘ï¸ Cleared cache entry: ${id}",
  "ðŸ—‘ï¸ Auto-invalidated ${invalidated} stale cache entries",
  "ðŸ’¾ DOM Cache system initialized",
  "ðŸš¨ Emergency functions loading - ensuring critical functionality",
  "âš ï¸ loadUserDataFromCloud not available, creating emergency fallback",
  "ðŸ”„ Emergency loadUserDataFromCloud called for uid:",
  "âš ï¸ Firebase not available, skipping cloud load",
  "âœ… Emergency cloud data loaded",
  "âœ… Emergency data merged with appData",
  "â„¹ï¸ No cloud data found for user",
  "âŒ Emergency loadUserDataFromCloud failed:",
  "t throw - just log and continue\n      }\n    };\n\n    FlickletDebug.info(",
  ");\n  }\n\n  // Emergency addToList function\n  if (typeof window.addToList !== ",
  ") {\n    FlickletDebug.warn(",
  ");\n\n    window.addToList = function (item, listName) {\n      try {\n        FlickletDebug.info(",
  ", { item: item?.id, listName });\n\n        if (!item || !item.id) {\n          FlickletDebug.warn(",
  ");\n        const category = mediaType === ",
  "âœ… Emergency addToList success",
  "â„¹ï¸ Item already exists in list",
  "âŒ Emergency addToList failed:",
  "âœ… Emergency addToList function created",
  "âš ï¸ saveAppData not available, creating emergency fallback",
  "ðŸ’¾ Emergency saveAppData called",
  "âš ï¸ No appData to save",
  "âœ… Emergency saveAppData success",
  "âœ… Emergency Firebase save success",
  "âŒ Emergency Firebase save failed:",
  "âŒ Emergency saveAppData failed:",
  "âœ… Emergency saveAppData function created",
  "ðŸš¨ Emergency functions loaded successfully",
  "\r\n      position: fixed;\r\n      top: 20px;\r\n      right: 20px;\r\n      background: ${type === ",
  ", type = ERROR_TYPES.CRITICAL) {\r\n    const errorInfo = {\r\n      message: error.message || ",
  ",\r\n      stack: error.stack || ",
  "ðŸš¨ CRITICAL ERROR [${context}]:",
  "âš ï¸ WARNING [${context}]:",
  "ðŸŒ NETWORK ERROR [${context}]:",
  "âœ… VALIDATION ERROR [${context}]:",
  "âŒ ERROR [${context}]:",
  "Error in ${context}: ${errorInfo.message}",
  "ðŸ”„ Retry ${attempt}/${maxRetries} for ${context}",
  "${context} (after ${maxRetries} retries)",
  "ðŸ—‘ï¸ Error history cleared",
  "t control\r\n    if (\r\n      event.error &&\r\n      event.error.message &&\r\n      (event.error.message.includes(",
  ") ||\r\n        event.error.message.includes(",
  "))\r\n    ) {\r\n      // Log but don",
  "Chrome extension error (ignored):",
  "Global Error Handler",
  "Unhandled Promise Rejection",
  "ðŸ›¡ï¸ Error Handler system initialized",
  "ðŸ§¹ Starting Firebase cleanup...",
  "âŒ No authenticated user found",
  "âœ… User authenticated:",
  "â„¹ï¸ No user document found",
  "ðŸ“Š Current document size:",
  ",\r\n      );\r\n\r\n      // Check if already optimized\r\n      if (currentData.data_v >= 1) {\r\n        console.log(",
  "ðŸ“Š New document size:",
  ");\r\n      console.log(",
  ", reduction + ",
  ");\r\n\r\n      if (newSize > 1048576) {\r\n        console.error(",
  "âœ… Firebase cleanup complete",
  "âŒ Firebase cleanup failed:",
  "âœ… Data backed up to localStorage",
  "âŒ Backup failed:",
  "ðŸ§¹ Firebase cleanup needed - document size:",
  ");\r\n          console.log(",
  ");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(",
  "Firebase not loaded yet, retrying...",
  "FIREBASE_CONFIG not found",
  "âœ… Firebase v9 CDN bridge initialized with Auth and Firestore",
  "s 1MB document size limit.\r\n */\r\n\r\n(function () {\r\n  ",
  "ðŸ”„ Migration already in progress...",
  "ðŸš€ Starting Firebase data migration to subcollections...",
  ");\r\n\r\n      // Create subcollection references\r\n      const subcollections = {\r\n        ",
  ": db.collection(",
  "),\r\n        ",
  "2.0",
  "âœ… Firebase data migration completed successfully!",
  "ðŸ“¦ Migrating ${items.length} items to ${listName}...",
  "${item.id}_${i + index}",
  "âœ… Migrated batch ${Math.floor(i / batchSize) + 1} of ${listName}",
  "âœ… Completed migration of ${listName}: ${items.length} items",
  "ðŸ“¥ Loading data from subcollections...",
  ");\r\n          data.tv[listName] = items;\r\n        } else if (key.startsWith(",
  ")) {\r\n          const listName = key.replace(",
  "âœ… Data loaded from subcollections successfully!",
  "âŒ Failed to load from subcollections:",
  "âœ… Data already migrated, loading from subcollections...",
  "ðŸš¨ Large document detected, starting migration...",
  "ðŸ”„ Firebase Migration module loaded",
  "ðŸ”§ Auth State Fix starting...",
  "ðŸ”§ Current user from Firebase:",
  "ðŸ”§ User is signed in, updating UI...",
  ";\r\n        window.setAuthUI(true, displayName);\r\n\r\n        console.log(",
  ", displayName);\r\n\r\n        // Show success message\r\n        if (window.showToast) {\r\n          window.showToast(",
  "Signed In",
  "Welcome back, ${displayName}!",
  "ðŸ”§ No user signed in",
  "ðŸ”§ Failed to fix auth state:",
  "âœ… Auth State Fix loaded. Use window.fixAuthState() to manually fix.",
  "ðŸ”§ Auth UI Fix starting...",
  "ðŸ”§ Fixing auth UI state...",
  "ðŸ”§ Current user:",
  ");\r\n      const signOutArea = document.querySelector(",
  ");\r\n\r\n      if (signInArea) {\r\n        // Clear any conflicting text\r\n        signInArea.innerHTML = ",
  ">\r\n            <span id=",
  " data-username-display title=",
  ">${currentUser?.displayName || currentUser?.email?.split(",
  "}</span>\r\n            <button id=",
  ">Sign Out</button>\r\n          </div>\r\n        ",
  "ðŸ”§ Auth UI fixed! Signed in:",
  "Welcome back, ${currentUser.displayName || currentUser.email?.split(",
  ",\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(",
  "], [data-action=",
  ");\r\n    if (!el) return;\r\n\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (el.matches(",
  ")) {\r\n        console.log(",
  ");\r\n        signIn();\r\n      } else if (el.matches(",
  ");\r\n        signOut();\r\n      }\r\n    } catch (error) {\r\n      console.error(",
  "ðŸ”§ Firebase auth not available",
  "ðŸ”§ Starting Google sign in...",
  "ðŸ”§ Sign in successful:",
  "ðŸ”§ Sign in failed:",
  "Sign In Failed",
  "Please try again",
  "ðŸ”§ Starting sign out...",
  "ðŸ”§ Sign out successful",
  "Signed Out",
  "You have been signed out",
  "ðŸ”§ Sign out failed:",
  "Sign Out Failed",
  "âœ… Auth UI Fix loaded. Use window.fixAuthUI() to manually fix.",
  "%cFlicklet safe mode loaded.",
  "padding:2px 6px;border:1px solid #000",
  "ðŸ”„ Force Data Loading script starting...",
  "ðŸ”„ Force loading user data...",
  "ðŸ” User UID:",
  "ðŸ” Firebase data:",
  "âœ… Data loading completed successfully!",
  "Your shows and movies have been loaded!",
  "âœ… Force Data Loading script ready. Use window.forceLoadUserData() to manually load data.",
  "DataOperations not available after timeout",
  "addToListFromCacheV2 called:",
  "Item already exists in list:",
  "Already in ${list}",
  "Found item data from search results:",
  "Failed to parse item data from search results:",
  "Using item data from options:",
  "Could not retrieve item data",
  "Item added successfully to",
  "Added to ${list}",
  "Failed to add item to list",
  "addToListFromCacheV2 failed:",
  "Failed to add item",
  "moveItemV2 called:",
  "Invalid destination list",
  "Item not found in any list",
  "Item moved successfully from",
  ", dest);\n        \n        // Show success notification\n        if (typeof window.showNotification === ",
  ") {\n          window.showNotification(",
  "Moved to ${dest}",
  "Failed to move item",
  "moveItemV2 failed:",
  "removeItemFromCurrentListV2 called:",
  "Item removed successfully from",
  "Item removed",
  "Failed to remove item",
  "removeItemFromCurrentListV2 failed:",
  "Found stored item data:",
  "Failed to parse stored item data:",
  ".unified-card-title",
  "Item ${id}",
  "Failed to fetch from TMDB:",
  "getItemData failed:",
  "findItemSourceList failed:",
  ");\n        if (card) {\n          card.remove();\n          log(",
  ");\n          \n          // Update results count\n          const resultsCount = document.getElementById(",
  ");\n          if (resultsCount) {\n            const remaining = searchRoot.querySelectorAll(",
  "removeFromSearchResults failed:",
  "UI updated after data change",
  "updateUIAfterDataChange failed:",
  "Enhanced functions v2 loaded",
  "ðŸ”§ Basic setup completed, continuing...",
  ")) {\n        log(",
  ");\n        try {\n          const data = await window.tmdbGet(",
  "Hinted type ${typeHint} failed for id ${id}, will try fallback",
  "Trying both movie and tv for id ${id}",
  "Found ${successful.value.media_type} for id ${id}",
  "No data found for id ${id} in any media type",
  "All resolution attempts failed for id ${id}:",
  "s always available\n  console.log(",
  ");\n    window.addToListFromCache = async function addToListFromCache(id, list) {\n      console.log(",
  "ðŸ“ Found stored item data:",
  "âš ï¸ Failed to parse stored item data:",
  ".media-card-title",
  ")?.textContent ||\n                         ",
  ";\n            const subtitle = card.querySelector(",
  ")?.textContent || \n                           card.querySelector(",
  ")?.textContent ||\n                           ",
  ";\n            const mediaType = card.dataset.mediaType || card.dataset.type || ",
  "ðŸ“ Extracted item data from card:",
  "t find the item, check if it",
  "ðŸ“ Item not found in search cache, checking appData...",
  "ðŸ“ Found existing item in appData:",
  "t find the item, fetch full data from TMDB using type-aware resolver\n      if (!item) {\n        console.log(",
  "ðŸ“ Fetched full TMDB data:",
  "No data from TMDB",
  "âš ï¸ Failed to fetch TMDB data, creating basic item:",
  "âœ… Successfully added item to",
  ") ||\n              searchRoot.querySelector(",
  "[data-id], [data-item-id]",
  "Could not remove search card after add:",
  "âš ï¸ Failed to add item to",
  "Failed to add to ${list}",
  "ðŸ“ addToList not available, using fallback implementation",
  ");\n          const category = mediaType === ",
  "using fallback",
  "ðŸ“ WatchlistsAdapter.addItem result:",
  "ðŸ’¾ Saving app data...",
  "ðŸ”„ Calling window.saveData() to sync to Firebase...",
  "ðŸ”„ Invalidating WatchlistsAdapter cache after Firebase save...",
  "âŒ Firebase save failed:",
  "ðŸ“¡ Emitting cards:changed event...",
  "ðŸ”„ Calling FlickletApp.updateUI...",
  "ðŸ”” Showing notification...",
  ") ||\n                searchRoot.querySelector(",
  "âŒ Fallback addToList failed:",
  "âœ… addToListFromCache function defined successfully",
  "âŒ Error in basic setup:",
  "ðŸ”§ Mobile polish gate starting...",
  "ðŸ“± Mobile polish guard disabled via FLAGS.mobilePolishGuard=false",
  "ðŸ“± Mobile polish already initialized, skipping",
  "ðŸ”§ Mobile polish gate initialized...",
  "ðŸ“± Mobile detection debug:",
  "ðŸ“± Mobile polish ${enable ? ",
  "} â€” vw:${viewportWidth} (device: ${isMobileDevice}, viewport: ${isMobileViewport}, size: ${isMobileSize})",
  "âŒ Error in applyMobileFlag:",
  "âŒ Error in mobilePolishGate:",
  "ðŸ”§ Calling mobilePolishGate...",
  "ðŸ”§ mobilePolishGate completed...",
  "âŒ Error calling mobilePolishGate:",
  "ðŸ”§ Setting up data ready event listener...",
  "ðŸ”„ Data ready event received, updating lists...",
  "ðŸ”§ Data ready event listener set up...",
  "âŒ Error setting up data ready event listener:",
  "ðŸ”§ Setting up helper functions...",
  "[countRenderedItems] Failed for ${listType}:",
  "ðŸ”§ Helper functions set up...",
  "âŒ Error setting up helper functions:",
  "ðŸ”§ Setting up tab/render pipeline...",
  "ðŸ”§ Tab/render pipeline set up...",
  "âŒ Error setting up tab/render pipeline:",
  "ðŸ”„ updateTabContent called for tab: ${tab}",
  "ðŸ”„ Calling loadListContent for ${tab}",
  "ðŸ”„ [CENTRALIZED] updateTabCounts called from watchlists:updated event",
  ",\n      );\n      // Update badges and list header counts\n      [",
  "Updated ${list}Badge: ${count}",
  "Badge not found for ${list}: ${list}Badge or [data-count=",
  ");\n        }\n        // Update list header count\n        const listCount = document.getElementById(",
  ");\n        if (listCount) {\n          listCount.textContent = count;\n          log(",
  ");\n        } else {\n          warn(",
  ");\n        }\n      });\n      log(",
  ", counts);\n      return counts;\n    } catch (e) {\n      console.warn(",
  "ðŸŽ¯ [CENTRALIZED] cards:changed event received, updating counts",
  "ðŸŽ¯ [CENTRALIZED] watchlists:updated event received, updating counts and lists",
  ".tab.is-active",
  ");\n      if (currentTab && [",
  "ðŸ”„ Re-rendering current list after watchlists:updated",
  "ðŸ”¢ DOMContentLoaded - emitting cards:changed event",
  "ðŸ”¢ userDataLoaded event - emitting cards:changed event",
  "[functions] Skipping duplicate home render",
  "ðŸ  Loading home content - using improved loading",
  "Starting duplicate card cleanup...",
  ".card, .cw-card, .media-card, [data-id]",
  "Removed duplicate card: ${key}",
  "Cleanup complete. Removed ${duplicatesRemoved} duplicate cards.",
  "[cleanup] Failed:",
  "ðŸ”§ Setting up WatchlistsAdapter...",
  "[WL v28.99]",
  "Using cached watchlists data for uid:",
  "Load already in progress, waiting...",
  "WatchlistsAdapter.load failed:",
  "Loading watchlists for uid:",
  "Firebase user doc found, watchlists keys:",
  "Firebase watchlists structure has data:",
  "Watchlists empty or missing, checking direct movies and tv fields...",
  "Firebase movies field:",
  "Firebase tv field:",
  "Created direct watchlists structure:",
  "Merged counts - watching:",
  "Firebase load failed, falling back to appData:",
  "Using appData fallback",
  "Fallback merged counts - watching:",
  "_normalizeWatchlists input:",
  "Invalid watchlists data:",
  "normalizeList called for ${listName}:",
  " field (number)\n            const result = list\n              .map((item) => {\n                if (typeof item === ",
  "${listName} array result:",
  "${listName} object result:",
  "${listName} empty result",
  "movies.watching",
  "tv.watching",
  "movies.wishlist",
  "tv.wishlist",
  "movies.watched",
  "tv.watched",
  "No cache available for moveItem",
  "Removed item:",
  "new count:",
  "Added item:",
  ", toList, ",
  "moveItem failed:",
  "No cache available for removeItem",
  "removeItem failed:",
  "No cache available for addItem, creating new cache",
  "Item already exists in",
  "addItem failed:",
  "Found item data for ID ${id}:",
  ";\n              } else if (isInMovieList && !isInTvList) {\n                normalizedItem.media_type = ",
  ";\n              } else if (normalizedItem.first_air_date) {\n                normalizedItem.media_type = ",
  ";\n              } else if (normalizedItem.release_date) {\n                normalizedItem.media_type = ",
  ";\n              }\n            }\n            \n            return normalizedItem;\n          } else {\n            log(",
  ");\n            return null;\n          }\n        } catch (error) {\n          log(",
  "No cache available for buildAppDataSnapshot",
  "Built appData snapshot from adapter:",
  "buildAppDataSnapshot failed:",
  "ðŸ”§ WatchlistsAdapter set up...",
  "âŒ Error setting up WatchlistsAdapter:",
  "ðŸ”„ loadListContent called for ${listType}",
  "Skipping duplicate render for ${listType}",
  "[WL v28.33] Loaded ${idList.length} IDs for ${listType} from canonical adapter",
  "[WL v28.33] Set header ${list}Count: ${counts[list]}",
  "[WL v28.33] Set badge ${list}Badge: ${counts[list]}",
  "[WL v28.33] Looking for ${idList.length} IDs:",
  "[WL v28.33] ID ${id} ->",
  "NOT FOUND",
  "[WL v28.33] Mapped ${idList.length} IDs to ${items.length} items for ${listType}",
  "[WL v28.33] Missing items for ${listType}:",
  "] .section-content",
  "Container for ${listType}:",
  "Children before clear:",
  "Children after clear:",
  ");\n      log(",
  "Removing duplicate card from:",
  "Rendering ${items.length} items for ${listType} using Cards V2",
  "[WL v28.33] Using toCardProps adapter for ${item.title || item.name}",
  "[functions] toCardProps failed, using fallback:",
  "),\n              title: item.title || item.name || ",
  ",\n              name: item.title || item.name || ",
  ") : ",
  ",\n              seasonEpisode: item.seasonEpisode || item.sxxExx || ",
  ",\n              nextAirDate: item.next_episode_air_date || item.nextAirDate || item.next_air_date || ",
  ",\n              runtime: item.runtime || item.episode_run_time || ",
  ",\n              userRating: item.userRating || item.rating || 0,\n              progress: item.progress || ",
  ",\n              badges: item.badges || [],\n              whereToWatch: item.whereToWatch || ",
  ",\n              overview: item.overview || ",
  "Added V2 tab card ${index + 1}/${items.length} for ${listType}: ${snap.title}",
  "V2 card creation failed for ${snap.title}",
  "[Performance] Rendered ${items.length} cards in ${(endTime - startTime).toFixed(2)}ms",
  "Rendering ${items.length} items for ${listType} using createCardData + Card",
  "Card data for ${it.title || it.name}:",
  "Added card ${index + 1}/${items.length} for ${listType}:",
  "Card creation failed for ${it.title || it.name}",
  "render item failed:",
  "Rendering ${items.length} items for ${listType} using fallback Card method",
  "${it.year} â€¢ ${it.mediaType === ",
  "\n                : it.mediaType === ",
  "\n                  ? ",
  "\n                  : ",
  ">Card components not available.</div>",
  "Final children count for ${listType}:",
  "Enabled drag and drop for ${listType} container",
  "[functions] loadListContent failed:",
  ");\n        }\n      }\n      // Fallback to appData search if adapter doesn",
  ");\n            break;\n          }\n        }\n      }\n      if (!item) {\n        log(",
  ", itemId);\n        return;\n      }\n      if (mediaType !== ",
  ") {\n        log(",
  ");\n        return;\n      }\n      // Create modal HTML\n      const modalHTML = ",
  ">Season 1</option>\n                <option value=",
  ">Season 2</option>\n                <option value=",
  ">Season 3</option>\n              </select>\n            </div>\n            <div class=",
  ">\n              <label for=",
  ">Current Episode:</label>\n              <select id=",
  ">\n                <option value=",
  ">Episode 1</option>\n                <option value=",
  ">Episode 2</option>\n                <option value=",
  ">Episode 3</option>\n              </select>\n            </div>\n            <div class=",
  ">\n              <button class=",
  ">Save Progress</button>\n              <button class=",
  ">Mark Season Complete</button>\n              <button class=",
  ">Mark Series Complete</button>\n            </div>\n          </main>\n        </div>\n      </div>\n    ",
  "Save progress:",
  "Mark season complete:",
  "Mark series complete:",
  ".episode-modal-overlay",
  "Episode tracking modal opened for:",
  "[functions] openEpisodeTrackingModal failed:",
  "Updated rating for",
  "[functions] updateUserRating failed:",
  "Updated note for",
  "[functions] updateUserNote failed:",
  ", listType, ",
  "[functions] reorderItems failed:",
  "\n    <div class=",
  ">\n      <div class=",
  ">â³</div>\n      <div class=",
  ">Loading recommendations...</div>\n    </div>\n  ",
  "âš ï¸ Failed to fetch recommendations - using empty results",
  ">\n          <div class=",
  ">âœ¨</div>\n          <div class=",
  ">No Recommendations</div>\n          <div class=",
  ">Try adjusting your preferences or check back later.</div>\n        </div>\n      ",
  "Failed to load discover recommendations:",
  ">âŒ</div>\n          <div class=",
  ">Failed to Load</div>\n          <div class=",
  ">Unable to load recommendations. Please try again later.</div>\n          <button class=",
  " onclick=",
  ">\n            Try Again\n          </button>\n        </div>\n      ",
  "\n        : item.mediaType === ",
  "\n          ? ",
  "\n          : ",
  "View Details",
  "Added to Not Interested",
  "${item.title || item.name} won",
  ",\n            );\n          },\n          icon: ",
  "Failed to get not interested items:",
  "Failed to add to not interested:",
  "Failed to remove from not interested:",
  "Failed to clear not interested:",
  "Open details for item:",
  ".notification",
  "notification notification--${type}",
  "<span class=",
  "t exist\n    let modal = document.getElementById(",
  ");\n    if (!modal) {\n      modal = document.createElement(",
  ");\n      modal.id = ",
  ";\n      modal.className = ",
  ";\n      modal.setAttribute(",
  ";\n    modal.innerHTML = ",
  "Close modal",
  "Add your notes about this show or movie...",
  ">${existingNotes}</textarea>\n      </div>\n      <div class=",
  ">\n        <button class=",
  " data-close>Cancel</button>\n        <button class=",
  ">Save Notes</button>\n      </div>\n    </div>\n  ",
  ".modal__save",
  ".modal__textarea",
  "Notes Saved",
  "Notes saved for ${item.title || item.name}",
  "ModalUtility not available",
  " data-close></div>\n    <div class=",
  ">\n        <h3 class=",
  ">Episode Guide - ${item.title || item.name}</h3>\n        <button class=",
  " data-close>Ã—</button>\n      </div>\n      <div class=",
  ">\n        <div class=",
  ">\n            <label for=",
  ">Season:</label>\n            <select id=",
  ">\n              <option value=",
  ">Season 1</option>\n              <option value=",
  ">Season 2</option>\n              <option value=",
  ">Season 3</option>\n            </select>\n          </div>\n          <div class=",
  ">\n            <div class=",
  ">\n              <div class=",
  ">S1E1</div>\n              <div class=",
  ">Pilot</div>\n              <div class=",
  ">Jan 15, 2023</div>\n              <button class=",
  ">Mark Watched</button>\n            </div>\n            <div class=",
  ">S1E2</div>\n              <div class=",
  ">The Second Episode</div>\n              <div class=",
  ">Jan 22, 2023</div>\n              <button class=",
  ">Mark Watched</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=",
  " data-close>Close</button>\n      </div>\n    </div>\n  ",
  ">Remove Item</h3>\n        <button class=",
  "btn btn--secondary modal__cancel",
  "btn btn--danger modal__confirm",
  ";\n    // Add confirm functionality\n    const confirmBtn = modal.querySelector(",
  ");\n    confirmBtn.addEventListener(",
  "Item Removed",
  "${item.title || item.name} removed from ${section}",
  "confirmRemoveModal",
  "modal modal--pro",
  ">\n      <h3 class=",
  ">â­ Flicklet PRO</h3>\n      <button class=",
  ">Ã—</button>\n    </div>\n    <div class=",
  ">â­</div>\n        <h4 class=",
  ">Unlock Premium Features</h4>\n        <ul class=",
  "btn btn--secondary modal__close",
  "btn btn--primary modal__upgrade",
  ".modal__close",
  ".modal__upgrade",
  "Coming Soon",
  "PRO upgrade will be available soon!",
  ";\n    } catch (error) {\n      console.error(",
  ", error);\n      return ",
  "Failed to save item notes:",
  ");\n    const mediaKey = mediaType === ",
  "Are you sure you want to clear all ",
  " items? This action cannot be undone.",
  "All ",
  " items have been removed",
  "\n      <div class=",
  ">\n        <p>No items marked as ",
  "</p>\n      </div>\n    ",
  ">${item.title}</div>\n        <div class=",
  ">${item.media_type === ",
  "}</div>\n        <div class=",
  ">Added: ${new Date(item.added_date).toLocaleDateString()}</div>\n      </div>\n      <button class=",
  " \n              data-id=",
  " \n              data-media-type=",
  ">\n        Remove\n      </button>\n    </div>\n  ",
  ".not-interested-item__remove",
  "Removed",
  "Item removed from ",
  " list",
  ".poster-card",
  ".poster-card__drag-handle",
  ";\n          dragHandle.setAttribute(",
  "Drag to reorder",
  ".poster-card__actions",
  ".card.v2 .drag-handle",
  ".card.v2",
  ".poster-card, .card.v2",
  ".poster-card:not(.poster-card--dragging), .card.v2:not(.poster-card--dragging)",
  ");\n    const mediaType =\n      section === ",
  " || section === ",
  "\n        ? containerId.includes(",
  ")\n          ? ",
  ";\n    const mediaKey = mediaType === ",
  "List order updated",
  "âš™ï¸ Loading settings content - adding data tools handlers",
  "ðŸ” Debug: btnExport element found:",
  "ðŸ” Debug: fileImport element found:",
  "ðŸ” Debug: window.guard function exists:",
  "ðŸ” Debug: btnExport exists check:",
  "âœ… Setting up export/import handlers",
  ");\n        const legacyData = JSON.parse(localStorage.getItem(",
  ");\n        const data = {\n          meta: {\n            app: ",
  ",\n            version: window.FlickletApp?.version || ",
  "ðŸš€ Export button clicked!",
  "ðŸ“Š Export data collected:",
  "ðŸ’¾ File download initiated",
  "Export created.",
  "âŒ Export failed:",
  "Export failed: ",
  "Import complete. Reloadingâ€¦",
  "Import failed: invalid file.",
  "Pro preview ON",
  "Pro preview OFF",
  "ðŸ”„ Pro toggle (btnProTry): Refreshing providers, extras, playlists, and trivia...",
  "âœ… Providers refreshed",
  "âœ… Extras refreshed",
  "âœ… Playlists refreshed",
  "âœ… Trivia refreshed",
  "âœ… Series Organizer refreshed",
  "ðŸ” Debug: Advanced notifications card shown due to Pro state change",
  "ðŸ” Debug: Advanced notifications card hidden due to Pro state change",
  ">${c.watching}</div>\n            <div class=",
  ">Currently Watching</div>\n          </div>\n          <div class=",
  ">${c.wishlist}</div>\n            <div class=",
  ">Want to Watch</div>\n          </div>\n          <div class=",
  ">${c.watched}</div>\n            <div class=",
  ">Already Watched</div>\n          </div>\n          <div class=",
  ">${c.total}</div>\n            <div class=",
  ">Total Items</div>\n          </div>\n        </div>\n        <div class=",
  ">\n          <h5 class=",
  ">ðŸ“º TV Shows Breakdown</h5>\n          <div style=",
  "margin: 10px 0;",
  "display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.85rem; max-width: 75%;",
  ";\n      }\n      window.addEventListener(",
  "Notifications enabled",
  "Notifications disabled",
  "ðŸŽ¬ ${upcomingEpisodes.length} new ${episodeText} coming soon!",
  ".card .actions button",
  "Remove",
  "Remove this item from your list",
  "Move to",
  "Move to ",
  ");\n          btn.setAttribute(",
  "Move this item to ${targetList} list",
  ").forEach((el) => {\n        if (isProFromSettings) {\n          el.classList.add(",
  ");\n          el.classList.remove(",
  ");\n          el.removeAttribute(",
  ");\n        } else {\n          el.classList.remove(",
  ");\n          el.classList.add(",
  ");\n          el.setAttribute(",
  "Settings changed:",
  "ðŸ”„ Pro toggle (toggleProPreview): Refreshing providers, extras, playlists, and trivia...",
  "Share feature loading...",
  "Share feature coming soon!",
  "ðŸ” Debug: Checking advanced notifications conditions. FLAGS.notifAdvancedEnabled:",
  "FLAGS.proEnabled:",
  "ðŸ” Debug: Advanced notifications guard condition met",
  "ðŸ” Debug: Advanced card element found:",
  "ðŸ” Debug: Advanced notifications card display set to block",
  ";\n        notifScopeSelect.value = localStorage.getItem(",
  ";\n        // Save preferences on change\n        leadHoursInput.addEventListener(",
  ", (e) => {\n          localStorage.setItem(",
  ", e.target.value);\n        });\n        notifScopeSelect.addEventListener(",
  "ðŸ”§ Setting up remaining Item Management functions...",
  "ðŸ“ addToList called:",
  "âš ï¸ Invalid item for addToList",
  "ðŸ“Š Current appData structure:",
  "ðŸ“ WatchlistsAdapterV2.addItem result:",
  "âŒ addToList failed:",
  "moveItem called:",
  "âœ… [DEBUG] moveItem function is now available on window",
  "No mediaType found for id:",
  "Updated adapter cache for move:",
  "Using enhanced item data for moveItem",
  "Item Moved",
  "Item moved to ${dest}",
  "[Search] Adding to watching:",
  "[Search] Enhancing item with detailed TMDB data...",
  "[Search] Enhanced item:",
  "[Search] Cannot add to watching - missing moveItem function or item.id",
  "[Search] Error enhancing item for watching:",
  "[Search] Adding to wishlist:",
  "[Search] Cannot add to wishlist - missing moveItem function or item.id",
  "[Search] Error enhancing item for wishlist:",
  "[WL v28.23]",
  "No auth or DB available for cloud-confirmed delete",
  "Cloud confirm OK for",
  "Cloud save failed, rolling back:",
  "adapterRemove-fallback",
  "Remove Failed",
  "Failed to remove item. Please try again.",
  "[WL v28.23] Updated adapter cache for removal:",
  "adapterRemove-direct",
  "[WL v28.23] adapterRemove failed:",
  "${hours}h ${minutes}m",
  "FlickWord game starting soon! ðŸŽ®",
  ">${tvWatching.length + movieWatching.length}</div>\n          <div class=",
  ">Currently Watching</div>\n        </div>\n        <div class=",
  ">${tvWishlist.length + movieWishlist.length}</div>\n          <div class=",
  ">Want to Watch</div>\n        </div>\n        <div class=",
  ">${tvWatched.length + movieWatched.length}</div>\n          <div class=",
  ">Already Watched</div>\n        </div>\n        <div class=",
  ">${totalItems}</div>\n          <div class=",
  ">Total Items</div>\n        </div>\n      </div>\n      <div class=",
  ">\n        <h5 class=",
  ">ðŸ“º TV Shows Breakdown</h5>\n        <div style=",
  ";\n        } catch (error) {\n          console.error(",
  ", error);\n          statsContent.innerHTML = ",
  ">ðŸ””</div>\n        <div class=",
  ">Smart Notifications</div>\n          ${isProEnabled ? ",
  ">${isProEnabled ? ",
  "}</div>\n      </div>\n      <div class=",
  ">ðŸ“Š</div>\n        <div class=",
  ">Your Viewing Journey</div>\n          ${isProEnabled ? ",
  ">ðŸŽ¨</div>\n        <div class=",
  ">Advanced Customization</div>\n          ${isProEnabled ? ",
  ">ðŸ‘¥</div>\n        <div class=",
  ">Social Features</div>\n          ${isProEnabled ? ",
  ">âš¡</div>\n        <div class=",
  ">VIP Support</div>\n          ${isProEnabled ? ",
  "}</div>\n      </div>\n    </div>\n  ",
  ".unified-card-poster-skeleton",
  ".unified-card-poster-placeholder",
  ".skeleton",
  ".placeholder",
  ".empty",
  ".ad",
  ".hidden",
  "[Counts v28.17] Counter Bootstrap already initialized, skipping",
  "[Counts v28.17] Initializing Counter Bootstrap System",
  "t fail if containers aren",
  "[Counts v28.17] Armed but waiting for first render signal",
  "[Counts v28.17] Found ${countElements.length} count elements to attach",
  "[Counts v28.17] Target section not found: ${targetSelector}",
  "${element.id}-${targetSection.id}",
  "[Counts v28.17] Observer already exists for ${element.id}, skipping",
  "${countElement.id}-${targetSection.id}",
  "ðŸ”¢ Attached observer for ${countElement.id} -> ${targetSection.id}",
  "[Counts v28.17] Direct recount triggered",
  "ðŸ”¢ Counting cards in ${targetSection.id}:",
  "ðŸ”¢ Using fallback count for ${countElement.id}: ${fallbackCount}",
  "s a badge element\n            if (\n              countElement.classList.contains(",
  ") ||\n              countElement.classList.contains(",
  "ðŸ”¢ Updated count for ${countElement.id}: ${visibleCards} visible cards (was ${currentCount})",
  "ðŸ”¢ Error updating count for ${countElement.id}:",
  "ðŸ”¢ Using WatchlistsAdapter cache for ${countElementId}: ${cache[listKey].length}",
  "ðŸ”¢ Fallback count for ${countElementId}: ${items.length} (deduplicated from ${allItems.length})",
  "[Counts v28.17] Counting cards in ${section.id}:",
  "[Counts v28.17] Excluded ${excludedCount} cards (hidden/inactive)",
  "[Counts v28.17] Final count for ${section.id}: ${visibleCount} visible cards",
  "[Counts v28.17] cards:changed event received - triggering recount",
  "[Counts v28.17] app:lists-rendered event received",
  "[Counts v28.17] Late bind successful - first real recount complete",
  "[Counts v28.17] tab:switched event received - triggering recount",
  "[Counts v28.17] language:changed event received - triggering recount",
  "ðŸ”¢ Counter Bootstrap System destroyed",
  "ðŸ”§ Item Management functions set up...",
  "âŒ Error setting up remaining Item Management functions:",
  "Unknown home sections context:",
  "Home section not found:",
  "ðŸ  Home Sections Configuration loaded",
  ").trim().toLowerCase().replace(/\\s+/g, ",
  ");\r\n  }\r\n\r\n  function showBanner(lines) {\r\n    const bar = document.createElement(",
  ";\r\n    bar.innerHTML = ",
  "â€¢ ${l}",
  "Missing container: ${r.containerSelector} for ",
  ");\r\n    if (!head) errs.push(",
  "${r.title}",
  ");\r\n    if (head && norm(head.textContent) !== norm(r.title)) {\r\n      errs.push(\r\n        ",
  "${r.key}",
  "${head.textContent.trim()}",
  ",\r\n      );\r\n    }\r\n  });\r\n\r\n  if (errs.length) {\r\n    console.group(",
  "[home-selftest] OK â€” Home matches config",
  "[home-selftest] failed",
  ");\n        const staff = JSON.parse(localStorage.getItem(",
  ");\n        const fresh = JSON.parse(localStorage.getItem(",
  ");\n        curatedData.push(...trending, ...staff, ...fresh);\n      } catch (e) {\n        console.warn(",
  ";\n    const list = (limit ? items.slice(0, limit) : items).filter(Boolean);\n    \n    // Don",
  "Nothing here yet.",
  "[home-wire] render error",
  "[home-wire] Attempting to fetch poster data for item:",
  ";\n        const tmdbData = await window.tmdbGet(",
  "[home-wire] Successfully fetched poster data:",
  "[home-wire] Failed to fetch poster data from TMDB:",
  ",\n          title: item.title || item.name || ",
  ",\n          poster: item.poster_path ? ",
  " : (item.posterUrl || ",
  "),\n          releaseDate: item.release_date || item.first_air_date || ",
  ",\n          genre: item.genre || (item.genres && item.genres[0]?.name) || ",
  ",\n          seasonEpisode: item.seasonEpisode || item.sxxExx || ",
  "\n        };\n        card = window.renderCardV2(container, props, { listType: ",
  ", context: ",
  " });\n      } else if (sectionHint === ",
  " && window.renderCardV2) {\n        // Design spec: Home Next Up - vertical layout with NO buttons, single ",
  " line\n        const props = {\n          id: item.id,\n          mediaType: item.media_type || ",
  ",\n          nextAirDate: item.next_episode_air_date || item.nextAirDate || item.next_air_date || ",
  ",\n          tmdbId: item.tmdbId || item.id,\n          whereToWatch: item.whereToWatch || item.provider || ",
  ",\n          curatorBlurb: item.curatorBlurb || item.description || ",
  "\n        };\n        card = window.renderCardV2(container, props, { listType: sectionHint, context: ",
  " });\n      }\n      \n      if (card) {\n        // Add preview-specific styling\n        card.classList.add(",
  ");\n        return card;\n      }\n    } catch (error) {\n      console.error(",
  ";\n    const mediaType = item.media_type || (item.first_air_date ? ",
  " tabindex=",
  ">\n          ${\n            posterUrl\n              ? ",
  "${title} poster",
  "this.style.display=",
  "; this.nextElementSibling.style.display=",
  "\n              : ",
  "\n          }\n          <div class=",
  "></div>\n            <div class=",
  ">ðŸŽ¬</div>\n          </div>\n        </div>\n        <div class=",
  ">\n          <button class=",
  " \n                  data-action=",
  " \n                  data-id=",
  " \n                  aria-label=",
  "\n                  title=",
  ">âœ…</span>\n            <span class=",
  ">Mark Watched</span>\n          </button>\n          <button class=",
  ">ðŸ“–</span>\n            <span class=",
  ">Want to Watch</span>\n          </button>\n          <button class=",
  ">ðŸ—‘ï¸</span>\n            <span class=",
  ">Remove</span>\n          </button>\n        </div>\n      </div>\n      <div class=",
  ">${title}</h3>\n        <div class=",
  ">${year ? ",
  " : mediaType === ",
  "}</div>\n      </div>\n    ",
  ".unified-card-poster",
  "t trigger if clicking on action buttons\n        if (!e.target.closest(",
  ".unified-card-action-btn",
  "[home-wire] Failed to get item data for ID:",
  "),\n              wishlist: wishlistItems.filter(item => item.media_type === ",
  "),\n              watched: watchedItems.filter(item => item.media_type === ",
  ")\n            },\n            movies: {\n              watching: watchingItems.filter(item => item.media_type === ",
  ")\n            }\n          };\n        }\n      } catch (error) {\n        console.warn(",
  "[home-wire] missing container ${r.containerSelector} for ",
  "[home-wire] rendered:",
  "));\n  }\n\n  const config = await loadConfig();\n  // Render whenever data becomes ready\n  window.addEventListener(",
  "[home-wire] failed to init",
  "ðŸŒ™ Go Dark",
  "â˜€ï¸ Go Light",
  "TV & Movie Tracker",
  "Total Binge Time",
  "Currently Airing",
  "Series Complete",
  "Because you liked",
  "Choose which types of notifications you",
  ",\r\n    layout_settings: ",
  ",\r\n    layout_description: ",
  ",\r\n    data_management: ",
  ",\r\n    data_description: ",
  ",\r\n    pro_features: ",
  ",\r\n    pro_description: ",
  ",\r\n    settings_description: ",
  ",\r\n\r\n    // Settings options\r\n    condensed_list_view: ",
  ",\r\n    show_posters: ",
  ",\r\n    dark_mode: ",
  ",\r\n    home_page_lists: ",
  ",\r\n\r\n    // Data actions\r\n    export_json: ",
  ",\r\n    import_json: ",
  ",\r\n    extra_trivia_pro: ",
  ",\r\n    export_csv_pro: ",
  ",\r\n    reset_all_data: ",
  ",\r\n    data_hint:\r\n      ",
  "s Downloads/Files. Import accepts a valid Flicklet export.",
  "Toggle Pro features on/off to see what",
  ",\r\n    pro_features_include: ",
  ",\r\n    pro_simulate: ",
  ",\r\n\r\n    // Feedback feature\r\n    share_your_thoughts: ",
  ",\r\n    feedback: ",
  ",\r\n    feedback_working:\r\n      ",
  "s working (or not), share a quote for our rotation, make a confession, or just vent. We",
  ",\r\n    your_message: ",
  ",\r\n    feedback_placeholder:\r\n      ",
  ",\r\n    send: ",
  ",\r\n\r\n    // Share / lists\r\n    share_lists: ",
  ",\r\n    share_this_list: ",
  ",\r\n    share_selected: ",
  ",\r\n    share_link: ",
  ",\r\n    share_instructions: ",
  ",\r\n\r\n    // File pickers\r\n    choose_file: ",
  ",\r\n    no_file_chosen: ",
  ",\r\n\r\n    // Search\r\n    search: ",
  ",\r\n    search_placeholder: ",
  ",\r\n    search_for_shows: ",
  ",\r\n    search_tips: ",
  ",\r\n    search_results: ",
  ",\r\n    end_of_search_results: ",
  ",\r\n    search_failed: ",
  ",\r\n    no_results: ",
  ",\r\n    no_results_found: ",
  ",\r\n    searching: ",
  ",\r\n    search_loading: ",
  ",\r\n    search_results_cleared: ",
  ",\r\n    please_search_again: ",
  ",\r\n\r\n    // Counts / stats\r\n    currently_watching_count: ",
  ",\r\n    want_to_watch_count: ",
  ",\r\n    already_watched_count: ",
  ",\r\n    stats: ",
  ",\r\n    total_items: ",
  ",\r\n    watching_count: ",
  ",\r\n    wishlist_count: ",
  ",\r\n    watched_count: ",
  ",\r\n    top_genres: ",
  ",\r\n    average_rating: ",
  ",\r\n\r\n    // Generic statuses\r\n    loading: ",
  ",\r\n    failed_to_load: ",
  ",\r\n\r\n    // Home screen elements\r\n    community: ",
  ",\r\n    community_player: ",
  ",\r\n    community_player_placeholder: ",
  ",\r\n    flickword: ",
  ",\r\n    flickword_tagline: ",
  ",\r\n    daily_trivia: ",
  ",\r\n    daily_trivia_tagline: ",
  ",\r\n    play_now: ",
  ",\r\n    quote_of_the_moment: ",
  ",\r\n    loading_inspirational_quote: ",
  ",\r\n    your_shows: ",
  ",\r\n    for_you: ",
  ",\r\n    in_theaters: ",
  ",\r\n    report_bug: ",
  ",\r\n    suggest_feature: ",
  ",\r\n    general_feedback: ",
  ",\r\n    submit_video: ",
  ",\r\n\r\n    // Key missing translations\r\n    app_title: ",
  ",\r\n    app_subtitle: ",
  ",\r\n    dont_show_again: ",
  "t show again",
  "ðŸ‘ï¸ Currently Watching",
  "ðŸ“… Next Up This Week",
  "No upcoming episodes this week.",
  "ðŸŽ¯ Curated Sections",
  "Turn on location to see movies playing near you.",
  "Close Game",
  "No items.",
  "No description.",
  "ðŸŽ¨ Theme Packs",
  "[ Daily Trivia game mounts here ]",
  "Enable Episode Tracking",
  "Switch to dark theme. When enabled, follows your system",
  ",\r\n    number_of_curated_sections:\r\n      ",
  ",\r\n    currently_watching_preview_limit: ",
  ",\r\n    number_of_currently_watching:\r\n      ",
  ",\r\n    allow_tracking_of_individual:\r\n      ",
  ",\r\n    advanced_layout_and_theming: ",
  ",\r\n    choose_a_visual_theme:\r\n      ",
  ",\r\n    basic_data_management: ",
  ",\r\n    download_a_complete_backup:\r\n      ",
  ",\r\n    restore_your_data: ",
  ",\r\n    generate_a_shareable_text:\r\n      ",
  ",\r\n    permanently_delete_all:\r\n      ",
  ",\r\n    advanced_data_management: ",
  ",\r\n    export_your_data_csv: ",
  ",\r\n    access_additional_trivia:\r\n      ",
  ",\r\n    advanced_features_premium:\r\n      ",
  ",\r\n    were_not_here_to_reinvent:\r\n      ",
  "re not here to reinvent the wheel â€” we",
  "d rather give you tools that justâ€¦ work.",
  "s fun, useful, and a little different from the pack â€” it belongs here.",
  ",\r\n    pam_once_trained_dolphins:\r\n      ",
  "re like a mash-up of ",
  " â€” and that combo lets us build apps that are simple, useful, and not boring.",
  "episode 7 mid-season thoughts.",
  ",\r\n    so_we_made_this_instead: ",
  ",\r\n    if_you_watch_tv:\r\n      ",
  "t want to make it a hobby just to track them, this app",
  ",\r\n    your_feedback_helps:\r\n      ",
  ",\r\n    your_name_will_appear: ",
  ",\r\n    view_your_watching_stats: ",
  ",\r\n    view_and_remove_items:\r\n      ",
  ",\r\n    get_notified_when_new:\r\n      ",
  "re watching are about to air",
  "Receive weekly recommendations for new shows and movies based on your preferences",
  "Configure advanced notification settings with custom lead times and list monitoring",
  "ðŸŽ¨ Personalized Recommendations",
  "Based on your watching history and preferences",
  "Your anime suggestions",
  "Your horror suggestions",
  "What everyone is watching",
  "Staff Picks",
  "Curated by us",
  "New This Week",
  "Fresh releases",
  "ðŸŽ¬ In Theaters Near You",
  "Current theatrical releases",
  "ðŸŽ¬ Now Playing",
  "Find Showtimes",
  "Click ",
  " to see showtimes at theaters near you",
  "Now Playing",
  "TV Shows Breakdown",
  "Movies Breakdown",
  "Manage shows and movies you",
  ",\r\n    manage_not_interested_list: ",
  ",\r\n\r\n    // Cards / actions\r\n    notes_tags: ",
  ",\r\n    mark_watched: ",
  ",\r\n    want_to_watch: ",
  ",\r\n    remove: ",
  ",\r\n    your_rating: ",
  ",\r\n    not_interested: ",
  ",\r\n    add: ",
  ",\r\n    more_actions: ",
  ",\r\n    continue: ",
  ",\r\n    available_on: ",
  ",\r\n    watch_on: ",
  ",\r\n    upgrade_to_reveal: ",
  ",\r\n    upgrade_to_watch: ",
  ",\r\n    extras: ",
  ",\r\n    already_in_list: ",
  ",\r\n    moved_to: ",
  ",\r\n    added_to: ",
  ",\r\n\r\n    // Curated homepage\r\n    trending_title: ",
  ",\r\n    trending_subtitle: ",
  ",\r\n    staff_picks_title: ",
  ",\r\n    staff_picks_subtitle: ",
  ",\r\n    new_this_week_title: ",
  ",\r\n    new_this_week_subtitle: ",
  ",\r\n\r\n    // Additional home content keys\r\n    personalized_recommendations: ",
  ",\r\n    based_on_watching_history: ",
  ",\r\n    your_anime_suggestions: ",
  ",\r\n    your_horror_suggestions: ",
  ",\r\n    your_suggestions: ",
  ",\r\n    in_theaters_near_you: ",
  ",\r\n    current_theatrical_releases: ",
  ",\r\n    now_playing: ",
  ",\r\n    find_showtimes: ",
  ",\r\n    click_find_showtimes: ",
  ",\r\n    now_playing_status: ",
  ",\r\n    movies_count: ",
  ",\r\n\r\n    // Discovery / recommendations\r\n    discover_description: ",
  ",\r\n    not_enough_signals: ",
  ",\r\n    recommendations_failed: ",
  ",\r\n\r\n    // FlickWord\r\n    flickword_title: ",
  ",\r\n    flickword_play: ",
  ",\r\n    flickword_streak: ",
  ",\r\n    flickword_best: ",
  ",\r\n    flickword_played: ",
  ",\r\n    flickword_daily_challenge: ",
  ",\r\n    hours_left_motivation: ",
  "s game!",
  "Play Today",
  ",\r\n    streak: ",
  ",\r\n    best: ",
  ",\r\n    played: ",
  ",\r\n\r\n    // Quotes\r\n    quote_title: ",
  ",\r\n    quote_of_the_day: ",
  ",\r\n    random_quote: ",
  ",\r\n    quote_1: ",
  "I am serious... and don\\",
  " â€” *Airplane!*",
  "Streaming is a lifestyle, not a choice.",
  ",\r\n    quote_3: ",
  "Binge now. Cry later.",
  ",\r\n    quote_4: ",
  "One does not simply watch one episode.",
  ",\r\n    quote_5: ",
  "You had me at \\",
  ",\r\n    quote_6: ",
  "Art is long, episodes are longer.",
  ",\r\n    quote_7: ",
  "We were on a break! From reality.",
  ",\r\n    quote_8: ",
  "I came, I saw, I queued it.",
  ",\r\n    quote_9: ",
  "To stream, perchance to nap.",
  "s cut)",
  "In this house we respect the \\",
  " prompt.",
  ",\r\n    quote_11: ",
  "The algorithm thinks I\\",
  "s right.",
  ",\r\n    quote_12: ",
  "If found, return to the couch.",
  ",\r\n    quote_13: ",
  "My love language is \\",
  ",\r\n    quote_14: ",
  "I contain multitudes and several watchlists.",
  ",\r\n    quote_15: ",
  "Sundays are for pilots and denial.",
  ",\r\n    quote_16: ",
  "Ctrl+Z for life, play for comfort.",
  ",\r\n    quote_17: ",
  "I fear no man, but I fear finales.",
  ",\r\n    quote_18: ",
  "This app gets me. Terrifying.",
  ",\r\n    quote_19: ",
  "Plot holes are just cardio for the brain.",
  ",\r\n    quote_20: ",
  "We accept the dopamine we think we deserve.",
  ",\r\n    quote_21: ",
  "I have never finished anything. Except seasons.",
  ",\r\n    quote_22: ",
  ",\r\n    quote_23: ",
  "Foreshadowing? I hardly know her.",
  ",\r\n    quote_24: ",
  "Character development is my cardio.",
  ",\r\n    quote_25: ",
  "If the title card hits, I\\",
  ",\r\n    quote_26: ",
  "Minimalism, but for episodes.",
  ",\r\n    quote_27: ",
  "Are you still watching?",
  "m thriving.\\",
  ",\r\n    quote_28: ",
  "I ship productivity with naps.",
  ",\r\n    quote_29: ",
  "Comfort show supremacy.",
  ",\r\n    quote_30: ",
  "This queue is a personality test I\\",
  ",\r\n\r\n    // Notifications / toasts\r\n    notification_success: ",
  ",\r\n    notification_error: ",
  ",\r\n    notification_warning: ",
  ",\r\n    notification_info: ",
  ",\r\n\r\n    // Cloud / offline\r\n    cloud_sync_ok: ",
  ",\r\n    cloud_load_failed: ",
  ",\r\n    cloud_sync_failed: ",
  ",\r\n    offline_mode: ",
  ",\r\n    auth_unavailable_offline: ",
  ",\r\n    working_offline_mode: ",
  ",\r\n\r\n    // Auth & onboarding\r\n    sign_in_title: ",
  ",\r\n    sign_in_subtitle: ",
  ",\r\n    sign_in_create_account: ",
  ",\r\n    signing_in: ",
  ",\r\n    sign_in_subtitle_text: ",
  ",\r\n    please_enter_display_name: ",
  ",\r\n    welcome_title: ",
  ",\r\n    welcome_subtitle: ",
  ",\r\n    welcome: ",
  ",\r\n    display_name: ",
  ",\r\n    display_name_placeholder: ",
  ",\r\n    save_name: ",
  ",\r\n    sign_in_account: ",
  ",\r\n    account: ",
  ",\r\n    user: ",
  ",\r\n    email_signin: ",
  ",\r\n    email_label: ",
  ",\r\n    continue_google: ",
  ",\r\n    click_to_sign_in: ",
  ",\r\n    signed_in_as: ",
  ",\r\n    click_to_sign_out: ",
  ",\r\n    click_to_log_out: ",
  ",\r\n    sign_out: ",
  ",\r\n    sign_out_confirmation: ",
  ",\r\n    signed_in_successfully: ",
  ",\r\n    signed_out_successfully: ",
  ",\r\n    sign_out_failed: ",
  ",\r\n\r\n    // Auth errors\r\n    auth_system_unavailable: ",
  ",\r\n    error_loading_user_data: ",
  ",\r\n    auth_system_error: ",
  ",\r\n    firestore_not_available: ",
  ",\r\n    no_displayname_field: ",
  ",\r\n    auth_system_loading: ",
  ",\r\n    google_signin_unavailable: ",
  ",\r\n    apple_signin_unavailable: ",
  ",\r\n    email_signin_unavailable: ",
  ",\r\n    unable_to_show_signin: ",
  ",\r\n    signin_system_not_ready: ",
  ",\r\n\r\n    // Genres\r\n    action: ",
  ",\r\n    adventure: ",
  ",\r\n    animation: ",
  ",\r\n    comedy: ",
  ",\r\n    crime: ",
  ",\r\n    documentary: ",
  ",\r\n    drama: ",
  ",\r\n    family: ",
  ",\r\n    fantasy: ",
  ",\r\n    history: ",
  ",\r\n    horror: ",
  ",\r\n    music: ",
  ",\r\n    mystery: ",
  ",\r\n    romance: ",
  ",\r\n    science_fiction: ",
  ",\r\n    tv_movie: ",
  ",\r\n    thriller: ",
  ",\r\n    war: ",
  ",\r\n    western: ",
  ",\r\n    action_adventure: ",
  ",\r\n    kids: ",
  ",\r\n    news: ",
  ",\r\n    reality: ",
  ",\r\n    sci_fi_fantasy: ",
  ",\r\n    soap: ",
  ",\r\n    talk: ",
  ",\r\n    war_politics: ",
  ",\r\n    talk_show: ",
  ",\r\n    reality_tv: ",
  ",\r\n\r\n    // Language change message\r\n    language: ",
  ",\r\n    language_changed_to: ",
  ",\r\n\r\n    // Home sections (grouped)\r\n    ",
  "My Library",
  "home.my_library_sub",
  "Your personal watchlists and progress",
  "home.community",
  "home.community_sub",
  "Spotlight videos and community games",
  "home.curated",
  "home.curated_sub",
  "Trending shows and staff recommendations",
  "home.personalized",
  "home.personalized_sub",
  "Recommendations just for you",
  "home.theaters",
  "In Theaters Near Me",
  "home.theaters_sub",
  ",\r\n    ",
  "home.feedback_link_sub",
  "Help us improve Flicklet",
  "Have thoughts to share? We",
  ",\r\n\r\n    // Trivia\r\n    trivia_title: ",
  ",\r\n    trivia_next: ",
  ",\r\n    trivia_loading: ",
  ",\r\n    trivia_error: ",
  ",\r\n    trivia_correct: ",
  ",\r\n    trivia_incorrect: ",
  ",\r\n    trivia_question: ",
  ",\r\n    trivia_answer: ",
  ",\r\n    trivia_completed_today: ",
  ",\r\n    trivia_come_back_tomorrow: ",
  ",\r\n    trivia_incorrect_answer: ",
  ",\r\n    trivia_streak_up: ",
  ",\r\n    trivia_try_again_tomorrow: ",
  ",\r\n    trivia_ok: ",
  ",\r\n  },\r\n\r\n  es: {\r\n    // Theme / UI toggles\r\n    go_dark: ",
  ",\r\n    go_light: ",
  ",\r\n\r\n    // App identity\r\n    app_title: ",
  ",\r\n    subtitle: ",
  ",\r\n\r\n    // High-level stats / sections\r\n    binge_total: ",
  ",\r\n    currently_watching: ",
  ",\r\n    already_watched: ",
  ",\r\n    currently_airing: ",
  ",\r\n    series_complete: ",
  ",\r\n    coming_soon: ",
  ",\r\n    next: ",
  ",\r\n    last: ",
  ",\r\n    start: ",
  ",\r\n    because_you_liked: ",
  ",\r\n\r\n    // Global navigation\r\n    home: ",
  ",\r\n    discover: ",
  ",\r\n    settings: ",
  ",\r\n\r\n    // Settings tabs + descriptions\r\n    general: ",
  ",\r\n    notifications: ",
  ",\r\n    layout: ",
  ",\r\n    data: ",
  ",\r\n    pro: ",
  ",\r\n    about: ",
  ",\r\n    general_description: ",
  ",\r\n    notifications_description: ",
  ",\r\n\r\n    // Pro preview\r\n    preview_pro_features: ",
  ",\r\n    pro_hint: ",
  ",\r\n    search_tips:\r\n      ",
  ",\r\n    currently_watching_section: ",
  ",\r\n    next_up_this_week: ",
  ",\r\n    no_upcoming_episodes: ",
  ",\r\n    win_percent: ",
  ",\r\n    accuracy: ",
  ",\r\n    curated_sections: ",
  ",\r\n    location_prompt: ",
  ",\r\n    share_your_thoughts: ",
  ",\r\n    help_improve_feedback: ",
  ",\r\n    close_game: ",
  ",\r\n    no_items: ",
  ",\r\n    no_description: ",
  ",\r\n    unknown: ",
  ",\r\n\r\n    // Additional critical translations\r\n    loading_stats: ",
  ",\r\n    core_features: ",
  ",\r\n    pro_notifications: ",
  ",\r\n    pro_layout_features: ",
  ",\r\n    pro_data_features: ",
  ",\r\n    theme_packs: ",
  ",\r\n    about_unique4u: ",
  ",\r\n    about_the_creators: ",
  ",\r\n    about_the_app: ",
  ",\r\n    copy: ",
  ",\r\n    daily_trivia_game_mounts: ",
  ",\r\n    enable_advanced_notifications: ",
  ",\r\n    lead_time_hours: ",
  ",\r\n    monitor_lists: ",
  ",\r\n    pro_feature_upgrade:\r\n      ",
  ",\r\n    pro_unlocks_more_themes: ",
  ",\r\n    saved: ",
  ",\r\n    enable_episode_tracking: ",
  ",\r\n    theme: ",
  ",\r\n    basic_layout_customization:\r\n      ",
  ",\r\n    show_more_items_per_screen:\r\n      ",
  ",\r\n    display_poster_images:\r\n      ",
  ",\r\n    switch_to_dark_theme:\r\n      ",
  ",\r\n    basic_data_management:\r\n      ",
  ",\r\n    restore_your_data:\r\n      ",
  ",\r\n    export_your_data_csv:\r\n      ",
  ",\r\n    everything_we_build:\r\n      ",
  ",\r\n    were_pam_and_travis:\r\n      ",
  "creativo se encuentra con operaciones",
  ",\r\n    heres_the_deal:\r\n      ",
  "pensamientos del episodio 7 de mitad de temporada.",
  "No me interesa",
  ",\r\n    receive_weekly_recommendations:\r\n      ",
  ",\r\n    get_a_monthly_summary:\r\n      ",
  ",\r\n    advanced_notification_features: ",
  ",\r\n    advanced_notifications_pro: ",
  ",\r\n    configure_advanced_notifications:\r\n      ",
  ",\r\n    range_1_3: ",
  ",\r\n    range_5_20: ",
  ",\r\n\r\n    // Home content sections\r\n    personalized_recommendations: ",
  ",\r\n    trending: ",
  ",\r\n    what_everyone_watching: ",
  ",\r\n    staff_picks: ",
  ",\r\n    curated_by_us: ",
  ",\r\n    new_this_week: ",
  ",\r\n    fresh_releases: ",
  "Encontrar Horarios",
  ",\r\n\r\n    // Additional missing keys\r\n    what_everyone_watching: ",
  ",\r\n    tv_shows_breakdown: ",
  ",\r\n    movies_breakdown: ",
  ",\r\n    not_interested_management: ",
  ",\r\n    manage_not_interested_description:\r\n      ",
  ",\r\n    not_enough_signals:\r\n      ",
  ",\r\n    play_todays_word: ",
  "Soy serio... y no me llames Shirley.",
  ",\r\n    quote_2: ",
  "El streaming es un estilo de vida, no una opciÃ³n.",
  "MaratÃ³n ahora. Llora despuÃ©s.",
  "Uno no simplemente ve un episodio.",
  "Me conquistaste con \\",
  "El arte es largo, los episodios son mÃ¡s largos.",
  "Â¡EstÃ¡bamos en un descanso! De la realidad.",
  "Vine, vi, lo puse en cola.",
  "Transmitir, tal vez dormitar.",
  ",\r\n    quote_10: ",
  "En esta casa respetamos el aviso \\",
  "El algoritmo piensa que soy complicado. Tiene razÃ³n.",
  "Si se encuentra, devolver al sofÃ¡.",
  "Mi lenguaje del amor es \\",
  "Contengo multitudes y varias watchlists.",
  "Los domingos son para pilotos y negaciÃ³n.",
  "Ctrl+Z para la vida, play para consuelo.",
  "No temo a ningÃºn hombre, pero temo a los finales.",
  "Esta app me entiende. Aterrador.",
  "Los agujeros de guiÃ³n son cardio para el cerebro.",
  "Aceptamos la dopamina que creemos merecer.",
  "Nunca he terminado nada. Excepto temporadas.",
  "Vibe de hoy: subtÃ­tulos y snacks.",
  "Â¿Presagio? Apenas la conozco.",
  "El desarrollo de personajes es mi cardio.",
  "Si la tarjeta de tÃ­tulo pega, me quedo.",
  "Minimalismo, pero para episodios.",
  "Â¿Sigues viendo?\\",
  "EnvÃ­o productividad con siestas.",
  "SupremacÃ­a de serie de consuelo.",
  "Esta cola es una prueba de personalidad que estoy fallando.",
  ",\r\n    working_offline_mode:\r\n      ",
  ",\r\n    sign_in_subtitle_text:\r\n      ",
  ",\r\n\r\n    // Auth errors\r\n    auth_system_unavailable:\r\n      ",
  ",\r\n    auth_system_loading:\r\n      ",
  ",\r\n    google_signin_unavailable:\r\n      ",
  ",\r\n    apple_signin_unavailable:\r\n      ",
  ",\r\n    email_signin_unavailable:\r\n      ",
  ",\r\n    unable_to_show_signin:\r\n      ",
  ",\r\n    signin_system_not_ready:\r\n      ",
  "Mi Biblioteca",
  "Tus listas de seguimiento y progreso personal",
  "Videos destacados y juegos de la comunidad",
  "Series populares y recomendaciones del equipo",
  "Recomendaciones solo para ti",
  "En Cines Cerca de MÃ­",
  "QuÃ© se estÃ¡ proyectando en tus cines locales",
  "home.feedback_link",
  "AyÃºdanos a mejorar Flicklet",
  "Â¿Tienes pensamientos que compartir? Â¡Nos encantarÃ­a escucharlos!",
  "Cargando...",
  "Error al cargar trivia",
  "Â¡Correcto!",
  " â€¢ Completado hoy",
  "Vuelve maÃ±ana para una nueva pregunta.",
  "No â€” la respuesta correcta es",
  "Trivia: +1 racha",
  "Trivia: intenta de nuevo maÃ±ana",
  ",\r\n  },\r\n};\r\n\r\n// Translation function: strict fallback to EN if missing\r\nfunction t(key, lang = ",
  "));\r\n      const val = t(key, lang);\r\n      if (val && val !== key) fn(el, val);\r\n    });\r\n  };\r\n\r\n  apply(",
  ", (el, val) => {\r\n    // Skip marquee elements to prevent overwriting quotes\r\n    if (el.hasAttribute(",
  ") && el.getAttribute(",
  ") === ",
  ") {\r\n      return;\r\n    }\r\n    el.textContent = val;\r\n  });\r\n  apply(",
  ", (el, val) => {\r\n    el.placeholder = val;\r\n  });\r\n  apply(",
  ", (el, val) => {\r\n    el.title = val;\r\n  });\r\n  apply(",
  ", (el, val) => {\r\n    el.setAttribute(",
  ", val);\r\n  });\r\n}\r\n\r\n// Expose globally\r\nif (typeof window !== ",
  "ðŸ“¨ Iframe Auth Helper initializing...",
  "âœ… Iframe Auth Helper ready",
  "ðŸ“¨ Requesting ${provider} auth from parent${method ? ",
  ");\r\n\r\n      const message = {\r\n        type: ",
  ");\r\n      } else {\r\n        console.warn(",
  ");\r\n      googleBtns.forEach((btn) => {\r\n        btn.addEventListener(",
  ", (e) => {\r\n          e.preventDefault();\r\n          this.requestAuth(",
  ");\r\n        });\r\n      });\r\n\r\n      // Handle Apple auth requests\r\n      const appleBtns = document.querySelectorAll(",
  ");\r\n      appleBtns.forEach((btn) => {\r\n        btn.addEventListener(",
  ");\r\n        });\r\n      });\r\n\r\n      // Handle Email auth requests\r\n      const emailBtns = document.querySelectorAll(",
  ");\r\n      emailBtns.forEach((btn) => {\r\n        btn.addEventListener(",
  ");\r\n      signInBtns.forEach((btn) => {\r\n        btn.addEventListener(",
  ";\r\n\r\n      prompt.innerHTML = ",
  ">\r\n          <h3 style=",
  ">Sign in to save progress</h3>\r\n          <p style=",
  ">Choose your preferred sign-in method:</p>\r\n          <div style=",
  ">\r\n            <button onclick=",
  ">Continue with Google</button>\r\n            <button onclick=",
  ">Continue with Apple</button>\r\n            <button onclick=",
  ">Continue with Email</button>\r\n          </div>\r\n          <button onclick=",
  ".iframe-auth-prompt",
  ">Cancel</button>\r\n        </div>\r\n      ",
  "âœ… Auth success in iframe:",
  "ðŸ‘‹ Auth sign out in iframe",
  "âŒ Auth error in iframe:",
  "Authentication failed",
  ");\r\n      signInElements.forEach((el) => {\r\n        el.style.display = ",
  ";\r\n      });\r\n\r\n      // Show sign-out buttons\r\n      const signOutElements = document.querySelectorAll(",
  ");\r\n      signOutElements.forEach((el) => {\r\n        el.style.display = ",
  ";\r\n      });\r\n\r\n      // Hide sign-out buttons\r\n      const signOutElements = document.querySelectorAll(",
  "Failed to get stored language:",
  "ðŸŒ Language saved to storage:",
  "âŒ Failed to save language:",
  "ðŸŒ Triggering language change event:",
  "ðŸ”„ Refreshing TMDB data for language:",
  "âœ… TMDB data refreshed for language:",
  "âŒ Failed to refresh TMDB data:",
  ";\r\n    this.observers = [];\r\n\r\n    // Don",
  "ðŸŒ Language loaded from appData:",
  "ðŸŒ Language loaded from localStorage:",
  ";\r\n        this.saveLanguage(",
  "ðŸŒ LanguageManager initialized with language:",
  "ðŸŒ changeLanguage called with:",
  "ðŸŒ Language change already in progress, ignoring",
  "ðŸŒ Language already set to:",
  "ðŸŒ Changing language from",
  "ðŸŒ Updated currentLang to:",
  "ðŸŒ Calling applyTranslations with:",
  "ðŸŒ Calling updateLanguageDependentUI with:",
  "âœ… Language change completed successfully",
  "âŒ Language change failed:",
  "<div style=",
  ", lang)}</div>",
  "ðŸŒ Cards rendered, applying translations",
  "ðŸŒ Applying translations after content re-render",
  "ðŸŒ Delayed translation application",
  "ðŸ”„ Starting complex rehydration for language:",
  "ðŸ”„ Refreshing genres",
  "ðŸ”„ Force re-rendering all home content",
  "âœ… Complex rehydration completed",
  "âŒ Failed to rehydrate lists for locale:",
  "ðŸ”„ Refreshing Currently Watching metadata for language:",
  "ðŸ”„ No appData available for metadata refresh",
  "ðŸ”„ Updated TV item metadata:",
  "ðŸ”„ Failed to update TV item metadata:",
  "ðŸ”„ Updated movie item metadata:",
  "ðŸ”„ Failed to update movie item metadata:",
  "âœ… Currently Watching metadata refreshed successfully",
  "âŒ Failed to refresh Currently Watching metadata:",
  "ðŸ”„ Refreshing curated rows for language change",
  "ðŸ—‘ï¸ Cleared ${key} cache",
  "ðŸ”„ Re-rendering home rails with new language",
  "ðŸ”„ Re-rendering curated rows with new language",
  "ðŸ”„ Refreshing trivia content",
  "âœ… Trivia refresh completed",
  "âŒ Trivia refresh failed:",
  "ðŸ”„ Refreshing series organizer",
  "âœ… Series organizer refresh completed",
  "âŒ Series organizer refresh failed:",
  "ðŸ”„ Refreshing upcoming episodes content",
  "ðŸ”„ Refreshing daily countdown",
  "ðŸ”„ Refreshing FlickWord stats",
  "ðŸ”„ Refreshing spotlight content",
  "ðŸ”„ Search results visible, re-performing search in new language",
  "ðŸ—‘ï¸ Clearing search cache for language change",
  "ðŸ” Re-performing search with query:",
  ">\r\n          <p>${t(",
  ", lang)}</p>\r\n          <p>${t(",
  ", lang)}</p>\r\n        </div>",
  "âŒ Observer callback failed:",
  "ðŸŒ Re-initializing LanguageManager after appData load",
  "ðŸŒ Language changed from",
  ";\r\n    let message = t(",
  ", lang);\r\n\r\n    // Replace placeholder if it exists\r\n    if (message && message.includes(",
  ")) {\r\n      message = message.replace(",
  ", langName);\r\n    } else {\r\n      message = ",
  ";\r\n    }\r\n\r\n    if (typeof window.showNotification === ",
  ") {\r\n      window.showNotification(message, ",
  ");\r\n    } else {\r\n      console.log(",
  "ðŸŒ Language Manager loaded",
  "#appRoot > #search-container.top-search, #appRoot > .top-search",
  ");\r\n    } else {\r\n      root.classList.remove(",
  ");\r\n      root.style.removeProperty(",
  ");\r\n    }\r\n  }\r\n\r\n  document.addEventListener(",
  ", apply);\r\n  window.addEventListener(",
  ", apply);\r\n\r\n  /* If app code toggles the search region, emit one of these events */\r\n  for (const eventName of [",
  "ðŸ”§ Layout Enhancements loaded",
  ".skeleton-content, .skeleton-poster, .skeleton-text, .skeleton-button",
  ">\r\n              <div class=",
  "></div>\r\n              <div class=",
  "></div>\r\n            </div>\r\n          ",
  "></div>\r\n          ",
  ".preview-row-scroll",
  ".show-poster, .poster-placeholder, .preview-card-poster img",
  "2 / 3",
  ".skip-link",
  "s not visible\r\n        target.scrollIntoView({ behavior: ",
  ", block: ",
  "Skipped to ${target.getAttribute(",
  ") || target.textContent || ",
  "ðŸ”§ Initializing layout enhancements...",
  "âœ… Layout enhancements initialized",
  "s a card that needs skeleton loading\r\n              if (node.classList && node.classList.contains(",
  ")) {\r\n                // Show skeleton while content loads\r\n                SkeletonManager.showSkeleton(node, ",
  "#homeSection, .list-container, .preview-row-scroll, .tab-section",
  "quips fetch failed: ${res.status}",
  "bad quips payload",
  "no usable quips",
  ") || document.querySelector(",
  ");\r\n    if (el) {\r\n      el.removeAttribute(",
  "); // prevent i18n from stomping\r\n      el.dataset.role = el.dataset.role || ",
  ";\r\n      el.classList.add(",
  ".marquee-container, .marquee, .home-group, main, body",
  "12s, 12s",
  ")[0].trim();\r\n    if (first.endsWith(",
  ")) return parseFloat(first);\r\n    if (first.endsWith(",
  ",\r\n      ",
  ",\r\n    ];\r\n\r\n    return container.querySelectorAll(focusableSelectors.join(",
  "ðŸ”’ [MODAL] Closing modal:",
  "ðŸ”’ [MODAL] Focus restored to:",
  "âŒ [MODAL] Modal not found:",
  "ðŸ”’ [MODAL] Opening modal:",
  "[MODAL] isOpen(${modalId}): false - no active modal",
  "[MODAL] isOpen(${modalId}): false - no modal element",
  "s not aria-hidden and has a visible display style\r\n      const isAriaHidden = modalElement.getAttribute(",
  ";\r\n      const hasVisibleDisplay =\r\n        modalElement.style.display === ",
  " || modalElement.style.display === ",
  ";\r\n\r\n      const isOpen = !isAriaHidden && hasVisibleDisplay;\r\n      console.log(",
  "[MODAL] Force closing modal: ${modalId}",
  "âœ… [MODAL] Modal utility loaded",
  "ðŸ“º Episode Guide Modal loaded",
  "s a TV show\r\n    if (item.media_type !== ",
  " && !item.first_air_date) {\r\n      showToast(",
  "Not Available",
  "Episode guide is only available for TV shows",
  "modal modal--episode-guide",
  "Unknown Show",
  ">\r\n        <h3 class=",
  ">Episode Guide - ${showTitle}</h3>\r\n        <button class=",
  ">Ã—</button>\r\n      </div>\r\n      <div class=",
  ">\r\n          <div class=",
  ">\r\n            <label for=",
  ">Season:</label>\r\n            <select id=",
  ">\r\n              <option value=",
  ">Loading seasons...</option>\r\n            </select>\r\n          </div>\r\n          <div class=",
  ">Loading episodes...</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=",
  ">\r\n        <button class=",
  ">Cancel</button>\r\n        <button class=",
  ">Save Progress</button>\r\n      </div>\r\n    ",
  ".modal__cancel",
  "Progress Saved",
  "Your episode progress has been saved",
  ");\r\n\r\n      if (!showData || !showData.id) {\r\n        throw new Error(",
  "<option value=",
  ">Select a season...</option>",
  "Season ${season.season_number}",
  ";\r\n          await loadEpisodesForSeason(showId, ",
  ", episodeList);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(",
  ", error);\r\n      episodeList.innerHTML =\r\n        ",
  ">Loading episodes...</div>",
  "Failed to load episodes",
  ">No episodes found for this season.</div>",
  ">S${seasonNumber}E${episode.episode_number}</div>\r\n            <div class=",
  ">${episode.name || ",
  "}</div>\r\n            <div class=",
  ">${airDate}</div>\r\n            <div class=",
  ">${episode.vote_average ? ",
  "}</div>\r\n            <label class=",
  ">\r\n              <input type=",
  " ${isWatched ? ",
  "} data-episode=",
  ">\r\n              <span class=",
  ">Watched</span>\r\n            </label>\r\n          </div>\r\n        ",
  ");\r\n      checkboxes.forEach((checkbox) => {\r\n        checkbox.addEventListener(",
  ".episode-guide__episode",
  "Failed to load episodes:",
  ">Failed to load episodes. Please try again.</div>",
  "Failed to load user progress:",
  "Failed to save user progress:",
  "Toast [${type}]: ${title} - ${message}",
  "âœ… Episode Guide Modal ready",
  "ðŸ“ Notes Modal loaded",
  "modal modal--notes",
  ">Notes for ${itemTitle}</h3>\r\n        <button class=",
  ">\r\n          <label for=",
  ">Your notes:</label>\r\n          <textarea \r\n            id=",
  " \r\n            class=",
  " \r\n            placeholder=",
  "\r\n            rows=",
  "\r\n          >${existingNotes}</textarea>\r\n          <div class=",
  ">0</span> characters\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=",
  ">Save Notes</button>\r\n      </div>\r\n    ",
  "Save Notes",
  "Clear Notes",
  "No Changes",
  "Notes saved for ${itemTitle}",
  "Notes Cleared",
  "Notes cleared for ${itemTitle}",
  ";\r\n    } catch (error) {\r\n      console.error(",
  ", error);\r\n      return ",
  ");\r\n\r\n    cards.forEach((card) => {\r\n      let indicator = card.querySelector(",
  ");\r\n\r\n      if (hasNotes && !indicator) {\r\n        // Add indicator\r\n        indicator = document.createElement(",
  ");\r\n        indicator.className = ",
  ";\r\n        indicator.title = ",
  ";\r\n        indicator.textContent = ",
  ";\r\n\r\n        const poster = card.querySelector(",
  "âœ… Notes Modal ready",
  "], nav[role=",
  ");\r\n  if (!bar) {\r\n    console.warn(",
  ");\r\n    return;\r\n  }\r\n\r\n  // Discover panels by ID; adjust list only if needed\r\n  const panelIds = [",
  "),\r\n    ...document.querySelectorAll(",
  ")\r\n  ].filter(t => {\r\n    const isDisabled = t.getAttribute(",
  ";\r\n    const hasPanel = panels.has(t.getAttribute(",
  "));\r\n    return !isDisabled && hasPanel;\r\n  });\r\n  console.log(",
  ", allTabs.map(t => ({\r\n    id: t.id,\r\n    ariaControls: t.getAttribute(",
  "),\r\n    ariaDisabled: t.getAttribute(",
  "),\r\n    ariaSelected: t.getAttribute(",
  "),\r\n    hasPanel: panels.has(t.getAttribute(",
  "))\r\n  })));\r\n  \r\n  // Debug: Check if settings tab exists in DOM\r\n  const settingsTab = document.getElementById(",
  ");\r\n  console.log(",
  ", {\r\n    exists: !!settingsTab,\r\n    role: settingsTab?.getAttribute(",
  "),\r\n    ariaDisabled: settingsTab?.getAttribute(",
  "),\r\n    ariaControls: settingsTab?.getAttribute(",
  ")];\r\n  console.log(",
  ", allTabsInBar.map(t => ({\r\n    id: t.id,\r\n    role: t.getAttribute(",
  "),\r\n    ariaControls: t.getAttribute(",
  ")\r\n  })));\r\n  \r\n  const tabs = allTabs.filter(t => panels.has(t.getAttribute(",
  ")));\r\n  \r\n  // Debug: Log filtered tabs\r\n  console.log(",
  ", tabs.map(t => ({\r\n    id: t.id,\r\n    ariaControls: t.getAttribute(",
  ".fab-dock",
  "[nav-init] Refreshing tab discovery after authentication...",
  "[nav-init] Settings tab during refresh:",
  ")];\r\n    console.log(",
  ", allTabsInBarRefresh.map(t => ({\r\n      id: t.id,\r\n      role: t.getAttribute(",
  "),\r\n      ariaDisabled: t.getAttribute(",
  "),\r\n      ariaControls: t.getAttribute(",
  ")\r\n    })));\r\n    \r\n    const newTabs = [\r\n      ...bar.querySelectorAll(",
  "),\r\n      ...document.querySelectorAll(",
  ")\r\n    ].filter(t => {\r\n      const isDisabled = t.getAttribute(",
  ";\r\n      const hasPanel = panels.has(t.getAttribute(",
  "));\r\n      return !isDisabled && hasPanel;\r\n    });\r\n    console.log(",
  ", newTabs.map(t => ({\r\n      id: t.id,\r\n      ariaControls: t.getAttribute(",
  "),\r\n      ariaSelected: t.getAttribute(",
  "[nav-init] Tab discovery refreshed. Total tabs:",
  ".tab-label",
  ".badge",
  ");\r\n    const activePanel = document.querySelector(",
  "[nav-init] State mismatch:",
  ")];\r\n    const panels = tabs.map(t => document.getElementById(t.getAttribute(",
  "))).filter(Boolean);\r\n    \r\n    const selectedTabs = tabs.filter(t => t.getAttribute(",
  "Exactly one tab should be selected, found:",
  "Exactly one panel should be visible, found:",
  "[nav-init] Tab state assertion failed:",
  "FAB X position changed:",
  ", lastX);\r\n        console.assert(rect.y.toString() === lastY, ",
  ", rect.y, ",
  ");\r\n    if (currentActive && currentActive.getAttribute(",
  ") === id) {\r\n      console.log(",
  ", id);\r\n      return;\r\n    }\r\n\r\n    console.log(",
  ", id);\r\n    console.log(",
  ", Array.from(panels.keys()));\r\n    console.log(",
  ", tabs.map(t => t.getAttribute(",
  ";\r\n      } else {\r\n        console.warn(",
  "[nav-init] Unknown tab ID:",
  ").trim();\r\n    document.body.classList.add(",
  ");\r\n\r\n    // Handle search visibility based on tab policy\r\n    const searchAllowedTabs = [",
  "[nav-init] Loading content for tab:",
  "[nav-init] Tab activation completed in ${(endTime - startTime).toFixed(2)}ms",
  "[nav-init] Activated initial tab:",
  "[nav-init] Activated fallback tab:",
  ")) {\r\n      return; // Don",
  ");\r\n    if (!tab) return;\r\n\r\n    ev.preventDefault();\r\n    const id = tab.getAttribute(",
  ");\r\n    if (panels.has(id)) {\r\n      activate(id);\r\n      console.log(",
  ", id);\r\n    }\r\n  }, { capture: true });\r\n\r\n  // Arrow navigation for accessibility\r\n  bar.addEventListener(",
  ", ev => {\r\n    const tab = ev.target.closest(",
  ");\r\n    if (!tab) return;\r\n\r\n    const enabledTabs = [...bar.querySelectorAll(",
  ")];\r\n    const i = enabledTabs.indexOf(tab);\r\n    if (ev.key === ",
  "[nav-init] Tab navigation initialized with",
  "s the primary system\r\nif (document.readyState === ",
  "[nav-init] Legacy systems neutered, initializing primary tab engine",
  "Initializing notification system...",
  "Notification system initialized",
  "Showing notification:",
  "notification ${type}",
  ">\r\n          <span class=",
  ">${icon}</span>\r\n          <span class=",
  ">${this._escapeHtml(message)}</span>\r\n          <button class=",
  ">&times;</button>\r\n        </div>\r\n      ",
  ",\r\n        error: ",
  ",\r\n        warning: ",
  ",\r\n        info: ",
  "Notification system loaded",
  "\r\n    <div class=",
  ">\r\n      <img class=",
  ">\r\n    </div>\r\n    <div class=",
  ">\r\n      <div class=",
  ">${escapeHtml(item.title || item.name || ",
  ")}</div>\r\n      <div class=",
  ">Want to Watch</button>\r\n        <button class=",
  ">Watched</button>\r\n        <button class=",
  ">Not Interested</button>\r\n        <button class=",
  ">Delete</button>\r\n      </div>\r\n    </div>\r\n  ",
  ".poster-wrap",
  ".btn-want",
  "[cw-card] want",
  ".btn-watched",
  "[cw-card] watched",
  ".btn-notint",
  "[cw-card] not-interested",
  ".btn-delete",
  "[cw-card] delete",
  ",\r\n      title: show.title || show.name || ",
  ",\r\n      poster: show.posterUrl || (show.poster_path ? ",
  "),\r\n      releaseDate: show.release_date || show.first_air_date || ",
  ",\r\n      genre: (show.genres && show.genres[0]?.name) || ",
  ",\r\n      seasonEpisode: calcSxxExx(show) || ",
  ",\r\n      nextAirDate: air.date || air.label || ",
  "\r\n    };\r\n    \r\n    return window.renderCardV2(container, props, {\r\n      listType: ",
  ",\r\n      context: ",
  "\r\n    });\r\n  }\r\n\r\n  // Legacy fallback\r\n  const card = document.createElement(",
  ");\r\n  card.className = ",
  ";\r\n  card.dataset.id = show.id;\r\n\r\n  const sxxexx = calcSxxExx(show) || ",
  ";\r\n  const genre = (show.genres && show.genres[0]?.name) ? show.genres[0].name : ",
  ";\r\n\r\n  card.innerHTML = ",
  "${escapeHtml(show.title || show.name || ",
  ">${[sxxexx, genre].filter(Boolean).join(",
  ">${escapeHtml(air.label)}</div>\r\n    </div>\r\n  ",
  ",\r\n      overview: item.overview || ",
  ",\r\n      genre: item.genre || (item.genres && item.genres[0]?.name) || ",
  ",\r\n      tmdbId: item.tmdbId || item.id,\r\n      whereToWatch: item.whereToWatch || item.provider || ",
  ",\r\n      curatorBlurb: item.curatorBlurb || item.description || ",
  "\r\n    };\r\n\r\n    if (variant === ",
  ") {\r\n      props.variant = ",
  "curated-card v2 ${variant === ",
  "âœ… Card V2 curated renderer loaded",
  ",\r\n      title: item.title || item.name || ",
  ",\r\n      poster: item.poster_path ? ",
  "),\r\n      releaseDate: item.release_date || item.first_air_date || ",
  ",\r\n      seasonEpisode: item.seasonEpisode || item.sxxExx || ",
  ",\r\n      nextAirDate: item.next_episode_air_date || item.nextAirDate || item.next_air_date || ",
  ",\r\n      userRating: item.userRating || item.rating || 0,\r\n      progress: item.progress || ",
  ",\r\n      badges: item.badges || [],\r\n      whereToWatch: item.whereToWatch || ",
  "cw-card v2 ${variant === ",
  "âœ… Card V2 CW renderer loaded",
  "[card-v2] Blocked inline ${property} on Home card - use CSS instead",
  "star ${i <= rating ? ",
  ";\n      star.textContent = ",
  ";\n      star.dataset.rating = i;\n      \n      if (onRatingChange) {\n        star.addEventListener(",
  "(Your rating)",
  "badge ${badge.type || ",
  "[card-v2] formatMeta called with props:",
  "Runtime: ${props.runtime}m",
  "Next: ${props.nextAirDate}",
  " â€¢ ",
  "[card-v2] formatMeta result:",
  ";\n    \n    // Determine card type and layout based on design specs\n    const listType = options.listType || ",
  ";\n    const context = options.context || ",
  ";\n    \n    // Design specs: Home sections use vertical, tabs/search use horizontal\n    const isVertical = context === ",
  " && [",
  ");\n    \n    // Card type classes per design specs - context-aware\n    const cardType = (listType === ",
  " && context === ",
  ") ? ",
  " : \n                    (listType === ",
  " :\n                    (listType === ",
  " || listType === ",
  " :\n                    ",
  "; // fallback\n    \n    // Create card element with proper classes\n    const card = document.createElement(",
  "[card-v2] Card type selected: ${cardType}, className: ${card.className}",
  ");\n      posterLink.href = ",
  ";\n      posterLink.target = ",
  ";\n      posterLink.rel = ",
  ";\n      posterLink.title = ",
  ";\n      \n      const img = document.createElement(",
  ";\n    const year = props.releaseDate ? ",
  ";\n    title.textContent = ",
  ";\n    \n    // Create meta information (Genre â€¢ SxxExx format)\n    const meta = document.createElement(",
  ");\n    meta.className = ",
  "Up next: <date>",
  "Up next:",
  "Up next: ${props.nextAirDate}",
  "Where to Watch: ${props.whereToWatch}",
  "Progress: ${props.progress}",
  "btn btn--sm btn--secondary",
  "btn btn--sm btn--secondary btn--pro-outline",
  ";\n      dragHandle.title = ",
  ";\n      dragHandle.setAttribute(",
  ";\n    if (item.poster_path) {\n      posterUrl = ",
  "card v2 v2-home-cw preview-card",
  " with-actions",
  ">\n        <img src=",
  " loading=",
  " referrerpolicy=",
  ">\n      </div>\n      <div class=",
  ">${props.title}</h3>\n        ${props.genre ? ",
  "}\n        ${props.nextAirDate ? ",
  "}\n        ${withActions ? ",
  "${props.id}",
  "}\n      </div>\n    ",
  "ðŸŽ¯ renderCuratedCardV2: VERSION 28.500.0 - Function called with:",
  " || item.media_type === ",
  "\n      ? item.media_type\n      : ",
  "; // do NOT guess; empty string if unknown\n\n    const title = item.title || item.name || ",
  ";\n    const posterPath = item.poster_path || item.posterUrl || ",
  ";\n    const releaseDate = item.release_date || item.first_air_date || ",
  ";\n    const poster =\n      posterPath\n        ? (posterPath.startsWith(",
  ")\n            ? posterPath\n            : ",
  ")\n        : (typeof PLACEHOLDER_SVG !== ",
  " ? PLACEHOLDER_SVG : ",
  ",\n      whereToWatch: item.whereToWatch || ",
  ",\n      curatorBlurb: item.curatorBlurb || ",
  "ðŸŽ¯ renderCuratedCardV2: VERSION 28.500.0 - Setting className to: card v2 v2-home-curated curated-card",
  "card v2 v2-home-curated curated-card",
  "ðŸŽ¯ renderCuratedCardV2: VERSION 28.500.0 - Final className:",
  ".unified-card-poster, .unified-card-poster-container, a, header",
  ".ccv2-actions",
  ".actions",
  "],a.button",
  "âœ… Card V2 renderer loaded",
  "RTL Scroll Helper initialized",
  ".legacy-up, .up-arrow, .scroll-to-top, .fab .icon-up, .fab-up",
  "Scroll to top",
  ";\n  (document.getElementById(",
  ") || document.body).appendChild(btn);\n  console.log(",
  ", btn);\n\n  // Find the tablist sentinel\n  const tablist = document.querySelector(",
  "Arrow clicked, scrolling to top",
  "Initializing search module...",
  "Required search elements not found",
  "Search module initialized",
  "Event listeners attached",
  "Search button clicked",
  "Clear button clicked",
  "Enter key pressed",
  "No search query provided",
  "Same query already searching, skipping",
  "Performing search for:",
  "searchTMDB function not available",
  "Search results received:",
  "About to call displayResults with:",
  "displayResults completed successfully",
  "Search failed:",
  "Clearing search",
  ";\n    currentQuery = ",
  "Returning to previous tab: ${previousTab}",
  "\n      <div style=",
  ">\n        <div style=",
  ">ðŸ”</div>\n        <div>Searching for ",
  "...</div>\n      </div>\n    ",
  ">âŒ</div>\n        <div>Search failed: ${message}</div>\n        <button onclick=",
  ">\n          Try Again\n        </button>\n      </div>\n    ",
  "displayResults called with:",
  "ERROR: searchResults element not found",
  "Checking results structure:",
  "No results found, showing no results message",
  "Filtering results, original count:",
  "After filtering, count:",
  "All results filtered out, showing no results message",
  ";\n      const dateB = b.release_date || b.first_air_date || ",
  "Checking card rendering systems:",
  "Using Cards V2 system",
  "Using fallback system",
  "Rendering with Cards V2 system",
  "Cards V2 availability:",
  "\n      <h4>ðŸŽ¯ Search Results <span class=",
  ">${results.length}</span></h4>\n      <div class=",
  "></div>\n    ",
  "ERROR: searchResultsGrid not found!",
  "results...",
  ",\n          overview: item.overview || ",
  ",\n          badges: [{ label: ",
  ", type: ",
  " }],\n          whereToWatch: item.whereToWatch || ",
  "Enhancing search item with detailed TMDB data...",
  "Enhanced search item:",
  "Failed to enhance search item, using original data:",
  "Added card for:",
  "WARNING: renderCardV2 returned null for:",
  "Cards V2 render error:",
  "Cards V2 rendering complete. Grid children:",
  "Error creating V2 card:",
  "Rendering with fallback system",
  ";\n        const mediaType = item.media_type || ",
  ";\n        const poster = item.poster_path\n          ? ",
  ";\n\n        return ",
  "display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #eee; cursor: pointer;",
  "window.SearchModule.openItemDetails(${item.id}, ",
  ">\n          ${\n            poster\n              ? ",
  "width: 60px; height: 90px; object-fit: cover; margin-right: 15px; border-radius: 4px;",
  "flex: 1;",
  "margin: 0 0 5px 0; color: #333; font-size: 16px;",
  "}</h4>\n            <p style=",
  ">${mediaType}</p>\n          </div>\n        </div>\n      ",
  ");\n\n    searchResults.innerHTML = ",
  ">ðŸ”</div>\n        <div>No results found for ",
  "</div>\n        <div style=",
  ">Try different keywords or check your spelling</div>\n      </div>\n    ",
  "Remembered previous tab: ${previousTab}",
  "Hidden tab: ${tabId}Section",
  "Tab section not found: ${tabId}Section",
  "Home section hidden during search",
  ";\n        log(",
  ");\n      }\n    });\n\n    // Clear home section hidden attribute\n    const homeSection = document.getElementById(",
  ");\n    if (homeSection) {\n      homeSection.hidden = false;\n      log(",
  ");\n    }\n\n    log(",
  ");\n  }\n\n  // Open item details\n  function openItemDetails(id, mediaType) {\n    log(",
  ";\r\n    if (window.i18n && typeof window.i18n.setLanguage === ",
  "ui.theme",
  "app.language",
  "ui.mardiGrasOverlay",
  ");\r\n      } catch {}\r\n    });\r\n    lang.__fx = true;\r\n  }\r\n  const mg = document.querySelector(",
  ");\r\n  if (mg && !mg.__fx) {\r\n    mg.addEventListener(",
  ", () => {\r\n      document.body.classList.toggle(",
  "#settingsSection.tab-section:not([hidden])",
  ",\r\n    displayName: ",
  ",\r\n    usernamePrompted: false,\r\n    notif: {\r\n      theme: ",
  "Initializing settings manager",
  "Settings manager initialized",
  "Settings loaded from localStorage:",
  "Failed to load settings from localStorage:",
  "Settings saved to localStorage",
  "Failed to save settings to localStorage:",
  "User signed out - Pro reset to false",
  "Pro status updated from Firebase:",
  "Failed to check Pro status from Firebase:",
  "Setting changed: ${key} = ${value} (was: ${oldValue})",
  "Multiple settings updated:",
  "Emitted settings:changed event:",
  "Settings reset to defaults",
  "notif.episodes",
  "notif.digest",
  "notif.discover",
  "Settings manager module loaded",
  ";\r\n\r\n    // Focus trap\r\n    const focusables = modal.querySelectorAll(\r\n      ",
  ";\r\n    }\r\n  }\r\n\r\n  function init() {\r\n    const btn = document.getElementById(",
  ");\r\n    const close = document.getElementById(",
  ");\r\n    const modal = document.getElementById(",
  "[pro-gate] missing control",
  "Pro feature",
  "flicklet:pro.enabled",
  "[settings-bind] Missing control for selector:",
  "[settings-renderer] initSettings called",
  "[settings-renderer] schema loaded:",
  "user.displayName",
  "notif.monthlyDigest",
  "home.curatedRows",
  "home.currentlyWatchingLimit",
  "cards.episodeTracking",
  "pro.advancedNotifications",
  "pro.themePack",
  "[settings-renderer] Binding controls...",
  "[settings-renderer] Found control: ${selector} -> ${cfg.key}",
  "[settings-renderer] Set ${selector} to:",
  "[settings-renderer] Binding theme radio group...",
  "[settings-renderer] Module loaded, document.readyState:",
  "[settings-renderer] Adding DOMContentLoaded listener",
  "[settings-renderer] Error:",
  "[settings-renderer] DOM already ready, calling initSettings immediately",
  "Failed to load settings schema",
  "Invalid settings schema format",
  ");\r\n    if (!tab) {\r\n      errs.push(",
  "#${group.key}",
  "Missing group section: #${group.key} for ",
  ");\r\n    }\r\n\r\n    group.controls.forEach((control) => {\r\n      if (!control.selector) {\r\n        errs.push(",
  "Missing control element: ${control.selector} for ",
  " in ${group.title}",
  "Type mismatch for ${control.key}: expected ${expectedTag}, found ${element.tagName.toLowerCase()}",
  "[settings-selftest] ERRORS",
  "[settings-selftest] OK â€” Settings matches config",
  "[settings-selftest] failed",
  "#settingsSave",
  "#settingsCancel",
  ");\n  }\n  // theme radio group\n  const theme = STATE.draft[",
  "];\n  const radioMap = { system: ",
  ", light: ",
  ", dark: ",
  "#settingsSection input, #settingsSection select, #settingsSection textarea",
  ");\n  document.body.classList.toggle(",
  ", !!STATE.saved[",
  "Reset all settings to defaults?",
  "Value must be a number.",
  "Minimum is ${rule.validate.min}.",
  "Maximum is ${rule.validate.max}.",
  "Must be in increments of ${step}.",
  "Select a valid option.",
  ");\r\n    if (rule.validate?.maxLength && s.length > rule.validate.maxLength) {\r\n      errors.push(",
  ");\r\n    }\r\n  } else if (rule.type === ",
  "err-${el.id || Math.random().toString(36).slice(2)}",
  ";\r\n    el.removeAttribute(",
  ");\r\n    el.removeAttribute(",
  "[settings-wire] storage error:",
  "[settings-wire] ${config.key} = ${element.checked}",
  "[settings-wire] ${config.key} = ${element.value}",
  "[settings-wire] action ${config.action} not found",
  "${config.storageKey}_${cb.id}",
  "[settings-wire] ${config.key}.${cb.id} = ${cb.checked}",
  "t need binding, just validation\r\n      if (!element) {\r\n        console.warn(",
  ");\r\n      }\r\n    },\r\n  };\r\n\r\n  function bindControl(control) {\r\n    if (!control.selector) {\r\n      console.warn(",
  "[settings-wire] missing element: ${control.selector} for ${control.key}",
  "[settings-wire] unknown control type: ${control.type}",
  "[settings-wire] binding controls...",
  "[settings-wire] binding group: ${group.title}",
  "[settings-wire] binding complete",
  "[settings-wire] failed to init",
  "ðŸ”§ Syntax fix loading - providing minimal working functions",
  "âœ… All critical functions available",
  "âš ï¸ Some critical functions missing, ensuring availability",
  "âŒ tmdbGet still not available after emergency functions",
  "âŒ loadUserDataFromCloud still not available after emergency functions",
  "âŒ addToList still not available after emergency functions",
  "âŒ saveAppData still not available after emergency functions",
  " | ",
  "\r\n\r\n  const media = window.matchMedia(",
  ") {\r\n      body.classList.add(",
  ");\r\n    } else {\r\n      body.classList.remove(",
  ");\r\n    }\r\n\r\n    // If theme is ",
  "Initializing UI integration...",
  "UI integration initialized",
  "DataOperations not available",
  "NotificationSystem not available, using fallback",
  "Setting up event listeners...",
  "Event listeners setup complete",
  "Notification system connected",
  "Item added:",
  "Added to ${detail.listName}",
  "Item moved:",
  "Moved to ${detail.toList}",
  "Item removed:",
  "Operation error:",
  "Failed to add item: ${error}",
  "Failed to move item: ${error}",
  "Failed to remove item: ${error}",
  "Operation failed: ${error}",
  "[${type.toUpperCase()}] ${message}",
  "Updating UI after data changes...",
  "UI update complete",
  "UI update failed:",
  ");\r\n          if (card) {\r\n            card.remove();\r\n            log(",
  ");\r\n            \r\n            // Update results count\r\n            const resultsCount = document.getElementById(",
  ");\r\n            if (resultsCount) {\r\n              const remaining = searchRoot.querySelectorAll(",
  "Failed to remove from search results:",
  "UI integration system loaded",
  "UnifiedDataLoader: Error loading currently watching items:",
  "UnifiedDataLoader: Error loading wishlist items:",
  "UnifiedDataLoader: Error loading watched items:",
  "Unified data loader initialized",
  "Returning Series",
  "In Production",
  "Up next: ${fmt(next)}",
  "Up next: ${fmt(first.air_date)}",
  ").toLowerCase() === ",
  ";\r\n  if (ended) return { label: ",
  ", date: null, ended: true };\r\n\r\n  // 4) Unknown future; if there are past episodes, say TBA.\r\n  return { label: ",
  ", date: null, ended: false };\r\n}\r\n\r\n// helpers\r\nexport function escapeHtml(s=",
  ") {\r\n  return String(s).replace(/[&<>",
  "]/g, m => ({",
  "S${String(ne.season_number).padStart(2,",
  ")}E${String(ne.episode_number).padStart(2,",
  "S${String(best.season_number).padStart(2,",
  ")}E${String(best.episode_number).padStart(2,",
  ";\r\n  }\r\n  return ",
  ",\r\n    lang: ",
  ";\r\n  return {\r\n    id: Number(x?.id ?? 0),\r\n    media_type: isTV ? ",
  ",\r\n    title: String(x?.title || x?.name || ",
  "),\r\n    vote_average: typeof x?.vote_average === ",
  "[saveAppData] Size:",
  ");\r\n    }\r\n\r\n    localStorage.setItem(key, s);\r\n    return true;\r\n  } catch (e) {\r\n    if (e && (e.name === ",
  " || /quota/i.test(String(e)))) {\r\n      console.warn(\r\n        ",
  ",\r\n      );\r\n      __lsDisabled = true;\r\n      return false;\r\n    }\r\n    console.error(",
  "ðŸ” Loading appData from localStorage:",
  "not found",
  "ðŸ” Parsed appData:",
  "ðŸ” Final appData after load:",
  "ðŸ” No saved data found, using defaults",
  "[loadAppData] failed:",
  "[validateAppData] Invalid data structure, using defaults",
  ", lang: ",
  ", theme: ",
  "fadeOutScale 0.3s ease-in forwards",
  "ðŸ”” Notification: ${message} (${type})",
  "ðŸ”— openTMDBLink called with:",
  ";\r\n    const url = ",
  ";\r\n    console.log(",
  ", url);\r\n    window.open(url, ",
  "âŒ openTMDBLink error:",
  ";\r\n  const inMovies = [",
  "Home frame verification initialized",
  "Panel gutter verification initialized",
  "Rail normalization verification initialized",
  ") {\r\n    if (!element) {\r\n      FlickletDebug.warn(",
  ";\r\n          break;\r\n\r\n        case VISIBILITY_STATES.HIDDEN:\r\n          element.style.visibility = ",
  ";\r\n          element.style.opacity = ",
  ";\r\n          // Don",
  ";\r\n          break;\r\n\r\n        case VISIBILITY_STATES.INLINE:\r\n          element.style.display = ",
  ";\r\n          element.style.visibility = ",
  ";\r\n          break;\r\n\r\n        case VISIBILITY_STATES.INLINE_BLOCK:\r\n          element.style.display = ",
  ";\r\n          break;\r\n\r\n        default:\r\n          FlickletDebug.warn(",
  "ðŸ‘ï¸ Visibility changed: ${element.id || element} -> ${state} (${context})",
  "Visibility change for ${element.id || element}",
  ") {\r\n    const homeSections = window.HomeSectionsConfig.getSections(",
  ");\r\n    const sectionElements = window.HomeSectionsConfig.getSectionElements(",
  "Home section not found: ${sectionId}",
  ") {\r\n    const searchSections = window.HomeSectionsConfig.getSections(",
  "ðŸ—‘ï¸ Visibility history cleared",
  "ðŸ‘ï¸ Visibility Manager system initialized",
  "Initializing WatchlistsAdapter v2...",
  "Data migration failed:",
  "No user authenticated, loading from local data",
  "WatchlistsAdapter v2 initialized",
  "Using cached data for uid:",
  "Load failed:",
  "Using Firebase watchlists structure",
  "Using Firebase old structure, migrating...",
  "Firebase load failed, falling back to local data:",
  "Using local appData fallback",
  "Local data loaded:",
  "No cache available for addItem",
  ", listName, ",
  "Operation failed:",
  "),\n        wishlist: this._getItemsForList(",
  "),\n        watched: this._getItemsForList(",
  "Dispatched data change events after appData update",
  "Failed to dispatch data change events:",
  "Found item data for ID ${id} in cache:",
  "re searching through\n        log(",
  "Found item data for ID ${id} in appData:",
  ")\n          };\n        }\n        \n        log(",
  ");\n        return null;\n      } catch (error) {\n        err(",
  ")\n        };\n        \n        log(",
  ", id, ",
  ", itemData.title || itemData.name || ",
  ");\n      } catch (error) {\n        err(",
  ", error.message);\n      }\n    },\n\n    /**\n     * Invalidate cache\n     */\n    invalidate() {\n      log(",
  "WatchlistsAdapter v2 loaded",
  "ðŸ§ª [FIREBASE TEST CARDS] Adding test cards to Firebase...",
  "ðŸ§ª [FIREBASE TEST CARDS] Starting Firebase test data addition...",
  "ðŸ§ª [FIREBASE TEST CARDS] User not authenticated, cannot add to Firebase",
  "ðŸ§ª [FIREBASE TEST CARDS] User authenticated:",
  "Test Show ${i + 1}",
  ",\r\n            poster_path: ",
  ",\r\n            vote_average: 8.5,\r\n            overview: ",
  ",\r\n            first_air_date: ",
  "ðŸ§ª [FIREBASE TEST CARDS] âœ… Added 12 test shows to Firebase",
  "ðŸ§ª [FIREBASE TEST CARDS] Test shows:",
  "ðŸ§ª [FIREBASE TEST CARDS] âœ… Updated local storage",
  "ðŸ§ª [FIREBASE TEST CARDS] Triggering HomeClean refresh...",
  "ðŸ§ª [FIREBASE TEST CARDS] Reloading page...",
  "ðŸ§ª [FIREBASE TEST CARDS] Error:",
  "ðŸ§ª [FIREBASE TEST CARDS] Use addTestCardsToFirebase() to add test data to Firebase",
  "ðŸ§ª [TEST CARDS] Manual script loaded",
  "ðŸ§ª [TEST CARDS] Manual trigger - adding 12 test cards",
  ",\r\n        poster_path: ",
  ",\r\n        vote_average: 8.5,\r\n        overview: ",
  ",\r\n        first_air_date: ",
  "ðŸ§ª [TEST CARDS] Added 12 test shows:",
  "ðŸ§ª [TEST CARDS] Triggering HomeClean refresh...",
  "ðŸ§ª [TEST CARDS] Reloading page...",
  "ðŸ§ª [TEST CARDS] Use addTestCards() to add test data",
  "ðŸ§ª [TEST CARDS] Adding test cards to Currently Watching...",
  "ðŸ§ª [TEST CARDS] appData not available, waiting...",
  " },\r\n            { id: 1002, title: ",
  " },\r\n            { id: 1003, title: ",
  " },\r\n            { id: 1004, title: ",
  " },\r\n            { id: 1005, title: ",
  " },\r\n            { id: 1006, title: ",
  " },\r\n            { id: 1007, title: ",
  " },\r\n            { id: 1008, title: ",
  " },\r\n            { id: 1009, title: ",
  " },\r\n            { id: 1010, title: ",
  " },\r\n            { id: 1011, title: ",
  " },\r\n            { id: 1012, title: ",
  "/placeholder-poster.jpg",
  "Test show: ${show.title}",
  "ðŸ§ª [TEST CARDS] Added ${testShows.length} test shows to Currently Watching",
  "ðŸ§ª [TEST CARDS] Test shows:",
  "ðŸ§ª [TEST CARDS] Saved to localStorage",
  "ðŸ§ª [TEST CARDS] HomeClean not available, page refresh needed",
  "ðŸ“Š Analytics module loaded",
  "ðŸ“Š Analytics: ${event}",
  "âŒ Analytics tracking failed:",
  "ðŸ›¡ï¸ Anti-Jump: Initializing simplified scroll prevention",
  " || location.pathname === ",
  ")) {\r\n    const allowed = new Set([",
  "ðŸ›¡ï¸ Anti-Jump: Removing hash",
  "to prevent auto-scroll",
  ", location.pathname);\r\n      } catch (e) {\r\n        console.warn(",
  ", e);\r\n      }\r\n    }\r\n\r\n    // Force scroll to top immediately\r\n    console.log(",
  ");\r\n    try {\r\n      window.scrollTo(0, 0);\r\n    } catch (e) {\r\n      console.warn(",
  ", e);\r\n    }\r\n  }\r\n\r\n  // 2) Remove autofocus (common scroll cause)\r\n  document.addEventListener(",
  ", () => {\r\n    const autofocusElements = document.querySelectorAll(",
  ");\r\n    if (autofocusElements.length > 0) {\r\n      console.log(",
  ", autofocusElements.length, ",
  ");\r\n      autofocusElements.forEach((n) => n.removeAttribute(",
  "ðŸ›¡ï¸ Anti-Jump: Forced scroll to top (0, 0)",
  "ðŸ›¡ï¸ Anti-Jump: Could not scroll to top:",
  "ðŸ›¡ï¸ Anti-Jump: Prevented scroll event during initial load",
  "ðŸ›¡ï¸ Anti-Jump: First frame complete, forcing scroll to top",
  "ðŸ›¡ï¸ Anti-Jump: Correcting scroll position after delay, was at",
  "ðŸ›¡ï¸ Anti-Jump: Final correction after load, was at",
  "ðŸ›¡ï¸ Anti-Jump: Released scroll prevention after load",
  "ðŸ›¡ï¸ Anti-Jump: Simplified guard initialized",
  "ðŸŽ¬ Content API presets loaded",
  "rows.trending",
  "rows.anime",
  "rows.horror",
  "rows.staff_picks",
  "ðŸŽ¬ Fetching trending content, page:",
  "[content] tmdbGet failed for trending",
  "ðŸŽ¬ Fetching ${genreName} content, page:",
  "[content] Genre not found via API or fallback:",
  "popularity.desc",
  "[content] tmdbGet failed for genre",
  "[content] Genre not found:",
  "ðŸŽ¬ Fetching staff picks, page:",
  "t paginate much\r\n      };\r\n    } catch (error) {\r\n      console.warn(",
  "ðŸŽŒ Fetching anime content, page:",
  ").toLowerCase();\r\n        const overview = (item.overview || ",
  "ðŸŽŒ Filtered ${animeResults.length} anime items from ${animatedContent.results.length} animated items",
  "[content] tmdbGet failed for anime",
  ") ||\r\n      document.querySelector(",
  ".modal",
  ");\r\n      el.style.marginTop = ",
  ";\r\n      el.style.color = ",
  ";\r\n      modal.querySelector(",
  ")?.insertAdjacentElement(",
  "Firebase not properly initialized. Please refresh the page and try again.",
  "âŒ Firebase check failed:",
  "Authentication system is not ready. Please refresh the page.",
  "Something went wrong.",
  "ðŸ” Error message set:",
  "âŒ Could not find error message element",
  "ðŸ” Error (no UI element available):",
  "ðŸšª closeAuthModal called",
  "ðŸšª Closing injected signInModal",
  "ðŸšª Closing auth modal via global handle",
  ", authModals.length);\r\n    authModals.forEach((modal) => {\r\n      console.log(",
  "ðŸ” loginWithGoogle called",
  "ðŸ” Checking Firebase...",
  "ðŸ” Firebase OK, creating provider...",
  "ðŸ” Calling signInWithPopup...",
  "ðŸ” Login successful!",
  "); // clear\r\n      closeAuthModal();\r\n\r\n      // Update account button immediately\r\n      console.log(",
  ";\r\n        const accountButtonLabel = accountBtn.querySelector(",
  "Signed in as ${result.user.email}. Click to sign out.",
  "ðŸ” Updated account button directly with user data:",
  "ðŸ” Updating account button after Google sign-in (delayed)",
  "Signed in successfully!",
  "Signed in successfully",
  "[auth] DEPRECATED: Username prompt trigger - handled by app layer",
  "[auth] google login failed",
  "Google sign-in failed. ",
  "Please try again and complete the sign-in process.",
  "Please allow popups for this site and try again.",
  "Network error. Please check your connection and try again.",
  "Too many failed attempts. Please try again later.",
  "Google sign-in is not enabled. Please contact support.",
  "Please try again.",
  "ðŸ”’ Google",
  "apple.com",
  "ðŸŽ Apple login successful!",
  "ðŸ” Updating account button after Apple sign-in",
  "[auth] apple login failed",
  "Apple sign-in failed. ",
  "ðŸŽ Apple",
  ").trim();\r\n      const pass = (modal?.querySelector(",
  ")?.value || ",
  ").trim();\r\n\r\n      if (!email || !pass) {\r\n        showInlineError(",
  ");\r\n        return;\r\n      }\r\n\r\n      if (!email.includes(",
  ")) {\r\n        showInlineError(",
  ");\r\n        return;\r\n      }\r\n\r\n      if (pass.length < 6) {\r\n        showInlineError(",
  "âœ‰ï¸ Email login successful!",
  "ðŸ” Updating account button after Email sign-in",
  "[auth] email login failed",
  "Email sign-in failed. ",
  "No account found with this email. Please check your email or create a new account.",
  "Incorrect password. Please try again.",
  "Please enter a valid email address.",
  "âœ‰ï¸ Email",
  "t blocked\r\n    const tpl = document.createElement(",
  ");\r\n    tpl.id = ",
  ";\r\n    tpl.setAttribute(",
  ");\r\n    tpl.setAttribute(",
  "></div>\r\n      <div class=",
  ">\r\n        <h2 id=",
  ">Sign in to sync</h2>\r\n        <p style=",
  ">Continue to Flicklet</p>\r\n        <div style=",
  ">\r\n          <button id=",
  ">ðŸ”’ Google</button>\r\n          <button id=",
  ">ðŸŽ Apple</button>\r\n          <button id=",
  ">âœ‰ï¸ Email</button>\r\n        </div>\r\n        <div style=",
  ">\r\n          <button type=",
  ">Cancel</button>\r\n        </div>\r\n      </div>\r\n    ",
  "ðŸ” Google sign-in button clicked in injected modal",
  "ðŸŽ Apple sign-in button clicked in injected modal",
  "âœ‰ï¸ Email sign-in button clicked in injected modal",
  "showSignInModal: no modal",
  ");\r\n    m.setAttribute(",
  "[auth] FlickletAuth.loginWithGoogle() â†’ delegating to AuthManager",
  "[auth] AuthManager not available",
  "[auth] FlickletAuth.loginWithApple() â†’ delegating to AuthManager",
  "[auth] FlickletAuth.loginWithEmail() â†’ delegating to AuthManager",
  "[auth] FlickletAuth.showInlineError() â†’ delegating to AuthManager",
  "âœ… Firebase initialized (local):",
  "âœ… Firebase v9 ESM initialized (local):",
  "âŒ Firebase initialization error:",
  "ðŸ”˜ [BUTTON TEST] Starting button visibility test...",
  "ðŸ”˜ [BUTTON TEST] âŒ No clean-root found",
  "ðŸ”˜ [BUTTON TEST] âœ… Found clean-root",
  "ðŸ”˜ [BUTTON TEST] Found cards:",
  "ðŸ”˜ [BUTTON TEST] âŒ No cards found",
  "ðŸ”˜ [BUTTON TEST] Checking card ${index + 1}:",
  "ðŸ”˜ [BUTTON TEST] Card class: ${card.className}",
  ".cw-actions",
  ".fy-actions",
  ".action-btn",
  ".cta-btn",
  "ðŸ”˜ [BUTTON TEST] Card ${index + 1} elements:",
  "ðŸ”˜ [BUTTON TEST] CW Actions styles:",
  "2px solid green",
  "rgba(0,255,0,0.1)",
  "ðŸ”˜ [BUTTON TEST] FY Actions styles:",
  "ðŸ”˜ [BUTTON TEST] Action button ${btnIndex + 1} styles:",
  "2px solid orange",
  "rgba(255,165,0,0.3)",
  "ðŸ”˜ [BUTTON TEST] CTA button ${btnIndex + 1} styles:",
  ".card-content",
  "ðŸ”˜ [BUTTON TEST] Card ${index + 1} content children:",
  "ðŸ”˜ [BUTTON TEST] Child ${childIndex + 1}: ${child.tagName} - ${child.className}",
  "âš ï¸ Centralized add handler already initialized, skipping",
  "âœ… Initializing centralized add handler",
  "â­ï¸ Add operation suppressed (duplicate within 500ms)",
  "âŒ Add button missing required attributes",
  ") {\r\n      console.debug(",
  ");\r\n      return;\r\n    }\r\n\r\n    // Set busy flag\r\n    btn.dataset.busy = ",
  "âž• Centralized add handler processing",
  "âŒ addToListFromCache function not available",
  "Add function not available",
  "âŒ Add operation failed",
  "âœ… Centralized add handler attached",
  "ðŸŽ® Community Games component loaded",
  ");\r\n    let value = window.i18n;\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (value && typeof value === ",
  " aria-hidden=",
  ">${title}</div>\r\n        <div class=",
  ">${subtitle}</div>\r\n      </div>\r\n    ",
  "ðŸš« Community Games disabled by feature flag, showing placeholder",
  "âœ… Rendering Community Games",
  "games.trivia_title",
  "games.trivia_sub",
  "games.flickword_title",
  "games.flickword_sub",
  ">${stats.streak || 0}</div>\r\n          <div class=",
  ")}</div>\r\n        </div>\r\n        <div class=",
  ">${stats.totalAnswered || 0}</div>\r\n          <div class=",
  ">${stats.bestScore || ",
  "}</div>\r\n          <div class=",
  ")}</div>\r\n        </div>\r\n        <button class=",
  ")}</button>\r\n      ",
  ".teaser__cta",
  "ðŸ”§ Community Final Verification Starting...",
  "=== i18n Translation Test ===",
  ".game-tile",
  "games.",
  "âœ… Tiles show localized text:",
  ".game-tile__title",
  ".game-tile__sub",
  "  - Tile ${index + 1}: ",
  " - ",
  ");\r\n    });\r\n  }\r\n\r\n  // Test 2: Data-Action Registration Fix\r\n  console.log(",
  ");\r\n\r\n  // Check if tiles have correct data-action values\r\n  const triviaTile = document.querySelector(",
  ");\r\n  const flickwordTile = document.querySelector(",
  ");\r\n\r\n  console.log(",
  ", !!triviaTile ? ",
  ", !!flickwordTile ? ",
  ");\r\n\r\n  // Test clicking tiles to see if they trigger router navigation\r\n  if (triviaTile) {\r\n    console.log(",
  "Navigating to",
  "Handling game route",
  "âœ… Trivia click triggers navigation:",
  "=== Router Integration Test ===",
  "âœ… Router available:",
  "  - Testing direct router navigation...",
  "âœ… Trivia route handled:",
  "âŒ Trivia route failed:",
  "âœ… FlickWord route handled:",
  "âŒ FlickWord route failed:",
  "=== Modal Functionality Test ===",
  "âœ… Modal function available:",
  "  - Testing modal creation...",
  ".modal.games-teaser",
  "âœ… Modal created:",
  ")?.textContent;\r\n        const modalBody = modal.querySelector(",
  ")?.textContent;\r\n        const modalButtons = modal.querySelectorAll(",
  ");\r\n\r\n        console.log(",
  ", modalTitle);\r\n        console.log(",
  ", modalBody);\r\n        console.log(",
  "âœ… Modal shows localized text:",
  "âŒ Modal creation failed:",
  "=== Console Cleanliness Test ===",
  "Unknown data-action",
  "âœ… No ",
  " warnings:",
  "ðŸŽ¯ Overall result:",
  "âœ… ALL FIXES WORKING",
  "âŒ SOME ISSUES REMAIN",
  "ðŸ”§ Debug info:",
  "- Localized text:",
  "- Data-actions registered:",
  "- Router available:",
  "- Modal available:",
  "- No warnings:",
  "ðŸ§ª Manual verification steps:",
  "  1. Check tiles show ",
  " and ",
  " (not keys)",
  "  2. Click tiles - should navigate without ",
  " warnings",
  "  3. Modal should open with proper localized text",
  "  4. Console should show ",
  " not ",
  "ðŸŽ¬ Initializing community player placeholder...",
  "ðŸŽ¬ Creating community player placeholder...",
  ";\r\n\r\n    // Add loading animation\r\n    const loadingSpinner = document.createElement(",
  ");\r\n    loadingSpinner.className = ",
  ";\r\n\r\n    // Add CSS animation\r\n    if (!document.getElementById(",
  ")) {\r\n      const style = document.createElement(",
  ");\r\n      style.id = ",
  ";\r\n      style.textContent = ",
  ";\r\n      document.head.appendChild(style);\r\n    }\r\n\r\n    placeholder.innerHTML = ",
  "margin: 0 0 8px 0; color: var(--color-text, #333); font-size: 20px; font-weight: 600;",
  "margin: 0 0 16px 0; color: var(--color-text-secondary, #666); font-size: 16px;",
  "ðŸŽ¬ Load guard attempt ${loadAttempts}/${maxAttempts}",
  "ðŸŽ¬ Community player load guard triggered - max attempts reached",
  "0.5",
  ".coming-soon-text",
  "Unable to load community player. Please try again later.",
  "var(--color-error, #dc3545)",
  "ðŸŽ¬ Initializing community player...",
  "ðŸŽ¬ Community content area not found",
  "ðŸŽ¬ Community left column not found",
  "ðŸŽ¬ Community player placeholder added",
  "ðŸŽ¬ Community player disabled by feature flag",
  "ðŸŽ¬ Community content not found",
  "ðŸŽ¬ Community player not needed",
  "ðŸŽ¬ Community player system initialized",
  "ðŸŽ¬ Community Spotlight disabled by feature flag",
  "ðŸŽ¬ Community Spotlight row not found",
  "ðŸŽ¬ Initializing Community Spotlight...",
  "âœ… Community Spotlight initialized",
  "âŒ Community Spotlight initialization failed:",
  "ðŸŽ¬ Picking Community Spotlight content...",
  "ðŸŽ¬ Using community content:",
  "ðŸŽ¬ Community fetch failed:",
  "ðŸŽ¬ Using influencer content:",
  "ðŸŽ¬ Influencer fetch failed:",
  "ðŸŽ¬ Using TMDB content:",
  "ðŸŽ¬ TMDB fetch failed:",
  "ðŸŽ¬ Using house fallback content",
  "ðŸŽ¬ Rendering spotlight:",
  ".spotlight-video",
  ".spotlight-info",
  "âŒ Spotlight DOM elements not found",
  ";\r\n      iframe.allow =\r\n        ",
  ";\r\n      iframe.allowFullscreen = true;\r\n      iframe.sandbox = ",
  ";\r\n      iframe.referrerPolicy = ",
  ";\r\n\r\n      videoEl.innerHTML = ",
  ";\r\n      img.src = item.thumbnailUrl || ",
  ";\r\n      img.loading = ",
  ";\r\n      videoEl.appendChild(img);\r\n    }\r\n\r\n    // Render info content\r\n    const titleEl = infoEl.querySelector(",
  ");\r\n    const creditEl = infoEl.querySelector(",
  ");\r\n    const descEl = infoEl.querySelector(",
  ");\r\n    const badgesEl = infoEl.querySelector(",
  ");\r\n\r\n    if (titleEl) titleEl.textContent = item.title || ",
  ";\r\n    if (creditEl) creditEl.textContent = item.credit || ",
  ";\r\n    if (descEl) descEl.textContent = item.description || ",
  ";\r\n\r\n    // Render badges\r\n    if (badgesEl) {\r\n      badgesEl.innerHTML = ",
  ";\r\n      (item.badges || []).forEach((badge) => {\r\n        const span = document.createElement(",
  ");\r\n        span.className = ",
  "Submit Your Video",
  ",\r\n            ",
  "Community Content",
  "Featured community content",
  "Influencer Content",
  "Featured influencer content",
  "TMDB Content",
  "Official trailer/teaser",
  "Flicklet Community Spotlight",
  "Submit your clip to be featured here. Pro program pending approval.",
  "/img/spotlight-fallback-16x9.svg",
  "ðŸŽ¬ fetchApprovedCommunitySpotlight not implemented yet",
  "ðŸŽ¬ fetchWhitelistedInfluencerSpotlight not implemented yet",
  "ðŸŽ¬ Fetching TMDB trending content...",
  "ðŸŽ¬ TMDB API key not available",
  "${window.TMDB_CONFIG.baseUrl}/trending/movie/day?api_key=${window.TMDB_CONFIG.apiKey[REDACTED],
  "${window.TMDB_CONFIG.baseUrl}/trending/tv/day?api_key=${window.TMDB_CONFIG.apiKey[REDACTED],
  "TMDB API error: ${moviesResponse.status} / ${tvResponse.status}",
  "ðŸŽ¬ Found ${allTrending.length} trending items",
  "${window.TMDB_CONFIG.baseUrl}/${item.media_type || ",
  "}/${item.id}/videos?api_key=${window.TMDB_CONFIG.apiKey[REDACTED],
  "ðŸŽ¬ Found official trailer:",
  "ðŸŽ¬ Error fetching videos for item:",
  "ðŸŽ¬ No official trailers found in trending content",
  "[bind] element not found:",
  "[bind] failed:",
  "ðŸŽ¯ Action Bar component loaded",
  ");\n    const isEpisodeTrackingEnabled = () => {\n      return localStorage.getItem(",
  ";\n    };\n\n    const baseActions = {\n      // Common actions available in all lists\n      remove: {\n        label: t(",
  "),\n        icon: ",
  ",\n        action: ",
  ",\n        className: ",
  ",\n        priority: ",
  ", // Always available but can drop to overflow\n      },\n      notes: {\n        label: t(",
  ",\n            action: ",
  ",\n            list: ",
  ",\n            className: ",
  ",\n            priority: ",
  " && isEpisodeTrackingEnabled()) {\n      const trackEpisodes = {\n        label: t(",
  ");\n\n    // Generate primary actions HTML\n    const primaryActionsHTML = config.primary\n      .map(\n        (action) => ",
  "${action.className} action-btn action-btn--primary",
  "${action.action}",
  "${action.list || ",
  "\n        data-media-type=",
  "\n        aria-label=",
  "\n        title=",
  "\n      >\n        ${action.icon ? ",
  "}\n        <span class=",
  ">${action.label}</span>\n      </button>\n    ",
  "\n      <button \n        class=",
  " \n        data-action=",
  " \n        data-id=",
  " \n        data-list=",
  ");\n\n    // Generate overflow menu HTML\n    const overflowMenuHTML =\n      config.secondary.length > 0\n        ? ",
  " \n          aria-expanded=",
  "\n          aria-haspopup=",
  "\n        >\n          <span class=",
  ">â‹¯</span>\n        </button>\n        <div class=",
  ">\n          ${config.secondary\n            .map(\n              (action) => ",
  "\n              data-media-type=",
  "\n              aria-label=",
  "\n            >\n              ${action.icon ? ",
  "}\n              <span class=",
  ">${action.label}</span>\n            </button>\n          ",
  ")}\n        </div>\n      </div>\n    ",
  ";\n\n    return ",
  ".action-overflow-btn",
  ".action-overflow",
  ".action-btn, .action-overflow-item",
  ".action-overflow-menu",
  "Rating action for item:",
  "Track episodes action for item:",
  "Unknown action:",
  "ðŸŽ´ Base Poster Card component loaded",
  ";\r\n    const titleWithYear = year ? ",
  ">\r\n        ${\r\n          posterUrl\r\n            ? ",
  "\r\n            : ",
  "\r\n        }\r\n        <div class=",
  ">ðŸŽ¬</div>\r\n      </div>\r\n      <div class=",
  ">${titleWithYear}</h3>\r\n        ${subline ? ",
  "}\r\n        ${showRating ? ",
  "}\r\n        ${\r\n          overflowActions.length > 0\r\n            ? ",
  "More options",
  "\r\n                <button class=",
  ">\r\n                  ${action.icon ? ",
  "}\r\n                  <span class=",
  ">${action.label}</span>\r\n                </button>\r\n              ",
  ")}\r\n            </div>\r\n          </div>\r\n        ",
  "\r\n        }\r\n      </div>\r\n    ",
  "t trigger if clicking overflow menu\r\n        if (!e.target.closest(",
  ".base-poster-card__overflow-btn",
  ".base-poster-card__overflow-menu",
  "${title}${year ? ",
  "base-poster-card base-poster-card--skeleton",
  "></div>\r\n          <div class=",
  "></div>\r\n        </div>\r\n      ",
  "Nothing here yet",
  "base-poster-card base-poster-card--empty",
  ">ðŸ“­</div>\r\n        <p class=",
  ">${message}</p>\r\n      </div>\r\n    ",
  "âœ… Base Poster Card component ready",
  "ðŸŽ¯ FlickWord Tab component loaded",
  "\r\n      <!-- Header Row -->\r\n      <div class=",
  ">\r\n        <h2 class=",
  ">FLICKWORD</h2>\r\n        <button class=",
  "() => {}",
  ">\r\n          Play\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Hero Row -->\r\n      <div class=",
  ">\r\n          <img src=",
  " \r\n               style=",
  ">\r\n        </div>\r\n        <div class=",
  ">\r\n          ${window.StatsCard ? window.StatsCard(userStats).outerHTML : ",
  "}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Card Grid -->\r\n      <div class=",
  " data-word-id=",
  "/icons/word-puzzle.png",
  "WORD #${word.number || word.id}",
  ",\r\n                        },\r\n                        {\r\n                          label: ",
  ",\r\n                          onClick: () => console.log(",
  ", word.id),\r\n                          icon: ",
  ",\r\n                        },\r\n                      ],\r\n                    }).outerHTML\r\n                  : ",
  "\r\n              }\r\n            </div>\r\n          ",
  ")\r\n            : window.createEmptyState\r\n              ? window.createEmptyState(",
  ").outerHTML\r\n              : ",
  ");\r\n    if (playButton && onPlay) {\r\n      playButton.addEventListener(",
  ", onPlay);\r\n    }\r\n\r\n    // Add word card click handlers\r\n    const wordCards = tab.querySelectorAll(",
  ");\r\n    wordCards.forEach((card) => {\r\n      const wordId = card.dataset.wordId;\r\n      card.addEventListener(",
  "Word #${index + 1}",
  ".stats-card",
  ".flickword-tab__grid",
  "WORD #${word.number}",
  "Word clicked",
  "Play word",
  " },\r\n                  {\r\n                    label: ",
  ",\r\n                    onClick: () => console.log(",
  ", word.id),\r\n                    icon: ",
  ",\r\n                  },\r\n                ],\r\n              }).outerHTML\r\n            }\r\n          </div>\r\n        ",
  "âœ… FlickWord Tab component ready",
  "ðŸ“Š StatsCard component loaded",
  ",\r\n    lastPlayed = ",
  ",\r\n  }) {\r\n    const statsCard = document.createElement(",
  ");\r\n    statsCard.className = ",
  ";\r\n    statsCard.dataset.testid = ",
  ";\r\n\r\n    const statsHTML = ",
  ">Last Result</div>\r\n        </div>\r\n      </div>\r\n      ${\r\n        formattedLastPlayed\r\n          ? ",
  "\r\n          : ",
  "\r\n      }\r\n    ",
  ");\r\n    if (winRateElement) winRateElement.textContent = ",
  ";\r\n\r\n    // Update total games\r\n    const totalGamesElement = statsCard.querySelector(",
  ");\r\n    if (lastResultElement) lastResultElement.textContent = lastResult || ",
  ";\r\n\r\n    // Update last played\r\n    const lastPlayedElement = statsCard.querySelector(",
  ");\r\n    if (lastPlayedElement && lastPlayed) {\r\n      lastPlayedElement.textContent = ",
  "Failed to load FlickWord stats from localStorage:",
  ",\r\n      lastPlayed: ",
  "Failed to save FlickWord stats to localStorage:",
  "âœ… StatsCard component ready",
  "ðŸ§  Trivia Tab component loaded",
  ");\r\n    const streak = parseInt(localStorage.getItem(",
  ");\r\n\r\n    return ",
  "stats-row ${isPro ? ",
  ">Basic Plan</div>\r\n          <div class=",
  ">${dailyCount}/5 questions today</div>\r\n          <div class=",
  ">${isPro ? ",
  "}</div>\r\n        </div>\r\n        <div class=",
  ">Pro Plan</div>\r\n          <div class=",
  ">Current Streak: ${streak} days</div>\r\n          ${!isPro ? ",
  "}\r\n        </div>\r\n      </div>\r\n    ",
  ">TRIVIA</h2>\r\n        <button class=",
  ">\r\n          Play\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Stats Panel -->\r\n      <div class=",
  ">\r\n        ${createStatsPanel()}\r\n      </div>\r\n\r\n      <!-- Card Grid -->\r\n      <div class=",
  " data-category-id=",
  ", category.id),\r\n                          icon: ",
  ", onPlay);\r\n    }\r\n\r\n    // Add category card click handlers\r\n    const categoryCards = tab.querySelectorAll(",
  "/icons/movie-reel.png",
  "/icons/tv-screen.png",
  "/icons/music-note.png",
  "/icons/sports-ball.png",
  "/icons/history-book.png",
  "/icons/science-lab.png",
  "/icons/globe.png",
  "/icons/book.png",
  "/icons/palette.png",
  "/icons/brain.png",
  "/icons/trivia-default.png",
  "${category.questionCount} questions",
  "avg ${category.avgTime}",
  "last score ${category.lastScore}",
  "10 questions â€¢ avg 6:30",
  "Category ${index + 1}",
  ".trivia-tab__grid",
  "Category clicked",
  "Play category",
  ",\r\n                  },\r\n                  {\r\n                    label: ",
  ", category.id),\r\n                    icon: ",
  "âœ… Trivia Tab component ready",
  "ðŸŽ¨ Loading non-critical CSS asynchronously...",
  "âš ï¸ Failed to load CSS: ${href}",
  "âœ… All non-critical CSS loaded",
  "t be accessed (CORS)\r\n      console.warn(",
  "ðŸ“Š CSS Usage Analysis:",
  "Used classes: ${usedClasses.size}",
  "Defined classes: ${definedClasses.size}",
  "Unused classes: ${unusedClasses.length}",
  "Missing classes: ${missingClasses.length}",
  "ðŸ—‘ï¸ Unused classes:",
  "âŒ Missing classes:",
  "ðŸŽ¯ Curated genre settings loading...",
  ", // Drama\r\n      subGenre: ",
  ",  // Crime\r\n      mediaType: ",
  ",\r\n      title: ",
  "\r\n    },\r\n    {\r\n      mainGenre: ",
  ", // Comedy\r\n      subGenre: ",
  ", // Romance\r\n      mediaType: ",
  ", // Sci-Fi\r\n      subGenre: ",
  ", // Sci-Fi & Fantasy\r\n      mediaType: ",
  "\r\n    }\r\n  ];\r\n\r\n  /**\r\n   * Analyze user",
  "ðŸŽ¯ Analyzing user preferences from currently watching data...",
  "ðŸŽ¯ No appData available, using static defaults",
  "ðŸŽ¯ No currently watching items, using static defaults",
  "ðŸŽ¯ Analyzing ${allWatching.length} currently watching items",
  " || item.mediaType === ",
  "ðŸŽ¯ Genre analysis:",
  "ðŸŽ¯ Media type analysis:",
  "ðŸŽ¯ Top 3 genres:",
  ";\r\n\r\n      console.log(",
  "ðŸŽ¯ Generated smart defaults:",
  "ðŸŽ¯ Error analyzing user preferences:",
  "ðŸŽ¯ Loaded saved genre preferences:",
  "ðŸŽ¯ Error loading genre preferences:",
  "s watching data\r\n    console.log(",
  "ðŸŽ¯ Saved genre preferences:",
  "ðŸŽ¯ Error saving genre preferences:",
  "ðŸŽ¯ Genre selection changed for row ${i}:",
  "ðŸŽ¯ CustomGenreSelector not available",
  "Custom Row",
  ";\r\n    \r\n    let title = mainGenreName;\r\n    if (subGenreName && subGenreName !== mainGenreName) {\r\n      title += ",
  "Action & Adventure",
  "Sci-Fi & Fantasy",
  "War & Politics",
  "TV Movie",
  "Genre ${genreId}",
  "ðŸŽ¯ Resetting to smart defaults based on current user data",
  "ðŸŽ¯ Initializing curated genre settings...",
  "ðŸŽ¯ CustomGenreSelector found, initializing genre selectors...",
  "ðŸŽ¯ Curated genre settings initialized",
  "ðŸŽ¯ CustomGenreSelector not ready, retrying...",
  "s watching data to refresh smart defaults\r\n  document.addEventListener(",
  ", () => {\r\n    console.log(",
  "ðŸŽ¯ No saved preferences, will generate smart defaults on next load",
  "ðŸŽ¯ Curated genre settings loaded",
  "ðŸŽ¬ Curated Lists disabled by feature flag",
  "ðŸŽ¬ Curated Lists row not found",
  "ðŸŽ¬ Initializing Curated Lists row...",
  "ðŸŽ¬ Feature flag status:",
  "ðŸŽ¬ Delayed initialization of Curated Lists...",
  "[Curated] Error getting homeListsCount:",
  "ðŸŽ¬ loadSource called for: ${kind}",
  "ðŸŽ¬ Parsed data for ${kind}:",
  "ðŸŽ¬ Error parsing localStorage data for ${kind}:",
  "ðŸŽ¬ No data found for ${kind}, returning empty array",
  ";\r\n      const s = String(p);\r\n      return s.startsWith(",
  ")\r\n        ? s\r\n        : ",
  ";\r\n    return TMDB_IMG(rawPoster, ",
  "ðŸŽ¬ openShowDetail function not available",
  "><img alt=",
  "></div>\r\n    ",
  "ðŸŽ¬ Tile clicked:",
  ".curated-stacks",
  "ðŸŽ¬ Lists count from setting:",
  "ðŸŽ¬ No lists to show, removing section",
  "ðŸŽ¬ Rendering ${count} curated lists",
  "[Curated] Missing provider for ${cfg.kind}. Skipping.",
  "[Curated] Error fetching ${cfg.kind}:",
  "ðŸŽ¬ No items for ${cfg.kind}, skipping",
  "ðŸŽ¬ Rendering ${cfg.kind} with ${items.length} items",
  ">\r\n          <h3 class=",
  ">${cfg.title}</h3>\r\n        </div>\r\n        <div class=",
  "></div>\r\n      ",
  ".curated-list-scroll",
  "ðŸŽ¬ No lists rendered, removing section",
  "âœ… Curated Lists row rendered with ${renderedLists} list(s)",
  "The Last Sentinel",
  " },\r\n      { id: 9002, title: ",
  ", posterPath: ",
  " },\r\n      { id: 9003, title: ",
  " },\r\n      { id: 9004, title: ",
  " },\r\n      { id: 9005, title: ",
  " },\r\n      { id: 9006, title: ",
  " },\r\n      { id: 9007, title: ",
  " },\r\n      { id: 9008, title: ",
  "s Gate",
  " },\r\n      { id: 9009, title: ",
  " },\r\n      { id: 9010, title: ",
  " },\r\n      { id: 9011, title: ",
  " },\r\n      { id: 9012, title: ",
  " },\r\n      { id: 9013, title: ",
  " },\r\n      { id: 9014, title: ",
  "ðŸŽ­ Custom genre selector loading...",
  "Crime Drama",
  "Romance Drama",
  "Historical Drama",
  "Biographical Drama",
  "Romantic Comedy",
  "Action Comedy",
  "Dark Comedy",
  "Action Thriller",
  "Crime Action",
  "Sci-Fi Action",
  "Supernatural Horror",
  "Psychological Horror",
  "Horror Comedy",
  "Sci-Fi Fantasy",
  "Sci-Fi Thriller",
  "Sci-Fi Drama",
  "Science Fiction",
  "ðŸŽ­ Using cached ${mediaType} genres",
  "ðŸŽ­ tmdbGet not available, using fallback ${mediaType} genres",
  "ðŸŽ­ Fetching ${mediaType} genres from TMDB...",
  "ðŸŽ­ TMDB response for ${mediaType} genres:",
  "ðŸŽ­ Loaded ${genres.length} ${mediaType} genres from TMDB",
  "ðŸŽ­ Invalid response format for ${mediaType} genres:",
  "ðŸŽ­ Failed to load ${mediaType} genres from TMDB:",
  "ðŸŽ­ Using fallback ${mediaType} genres",
  "ðŸŽ­ Container ${containerId} not found",
  ">Main Genre:</label>\r\n          <select id=",
  ">\r\n            <option value=",
  ">Loading genres...</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div class=",
  ">Sub Genre:</label>\r\n          <select id=",
  ">Select main genre first</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div class=",
  ">Media Type:</label>\r\n          <select id=",
  ">Movies</option>\r\n            <option value=",
  ">TV Shows</option>\r\n            <option value=",
  ">Both</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    ",
  "ðŸŽ­ Populating main genres for media type: ${mediaType}",
  "ðŸŽ­ Received ${genres.length} genres for ${mediaType}",
  ">Select main genre</option>",
  "ðŸŽ­ Populated ${genres.length} main genres for ${mediaType}",
  "ðŸŽ­ No genres received for ${mediaType}",
  ">No genres available</option>",
  "ðŸŽ­ Set initial main genre: ${initialValues.mainGenre}",
  "ðŸŽ­ Error populating main genres:",
  ">Error loading genres</option>",
  ">Select sub genre</option>",
  ">Select main genre first</option>",
  "ðŸŽ­ Populated ${subGenres.length} sub genres for main genre ${mainGenreId}",
  ",\r\n          mediaType: mediaTypeSelect.value\r\n        });\r\n      }\r\n    });\r\n\r\n    subGenreSelect.addEventListener(",
  "ðŸŽ­ Failed to populate genres, using fallback:",
  ".genre-selector select:nth-of-type(1)",
  ".genre-selector select:nth-of-type(2)",
  ".genre-selector select:nth-of-type(3)",
  ",\r\n      subGenre: subGenre || ",
  ",\r\n      mediaType: mediaType || ",
  ".genre-selector select",
  ";\r\n      selects[1].value = selection.subGenre || ",
  ";\r\n      selects[2].value = selection.mediaType || ",
  "ðŸŽ­ Custom genre selector loaded successfully",
  "âš™ï¸ User Settings data module loaded",
  "[getMyRows] failed:",
  "âœ… My rows saved:",
  "[setMyRows] failed:",
  "ðŸ”„ Personalized rows reset to new defaults:",
  "ðŸ” [DOM TEST] Starting DOM structure test...",
  "ðŸ” [DOM TEST] #clean-root not found, skipping DOM analysis.",
  "ðŸ” [DOM TEST] âœ… Found clean-root",
  "ðŸ” [DOM TEST] Found cards: ${cards.length}",
  "ðŸ” [DOM TEST] === CARD ${index + 1} ANALYSIS ===",
  "ðŸ” [DOM TEST] Card class: ${card.className}",
  "ðŸ” [DOM TEST] Card children count: ${card.children.length}",
  "ðŸ” [DOM TEST] Child ${childIndex + 1}: ${child.tagName} - ${child.className}",
  "s the content div, show its children\r\n                    if (child.classList.contains(",
  ")) {\r\n                        console.log(",
  "ðŸ” [DOM TEST]   Content child ${contentIndex + 1}: ${contentChild.tagName} - ${contentChild.className}",
  "s the actions div, show its children\r\n                    if (child.classList.contains(",
  "ðŸ” [DOM TEST]   Action child ${actionIndex + 1}: ${actionChild.tagName} - ${actionChild.className}",
  ".cw-actions, .fy-actions",
  "ðŸ” [DOM TEST] Actions containers found in card: ${actionsInCard.length}",
  "ðŸ” [DOM TEST] Actions container ${actionsIndex + 1}: ${actionsContainer.className}",
  ");\r\n                    console.log(",
  "ðŸ” [DOM TEST] Actions container styles: {display: ",
  ", visibility: ",
  ", opacity: ",
  ", position: ",
  ", top: ",
  ", left: ",
  ");\r\n                });\r\n                \r\n                console.log(",
  ");\r\n            }\r\n        });\r\n\r\n        console.log(",
  "ðŸ“º Episode tracking system initialized",
  "ðŸ“º openEpisodeModal called with:",
  "ðŸ“º window.openModal available:",
  "ðŸ“º Episode tracking is disabled",
  "ðŸ“º No modal handler available for episode tracking",
  "ðŸ“º Available window functions:",
  "ðŸ“º Opening episode modal for:",
  ">\r\n          <div style=",
  ">\r\n            <div>\r\n              <h2 style=",
  ">${escapeHtml(seriesTitle)} â€” Episodes</h2>\r\n              <div id=",
  ">\r\n                Loading...\r\n              </div>\r\n            </div>\r\n            <button id=",
  ">âœ• Close</button>\r\n          </div>\r\n          <div id=",
  "></div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=",
  ">\r\n          <div id=",
  ">\r\n            <div style=",
  ">\r\n              Loading series data...\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ",
  "${seriesTitle} â€” Episodes",
  "ðŸ“º Failed to create episode modal",
  "ðŸ“º Loading series data for:",
  "Failed to load series data",
  "ðŸ“º Error loading series data:",
  ">\r\n            <p>Error loading series data.</p>\r\n            <p style=",
  ">Please try again later.</p>\r\n          </div>\r\n        ",
  "ðŸ“º Failed to load season ${seasonNumber}:",
  "ðŸ“º Episode tracking API key check:",
  "${apiKey.slice(0, 4)}...",
  "${TMDB_API_BASE}${endpoint}?api_key=${apiKey[REDACTED],
  "TMDB API error: ${response.status}",
  "ðŸ“º TMDB API error:",
  " data-season=",
  ">\r\n          <div>\r\n            <h3 style=",
  ">Season ${seasonNumber}</h3>\r\n            <div style=",
  ">\r\n              ${watchedCount}/${totalEpisodes} watched\r\n            </div>\r\n          </div>\r\n          <div style=",
  "></div>\r\n            </div>\r\n            <span class=",
  ">${isExpanded ? ",
  "}</span>\r\n          </div>\r\n        </button>\r\n        \r\n        <div class=",
  ">\r\n          ${episodesHtml}\r\n        </div>\r\n      </div>\r\n    ",
  "Episode ${episodeNumber}",
  "${episode.runtime}min",
  ";\r\n    const isWatched = isEpisodeWatched(seriesId, seasonNumber, episodeNumber);\r\n\r\n    return ",
  "\r\n           tabindex=",
  ">\r\n            S${seasonNumber}E${episodeNumber} â€¢ ${escapeHtml(title)}\r\n          </div>\r\n          <div style=",
  ">\r\n            ${airDate}${runtime ? ",
  "}\r\n          </div>\r\n        </div>\r\n        <div class=",
  ">\r\n          <label class=",
  ">\r\n            <input type=",
  "} \r\n                   data-series=",
  " data-episode=",
  "\r\n                   style=",
  ">\r\n            <span class=",
  "; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: 0.3s; border-radius: 50%;",
  ".season-header",
  ".season-episodes[data-season=",
  ",\r\n        );\r\n        const chevron = seasonHeader.querySelector(",
  ");\r\n\r\n        if (episodesContainer && chevron) {\r\n          const isExpanded = episodesContainer.style.display !== ",
  ";\r\n          episodesContainer.style.display = isExpanded ? ",
  ";\r\n          chevron.textContent = isExpanded ? ",
  ";\r\n        }\r\n      }\r\n    });\r\n\r\n    // Episode toggle clicks\r\n    document.addEventListener(",
  ", (e) => {\r\n      if (e.target.matches(",
  ".episode-row",
  "input, label, .switch, .slider",
  ") {\r\n          e.preventDefault();\r\n          const checkbox = episodeRow.querySelector(",
  "ðŸ“º Setting S${seasonNumber}E${episodeNumber} watched:",
  "ðŸ“º Error parsing series data:",
  "ðŸ“º Error saving series data:",
  "ðŸ“º Syncing episode data for series:",
  ".progress-fill",
  "${progress.watched}/${progress.total} watched",
  ".season-progress-fill",
  ".season-container",
  ".episode-row[data-series=",
  " + seriesId + ",
  "Marked as watched.",
  "Episode down.",
  "Nice. One more brain worm defeated.",
  "Marked as unwatched.",
  "Episode restored.",
  "Back on the watchlist.",
  ").replace(\r\n      /[&<>",
  "]/g,\r\n      (m) =>\r\n        ({\r\n          ",
  "ðŸ“Š Initializing CSV export system...",
  "CSV export is a Pro feature. Upgrade to Pro to export your data.",
  ";\r\n            const stringValue = String(value);\r\n            if (\r\n              stringValue.includes(",
  ") ||\r\n              stringValue.includes(",
  ")\r\n            ) {\r\n              return ",
  "${stringValue.replace(/",
  ";\r\n            }\r\n            return stringValue;\r\n          })\r\n          .join(",
  "),\r\n      ),\r\n    ].join(",
  "ðŸ“Š No app data available for export",
  "TV Show",
  ",\r\n          first_air_date: item.first_air_date || ",
  ",\r\n          vote_average: item.vote_average || ",
  ",\r\n          poster_path: item.poster_path || ",
  ",\r\n          networks: (item.networks || []).map((n) => n.name).join(",
  "),\r\n          genres: (item.genres || []).map((g) => g.name).join(",
  "),\r\n          added_date: item.added_date || ",
  ",\r\n          user_rating: item.user_rating || ",
  ",\r\n          like_status: item.like_status || ",
  ",\r\n          notes: item.notes || ",
  ",\r\n          tags: (item.tags || []).join(",
  "),\r\n        });\r\n      });\r\n    });\r\n\r\n    // Export Movies\r\n    [",
  ",\r\n          release_date: item.release_date || ",
  ",\r\n          genres: (item.genres || []).map((g) => g.name).join(",
  "),\r\n          runtime: item.runtime || ",
  ",\r\n          added_date: item.added_date || ",
  "ðŸ“Š CSV download failed:",
  "ðŸ“Š Starting CSV export...",
  "No data to export. Add some shows or movies to your lists first.",
  "flicklet-export.csv",
  "Failed to generate CSV data.",
  ")[0];\r\n    const filename = ",
  "Exported ${data.length} items to ${filename}",
  "ðŸ“Š CSV export completed successfully",
  "Failed to download CSV file.",
  "ðŸ“Š Exporting ${mediaType} ${listType} list...",
  "No items in ${listType} list to export.",
  ",\r\n      list: listType,\r\n      id: item.id,\r\n      title: item.name || item.title || ",
  ",\r\n      date: mediaType === ",
  " ? item.first_air_date || ",
  " : item.release_date || ",
  ",\r\n      vote_average: item.vote_average || ",
  ",\r\n      poster_path: item.poster_path || ",
  ",\r\n      added_date: item.added_date || ",
  ",\r\n      user_rating: item.user_rating || ",
  ",\r\n      like_status: item.like_status || ",
  ",\r\n      notes: item.notes || ",
  ",\r\n      tags: (item.tags || []).join(",
  "),\r\n    }));\r\n\r\n    const csvContent = convertToCSV(exportData, ",
  ");\r\n    if (!csvContent) {\r\n      if (window.Toast && window.Toast.show) {\r\n        window.Toast.show(",
  "Exported ${items.length} items from ${listType} list",
  ");\r\n      if (!btn) return;\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      // Check if it",
  "ðŸ“Š CSV export system initialized",
  "ðŸ”§ Feedback layout fix script loaded - VERSION 2",
  "ðŸ”§ Feedback section not found",
  "ðŸ”§ Found feedback section, applying fixes...",
  ";\n  feedbackSection.style.marginRight = ",
  ";\n  feedbackSection.style.paddingLeft = ",
  ";\n  feedbackSection.style.paddingRight = ",
  ";\n  console.log(",
  ".preview-row-container",
  ";\n    previewContainer.style.marginRight = ",
  ";\n    previewContainer.style.paddingLeft = ",
  ";\n    previewContainer.style.paddingRight = ",
  ";\n    console.log(",
  ".feedback-actions",
  "ðŸ”§ Fixed feedback-actions layout",
  ".feedback-content",
  ";\n    feedbackContent.style.marginRight = ",
  ";\n    feedbackContent.style.paddingLeft = ",
  ";\n    feedbackContent.style.paddingRight = ",
  ");\n  }\n\n  // Debug: Check widths of all parent containers\n  const feedbackCard = feedbackSection.querySelector(",
  ");\n  const feedbackSectionContent = feedbackSection.querySelector(",
  ");\n  const previewContainerDebug = feedbackSection.querySelector(",
  ");\n  \n  console.log(",
  ");\n  console.log(",
  ", feedbackSection.offsetWidth);\n  console.log(",
  ", previewContainerDebug?.offsetWidth);\n  console.log(",
  ", feedbackSectionContent?.offsetWidth);\n  console.log(",
  ";\n    feedbackCard.style.marginRight = ",
  ";\n    feedbackCard.style.paddingLeft = ",
  ";\n    feedbackCard.style.paddingRight = ",
  ", feedbackCard.offsetWidth);\n    console.log(",
  ");\n  }\n\n  // Style the buttons to be more compact\n  const buttons = feedbackSection.querySelectorAll(",
  ");\n  buttons.forEach(button => {\n    button.style.minWidth = ",
  ";\n    button.style.maxWidth = ",
  ";\n    button.style.flexShrink = ",
  ";\n    button.style.padding = ",
  ";\n    button.style.fontSize = ",
  ";\n    button.style.margin = ",
  ";\n  });\n  console.log(",
  "ðŸ”§ Feedback layout fix applied successfully",
  "ðŸ”§ Feedback section not ready, retrying...",
  "ðŸ”§ Feedback layout fix initialized",
  "ðŸŽ¯ Initializing FlickWord...",
  ">\r\n          <h4>FlickWord</h4>\r\n          <div class=",
  ">Streak: 0</span>\r\n            <span class=",
  ">Next: --:--</span>\r\n          </div>\r\n        </div>\r\n        <div class=",
  ">\r\n          <button class=",
  ">New Game</button>\r\n          <button class=",
  ">Hint</button>\r\n        </div>\r\n      </div>\r\n    ",
  "s word\r\n    game.target = await getTodayWord();\r\n    game.guesses = [];\r\n    game.current = ",
  "ðŸŽ¯ FlickWord initialized with target:",
  ".fw-grid",
  ");\r\n      for (let j = 0; j < 5; j++) {\r\n        const tile = document.createElement(",
  ");\r\n        tile.className = ",
  ";\r\n        tile.textContent = guess[j] || ",
  ".fw-keyboard",
  ";\r\n\r\n    // Row 1 + Backspace\r\n    const r1 = document.createElement(",
  ");\r\n    r1.className = ",
  ";\r\n    for (const L of ROWS[0]) r1.appendChild(makeKey(L));\r\n    r1.appendChild(makeKey(",
  ", handler) {\r\n    const btn = document.createElement(",
  ");\r\n    btn.type = ",
  ";\r\n    btn.textContent = label;\r\n    btn.className = ",
  ".trim();\r\n\r\n    if (label === ",
  ") {\r\n      btn.onclick = backspace;\r\n    } else if (label === ",
  "Not a valid word!",
  "ðŸŽ‰ Correct! Well done!",
  "Game over! The word was: ${game.target}",
  ".fw-notification",
  "fw-notification ${type}",
  ".fw-streak",
  "Streak: ${streak}",
  "Hint: ${hint}",
  "ðŸŽ® Game Tabs initialization loaded",
  "MOVIES: 1990s",
  "TV SHOWS",
  ",\r\n      questionCount: 15,\r\n      avgTime: ",
  ",\r\n      lastScore: ",
  ",\r\n    },\r\n    {\r\n      id: ",
  ",\r\n      name: ",
  ",\r\n      type: ",
  ",\r\n      questionCount: 12,\r\n      avgTime: ",
  ",\r\n      questionCount: 8,\r\n      avgTime: ",
  ",\r\n      questionCount: 20,\r\n      avgTime: ",
  ",\r\n      questionCount: 10,\r\n      avgTime: ",
  ",\r\n    },\r\n  ];\r\n\r\n  let currentTab = ",
  "ðŸŽ® Initializing game tabs...",
  ".game-tab-btn",
  "Game tab containers not found",
  "âœ… Game tabs initialized",
  "ðŸ”„ Switching to ${tabName} tab",
  ").classList.add(",
  ");\r\n\r\n    // Update tab content\r\n    document.querySelectorAll(",
  ").forEach((tab) => {\r\n      tab.classList.remove(",
  ");\r\n    });\r\n    document.getElementById(",
  "ðŸŽ¯ FlickWord play clicked",
  "FlickWord modal function not available",
  "ðŸ“ Word clicked:",
  "ðŸ§  Trivia play clicked",
  "Trivia modal function not available",
  "ðŸ“š Category clicked:",
  "âœ… Game Tabs initialization ready",
  "[HomeCleanData] Using cached CW data",
  "[HomeCleanData] Failed to get CW data:",
  "[HomeCleanData] Using cached Next Up data",
  "[HomeCleanData] Failed to get Next Up data:",
  "genre-${genre.toLowerCase()}",
  "[HomeCleanData] Using cached ${genre} data",
  "[HomeCleanData] Failed to get ${genre} data:",
  "[HomeCleanData] Using cached In Theaters data",
  "[HomeCleanData] Failed to get In Theaters data:",
  "No description available",
  "[HomeCleanData] Unknown genre: ${genre}",
  "[HomeCleanData] TMDB error for ${genre}:",
  "[HomeCleanData] TMDB error for In Theaters:",
  "American Horror Story",
  "Season 12 â€¢ Episode 3",
  "\r\n            },\r\n            {\r\n                id: ",
  ",\r\n                title: ",
  ",\r\n                poster: ",
  ",\r\n                meta: ",
  ",\r\n                blurb: ",
  "The Undertone",
  "New episode tomorrow",
  "A psychological thriller about a woman who discovers her new apartment has a dark history.",
  "Baywatch: Hawaiian Wedding",
  "Series complete",
  "The final episode of the classic beach drama series.",
  "Monster: The Ed Gein Story",
  "2024 â€¢ TV Series",
  "A chilling drama about one of America\\",
  "\r\n                },\r\n                {\r\n                    id: ",
  ",\r\n                    title: ",
  ",\r\n                    poster: ",
  ",\r\n                    meta: ",
  ",\r\n                    blurb: ",
  "\r\n                }\r\n            ],\r\n            ",
  ": [\r\n                {\r\n                    id: ",
  "2023 â€¢ Movie",
  "The story of American scientist J. Robert Oppenheimer and his role in the development of the atomic bomb.",
  "${year} â€¢ TV Series",
  "TV Series",
  "New episode today",
  "New episode in ${diffDays} days",
  "New episode ${date.toLocaleDateString()}",
  "${year} â€¢ Movie",
  "[HomeCleanData] Cache cleared",
  "[home-clean] Phase 4 system enabled",
  "[home-clean] FLAGS state:",
  "[home-clean] HomeClean component available:",
  "[home-clean] mountHomeClean function available:",
  "[home-clean] Component loader not available, loading...",
  "[home-clean] Home section not found",
  "[home-clean] Found home section:",
  "[home-clean] Home section current content length:",
  "[home-clean] Mounting component...",
  "[home-clean] Component mounted successfully",
  "[home-clean] Home section new content length:",
  "[home-clean] Failed to mount component",
  "[home-clean] Mount error:",
  "[home-clean] Component loader loaded, retrying mount...",
  "[home-clean] Failed to load component loader",
  "[home-clean] Want to Watch:",
  "[home-clean] Marked as Watched:",
  "[home-clean] Dismissed:",
  "[home-clean] Deleted:",
  "[home-clean] Component destroyed",
  "[home-clean] Manual mount triggered...",
  "[home-clean] Cannot mount - missing homeSection or mountHomeClean",
  "[home-clean] Backup mount attempt...",
  "[home-clean] Forcing mount...",
  "[home-clean] Backup mount result:",
  "[HomeCleanPerformance] Performance optimizations initialized",
  "[HomeCleanPerformance] IntersectionObserver not supported",
  "[HomeCleanPerformance] ${name}: ${(end - start).toFixed(2)}ms",
  "[HomeCleanPerformance] Performance optimizations destroyed",
  "[HomeCleanPerformance] Performance optimizations loaded",
  "[home-rails-fix] Loading patch...",
  "s a significant discrepancy\n            if (Math.abs(actualWidth - outerWidth) > 100) {\n                console.warn(",
  "[home-rails-fix] Forcing viewport width normalization...",
  ";\n                    document.body.style.transform = ",
  ";\n                    document.body.style.zoom = ",
  "[home-rails-fix] Viewport normalization failed:",
  "[home-rails-fix] Community disabled via FLAGS",
  "[home-rails-fix] Community disabled via localStorage",
  "[home-rails-fix] Community gating check failed:",
  "[home-rails-fix] HomeClean component not found",
  "[home-rails-fix] Patching preserveExistingContent with gating...",
  "[home-rails-fix] Community section preserved and gated",
  "[home-rails-fix] Community section hidden by gating",
  "[home-rails-fix] HomeClean preserveExistingContent patched",
  "[home-rails-fix] HomeClean patching failed:",
  "[home-rails-fix] Patching mobile polish viewport calculation...",
  "[home-rails-fix] Mobile polish applied with normalized width:",
  "[home-rails-fix] Mobile polish logic patched",
  "[home-rails-fix] Mobile polish patching failed:",
  "[home-rails-fix] Initializing patches...",
  "[home-rails-fix] HomeClean not found after 5 seconds",
  "[home-rails-fix] Initial viewport width normalized:",
  "[home-rails-fix] Patches initialized successfully",
  "[home-rails-fix] Patch loaded successfully",
  "[home-rails-fix] Poster reconciler initialized",
  "[home-rails-fix] Failed to load poster reconciler:",
  "add-to-list missing id or list",
  ") return;\r\n      btn.dataset.busy = ",
  ";\r\n      setTimeout(() => {\r\n        btn.dataset.busy = ",
  "No add function available",
  "add-to-list failed",
  ".curated-card,.list-card,.list-row,.card,.show-card",
  ".count, .badge, .pill, .tab-badge",
  "ðŸ”¢ Updating all tab counts after list change",
  "], .btn-not-interested",
  ".curated-card,.list-card,.list-row,.card",
  ";\r\n      const sourceList = card.dataset.sourceList || card.getAttribute(",
  "ðŸ”§ Global card actions system not available, falling back to legacy handler",
  "h3, .title, .card-title",
  "Unknown item",
  "[remove] failed",
  "Could not remove item",
  "s scoped\r\n  if (typeof window.updateCount !== ",
  " && typeof updateCount === ",
  "ðŸ§ª [MANUAL TEST] Starting home-clean test...",
  "ðŸ§ª [MANUAL TEST] Checking system state...",
  "ðŸ§ª [MANUAL TEST] HomeClean class available:",
  "ðŸ§ª [MANUAL TEST] mountHomeClean function available:",
  "ðŸ§ª [MANUAL TEST] FLAGS state:",
  "ðŸ§ª [MANUAL TEST] Home section found:",
  "ðŸ§ª [MANUAL TEST] Home section content length:",
  "ðŸ§ª [MANUAL TEST] Home section has clean-root:",
  "ðŸ§ª [MANUAL TEST] Forcing mount...",
  "ðŸ§ª [MANUAL TEST] Mount result:",
  "ðŸ§ª [MANUAL TEST] âœ… Home-clean mounted successfully!",
  "ðŸ§ª [MANUAL TEST] Home section new content length:",
  "ðŸ§ª [MANUAL TEST] Clean-root found:",
  "ðŸ§ª [MANUAL TEST] âŒ Failed to mount home-clean",
  "ðŸ§ª [MANUAL TEST] âŒ Mount error:",
  "ðŸ§ª [MANUAL TEST] âœ… Home-clean already mounted!",
  "ðŸ§ª [MANUAL TEST] âŒ Cannot mount - missing dependencies",
  "ðŸªŸ Modal core system loaded",
  ".modal-overlay",
  "t fully implemented yet\r\n */\r\n\r\n(function () {\r\n  ",
  ";\r\n\r\n  console.log(",
  "ðŸŽ® Showing games teaser modal for:",
  "modal games-teaser",
  ">\r\n          <h3>${t(",
  ")}</h3>\r\n          <button class=",
  ">Ã—</button>\r\n        </div>\r\n        <div class=",
  ")}</p>\r\n        </div>\r\n        <div class=",
  ")}</button>\r\n          <button class=",
  ")}</button>\r\n        </div>\r\n      </div>\r\n    ",
  ".close",
  ".modal__backdrop",
  ".open-trivia",
  "ðŸŽ® Trivia game not available",
  "Trivia game coming soon!",
  ".open-flickword",
  "ðŸŽ® FlickWord game not available",
  "FlickWord game coming soon!",
  "/features/flickword-v2.html",
  ".gm-close",
  "ðŸŽ¯ Close button found:",
  "ðŸŽ¯ Close button styles:",
  ",\r\n      );\r\n      if (firstFocusable) {\r\n        firstFocusable.focus();\r\n      }\r\n    } else {\r\n      console.error(",
  ");\r\n    }\r\n  }\r\n\r\n  function closeFlickWordModal() {\r\n    console.log(",
  ");\r\n    const frame = document.getElementById(",
  ");\r\n\r\n    if (modal) {\r\n      modal.setAttribute(",
  "ðŸŽ¯ Updating stats display after modal close... (attempt",
  ",\r\n    );\r\n\r\n    if (!window.lastFlickWordStats) {\r\n      console.log(",
  "ðŸŽ¯ Available elements:",
  "ðŸŽ¯ All elements with data-testid:",
  "ðŸŽ¯ All .stats-card elements:",
  "ðŸŽ¯ All elements with ",
  " in class:",
  ").length,\r\n    );\r\n    console.log(\r\n      ",
  ",\r\n      document.querySelectorAll(",
  ").length,\r\n    );\r\n\r\n    // Log the actual elements with ",
  " in class\r\n    const statsElements = document.querySelectorAll(",
  ");\r\n    console.log(\r\n      ",
  "ðŸŽ¯ Elements with just numbers:",
  "ðŸŽ¯ Elements with stats-related text:",
  " + el.parentElement?.className,\r\n        id: el.id,\r\n        dataTestId: el.getAttribute(",
  "ðŸŽ¯ Potential stats display elements:",
  "ðŸŽ¯ Attempting to update potential stats elements...",
  "ðŸŽ¯ Element ${index + 1}:",
  "ðŸŽ¯ Found number element: ",
  " - attempting to update...",
  ".stat-label",
  "ðŸŽ¯ Found FlickWord stat-label elements:",
  "ðŸŽ¯ Stat label ${index + 1}:",
  " + label.parentElement?.className,\r\n        nextSibling: label.nextElementSibling?.tagName + ",
  ".stat-value, .stat-number, [class*=",
  "], [class*=",
  ",\r\n        );\r\n      if (valueElement) {\r\n        console.log(",
  "${label.textContent}",
  "ðŸŽ¯ Updated streak to: ${stats.streak}",
  "ðŸŽ¯ Updated best to: ${stats.maxStreak}",
  ";\r\n          console.log(",
  ");\r\n        } else if (label.textContent.includes(",
  ") || label.textContent.includes(",
  ")) {\r\n          valueElement.textContent = stats.totalGames;\r\n          console.log(",
  ")) {\r\n          valueElement.textContent = stats.wins;\r\n          console.log(",
  ")) {\r\n          valueElement.textContent = stats.losses;\r\n          console.log(",
  ", !!flickwordTab);\r\n    if (flickwordTab) {\r\n      console.log(",
  ", flickwordTab.innerHTML.substring(0, 200));\r\n      const flickwordNumbers = flickwordTab.querySelectorAll(",
  "ðŸŽ¯ Numbers in FlickWord tab:",
  ");\r\n\r\n    const bestElement =\r\n      document.querySelector(",
  ");\r\n\r\n    const winElement =\r\n      document.querySelector(",
  ");\r\n\r\n    const totalGamesElement =\r\n      document.querySelector(",
  ");\r\n\r\n    console.log(",
  "ðŸŽ¯ Updated streak to:",
  "ðŸŽ¯ Updated best to:",
  ";\r\n      console.log(",
  ", stats.winRate + ",
  ");\r\n    }\r\n\r\n    if (totalGamesElement) {\r\n      totalGamesElement.textContent = stats.totalGames;\r\n      console.log(",
  ".flickword-tab .stats-card",
  "ðŸŽ¯ Calling updateStatsCard after modal close...",
  "ðŸŽ¯ updateStatsCard called successfully after modal close",
  "ðŸŽ¯ No stats card found after modal close or updateStatsCard not available",
  "ðŸŽ¯ No stats elements found, trying again in 500ms... (retry",
  ",\r\n        MAX_STATS_UPDATE_RETRIES,\r\n        ",
  "ðŸŽ¯ Max retries reached, giving up on stats update",
  "ðŸŽ¯ Stats display update complete after modal close",
  "ðŸŽ¯ Processing game result:",
  "t reset streak to 0, just don",
  "ðŸŽ¯ Updated FlickWord stats:",
  "ðŸŽ¯ Updating stats display directly...",
  ");\r\n      const bestElement = document.querySelector(",
  ");\r\n      const winElement = document.querySelector(",
  ");\r\n\r\n      console.log(",
  ", winPercentage + ",
  ", allStatsElements.length);\r\n\r\n      console.log(",
  ");\r\n    } catch (error) {\r\n      console.error(",
  "ðŸŽ¯ Initializing FlickWord modal event listeners...",
  ");\r\n    const closeBtn = document.querySelector(",
  ");\r\n    const overlay = document.querySelector(",
  ", { openBtn, closeBtn, overlay });\r\n\r\n    if (openBtn) {\r\n      console.log(",
  ");\r\n      openBtn.addEventListener(",
  ", openFlickWordModal);\r\n    }\r\n\r\n    if (closeBtn) {\r\n      console.log(",
  ");\r\n      closeBtn.addEventListener(",
  ", (e) => {\r\n        console.log(",
  ");\r\n        closeFlickWordModal();\r\n      });\r\n    }\r\n\r\n    if (overlay) {\r\n      console.log(",
  ");\r\n      overlay.addEventListener(",
  ");\r\n        closeFlickWordModal();\r\n      });\r\n    }\r\n\r\n    // Handle escape key\r\n    document.addEventListener(",
  ") {\r\n        const modal = document.getElementById(",
  ");\r\n        if (modal && modal.getAttribute(",
  "ðŸŽ¯ Received message:",
  "ðŸŽ¯ Received close message from iframe",
  "ðŸŽ¯ Received game result from iframe:",
  ");\r\n      this.closeBtn = qs(",
  ");\r\n\r\n      this.init();\r\n    }\r\n\r\n    init() {\r\n      if (!this.modal || !this.frame) {\r\n        console.error(",
  "ðŸŽ® Opening Game Cards modal",
  "ðŸŽ® Closing Game Cards modal",
  "#clean-root .rail .card .poster-container",
  "img.poster",
  ".poster-fallback > img.poster-fallback-img",
  "calc(var(--card-w,154px) * 1.5)",
  "ðŸ§  Opening Trivia modal with data:",
  "ðŸ§  Trivia game mounted successfully",
  "ðŸ§  Error mounting Trivia game:",
  "ðŸ§  DailyTriviaBridge not available",
  ");\r\n    }\r\n  }\r\n\r\n  function closeTriviaModal() {\r\n    console.log(",
  "ðŸ§  Trivia game unmounted successfully",
  "ðŸ§  Error unmounting Trivia game:",
  "[Trivia] ",
  "Trivia unavailable.",
  "ðŸ§  Initializing Trivia modal event listeners...",
  "ðŸ§  Adding click listener to close button",
  "ðŸ§  Close button clicked!",
  "ðŸ§  Adding click listener to overlay",
  "ðŸ§  Overlay clicked!",
  "ðŸ§  Received message:",
  "ðŸ§  Received close message from iframe",
  "ðŸ”” Initializing notifications testability system...",
  "New Episode Available",
  "Breaking Bad S01E01 - Pilot is now available",
  "Episode Reminder",
  "The Office S02E01 - The Dundies airs in 2 hours",
  "The Office",
  "The Dundies",
  "New Show Recommendation",
  "Based on your watching history, you might like ",
  ",\r\n      show: ",
  ",\r\n      priority: ",
  ",\r\n      message: ",
  "ðŸ”” Notification mode set to:",
  "Live Mode",
  "Mock Mode",
  "ðŸ”” Showing mock notification:",
  ";\r\n\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    logEntry.innerHTML = ",
  "display: flex; justify-content: space-between; align-items: center;",
  "font-weight: 600;",
  "font-size: 12px; color: var(--color-text-secondary, #666);",
  "margin-top: 4px; color: var(--color-text-secondary, #666);",
  "mock-${Date.now()}",
  "ðŸ”” Testing notification system...",
  "Notifications are disabled. Enable them to test.",
  "Test notification from live mode",
  "\r\n      <h4 class=",
  ">ðŸ§ª Notification Testing</h4>\r\n      <p class=",
  ">Test and debug notification functionality</p>\r\n      \r\n      <div style=",
  ">\r\n        <button id=",
  ">\r\n          ðŸ§ª Test Notification\r\n        </button>\r\n        <button id=",
  ">\r\n          ðŸ—‘ï¸ Clear Log\r\n        </button>\r\n      </div>\r\n      \r\n      <div style=",
  ">\r\n        <label for=",
  ">\r\n          Notification Mode:\r\n        </label>\r\n        <select id=",
  ">\r\n          <option value=",
  ">Live Mode</option>\r\n          <option value=",
  ">Mock Mode</option>\r\n          <option value=",
  ">Disabled</option>\r\n        </select>\r\n        <div id=",
  "></div>\r\n      </div>\r\n      \r\n      <div>\r\n        <label style=",
  ">\r\n          Notification Log:\r\n        </label>\r\n        <div id=",
  ">\r\n            No notifications yet. Click ",
  " to start.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ",
  ">No notifications yet. Click ",
  " to start.</div>",
  "ðŸ”” Setting up mock mode...",
  "ðŸ”” Notifications testability system initialized",
  "Notifications: regions missing. Did you paste the HTML block into index.html?",
  "Close notification",
  "Close banner",
  "ðŸ“Š Performance Monitor loaded",
  "ðŸ“Š Home load started at:",
  "ðŸ“Š Home load completed in:",
  "ðŸ“Š Section ${sectionId} loaded in:",
  ");\r\n  }\r\n\r\n  // Log performance summary\r\n  function logPerformanceSummary() {\r\n    console.log(",
  ", performanceData.totalLoadTime.toFixed(2), ",
  ");\r\n\r\n    Object.entries(performanceData.sectionLoadTimes).forEach(([section, time]) => {\r\n      console.log(",
  ");\r\n    });\r\n\r\n    // Performance recommendations\r\n    if (performanceData.totalLoadTime > 1000) {\r\n      console.warn(",
  ");\r\n    }\r\n\r\n    if (performanceData.totalLoadTime > 2000) {\r\n      console.error(",
  ");\r\n    }\r\n\r\n    console.log(",
  "âœ… Performance Monitor ready",
  "Could not establish connection",
  "Chrome extension messaging suppressed:",
  "Chrome runtime.lastError suppressed:",
  "Unhandled promise rejection suppressed:",
  "youtube.com",
  "YouTube extension message suppressed:",
  "YouTube message error suppressed:",
  "Wrapped sendMessage callback error suppressed:",
  "ðŸ”§ Chrome extension messaging polyfill loaded",
  " = active\r\n  const isPro = () => localStorage.getItem(KEY) === ",
  "Pro ON",
  "Pro OFF",
  "ðŸ”’ Applying Pro gates...",
  ", gated.length, ",
  ");\r\n    const proStatus = isPro();\r\n    console.log(",
  ", proStatus);\r\n\r\n    gated.forEach((el) => {\r\n      const mode = (el.getAttribute(",
  ").toLowerCase();\r\n      // Clean previous state\r\n      el.classList.remove(",
  ");\r\n      el.removeAttribute(",
  ");\r\n      const tip = el.querySelector(",
  "this feature",
  "Pro required for ${feat}.",
  "Pro activated",
  "â­ Initializing Pro preview system...",
  ";\r\n  }\r\n\r\n  // Pro features list - single source of truth\r\n  const PRO_FEATURES = {\r\n    ",
  ": {\r\n      name: ",
  ",\r\n      description: ",
  ",\r\n      icon: ",
  ",\r\n      category: ",
  ",\r\n    },\r\n    ",
  ",\r\n    },\r\n    providers: {\r\n      name: ",
  ",\r\n    },\r\n    extras: {\r\n      name: ",
  ",\r\n    },\r\n    playlists: {\r\n      name: ",
  ",\r\n    },\r\n    stats: {\r\n      name: ",
  ",\r\n    },\r\n  };\r\n\r\n  // Show Pro preview modal\r\n  function showProPreview() {\r\n    console.log(",
  ");\r\n\r\n    const modal = document.createElement(",
  ";\r\n\r\n    const modalContent = document.createElement(",
  ");\r\n    modalContent.className = ",
  ">\r\n        <h3 style=",
  ">\r\n          ${category}\r\n        </h3>\r\n        <div class=",
  ">\r\n          ${features\r\n            .map(\r\n              (feature) => ",
  ">\r\n              <span style=",
  ">${feature.icon}</span>\r\n              <div style=",
  ">\r\n                <div style=",
  ">${feature.name}</div>\r\n                <div style=",
  ">\r\n                  ${feature.description}\r\n                </div>\r\n              </div>\r\n              <div style=",
  ">\r\n                PRO\r\n              </div>\r\n            </div>\r\n          ",
  ")}\r\n        </div>\r\n      </div>\r\n    ",
  ");\r\n\r\n    modalContent.innerHTML = ",
  "display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;",
  "margin: 0; color: var(--color-primary, #007bff); font-size: 24px; font-weight: 700;",
  ">Ã—</button>\r\n      </div>\r\n      \r\n      <p style=",
  ">\r\n        Unlock advanced features and premium content with Flicklet Pro. \r\n        Here",
  "ll get access to:\r\n      </p>\r\n      \r\n      ${featuresHTML}\r\n      \r\n      <div style=",
  ">\r\n          Ready to upgrade?\r\n        </h3>\r\n        <p style=",
  ">\r\n          Pro features are coming soon! Stay tuned for the launch.\r\n        </p>\r\n        <button id=",
  " onmouseover=",
  "var(--color-primary-dark, #0056b3)",
  " \r\n           onmouseout=",
  "var(--color-primary, #007bff)",
  ">\r\n          Get Notified When Pro Launches\r\n        </button>\r\n      </div>\r\n    ",
  "Thanks! We",
  "â­ Unknown Pro feature:",
  "â­ Showing preview for feature:",
  "${feature.name} is a Pro feature. ${feature.description}",
  ");\r\n\r\n    gatedElements.forEach((element) => {\r\n      // Add preview functionality\r\n      element.addEventListener(",
  ";\r\n        previewIndicator.textContent = ",
  ">\r\n        <span style=",
  ">${feature.icon}</span>\r\n        <div style=",
  ">${feature.name}</div>\r\n          <div style=",
  ">\r\n            ${feature.description}\r\n          </div>\r\n        </div>\r\n        <div style=",
  ">\r\n          PRO\r\n        </div>\r\n      </div>\r\n    ",
  "â­ Pro preview system initialized",
  "ðŸ’¬ Initializing enhanced quotes system...",
  "The best way to predict the future is to create it. - Peter Drucker",
  "Life is what happens to you while you",
  "t waste it living someone else",
  ",\r\n\r\n    // Sarcastic/Snarky TV & Movie themed\r\n    ",
  "t always watch TV, but when I do, I prefer shows that don",
  "m not addicted to TV shows. I can stop watching anytime I want. Just not right now.",
  "My watchlist is like a black holeâ€”things go in, but they never come out.",
  "I have a PhD in binge-watching. My thesis was on ",
  "t have a problem with spoilers. I have a problem with people who think I care about spoilers.",
  "The best part about streaming services? They never judge you for watching the same show 47 times.",
  "m not avoiding social interaction. I",
  "t watch bad movies. I watch ",
  "re good",
  "s a fine line.",
  "The only thing worse than a cliffhanger is waiting a year to find out what happens next.",
  "I have a love-hate relationship with TV shows. I love them; they hate my sleep schedule.",
  "My watchlist is longer than my grocery list, and somehow more important.",
  "I don",
  "s cheaper.",
  "The only thing more dramatic than a soap opera is my reaction to a plot twist.",
  "m not procrastinating. I",
  "t have commitment issues. I have commitment issues with TV shows that get cancelled.",
  "The only thing more predictable than a rom-com is my decision to watch another rom-com.",
  "ðŸŽ¬ Plot twist: You",
  "s story.",
  "ðŸ¿ Popcorn is just a socially acceptable way to eat butter for dinner.",
  "ðŸ“º My TV remote has more buttons than my car, and I use it more often.",
  "ðŸŽ­ I don",
  "m not crying during sad movies.",
  "ðŸŽª My life is like a reality show, but with better editing and worse ratings.",
  "ðŸŽ¨ I don",
  "next episode",
  "m not a clown, but I do make questionable life choices based on TV shows.",
  "m currently at 0.001%.",
  "ðŸŽª My circus is my watchlist, and I",
  "t need a mirror. I have TV shows to reflect on my life choices.",
  "ðŸŽ¨ My masterpiece is the perfect binge-watching setup.",
  "ðŸŽµ My soundtrack is the sound of my own voice saying ",
  "s not looking good.",
  "ðŸŽª My performance is pretending I",
  ",\r\n\r\n    // Tech & Modern Life\r\n    ",
  "m not a robot, but I do have automated responses for ",
  "t need Google. I have a photographic memory of every TV show I",
  "s, and that",
  "s all TV.",
  "ðŸ† My achievements include finishing entire seasons in one sitting.",
  "ðŸ¥‡ My gold medal is for the most creative excuses to avoid social plans.",
  "To watch or not to watch, that is the question. The answer is always ",
  "s probably in season 3, episode 7.",
  "I have not failed. I",
  "t work for me.",
  "The best way to find out if you can trust somebody is to watch TV with them.",
  "Life is like a box of chocolates, but TV shows are like a box of surprises.",
  "The only thing constant in life is change... and my love for TV shows.",
  "I have a dream that one day my watchlist will be empty. Just kidding, that",
  "best way",
  "great work",
  ") ||\r\n          q.includes(",
  "),\r\n      ),\r\n      philosophical: quotes.filter(\r\n        (q) =>\r\n          q.includes(",
  "quote_${quoteIndex + 1}",
  "ðŸ’¬ Failed to save quote deck:",
  "ðŸ’¬ Cleared corrupted quote deck data",
  "ðŸ’¬ Failed to load quote deck:",
  "ðŸ’¬ Quote rotation started with",
  "ms interval",
  "ðŸ’¬ Quote rotation stopped",
  "opacity 0.3s ease",
  ";\r\n\r\n      setTimeout(() => {\r\n        quoteText.textContent = newQuote;\r\n        quoteText.style.opacity = ",
  "ðŸ’¬ Enhanced quotes system initialized with",
  " });\r\n        FlickletDebug.info(",
  "Unknown failure",
  "âŒ ${testName}: FAIL - ${result}",
  "ðŸ’¥ ${testName}: ERROR - ${error.message}",
  "FlickletDebug not available",
  "FlickletDebug.info not a function",
  "FlickletDebug.error not a function",
  "FlickletDebug.warn not a function",
  "HomeSectionsConfig not available",
  "ALL_SECTIONS not an array",
  "getSections not a function",
  "getSectionElements not a function",
  "getSections did not return array",
  "DOMCache not available",
  "DOMCache.get not a function",
  "DOMCache.getMultiple not a function",
  "DOM caching not working correctly",
  "ErrorHandler not available",
  "ErrorHandler.handle not a function",
  "ErrorHandler.safe not a function",
  "ErrorHandler.safe not working correctly",
  "VisibilityManager not available",
  "VisibilityManager.show not a function",
  "VisibilityManager.hide not a function",
  "manageHomeSections not a function",
  "FlickletUtils not available",
  "createElement not a function",
  "storage not available",
  "storage.get not a function",
  "createElement not working correctly",
  "FlickletApp not available",
  "switchToTab not a function",
  "init not a function",
  "Tab switch to ${tab} failed - current tab is ${window.FlickletApp.currentTab}",
  "Error switching to tab ${tab}: ${error.message}",
  "Home section ${sectionId} is not visible on home tab",
  "Home section ${sectionId} is not hidden on watching tab",
  "performSearch not available",
  "clearSearch not available",
  "Search input not found",
  "Search button not found",
  "saveAppData not available",
  "loadAppData not available",
  "Data persistence not working correctly",
  "ðŸ§ª Starting refactor validation tests...",
  "Debug System",
  "Home Sections Config",
  "DOM Caching",
  "Error Handling",
  "Visibility Management",
  "Common Utilities",
  "Core App Functionality",
  "Tab Switching",
  "Home Sections Visibility",
  "Search Functionality",
  "Data Persistence",
  "ðŸ“Š Test Results Summary:",
  "âœ… Passed: ${testResults.passed}",
  "âŒ Failed: ${testResults.failed}",
  "ðŸ“ˆ Pass Rate: ${passRate}%",
  "âš ï¸ Some tests failed - check functionality",
  "  - ${test.name}: ${test.message}",
  "ðŸŽ‰ All tests passed - refactoring successful!",
  "ðŸ§ª Refactor Validation system loaded",
  ";\r\n    const allowed = new Set([",
  "ðŸ”§ Route Fix: Removing hash",
  ", location.pathname);\r\n    }\r\n  }\r\n\r\n  function ensureTopOnLoad() {\r\n    // Ensure we",
  "ðŸ”§ Route Fix: Scrolled to top on initial load",
  "ðŸ”§ Route Fix: Correcting scroll position after load",
  "FlickletDebug.error(",
  "FlickletDebug.warn(",
  "FlickletDebug.info(",
  "ll do manual replacements in the browser\n      console.log(",
  ", filePath);\n      return true;\n    } catch (error) {\n      console.error(",
  "ðŸ”§ Safe Console Replacement utility loaded",
  ".section, .stats, .binge-banner, .section-header, .list-container",
  "re already positioned correctly in HTML\r\n      const searchResults = $(",
  ");\r\n      if (searchResults) {\r\n        // DON",
  "re already in the right place\r\n        searchResults.style.display = ",
  ";\r\n        searchResults.classList.remove(",
  ");\r\n      }\r\n    }\r\n  }\r\n\r\n  function hideResultsUI() {\r\n    // Hide search results\r\n    const searchResults = $(",
  ");\r\n    if (searchResults) {\r\n      searchResults.style.display = ",
  ";\r\n      searchResults.classList.add(",
  ");\r\n\r\n      // DON",
  ");\r\n    if (q) q.value = ",
  ";\r\n    const g = document.querySelector(",
  ");\r\n    if (g) g.value = ",
  "performSearch error",
  "s previous choice\r\n  const hidden = localStorage.getItem(KEY) === ",
  ";\r\n  if (hidden) wrap.style.display = ",
  ";\r\n\r\n  // Open/close\r\n  function openPop() {\r\n    if (wrap.style.display === ",
  ") return;\r\n    positionPop();\r\n    pop.hidden = false;\r\n    trigger.setAttribute(",
  "t close if clicking on modal elements\r\n    if (e.target.closest(",
  ") || e.target.closest(",
  "\r\n  dontShow.addEventListener(",
  ", () => {\r\n    if (dontShow.checked) {\r\n      localStorage.setItem(KEY, ",
  ");\r\n      closePop();\r\n      wrap.style.display = ",
  ";\r\n      window.Notify?.info?.(",
  ");\r\n    } else {\r\n      localStorage.removeItem(KEY);\r\n      window.Notify?.info?.(",
  ");\r\n    }\r\n  });\r\n\r\n  // Wire\r\n  trigger.addEventListener(",
  ", () => (pop.hidden ? openPop() : closePop()));\r\n  closeBtn.addEventListener(",
  ", closePop);\r\n\r\n  // Optional first-run nudge: auto-open once if user hasn",
  ") || active.matches(",
  "ðŸ—‚ï¸ Refreshing series organizer content",
  "ðŸ—‚ï¸ Cleared series cache:",
  "No series selected.",
  ".season-toggle",
  ".season",
  ".episodes",
  ";\r\n    }\r\n  }\r\n\r\n  function onKey(e) {\r\n    const btn = e.target.closest(",
  ");\r\n    if (!btn) return;\r\n    if (e.key === ",
  ") {\r\n      e.preventDefault();\r\n      btn.click();\r\n    }\r\n    if (e.key === ",
  ") {\r\n      const wrap = btn.closest(",
  ");\r\n      wrap.setAttribute(",
  "Season ${i}",
  ">${esc(s.title || ",
  ")}</h2>\r\n        <div class=",
  " aria-live=",
  ">${totalSeasons} season${totalSeasons !== 1 ? ",
  "} â€¢ ~${totalEps} episodes</div>\r\n      </div>",
  "Season ${sn}",
  ";\r\n    return ",
  "${count} eps",
  "}</span>\r\n        </button>\r\n        <div id=",
  "></div>\r\n      </section>",
  ">No episodes available.</div>",
  ");\r\n    const hasMore = episodes.length > 5;\r\n    const moreBtn = hasMore\r\n      ? ",
  "\r\n      : ",
  ";\r\n  }\r\n\r\n  function epHTML(ep) {\r\n    const n = ep.episode_number ?? ",
  ";\r\n    const title = ep.name || ",
  ";\r\n    const date = ep.air_date ? ",
  ";\r\n    const overview = ep.overview ? ",
  ";\r\n  }\r\n\r\n  // Handle ",
  " + action buttons\r\n  mount.addEventListener(",
  ", (e) => {\r\n    const more = e.target.closest(",
  ");\r\n    if (more) {\r\n      const sn = Number(more.getAttribute(",
  "));\r\n      const listWrap = mount.querySelector(",
  ");\r\n      more.remove();\r\n      return;\r\n    }\r\n    const actionBtn = e.target.closest(",
  ");\r\n    if (actionBtn) {\r\n      const act = actionBtn.dataset.action;\r\n      const ep = actionBtn.closest(",
  ")?.dataset?.ep;\r\n      if (act === ",
  ") {\r\n        // Wire to your app",
  "Marked E${ep} watched",
  "Reminder set for E${ep}",
  "]/g,\r\n      (m) => ({ ",
  ").split(",
  ").map(Number);\r\n    if (!y || !m || !d) return ",
  ";\r\n    const dt = new Date(Date.UTC(y, m - 1, d));\r\n    return dt.toLocaleDateString(undefined, { year: ",
  ", month: ",
  ", day: ",
  "Episode ${i}",
  ", overview: ",
  " });\r\n    }\r\n    return out;\r\n  }\r\n  function emptyState(msg) {\r\n    return ",
  "padding:12px; opacity:.7;",
  "], #settingsSection, [data-section=",
  "], #settings",
  ".content, .settings-body, .section__body, .tab-panel__body",
  "âš™ï¸ My Rows settings module loaded",
  "âŒ No root element provided for My Rows settings",
  "ðŸŽ›ï¸ Rendering My Rows settings",
  ">ðŸŽ¯ <span data-i18n=",
  ">My Rows</span></h3>\r\n        <p class=",
  " data-i18n=",
  ">Choose what content appears in your personalized rows on the home screen</p>\r\n        \r\n        <div class=",
  ">\r\n          ${[0, 1]\r\n            .map(\r\n              (i) => ",
  "settings-control-group my-row-slot",
  "settings.row",
  ">None</option>\r\n                ${(window.ROW_PRESETS || [])\r\n                  .map(\r\n                    (preset) => ",
  "${preset.key}",
  ",\r\n                  )\r\n                  .join(",
  ")}\r\n              </select>\r\n              <p class=",
  ">Select a content type for this row</p>\r\n            </div>\r\n          ",
  ")}\r\n        </div>\r\n\r\n        <div class=",
  ">\r\n            ðŸ’¾ <span data-i18n=",
  ">Save</span>\r\n          </button>\r\n          <button class=",
  ">\r\n            ðŸ—‘ï¸ <span data-i18n=",
  ">Clear All</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=",
  ">\r\n          <h4 class=",
  ">Preview</h4>\r\n          <p class=",
  ">Your personalized rows will appear on the home screen in this order</p>\r\n          <div class=",
  "\r\n                <div class=",
  ">\r\n                  <div class=",
  ">\r\n                    <span class=",
  ">\r\n                      ${window.t ? window.t(",
  ", { n: i + 1 }) : ",
  "}\r\n                    </span>\r\n                    <span class=",
  ">\r\n                      ${preset ? (window.t ? window.t(preset.labelKey) : preset.labelKey) : window.t ? window.t(",
  "}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ",
  ")}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ",
  ".settings-select",
  ".settings-select[data-slot]",
  "settings.saved",
  "Settings saved!",
  "âœ… My rows saved successfully:",
  "Failed to save rows",
  "setMyRows function not available",
  "âŒ Failed to save My Rows:",
  "settings.save_error",
  "Failed to save settings",
  "settings.clear_confirm",
  "Are you sure you want to clear all rows?",
  "settings.cleared",
  "Rows cleared!",
  "âœ… My rows cleared",
  "âŒ Failed to clear My Rows:",
  ".preview-row",
  ".preview-row-content",
  "settings.none",
  "âš™ï¸ Initializing settings tie-ins system...",
  "ðŸŒ Ensuring Spanish persistence...",
  ") {\r\n      localStorage.setItem(",
  "ðŸŒ Language manager save failed:",
  "ðŸŒ Spanish persistence ensured:",
  "ðŸ”˜ Ensuring FOBs visibility...",
  ".fab, .fab-left, .fab-stack",
  ";\r\n      fab.style.visibility = ",
  ";\r\n      fab.style.opacity = ",
  ";\r\n\r\n      // Ensure FABs are actionable\r\n      fab.style.pointerEvents = ",
  ";\r\n      fab.style.cursor = ",
  ";\r\n\r\n      // Remove any disabled states\r\n      fab.disabled = false;\r\n      fab.removeAttribute(",
  ");\r\n\r\n      // Ensure proper positioning\r\n      if (fab.classList.contains(",
  ")) {\r\n        fab.style.position = ",
  ";\r\n        fab.style.marginRight = ",
  ";\r\n      }\r\n\r\n      if (fab.classList.contains(",
  ")) {\r\n        fab.style.display = ",
  ";\r\n        fab.style.flexDirection = ",
  ";\r\n        fab.style.gap = ",
  ";\r\n        fab.style.marginLeft = ",
  ".tab-section:not([style*=",
  ");\r\n    if (activePanel) {\r\n      let fabDock = activePanel.querySelector(",
  ");\r\n      if (!fabDock) {\r\n        fabDock = document.createElement(",
  ");\r\n        fabDock.className = ",
  "ðŸ”˜ FOBs visibility ensured",
  "ðŸ“º Ensuring Episode Tracking integration...",
  "ðŸ“º Episode tracking toggle not found",
  "ðŸ“º Episode tracking toggle changed:",
  "ðŸ“º Episode Tracking integration ensured",
  "ðŸ“º Setting episode tracking to:",
  "ðŸ“º Updating episode tracking UI:",
  ");\r\n\r\n    episodeButtons.forEach((button) => {\r\n      if (enabled) {\r\n        button.style.display = ",
  ";\r\n        button.disabled = false;\r\n        button.removeAttribute(",
  ");\r\n      } else {\r\n        button.style.display = ",
  ";\r\n        button.disabled = true;\r\n        button.setAttribute(",
  ".episode-tracking-indicator",
  "ðŸ“º Episode tracking UI updated",
  "ðŸ’¾ Ensuring settings persistence...",
  ");\r\n    } else {\r\n      localStorage.setItem(",
  "ðŸ’¾ Settings persistence ensured",
  "âš™ï¸ Settings tie-ins system initialized",
  ".tab-button",
  "ðŸ”— Initializing enhanced share system...",
  "1.0",
  "${baseUrl}?share=${compressed}",
  "ðŸ”— Failed to generate shareable URL:",
  "ðŸ”— Failed to parse shareable URL:",
  "ðŸ“º My TV & Movie Lists\\n\\n",
  "ðŸ”´ Currently Watching:\\n",
  "Unknown Service",
  "  â€¢ ${item.title} (${network})\\n",
  ";\r\n    }\r\n\r\n    if (selectedItems.wishlist.length > 0) {\r\n      shareText += ",
  ";\r\n      selectedItems.wishlist.forEach((item) => {\r\n        const network = item.networks?.[0] || ",
  ";\r\n        shareText += ",
  ";\r\n      });\r\n      shareText += ",
  ";\r\n    }\r\n\r\n    if (selectedItems.watched.length > 0) {\r\n      shareText += ",
  ";\r\n      selectedItems.watched.forEach((item) => {\r\n        const network = item.networks?.[0] || ",
  "\\nðŸ”— View this list online: ${shareUrl}",
  "ðŸ”— Clipboard API failed, trying fallback:",
  "Copy failed",
  "ðŸ”— Fallback copy failed:",
  "ðŸ”— Copying share list...",
  "No items selected to share",
  "No items selected",
  "ðŸ”— Share text copied to clipboard",
  "List copied to clipboard!",
  "ðŸ”— Failed to copy:",
  "Failed to copy list. Please try again.",
  "ðŸ”— Generating shareable link...",
  "Shareable link copied to clipboard!",
  "ðŸ”— Failed to copy URL:",
  "Link generated but failed to copy. Check the text area.",
  "ðŸ”— Loading shared list:",
  "Loading shared list with ${Object.values(shareData.items || {}).flat().length} items...",
  "ðŸ”— Shared list data:",
  "ðŸ”— Enhanced share system initialized",
  ";\r\n\r\n  // Route guard: don",
  "Share this page or item.",
  "Share modal already opened â€” skipping",
  ";\r\n    // focus first control\r\n    requestAnimationFrame(() => urlInput.focus());\r\n    document.addEventListener(",
  ", onKey, true);\r\n    document.addEventListener(",
  ", trapFocus, true);\r\n  }\r\n\r\n  function close() {\r\n    modal.hidden = true;\r\n    document.removeEventListener(",
  ", onKey, true);\r\n    document.removeEventListener(",
  "Shared.",
  "Link copied.",
  "Link copied",
  "Copy failed â€” select the link and copy manually.",
  "ðŸ”— Share button found and bound",
  "ðŸ”— Share button clicked",
  "ðŸ”— Share button not found",
  "ðŸ” Search state changed:",
  "ðŸ”„ Current tab changed:",
  "ðŸ” Search mode - showing tab: ${tabId}",
  "${this.currentTab}Tab",
  "âœ… Hidden current tab: ${tabId}",
  "âœ… Shown tab: ${tabId}",
  "[SimpleTabManager] LEGACY SHIM: Tab switching disabled - delegating to nav engine:",
  "[SimpleTabManager] LEGACY MODE: Using old tab system",
  "[SimpleTabManager] Nav engine not available - falling back to legacy",
  ";\r\n        }\r\n      });\r\n\r\n      // Update home sections visibility\r\n      this.updateHomeSections(tab === ",
  ");\r\n    },\r\n\r\n    // Clear search\r\n    clearSearch: function () {\r\n      FlickletDebug.info(",
  ");\r\n\r\n      // Clear search input\r\n      const searchInput = document.getElementById(",
  ");\r\n      if (searchInput) {\r\n        searchInput.value = ",
  ";\r\n      }\r\n\r\n      // Hide search results\r\n      const searchResults = document.getElementById(",
  ");\r\n      if (searchResults) {\r\n        searchResults.style.display = ",
  "ðŸ”„ SimpleTabManager handling tab switch:",
  "isSearching",
  "ðŸ§© Simple Tab Manager loaded",
  "Alien: Earth â€” Ep 6 Teaser",
  "Tensions rise as powerful enemies confront each otherâ€¦",
  ".spotlight-date",
  "(prefers-reduced-motion: reduce)",
  "Featured clip",
  ",\r\n      mute: ",
  ",\r\n      playsinline: ",
  ",\r\n      rel: ",
  ",\r\n      modestbranding: ",
  ",\r\n      controls: ",
  ",\r\n    });\r\n    const src = toYouTubeEmbed(item.videoUrl) + (params.toString() ? ",
  ");\r\n    const iframe = document.createElement(",
  ");\r\n    iframe.setAttribute(",
  ", item.title || ",
  "allow-scripts allow-same-origin allow-presentation",
  "autoplay; encrypted-media; picture-in-picture",
  ";\r\n    mediaEl.appendChild(iframe);\r\n    player = {\r\n      kind: ",
  "t fight YouTube",
  ";\r\n    src.type = guessMime(item.videoUrl);\r\n    video.appendChild(src);\r\n\r\n    mediaEl.innerHTML = ",
  ";\r\n    mediaEl.appendChild(video);\r\n\r\n    player = {\r\n      kind: ",
  "t care â€” user can press Play\r\n    video.addEventListener(",
  ", () => console.warn(",
  ", item.videoUrl));\r\n  }\r\n\r\n  // Controls\r\n  playBtn.addEventListener(",
  ", () => player?.play && player.play());\r\n  muteBtn.addEventListener(",
  "Featured from Trending",
  ";\r\n      if (u.hostname.includes(",
  ")) id = u.pathname.slice(1);\r\n      else id = u.searchParams.get(",
  ";\r\n      return id ? ",
  " : url;\r\n    } catch (_) {\r\n      return url;\r\n    }\r\n  }\r\n  function guessMime(u) {\r\n    if (!u) return ",
  ";\r\n    const ext = u.split(",
  ")[0].split(",
  ").pop().toLowerCase();\r\n    return ext === ",
  " : ext === ",
  ";\r\n  }\r\n  function niceDate(s) {\r\n    // expects YYYY-MM-DD\r\n    const [y, m, d] = s.split(",
  ").map(Number);\r\n    const dt = new Date(Date.UTC(y, m - 1, d));\r\n    return dt.toLocaleDateString(undefined, { year: ",
  " });\r\n  }\r\n  function today() {\r\n    const d = new Date();\r\n    return d.toLocaleDateString(undefined, { year: ",
  "ðŸ”§ Tab Position Fix loaded",
  "âš ï¸ Required elements not found, retrying...",
  "ðŸ”§ Moving tab container to correct position...",
  "âœ… Tab container repositioned",
  "âœ… Tab container is in correct position",
  "ðŸ§ª [TEST DATA] Starting data restoration...",
  "ðŸ§¹ [TEST DATA] Cleared localStorage",
  "Game of Thrones",
  "Drama â€¢ 2011-2019",
  "Nine noble families fight for control over the mythical lands of Westeros.",
  "\n                },\n                {\n                    id: 1396,\n                    title: ",
  ",\n                    meta: ",
  ",\n                    blurb: ",
  ",\n                    poster: ",
  ",\n                    media_type: ",
  "\n                },\n                {\n                    id: 1398,\n                    title: ",
  "s deputy Rick Grimes awakens from a coma to a post-apocalyptic world.",
  "Sci-Fi Horror â€¢ 2016-Present",
  "When a young boy vanishes, a small town uncovers a mystery involving secret experiments.",
  "\n                },\n                {\n                    id: 1395,\n                    title: ",
  "Comedy â€¢ 2005-2013",
  "A mockumentary about a group of office workers where the workday consists of ego clashes.",
  "\n                }\n            ]\n        },\n        settings: {\n            theme: ",
  ",\n            lang: ",
  ",\n            username: ",
  ",\n            displayName: ",
  "\n        }\n    };\n    \n    // Store test data\n    localStorage.setItem(",
  ", JSON.stringify(testAppData));\n    console.log(",
  "ðŸ”„ [TEST DATA] Updated window.appData",
  "ðŸ“¡ [TEST DATA] Dispatched app:data:ready event",
  "ðŸ“¡ [TEST DATA] Dispatched cards:changed event",
  "ðŸ”„ [TEST DATA] Triggered HomeClean refresh",
  "âš ï¸ [TEST DATA] HomeClean not mounted yet",
  "ðŸš€ [TEST DATA] Force mounting HomeClean...",
  "ðŸš€ [TEST DATA] Force mount result:",
  "âœ… [TEST DATA] Data restoration complete!",
  "ðŸ“Š [TEST DATA] Summary:",
  "   - Currently Watching: 3 shows",
  "   - Wishlist: 2 shows",
  "   - Watched: 1 show",
  "   - Total: 6 shows across tabs",
  ";\r\n\r\n  // Return placeholder if no path\r\n  if (!path) return ",
  ";\r\n\r\n  const base = ",
  ";\r\n  const cleanPath = path || ",
  "; // keep the leading ",
  "\r\n\r\n  const joinTMDB = (size, p) => ",
  "${s200} 200w, ${s300} 300w, ${s342} 342w, ${s500} 500w",
  ") {\r\n  if (!poster_path) {\r\n    const img = document.createElement(",
  ");\r\n    img.alt = title || ",
  ";\r\n    img.loading = ",
  ";\r\n    img.decoding = ",
  ";\r\n    img.src = ",
  ";\r\n    return img;\r\n  }\r\n\r\n  const base = ",
  ";\r\n  const path = poster_path || ",
  ";\r\n  img.loading = ",
  ";\r\n  img.decoding = ",
  ";\r\n\r\n  // set responsive attrs first\r\n  img.setAttribute(",
  "${s200} 200w, ${s300} 300w, ${s500} 500w",
  "(max-width: 480px) 148px, 200px",
  ";\r\n  const TTL_MS = 24 * 60 * 60 * 1000; // 24h\r\n  const STAMP_KEY = ",
  "; // stores {",
  ": <ms>}\r\n\r\n  console.log(",
  ", {\r\n    API_KEY: API_KEY ? ",
  ",\r\n  });\r\n\r\n  // If curated keys exist and not stale, bail early\r\n  if (!needsSeed()) {\r\n    console.log(",
  ");\r\n    return;\r\n  }\r\n\r\n  // No key? Don",
  "ðŸ”‘ TMDB API key not found - skipping TMDB seeding",
  "   Check: window.__TMDB_API_KEY__, window.TMDB_CONFIG.apiKey, or window.TMDB_API_KEY",
  "ðŸŒ± TMDB Seeder: Clearing curated data for fresh TMDB data",
  "ðŸŒ± TMDB Seeder: Proceeding with seeding...",
  "ðŸŒ± Seeder needsSeed check:",
  "${trending.length} chars",
  "${staff.length} chars",
  "${newData.length} chars",
  "ðŸŒ± Seeder: Starting seed process...",
  "ðŸŒ± Seeder: Fetching from TMDB...",
  "ðŸŒ± Seeder: TMDB response:",
  "ðŸŒ± Seeder: Total items collected:",
  "ðŸŒ± Seeder: Saved trending data:",
  "ðŸŒ± Seeder: Saved staff data:",
  "ðŸŒ± Seeder: Saved new data:",
  "ðŸŒ± Seeder: Seed process completed successfully",
  "ðŸŒ± Seeder: Error during seed process:",
  "HTTP ${res.status}",
  "ðŸŽ¬ TMDB API client loading...",
  "/.netlify/functions/tmdb-proxy",
  "Rate limit exceeded. Please try again later.",
  "Failed to get language from localStorage:",
  ")[0]; // Extract language code from ",
  " -> ",
  "\n    }\n\n    // Default fallback\n    return ",
  ";\n  }\n\n  function mapToTMDBLocale(lang) {\n    const langMap = {\n      en: ",
  ",\n      es: ",
  ",\n      fr: ",
  ",\n      de: ",
  ",\n      it: ",
  ",\n      pt: ",
  ",\n      ru: ",
  ",\n      ja: ",
  ",\n      ko: ",
  ",\n      zh: ",
  ",\n    };\n\n    return langMap[lang] || ",
  "[tmdb] 404",
  "[tmdb] error",
  "âœ… TMDB",
  "results:${data.results.length}",
  "[tmdb] Fetching details for ${mediaType} ID: ${id}",
  "[tmdb] Failed to fetch details for ${mediaType}/${id}:",
  "[tmdb] Error fetching details for ${mediaType}/${id}:",
  ");\n      const id = item.id || item.tmdb_id || item.tmdbId;\n      \n      if (!id) {\n        console.warn(",
  "[tmdb] No details found for item:",
  "[tmdb] Enhanced item: ${enhanced.title || enhanced.name} with ${enhanced.genres?.length || 0} genres",
  "[tmdb] Error enhancing item:",
  "[tmdb] Starting enhancement of all existing items...",
  "[tmdb] No appData found",
  "[tmdb] Enhancing TV ${listName} items...",
  "[tmdb] Item ${item.title || item.name} already enhanced, skipping",
  "[tmdb] Enhanced TV item: ${enhanced.title || enhanced.name}",
  "[tmdb] Failed to enhance TV item ${item.title || item.name}:",
  "[tmdb] Enhancing movie ${listName} items...",
  "[tmdb] Enhanced movie item: ${enhanced.title || enhanced.name}",
  "[tmdb] Failed to enhance movie item ${item.title || item.name}:",
  "[tmdb] Enhancement complete: ${enhancedCount}/${totalCount} items enhanced",
  "[tmdb] Enhanced data saved to localStorage",
  "[tmdb] Enhanced data saved to Firebase",
  "[tmdb] UI updated with enhanced data",
  "âœ… TMDB API client loaded successfully",
  "t exist, skip initialization\r\n  if (!qEl || !cEl || !fEl || !nBtn) {\r\n    console.warn(",
  ");\r\n    return;\r\n  }\r\n\r\n  // Safety check - if statsEl doesn",
  "trivia-stats element not found, creating placeholder",
  ";\r\n\r\n    // Check cache first\r\n    if (triviaCache && lastFetchDate === today) {\r\n      console.log(",
  ");\r\n      return triviaCache;\r\n    }\r\n\r\n    try {\r\n      console.log(",
  ", langCode);\r\n      const response = await fetch(\r\n        ",
  ",\r\n      );\r\n\r\n      if (response.status === 429) {\r\n        console.warn(",
  "ðŸ§  Trivia questions fetched successfully:",
  "Invalid API response",
  "ðŸ§  Failed to fetch trivia from API, using fallback:",
  "ðŸ§  Refreshing trivia for language change",
  "ðŸ§  Current language for trivia:",
  "ðŸ§  New trivia question:",
  "statsEl not available, skipping stats render",
  " â€¢ Completed today",
  "${streakText}: ${streak}${last === today ? completedText : ",
  ";\r\n  }\r\n\r\n  function renderQuestion(q, isLocked) {\r\n    if (!qEl) {\r\n      console.warn(",
  ");\r\n      return;\r\n    }\r\n    qEl.textContent = q.q;\r\n    if (cEl) cEl.innerHTML = ",
  ";\r\n    if (fEl) fEl.textContent = ",
  ";\r\n    if (nBtn) nBtn.hidden = true;\r\n\r\n    q.choices.forEach((text, idx) => {\r\n      const li = document.createElement(",
  ");\r\n      li.dataset.idx = idx;\r\n      li.textContent = text;\r\n\r\n      if (isLocked) {\r\n        li.setAttribute(",
  ";\r\n        li.style.cursor = ",
  ";\r\n      } else {\r\n        li.addEventListener(",
  ", () => choose(idx));\r\n        li.addEventListener(",
  ", (e) => {\r\n          if (e.key === ",
  "Come back tomorrow for a new question.",
  "ðŸ§  No current question available for trivia",
  "Correct!",
  "Nope â€” correct answer is",
  "${correctText} âœ”",
  "${incorrectText} ",
  ";\r\n\r\n    // Notify (optional)\r\n    if (window.Notify) {\r\n      const streakUpText = t(",
  ";\r\n      const tryAgainText = t(",
  ";\r\n    nBtn.style.position = ",
  ";\r\n    nBtn.style.zIndex = ",
  ";\r\n    nBtn.textContent = isCorrect\r\n      ? t(",
  "\r\n      : t(",
  ";\r\n    nBtn.onclick = () => {\r\n      try {\r\n        loadNextQuestion().catch((error) => {\r\n          console.error(",
  ", error);\r\n          // Show error message to user\r\n          fEl.textContent = ",
  ";\r\n          nBtn.hidden = true;\r\n        });\r\n      } catch (error) {\r\n        console.error(",
  ", error);\r\n        fEl.textContent = ",
  "ðŸ§  Next button shown after answer",
  "ðŸ§  Loading next trivia question...",
  ";\r\n      nBtn.hidden = true;\r\n      nBtn.style.display = ",
  "ðŸ§  Next question loaded:",
  "ðŸ§  Error loading next question:",
  "Error loading next question. Please refresh the page.",
  "ðŸŽ¨ [VISUAL TEST] Starting visual card test...",
  "ðŸŽ¨ [VISUAL TEST] âŒ No clean-root found",
  "ðŸŽ¨ [VISUAL TEST] âœ… Found clean-root",
  "ðŸŽ¨ [VISUAL TEST] Found cards:",
  "ðŸŽ¨ [VISUAL TEST] âŒ No cards found",
  "ðŸŽ¨ [VISUAL TEST] Testing card ${index + 1}:",
  "ðŸŽ¨ [VISUAL TEST] Card ${index + 1} styles:",
  "3px solid red",
  "0 0 10px rgba(255,0,0,0.5)",
  "2px 4px",
  "${width} Ã— ${height}",
  "ðŸŽ¨ [VISUAL TEST] âœ… Added visual indicators to card ${index + 1}",
  "ðŸŽ¨ [VISUAL TEST] Found rails:",
  "ðŸŽ¨ [VISUAL TEST] Rail ${index + 1} styles:",
  "2px solid blue",
  "0 0 5px rgba(0,0,255,0.3)",
  "ðŸŽ¨ [VISUAL TEST] âœ… Visual indicators added! Look for red-bordered cards and blue-bordered rails",
  "Test Holiday Chips Fix",
  "Holiday Chips Test",
  "This page tests if holiday chips stay visible after removing the old rendering system.",
  "Test Results:",
  "âœ… Holiday chips should now stay visible permanently",
  "Holiday Chip Fix Test",
  "ðŸŽ¯ Holiday Chip Fix Test",
  "ðŸ§ª Starting HomeClean QA Tests...",
  "âŒ QA Tests failed:",
  "ðŸ” Testing component structure...",
  "HomeClean container exists",
  "5 rails exist",
  "Section headers exist",
  "#home-clean .section-header",
  "ðŸŽ´ Testing card rendering...",
  "Currently Watching cards rendered",
  "#cw-rail .card",
  "Next Up cards rendered",
  "#up-next-rail .card",
  "For You cards rendered",
  "#drama-rail .card, #comedy-rail .card, #horror-rail .card",
  "Cards have proper dimensions",
  "ðŸ”˜ Testing action buttons...",
  "CW cards have 4 action buttons",
  "));\r\n                }\r\n            },\r\n            {\r\n                name: ",
  ",\r\n                test: () => {\r\n                    const forYouCard = document.querySelector(",
  ");\r\n                }\r\n            },\r\n            {\r\n                name: ",
  ",\r\n                test: () => {\r\n                    const allCards = document.querySelectorAll(",
  ");\r\n                    return Array.from(allCards).every(card => !!card.querySelector(",
  ",\r\n                test: () => {\r\n                    const wantBtn = document.querySelector(",
  "ðŸŽ­ Testing holiday modal...",
  "Holiday modal opens",
  "Holiday modal has options",
  "Holiday modal closes",
  ".modal-close",
  "Holiday Modal",
  "ðŸ“Š Testing data layer...",
  "Data layer exists",
  "Mock mode toggle works",
  "Cache functionality works",
  "Data Layer",
  "âš¡ Testing performance...",
  "Component loads quickly",
  "#home-clean .card",
  "Images have lazy loading",
  "#home-clean .poster",
  "Scroll snapping works",
  "#home-clean .rail",
  ");\r\n    }\r\n\r\n    /**\r\n     * Generate test report\r\n     */\r\n    generateReport() {\r\n        console.log(",
  ";\r\n                console.log(",
  "\\nðŸ“Š Summary: ${passedTests}/${totalTests} tests passed (${passRate}%)",
  "100.0",
  "ðŸŽ‰ All tests passed! Component is ready for production.",
  "âš ï¸  Some tests failed. Review the results above.",
  "ðŸ’¨ Running quick smoke test...",
  "),\r\n            () => !!document.querySelector(",
  "âœ… Smoke test passed",
  "âŒ Smoke test failed",
  "[HomeCleanQA] QA testing scaffold loaded",
  "Available commands:",
  "  runHomeCleanTests() - Run full test suite",
  "  runHomeCleanSmokeTest() - Run quick smoke test",
  "ðŸ” Phase 5 Validation Starting...",
  "ðŸ“Š Phase 5 Validation Results:",
  "âœ… Phase 5 validation PASSED",
  "âŒ Phase 5 validation FAILED",
  "ðŸš‚ Rails validation:",
  "ðŸ“¦ Containers validation:",
  "clean-root not found",
  "ðŸŽ¨ Theme validation:",
  "ðŸ“Š Data validation:",
  "ðŸ“œ Scroll validation:",
  "ðŸ”§ Phase 5 validation script loaded. Run validatePhase5() to test.",
  ",\r\n};\r\n\r\n// Set API key from environment (will be available in production)\r\nif (typeof process !== ",
  ");\r\n  if (metaTag && metaTag.content && metaTag.content !== ",
  "ðŸŽ¬ TMDB Config loaded"
]
```

# Routing & Navigation
*1 file(s)*


## apps\web\src\App.tsx
```
import Tabs from '@/components/Tabs';
import MobileTabs, { useViewportOffset } from '@/components/MobileTabs';
import FlickletHeader from '@/components/FlickletHeader';
import Rail from '@/components/Rail';
import Section from '@/components/Section';
import CommunityPanel from '@/components/CommunityPanel';
import TheaterInfo from '@/components/TheaterInfo';
import FeedbackPanel from '@/components/FeedbackPanel';
import SearchResults from '@/search/SearchResults';
import HomeYourShowsRail from '@/components/rails/HomeYourShowsRail';
import HomeUpNextRail from '@/components/rails/HomeUpNextRail';
import { SettingsFAB, ThemeToggleFAB } from '@/components/FABs';
import ScrollToTopArrow from '@/components/ScrollToTopArrow';
import { lazy, Suspense } from 'react';
import PostDetail from '@/components/PostDetail';
import { openSettingsSheet } from '@/components/settings/SettingsSheet';
import { flag } from '@/lib/flags';
import { isCompactMobileV1 } from '@/lib/mobileFlags';

// Lazy load heavy components
const SettingsPage = lazy(() => import('@/components/SettingsPage'));
const NotesAndTagsModal = lazy(() => import('@/components/modals/NotesAndTagsModal'));
import { ShowNotificationSettingsModal } from '@/components/modals/ShowNotificationSettingsModal';
const FlickWordModal = lazy(() => import('@/components/games/FlickWordModal'));
import { BloopersModal } from '@/components/extras/BloopersModal';
import { ExtrasModal } from '@/components/extras/ExtrasModal';
import { HelpModal } from '@/components/HelpModal';
const ListPage = lazy(() => import('@/pages/ListPage'));
const MyListsPage = lazy(() => import('@/pages/MyListsPage'));
const DiscoveryPage = lazy(() => import('@/pages/DiscoveryPage'));
const AdminPage = lazy(() => import('@/pages/AdminPage'));
const AuthDebugPage = lazy(() => import('@/debug/AuthDebugPage'));
import PullToRefreshWrapper from '@/components/PullToRefreshWrapper';
import { useForYouRows } from '@/hooks/useForYouRows';
import { useForYouContent } from '@/hooks/useGenreContent';
import { useServiceWorker } from '@/hooks/useServiceWorker';
import { useEffect, useMemo, useState } from 'react';
import { flushSync } from 'react-dom';
import { Library, useLibrary } from '@/lib/storage';
import { mountActionBridge, setToastCallback } from '@/state/actions';
import { useSettings, settingsManager } from '@/lib/settings';
import { useInTheaters } from '@/hooks/useTmdb';
import { useTranslations } from '@/lib/language';
import Toast, { useToast } from '@/components/Toast';
import PersonalityErrorBoundary from '@/components/PersonalityErrorBoundary';
import { useAuth } from '@/hooks/useAuth';
import { initializeMessaging, getFCMToken, setupForegroundMessageHandler } from './firebase-messaging';
import AuthModal from '@/components/AuthModal';
import AuthConfigError from '@/components/AuthConfigError';
import { isAuthInFlightInOtherTab } from '@/lib/authBroadcast';
import '@/styles/flickword.css';
import { backfillShowStatus } from '@/utils/backfillShowStatus';
import DebugAuthHUD from '@/components/DebugAuthHUD';
import { useReturningShows } from '@/state/selectors/useReturningShows';
import { trackTabOpenedReturning } from '@/lib/analytics';
import { googleLogin } from '@/lib/authLogin';

type View = 'home'|'watching'|'want'|'watched'|'returning'|'mylists'|'discovery';
type SearchType = 'all' | 'movies-tv' | 'people';
type SearchState = { q: string; genre: number | null; type: SearchType };

export default function App() {
  // Computed smart views
  const returning = useReturningShows();
  const [view, setView] = useState<View>('home');
  const [currentPath, setCurrentPath] = useState(
    typeof window !== 'undefined' ? window.location.pathname : '/'
  );
  const isAdmin = currentPath === '/admin';
  const isDebugAuth = currentPath === '/debug/auth';
  
  // Detect post routes
  const postSlugMatch = currentPath.match(/^\/posts\/([^/]+)$/);
  const postSlug = postSlugMatch ? postSlugMatch[1] : null;

  // Listen for path changes (from pushState/popState)
  useEffect(() => {
    const handleLocationChange = () => {
      setCurrentPath(window.location.pathname);
    };
    
    window.addEventListener('popstate', handleLocationChange);
    // Also listen for custom navigation events
    window.addEventListener('pushstate', handleLocationChange);
    
    return () => {
      window.removeEventListener('popstate', handleLocationChange);
      window.removeEventListener('pushstate', handleLocationChange);
    };
  }, []);

  // Settings state
  const settings = useSettings();
  const [showSettings, setShowSettings] = useState(false);
  const translations = useTranslations();
  
  // Viewport offset for iOS Safari keyboard handling
  const { viewportOffset } = useViewportOffset();
  
  // Notes and Tags modal state
  const [notesModalItem, setNotesModalItem] = useState<any>(null);
  const [showNotesModal, setShowNotesModal] = useState(false);
  
  // Game modal state
  const [showFlickWordModal, setShowFlickWordModal] = useState(false);
  
  // Notification modal state
  const [notificationModalItem, setNotificationModalItem] = useState<any>(null);
  const [showNotificationModal, setShowNotificationModal] = useState(false);

  // Bloopers modal state
  const [bloopersModalItem, setBloopersModalItem] = useState<any>(null);
  const [showBloopersModal, setShowBloopersModal] = useState(false);

  // Extras modal state
  const [extrasModalItem, setExtrasModalItem] = useState<any>(null);
  const [showExtrasModal, setShowExtrasModal] = useState(false);

  // Help modal state
  const [showHelpModal, setShowHelpModal] = useState(false);

  // Debug modal state changes
  useEffect(() => {
    console.log('ðŸ”” Modal state changed:', { 
      showNotificationModal, 
      notificationModalItem: notificationModalItem?.title 
    });
  }, [showNotificationModal, notificationModalItem]);

  // Debug bloopers modal state changes
  useEffect(() => {
    console.log('ðŸŽ¬ Bloopers modal state changed:', { 
      showBloopersModal, 
      hasBloopersModalItem: !!bloopersModalItem, 
      bloopersModalItemTitle: bloopersModalItem?.title
    });
  }, [showBloopersModal, bloopersModalItem]);

  // Debug extras modal state changes
  useEffect(() => {
    console.log('ðŸŽ­ Extras modal state changed:', { 
      showExtrasModal, 
      hasExtrasModalItem: !!extrasModalItem, 
      extrasModalItemTitle: extrasModalItem?.title
    });
  }, [showExtrasModal, extrasModalItem]);
  
  // Toast system
  const { toasts, addToast, removeToast } = useToast();

  // Auth state
  const { loading: authLoading, authInitialized, isAuthenticated, status } = useAuth();

  // Initialize FCM and setup message handlers
  useEffect(() => {
    if (isAuthenticated) {
      // Initialize messaging
      initializeMessaging().then(() => {
        // Get FCM token and store it
        getFCMToken().then((token) => {
          if (token) {
            console.log('[FCM] Token obtained and stored');
          }
        });

        // Setup foreground message handler (shows toast)
        setupForegroundMessageHandler((payload) => {
          const title = payload.notification?.title || 'New notification';
          const body = payload.notification?.body || '';
          addToast(`${title}: ${body}`, 'info');
        });
      });
    }
  }, [isAuthenticated, addToast]);
  const [showAuthModal, setShowAuthModal] = useState(false);
  
  // Check for debug mode - persist across redirects
  const [showDebugHUD] = useState(() => {
    const urlParams = new URLSearchParams(window.location.search);
    const hasDebugParam = urlParams.has('debugAuth') || urlParams.has('debugAuth') === true;
    // Persist in localStorage so it survives redirects
    if (hasDebugParam) {
      try {
        localStorage.setItem('flicklet.debugAuth', 'true');
      } catch (e) {
        // ignore
      }
    }
    // Check both URL param and localStorage
    try {
      return hasDebugParam || localStorage.getItem('flicklet.debugAuth') === 'true';
    } catch (e) {
      return hasDebugParam;
    }
  });

  // Auto-prompt for authentication when not authenticated
  useEffect(() => {
    // Don't auto-open modal if we're in redirecting or resolving state
    const isRedirectingOrResolving = status === 'redirecting' || status === 'resolving';
    
    // Also check localStorage for persisted status (in case React state hasn't updated yet)
    let persistedStatusBlocking = false;
    try {
      const persistedStatus = localStorage.getItem('flicklet.auth.status');
      persistedStatusBlocking = persistedStatus === 'redirecting' || persistedStatus === 'resolving';
    } catch (e) {
      // ignore
    }
    
    // Check if URL has auth params (we're returning from redirect)
    const urlParams = new URLSearchParams(window.location.search);
    const hasAuthParams = urlParams.has('state') || urlParams.has('code') || urlParams.has('error');
    const isReturningFromRedirect = window.location.hash || hasAuthParams;
    
    // âš ï¸ MULTI-TAB SAFETY: Check if auth is in-flight in another tab
    let otherTabBlocking = false;
    try {
      otherTabBlocking = isAuthInFlightInOtherTab();
    } catch (e) {
      // ignore - BroadcastChannel may not be available
    }
    
    const shouldBlock = isRedirectingOrResolving || persistedStatusBlocking || isReturningFromRedirect || otherTabBlocking;
    
    if (!authLoading && authInitialized && !isAuthenticated && !shouldBlock) {
      // Small delay to ensure the app has fully loaded
      const timer = setTimeout(() => {
        setShowAuthModal(true);
      }, 1000);
      
      return () => clearTimeout(timer);
    }
  }, [authLoading, authInitialized, isAuthenticated, status]);

  // Service Worker for offline caching
  const { isOnline } = useServiceWorker();

  // Popup hint banner state
  const [showPopupHint, setShowPopupHint] = useState<boolean>(() => {
    try { return localStorage.getItem('flicklet.auth.popup.hint') === '1'; } catch { return false; }
  });
  useEffect(() => {
    const handler = () => {
      try { setShowPopupHint(localStorage.getItem('flicklet.auth.popup.hint') === '1'); } catch (e) { void e; }
    };
    window.addEventListener('auth:popup-hint', handler as any);
    const t = setInterval(handler, 1000);
    return () => { window.removeEventListener('auth:popup-hint', handler as any); clearInterval(t); };
  }, []);

  // Refresh function for pull-to-refresh
  const handleRefresh = async () => {
    console.log('ðŸ”„ Pull-to-refresh triggered');
    
    // Force refresh of library data
    // Library.refresh(); // Commented out - method doesn't exist
    
    // Trigger custom refresh events for components that need it
    window.dispatchEvent(new CustomEvent('force-refresh'));
    
    // Small delay to show the refresh animation
    await new Promise(resolve => setTimeout(resolve, 1000));
  };

  // Search state
  const [search, setSearch] = useState<SearchState>({ q: '', genre: null, type: 'all' });
  const searchActive = !!search.q.trim();

  // Search handlers
  const handleSearch = (q: string, genre: number | null, type: SearchType) => {
    const nextQ = q.trim();
    setSearch({ q: nextQ, genre, type });
  };

  const handleClear = () => setSearch({ q: '', genre: null, type: 'all' });

  // For You configuration from settings
  const forYouRows = useForYouRows();
  const forYouContent = useForYouContent(forYouRows);

  // Lists - using new Library system with reactive updates
  const watching = useLibrary('watching');
  const wishlist = useLibrary('wishlist');
  const watched = useLibrary('watched');

  // Show all watching items in the tab (no filtering)
  // Note: The "Returning" tab is a separate smart view for returning shows
  // Users should see all their watching items in the Currently Watching tab
  const watchingVisible = useMemo(() => {
    return watching; // Show all items - don't filter out returning shows
  }, [watching]);

  // Analytics for Returning tab open
  useEffect(() => {
    if (view === 'returning') {
      trackTabOpenedReturning(Array.isArray(returning) ? returning.length : 0);
    }
  }, [view, returning]);

  // Data rails
  const theaters = useInTheaters();

  // Handle settings click - check gate and flag conditions
  const handleSettingsClick = () => {
    const gate = isCompactMobileV1();
    const flagEnabled = flag('settings_mobile_sheet_v1');
    
    if (gate && flagEnabled) {
      openSettingsSheet();
    } else {
      setShowSettings(true);
    }
  };

  // Initialize action bridge and backfill show status
  useEffect(() => {
    // Set up toast callback for personality-based feedback
    setToastCallback(addToast);
    
    const cleanup = mountActionBridge();
    
    // Trigger show status backfill after a short delay
    const backfillTimer = setTimeout(() => {
      // âš ï¸ REMOVED: debugGate diagnostics disabled
      backfillShowStatus();
    }, 3000); // Wait 3 seconds after app loads
    
    return () => {
      cleanup();
      clearTimeout(backfillTimer);
    };
  }, [addToast]);

  // Handle deep links for settings sheet and games
  useEffect(() => {
    const handleHashChange = () => {
      const hash = window.location.hash;
      if (hash.startsWith('#settings/')) {
        const tab = hash.replace('#settings/', '').toLowerCase();
        const gate = isCompactMobileV1();
        const flagEnabled = flag('settings_mobile_sheet_v1');
        
        if (gate && flagEnabled) {
          // Validate tab is a valid TabId before passing to openSettingsSheet
          if (['account', 'display', 'advanced'].includes(tab)) {
            openSettingsSheet(tab as 'account' | 'display' | 'advanced');
          } else {
            openSettingsSheet(); // Use default tab
          }
        }
      } else if (hash === '#games/flickword') {
        setShowFlickWordModal(true);
      }
    };

    // Check hash on load
    handleHashChange();

    // Listen for hash changes
    window.addEventListener('hashchange', handleHashChange);
    return () => window.removeEventListener('hashchange', handleHashChange);
  }, []);

  // Expose game functions globally for compatibility with legacy code
  useEffect(() => {
    (window as any).openFlickWordModal = () => {
      setShowFlickWordModal(true);
    };
    
    (window as any).closeFlickWordModal = () => {
      setShowFlickWordModal(false);
    };

    return () => {
      delete (window as any).openFlickWordModal;
      delete (window as any).closeFlickWordModal;
    };
  }, []);

  // Show loading screen until auth state is initialized
  // Add timeout to prevent infinite loading
  const [loadingTimeout, setLoadingTimeout] = useState(false);
  useEffect(() => {
    if (!authInitialized) {
      const timer = setTimeout(() => {
        setLoadingTimeout(true);
        console.error('[App] Auth initialization timeout - authInitialized still false after 10 seconds');
      }, 10000); // 10 second timeout
      return () => clearTimeout(timer);
    } else {
      setLoadingTimeout(false);
    }
  }, [authInitialized]);

  function itemsFor(id: string) {
    switch (id) {
      case 'currently-watching': return watching;
      case 'up-next':            return []; // TODO: populate from episodes
      case 'in-theaters':        return theaters.data ?? [];
      default:                   return undefined;
    }
  }

  // Notes and Tags handlers
  const handleNotesEdit = (item: any) => {
    setNotesModalItem(item);
    setShowNotesModal(true);
  };

  const handleTagsEdit = (item: any) => {
    setNotesModalItem(item);
    setShowNotesModal(true);
  };

  // Notification handler
  const handleNotificationToggle = (item: any) => {
    console.log('ðŸ”” App.tsx handleNotificationToggle called for:', item.title, item.mediaType);
    console.log('ðŸ”” Setting notification modal state:', { 
      showNotificationModal: true, 
      notificationModalItem: item 
    });
    setNotificationModalItem(item);
    setShowNotificationModal(true);
    console.log('ðŸ”” Modal state should now be set');
  };

  // Simple reminder handler (Free feature)
  const handleSimpleReminder = (item: any) => {
    console.log('â° App.tsx handleSimpleReminder called for:', item.title, item.mediaType);
    // For now, just show a simple alert - this will be replaced with actual reminder logic
    alert(`â° Simple reminder set for "${item.title}" - you'll be notified 24 hours before the next episode airs!`);
  };

  // Bloopers handler
  const handleBloopersOpen = (item: any) => {
    console.log('ðŸŽ¬ App.tsx handleBloopersOpen called for:', item.title, item.mediaType);
    console.log('ðŸŽ¬ Setting bloopers modal state:', { 
      showBloopersModal: true, 
      bloopersModalItem: item
    });
    
    flushSync(() => {
      setBloopersModalItem(item);
      setShowBloopersModal(true);
    });
    
    console.log('ðŸŽ¬ Bloopers modal state should now be set');
  };

  // Extras handler
  const handleExtrasOpen = (item: any) => {
    console.log('ðŸŽ­ App.tsx handleExtrasOpen called for:', item.title, item.mediaType);
    console.log('ðŸŽ­ Setting extras modal state:', { 
      showExtrasModal: true, 
      extrasModalItem: item
    });
    
    flushSync(() => {
      setExtrasModalItem(item);
      setShowExtrasModal(true);
    });
    
    console.log('ðŸŽ­ Extras modal state should now be set');
  };

  // Help handler
  const handleHelpOpen = () => {
    console.log('â“ App.tsx handleHelpOpen called');
    console.log('â“ Current showHelpModal state:', showHelpModal);
    setShowHelpModal(true);
    console.log('â“ setShowHelpModal(true) called');
  };

  const handleSaveNotesAndTags = (item: any, notes: string, tags: string[]) => {
    // Update the item in the library with new notes and tags
    Library.updateNotesAndTags(item.id, item.mediaType, notes, tags);
    setShowNotesModal(false);
    setNotesModalItem(null);
  };

  if (view !== 'home') {
    return (
      <>
      <main className="min-h-screen" style={{ backgroundColor: 'var(--bg)', color: 'var(--text)', minHeight: '100lvh' }}>
        {/* Debug: Show when modal should be visible - TOP LEVEL */}
        {showExtrasModal && (
          <div style={{ 
            position: 'fixed', 
            top: '10px', 
            left: '10px', 
            background: 'red', 
            color: 'white', 
            padding: '10px', 
            zIndex: 9999,
            fontSize: '12px'
          }}>
            ðŸŽ¬ MODAL SHOULD BE VISIBLE: {extrasModalItem?.title}
          </div>
        )}
        
        <FlickletHeader
          appName="Flicklet"
          onSearch={(q, g, t) => handleSearch(q, g ?? null, (t as SearchType) ?? 'all')}
          onClear={handleClear}
          onHelpOpen={() => {
            console.log('â“ App.tsx onHelpOpen prop called');
            handleHelpOpen();
          }}
        />
        
        {/* Desktop Tabs - tablet and above */}
        <div className="hidden md:block">
          <Tabs current={view} onChange={(tab) => { 
            // Clear search when switching tabs
            handleClear();
            setView(tab); 
          }} />
        </div>
        
        {/* Mobile Tabs - mobile only */}
        <div className="block md:hidden">
          <MobileTabs current={view} onChange={(tab) => { 
            // Clear search when switching tabs
            handleClear();
            setView(tab); 
          }} />
        </div>
        
        {/* Content Area */}
        <div className="pb-20 lg:pb-0" style={{ 
          paddingBottom: viewportOffset > 0 && window.visualViewport?.offsetTop === 0 
            ? `${80 + viewportOffset}px` 
            : undefined 
        }}>
          {searchActive ? (
            <SearchResults query={search.q} genre={search.genre} searchType={search.type} />
          ) : (
            <>
              {(view as View) === 'home' && (
                <div className="min-h-screen" data-page="home">
                  {/* Home Page Content */}
                  <div className="px-4 py-6">
                    <h1 className="text-2xl font-bold mb-6" style={{ color: 'var(--text)' }}>
                      Welcome to Flicklet
                    </h1>
                    <div className="grid gap-6">
                      {/* Your Shows Rail */}
                      <HomeYourShowsRail />
                      
                      {/* Up Next Rail */}
                      <HomeUpNextRail />
                      
                      {/* For You Content */}
                      {forYouContent.map((row, index) => (
                        <Rail key={index} id={row.rowId} {...row} />
                      ))}
                      
                      {/* Community Panel */}
                      <CommunityPanel />
                      
                      {/* Theater Info */}
                      <TheaterInfo />
                      
                      {/* Feedback Panel */}
                      <FeedbackPanel />
                    </div>
                  </div>
                </div>
              )}
              {view === 'watching'  && (
                <Suspense fallback={<div className="loading-spinner">Loading watching list...</div>}>
                  <div data-page="lists" data-list="watching">
                    <ListPage title="Currently Watching" items={watchingVisible} mode="watching" onNotesEdit={handleNotesEdit} onTagsEdit={handleTagsEdit} onNotificationToggle={handleNotificationToggle} onSimpleReminder={handleSimpleReminder} onBloopersOpen={handleBloopersOpen} onExtrasOpen={handleExtrasOpen} />
                  </div>
                </Suspense>
              )}
              {view === 'want'      && (
                <Suspense fallback={<div className="loading-spinner">Loading wishlist...</div>}>
                  <div data-page="lists" data-list="wishlist">
                    <ListPage title="Want to Watch" items={wishlist} mode="want" onNotesEdit={handleNotesEdit} onTagsEdit={handleTagsEdit} onNotificationToggle={handleNotificationToggle} onSimpleReminder={handleSimpleReminder} onBloopersOpen={handleBloopersOpen} onExtrasOpen={handleExtrasOpen} />
                  </div>
                </Suspense>
              )}
              {view === 'watched'   && (
                <Suspense fallback={<div className="loading-spinner">Loading watched list...</div>}>
                  <div data-page="lists" data-list="watched">
                    <ListPage title="Watched" items={watched} mode="watched" onNotesEdit={handleNotesEdit} onTagsEdit={handleTagsEdit} onNotificationToggle={handleNotificationToggle} onSimpleReminder={handleSimpleReminder} onBloopersOpen={handleBloopersOpen} onExtrasOpen={handleExtrasOpen} />
                  </div>
                </Suspense>
              )}
              {view === 'returning' && (
                <Suspense fallback={<div className="loading-spinner">Loading returning shows...</div>}>
                  <div data-page="lists" data-list="returning">
                    <ListPage title="Returning" items={returning as any} mode="returning" onNotesEdit={handleNotesEdit} onTagsEdit={handleTagsEdit} onNotificationToggle={handleNotificationToggle} onSimpleReminder={handleSimpleReminder} onBloopersOpen={handleBloopersOpen} onExtrasOpen={handleExtrasOpen} />
                  </div>
                </Suspense>
              )}
              {view === 'mylists'  && (
                <Suspense fallback={<div className="loading-spinner">Loading my lists...</div>}>
                  <div data-page="lists" data-list="mylists">
                    <MyListsPage />
                  </div>
                </Suspense>
              )}
              {view === 'discovery' && (
                <Suspense fallback={<div className="loading-spinner">Loading discovery...</div>}>
                  <DiscoveryPage query={search.q} genreId={search.genre || null} />
                </Suspense>
              )}
            </>
          )}
        </div>

        {/* Offline Indicator */}
        {!isOnline && (
          <div className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-yellow-500 text-black px-4 py-2 rounded-lg shadow-lg text-sm font-medium">
            ðŸ“± You're offline - viewing cached content
          </div>
        )}

        {/* FAB Components - Available on all tabs */}
        <SettingsFAB onClick={handleSettingsClick} />
        <ThemeToggleFAB 
          theme={settings.layout.theme} 
          onToggle={() => settingsManager.updateTheme(settings.layout.theme === 'dark' ? 'light' : 'dark')} 
        />

        {/* Settings Modal */}
        {showSettings && (
          <Suspense fallback={<div className="loading-spinner">Loading settings...</div>}>
            <SettingsPage onClose={() => setShowSettings(false)} />
          </Suspense>
        )}

        {/* Notes and Tags Modal */}
        {showNotesModal && notesModalItem && (
          <Suspense fallback={<div className="loading-spinner">Loading notes...</div>}>
            <NotesAndTagsModal
              item={notesModalItem}
              isOpen={showNotesModal}
              onClose={() => setShowNotesModal(false)}
              onSave={handleSaveNotesAndTags}
            />
          </Suspense>
        )}

        {/* Show Notification Settings Modal */}
        {(() => {
          const shouldRender = showNotificationModal && notificationModalItem;
          console.log('ðŸ”” Modal render check:', { 
            showNotificationModal, 
            notificationModalItem: notificationModalItem?.title,
            shouldRender 
          });
          return shouldRender;
        })() && (
          <ShowNotificationSettingsModal
            isOpen={showNotificationModal}
            onClose={() => {
              console.log('ðŸ”” Closing notification modal');
              setShowNotificationModal(false);
            }}
            show={{
              id: Number(notificationModalItem.id),
              title: notificationModalItem.title,
              mediaType: notificationModalItem.mediaType
            }}
          />
        )}

        {/* Bloopers Modal */}
        {console.log('ðŸŽ¬ BloopersModal render check:', { showBloopersModal, hasBloopersModalItem: !!bloopersModalItem, bloopersModalItemTitle: bloopersModalItem?.title })}
        {showBloopersModal && bloopersModalItem && (
          <BloopersModal
            isOpen={showBloopersModal}
            onClose={() => setShowBloopersModal(false)}
            showId={(() => {
              const id = typeof bloopersModalItem.id === 'string' ? parseInt(bloopersModalItem.id) : bloopersModalItem.id;
              console.log('ðŸŽ¬ BloopersModal showId conversion:', { originalId: bloopersModalItem.id, convertedId: id, type: typeof id });
              return id;
            })()}
            showTitle={bloopersModalItem.title}
          />
        )}

        {/* Extras Modal */}
        {showExtrasModal && extrasModalItem && (
          <ExtrasModal
            isOpen={showExtrasModal}
            onClose={() => setShowExtrasModal(false)}
            showId={(() => {
              const id = typeof extrasModalItem.id === 'string' ? parseInt(extrasModalItem.id) : extrasModalItem.id;
              console.log('ðŸŽ­ ExtrasModal showId conversion:', { originalId: extrasModalItem.id, convertedId: id, type: typeof id });
              return id;
            })()}
            showTitle={extrasModalItem.title}
          />
        )}

        {/* Help Modal */}
        {showHelpModal && (
          <HelpModal
            isOpen={showHelpModal}
            onClose={() => setShowHelpModal(false)}
          />
        )}
      </main>
      {/* Popup hint banner */}
      {showPopupHint && (
        <div className="fixed bottom-16 left-1/2 -translate-x-1/2 z-[10000] rounded-lg border bg-background/95 backdrop-blur px-3 py-2 text-xs md:text-sm text-foreground shadow-lg">
          <div className="flex items-center gap-2">
            <span>Allow popups and thirdâ€‘party cookies for Google signâ€‘in.</span>
            <button
              className="rounded border px-2 py-0.5 text-[11px] hover:bg-accent hover:text-accent-foreground"
              onClick={() => {
                try { localStorage.removeItem('flicklet.auth.popup.hint'); } catch (e) { /* ignore */ }
                setShowPopupHint(false);
                // User gesture: retry
                void googleLogin();
              }}
            >Try again</button>
            <button
              className="rounded border px-2 py-0.5 text-[11px] hover:bg-muted"
              onClick={() => { try { localStorage.removeItem('flicklet.auth.popup.hint'); } catch (e) { /* ignore */ } setShowPopupHint(false); }}
              aria-label="Dismiss"
              title="Dismiss"
            >Dismiss</button>
          </div>
        </div>
      )}
      
      </>
    );
  }

  if (!authInitialized) {
    return (
      <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: 'var(--bg)', color: 'var(--text)' }}>
        <div className="text-center">
          <div className="w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-sm" style={{ color: 'var(--muted)' }}>Loading...</p>
          {loadingTimeout && (
            <div className="mt-4 p-3 rounded border" style={{ backgroundColor: 'var(--btn)', borderColor: 'var(--line)' }}>
              <p className="text-xs mb-2" style={{ color: 'var(--muted)' }}>
                Loading is taking longer than expected.
              </p>
              <button
                onClick={() => window.location.reload()}
                className="px-3 py-1.5 text-xs rounded transition-colors"
                style={{ backgroundColor: 'var(--accent)', color: 'var(--text)' }}
              >
                Reload Page
              </button>
            </div>
          )}
        </div>
      </div>
    );
  }

  // Render debug auth page if on /debug/auth route
  if (isDebugAuth) {
    return (
      <PersonalityErrorBoundary>
        <Suspense fallback={
          <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: 'var(--bg)', color: 'var(--text)' }}>
            <div className="text-center">
              <div className="w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
              <p className="text-sm" style={{ color: 'var(--muted)' }}>Loading...</p>
            </div>
          </div>
        }>
          <AuthDebugPage />
        </Suspense>
      </PersonalityErrorBoundary>
    );
  }

  // Render admin page if on /admin route
  if (isAdmin) {
    return (
      <PersonalityErrorBoundary>
        <Suspense fallback={
          <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: 'var(--bg)', color: 'var(--text)' }}>
            <div className="text-center">
              <div className="w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
              <p className="text-sm" style={{ color: 'var(--muted)' }}>Loading...</p>
            </div>
          </div>
        }>
          <AdminPage />
        </Suspense>
      </PersonalityErrorBoundary>
    );
  }

  // Render post detail page if on /posts/:slug route
  if (postSlug) {
    return (
      <PersonalityErrorBoundary>
        <PostDetail slug={postSlug} />
      </PersonalityErrorBoundary>
    );
  }

  return (
    <PersonalityErrorBoundary>
      <main className="min-h-screen" style={{ backgroundColor: 'var(--bg)', color: 'var(--text)', minHeight: '100lvh' }}>
        <FlickletHeader
          appName="Flicklet"
          onSearch={(q, g, t) => handleSearch(q, g ?? null, (t as SearchType) ?? 'all')}
          onClear={handleClear}
          onHelpOpen={handleHelpOpen}
        />
        
        {/* Desktop Tabs - tablet and above */}
        <div className="hidden md:block">
          <Tabs current={view} onChange={(tab) => { 
            // Clear search when switching tabs
            handleClear();
            setView(tab); 
          }} />
        </div>
        
        {/* Mobile Tabs - mobile only */}
        <div className="block md:hidden">
          <MobileTabs current={view} onChange={(tab) => { 
            // Clear search when switching tabs
            handleClear();
            setView(tab); 
          }} />
        </div>
        
        {searchActive ? (
          <PullToRefreshWrapper onRefresh={handleRefresh}>
            <SearchResults query={search.q} genre={search.genre} searchType={search.type} />
          </PullToRefreshWrapper>
        ) : (
          <PullToRefreshWrapper onRefresh={handleRefresh}>
            <>
              {view === 'home' && (
              <div className="pb-20 lg:pb-0" style={{ 
                paddingBottom: viewportOffset > 0 && window.visualViewport?.offsetTop === 0 
                  ? `${80 + viewportOffset}px` 
                  : undefined 
              }}>
                {/* Your Shows container with both rails */}
                <Section title={translations.yourShows}>
                  <div className="space-y-4">
                    <HomeYourShowsRail />
                    <HomeUpNextRail />
                  </div>
                </Section>

                {/* Community container, always visible */}
                <Section title={translations.community}>
                  <CommunityPanel />
                </Section>

                {/* For you container with dynamic rails based on settings */}
                <Section title={translations.forYou}>
                  <div className="space-y-4">
                    {forYouContent.map((contentQuery) => (
                      <Rail 
                        key={`for-you-${contentQuery.rowId}`}
                        id={`for-you-${contentQuery.rowId}`}  
                        title={contentQuery.title}
                        items={Array.isArray(contentQuery.data) ? contentQuery.data : []}
                        skeletonCount={12} 
                      />
                    ))}
                  </div>
                </Section>

                {/* In theaters container with address/info header */}
                <Section title={translations.inTheatersNearYou}>
                  <TheaterInfo />
                  <Rail id="in-theaters" title={translations.nowPlaying} items={Array.isArray(itemsFor('in-theaters')) ? itemsFor('in-theaters')!.map(item => ({ ...item, id: String(item.id), year: item.year ? parseInt(String(item.year)) : undefined })) : []} skeletonCount={12} />
                </Section>

                {/* Feedback container */}
                <Section title={translations.feedback}>
                  <FeedbackPanel />
                </Section>

                {/* Scroll to top arrow - appears when scrolled down */}
                <ScrollToTopArrow threshold={400} />
              </div>
            )}

            {/* These views are handled in the main home view above */}
            </>
          </PullToRefreshWrapper>
        )}

        {/* FAB Components - Available on all tabs */}
        <SettingsFAB onClick={handleSettingsClick} />
        <ThemeToggleFAB 
          theme={settings.layout.theme} 
          onToggle={() => settingsManager.updateTheme(settings.layout.theme === 'dark' ? 'light' : 'dark')} 
        />

        {/* Settings Modal */}
        {showSettings && (
          <Suspense fallback={<div className="loading-spinner">Loading settings...</div>}>
            <SettingsPage onClose={() => setShowSettings(false)} />
          </Suspense>
        )}

        {/* Notes and Tags Modal */}
        {showNotesModal && notesModalItem && (
          <Suspense fallback={<div className="loading-spinner">Loading notes...</div>}>
            <NotesAndTagsModal
              item={notesModalItem}
              isOpen={showNotesModal}
              onClose={() => setShowNotesModal(false)}
              onSave={handleSaveNotesAndTags}
            />
          </Suspense>
        )}

        {/* Toast Notifications */}
        {toasts.map(toast => (
          <Toast
            key={toast.id}
            message={toast.message}
            type={toast.type}
            personalityLevel={settings.personalityLevel}
            onClose={() => removeToast(toast.id)}
          />
        ))}

        {/* Auth Modal */}
        <AuthModal 
          isOpen={showAuthModal} 
          onClose={() => setShowAuthModal(false)} 
        />
        
        {/* Auth Config Error Surface */}
        <AuthConfigError />
        
        {/* Debug HUD */}
        {showDebugHUD && (
          <DebugAuthHUD 
            status={status}
            authLoading={authLoading}
            authInitialized={authInitialized}
            isAuthenticated={isAuthenticated}
            showAuthModal={showAuthModal}
          />
        )}

        {/* FlickWord Game Modal */}
        {showFlickWordModal && (
          <Suspense fallback={<div className="loading-spinner">Loading game...</div>}>
            <FlickWordModal 
              isOpen={showFlickWordModal} 
              onClose={() => setShowFlickWordModal(false)}
            />
          </Suspense>
        )}

        {/* Help Modal */}
        {showHelpModal && (
          <HelpModal
            isOpen={showHelpModal}
            onClose={() => setShowHelpModal(false)}
          />
        )}
      </main>
    </PersonalityErrorBoundary>
  );
}

```

# Styles
*10 file(s)*


## _legacy_v1\www\archive\styles\inline-style-01.css
```
:root {
  --bg: #ffffff;
  --text: #121212;
  --primary: #e91e63;
  --card: #f7f7f9;
  --border: #dedee3;
  --success: #51cf66;
  --warning: #ffd43b;
  --danger: #f06292;
  --purple: #845ec2;
  --mardi1: #6a0dad;
  --mardi2: #28a745;
  --mardi3: #ffd43b;
  --focus: #1a73e8;
}
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  font-family:
    Inter,
    system-ui,
    -apple-system,
    'Segoe UI',
    Roboto,
    Arial,
    sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  margin: 0;
  padding: 20px;
  color: var(--text);
  line-height: 1.5;
  min-height: 100svh;
  /* Ensure sticky positioning works */
  overflow-y: visible;
}
.dark-mode {
  --bg: #1a1a1a;
  --text: #f5f5f5;
  --card: #2a2a2a;
  --border: #404040;
  --text-secondary: #b0b0b0;
  background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6b 100%) ;
}

/* REMOVED: Duplicate dark mode component styles - now consolidated in main.css */

.mardi .header {
  border-color: var(--mardi3) ;
}
.mardi .btn {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
}
.mardi .tab {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: #fff ;
}
body.mardi {
  background: linear-gradient(135deg, var(--mardi1), var(--mardi2)) ;
}

.main-container {
  max-width: 1200px;
  margin: 0 auto;
  background: var(--bg);
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  animation: containerSlideIn 0.8s ease-out;
}

@keyframes containerSlideIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.header {
  border-bottom: 2px solid var(--primary);
  padding-bottom: 16px;
  margin-bottom: 12px;
  animation: headerFadeIn 0.6s ease-out;
}

.header-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  justify-self: center;
}

.user-section {
  justify-self: end;
}

@keyframes headerFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.header-left {
  flex: 1;
  max-width: 600px;
}
.title {
  margin: 0;
  font-size: 2.1rem;
  color: var(--primary);
  font-weight: 800;
  letter-spacing: 0.2px;
}
.subtitle {
  margin: 2px 0 8px;
  color: #8a8a98;
  font-weight: 600;
}
.user-section {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}
#langToggle {
  padding: 8px 10px;
  border-radius: 14px;
  border: 2px solid var(--border);
  background: var(--card);
  color: var(--text);
  font-weight: 700;
}

/* Tab container styles moved to components.css */

@keyframes tabContainerSlideIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tab {
  flex: 1;
  border: 0;
  background: transparent;
  padding: 12px 10px;
  border-radius: 10px;
  font-weight: 800;
  cursor: pointer;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.tab.is-active {
  background: linear-gradient(45deg, var(--primary), var(--purple));
  color: #fff;
}
.tab-badge {
  background: #fff;
  color: var(--primary);
  border-radius: 12px;
  padding: 2px 8px;
  font-size: 12px;
  margin-left: 6px;
}

/* FlickWord Container Styling */
.quote-flickword-container {
  display: flex;
  align-items: stretch;
  gap: 16px;
  margin: 12px 0;
  animation: flickwordSlideIn 0.9s ease-out 0.6s both;
  justify-content: space-between ;
  width: 100% ;
}

.left-column {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 0 0 48% ;
  max-width: 48% ;
  width: 48% ;
  justify-content: space-between;
}

/* Add inside or right after the .left-column block */
.left-column > * {
  flex: 1; /* Makes both boxes equal height */
  display: flex; /* Ensures content inside can stretch properly */
  flex-direction: column;
}

.quote-card {
  background: var(--card);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  width: 100%;
}

.quote-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.random-quote-card {
  background: var(--card);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  width: 100%;
}

.random-quote-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

/* FlickWord Card Styling */
.flickword-card {
  background: var(--card);
  border: 2px solid var(--primary);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  flex: 0 0 48% ;
  max-width: 48% ;
  min-width: 300px;
  width: 48% ;
  align-self: stretch;
}

@keyframes flickwordSlideIn {
  from {
    opacity: 0;
    transform: translateY(25px) scale(0.95);
  }
  to {
    opacity: 0.9;
    transform: translateY(0) scale(1);
  }
}

.flickword-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.quote-title {
  margin: 0 0 16px 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  text-align: center;
}

.quote-content {
  text-align: center;
}

.quote-text {
  font-size: 14px;
  font-style: italic;
  color: #333;
  font-weight: 500;
  margin: 0 0 8px 0;
  line-height: 1.4;
}

.quote-author {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0;
  font-weight: 500;
}

.flickword-title {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
}

.flickword-timer-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  margin-bottom: 20px;
}

.flickword-countdown {
  background: var(--primary);
  color: white;
  padding: 8px 12px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 14px;
  font-family: 'Courier New', monospace;
  border: none;
  text-align: center;
  display: inline-block;
  min-width: 90px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  letter-spacing: 0.5px;
}

.flickword-motivation {
  font-size: 10px;
  color: var(--text-secondary);
  font-weight: 500;
  text-align: center;
  margin: 0;
  font-style: italic;
  opacity: 0.8;
  padding: 0;
  background: transparent;
  border: none;
  line-height: 1.3;
}

.flickword-stats {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  justify-content: space-between;
  width: 100%;
}

.stat-item {
  text-align: center;
  padding: 12px 8px;
  background: var(--bg);
  border-radius: 8px;
  flex: 1;
  border: 1px solid var(--border);
}

.stat-label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
  font-weight: 500;
}

.stat-value {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

.flickword-actions {
  text-align: center;
  display: flex;
  justify-content: center;
}

/* Mobile responsiveness for FlickWord */
@media (max-width: 768px) {
  .quote-flickword-container {
    flex-direction: column ;
    gap: 8px ;
    justify-content: flex-start ;
  }

  .left-column {
    flex: 1 ;
    max-width: 100% ;
    min-width: auto ;
    width: 100% ;
  }

  .quote-card,
  .flickword-card {
    flex: 1 ;
    max-width: 100% ;
    min-width: auto ;
    width: 100% ;
  }
}

/* iPhone portrait specific fixes */
@media (max-width: 428px) {
  .quote-flickword-container {
    margin: 8px 0 ;
    gap: 6px ;
  }

  .left-column {
    gap: 6px ;
  }

  .quote-card,
  .flickword-card {
    padding: 12px ;
    margin: 0 ;
  }

  .quote-title,
  .flickword-title {
    font-size: 14px ;
    margin-bottom: 12px ;
  }

  .quote-text {
    font-size: 13px ;
  }

  .quote-author {
    font-size: 11px ;
  }
}

.btn {
  border: 0;
  background: linear-gradient(45deg, var(--primary), var(--purple));
  color: #fff;
  border-radius: 8px;
  padding: 8px 16px;
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  letter-spacing: 0.3px;
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.btn:focus {
  outline: 3px solid var(--focus, #1a73e8);
  outline-offset: 2px;
}
.btn.secondary {
  background: linear-gradient(45deg, #737d8c, #57606f);
}
.btn.success {
  background: linear-gradient(45deg, #2ed573, #1dd1a1);
}
.btn.danger {
  background: linear-gradient(45deg, #f06292, #e91e63);
}

/* Notification animations */
@keyframes notificationSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes notificationSlideOut {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
}

/* Sticky top search */
/* Sticky top search */
.top-search {
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  margin: 12px 0;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
  animation: searchSlideIn 0.7s ease-out 0.2s both;
}

@keyframes searchSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-row {
  display: grid;
  grid-template-columns: 1fr 180px auto auto;
  gap: 8px;
  align-items: center;
}

/* Responsive search row */
@media (max-width: 768px) {
  .search-row {
    display: flex ;
    flex-direction: row ;
    gap: 8px ;
    flex-wrap: wrap ;
  }
  .search-row .search-input {
    order: 1;
  }
  .search-row .genre-filter {
    order: 2;
  }
  /* Create a button container for side-by-side layout */
  .search-row .search-btn,
  .search-row .clear-search-btn {
    order: 3;
    display: flex ;
    width: auto ;
    flex: 0 0 auto ;
    min-height: 44px;
    min-width: 80px;
  }
  
  .search-row .genre-filter {
    order: 2;
    display: flex ;
    width: 60px ;
    flex: 0 0 auto ;
    min-height: 44px;
    min-width: 60px;
  }
  .search-row .search-btn {
    margin-right: 8px;
  }

  /* Ensure buttons are properly spaced on mobile */
  .search-row .btn {
    margin: 0;
    flex: 0 0 auto;
  }
}
/* Tab container styles moved to components.css */
.tab {
  flex: 1;
  border: 0;
  background: transparent;
  padding: 10px 8px;
  border-radius: 8px;
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.tab.is-active {
  background: linear-gradient(45deg, var(--primary), var(--purple));
  color: #fff;
}
.tab-badge {
  background: #fff;
  color: var(--primary);
  border-radius: 12px;
  padding: 2px 8px;
  font-size: 12px;
  margin-left: 6px;
}

.search-input {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  width: 100%;
  min-width: 300px;
  min-height: 44px;
}

.genre-filter {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-height: 44px;
}
.search-help {
  margin-bottom: 8px;
  color: #888;
  font-size: 11px;
  text-align: center;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 8px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  opacity: 0.8;
  transition: opacity 0.2s ease;
}

.search-help:hover {
  opacity: 1;
}

/* Subtle onboarding hints */
.onboarding-hint {
  position: relative;
  display: inline-block;
  cursor: help;
}

.onboarding-hint::after {
  content: '?';
  display: inline-block;
  width: 16px;
  height: 16px;
  background: rgba(156, 39, 176, 0.1);
  color: #9c27b0;
  border-radius: 50%;
  text-align: center;
  line-height: 16px;
  font-size: 11px;
  font-weight: bold;
  margin-left: 6px;
  transition: all 0.2s ease;
}

.onboarding-hint:hover::after {
  background: rgba(156, 39, 176, 0.2);
  transform: scale(1.1);
}

.tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  white-space: nowrap;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease;
  margin-bottom: 8px;
}

.tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 4px solid transparent;
  border-top-color: rgba(0, 0, 0, 0.8);
}

.onboarding-hint:hover .tooltip,
.keyboard-hint:hover .tooltip {
  opacity: 1;
  visibility: visible;
}

.keyboard-hint {
  display: inline-block;
  margin-left: 8px;
  cursor: help;
  position: relative;
}

.keyboard-hint::before {
  content: 'âŒ¨ï¸';
  display: inline-block;
  width: 18px;
  height: 18px;
  background: rgba(156, 39, 176, 0.15);
  color: #9c27b0;
  border-radius: 50%;
  text-align: center;
  line-height: 18px;
  font-size: 12px;
  font-weight: bold;
  transition: all 0.2s ease;
  border: 1px solid rgba(156, 39, 176, 0.2);
}

.keyboard-hint:hover::before {
  background: rgba(156, 39, 176, 0.25);
  transform: scale(1.1);
  border-color: rgba(156, 39, 176, 0.4);
}

kbd {
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 3px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
  color: #495057;
  display: inline-block;
  font-size: 0.85em;
  font-weight: 700;
  line-height: 1;
  padding: 2px 4px;
  white-space: nowrap;
}

.dark-mode kbd {
  background: #495057;
  border-color: #6c757d;
  color: #f8f9fa;
}

/* Touch target optimization for mobile */
button,
input[type='button'],
input[type='submit'],
input[type='reset'],
select,
.clickable {
  min-height: 44px;
  min-width: 44px;
}

/* Ensure small buttons still meet touch target requirements */
.btn.small {
  min-height: 44px;
  min-width: 44px;
  padding: 8px 12px;
}

/* Icon buttons should have proper touch targets */
.icon-btn {
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Enhanced animations and micro-interactions */
.tab {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.tab::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.tab:hover::before {
  left: 100%;
}

.tab:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.tab.active {
  animation: tabActivate 0.4s ease-out;
}

@keyframes tabActivate {
  0% {
    transform: scale(0.95);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* Enhanced button interactions */
.btn {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn:active {
  transform: translateY(0);
  transition: transform 0.1s ease;
}

/* Enhanced search input */
.search-input:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);
  transition: all 0.2s ease;
  border-color: var(--primary);
}

/* Enhanced genre filter focus */
.genre-filter:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);
  border-color: var(--primary);
  transition: all 0.2s ease;
}

/* Smooth transitions for all form elements */
input,
select,
button {
  transition: all 0.2s ease;
}

/* Enhanced theme toggle button */
.theme-toggle {
  position: relative;
  overflow: hidden;
  background: linear-gradient(45deg, #f8f9fa, #e9ecef);
  border: 2px solid #dee2e6;
  color: #495057;
  transition: all 0.3s ease;
}

.theme-toggle:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.theme-toggle:active {
  transform: translateY(0) scale(1);
}

.dark-mode .theme-toggle {
  background: linear-gradient(45deg, #495057, #343a40);
  border-color: #6c757d;
  color: #f8f9fa;
}

.dark-mode .theme-toggle:hover {
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

/* Smooth list transitions */
.list-container {
  transition: all 0.3s ease;
}

.list-container:empty::before {
  content: 'No items yet. Start by searching for something!';
  display: block;
  text-align: center;
  color: #888;
  font-style: italic;
  padding: 40px 20px;
  opacity: 0.7;
}
.share-instructions {
  margin-top: 4px;
  color: #666;
  font-size: 11px;
  text-align: center;
}
.tag-filters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 8px;
}
.tag-pill {
  padding: 6px 10px;
  border-radius: 999px;
  border: 2px solid var(--border);
  background: var(--card);
  cursor: pointer;
  font-weight: 700;
}
.tag-pill.active {
  border-color: var(--primary);
  color: var(--primary);
}

.stats {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin: 14px 0;
}
/* Hide duplicate count cards; keep binge meter only */
.stats .stat {
  display: none;
}
.stat-num {
  font-size: 1.8rem;
  color: var(--primary);
  font-weight: 900;
}
.stat-label {
  font-size: 0.72rem;
  color: #80808f;
  text-transform: uppercase;
  font-weight: 900;
  letter-spacing: 0.6px;
}
#bingeMeter {
  display: block ;
  flex-basis: 100% ;
  order: 0 ;
}

.stat-num {
  font-size: 1.8rem;
  color: var(--primary);
  font-weight: 900;
}
.stat-label {
  font-size: 0.72rem;
  color: #80808f;
  text-transform: uppercase;
  font-weight: 900;
  letter-spacing: 0.6px;
}

.list-container {
  background: var(--card);
  border: 3px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  min-height: 80px;
}

.show-poster {
  width: var(--poster-w-desktop); /* Using centralized desktop poster width */
  height: var(--poster-h-desktop); /* Using centralized desktop poster height */
  border-radius: 8px;
  object-fit: cover;
  cursor: pointer;
}
.poster-placeholder {
  width: var(--poster-w-desktop); /* Using centralized desktop poster width */
  height: var(--poster-h-desktop); /* Using centralized desktop poster height */
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e9e9ee;
  color: #777;
  font-size: 12px;
}
.show-details {
  display: grid;
  grid-template-rows: auto auto auto 1fr;
  gap: 6px;
  min-width: 0;
}
.show-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  margin-bottom: 4px;
}

.show-title {
  margin: 0;
  color: var(--primary);
  font-size: 1.05rem;
  font-weight: 900;
  display: flex;
  gap: 8px;
  align-items: center;
  cursor: pointer;
  line-height: 1.2;
  flex: 1;
}
.show-meta {
  color: #8a8a98;
  font-size: 0.88rem;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.show-overview {
  font-size: 0.95rem;
  line-height: 1.45;
  color: var(--text);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  line-clamp: 3;
  overflow: hidden;
}
.rating-container {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 6px;
}
.star-rating .star {
  cursor: pointer;
  filter: grayscale(1);
}
.star-rating .star.active {
  filter: none;
}

.file-input-label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  cursor: pointer;
}

.file-input-label input[type='file'] {
  cursor: pointer;
}

.file-label {
  font-size: 0.85rem;
  color: #666;
  font-style: italic;
}
.like-btn,
.dislike-btn {
  padding: 6px 12px;
  border-radius: 14px;
  background: #dedee3;
  color: #444;
  border: 1px solid #ccc;
  transition: all 0.2s ease;
  cursor: pointer;
  font-weight: 500;
}
.like-btn.active {
  background: linear-gradient(45deg, #2ed573, #1dd1a1) ;
  color: #fff ;
  border-color: #1dd1a1 ;
  box-shadow: 0 2px 4px rgba(46, 213, 115, 0.3) ;
}
.dislike-btn.active {
  background: linear-gradient(45deg, #ff4757, #ff3742) ;
  color: #fff ;
  border-color: #ff3742 ;
  box-shadow: 0 2px 4px rgba(255, 71, 87, 0.3) ;
}

.series-pill {
  margin-left: auto;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  white-space: nowrap;
  border: 1px solid transparent;
  flex-shrink: 0;
}
.series-pill.status-ongoing {
  background: rgba(81, 207, 102, 0.16);
  color: #2f9e44;
  border-color: #2f9e44;
}
.series-pill.status-ended {
  background: rgba(255, 77, 79, 0.16);
  color: #d63031;
  border-color: #d63031;
}
.series-pill.status-upcoming {
  background: rgba(255, 212, 59, 0.16);
  color: #b08900;
  border-color: #b08900;
}

/* Banners */
#bingeBanner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 4px 0;
}
#bingeBanner .binge-time {
  font-family: ui-monospace, Menlo, monospace;
  font-weight: 900;
  color: #ffd43b;
}
#bingeBanner .binge-label {
  color: #555;
}
#bingeBanner .binge-cta {
  padding: 8px 12px;
  font-size: 0.88rem;
  border-radius: 16px;
  color: #fff;
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
  background-size: 400% 400%;
  animation: rainbow 3s ease-in-out infinite;
  border: 2px solid rgba(255, 255, 255, 0.85);
}
@keyframes rainbow {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* Old notification CSS removed - now using inline styles in centralized system */

/* Notification styles - Centered, clean design */
.notification {
  position: fixed ;
  top: 50% ;
  left: 50% ;
  transform: translate(-50%, -50%) ;
  z-index: 100000 ;
  padding: 16px 24px ;
  border-radius: 12px ;
  color: #1f2937 ;
  font-weight: 500 ;
  font-size: 16px ;
  box-shadow:
    0 20px 25px -5px rgba(0, 0, 0, 0.1),
    0 10px 10px -5px rgba(0, 0, 0, 0.04) ;
  max-width: 400px ;
  min-width: 250px ;
  word-wrap: break-word ;
  text-align: center ;
  cursor: default ;
  display: block ;
  animation: fadeInScale 0.3s ease-out ;
  border: 1px solid #e5e7eb ;
  background: #ffffff ;
}

.notification-message {
  font-size: 16px ;
  font-weight: 500 ;
  color: #1f2937 ;
  margin: 0 ;
}

.notification.success {
  background: #ffffff ;
  border-left: 4px solid #1976d2 ; /* Blue accent like sign-in modal */
}

.notification.error {
  background: #ffffff ;
  border-left: 4px solid #ef4444 ; /* Red accent for errors */
}

.notification.warning {
  background: #ffffff ;
  border-left: 4px solid #f59e0b ; /* Orange accent for warnings */
}

.notification.info {
  background: #ffffff ;
  border-left: 4px solid #1976d2 ; /* Blue accent for info */
}

@keyframes fadeInScale {
  from {
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
  }
  to {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

@keyframes fadeOutScale {
  from {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  to {
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
  }
}

/* Floating buttons now handled by components.css */

/* Tab visibility control */
.tab[style*='display: none'] {
  display: none ;
}

/* Handle .hidden class on tabs - show tab but hide text for mobile optimization */
.tab.hidden {
  display: flex ;
  visibility: visible ;
  opacity: 1 ;
  position: relative ;
  width: 32px ;
  height: 44px ;
  min-width: 32px ;
  padding: 0 ;
  margin: 0 ;
  background: transparent ;
  border: none ;
  overflow: hidden ;
  flex: 0 0 32px ;
  pointer-events: auto ;
}

.tab.hidden span,
.tab.hidden .tab-badge {
  display: none ;
  visibility: hidden ;
  opacity: 0 ;
}

/* Force hide tabs that are truly hidden (not mobile optimization) */
.tab[style*='visibility: hidden'] {
  display: none ;
  visibility: hidden ;
  opacity: 0 ;
  position: absolute ;
  left: -9999px ;
  pointer-events: none ;
  flex: 0 ;
  width: 0 ;
  height: 0 ;
  margin: 0 ;
  padding: 0 ;
  overflow: hidden ;
}

/* REMOVED: Duplicate .tab-container .tab.hidden rules - now in components.css */

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  display: none; /* Default to hidden */
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.modal-backdrop.active,
.modal-backdrop[style*='display: flex'],
.modal-backdrop[style*='display:block'] {
  display: flex;
}

/* Share Modal Specific Styles */
.share-modal {
  text-align: left;
}

.share-list-section {
  margin-bottom: 20px;
  padding: 15px;
  background: var(--card);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.share-list-section h4 {
  margin: 0 0 15px 0;
  color: var(--primary);
  font-size: 1.1rem;
}

.share-items-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.share-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  transition: all 0.2s ease;
}

.share-item:hover {
  background: var(--hover);
  border-color: var(--primary);
}

.share-item input[type='checkbox'] {
  margin: 0;
  transform: scale(1.2);
}

.share-item-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.share-item-title {
  font-weight: 600;
  color: var(--text);
}

.share-item-meta {
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.select-all-controls {
  border: 2px solid var(--primary);
}

.select-all-controls label {
  cursor: pointer;
  padding: 5px 10px;
  border-radius: 6px;
  transition: background 0.2s ease;
}

.select-all-controls label:hover {
  background: var(--hover);
}
.modal {
  background: var(--bg);
  color: var(--text);
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  min-height: auto;
  border-radius: 14px;
  border: 2px solid var(--primary);
  padding: 24px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: visible;
  box-sizing: border-box;
  margin: auto;
  text-align: center;
}
.modal h3 {
  margin: 0 0 10px;
  color: var(--primary);
  word-wrap: break-word;
  overflow-wrap: break-word;
}
.modal .modal-actions {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 14px;
  flex-wrap: wrap;
  overflow: visible;
  max-width: 100%;
  padding: 8px 0;
}

.modal .modal-body {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  overflow: hidden;
  text-align: center;
}

.modal input[type='text'],
.modal .search-input {
  width: 100%;
  max-width: 300px;
  margin: 0 auto;
  display: block;
  text-align: center;
}

.modal-content-wrapper {
  text-align: center;
  margin-bottom: 16px;
}

.modal-instruction {
  margin-bottom: 16px;
  color: var(--text);
  opacity: 0.8;
}

.modal-input {
  width: 100%;
  max-width: 300px;
  padding: 12px;
  border: 2px solid var(--border);
  border-radius: 8px;
  background: var(--bg);
  color: var(--text);
  font-size: 16px;
  text-align: center;
  margin: 0 auto;
  display: block;
  box-sizing: border-box;
}

/* Mobile */
@media (max-width: 768px) {
  body {
    padding: 16px;
  }
  .main-container {
    padding: 16px;
  }
  .search-row {
    display: flex ;
    flex-direction: column ;
    gap: 8px ;
  }
  .search-input {
    width: 100% ;
    font-size: 16px;
  }
  .search-filters {
    display: flex ;
    gap: 8px ;
  }
  #genreFilter {
    flex: 1 ;
  }
  .search-container {
    background: var(--card);
    border: 2px solid var(--primary);
    border-radius: 14px;
    padding: 12px;
    margin: 14px 0;
  }
  .search-container .btn {
    flex: 1 ;
    min-height: 44px;
  }

  @media (max-width: 640px) {
    .show-actions {
      display: flex ;
      flex-direction: column ;
      gap: 8px ;
    }
  }
  @media (max-width: 640px) {
    .show-actions .btn {
      display: block ;
      width: 100% ;
      margin: 0 ;
      box-sizing: border-box ;
      text-align: center ;
      white-space: normal ;
      overflow: hidden ;
      text-overflow: ellipsis ;
      min-height: 44px ;
    }
  }

  .show-poster {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }
  .poster-placeholder {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }
  .show-title {
    font-size: 1rem;
  }
  .show-meta {
    font-size: 0.85rem;
  }
  .show-overview {
    font-size: 0.9rem;
  }
  .rating-container {
    gap: 4px;
  }
  .star-btn {
    padding: 4px;
    min-width: 32px;
  }
}

/* iPhone specific */
@media (max-width: 428px) {
  body {
    padding: 12px;
  }
  .main-container {
    padding: 12px;
  }
  .search-row {
    gap: 6px ;
  }
  .search-input {
    padding: 8px 10px;
  }
  .btn {
    padding: 8px 12px;
    font-size: 14px;
  }
  .show-poster {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }
  .poster-placeholder {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }
  .show-title {
    font-size: 0.95rem;
  }
  .show-meta {
    font-size: 0.8rem;
  }
  .show-overview {
    font-size: 0.85rem;
  }
}

/* iPhone notch/safe area support */
@supports (padding: max(0px)) {
  body {
    padding-left: max(12px, env(safe-area-inset-left));
    padding-right: max(12px, env(safe-area-inset-right));
    padding-top: max(12px, env(safe-area-inset-top));
    padding-bottom: max(12px, env(safe-area-inset-bottom));
  }
}

/* iOS-specific button styling */
.btn {
  -webkit-appearance: none;
  appearance: none;
  touch-action: manipulation;
  user-select: none;
}
.btn:active {
  transform: scale(0.98);
}

/* Missing CSS classes */
.section {
  margin: 20px 0;
}
.section-header {
  margin-bottom: 12px;
}
.section-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}
.tab-section {
  /* Visibility controlled by [hidden] attribute - CSS does not control visibility */
}
.count {
  background: var(--primary);
  color: white;
  border-radius: 12px;
  padding: 2px 8px;
  font-size: 12px;
  margin-left: 6px;
}
.binge-banner {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3));
  color: white;
  padding: 12px 16px;
  border-radius: 10px;
  margin: 14px 0;
  text-align: center;
  animation: fadeout 0.4s ease 2.6s forwards;
}

.empty-state {
  text-align: center;
  color: #666;
  padding: 20px;
  font-style: italic;
}
/* Duplicate notification CSS removed - using the one above */

/* Banners */
#bingeBanner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 4px 0;
}
#bingeBanner .binge-time {
  font-family: ui-monospace, Menlo, monospace;
  font-weight: 900;
  color: #ffd43b;
}
#bingeBanner .binge-label {
  color: #555;
}
#bingeBanner .binge-cta {
  padding: 8px 12px;
  font-size: 0.88rem;
  border-radius: 16px;
  color: #fff;
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
  background-size: 400% 400%;
  animation: rainbow 3s ease-in-out infinite;
  border: 2px solid rgba(255, 255, 255, 0.85);
}
@keyframes rainbow {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.feedback-card {
  background: var(--card);
  border: 2px solid var(--primary);
  border-radius: 14px;
  padding: 12px;
  margin: 14px 0;
}

.feedback-form {
  margin-top: 12px;
}

.feedback-form .hidden {
  display: none;
}

.feedback-form textarea {
  flex: 1;
  min-width: 200px;
}

.feedback-subtitle {
  font-size: 0.9em;
  color: var(--text-secondary);
  text-align: center;
  margin: 8px 0 16px 0;
  font-style: italic;
  opacity: 0.8;
}

.form-error {
  color: #b00020;
  margin-top: 6px;
  font-size: 0.9rem;
}

@media (prefers-reduced-motion: reduce) {
  #bingeBanner .binge-cta {
    animation: none ;
  }
}

.btn-link {
  background: none;
  border: none;
  color: var(--primary);
  font-weight: 900;
  text-decoration: underline;
  padding: 0;
  cursor: pointer;
}

/* Accessibility helpers */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: fixed;
  left: 8px;
  top: 8px;
  width: auto;
  height: auto;
  padding: 8px 12px;
  background: #000;
  color: #fff;
  z-index: 1000;
  border-radius: 6px;
  outline: 3px solid #fff;
}
.sr-only {
  position: absolute ;
  width: 1px ;
  height: 1px ;
  padding: 0 ;
  margin: -1px ;
  overflow: hidden ;
  clip: rect(0, 0, 0, 0) ;
  white-space: normal ;
  border: 0 ;
}
/* High-contrast focus ring */
:focus-visible {
  outline: 3px solid var(--focus, #1a73e8);
  outline-offset: 2px;
}
body.dark-mode :focus-visible {
  outline-color: #fff;
}
@media (min-width: 641px) {
  .show-title,
  .show-meta,
  .rating-container,
  .show-actions {
    min-width: 0;
    overflow-wrap: anywhere;
  }
  .show-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .show-actions .btn {
    white-space: normal;
  }
}
/* Poster button reset */
.poster-button {
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  display: block;
}
.star-rating {
  display: inline-flex;
  gap: 2px;
}
.star-btn {
  border: none;
  background: none;
  padding: 2px;
  line-height: 1;
  cursor: pointer;
  font-size: 1.1rem;
}
.star-btn.active {
  filter: saturate(1.2) brightness(1.1);
  color: #0066cc;
  transform: scale(1.1);
  text-shadow: 0 0 6px rgba(0, 102, 204, 0.6);
  font-weight: bold;
  font-size: 1.3rem;
}

.star-btn {
  border: none;
  background: none;
  padding: 2px;
  line-height: 1;
  cursor: pointer;
  font-size: 1.1rem;
  color: #333;
}

/**
       * Process: Tab-Search Spacing Fix
       * Purpose: Reduces excessive spacing between search bar and tab navigation for compact, user-friendly layout
       * Data Source: CSS margin and padding rules controlling tab container positioning
       * Update Path: Modify margin-top values in .tab-container rules to adjust spacing
       * Dependencies: .top-search element, .tab-container element, mobile responsive breakpoints
       */

/* Tab container layout moved to consolidated-layout.css */

/* Header layout */
.header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap; /* wrap only when truly necessary */
  padding: 8px 12px;
}

.header-left {
  display: flex;
  align-items: baseline;
  gap: 8px;
  flex: 1 1 auto;
  min-width: 260px; /* reduces too-early wrapping */
}

.header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 0 0 auto;
}

.header-right > * {
  white-space: nowrap;
}

.brand {
  margin: 0;
  font-size: 2.1rem;
  color: var(--primary);
  font-weight: 800;
  letter-spacing: 0.2px;
}

.tagline {
  margin: 0;
  color: #8a8a98;
  font-weight: 600;
  font-size: 1rem;
}

/* Tweak text sizes on medium widths */
@media (max-width: 900px) {
  .brand {
    font-size: 1.4rem;
  }
  .tagline {
    font-size: 0.95rem;
    opacity: 0.9;
  }
}

/* Collapse to two tidy rows on small phones */
@media (max-width: 640px) {
  .header-bar {
    justify-content: center;
  }
  .header-left,
  .header-right {
    width: 100%;
    justify-content: center;
  }
  .header-right {
    margin-top: 6px;
  }
}

/* Optional: long usernames */
.user-btn {
  max-width: 220px;
  text-overflow: ellipsis;
  overflow: hidden;
}

```

## _legacy_v1\www\styles\components.css
```

/* Flicklet - Component CSS Styles */

:root {
  /* Core Theme Tokens - Single Source of Truth */
  --fg: #1f2937; /* Primary text color */
  --bg: #ffffff; /* Background color */
  --muted: #374151; /* Muted text color - WCAG AA compliant (4.5:1) */
  --card: #ffffff; /* Card background */
  --border: #e5e7eb; /* Border color */
  --accent: #ff4c8d; /* Accent color */

  /* Legacy color mappings for compatibility */
  --color-primary-start: var(--accent);
  --color-primary-end: #9b4dff;
  --color-text: var(--fg);
  --color-muted: var(--muted);
  --color-surface: var(--bg);
  --color-surface-2: #f3f4f6;
  --color-border: var(--border);
  --color-danger: #ef4444;

  /* High contrast tokens for accessibility */
  --text-secondary: #374151; /* 4.5:1 contrast ratio */
  --placeholder: #6b7280; /* 3:1 contrast ratio for placeholders */
  --badge-text: #1f2937; /* 4.5:1 contrast ratio for badges */
  --meta-text: #374151; /* 4.5:1 contrast ratio for meta text */
}

/* Dark mode CSS variables */
.dark-mode {
  --fg: #f5f5f5; /* Light text on dark background */
  --bg: #1a1a1a; /* Dark background */
  --muted: #b0b0b0; /* Muted text on dark */
  --card: #2a2a2a; /* Dark card background */
  --border: #404040; /* Dark border */
  --accent: #ff4c8d; /* Accent color (unchanged) */

  /* Legacy color mappings for compatibility */
  --color-text: var(--fg);
  --color-text-primary: var(--fg);
  --color-text-secondary: var(--muted);
  --color-muted: var(--muted);
  --color-surface: var(--bg);
  --color-surface-2: var(--card);
  --color-border: var(--border);

  /* High contrast tokens for dark mode */
  --text-secondary: #d1d5db; /* 4.5:1 contrast ratio on dark */
  --placeholder: #9ca3af; /* 3:1 contrast ratio for placeholders */
  --badge-text: #f9fafb; /* 4.5:1 contrast ratio for badges */
  --meta-text: #d1d5db; /* 4.5:1 contrast ratio for meta text */
}

/* Additional design tokens */
:root {
  /* Sizing / spacing */
  --r: 12px;
  --gap-1: 4px;
  --gap-2: 8px;
  --gap-3: 12px;
  --gap-4: 16px;
  --gap-5: 20px;

  /* Skeleton loader colors */
  --skeleton-bg: #f3f4f6;
  --skeleton-shimmer: #e5e7eb;
  --skeleton-animation-duration: 1.5s;

  /* Type scale (mobile) */
  --fs-body: 14px;
  --fs-label: 16px;
  --fs-button: 16px;
  --fs-h3: 22px;

  /* Buttons */
  --btn-h: 40px;
  --btn-radius: 10px;

  /* Z-index */
  --z-header: 200;
  --z-modal: 1000;
  --z-overlay: 999;
}

/* Shared button styles */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--btn-h);
  padding: 0 var(--gap-4);
  border-radius: var(--btn-radius);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
}
.btn.primary {
  border: none;
  color: #fff;
  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));
}
.btn.secondary {
  background: var(--color-surface-2);
}
.btn.ghost {
  background: transparent;
  border: 1px solid var(--color-border);
}
.btn.danger {
  background: var(--color-danger);
  color: #fff;
  border: none;
}

/* Modal primitives (overlay + container shell) */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: var(--z-overlay);
  display: none;
}
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
  pointer-events: none;
}
.modal > .modal-card {
  pointer-events: auto;
  max-width: 320px;
  width: calc(100% - 32px);
  background: var(--color-surface);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

/* === CARD COMPONENT TOKENS === */
:root {
  /* Card dimensions - now handled by spacing-system.css */

  /* Spacing tokens */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;

  /* Radius tokens */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;

  /* Shadow tokens */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);

  /* === POSTER STANDARDIZATION SYSTEM - now handled by spacing-system.css === */

  /* Card layout variables */
  --card-gap-desktop: 16px;
  --card-pad-y-desktop: 16px;
  --card-pad-x-desktop: 16px;
  --meta-title-size-desktop: 18px;
  --meta-line-desktop: 1.3;
  --card-gap-mobile: 12px;
  --card-pad-y-mobile: 12px;
  --card-pad-x-mobile: 16px;
  --meta-title-size-mobile: 16px;
  --meta-line-mobile: 1.2;
  --card-bg: var(--color-surface, #ffffff);
  --card-border: 1px solid var(--color-border, #e0e0e0);
  --card-radius: 8px;
  --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* === SECTION BOXING (Home Layout v2) === */
.section {
  background: var(--color-surface, #ffffff);
  border-radius: var(--radius-xl, 16px);
  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
  padding: var(--space-4, 16px);
  margin-block: var(--space-4, 16px);
  border: 1px solid var(--color-border, #e1e5e9);
}

.section__header {
  display: flex;
  align-items: baseline;
  gap: var(--space-2, 8px);
  margin-bottom: var(--space-3, 12px);
  flex-wrap: wrap;
}

.section__header h3 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text-primary, #1a1a1a);
  line-height: 1.3;
}

.section__subtitle {
  margin: 0;
  font-size: 0.875rem;
  color: var(--color-text-secondary, #6b7280);
  line-height: 1.4;
  font-weight: 400;
}

.section__body {
  /* Content area - specific sections will add their own layout */
  display: block;
}

/* Community section specific layout */
.section--community .section__body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4, 16px);
  align-items: start;
}

/* Dark mode section styling */
.dark-mode .section {
  background: var(--card);
  border-color: var(--border);
  color: var(--text);
}

.dark-mode .section__header h3 {
  color: var(--text);
}

.dark-mode .section__subtitle {
  color: var(--text-secondary);
}

/* Dark mode home section styling */
.dark-mode .home-section {
  color: var(--text);
}

.dark-mode .home-section .section-title {
  color: var(--text);
}

/* Dark mode card styling */
.dark-mode .card {
  background: var(--card);
  border-color: var(--border);
  color: var(--text);
}

.dark-mode .card--compact {
  background: var(--card);
  border-color: var(--border);
}

/* Dark mode curated section styling */
.dark-mode .curated-sections {
  color: var(--text);
}

.dark-mode .curated-section .section-title {
  color: var(--text);
}

.dark-mode .curated-section .section-subtitle {
  color: var(--text-secondary);
}

/* Dark mode button and badge styling */
.dark-mode .btn {
  background: var(--card);
  color: var(--text);
  border-color: var(--border);
}

.dark-mode .btn.primary {
  background: var(--accent);
  color: white;
  border: none;
}

.dark-mode .badge {
  background: var(--accent);
  color: white;
}

/* Dark mode feedback link card styling */
.dark-mode .feedback-link-card {
  background: var(--card);
  border-color: var(--border);
  color: var(--text);
}

.dark-mode .feedback-link-card p {
  color: var(--text-secondary);
}

/* Dark mode theaters container styling */
.dark-mode .theaters-container {
  background: var(--card);
  color: var(--text);
}

.dark-mode .theaters-header h3 {
  color: var(--text);
}

.dark-mode .theaters-info {
  background: var(--card);
  color: var(--text);
}

.dark-mode .theaters-meta h3 {
  color: var(--text);
}

.dark-mode .theaters-meta p {
  color: var(--text-secondary);
}

.dark-mode .location-info {
  color: var(--text-secondary);
}

@media (max-width: var(--bp-mobile-lg)) {
  .section--community .section__body {
    grid-template-columns: 1fr;
    gap: var(--space-3, 12px);
  }
}

/* Ghost rows for personalized */
.row--ghost {
  margin: 1rem 0;
  padding: 1rem;
  background: var(--color-surface, #ffffff);
  border: 1px solid var(--color-border, #e1e5e9);
  border-radius: 8px;
  text-align: center;
}

.row--ghost .row__header h4 {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text);
  margin: 0 0 12px 0;
}

.row--ghost .row__ghost-cards {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
  overflow-x: auto;
  padding: 4px 0;
}

.row--ghost .ghost-card {
  flex: 0 0 auto;
  width: var(--home-card-width-desktop);
  height: var(--home-card-height-desktop);
  background: var(--color-border, #e1e5e9);
  border-radius: 8px;
  animation: pulse 2s infinite;
}

.row--ghost .row__cta {
  background: var(--primary, #e91e63);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background 0.2s ease;
}

.row--ghost .row__cta:hover {
  background: var(--primary-dark, #c2185b);
}

.row--ghost .ghost-card {
    width: var(--home-card-width-mobile);
    height: var(--home-card-height-mobile);
  }

/* Community Games Container */
.community-games-container {
  width: 100%;
  height: 100%;
}

.community-games-grid {
  display: grid;
  grid-template-rows: 1fr 1fr;
  gap: var(--space-3, 12px);
  height: 100%;
}

/* Individual Game Box */
.game-box {
  background: var(--color-surface, #ffffff);
  border: 1px solid var(--color-border, #e1e5e9);
  border-radius: var(--radius-lg, 12px);
  padding: var(--space-4, 16px);
  display: flex;
  flex-direction: column;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
}

.game-box:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md, 0 4px 6px rgba(0, 0, 0, 0.1));
}

.game-header {
  margin-bottom: var(--space-3, 12px);
}

.game-title {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text-primary, #1a1a1a);
  line-height: 1.3;
}

.game-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.game-stats {
  display: flex;
  gap: var(--space-4, 16px);
  margin-bottom: var(--space-3, 12px);
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary, #007bff);
  line-height: 1;
  margin-bottom: var(--space-1, 4px);
}

.stat-label {
  font-size: 0.75rem;
  color: var(--color-text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 500;
}

.game-play-btn {
  background: var(--color-primary, #007bff);
  color: white;
  border: none;
  border-radius: var(--radius-md, 8px);
  padding: var(--space-2, 8px) var(--space-4, 16px);
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  min-height: 36px;
}

.game-play-btn:hover {
  background: var(--color-primary-dark, #0056b3);
  transform: translateY(-1px);
}

.game-play-btn:active {
  transform: translateY(0);
}

/* Game-specific styling */
.game-trivia {
  border-left: 4px solid #10b981;
}

.game-flickword {
  border-left: 4px solid #8b5cf6;
}

/* Mobile Layout */
@media (max-width: var(--bp-mobile-lg)) {
  .community-games-grid {
    grid-template-rows: auto;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-2, 8px);
  }

  .game-box {
    padding: var(--space-3, 12px);
  }

  .game-title {
    font-size: 1rem;
  }

  .game-stats {
    gap: var(--space-2, 8px);
    margin-bottom: var(--space-2, 8px);
  }

  .stat-value {
    font-size: 1.25rem;
  }

  .stat-label {
    font-size: 0.6875rem;
  }

  .game-play-btn {
    padding: var(--space-1, 4px) var(--space-3, 12px);
    font-size: 0.8125rem;
    min-height: 32px;
  }
}

/* Small mobile adjustments */
@media (max-width: 480px) {
  .game-box {
    padding: var(--space-2, 8px);
  }

  .game-title {
    font-size: 0.875rem;
  }

  .stat-value {
    font-size: 1.125rem;
  }

  .stat-label {
    font-size: 0.625rem;
  }
}

/* Responsive section padding */
@media (max-width: var(--bp-mobile)) {
  .section {
    padding: var(--space-3, 12px);
    margin-block: var(--space-3, 12px);
  }

  .section__header h3 {
    font-size: 1.125rem;
  }

  .section__subtitle {
    font-size: 0.8125rem;
  }
}

/* === FEEDBACK LINK STYLES === */
.feedback-link-section {
  margin: var(--space-4, 16px) 0;
}

.feedback-link-card {
  background: var(--color-surface, #ffffff);
  border: 1px solid var(--color-border, #e0e0e0);
  border-radius: var(--radius-lg, 12px);
  padding: var(--space-4, 16px);
  text-align: center;
  box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
  transition: all 0.2s ease;
}

.feedback-link-card:hover {
  box-shadow: var(--shadow-md, 0 4px 6px rgba(0, 0, 0, 0.1));
  transform: translateY(-1px);
}

.feedback-link-card p {
  margin: 0 0 var(--space-3, 12px) 0;
  color: var(--color-text-secondary, #666);
  font-size: 0.875rem;
}

.feedback-link-card .btn {
  margin: 0;
}

/* === FEEDBACK FORM STYLES (Settings Page) === */
.feedback-form {
  margin-top: var(--space-4, 16px);
}

.feedback-form .settings-textarea {
  width: 100%;
  min-height: 100px;
  resize: vertical;
}

.feedback-form .btn {
  margin-top: var(--space-3, 12px);
}

/* === END FEEDBACK STYLES === */

/* Mobile responsiveness for feedback link */
@media (max-width: var(--bp-mobile)) {
  .feedback-link-card {
    padding: var(--space-3, 12px);
  }

  .feedback-link-card p {
    font-size: 0.8125rem;
  }
}

/* === BASE POSTER CARD COMPONENT STYLES === */

/* Base Poster Card - Unified 2:3 aspect ratio cards */
.base-poster-card {
  position: relative;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
  cursor: pointer;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  width: 100%;
  aspect-ratio: 2/3;
  padding: 0;
  text-align: left;
  font-family: inherit;
}

.base-poster-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.base-poster-card:focus-visible {
  outline: 2px solid var(--color-primary-start);
  outline-offset: 2px;
}

.base-poster-card--disabled {
  opacity: 0.6;
  pointer-events: none;
}

.base-poster-card--skeleton {
  pointer-events: none;
}

.base-poster-card--empty {
  pointer-events: none;
  justify-content: center;
  align-items: center;
}

/* Poster section */
.base-poster-card__poster {
  position: relative;
  width: 100%;
  height: 100%;
  background: var(--color-surface-2);
  overflow: hidden;
}

.base-poster-card__poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.base-poster-card__placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: var(--color-muted);
  background: var(--color-surface-2);
}

/* Content section */
.base-poster-card__content {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
  padding: var(--space-3);
  color: white;
}

.base-poster-card__title {
  font-size: 0.9rem;
  font-weight: 600;
  line-height: 1.2;
  margin: 0 0 var(--space-1);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.base-poster-card__subline {
  font-size: 0.8rem;
  opacity: 0.9;
  margin: 0 0 var(--space-1);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.base-poster-card__rating {
  font-size: 0.8rem;
  color: #fbbf24;
  margin: 0;
}

/* Overflow menu */
.base-poster-card__overflow {
  position: absolute;
  bottom: var(--space-2);
  right: var(--space-2);
}

.base-poster-card__overflow-btn {
  background: rgba(0, 0, 0, 0.7);
  border: none;
  border-radius: var(--radius-sm);
  padding: var(--space-1);
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
}

.base-poster-card__overflow-btn:hover {
  background: rgba(0, 0, 0, 0.9);
}

.base-poster-card__overflow-dots {
  font-size: 0.8rem;
  font-weight: bold;
  line-height: 1;
}

.base-poster-card__overflow-menu {
  position: absolute;
  bottom: 100%;
  right: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-lg);
  min-width: 120px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(4px);
  transition: all 0.2s ease;
  z-index: 10;
}

.base-poster-card__overflow-menu[aria-hidden='false'] {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.base-poster-card__overflow-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  cursor: pointer;
  color: var(--color-text);
  transition: background-color 0.2s ease;
}

.base-poster-card__overflow-item:hover {
  background: var(--color-surface-2);
}

.base-poster-card__overflow-icon {
  font-size: 1rem;
  width: 16px;
  text-align: center;
}

.base-poster-card__overflow-label {
  flex: 1;
  font-size: 0.9rem;
}

/* Skeleton loading */
.base-poster-card__skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-surface-2) 25%,
    var(--color-surface) 50%,
    var(--color-surface-2) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Empty state */
.base-poster-card__empty-content {
  text-align: center;
  color: var(--color-muted);
}

.base-poster-card__empty-icon {
  font-size: 2rem;
  margin-bottom: var(--space-2);
}

.base-poster-card__empty-message {
  font-size: 0.9rem;
  margin: 0;
}

/* Responsive grid system - only for FlickWord/Trivia content */
.flickword-tab__grid,
.trivia-tab__grid {
  display: grid;
  gap: 12px;
  padding: 16px;
  max-width: 1440px;
  margin: 0 auto;
}

/* Mobile: 2 columns */
@media (max-width: 375px) {
  .flickword-tab__grid,
  .trivia-tab__grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    padding: 16px;
  }
}

/* Small mobile: 3 columns */
@media (min-width: 376px) and (max-width: 599px) {
  .flickword-tab__grid,
  .trivia-tab__grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding: 16px;
  }
}

/* Tablet: 4 columns */
@media (min-width: 600px) and (max-width: 899px) {
  .flickword-tab__grid,
  .trivia-tab__grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    padding: 24px;
  }
}

/* Large tablet: 5 columns */
@media (min-width: 900px) and (max-width: 1279px) {
  .flickword-tab__grid,
  .trivia-tab__grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 16px;
    padding: 24px;
  }
}

/* Desktop: 6-8 columns (auto-fill) */
@media (min-width: 1280px) {
  .flickword-tab__grid,
  .trivia-tab__grid {
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    padding: 24px;
  }
}

/* === STATSCARD COMPONENT STYLES === */

/* StatsCard - FlickWord statistics display */
.stats-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  box-shadow: var(--shadow-sm);
}

.stats-card__header {
  margin-bottom: var(--space-3);
}

.stats-card__title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.stats-card__content {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-3);
}

.stats-card__stat {
  text-align: center;
}

.stats-card__stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary-start);
  line-height: 1;
  margin-bottom: var(--space-1);
}

.stats-card__stat-label {
  font-size: 0.8rem;
  color: var(--color-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stats-card__footer {
  margin-top: var(--space-3);
  padding-top: var(--space-3);
  border-top: 1px solid var(--color-border);
}

.stats-card__last-played {
  font-size: 0.8rem;
  color: var(--color-muted);
  text-align: center;
}

/* Mobile adjustments */
@media (max-width: var(--bp-mobile)) {
  .stats-card {
    padding: var(--space-3);
  }

  .stats-card__content {
    gap: var(--space-2);
  }

  .stats-card__stat-value {
    font-size: 1.25rem;
  }

  .stats-card__stat-label {
    font-size: 0.7rem;
  }
}

/* === FLICKWORD TAB STYLES === */

.flickword-tab {
  width: 100%;
}

.flickword-tab__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-6);
  padding: 0 var(--space-4);
}

.flickword-tab__title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text);
  margin: 0;
}

.flickword-tab__hero {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-6);
  margin-bottom: var(--space-6);
  padding: 0 var(--space-4);
  align-items: center;
}

.flickword-tab__hero-image {
  display: flex;
  justify-content: center;
}

.flickword-tab__hero-image img {
  width: 100%;
  max-width: 480px;
  min-width: 280px;
  height: auto;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
}

.flickword-tab__hero-stats {
  flex-shrink: 0;
}

.flickword-tab__grid {
  margin-top: var(--space-4);
}

/* Mobile adjustments for FlickWord tab */
@media (max-width: var(--bp-mobile-lg)) {
  .flickword-tab__header {
    padding: 0 var(--space-3);
    margin-bottom: var(--space-4);
  }

  .flickword-tab__title {
    font-size: 1.25rem;
  }

  .flickword-tab__hero {
    grid-template-columns: 1fr;
    gap: var(--space-4);
    padding: 0 var(--space-3);
    margin-bottom: var(--space-4);
  }

  .flickword-tab__hero-image {
    order: 2;
  }

  .flickword-tab__hero-stats {
    order: 1;
  }
}

/* === TRIVIA TAB STYLES === */

.trivia-tab {
  width: 100%;
}

.trivia-tab__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-6);
  padding: 0 var(--space-4);
}

.trivia-tab__title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text);
  margin: 0;
}

.trivia-tab__grid {
  margin-top: var(--space-4);
}

/* Mobile adjustments for Trivia tab */
@media (max-width: var(--bp-mobile-lg)) {
  .trivia-tab__header {
    padding: 0 var(--space-3);
    margin-bottom: var(--space-4);
  }

  .trivia-tab__title {
    font-size: 1.25rem;
  }
}

/* === GAME TAB NAVIGATION STYLES === */

.game-tab-nav {
  display: flex;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
  padding: 0 var(--space-4);
  border-bottom: 1px solid var(--color-border);
}

.game-tab-btn {
  background: none;
  border: none;
  padding: var(--space-3) var(--space-4);
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-muted);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}

.game-tab-btn:hover {
  color: var(--color-text);
  background: var(--color-surface-2);
}

.game-tab-btn.active {
  color: var(--color-primary-start);
  border-bottom-color: var(--color-primary-start);
}

.game-tab {
  display: none;
}

.game-tab.active {
  display: block;
}

/* Mobile adjustments for tab navigation */
@media (max-width: var(--bp-mobile-lg)) {
  .game-tab-nav {
    padding: 0 var(--space-3);
    margin-bottom: var(--space-3);
  }

  .game-tab-btn {
    padding: var(--space-2) var(--space-3);
    font-size: 0.9rem;
  }
}

/* === VERSION DISPLAY STYLES === */

.version-display {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--color-muted);
  background: var(--color-surface-2);
  padding: 2px 6px;
  border-radius: 4px;
  margin-right: var(--space-2);
  display: inline-block;
}

/* === MOBILE CARD OPTIMIZATIONS === */
/* Compact mobile layout for tab cards */
@media (max-width: var(--bp-mobile-lg)) {
  /* Mobile TabCard optimizations */
  .tab-card {
    min-height: 120px; /* Reduced from default */
    padding: 8px; /* Reduced padding */
  }
  
  .tab-card .poster {
    width: 60px !important; /* Force smaller poster */
    height: 90px !important; /* Force smaller poster */
    flex-shrink: 0;
  }
  
  .tab-card .content {
    padding: 6px 8px !important; /* Reduced content padding */
    min-width: 0; /* Allow text truncation */
  }
  
  .tab-card .title {
    font-size: 13px !important; /* Smaller title */
    line-height: 1.2;
    margin-bottom: 2px;
  }
  
  .tab-card .meta {
    font-size: 10px !important; /* Smaller meta text */
    margin-bottom: 2px;
  }
  
  .tab-card .rating {
    font-size: 10px !important; /* Smaller rating */
    margin-bottom: 4px;
  }
  
  .tab-card .overview {
    display: none; /* Hide overview on mobile */
  }
  
  .tab-card .badges {
    display: none; /* Hide badges on mobile */
  }
  
  .tab-card .where {
    display: none; /* Hide where to watch on mobile */
  }
  
  /* Mobile action buttons */
  .tab-card .mobile-actions .btn {
    font-size: 10px !important;
    padding: 4px 6px !important;
    min-height: 24px !important;
    flex: 1;
    min-width: 0;
  }
  
  /* Mobile ellipsis dropdown */
  .tab-card .mobile-actions .absolute {
    top: 100%;
    left: 0;
    right: 0;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 50;
    padding: 8px;
  }
  
  .tab-card .mobile-actions .absolute .btn {
    font-size: 10px !important;
    padding: 3px 5px !important;
    min-height: 22px !important;
    margin: 1px;
  }
  
  /* Hide desktop actions on mobile */
  .tab-card .hidden.md\\:block {
    display: none !important;
  }
  
  /* Show mobile actions on mobile */
  .tab-card .md\\:hidden {
    display: block !important;
  }
}

/* Base card styles */
.card {
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--color-surface, var(--card));
  border: 1px solid var(--color-border, var(--border));
  border-radius: var(--radius-lg, 8px);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: all 0.2s ease;
}

.card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card--disabled {
  opacity: 0.6;
  pointer-events: none;
}

/* Compact variant (Home rows & search) */
.card--compact {
  width: var(--card-w);
  height: var(--card-h);
  display: flex;
  flex-direction: column;
}

.card--compact .card__poster {
  position: relative;
  width: 100%;
  height: 100%;
  aspect-ratio: 2/3;
  border-radius: var(--radius-md);
  overflow: hidden;
  cursor: pointer;
  background: var(--color-surface-2);
}

.card--compact .card__poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.card--compact .card__poster-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: var(--color-muted);
  background: var(--color-surface-2);
}

.card--compact .card__overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, transparent 0%, transparent 40%, rgba(0, 0, 0, 0.7) 100%);
  opacity: 0;
  transition: opacity 0.2s ease;
  display: flex;
  align-items: flex-end;
  padding: var(--space-3);
}

.card--compact:hover .card__overlay {
  opacity: 1;
}

.card--compact .card__overlay-content {
  color: white;
  width: 100%;
}

.card--compact .card__title {
  font-size: 0.9rem;
  font-weight: 600;
  line-height: 1.2;
  margin: 0 0 var(--space-1);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card--compact .card__subtitle {
  font-size: 0.8rem;
  opacity: 0.9;
  margin: 0 0 var(--space-2);
}

.card--compact .card__rating {
  margin-bottom: var(--space-2);
}

.card--compact .card__stars {
  color: #fbbf24;
  font-size: 0.9rem;
}

.card--compact .card__primary-action {
  width: 100%;
  min-height: 32px;
  padding: var(--space-1) var(--space-2);
  font-size: 0.8rem;
  border-radius: var(--radius-sm);
}

/* Expanded variant (lists & detail contexts) */
.card--expanded {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--space-3);
  padding: var(--space-3);
  min-height: 120px;
}

.card--expanded .card__poster {
  width: var(--poster-w-desktop); /* Using centralized desktop poster width */
  height: var(--poster-h-desktop); /* Using centralized desktop poster height */
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--color-surface-2);
  cursor: pointer;
}

.card--expanded .card__poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card--expanded .card__poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  color: var(--color-muted);
}

.card--expanded .card__content {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  min-width: 0;
}

.card--expanded .card__title {
  font-size: 1.1rem;
  font-weight: 600;
  line-height: 1.3;
  margin: 0;
  color: var(--color-text);
}

.card--expanded .card__subtitle {
  font-size: 0.9rem;
  color: var(--color-muted);
  margin: 0;
}

.card--expanded .card__rating {
  margin: 0;
}

.card--expanded .card__stars {
  color: #fbbf24;
  font-size: 1rem;
}

.card--expanded .card__actions {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-top: auto;
}

/* Title row layout for inline status badges */
.card__title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  margin-bottom: 4px;
}

.card__title-row .card__title {
  flex: 1;
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  line-height: 1.3;
  color: var(--color-text);
}

.card__title-row .card__badge--status {
  flex-shrink: 0;
  margin-left: auto;
}

/* Badges */
.card__badge {
  position: absolute;
  top: var(--space-2);
  left: var(--space-2);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  z-index: 2;
}

.card__badge--status {
  background: var(--color-primary-start);
  color: white;
  /* Move status badges to title row - right aligned */
  position: static;
  display: inline-block;
  margin-left: auto;
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 12px;
  font-weight: 500;
  text-transform: none;
  letter-spacing: 0.3px;
}

/* Program Status Badge - Unified Status System */
.program-status-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: none;
  letter-spacing: 0.3px;
  white-space: nowrap;
  flex-shrink: 0;
  margin-left: auto;
  border: 1px solid transparent;
  transition: all 0.2s ease;
}

.program-status-badge.status-ended {
  background: rgba(255, 77, 79, 0.16);
  color: #d63031;
  border-color: #d63031;
}

.program-status-badge.status-ongoing {
  background: rgba(81, 207, 102, 0.16);
  color: #2f9e44;
  border-color: #2f9e44;
}

.program-status-badge.status-upcoming {
  background: rgba(255, 212, 59, 0.16);
  color: #b08900;
  border-color: #b08900;
}

/* Mobile responsive behavior for status badges */
@media (max-width: 480px) {
  .program-status-badge {
    font-size: 0.7rem;
    padding: 3px 6px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* On mobile, status badge moves below title and right-aligned */
  .show-title-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .show-title-row .program-status-badge {
    margin-left: 0;
    align-self: flex-end;
    order: 2;
  }

  .show-title-row .show-title {
    order: 1;
    width: 100%;
  }
}

.card__badge--provider {
  top: auto;
  bottom: var(--space-2);
  left: auto;
  right: var(--space-2);
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

/* More menu */
.card__more {
  position: relative;
}

.card__more-btn {
  background: none;
  border: none;
  padding: var(--space-1);
  cursor: pointer;
  border-radius: var(--radius-sm);
  color: var(--color-muted);
  transition: all 0.2s ease;
  min-width: 32px;
  min-height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card__more-btn:hover {
  background: var(--color-surface-2);
  color: var(--color-text);
}

.card__more-btn:focus-visible {
  outline: 2px solid var(--color-primary-start);
  outline-offset: 2px;
}

.card__more-dots {
  font-size: 1.2rem;
  font-weight: bold;
  line-height: 1;
}

.card__more-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: var(--space-1);
  min-width: 160px;
  z-index: 10;
  transform: translateY(var(--space-1));
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease;
}

.card__more-menu[aria-hidden='false'] {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.card__more-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  width: 100%;
  padding: var(--space-2);
  background: none;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--color-text);
  text-align: left;
  transition: background-color 0.2s ease;
}

.card__more-item:hover {
  background: var(--color-surface-2);
}

.card__more-item:focus-visible {
  outline: 2px solid var(--color-primary-start);
  outline-offset: -2px;
}

.card__more-icon {
  font-size: 1rem;
  width: 16px;
  text-align: center;
}

.card__more-label {
  flex: 1;
}

/* Mobile adjustments */
@media (max-width: var(--bp-mobile)) {
  .card--compact {
    width: var(--card-w-mobile);
    height: var(--card-h-mobile);
  }

  .card--compact .card__overlay {
    padding: var(--space-2);
  }

  .card--compact .card__title {
    font-size: 0.8rem;
  }

  .card--compact .card__subtitle {
    font-size: 0.7rem;
  }

  .card--compact .card__primary-action {
    min-height: 28px;
    font-size: 0.7rem;
  }

  .card--expanded {
    grid-template-columns: var(--poster-w-mobile) 1fr;
    gap: var(--space-2);
    padding: var(--space-2);
    min-height: var(--poster-h-mobile);
  }

  .card--expanded .card__poster {
    width: var(--poster-w-mobile);
    height: var(--poster-h-mobile);
  }

  .card--expanded .card__title {
    font-size: 1rem;
  }

  .card--expanded .card__subtitle {
    font-size: 0.8rem;
  }

  /* === MOBILE POSTER STANDARDIZATION === */
  /* Ensure all posters use standardized mobile dimensions */
  .show-poster,
  .poster-placeholder {
    width: var(--poster-w-mobile);
    height: var(--poster-h-mobile);
    aspect-ratio: 2/3;
  }

  /* Mobile card layout uses mobile poster dimensions */
  .show-card {
    grid-template-columns: var(--poster-w-mobile) 1fr;
    min-height: var(--poster-h-mobile);
  }

  .show-card .show-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-2);
    margin-bottom: 4px;
  }

  .show-card .show-title {
    flex: 1;
    margin: 0;
  }

  /* REMOVED: Old series-pill CSS - replaced with program-status-badge */

  /* Mobile list container styling */
  #watchingList,
  #wishlistList,
  #watchedList {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
}

/* Focus management */
.card:focus-visible {
  outline: 2px solid var(--color-primary-start);
  outline-offset: 2px;
}

.card__poster:focus-visible {
  outline: 2px solid var(--color-primary-start);
  outline-offset: 2px;
}

/* === UNIFIED CARD SYSTEM - DESKTOP (â‰¥641px) === */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .show-card {
    display: grid;
    grid-template-columns: var(--poster-w-desktop) 1fr;
    gap: var(--card-gap-desktop);
    padding: var(--card-pad-y-desktop) var(--card-pad-x-desktop);
    background: var(--card-bg);
    border: var(--card-border);
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    align-items: start;
    min-height: var(--poster-h-desktop);
  }

  .show-card .show-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-2);
    margin-bottom: 4px;
  }

  .show-card .show-title {
    font-size: var(--meta-title-size-desktop);
    line-height: var(--meta-line-desktop);
    margin: 0;
    font-weight: 700;
    color: var(--color-text, #121212);
    font-size: 20px;
    flex: 1;
  }

  .show-card .show-meta {
    font-size: 13px;
    color: var(--color-text-secondary, #888);
    margin: 0 0 8px;
    line-height: 1.4;
    font-weight: 400;
  }

  .show-card .program-status-badge {
    margin-left: auto;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    border: 1px solid transparent;
    flex-shrink: 0;
  }

  .show-card .program-status-badge.status-ongoing {
    background: rgba(81, 207, 102, 0.16);
    color: #2f9e44;
    border-color: #2f9e44;
  }

  .show-card .program-status-badge.status-ended {
    background: rgba(255, 77, 79, 0.16);
    color: #d63031;
    border-color: #d63031;
  }

  .show-card .program-status-badge.status-upcoming {
    background: rgba(255, 212, 59, 0.16);
    color: #b08900;
    border-color: #b08900;
  }

  .show-card .show-overview {
    font-size: 15px;
    line-height: 1.5;
    color: var(--color-text, #121212);
    margin: 0 0 12px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Ensure proper spacing between cards on desktop */
  .show-card + .show-card {
    margin-top: 20px;
  }

  /* List container styling */
  #watchingList,
  #wishlistList,
  #watchedList {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
}

/* Tab Container - YouTube-style Design */
.tab-container {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  flex-wrap: nowrap;
  gap: 0;
  background: transparent;
  padding: 0;
  border-radius: 0;
  margin: 16px 0 0 0;
  border: none;
  border-bottom: 1px solid var(--border);
  animation: tabContainerSlideIn 0.8s ease-out 0.4s both;
  position: relative;
  z-index: 100; /* PART2C */
  overflow-x: auto;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  scrollbar-width: none;
  -ms-overflow-style: none;
}

/* Ensure tabs are always visible during search */
.tab-container {
  display: flex; /* PART2C */
}

/* Search results positioning - below tabs, above content */
#searchResults {
  position: relative;
  z-index: 50;
  margin-top: 0;
  margin-bottom: 16px;
  background: var(--card);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid var(--border);
}

/* Ensure search results appear between search bar and tabs */
.top-search + #searchResults {
  margin-top: 8px;
}

#searchResults + .tab-container {
  margin-top: 8px;
}

.tab-container::-webkit-scrollbar {
  display: none;
}

/* Search bar to tab container spacing - single source */
.top-search + .tab-container {
  margin-top: 4px;
}

@keyframes tabContainerSlideIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  .tab-container {
    animation: none;
  }
}

.tab {
  flex: 1 1 0;
  border: 0;
  background: transparent;
  padding: 16px 20px;
  border-radius: 0;
  font-weight: 500;
  font-size: 15px;
  cursor: pointer;
  min-height: 48px;
  min-width: 0;
  max-width: none;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  white-space: nowrap;
  border-bottom: 3px solid transparent;
  color: var(--text-muted);
}

.tab::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.tab:hover::before {
  left: 100%;
}

.tab:hover {
  background: rgba(0, 0, 0, 0.05);
  color: var(--text);
}

.tab.is-active {
  background: transparent;
  color: var(--text);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

@keyframes tabActivate {
  0% {
    transform: scale(0.95);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

.tab-badge {
  background: var(--text-muted);
  color: var(--bg);
  border-radius: 10px;
  padding: 2px 6px;
  font-size: 11px;
  font-weight: 600;
  margin-left: 6px;
  min-width: 16px;
  text-align: center;
  line-height: 1.2;
  transition: all 0.2s ease;
  display: inline-block;
  visibility: visible;
  opacity: 1;
}

.tab.is-active .tab-badge {
  background: var(--primary);
  color: white;
}

/* Buttons */
.btn {
  border: 0;
  background: linear-gradient(45deg, var(--primary), var(--purple));
  color: #fff;
  border-radius: 8px;
  padding: 8px 16px;
  min-height: 44px;
  flex-shrink: 0;
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  letter-spacing: 0.3px;
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn:active {
  transform: translateY(0);
  transition: transform 0.1s ease;
}

.btn:focus {
  outline: 3px solid var(--focus, #1a73e8);
  outline-offset: 2px;
}

.btn.secondary {
  background: linear-gradient(45deg, #737d8c, #57606f);
}

.btn.success {
  background: linear-gradient(45deg, #2ed573, #1dd1a1);
}

.btn.danger {
  background: linear-gradient(45deg, #f06292, #e91e63);
}

/* Search Components */
.top-search {
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  margin: 12px 0;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
  animation: searchSlideIn 0.7s ease-out 0.2s both;
  /* Fix sticky positioning on iOS Safari */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

@keyframes searchSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-row {
  position: relative;
  display: flex;
  flex-direction: row;
  gap: 8px;
  align-items: center;
  flex-wrap: nowrap;
  padding-top: 26px; /* room for tips */
}

.search-input {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  flex: 1;
  min-width: 200px;
  min-height: 44px;
  transition: all 0.2s ease;
}

.search-input:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);
  border-color: var(--primary);
}

.genre-filter {
  padding: 8px 6px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-height: 44px;
  min-width: 60px;
  width: 60px;
  max-width: 60px;
  flex-shrink: 0;
  transition: all 0.2s ease;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  text-align: left;
  direction: ltr;
}

.genre-filter:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);
  border-color: var(--primary);
}

.search-help {
  position: absolute;
  top: 6px ;
  left: 14px ;
  font-size: 0.9rem ;
  line-height: 1.2 ;
  font-style: italic ;
  color: rgba(255, 255, 255, 0.65) ; /* dark theme */
  background: transparent ;
  border: none ;
  box-shadow: none ;
  padding: 0 ;
  margin: 0 ;
  margin-bottom: 0 ;
  text-align: left ;
  border-radius: 0 ;
  pointer-events: auto ; /* allow clicks for tooltips */
  z-index: 2 ;
  opacity: 0.7 ;
  transition: opacity 0.2s ease ;
}

html[data-theme='light'] .search-help,
.light-mode .search-help,
html:not([data-theme='dark']) .search-help {
  color: #8a8a98 ; /* same neutral gray as snarky subtitle - works in both themes */
  opacity: 1; /* full opacity in light mode for visibility */
}

.search-help:hover {
  opacity: 1;
}

/* Ensure tooltips work properly */
.onboarding-hint,
.keyboard-hint {
  pointer-events: auto ;
  cursor: help ;
}

.onboarding-hint::after,
.keyboard-hint::before {
  pointer-events: auto ;
}

.tooltip {
  pointer-events: none;
  z-index: 1000 ;
}

/* Remove any debug styling */
body {
  border: none;
}

.upcoming-episodes {
  margin-bottom: 20px;
}

.upcoming-episodes .card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.upcoming-episodes .tag {
  background: #667eea;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.upcoming-episodes-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.upcoming-episode-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 12px;
  border-left: 4px solid #667eea;
  margin-bottom: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  transition: all 0.2s ease;
}

.upcoming-episode-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.upcoming-episode-item .show-info {
  flex: 1;
  min-width: 0;
}

.upcoming-episode-item .show-name {
  font-weight: 600;
  color: #2c3e50;
  font-size: 14px;
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.upcoming-episode-item .episode-info {
  font-size: 12px;
  color: #6c757d;
  font-style: italic;
}

.upcoming-episode-item .air-date {
  font-size: 12px;
  color: #667eea;
  font-weight: 500;
  text-align: right;
  background: rgba(102, 126, 234, 0.1);
  padding: 4px 8px;
  border-radius: 6px;
  white-space: nowrap;
  margin-left: 12px;
}

.no-episodes {
  text-align: center;
  color: #666;
  font-style: italic;
  padding: 20px;
}

.pro-features {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.pro-feature {
  display: flex;
  align-items: center;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 3px solid #dee2e6;
  transition: all 0.2s ease;
}

.pro-feature.unlocked {
  border-left-color: #007bff;
  background: #f8f9ff;
  box-shadow: 0 2px 4px rgba(0, 123, 255, 0.1);
}

.pro-feature.locked {
  opacity: 0.7;
}

.pro-feature-icon {
  font-size: 20px;
  margin-right: 12px;
  width: 24px;
  text-align: center;
}

.pro-feature-content {
  flex: 1;
}

.pro-feature-title {
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 2px;
}

.pro-feature-desc {
  font-size: 12px;
  color: #6c757d;
}

.pro-feature-status {
  font-size: 16px;
  margin-left: 8px;
}

.pro-actions {
  margin-top: 16px;
  text-align: center;
}

.streaming-horoscope,
.feedback-card {
  border: none;
}

/* Remove the red line above search (header bottom border) */
.header {
  border-bottom: none;
}

/* Welcome Message */
.welcome-message {
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 2.2rem;
  font-weight: 500;
  color: #e91e63;
  text-align: center;
  z-index: 10000;
  opacity: 1;
  transition: opacity 0.8s ease;
  pointer-events: none;
  max-width: 90%;
  line-height: 1.4;
  text-shadow: 0 2px 8px rgba(233, 30, 99, 0.25);
  background: none;
  padding: 0;
  border: none;
  border-radius: 0;
  backdrop-filter: none;
  box-shadow: none;
  animation: welcomePulse 2s ease-in-out infinite;
}

html[data-theme='light'] .welcome-message {
  color: #9c27b0;
  background: none;
  text-shadow: 0 2px 8px rgba(156, 39, 176, 0.25);
}

.welcome-message.fade-out {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.95);
}

@keyframes welcomePulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.02);
  }
}

/* === MP-2.2 DESKTOP ANIMATION === */
@keyframes cardSlideIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (min-width: 641px) and (prefers-reduced-motion: no-preference) {
  .show-card {
    animation: cardSlideIn 0.25s ease-out;
  }
}
@media (prefers-reduced-motion: reduce) {
  .show-card {
    animation: none;
  }
}

/* === UNIFIED POSTER SYSTEM === */
.show-poster {
  width: var(--poster-w);
  height: var(--poster-h);
  border-radius: var(--card-radius);
  object-fit: cover;
  cursor: pointer;
  transition: transform 0.2s ease;
}

/* === CARD 3-DOTS MENU STYLING === */
.card-more-menu {
  position: relative;
  display: inline-block;
  margin-top: 8px;
}

.card-more-btn {
  background: none;
  border: none;
  padding: 8px;
  cursor: pointer;
  border-radius: 6px;
  color: var(--color-muted, #666);
  transition: all 0.2s ease;
  min-width: 32px;
  min-height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-more-btn:hover {
  background: var(--color-surface-2, #f5f5f5);
  color: var(--color-text, #121212);
}

.card-more-btn:focus-visible {
  outline: 2px solid var(--color-primary-start, #ff4c8d);
  outline-offset: 2px;
}

.card-more-dots {
  font-size: 1.2rem;
  font-weight: bold;
  line-height: 1;
}

.card-more-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--color-surface, #ffffff);
  border: 1px solid var(--color-border, #e5e7eb);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 4px;
  min-width: 140px;
  z-index: 10;
  transform: translateY(4px);
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease;
}

.card-more-dropdown[aria-hidden='false'] {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.card-more-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
  border-radius: 4px;
  color: var(--color-text, #121212);
  font-size: 14px;
  transition: background-color 0.2s ease;
}

.card-more-item:hover {
  background: var(--color-surface-2, #f5f5f5);
}

.card-more-item:focus-visible {
  outline: 2px solid var(--color-primary-start, #ff4c8d);
  outline-offset: -2px;
}

.card-more-icon {
  font-size: 16px;
  width: 20px;
  text-align: center;
}

.card-more-label {
  font-weight: 500;
}

/* Hide the old pill buttons */
.card-pills {
  display: none;
}

.show-poster:hover {
  transform: scale(1.02);
}

.poster-placeholder {
  width: var(--poster-w);
  height: var(--poster-h);
  border-radius: var(--card-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface-secondary, #f5f5f5);
  color: var(--color-text-secondary, #777);
  font-size: 14px;
  border: 2px dashed var(--color-border, #ddd);
}

.poster-button {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  border-radius: var(--card-radius);
  overflow: hidden;
  transition: transform 0.2s ease;
}

.poster-button:hover {
  transform: scale(1.02);
}

.poster-button:focus-visible {
  outline: 2px solid var(--color-primary, #007bff);
  outline-offset: 2px;
}

@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .show-details {
    display: grid;
    grid-template-rows: auto auto auto 1fr auto;
    gap: 6px;
    min-width: 0;
  }

  .show-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
    align-items: center;
  }
}

@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .show-title {
    margin: 0;
    color: var(--primary);
    font-size: 1.05rem;
    font-weight: 900;
    display: flex;
    gap: 8px;
    align-items: center;
    cursor: pointer;
    line-height: 1.2;
    min-width: 0;
    overflow-wrap: anywhere;
  }
}

.show-meta {
  color: #8a8a98;
  font-size: 0.88rem;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  min-width: 0;
  overflow-wrap: anywhere;
}

.show-overview {
  font-size: 0.95rem;
  line-height: 1.45;
  color: var(--text);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.rating-container {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 6px;
  min-width: 0;
  overflow-wrap: anywhere;
}

.show-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  min-width: 0;
  overflow-wrap: anywhere;
}

.show-actions .btn {
  white-space: normal;
}

/* Star Rating */
.star-rating {
  display: inline-flex;
  gap: 2px;
}

.star-btn {
  border: none;
  background: none;
  padding: 2px;
  line-height: 1;
  cursor: pointer;
  font-size: 1.1rem;
  color: #333;
}

.star-btn.active {
  filter: saturate(1.2) brightness(1.1);
  color: #0066cc;
  transform: scale(1.1);
  text-shadow: 0 0 6px rgba(0, 102, 204, 0.6);
  font-weight: bold;
  font-size: 1.3rem;
}

/* List Container */
.list-container {
  background: var(--card);
  border: 3px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  min-height: 80px;
  transition: all 0.3s ease;
}

/* Tab sections use default vertical layout - no special horizontal rules needed */

/* Tab sections use default vertical layout - no scroll indicators needed */

.list-container:empty::before {
  content: 'No items yet. Start by searching for something!';
  display: block;
  text-align: center;
  color: #888;
  font-style: italic;
  padding: 40px 20px;
  opacity: 0.7;
}

/* Tab Sections - Visibility controlled by [hidden] attribute */
.tab-section {
  /* Visibility controlled by [hidden] attribute - CSS does not control visibility */
}

/* Sections */
.section {
  margin: 20px 0;
}

.section-header {
  margin-bottom: 12px;
}

.section-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Count Badge */
.count {
  background: var(--primary);
  color: white;
  border-radius: 12px;
  padding: 2px 8px;
  font-size: 12px;
  margin-left: 6px;
}

/* Binge Banner */
.binge-banner {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3));
  color: white;
  padding: 12px 16px;
  border-radius: 10px;
  margin: 14px 0;
  text-align: center;
  animation: fadeout 0.4s ease 2.6s forwards;
}

#bingeBanner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 4px 0;
}

#bingeBanner .binge-time {
  font-family: ui-monospace, Menlo, monospace;
  font-weight: 900;
  color: #ffd43b;
}

#bingeBanner .binge-label {
  color: #555;
}

#bingeBanner .binge-cta {
  padding: 8px 12px;
  font-size: 0.88rem;
  border-radius: 16px;
  color: #fff;
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
  background-size: 400% 400%;
  animation: rainbow 3s ease-in-out infinite;
  border: 2px solid rgba(255, 255, 255, 0.85);
}

@keyframes rainbow {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* Empty State */
.empty-state {
  text-align: center;
  color: #666;
  padding: 20px;
  font-style: italic;
}

/* Smooth transitions for all form elements */
input,
select,
button {
  transition: all 0.2s ease;
}

/* Accessibility helpers */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.skip-link:focus {
  position: fixed;
  left: 8px;
  top: 8px;
  width: auto;
  height: auto;
  padding: 8px 12px;
  background: #000;
  color: #fff;
  z-index: 1000;
  border-radius: 6px;
  outline: 3px solid #fff;
}

.sr-only {
  position: absolute;
  width: 1px ;
  height: 1px ;
  padding: 0 ;
  margin: -1px ;
  overflow: hidden ;
  clip: rect(0, 0, 0, 0) ;
  white-space: normal ;
  border: 0 ;
}

/* High-contrast focus ring */
:focus-visible {
  outline: 3px solid var(--focus, #1a73e8);
  outline-offset: 2px;
}

body.dark-mode :focus-visible {
  outline-color: #fff;
}

/* Touch target optimization for mobile */
button,
input[type='button'],
input[type='submit'],
input[type='reset'],
select,
.clickable {
  min-height: 44px;
  min-width: 44px;
}

/* Ensure small buttons still meet touch target requirements */
.btn.small {
  min-height: 44px;
  min-width: 44px;
  padding: 8px 12px;
}

/* Icon buttons should have proper touch targets */
.icon-btn {
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Loading states and skeleton screens */
.loading {
  opacity: 0.6;
  pointer-events: none;
  position: relative;
}

.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--border);
  border-top: 2px solid var(--primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.skeleton {
  background: linear-gradient(90deg, var(--border) 25%, var(--card) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-card {
  height: 120px;
  margin: 8px 0;
  border-radius: 8px;
}

.skeleton-text {
  height: 16px;
  margin: 8px 0;
  width: 80%;
}

.skeleton-text.short {
  width: 40%;
}

.skeleton-button {
  height: 44px;
  width: 100px;
  border-radius: 8px;
}

/* Button loading states */
.btn-loading {
  display: none;
}

.btn.loading .btn-content {
  display: none;
}

.btn.loading .btn-loading {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.btn.loading {
  pointer-events: none;
  opacity: 0.8;
}

/* Modal */
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.55);
  display: none; /* Default to hidden */
  align-items: center;
  justify-content: center;
  z-index: 10000;
  margin: 0;
  padding: 0;
}

/* Removed inline style sniffing - Phase B: Use class-based visibility only */

.modal {
  background: var(--bg);
  color: var(--text);
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  min-height: auto;
  border-radius: 14px;
  border: 2px solid var(--primary);
  padding: 24px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: visible;
  box-sizing: border-box;
  margin: auto;
  text-align: center;
}

.modal h3 {
  margin: 0 0 10px;
  color: var(--primary);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.modal .modal-actions {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 14px;
  flex-wrap: wrap;
  overflow: visible;
  max-width: 100%;
  padding: 8px 0;
}

.modal .modal-body {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  overflow: hidden;
  text-align: center;
}

.modal input[type='text'],
.modal .search-input {
  width: 100%;
  max-width: 300px;
  margin: 0 auto;
  display: block;
  text-align: center;
}

.modal-content-wrapper {
  text-align: center;
  margin-bottom: 16px;
}

.modal-instruction {
  margin-bottom: 16px;
  color: var(--text);
  opacity: 0.8;
}

.modal-input {
  width: 100%;
  max-width: 300px;
  padding: 12px;
  border: 2px solid var(--border);
  border-radius: 8px;
  background: var(--bg);
  color: var(--text);
  font-size: 16px;
  text-align: center;
  margin: 0 auto;
  display: block;
  box-sizing: border-box;
}

/* === FAB Rail - Container-Aware Positioning ========================== */
#settingsTab span {
  display: none;
}

/* Hide settings tab when FABs are active */
#settingsTab {
  display: none;
}
:root {
  --fab-size: 50px;
  --fab-gap: 10px;
  --fab-rail-height: 80px;
}

/* FAB Rail - Sticky positioning within container */
.fab-rail {
  position: sticky;
  bottom: max(16px, env(safe-area-inset-bottom));
  z-index: 1000;
  height: var(--fab-rail-height);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  margin-top: 20px;
  pointer-events: none; /* Allow clicks to pass through rail */
}

/* FAB Stack - Right side buttons */
.fab-stack {
  display: flex;
  flex-direction: column;
  gap: var(--fab-gap);
  pointer-events: auto;
}

/* Individual FAB buttons */
.fab,
.fab-left {
  position: static; /* Force static positioning within rail */
  display: grid;
  place-items: center;
  border: none;
  cursor: pointer;
  color: var(--text, #1f2937);
  font-size: 24px;
  transition: all 0.2s ease;
  pointer-events: auto;
  background: none;
  box-shadow: none;
  border-radius: 0;
  width: auto;
  height: auto;
  padding: 0;
  margin: 0;
}

/* Hover effects */
.fab:hover,
.fab-left:hover {
  transform: scale(1.05);
  opacity: 0.8;
}

/* Mobile adjustments */
@media (max-width: var(--bp-mobile-lg)) {
  :root {
    --fab-size: 45px;
    --fab-rail-height: 70px;
  }

  .fab-rail {
    padding: 0 16px;
    bottom: max(12px, env(safe-area-inset-bottom));
  }
}

/* Wide screens - nudge buttons slightly outside container */
@media (min-width: 1200px) {
  .fab-rail {
    padding: 0 0;
  }

  .fab-left {
    margin-left: -10px; /* Half outside left edge */
  }

  .fab-stack {
    margin-right: -10px; /* Half outside right edge */
  }
}

/* === Icon-only FAB base (applies to all floating buttons) === */
.fab,
.fab-left {
  position: relative; /* enables larger invisible hit area if needed */
  background: none;
  border: none;
  width: auto;
  height: auto;
  border-radius: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  padding: 0; /* no visual padding â€” just the icon */
  color: inherit;
  font-size: 24px; /* adjust icon size here */
  line-height: 1;
  cursor: pointer;
  transition:
    transform 0.08s ease,
    opacity 0.12s ease;
}

/* Hover/active/focus affordances without adding a box */
.fab:hover,
.fab-left:hover {
  opacity: 0.9;
}
.fab:active,
.fab-left:active {
  transform: translateY(1px);
}

/* Keyboard focus ring (accessible, subtle) */
.fab:focus-visible,
.fab-left:focus-visible {
  outline: 2px solid color-mix(in oklab, currentColor 50%, transparent);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Content protection - add space at bottom on narrow screens */
@media (max-width: 1200px) {
  .main-container {
    padding-bottom: calc(var(--fab-rail-height) + 20px);
  }
}

/* Tab visibility control */
.tab[style*='display: none'] {
  display: none;
}

/* ===== FAB DOCKING SYSTEM ===== */
/* Anchor for each tab's content so the dock can position inside it */
.tab-section {
  position: relative; /* containing block for the dock */
}

/* The dock that holds all FABs inside the active tab */
.fab-dock {
  position: sticky;
  bottom: 0;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  z-index: 30;
  pointer-events: none; /* only buttons receive events */
  padding: 0;
  padding-bottom: env(safe-area-inset-bottom, 0);
  margin-top: 20px; /* Add some space from content above */
  width: 100%; /* Ensure dock spans full width of container */
}

/* Left side - Settings FAB */
.fab-dock .fab-left {
  pointer-events: auto;
  margin-right: auto; /* Push to left side */
  /* No left margin - align with container's left border */
}

/* Right side - Theme FABs stack */
.fab-dock .fab-stack {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  margin-left: auto; /* Push to right side */
  /* No right margin - align with container's right border */
}

.fab-dock .fab {
  pointer-events: auto;
}

/* Mobile: adjust spacing and positioning */
@media (max-width: var(--bp-mobile)) {
  .fab-dock {
    padding: 0;
    bottom: 0;
    gap: 8px;
  }

  .fab-dock .fab-left {
    /* No margin - align with container's left border */
  }

  .fab-dock .fab-stack {
    gap: 10px;
    /* No margin - align with container's right border */
  }
}

/* Ensure FABs are not page-fixed anymore */
.fab,
.fab-left {
  position: relative;
}

/* PART2A: removed layout ; visuals unchanged */
/* Hide FABs initially - they'll be shown when moved to dock */
.fab-left {
  display: none;
}

.fab-stack {
  display: none;
}

/* Show FABs when they're in the dock */
.fab-dock .fab-left {
  display: block;
  background: none;
  box-shadow: none;
  border-radius: 0;
}

.fab-dock .fab-stack {
  display: flex;
}

.fab-dock .fab {
  background: none;
  box-shadow: none;
  border-radius: 0;
}

/* Specific override for settings FAB to remove any background */
#btnSettings {
  background: none;
  box-shadow: none;
  border-radius: 0;
  border: none;
  padding: 0;
  margin: 0;
  width: auto;
  height: auto;
}

#btnSettings:hover {
  background: none;
  box-shadow: none;
  transform: scale(1.05);
  opacity: 0.8;
}

/* Ultra-specific override to remove blue background from settings FAB */
.fab-dock #btnSettings.fab-left {
  background: transparent;
  background-color: transparent;
  box-shadow: none;
  border: none;
  border-radius: 0;
  padding: 0;
  margin: 0;
  width: auto;
  height: auto;
  min-width: auto;
  min-height: auto;
}

.fab-dock #btnSettings.fab-left:hover {
  background: transparent;
  background-color: transparent;
  box-shadow: none;
  transform: scale(1.05);
  opacity: 0.8;
}

.fab-dock #btnSettings.fab-left:active {
  background: transparent;
  background-color: transparent;
  box-shadow: none;
}

.fab-dock #btnSettings.fab-left:focus {
  background: transparent;
  background-color: transparent;
  box-shadow: none;
  outline: 2px solid color-mix(in oklab, currentColor 50%, transparent);
  outline-offset: 2px;
}

/* Handle .hidden class on tabs - show tab but hide text for mobile optimization */
.tab.hidden {
  display: flex;
  visibility: visible;
  opacity: 1;
  position: relative;
  width: 32px;
  height: 44px;
  min-width: 32px;
  padding: 0;
  margin: 0;
  background: transparent;
  border: none;
  overflow: hidden;
  flex: 0 0 32px;
  pointer-events: auto;
}

.tab.hidden span,
.tab.hidden .tab-badge {
  display: none;
  visibility: hidden;
  opacity: 0;
}

/* Force hide tabs that are truly hidden (not mobile optimization) */
.tab[style*='visibility: hidden'] {
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  left: -9999px;
  pointer-events: none;
  flex: 0;
  width: 0;
  height: 0;
  margin: 0 ;
  padding: 0 ;
  overflow: hidden ;
}

/* Mobile responsive for YouTube-style tabs */
@media (max-width: var(--bp-mobile-lg)) {
  .tab-container {
    padding: 0;
    margin: 12px 0 0 0;
    justify-content: space-evenly;
  }

  .tab {
    flex: 1 1 0;
    padding: 14px 8px;
    font-size: 13px;
    min-width: 0;
    min-height: 44px;
  }

  .tab-badge {
    font-size: 10px;
    padding: 1px 4px;
    margin-left: 4px;
  }
}

/* Override flex: 1 for hidden tabs - show compact version */
.tab-container .tab.hidden {
  display: none; /* PART2C: remove width forcing/visibility hacks */
  opacity: 1;
}

/* Override inline-flex for hidden tabs on desktop - show compact version */
@media (min-width: 769px) {
  .tab-container .tab.hidden {
    display: none; /* PART2C */
  }
}

/* Pro Features Card */
.pro-list {
  margin: 8px 0 12px;
  padding-left: 18px;
}

.pro-list .lock {
  opacity: 0.7;
  margin-right: 6px;
}

body.is-pro .lock {
  display: none;
} /* in preview, hide locks */

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, minmax(90px, 1fr));
  gap: 10px;
}

.stats-grid .stat {
  padding: 10px;
  border: 2px solid var(--border);
  border-radius: 12px;
  text-align: center;
}

.stats-grid .stat b {
  display: block;
  font-size: 1.25rem;
  line-height: 1.2;
}

.stats-grid .stat span {
  font-size: 0.85rem;
  opacity: 0.8;
}

@media (max-width: var(--bp-mobile)) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Advanced notifications styling */
#notifAdvancedCard.disabled {
  opacity: 0.5;
  pointer-events: none;
}

#notifAdvancedCard.disabled input,
#notifAdvancedCard.disabled select {
  background-color: #f5f5f5;
  color: #999;
}

/* Accessibility - Focus management */
:focus-visible {
  outline: 2px solid #007acc;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Ensure buttons have visible focus */
button:focus-visible,
.btn:focus-visible {
  outline: 2px solid #007acc;
  outline-offset: 2px;
}

/* Loading skeletons */
.skel {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: 4px;
}

.skel-card {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.skel-card .skel {
  height: 20px;
  margin-bottom: 8px;
}

.skel-card .skel:first-child {
  height: 24px;
  width: 60%;
}

.skel-card .skel:last-child {
  height: 16px;
  width: 40%;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Hide skeletons when not needed */
.skeleton-hidden {
  display: none;
}

/* FlickWord Modal */
.fw-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fw-modal-content {
  position: relative;
  background: white;
  border-radius: 12px;
  width: 98%;
  max-width: 900px;
  height: 95%;
  max-height: 800px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.fw-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-bottom: 1px solid #5a67d8;
  border-radius: 12px 12px 0 0;
  cursor: move;
  user-select: none;
}

.fw-modal-title {
  font-weight: 600;
  color: white;
  font-size: 14px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.fw-modal-controls {
  display: flex;
  gap: 8px;
}

.fw-control-btn {
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.fw-control-btn.minimize {
  background: #fbbf24;
  color: #000;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fw-control-btn.minimize:hover {
  background: #f59e0b;
  transform: translateY(-1px);
}

.fw-control-btn.maximize {
  background: #10b981;
  color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fw-control-btn.maximize:hover {
  background: #059669;
  transform: translateY(-1px);
}

.fw-control-btn.close {
  background: #ef4444;
  color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fw-control-btn.close:hover {
  background: #dc2626;
  transform: translateY(-1px);
}

.fw-modal iframe {
  width: 100%;
  flex: 1;
  border: none;
  border-radius: 0 0 12px 12px;
}

/* Pro badge styling */
.pro-badge {
  background: linear-gradient(135deg, #ff6b6b, #ffa500);
  color: white;
  font-size: 10px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 2px auto 0;
  display: inline-block;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* Locked Pro features */
.locked {
  opacity: 0.6;
  position: relative;
  pointer-events: none;
}

.locked::after {
  content: 'ðŸ”’';
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 12px;
  opacity: 0.8;
}

/* Pro features that should be locked when not Pro */
[data-pro='true']:not(.pro-enabled) {
  opacity: 0.6;
  position: relative;
  pointer-events: none;
}

[data-pro='true']:not(.pro-enabled)::after {
  content: 'ðŸ”’';
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 12px;
  opacity: 0.8;
}

/* Override grid display for hidden tabs on mobile - show compact version */
@media (max-width: var(--bp-mobile-lg)) {
  .tab-container .tab.hidden {
    display: none; /* PART2C */
    max-width: 32px;
  }
}

/* ===== Search Tips Toggle ===== */
.search-tips {
  position: relative;
  display: flex;
  align-items: center;
}
.search-tips-inline {
  position: relative;
  display: inline-flex;
  align-items: center;
  margin-left: 8px;
}
.tips-trigger {
  width: 20px ;
  height: 20px ;
  min-width: 20px ;
  min-height: 20px ;
  max-width: 20px ;
  max-height: 20px ;
  border-radius: 50%;
  border: 1px solid #666666;
  background: #f8f9fa;
  cursor: pointer;
  font-weight: 700;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 11px ;
  transition: all 0.2s ease;
  color: #333333 ;
  opacity: 1;
  padding: 0 ;
  margin: 0 ;
}
.tips-trigger:hover {
  background: #e9ecef ;
  color: #333333 ;
  border-color: #495057 ;
  transform: scale(1.1) ;
  opacity: 1;
}
.tips-trigger:focus-visible {
  outline: 2px solid var(--primary);
}

.tips-pop[hidden] {
  display: none;
}
.tips-pop {
  position: fixed; /* avoid interfering with sticky ancestors */
  z-index: 9999;
  width: min(320px, 92vw);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
  padding: 10px;
}
.tips-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 6px;
}
.tips-title {
  font-weight: 600;
}
.tips-close {
  background: none;
  border: 0;
  font-size: 20px;
  cursor: pointer;
  line-height: 1;
}

.tips-list {
  margin: 0;
  padding-left: 16px;
  display: grid;
  gap: 6px;
}
.tips-list code {
  background: rgba(127, 127, 127, 0.12);
  padding: 0 4px;
  border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
}

.tips-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  margin-top: 6px;
}
.tips-dontshow {
  font-size: 0.9rem;
  opacity: 0.9;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Mobile: keep the popover readable */
@media (max-width: 480px) {
  .tips-pop {
    width: 92vw;
  }
}

/* ===== Pro gating ===== */
.pro-locked {
  position: relative;
}
.pro-locked[aria-disabled='true'] {
  opacity: 0.55;
  cursor: not-allowed;
}
.pro-lock-tip {
  position: absolute;
  z-index: 200;
  bottom: calc(100% + 6px);
  left: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  padding: 6px 8px;
  font-size: 0.9rem;
  white-space: nowrap;
  display: none;
}
.pro-locked:hover .pro-lock-tip,
.pro-locked:focus-within .pro-lock-tip {
  display: block;
}

/* Small badge you can add inside buttons if you want */
.badge-pro {
  margin-left: 6px;
  font-size: 0.75rem;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  opacity: 0.85;
}

/* FlickWord Container Styling */
.quote-flickword-container {
  display: flex;
  align-items: stretch;
  gap: 16px;
  margin: 12px 0;
  animation: flickwordSlideIn 0.9s ease-out 0.6s both;
  justify-content: space-between ;
  width: 100% ;
}

.left-column {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 0 0 48% ;
  max-width: 48% ;
  width: 48% ;
  justify-content: space-between;
}

/* Add inside or right after the .left-column block */
.left-column > * {
  flex: 1; /* Makes both boxes equal height */
  display: flex; /* Ensures content inside can stretch properly */
  flex-direction: column;
}

.quote-card {
  background: var(--card);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  width: 100%;
}

.quote-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.random-quote-card {
  background: var(--card);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  width: 100%;
}

.random-quote-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

/* FlickWord Card Styling */
.flickword-card {
  background: var(--card);
  border: 2px solid var(--primary);
  border-radius: 12px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  opacity: 0.9;
  flex: 0 0 48% ;
  max-width: 48% ;
  min-width: 300px;
  width: 48% ;
  align-self: stretch;
}

@keyframes flickwordSlideIn {
  from {
    opacity: 0;
    transform: translateY(25px) scale(0.95);
  }
  to {
    opacity: 0.9;
    transform: translateY(0) scale(1);
  }
}

.flickword-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.quote-title {
  margin: 0 0 16px 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  text-align: center;
}

.quote-content {
  text-align: center;
}

.quote-text {
  font-size: 14px;
  font-style: italic;
  color: #333;
  font-weight: 500;
  margin: 0 0 8px 0;
  line-height: 1.4;
}

.quote-author {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0;
  font-weight: 500;
}

.flickword-title {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
}

.flickword-timer-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  margin-bottom: 20px;
}

.flickword-countdown {
  background: var(--primary);
  color: white;
  padding: 8px 12px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 14px;
  font-family: 'Courier New', monospace;
  border: none;
  text-align: center;
  display: inline-block;
  min-width: 90px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  letter-spacing: 0.5px;
}

.flickword-motivation {
  font-size: 10px;
  color: var(--text-secondary);
  font-weight: 500;
  text-align: center;
  margin: 0;
  font-style: italic;
  opacity: 0.8;
  padding: 0;
  background: transparent;
  border: none;
  line-height: 1.3;
}

.flickword-stats {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  justify-content: space-between;
  width: 100%;
}

.stat-item {
  text-align: center;
  padding: 12px 8px;
  background: var(--bg);
  border-radius: 8px;
  flex: 1;
  border: 1px solid var(--border);
}

.stat-label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
  font-weight: 500;
}

.stat-value {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

.flickword-actions {
  text-align: center;
  display: flex;
  justify-content: center;
}

/* Mobile responsiveness for Quote and FlickWord */
@media (max-width: var(--bp-mobile-lg)) {
  .quote-flickword-container {
    flex-direction: column ;
    gap: 8px ;
    justify-content: flex-start ;
  }

  .left-column {
    flex: 1 ;
    max-width: 100% ;
    min-width: auto ;
    width: 100% ;
  }

  .quote-card,
  .flickword-card {
    flex: 1 ;
    max-width: 100% ;
    min-width: auto ;
    width: 100% ;
  }

  .flickword-stats {
    flex-direction: column;
    gap: 12px;
  }

  .stat-item {
    min-width: auto;
  }

  .flickword-header {
    flex-direction: column;
    gap: 12px;
    text-align: center;
  }
}

/* iPhone portrait specific fixes */
@media (max-width: 428px) {
  .quote-flickword-container {
    margin: 8px 0 ;
    gap: 6px ;
  }

  .left-column {
    gap: 6px ;
  }

  .quote-card,
  .flickword-card {
    padding: 12px ;
    margin: 0 ;
  }

  .quote-title,
  .flickword-title {
    font-size: 14px ;
    margin-bottom: 12px ;
  }

  .quote-text {
    font-size: 13px ;
  }

  .quote-author {
    font-size: 11px ;
  }
}

/* Stats */
.stats {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin: 14px 0;
}

/* Hide duplicate count cards; keep binge meter only */
.stats .stat {
  display: none;
}

.stat-num {
  font-size: 1.8rem;
  color: var(--primary);
  font-weight: 900;
}

.stat-label {
  font-size: 0.72rem;
  color: #80808f;
  text-transform: uppercase;
  font-weight: 900;
  letter-spacing: 0.6px;
}

#bingeMeter {
  display: block ;
  flex-basis: 100% ;
  order: 0 ;
}

/* REMOVED: Old series-pill classes - replaced with program-status-badge for unified status handling */

/* Like/Dislike Buttons */
.like-btn,
.dislike-btn {
  padding: 6px 12px;
  border-radius: 14px;
  background: #dedee3;
  color: #444;
  border: 1px solid #ccc;
  transition: all 0.2s ease;
  cursor: pointer;
  font-weight: 500;
}

.like-btn.active {
  background: linear-gradient(45deg, #2ed573, #1dd1a1) ;
  color: #fff ;
  border-color: #1dd1a1 ;
  box-shadow: 0 2px 4px rgba(46, 213, 115, 0.3) ;
}

.dislike-btn.active {
  background: linear-gradient(45deg, #ff4757, #ff3742) ;
  color: #fff ;
  border-color: #ff3742 ;
  box-shadow: 0 2px 4px rgba(255, 71, 87, 0.3) ;
}

/* File Input */
.file-input-label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  cursor: pointer;
}

.file-input-label input[type='file'] {
  cursor: pointer;
}

.file-label {
  font-size: 0.85rem;
  color: #666;
  font-style: italic;
}

/* Tag Filters */
.tag-filters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 8px;
}

.tag-pill {
  padding: 6px 10px;
  border-radius: 999px;
  border: 2px solid var(--border);
  background: var(--card);
  cursor: pointer;
  font-weight: 700;
}

.tag-pill.active {
  border-color: var(--primary);
  color: var(--primary);
}

/* Share Instructions */
.share-instructions {
  margin-top: 4px;
  color: #666;
  font-size: 11px;
  text-align: center;
}

/* Button Link */
.btn-link {
  background: none;
  border: none;
  color: var(--primary);
  font-weight: 900;
  text-decoration: underline;
  padding: 0;
  cursor: pointer;
}

/* Form Error */
.form-error {
  color: #b00020;
  margin-top: 6px;
  font-size: 0.9rem;
}

/* Feedback Card */
.feedback-card {
  background: var(--card);
  border: 2px solid var(--primary);
  border-radius: 14px;
  padding: 12px;
  margin: 14px 0;
}

.feedback-form {
  margin-top: 12px;
}

.feedback-form .hidden {
  display: none;
}

.feedback-form textarea {
  flex: 1;
  min-width: 200px;
}

.feedback-subtitle {
  font-size: 0.9em;
  color: var(--text-secondary);
  text-align: center;
  margin: 8px 0 16px 0;
  font-style: italic;
  opacity: 0.8;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Network Status Indicator */
.network-status {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(34, 197, 94, 0.1);
  border: 2px solid #22c55e;
  color: #22c55e;
  font-size: 16px;
  transition: all 0.3s ease;
  cursor: help;
}

.network-status.offline {
  background: rgba(239, 68, 68, 0.1);
  border-color: #ef4444;
  color: #ef4444;
}

.network-status.slow {
  background: rgba(245, 158, 11, 0.1);
  border-color: #f59e0b;
  color: #f59e0b;
}

.network-status:hover {
  transform: scale(1.1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.dark-mode .network-status {
  background: rgba(34, 197, 94, 0.2);
  border-color: #4ade80;
  color: #4ade80;
}

.dark-mode .network-status.offline {
  background: rgba(239, 68, 68, 0.2);
  border-color: #f87171;
  color: #f87171;
}

.dark-mode .network-status.slow {
  background: rgba(245, 158, 11, 0.2);
  border-color: #fbbf24;
  color: #fbbf24;
}

/* Advanced Search Options */
.advanced-search-options {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  margin-top: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.advanced-search-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 16px;
}

.search-filter-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.filter-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.year-range {
  display: flex;
  align-items: center;
  gap: 8px;
}

.year-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-height: 40px;
}

.year-separator {
  color: var(--text-secondary);
  font-weight: 600;
  font-size: 16px;
}

.rating-filter,
.media-type-filter,
.sort-by-filter,
.search-type-filter,
.language-filter {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-height: 40px;
  cursor: pointer;
}

.advanced-search-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  border-top: 1px solid var(--border);
  padding-top: 16px;
}

/* Responsive adjustments */
@media (max-width: var(--bp-mobile-lg)) {
  .advanced-search-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .advanced-search-actions {
    flex-direction: column;
  }

  .year-range {
    flex-direction: column;
    gap: 4px;
  }

  .year-separator {
    display: none;
  }
}

/* Active Filters Display */
.active-filters {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 16px;
  animation: slideDown 0.3s ease-out;
}

.active-filters-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  font-weight: 600;
  color: var(--text-secondary);
}

.filter-icon {
  font-size: 16px;
}

.filter-title {
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.active-filters-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}

.filter-tag {
  background: var(--primary);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 4px;
}

.filter-tag .remove-filter {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 14px;
  padding: 0;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background-color 0.2s ease;
}

.filter-tag .remove-filter:hover {
  background: rgba(255, 255, 255, 0.2);
}

.clear-filters-btn {
  background: var(--danger);
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.clear-filters-btn:hover {
  background: #dc2626;
  transform: translateY(-1px);
}

/* Enhanced theme toggle button */
.theme-toggle {
  position: relative;
  overflow: hidden;
  background: linear-gradient(45deg, #f8f9fa, #e9ecef);
  border: 2px solid #dee2e6;
  color: #495057;
  transition: all 0.3s ease;
}

.theme-toggle:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.theme-toggle:active {
  transform: translateY(0) scale(1);
}

.dark-mode .theme-toggle {
  background: linear-gradient(45deg, #495057, #343a40);
  border-color: #6c757d;
  color: #f8f9fa;
}

.dark-mode .theme-toggle:hover {
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

/* Smooth list transitions */
.list-container {
  transition: all 0.3s ease;
}

/* Card overflow & wrapping - Desktop only */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .show-card {
    overflow: hidden;
  }
}

@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .show-title,
  .show-meta,
  .rating-container,
  .show-actions {
    min-width: 0;
    overflow-wrap: anywhere;
  }
}

/* Poster button reset */
.poster-button {
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  display: block;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  #bingeBanner .binge-cta {
    animation: none ;
  }
}

/* Notes chip on cards */
.notes-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  background: rgba(156, 39, 176, 0.1);
  color: #9c27b0;
  border: 1px solid rgba(156, 39, 176, 0.2);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: 4px;
}

.notes-chip:hover {
  background: rgba(156, 39, 176, 0.15);
  border-color: rgba(156, 39, 176, 0.3);
  transform: translateY(-1px);
}

.notes-chip:active {
  transform: translateY(0);
}

html[data-theme='dark'] .notes-chip {
  background: rgba(156, 39, 176, 0.2);
  color: #bb86fc;
  border-color: rgba(187, 134, 252, 0.3);
}

html[data-theme='dark'] .notes-chip:hover {
  background: rgba(156, 39, 176, 0.25);
  border-color: rgba(187, 134, 252, 0.4);
}

/* Ensure modals are visible when opened */
.modal-backdrop[style*='display: flex'] {
  display: flex ;
} /* our code sets display:flex inline */

/* Desktop/tablet (>= 641px): force a single tidy row */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .search-row {
    display: grid;
    /* input grows; the rest are sized to content so they don't wrap */
    grid-template-columns: minmax(380px, 1fr) max-content max-content max-content;
    align-items: center;
    column-gap: 12px;
    grid-auto-rows: 44px; /* consistent control height */
  }

  /* kill any mobile spacing that leaked */
  .search-row .search-controls {
    display: contents; /* let its children become grid items */
    margin-top: 0 ;
  }

  /* place children into columns explicitly (IDs or fallbacks) */
  .search-row .search-input,
  .search-row #searchInput {
    grid-column: 1 / 2;
    width: 100%;
    grid-row: 1;
  }

  .search-row #genreFilter {
    grid-column: 2 / 3;
    grid-row: 1;
  }
  .search-row #searchBtn {
    grid-column: 3 / 4;
    grid-row: 1;
  }
  .search-row #clearSearchBtn {
    grid-column: 4 / 5;
    grid-row: 1;
  }

  /* normalize control sizing; prevent text wrap */
  .search-row select,
  .search-row .btn {
    height: 44px;
    min-height: 44px;
    padding: 0 14px;
    white-space: nowrap;
  }
}

/* ===== Mobile (<= 640px): keep the one-row UNDER the input ===== */
@media (max-width: var(--bp-mobile)) {
.search-container {
    display: block ;
  }
.search-controls {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 8px;
    align-items: center;
    margin-top: 8px;
  }
.search-controls select {
    height: 40px;
    min-width: 0;
  }
.search-controls .btn {
    min-height: 40px;
    padding: 8px 12px;
    font-size: 14px;
    display: flex;
    gap: 6px;
  }
.search-controls .btn .label {
    display: inline;
  }
}

/* Mobile Layout Polish â€“ valid CSS (no nesting), double-guarded */
@media (max-width: var(--bp-mobile)) {
  /* Tighter search cluster - only target main search, not modals */
.search-row .search-input {
    font-size: 14px;
    padding: 10px 12px;
  }
.search-row .btn {
    padding: 8px 12px;
    font-size: 14px;
  }

  /* Ultra-narrow safety (wrap to 2 rows if <360px wide) */
  @media (max-width: 360px) {
.search-controls {
      grid-template-columns: 1fr 1fr;
    }
.search-controls #clearSearchBtn {
      grid-column: 2 / 3; /* keep side-by-side with Search when possible */
    }
  }

  /* Two-column nav tiles (if your markup has these wrappers) */
.nav-tiles {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 16px;
  }
.nav-tiles .nav-tile {
    min-height: 80px;
    padding: 16px;
  }
.nav-tiles .nav-tile h3 {
    font-size: 16px;
    margin-bottom: 8px;
  }
.nav-tiles .nav-tile p {
    font-size: 13px;
    line-height: 1.4;
  }

  /* Quotes: keep primary (Quote of the Day), collapse Random Quote by ID */
#randomQuoteCard {
    display: none;
  }
#quoteCard {
    margin-bottom: 16px;
  }

  /* Prevent horizontal scroll without touching sticky ancestors */
.container {
    max-width: 100vw;
    padding: 0 16px;
  }

.show-poster {
    width: var(--poster-w-mobile) ; /* Using centralized mobile poster width */
    height: var(--poster-h-mobile) ; /* Using centralized mobile poster height */
  }
.show-title {
    font-size: 14px;
  }
.show-overview {
    font-size: 12px;
    line-height: 1.3;
  }

  /* Settings/Stats small-screen adjustments */
.settings-container .card {
    margin-bottom: 16px;
    padding: 16px;
  }
.settings-container .btn {
    width: 100%;
    margin-bottom: 8px;
  }
.stats-grid {
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
.stat-box {
    padding: 12px;
    text-align: center;
  }
.stat-number {
    font-size: 20px;
    font-weight: 700;
  }
.stat-label {
    font-size: 12px;
    margin-top: 4px;
  }

  /* Safety: ensure FlickWord modal/backdrop is hidden unless explicitly opened inline */
#fwModal {
    display: none;
  }

  /* Fix title centering */
.header h1 {
    text-align: center ;
    margin: 0 auto ;
  }

  /* Fix login button color and ensure it's clickable */
.header .btn.secondary {
    background: linear-gradient(45deg, var(--primary), var(--purple)) ;
    color: #fff ;
    pointer-events: auto ;
    z-index: 10 ;
  }

  /* Tab visibility controlled by [hidden] attribute - CSS does not control visibility */
.tab-section {
    /* Visibility controlled by [hidden] attribute */
  }

  /* Ensure list containers are visible */
.list-container {
    display: block;
  }

  /* Ensure tab buttons are clickable */
.tab {
    pointer-events: auto ;
    z-index: 10 ;
  }

  /* Mobile search layout: genre after search input, buttons centered below */
.search-row .search-input {
    order: 1;
    width: 100%;
    margin-bottom: 8px;
  }

.search-row .genre-filter {
    order: 2;
    height: 44px;
    min-width: 60px;
    width: 60px;
    -webkit-appearance: none;
    appearance: none;
    padding: 8px 6px;
    margin-bottom: 0;
  }

.search-controls {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 8px;
    order: 3;
  }

  /* Buttons: ensure labels are visible and not collapsed */
.search-controls .btn {
    display: flex ;
    align-items: center ;
    justify-content: center ;
    gap: 6px ;
    min-height: 40px ;
    padding: 8px 12px ;
    font-size: 14px ;
    line-height: 1 ;
    text-indent: 0 ;
    overflow: visible ;
    white-space: nowrap ;
    -webkit-appearance: none ;
    appearance: none ;
    min-width: auto ;
    width: auto ;
  }
.search-controls .btn .icon {
    line-height: 1 ;
    display: inline ;
  }
.search-controls .btn .label {
    display: inline ;
    visibility: visible ;
    opacity: 1;
  }

  /* Nuke any icon-only styles that might bleed from elsewhere */
.search-controls .btn::before,
.search-controls .btn::after {
    content: none ;
    display: none;
  }

  /* Mobile card styling moved to mobile.css to avoid conflicts */
  @media (max-width: var(--bp-mobile)) {
.show-card .star-rating {
      gap: 2px ;
    }
.show-card .star-btn {
      width: 20px ;
      height: 20px ;
      font-size: 14px ;
    }
.show-card .like-dislike {
      gap: 4px ;
    }
.show-card .like-btn,
.show-card .dislike-btn {
      width: 24px ;
      height: 24px ;
      font-size: 14px ;
    }
  }

  /* When condensed mode is on, the same actions row fits nicely */
  @media (min-width: calc(var(--bp-mobile) + 1px)) {
    body.condensed-list .show-card .right-actions .icon-btn {
      height: 32px;
      width: 32px;
      font-size: 16px;
    }
    body.condensed-list .show-card .show-overview {
      display: none;
    }
  }
}

/* === MP-2: Desktop search row grid (â‰¥641px), one clean line === */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  /* Switch row to grid so controls never wrap between 1024â€“1920px */
  .top-search .search-row {
    display: grid ;
    grid-template-columns: minmax(320px, 1fr) max-content max-content max-content ; /* [input][genre][Search][Clear] */
    align-items: center ;
    column-gap: 8px ; /* keep existing spacing */
    flex-wrap: unset ;
  }

  /* Let the input shrink within the grid instead of forcing a wrap */
  .top-search .search-input {
    min-width: 0 ; /* override previous 300px min-width*/
    width: 100% ;
  }

  /* Ensure the genre select behaves like a compact fixed-width control */
  .top-search .genre-filter {
    width: max-content ; /* size to label/content */
    min-width: 120px ; /* floor so it doesn't collapse */
  }
}

/* === MP-ShareModalSanity (scoped) === */
.modal-backdrop {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.15s ease;
}
.modal-backdrop[data-open='true'] {
  visibility: visible;
  opacity: 1;
}

body.modal-open {
  overflow: hidden;
}

.modal-backdrop .modal-dialog:focus {
  outline: none;
}
.modal-backdrop .modal-dialog :focus-visible {
  outline: 2px solid var(--focus-color, #2684ff);
  outline-offset: 2px;
}

/* === MP-CondensedModeHardening (scoped, safe) === */
/* Applies only when body has .condensed (opt-in). */
body.condensed .show-card {
  /* tighten vertical rhythm without changing grid structure */
  padding: calc(var(--card-pad-y-desktop, 14px) * 0.6) calc(var(--card-pad-x-desktop, 14px) * 0.7);
  gap: calc(var(--card-gap-desktop, 16px) * 0.6);
}

@media (max-width: var(--bp-mobile)) {
  body.condensed .show-card {
    padding: calc(var(--card-pad-y, 8px) * 0.6) calc(var(--card-pad-x, 12px) * 0.7);
    gap: calc(var(--card-gap, 8px) * 0.6);
  }
}

/* Titles/overview slightly smaller; keep legibility */
body.condensed .show-card .show-title {
  font-size: calc(var(--meta-title-size-desktop, 18px) * 0.9);
  line-height: calc(var(--meta-line-desktop, 1.3) * 0.95);
}
@media (max-width: var(--bp-mobile)) {
  body.condensed .show-card .show-title {
    font-size: calc(var(--meta-title-size, 16px) * 0.9);
    line-height: calc(var(--meta-line, 1.2) * 0.95);
  }
}

/* Overview clamp: same lines, reduced spacing */
body.condensed .show-card .show-overview {
  margin-top: 0;
  opacity: 0.95;
}

/* Actions column: keep target sizes usable (â‰¥36px) */
body.condensed .show-card .show-actions .btn,
body.condensed .show-card .show-actions button {
  min-height: 36px;
  padding: 4px 0;
}

/* Chips/meta: trim margins slightly */
body.condensed .show-card .show-meta,
body.condensed .show-card .rating-container {
  margin: 2px 0;
}

/* Ensure icons used as decoration don't speak */
body.condensed .icon,
body.condensed [aria-hidden='true'] {
  pointer-events: none;
}

/* === MP-StickySafeAreas (scoped, reversible) === */
/* Default variables (no-op on non-notch devices) */
:root {
  --safe-top: 0px;
  --safe-bottom: 0px;
}

/* Activate safe-area awareness only when body has .supports-safe-area */
body.supports-safe-area {
  /* Use env() with graceful fallback to 0 via existing --safe-* variables */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Content containers that can end up under a bottom-fixed element get breathing room.
   Scope narrowly to known wrappers; do NOT touch .top-search ancestors. */
.main-content,
#homeTab .list-container,
#watchingTab .list-container,
#wishlistTab .list-container,
#watchedTab .list-container,
#discoverTab .list-container {
  padding-bottom: calc(16px + var(--safe-bottom)); /* base 16px + notch */
}

/* Common bottom-fixed UI: keep clear of the notch without changing their behavior */
.floating-action,
.toast,
.bottom-bar,
.floating-toolbar {
  bottom: max(16px, calc(8px + var(--safe-bottom))); /* keep elevation + notch */
}

/* Sticky header sanity: preserve existing sticky behavior; do not edit .top-search itself.
   If there is a sticky header wrapper, allow for top inset. */
.sticky-header,
.app-header {
  /* Do not force position here; respect existing app settings */
  top: var(--safe-top);
}

/* Horizontal scroll guard for common layout wrappers (safe; does not touch body/html) */
.app-container,
.page,
.tab-content {
  max-width: 100%;
  overflow-x: hidden;
}

/* === MP-A11Y-Polish (scoped) === */
body.a11y .show-card .show-actions .btn,
body.a11y .show-card .show-actions button,
body.a11y .toolbar .btn,
body.a11y button,
body.a11y .btn {
  /* Hit target: aim for â‰¥40px without blowing up layout */
  min-height: 40px;
  /* Don't force width; column widths already handled elsewhere */
}

body.a11y .btn:focus-visible,
body.a11y button:focus-visible,
body.a11y [tabindex]:not([tabindex='-1']):focus-visible {
  outline: 2px solid var(--focus-color, #2684ff);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Keep icon-only buttons readable: ensure reasonable min width in action stacks */
@media (max-width: var(--bp-mobile)) {
  body.a11y .show-card .show-actions .btn,
  body.a11y .show-card .show-actions button {
    min-width: 40px; /* column is 44px in mobile canon; this stays within it */
  }
}

/* Decorative icons should never capture pointer nor be read by SR when hidden */
body.a11y .icon[aria-hidden='true'] {
  pointer-events: none;
}

/* === MP-ThemePacks T0 (tokens only) === */
/* Theme surfaces are applied when body carries data-theme="â€¦" */

/* Classic (free) â€” neutral blue (matches existing dark mode) */
body[data-theme='classic'] {
  --bg: #1a1a1a;
  --text: #f5f5f5;
  --card: #2a2a2a;
  --border: #404040;
  --text-secondary: #b0b0b0;
  --primary: #2684ff;
  background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6b 100%) ;
}

/* Sunset (PRO) â€” warm coral */
body[data-theme='sunset'] {
  --bg: #1a0f0f;
  --text: #ffeae5;
  --card: #2a1a1a;
  --border: #4a2a2a;
  --text-secondary: #f5bdb2;
  --primary: #ff6b6b;
  background: linear-gradient(135deg, #4a1a1a 0%, #6b2a2a 100%) ;
}

/* Midnight (PRO) â€” cyan on graphite */
body[data-theme='midnight'] {
  --bg: #0f0f1a;
  --text: #e9f7ff;
  --card: #1a1a2a;
  --border: #2a2a4a;
  --text-secondary: #a9c6d6;
  --primary: #19b2ff;
  background: linear-gradient(135deg, #1a2a4a 0%, #2a3a6b 100%) ;
}

/* Forest (PRO) â€” emerald */
body[data-theme='forest'] {
  --bg: #0f1a0f;
  --text: #e8ffee;
  --card: #1a2a1a;
  --border: #2a4a2a;
  --text-secondary: #b4d2bf;
  --primary: #2ecc71;
  background: linear-gradient(135deg, #1a4a1a 0%, #2a6b2a 100%) ;
}

/* === MP-Providers (scoped) === */
.providers-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
  flex-wrap: wrap;
  opacity: 0.98;
}

.providers-row .providers-label {
  font-size: 12px;
  color: var(--muted, #9aa6b2);
  margin-right: 4px;
}

.provider-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 22px;
  min-width: 22px;
  padding: 0 6px;
  border-radius: 6px;
  background: var(--card, #2a2a2a);
  color: var(--text, #f5f5f5);
  text-decoration: none;
  font-size: 12px;
  line-height: 1;
  border: 1px solid var(--border, #404040);
  font-weight: 500;
}

.provider-badge img {
  width: 18px;
  height: 18px;
  object-fit: contain;
  border-radius: 4px;
}

.provider-badge:hover {
  filter: brightness(1.05);
}

/* Teaser state for Free users */
.providers-row[data-locked='1'] .provider-badge {
  opacity: 0.25;
  pointer-events: none; /* no clicks when locked */
  filter: blur(1px);
  background: var(--bg, #1a1a1a) ;
  color: var(--muted, #9aa6b2) ;
  border-color: var(--border, #404040) ;
}

.providers-row[data-locked='1'] .provider-badge img {
  filter: blur(2px);
  opacity: 0.3;
}

.providers-row .more-count {
  font-size: 12px;
  opacity: 0.8;
  padding: 0 4px;
}

/* === MP-Extras (scoped) === */
.extras-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
  flex-wrap: wrap;
  opacity: 0.98;
}

.extras-row .extras-label {
  font-size: 12px;
  color: var(--muted, #9aa6b2);
  margin-right: 4px;
}

.extra-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 22px;
  padding: 0 8px;
  border-radius: 6px;
  background: var(--bg-elev, #1a1f27);
  color: var(--text, #e6ecf2);
  font-size: 12px;
  line-height: 1;
  border: 1px solid rgba(255, 255, 255, 0.06);
  text-decoration: none;
  white-space: nowrap;
}

.extra-chip:hover {
  filter: brightness(1.05);
}

.extras-row[data-locked='1'] .extra-chip {
  opacity: 0.65;
  pointer-events: none; /* no clicks for Free teaser */
}

/* === Hide Upcoming Episodes (Tonight On) === */
#upcomingEpisodes {
  display: none;
}

/* === MP-Playlists (scoped) === */
.playlist-card {
  background: var(--bg-elev, #141a22);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  padding: 10px;
  margin: 10px 0 14px;
}

.playlist-card .video-embed {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: #000;
  border-radius: 8px;
  overflow: hidden;
}

.playlist-card .video-embed iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

.playlist-card .video-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.playlist-card .video-title {
  font-size: 14px;
  font-weight: 700;
  line-height: 1.25;
}

.playlist-card .pill {
  display: inline-flex;
  align-items: center;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: var(--bg, #0b0e13);
  color: var(--muted, #a6b3c2);
  font-size: 12px;
  line-height: 1;
}

.playlist-card .video-actions {
  margin-left: auto;
  display: inline-flex;
  gap: 6px;
}

.playlist-card .btn-ghost {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--text, #e6ecf2);
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 12px;
  line-height: 1;
}

/* Settings segmented control */
.settings-tabs {
  display: flex;
  gap: var(--gap-2);
  padding: var(--gap-2) var(--gap-3);
  overflow-x: auto;
  border-bottom: 1px solid var(--color-border);
  position: sticky;
  top: 0;
  background: var(--color-surface);
  z-index: var(--z-header);
}
.settings-tabs button {
  flex: 0 0 auto;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface-2);
  font-weight: 600;
}
.settings-tabs button.active {
  border-color: transparent;
  color: #fff;
  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));
}
.settings-section {
  padding: var(--gap-4);
  min-height: 200px; /* Ensure there's content to scroll to */
  margin-bottom: 20px; /* Add some spacing between sections */
  display: none; /* Hide all sections by default */
}
.settings-section.active {
  display: block; /* Show only the active section */
}

/* ===== NEW SETTINGS LAYOUT SYSTEM ===== */

/* Settings Container */
.settings-container {
  max-width: 800px;
  margin: 0;
  padding: 0 var(--gap-3); /* Match the tab padding: 0 12px */
}

/* Settings Sections */
.settings-section {
  display: none;
  padding: 24px 0;
  min-height: 400px;
}

.settings-section.active {
  display: block;
}

/* Settings Subsections */
.settings-subsection {
  margin-bottom: 32px;
  padding: 0;
}

.settings-subsection:last-child {
  margin-bottom: 0;
}

/* Settings Titles */
.settings-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin: 0 0 8px 0;
  line-height: 1.3;
}

.settings-subtitle {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 8px 0;
  line-height: 1.3;
}

/* Settings Descriptions */
.settings-description {
  font-size: 0.9rem;
  color: var(--text-secondary, #666);
  margin: 0 0 16px 0;
  line-height: 1.4;
}

/* Settings Control Groups */
.settings-control-group {
  margin-bottom: 20px;
}

.settings-control-group:last-child {
  margin-bottom: 0;
}

/* Settings Labels */
.settings-label {
  display: block;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text);
  margin-bottom: 8px;
  line-height: 1.3;
}

/* Settings Input Groups */
.settings-input-group {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

/* Settings Inputs */
.settings-input {
  padding: 8px 12px;
  border: 1px solid var(--border, #ddd);
  border-radius: 6px;
  font-size: 0.9rem;
  background: var(--bg, #fff);
  color: var(--text);
  transition: all 0.2s ease;
  min-width: 200px;
}

.settings-input:focus {
  outline: none;
  border-color: var(--primary, #e91e63);
  box-shadow: 0 0 0 3px rgba(233, 30, 99, 0.1);
}

.settings-input-number {
  width: 80px;
  min-width: 80px;
  text-align: center;
}

.settings-textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--border, #ddd);
  border-radius: 6px;
  font-size: 0.9rem;
  background: var(--bg, #fff);
  color: var(--text);
  font-family: inherit;
  resize: vertical;
  min-height: 80px;
  transition: all 0.2s ease;
}

.settings-textarea:focus {
  outline: none;
  border-color: var(--primary, #e91e63);
  box-shadow: 0 0 0 3px rgba(233, 30, 99, 0.1);
}

/* Settings Checkboxes */
.settings-checkbox-label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  cursor: pointer;
  font-size: 0.9rem;
  line-height: 1.3;
}

.settings-checkbox {
  width: 18px;
  height: 18px;
  accent-color: var(--primary, #e91e63);
  cursor: pointer;
}

.settings-checkbox-text {
  color: var(--text);
  user-select: none;
}

/* Settings Button Groups */
.settings-button-group {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

/* Settings Hints and Status */
.settings-hint {
  font-size: 0.8rem;
  color: var(--text-secondary, #888);
  margin: 8px 0 0 0;
  line-height: 1.3;
}

.settings-status {
  font-size: 0.8rem;
  color: var(--success, #51cf66);
  font-weight: 500;
}

/* Settings Stats */
.settings-stats {
  background: var(--card, #f7f7f9);
  border: 1px solid var(--border, #dedee3);
  border-radius: 8px;
  padding: 16px;
  margin-top: 8px;
}

/* Settings Pro Features */
.settings-pro-features {
  background: var(--card, #f7f7f9);
  border: 1px solid var(--border, #dedee3);
  border-radius: 8px;
  padding: 16px;
  margin-top: 8px;
}

/* Settings Form */
.settings-form {
  margin-top: 16px;
}

/* Mobile Responsiveness */
@media (max-width: var(--bp-mobile-lg)) {
  .settings-container {
    padding: 0 16px;
  }

  .settings-section {
    padding: 16px 0;
  }

  .settings-subsection {
    margin-bottom: 24px;
  }

  .settings-title {
    font-size: 1.3rem;
  }

  .settings-input-group {
    flex-direction: column;
    align-items: stretch;
  }

  .settings-input {
    min-width: auto;
    width: 100%;
  }

  .settings-button-group {
    flex-direction: column;
  }

  .settings-button-group .btn {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .settings-tabs {
    padding: 8px 16px;
    gap: 8px;
  }

  .settings-tabs button {
    padding: 8px 12px;
    font-size: 0.85rem;
  }

  .settings-container {
    padding: 0 12px;
  }

  .settings-section {
    padding: 12px 0;
  }

  .settings-subsection {
    margin-bottom: 20px;
  }
}

/* === MP-Playlists v2 (curated rows, PRO) === */
.playlist-section[data-mp='v2'] {
  margin: 14px 0 8px;
}

.playlist-row {
  background: var(--bg-elev, #141a22);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 12px;
}

.playlist-row .row-head {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}
.playlist-row .row-title {
  font-weight: 700;
  font-size: 14px;
  line-height: 1.25;
}
.playlist-row .pill {
  display: inline-flex;
  align-items: center;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: var(--bg, #0b0e13);
  color: var(--muted, #a6b3c2);
  font-size: 12px;
  line-height: 1;
}

.playlist-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .playlist-grid {
    grid-template-columns: 1.2fr 1fr;
  }
}
.playlist-item {
  position: relative;
  background: #000;
  border-radius: 8px;
  overflow: hidden;
  aspect-ratio: 16/9;
  border: 1px solid rgba(255, 255, 255, 0.08);
}
.playlist-item iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

.playlist-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.playlist-link {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: var(--bg, #0b0e13);
  text-decoration: none;
  color: var(--text, #e6ecf2);
  font-size: 13px;
}
.playlist-link:hover {
  filter: brightness(1.05);
}

.playlist-upsell {
  background: var(--bg-elev, #141a22);
  border: 1px dashed rgba(255, 255, 255, 0.15);
  color: var(--muted, #a6b3c2);
  border-radius: 10px;
  padding: 10px;
  text-align: center;
  font-size: 13px;
}

/* === Loading States & Skeleton Screens === */
.loading-skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading-shimmer 1.5s infinite;
  border-radius: 8px;
}

@keyframes loading-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.section-loading {
  opacity: 0.6;
  pointer-events: none;
}

.section-loading::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.1);
  border-radius: inherit;
}

/* Skeleton card styles */
.skeleton-card {
  height: 200px;
  margin-bottom: 16px;
}

.skeleton-text {
  height: 16px;
  margin-bottom: 8px;
  border-radius: 4px;
}

.skeleton-text.short {
  width: 60%;
}
.skeleton-text.medium {
  width: 80%;
}
.skeleton-text.long {
  width: 100%;
}

/* MOVED TO home-layout.css - Home layout rules belong there */

/* Smooth section appearance */
.section {
  animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* === MP-Trivia (scoped) === */
.trivia-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
  flex-wrap: wrap;
  opacity: 0.98;
}
.trivia-row .trivia-label {
  font-size: 12px;
  color: var(--muted, #9aa6b2);
  margin-right: 2px;
}
.trivia-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;
  background: var(--bg-elev, #1a1f27);
  color: var(--text, #e6ecf2);
  border: 1px solid rgba(255, 255, 255, 0.06);
  font-size: 12px;
  line-height: 1;
  white-space: nowrap;
}
.trivia-chip .ic {
  opacity: 0.85;
}
.trivia-row[data-locked='1'] .trivia-chip {
  opacity: 0.65;
}
.trivia-row .nudge {
  font-size: 12px;
  opacity: 0.8;
}

/* FlickWord Boost (Home) - FlickFact feature removed */

/* === SO-1: Series Organizer (progressive disclosure) === */
.so-card {
  /* applied via flagged JS; keeps scope narrow */
  --so-gap: 8px;
}

.so-card .card-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: var(--so-gap);
  flex-wrap: wrap;
}

.so-card .card-header .h-title {
  font-weight: 700;
  line-height: 1.25;
  max-width: 100%;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  font-size: 14px;
}

.so-card .card-header .h-meta {
  display: inline-flex;
  gap: 6px;
  color: var(--muted, #9aa6b2);
  font-size: 12px;
}

.so-card .show-overview {
  margin-top: 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.3;
  font-size: 12px;
}

.so-card .card-pills {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: var(--so-gap);
  flex-wrap: wrap;
}

.so-card .pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 24px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: var(--bg-elev, #141a22);
  color: var(--text, #e6ecf2);
  font-size: 12px;
  line-height: 1;
  cursor: pointer;
}
.so-card .pill[hidden] {
  display: none;
}
.so-card .pill .ic {
  opacity: 0.9;
}
.so-card .pill[aria-expanded='true'] {
  filter: brightness(1.06);
}

.so-card .card-drawer {
  margin-top: var(--so-gap);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  padding: 8px;
  background: var(--bg, #0b0e13);
}

.so-card .card-drawer[hidden] {
  display: none;
}

/* keep feature rows tidy inside drawer */
.so-card .providers-slot,
.so-card .extras-slot,
.so-card .trivia-slot {
  margin: 6px 0;
}

/* === SO-1.1: Visual separation & title suppression (scoped) === */

/* 1) Don't show the legacy title when Series Organizer header is present */
.so-card .show-title {
  display: none;
}

/* 2) Make each card read as its own unit inside the list panel */
.so-card {
  /* local tokens, inherits your theme vars if present */
  --so-gap: 8px;
  --so-divider: rgba(0, 0, 0, 0.08); /* adjust in dark via theme if needed */
  --so-card-pad-y: 10px;
}

/* soft divider between successive cards without changing the parent container */
.so-card + .so-card {
  border-top: 1px solid var(--so-divider);
  margin-top: 10px;
  padding-top: var(--so-card-pad-y);
}

/* if you want slightly stronger separation on wide viewports, keep it subtle */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .so-card + .so-card {
    border-top-color: rgba(0, 0, 0, 0.1);
  }
}

/* 3) Trim excess space so the card body feels compact */
.so-card .card-header {
  margin-bottom: var(--so-gap);
}
.so-card .card-pills {
  margin-top: var(--so-gap);
}
.so-card .card-drawer {
  margin-top: var(--so-gap);
}

/* Optional: tighten the "Your Rating" row spacing when present */
.so-card .rating-container {
  margin: 6px 0 0 0;
}

/* === SO-1.2: Card framing for Series Organizer cards (scoped to .so-card) === */
/* Uses theme var if present; falls back to white */
:root {
  /* optional theme token if you don't already have one */
  --card-bg: #fff;
}

/* Make each card read as its own box */
.so-card {
  background: var(--card-bg);
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  margin-bottom: 12px;
}

/* Remove the old divider behavior now that cards are boxed */
.so-card + .so-card {
  border-top: none ;
  margin-top: 0 ;
  padding-top: 0 ;
}

/* Keep the legacy-title suppression from SO-1.1 */
.so-card .show-title {
  display: none;
}

/* Optional: slightly tighter vertical rhythm within the card */
.so-card .card-header {
  margin-bottom: 8px;
}
.so-card .card-pills {
  margin-top: 8px;
}
.so-card .card-drawer {
  margin-top: 8px;
}

/* === SO-1.3 (optional): Alternating light tint for scanability === */
/* Comment this block out if you don't want alternation */
.so-card:nth-of-type(even) {
  /* very subtle mix to avoid fighting theme */
  background: color-mix(in srgb, var(--card-bg) 96%, #000 4%);
}

/* Dark mode support: provide a darker base bg if you have a dark theme var */
@media (prefers-color-scheme: dark) {
  :root {
    /* If you already define a dark card bg, remove this and rely on your theme */
    --card-bg: #1e1f25;
  }
  .so-card {
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
  }
  .so-card:nth-of-type(even) {
    background: color-mix(in srgb, var(--card-bg) 96%, #fff 4%);
  }
}

/* ========== Notifications (shared) ========== */

/* Toast region: mobile = bottom; desktop = top-right */
.toast-region {
  position: fixed;
  inset: auto 16px max(16px, env(safe-area-inset-bottom)) 16px;
  display: grid;
  gap: 8px;
  z-index: 99999;
  pointer-events: none; /* clicks pass through unless on toast */
}
@media (min-width: 769px) {
  .toast-region {
    inset: 16px 16px auto auto;
  }
}

.toast {
  pointer-events: auto;
  max-width: 92vw;
  background: #222;
  color: #fff;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  display: flex;
  align-items: center;
  gap: 10px;
  opacity: 0;
  transform: translateY(10px);
  transition:
    transform 0.18s ease,
    opacity 0.18s ease;
  font-size: 0.95rem;
}
.toast.show {
  opacity: 1;
  transform: translateY(0);
}

.toast[data-type='success'] {
  background: #1b5e20;
}
.toast[data-type='info'] {
  background: #2c3e50;
}
.toast[data-type='error'] {
  background: #b00020;
}

.toast .msg {
  flex: 1;
}
.toast .close {
  margin-left: auto;
  background: transparent;
  border: 0;
  color: inherit;
  font-size: 18px;
  cursor: pointer;
  line-height: 1;
}

/* Banner region: fixed at very top of viewport */
.banner-region {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 9998;
  width: 100%;
}

.banner {
  background: #ffe9cc;
  color: #5b3b00;
  padding: 10px 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  font-size: 0.95rem;
}
.banner[data-type='error'] {
  background: #ffe5e8;
  color: #7a0010;
}
.banner .msg {
  flex: 1;
}
.banner .close {
  margin-left: auto;
  background: none;
  border: 0;
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
}

/* Add top padding to body when banner is present */
body.has-banner {
  padding-top: 50px; /* Adjust based on banner height */
}

@media (prefers-reduced-motion: reduce) {
  .toast {
    transition: none;
  }
}

/* ========== Header spacing + account controls (shared) ========== */

/* Vertical rhythm inside header - disabled to preserve flex layout */
/* .header .header-bar {
  display: grid;
  grid-auto-rows: min-content;
  row-gap: 6px;
} */

/* Titles compact but readable */
.header .app-title {
  line-height: 1.15;
  margin: 2px 0 0 0;
}
.header .app-subtitle {
  line-height: 1.2;
  margin: 0 0 2px 0;
  opacity: 0.9;
}

/* Account controls row */
.account-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 2px; /* consistent breathing room below titles */
  margin-bottom: 2px;
}

/* Buttons/select hit-area */
.account-controls #accountBtn {
  min-height: 40px;
  padding: 0 12px;
}
.account-controls #langSelect {
  min-height: 40px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
}

/* ========== Curated Rows ========== */
.curated-sections {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-top: 12px;
}

.curated-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.curated-section .section-header {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.curated-section .section-title {
  font-weight: 600;
  font-size: 1.1rem;
}
.curated-section .section-subtitle {
  font-size: 0.9rem;
  opacity: 0.75;
}

/* Horizontal row with scroll-snap - scoped to non-Home pages */
body:not(.home) .curated-row {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 44vw; /* mobile card width; tuned below for desktop */
  gap: 10px;
  overflow-x: auto; /* overflow is local to row */
  overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory;
  padding: 4px 2px 8px 2px;
  -webkit-overflow-scrolling: touch;
}
body:not(.home) .curated-row::-webkit-scrollbar {
  height: 8px;
}
body:not(.home) .curated-row::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

/* Curated card - scoped to non-Home pages */
body:not(.home) .curated-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 10px;
  width: 220px;
  min-width: 220px;
  max-width: 220px;
  flex: 0 0 auto;
  scroll-snap-align: start;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}
body:not(.home) .curated-card + .curated-card {
  margin-left: 10px;
}
.curated-card .poster {
  width: 100%;
  aspect-ratio: 2/3;
  border-radius: 10px;
  overflow: hidden;
  background: #f2f2f2;
}
.curated-card .poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.curated-card .poster.placeholder {
  background: linear-gradient(90deg, #eee, #f7f7f7, #eee);
}
.curated-card .title {
  font-size: 0.95rem;
  line-height: 1.2;
  margin: 8px 0 4px 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.card-meta {
  margin-top: 6px;
  font-size: 0.92rem;
  opacity: 0.9;
}
.curated-card .stars {
  color: #fbbf24;
  margin-right: 4px;
}
.curated-card .votes {
  color: var(--color-muted);
  font-size: 0.85rem;
}
.curated-card .actions {
  display: flex;
  gap: 6px;
  margin-top: 8px;
  flex-wrap: wrap;
}
.curated-card .btn {
  padding: 4px 8px;
  min-height: 28px;
  font-size: 0.85rem;
}

/* Desktop widths */
@media (min-width: 769px) {
  .curated-row {
    grid-auto-columns: 220px;
  }
}

/* Card component styling within curated rows */
.curated-row .card {
  flex-shrink: 0;
  scroll-snap-align: start;
  width: 180px;
  margin-right: 10px;
}

/* === Custom Genre Selector === */
.genre-selector {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  margin: 12px 0;
}

.genre-selector-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.genre-label {
  font-weight: 500;
  font-size: 14px;
  color: var(--text);
  min-width: 80px;
  flex-shrink: 0;
}

.genre-select {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-height: 36px;
  transition: all 0.2s ease;
}

.genre-select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(156, 39, 176, 0.1);
}

.genre-select:hover {
  border-color: var(--primary);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .genre-selector-row {
    flex-direction: column;
    align-items: stretch;
    gap: 4px;
  }
  
  .genre-label {
    min-width: auto;
    font-size: 13px;
  }
  
  .genre-select {
    min-height: 40px;
  }
}

/* === Curated Genre Settings === */
.curated-genre-section {
  margin: 16px 0;
  padding: 12px;
  background: var(--bg-secondary, rgba(0, 0, 0, 0.02));
  border-radius: 8px;
  border: 1px solid var(--border);
}

.curated-genre-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 8px 0;
  padding-bottom: 4px;
  border-bottom: 1px solid var(--border);
}

.settings-section-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 8px 0;
}

.curated-row .card:last-child {
  margin-right: 0;
}

/* Mobile card widths for curated rows */
@media (max-width: var(--bp-mobile-lg)) {
  .curated-row .card {
    width: 44vw;
  }
}

@media (max-width: 480px) {
  .curated-row .card {
    width: 58vw;
  }
}

/* ===== Trivia Tile ===== */
.trivia-card {
  margin-top: 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 12px;
  display: grid;
  gap: 10px;
}
.trivia-head {
  display: flex;
  align-items: baseline;
  gap: 10px;
}
.trivia-head h2 {
  font-size: 1.1rem;
  margin: 0;
}
.trivia-stats {
  opacity: 0.8;
  font-size: 0.9rem;
}

.trivia-body {
  display: grid;
  gap: 10px;
}
.trivia-question {
  font-weight: 600;
  line-height: 1.3;
}

.trivia-choices {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 8px;
}
.trivia-choices li {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 10px;
  cursor: pointer;
}
.trivia-choices li[aria-selected='true'] {
  outline: 2px solid var(--primary);
}
.trivia-choices li.correct {
  background: #0f5e20;
  color: #fff;
  border-color: #0f5e20;
}
.trivia-choices li.wrong {
  background: #7a0010;
  color: #fff;
  border-color: #7a0010;
}

.trivia-feedback {
  min-height: 1.2em;
  font-size: 0.95rem;
}
.trivia-actions .btn {
  min-height: 36px;
  padding: 6px 10px;
}

/* Keep it readable on mobile */
@media (max-width: 480px) {
  .trivia-card {
    padding: 10px;
  }
}

/* ===== Trivia Modal Styles ===== */
.trivia-modal-content {
  text-align: left;
  max-width: 500px;
}

.trivia-modal-content .trivia-question {
  font-weight: 600;
  margin-bottom: 20px;
  font-size: 16px;
  line-height: 1.4;
  color: var(--text);
}

.trivia-modal-content .trivia-choices {
  display: grid;
  gap: 8px;
  margin-bottom: 20px;
}

.trivia-choice-btn {
  padding: 12px 16px;
  border: 2px solid var(--border, #ddd);
  border-radius: 8px;
  background: var(--card, #fff);
  color: var(--text, #333);
  cursor: pointer;
  text-align: left;
  transition: all 0.2s;
  font-size: 14px;
  font-family: inherit;
}

.trivia-choice-btn:hover {
  border-color: var(--primary);
  background: var(--primary-light, rgba(102, 126, 234, 0.1));
  transform: translateY(-1px);
}

.trivia-choice-btn:disabled {
  cursor: not-allowed;
  opacity: 0.7;
}

.trivia-choice-btn[data-correct='true'] {
  border-color: var(--primary);
}

.trivia-modal-content .trivia-feedback {
  min-height: 24px;
  font-weight: 500;
  text-align: center;
  margin-bottom: 16px;
  font-size: 14px;
}

.trivia-modal-content .trivia-actions {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-bottom: 12px;
}

.trivia-modal-content .trivia-stats {
  font-size: 12px;
  color: var(--text-secondary, #666);
  text-align: center;
  margin-top: 12px;
  opacity: 0.8;
}

@media (max-width: var(--bp-mobile-lg)) {
  .trivia-modal-content .trivia-question {
    font-size: 15px;
  }

  .trivia-choice-btn {
    padding: 10px 14px;
    font-size: 13px;
  }
}

/* ===== Daily Video Spotlight ===== */
.spotlight-card {
  margin-top: 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 12px;
  display: grid;
  gap: 10px;
}
.spotlight-head {
  display: flex;
  align-items: baseline;
  gap: 10px;
}
.spotlight-head h2 {
  margin: 0;
  font-size: 1.1rem;
}
.spotlight-date {
  opacity: 0.8;
  font-size: 0.9rem;
}

.spotlight-media {
  position: relative;
  aspect-ratio: 16/9;
  border-radius: 10px;
  overflow: hidden; /* local overflow is OK here */
  background: #000;
}
.spotlight-media iframe,
.spotlight-media video {
  width: 100%;
  height: 100%;
  display: block;
}

.spotlight-meta {
  display: grid;
  gap: 8px;
}
.spotlight-title {
  font-weight: 600;
}
.spotlight-desc {
  opacity: 0.9;
  line-height: 1.35;
}
.spotlight-actions {
  display: flex;
  gap: 8px;
}
.spotlight-actions .btn {
  min-height: 36px;
  padding: 6px 10px;
}

/* Mobile tweak */
@media (max-width: 480px) {
  .spotlight-card {
    padding: 10px;
  }
}

/* Reduced motion: we won't animate; autoplay will be disabled in JS */
@media (prefers-reduced-motion: reduce) {
  .spotlight-media {
    scroll-behavior: auto;
  }
}

/* ===== Series Organization (seasons + episodes) ===== */
.series-block {
  margin-top: 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 12px;
  display: grid;
  gap: 10px;
}

.series-head {
  display: flex;
  align-items: baseline;
  gap: 10px;
  justify-content: space-between;
}
.series-title {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0;
}
.series-meta {
  opacity: 0.85;
  font-size: 0.9rem;
}

.seasons {
  display: grid;
  gap: 8px;
}

.season {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  overflow: hidden; /* local only */
  background: var(--color-surface);
}

.season-toggle {
  all: unset;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  cursor: pointer;
  padding: 10px 12px;
}
.season-toggle:focus-visible {
  outline: 2px solid var(--primary);
  border-radius: 6px;
}
.season-toggle .name {
  font-weight: 600;
}
.season-toggle .count {
  opacity: 0.75;
  font-size: 0.9rem;
  margin-left: auto;
}
.season-toggle .chev {
  transition: transform 0.15s ease;
}
.season[aria-expanded='true'] .chev {
  transform: rotate(90deg);
}

.episodes {
  display: none;
  padding: 10px 12px 12px 12px;
  border-top: 1px solid var(--color-border);
  background: var(--color-surface-2, rgba(0, 0, 0, 0.02));
}
.season[aria-expanded='true'] .episodes {
  display: grid;
  gap: 8px;
}

.episode {
  display: grid;
  gap: 4px;
  grid-template-columns: auto 1fr;
}
.episode .ep-no {
  min-width: 28px;
  text-align: right;
  opacity: 0.75;
  padding-right: 8px;
}
.episode .ep-title {
  font-weight: 500;
}
.episode .ep-meta {
  opacity: 0.75;
  font-size: 0.9rem;
}

.ep-actions {
  margin-top: 4px;
  display: flex;
  gap: 8px;
}
.ep-actions .btn {
  min-height: 30px;
  padding: 4px 8px;
}

.more-row {
  display: flex;
  align-items: center;
}
.more-row .btn {
  margin-left: auto;
  min-height: 34px;
  padding: 6px 10px;
}

/* Mobile tweak */
@media (max-width: 480px) {
  .series-block {
    padding: 10px;
  }
}

/* Reduced motion: no fancy transitions beyond the chevron */
@media (prefers-reduced-motion: reduce) {
  .season .chev {
    transition: none;
  }
}

/* ===== Share Modal ===== */
.modal[hidden] {
  display: none;
}
.modal {
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: grid;
  place-items: center;
}
.modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
}
.modal-card {
  position: relative;
  width: min(560px, 92vw);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  padding: 12px;
  display: grid;
  gap: 10px;
}
.modal-head {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: space-between;
}
.icon-btn {
  background: none;
  border: 0;
  cursor: pointer;
  font-size: 22px;
  line-height: 1;
}

.modal-body {
  display: grid;
  gap: 10px;
}
.share-hint {
  opacity: 0.85;
}
.share-url {
  width: 100%;
  padding: 10px;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  font-family: inherit;
  font-size: 0.95rem;
}
.share-actions {
  display: flex;
  gap: 8px;
}
.share-actions .btn {
  min-height: 36px;
  padding: 6px 10px;
}
.share-feedback {
  min-height: 1.2em;
  font-size: 0.95rem;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  border: 0;
  padding: 0;
  clip: rect(0 0 0 0);
  overflow: hidden;
  white-space: nowrap;
}

/* Mobile */
@media (max-width: 480px) {
  .modal-card {
    padding: 10px;
  }
}

/* ===== Episode Tracking Modal Styles ===== */
.episode-modal-content {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Episode tracking modal specific overrides */
#episode-modal .modal {
  max-height: 85vh;
  max-width: 90vw;
  width: 90vw;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 0;
}

#episode-modal .modal-body {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 0;
}

#episode-modal .episode-seasons {
  flex: 1;
  overflow-y: auto;
  max-height: 100%;
  padding: 16px;
  font-size: 14px;
}

#episode-modal .season-container {
  margin-bottom: 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  overflow: hidden;
  background: var(--color-surface);
  font-size: 13px;
}

#episode-modal .season-header {
  padding: 12px 16px;
  font-size: 14px;
  font-weight: 600;
}

#episode-modal .season-episodes {
  max-height: 250px;
  overflow-y: auto;
  font-size: 12px;
}

#episode-modal .episode-row {
  padding: 8px 16px;
  font-size: 12px;
  min-height: 36px;
}

#episode-modal .episode-info {
  font-size: 12px;
}

#episode-modal .episode-title {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 2px;
}

#episode-modal .episode-meta {
  font-size: 11px;
  opacity: 0.7;
}

#episode-modal .ep-actions .btn {
  font-size: 11px;
  padding: 4px 8px;
  min-height: 28px;
}

/* Custom scrollbar styling for episode modal */
#episode-modal .episode-seasons::-webkit-scrollbar,
#episode-modal .season-episodes::-webkit-scrollbar {
  width: 8px;
}

#episode-modal .episode-seasons::-webkit-scrollbar-track,
#episode-modal .season-episodes::-webkit-scrollbar-track {
  background: var(--color-surface-2);
  border-radius: 4px;
}

#episode-modal .episode-seasons::-webkit-scrollbar-thumb,
#episode-modal .season-episodes::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

#episode-modal .episode-seasons::-webkit-scrollbar-thumb:hover,
#episode-modal .season-episodes::-webkit-scrollbar-thumb:hover {
  background: var(--color-muted);
}

/* ===== Theaters Near Me Styles ===== */
#theaters-section {
  margin: 20px 0;
  padding: 20px;
  background: var(--color-surface);
  border-radius: 12px;
  border: 1px solid var(--color-border);
}

/* Ensure theaters-section follows light theme even when it has home-preview-row class */
#theaters-section.home-preview-row {
  background: var(--color-surface);
  color: var(--color-text);
}

/* Additional specificity to override any conflicting rules */
#theaters-section.home-preview-row,
section#theaters-section.home-preview-row {
  background: var(--color-surface);
  background-color: var(--color-surface);
  color: var(--color-text);
}

.theaters-container {
  width: 600px;
  height: 300px;
  display: flex;
  flex-direction: column;
  margin-bottom: 20px;
}

.theaters-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}

.theaters-header h3 {
  margin: 0;
  color: var(--color-text);
  font-size: 18px;
}

.theaters-list {
  flex: 1;
  overflow-x: auto;
  overflow-y: hidden;
  display: flex;
  gap: 16px;
  padding: 8px;
  scroll-behavior: smooth;
}

.theater-movie {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
  cursor: pointer;
  flex: 0 0 200px; /* Fixed width for horizontal scrolling */
  min-width: 200px;
}

.theater-movie:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.movie-poster {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: var(--color-surface-2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.movie-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.movie-poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-border);
  color: var(--color-muted);
  font-size: 48px;
}

.movie-info {
  padding: 12px;
}

.movie-title {
  margin: 0 0 8px 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.movie-overview {
  margin: 0 0 8px 0;
  font-size: 12px;
  color: var(--color-muted);
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.movie-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 11px;
  color: var(--color-muted);
}

.movie-rating {
  font-weight: 500;
}

.movie-release {
  font-weight: 500;
}

.theaters-info {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  padding: 20px;
  background: var(--color-surface-2);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  width: 600px;
  height: 300px;
}

@media (max-width: var(--bp-mobile-lg)) {
  .theaters-info {
    grid-template-columns: 1fr;
    gap: 16px;
  }
}

.theaters-meta h3 {
  margin: 0 0 8px 0;
  color: var(--color-text);
  font-size: 18px;
}

.theaters-meta p {
  margin: 0 0 12px 0;
  color: var(--color-muted);
  font-size: 14px;
  line-height: 1.4;
}

.location-info {
  padding: 8px 12px;
  background: var(--color-surface-2);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-text);
}

.theaters-cta {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.theaters-cta .btn {
  width: 100%;
  justify-content: center;
}

.no-movies {
  grid-column: 1 / -1;
  text-align: center;
  padding: 40px 20px;
  color: var(--color-muted);
}

.no-movies p {
  margin: 0;
  font-size: 14px;
}

/* Mobile responsiveness */
@media (max-width: var(--bp-mobile-lg)) {
  .theaters-list {
    display: flex;
    flex-direction: row;
    overflow-x: auto;
    gap: 12px;
    padding: 8px;
  }

  .movie-poster {
    height: 150px;
  }

  .movie-info {
    padding: 8px;
  }

  .movie-title {
    font-size: 13px;
  }

  .movie-overview {
    font-size: 11px;
  }
}

.episode-modal-header {
  flex-shrink: 0;
  padding: 20px;
  border-bottom: 1px solid var(--color-border);
}

.episode-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.episode-progress {
  font-size: 14px;
  color: var(--color-muted);
}

.episode-progress-bar {
  width: 100%;
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  margin-top: 12px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));
  width: 0%;
  transition: width 0.3s ease;
}

.season-container {
  margin-bottom: 20px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
}

.season-header {
  width: 100%;
  padding: 16px;
  background: var(--color-surface-2);
  border: none;
  text-align: left;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background-color 0.2s ease;
}

.season-header:hover {
  background: var(--color-border);
}

.season-episodes {
  background: var(--color-surface);
}

.episode-row {
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.episode-row:hover {
  background: var(--color-surface-2);
}

.episode-row:focus {
  outline: 2px solid var(--color-primary-start);
  outline-offset: -2px;
}

.episode-info {
  flex: 1;
}

.episode-toggle {
  flex-shrink: 0;
}

/* Toggle Switch Styles */
.switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--color-border);
  transition: 0.3s;
  border-radius: 24px;
}

.slider:before {
  position: absolute;
  content: '';
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
}

input:checked + .slider {
  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));
}

input:checked + .slider:before {
  transform: translateX(20px);
}

.slider:hover {
  background-color: var(--color-muted);
}

input:checked + .slider:hover {
  opacity: 0.8;
}

.season-progress {
  width: 100px;
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.season-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary-start), var(--color-primary-end));
  transition: width 0.3s ease;
}

.season-chevron {
  font-size: 16px;
  color: var(--color-muted);
  transition: transform 0.2s ease;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .episode-modal-header {
    background: #1a1a1a;
    border-bottom-color: #333;
  }

  .episode-modal-body {
    background: #1a1a1a;
  }

  .season-header {
    background: #2d2d2d;
    color: #fff;
  }

  .season-header:hover {
    background: #3d3d3d;
  }

  .season-episodes {
    background: #1a1a1a;
  }

  .episode-row {
    border-bottom-color: #333;
    color: #fff;
  }

  .episode-row:hover {
    background: #2d2d2d;
  }
}

/* ========== MOBILE LAYOUT FIXES (layout_mobile_fix flag) ========== */
@media (max-width: var(--bp-mobile-lg)) {
  /* Only apply when mobile fix flag is enabled */
  .layout-mobile-fix {
    /* 1) Header/Search mobile responsive fixes - COMPACT HORIZONTAL */
    .header {
      display: grid ;
      grid-template-columns: 1fr auto 1fr ;
      align-items: center ;
      gap: 12px ;
      padding: 24px 28px ;
      min-height: auto ;
    }

    .header-left {
      display: flex ;
      flex-direction: column ;
      align-items: flex-start ;
      gap: 2px ;
      order: 1;
    }

    .header-center {
      display: flex ;
      flex-direction: column ;
      align-items: center ;
      gap: 2px ;
      order: 2;
      flex: 1;
    }

    .header-right {
      display: flex ;
      flex-direction: column ;
      align-items: flex-end ;
      gap: 4px ;
      order: 3;
    }

    /* Compact user section */
    .user-section {
      display: flex ;
      flex-direction: column ;
      align-items: flex-start ;
      gap: 2px ;
    }

    .username-snark {
      font-size: 16px ;
      line-height: 1.2 ;
      margin: 0 ;
      font-weight: 500;
    }

    .account-controls {
      display: flex ;
      flex-direction: row ;
      align-items: center ;
      gap: 6px ;
    }

    /* Compact title section */
    .title {
      font-size: 1.4rem ;
      line-height: 1.1 ;
      margin: 0 ;
    }

    .subtitle {
      font-size: 0.75rem ;
      line-height: 1.1 ;
      margin: 0 ;
    }

    .pro-badge {
      font-size: 0.6rem ;
      padding: 2px 6px ;
      margin: 0 ;
    }

    .top-search {
      padding: 6px ;
      margin: 4px 0 ;
      border-radius: 6px ;
      position: sticky ;
      top: 0 ;
      z-index: 100 ;
      background: var(--bg) ;
    }

    .search-row {
      display: flex ;
      flex-direction: column ;
      gap: 4px ;
    }

    .search-input {
      width: 100% ;
      padding: 6px 10px ;
      font-size: 13px ;
      min-height: 36px ;
    }

    .search-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      justify-content: center;
    }

    .genre-filter {
      flex: 0 0 auto;
      width: 60px;
      min-width: 60px;
      max-width: 60px;
      padding: 6px 8px;
      font-size: 13px;
      min-height: 36px;
    }

    .search-btn {
      padding: 6px 12px;
      font-size: 13px;
      min-height: 36px;
      min-width: 60px;
    }

    /* 2) Tabs/Rail mobile layout */
    .tab-rail {
      display: flex ;
      flex-wrap: wrap ;
      gap: 4px ;
      padding: 8px 0 ;
      justify-content: center ;
    }

    .tab-btn {
      flex: 1 ;
      min-width: 80px ;
      padding: 8px 12px ;
      font-size: 13px ;
      min-height: 44px ;
      text-align: center ;
    }

    /* 3) Rows & Cards mobile responsive behavior */
    .row {
      margin: 16px 0 ;
      padding: 0 8px ;
    }

    .row-header {
      margin-bottom: 12px ;
      padding: 0 4px ;
    }

    .row-title {
      font-size: 1.1rem ;
      margin-bottom: 4px ;
    }

    .row-subtitle {
      font-size: 0.85rem ;
    }

    .row-inner {
      display: flex ;
      overflow-x: auto ;
      overflow-y: hidden ;
      gap: 12px ;
      padding: 4px 0 ;
      scroll-behavior: smooth ;
      -webkit-overflow-scrolling: touch ;
    }

    .row-inner::-webkit-scrollbar {
      height: 8px ;
    }

    .row-inner::-webkit-scrollbar-track {
      background: transparent ;
    }

    .row-inner::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2) ;
      border-radius: 8px ;
    }

    /* Card mobile adjustments */
    .card {
      flex: 0 0 auto ;
      min-width: 150px ;
      max-width: 160px ;
    }

    .card--compact {
      min-width: 150px ;
      max-width: 160px ;
    }

    .card__poster {
      width: 100% ;
      height: 200px ;
      aspect-ratio: 2/3 ;
    }

    .card__content {
      padding: 8px ;
    }

    .card__title {
      font-size: 0.9rem ;
      line-height: 1.2 ;
      margin-bottom: 4px ;
    }

    .card__subtitle {
      font-size: 0.8rem ;
      line-height: 1.2 ;
      margin-bottom: 6px ;
    }

    .card__actions {
      gap: 4px ;
    }

    .card__primary-action {
      padding: 6px 12px ;
      font-size: 0.8rem ;
      min-height: 32px ;
    }

    .card__more-btn {
      padding: 6px ;
      min-width: 32px ;
      min-height: 32px ;
    }

    .card__more-menu {
      right: 0 ;
      top: 100% ;
      min-width: 140px ;
      z-index: 1000 ;
    }

    /* 4) Section spacing normalization - COMPACT */
    .section {
      margin: 12px 0 ;
      padding: 0 8px ;
    }

    .section__header {
      margin-bottom: 8px ;
      padding: 0 4px ;
    }

    .section__title {
      font-size: 1.1rem ;
      margin-bottom: 2px ;
    }

    .section__subtitle {
      font-size: 0.8rem ;
    }

    /* 5) Community Spotlight mobile stacking */
    .spotlight-grid {
      display: flex ;
      flex-direction: column ;
      gap: 16px ;
    }

    .spotlight-video {
      width: 100% ;
      aspect-ratio: 16/9 ;
      order: 1 ;
    }

    .spotlight-content {
      order: 2 ;
      width: 100% ;
      padding: 0 ;
    }

    .spotlight-title {
      font-size: 1.1rem ;
      margin-bottom: 8px ;
    }

    .spotlight-description {
      font-size: 0.9rem ;
      line-height: 1.4 ;
      margin-bottom: 12px ;
    }

    .spotlight-cta {
      width: 100% ;
      padding: 10px 16px ;
      font-size: 0.9rem ;
      min-height: 44px ;
    }

    /* 6) Feedback & misc mobile fixes */
    .feedback-card {
      padding: 12px ;
      margin: 8px 0 ;
    }

    .feedback-title {
      font-size: 1rem ;
      margin-bottom: 8px ;
    }

    .feedback-description {
      font-size: 0.85rem ;
      line-height: 1.3 ;
      margin-bottom: 12px ;
    }

    .feedback-cta {
      width: 100% ;
      padding: 10px 16px ;
      font-size: 0.9rem ;
      min-height: 44px ;
    }

    /* Form inputs mobile fixes */
    input[type='text'],
    input[type='email'],
    textarea,
    select {
      width: 100% ;
      padding: 8px 12px ;
      font-size: 14px ;
      min-height: 44px ;
    }

    textarea {
      min-height: 80px ;
      resize: vertical ;
    }

    /* Button mobile fixes */
    .btn {
      min-height: 44px ;
      padding: 8px 16px ;
      font-size: 14px ;
    }

    .btn--full-width {
      width: 100% ;
    }

    /* Ensure no horizontal scroll */
    body {
      overflow-x: hidden ;
    }

    .main-container {
      overflow-x: hidden ;
    }
  }
}

/* ========== SKIP LINKS FOR ACCESSIBILITY ========== */

.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--accent);
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  font-weight: 600;
  font-size: 14px;
  z-index: 1000;
  transition: top 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.skip-link:focus {
  top: 6px;
  outline: 2px solid white;
  outline-offset: 2px;
}

.skip-link:hover {
  background: var(--color-primary-dark, #c2185b);
  color: white;
}

/* Dark mode skip links */
.dark-mode .skip-link {
  background: var(--accent);
  color: white;
}

.dark-mode .skip-link:focus {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ========== SKELETON LOADER SYSTEM ========== */

/* Base skeleton loader */
.skeleton {
  background: var(--skeleton-bg);
  border-radius: 4px;
  position: relative;
  overflow: hidden;
  animation: skeleton-pulse var(--skeleton-animation-duration) ease-in-out infinite;
}

.skeleton::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, var(--skeleton-shimmer), transparent);
  animation: skeleton-shimmer var(--skeleton-animation-duration) ease-in-out infinite;
}

/* Skeleton animations */
@keyframes skeleton-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

@keyframes skeleton-shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

/* Card skeleton variants */
.skeleton-card {
  width: 100%;
  height: 200px;
  border-radius: var(--r);
  margin-bottom: var(--gap-4);
}

.skeleton-poster {
  width: var(--poster-w);
  height: var(--poster-h);
  border-radius: 6px;
  flex-shrink: 0;
}

.skeleton-poster-mobile {
  width: var(--poster-w-mobile);
  height: var(--poster-h-mobile);
  border-radius: 6px;
  flex-shrink: 0;
}

.skeleton-text {
  height: 16px;
  margin-bottom: var(--gap-2);
  border-radius: 4px;
}

.skeleton-text-large {
  height: 20px;
  margin-bottom: var(--gap-3);
  border-radius: 4px;
}

.skeleton-text-small {
  height: 12px;
  margin-bottom: var(--gap-1);
  border-radius: 4px;
}

.skeleton-button {
  height: 36px;
  width: 80px;
  border-radius: 6px;
}

/* Skeleton for horizontal scroll cards */
.skeleton-preview-card {
  width: var(--home-card-width-desktop);
  height: var(--home-card-height-desktop);
  border-radius: 8px;
  flex-shrink: 0;
}

.skeleton-preview-card-mobile {
  width: var(--home-card-width-mobile);
  height: var(--home-card-height-mobile);
  border-radius: 8px;
  flex-shrink: 0;
}

/* Skeleton for quote bar */
.skeleton-quote {
  height: 60px;
  border-radius: var(--r);
  margin: var(--gap-3) 0;
}

/* Skeleton for game cards */
.skeleton-game-card {
  width: 100%;
  height: 280px;
  border-radius: var(--r);
  margin-bottom: var(--gap-4);
}

/* Skeleton for list items */
.skeleton-list-item {
  width: 100%;
  height: 80px;
  border-radius: var(--r);
  margin-bottom: var(--gap-3);
}

/* Dark mode skeleton adjustments */
.dark-mode .skeleton {
  --skeleton-bg: #374151;
  --skeleton-shimmer: #4b5563;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .skeleton {
    animation: none;
  }

  .skeleton::before {
    animation: none;
  }
}

/* Skeleton loading states */
.loading .skeleton {
  display: block;
}

.loaded .skeleton {
  display: none;
}

/* Specific skeleton layouts */
.skeleton-show-card {
  display: grid;
  grid-template-columns: var(--poster-w-desktop) 1fr;
  gap: var(--gap-4);
  padding: var(--gap-4);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--r);
  margin-bottom: var(--gap-4);
}

/* Card Component Styles - consolidated with base card styles above */

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.card--compact {
  flex-direction: row;
  align-items: center;
  padding: 12px;
  gap: 12px;
}

.card--expanded {
  padding: 16px;
}

.card--poster {
  width: 200px;
  min-height: 300px;
}

.card-poster {
  position: relative;
  width: 100%;
  height: 200px;
  overflow: hidden;
}

.card--poster .card-poster {
  height: 280px;
}

.card-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card-poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface-2);
  color: var(--placeholder);
  font-size: 2rem;
}

.card-badges {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.card-badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  background: var(--accent);
  color: white;
}

.card-badge--status {
  background: var(--accent);
}

.card-content {
  padding: 12px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.card-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--fg);
  margin: 0;
  line-height: 1.3;
}

.card-subtitle {
  font-size: 14px;
  color: var(--muted);
  margin: 0;
}

.card-rating {
  color: #fbbf24;
  font-size: 14px;
}

.card-primary-action {
  background: var(--accent);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s ease;
}

.card-primary-action:hover {
  background: #e91e63;
}

.card-overflow-actions {
  display: flex;
  gap: 4px;
  margin-top: auto;
}

.card-overflow-action {
  background: none;
  border: 1px solid var(--border);
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

.card-overflow-action:hover {
  background: var(--color-surface-2);
  border-color: var(--accent);
}

.card--disabled {
  opacity: 0.6;
  pointer-events: none;
}

.skeleton-show-card-mobile {
  display: grid;
  grid-template-columns: var(--poster-w-mobile) 1fr;
  gap: var(--gap-3);
  padding: var(--gap-3);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--r);
  margin-bottom: var(--gap-3);
}

.skeleton-content {
  display: flex;
  flex-direction: column;
  gap: var(--gap-2);
}

.skeleton-actions {
  display: flex;
  gap: var(--gap-2);
  margin-top: auto;
}

/* Mobile responsive skeleton */
@media (max-width: var(--bp-mobile-lg)) {
  .skeleton-show-card {
    grid-template-columns: var(--poster-w-mobile) 1fr;
    gap: var(--gap-3);
    padding: var(--gap-3);
  }

  .skeleton-preview-card {
    width: var(--home-card-width-mobile);
    height: var(--home-card-height-mobile);
  }
}

/* ========== Updated Curated Rows ========== */
.curated-sections {
  display: flex;
  flex-direction: column;
  gap: 24px;
  margin-top: 12px;
}

.curated-row {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.curated-row-header {
  display: flex;
  align-items: baseline;
  gap: 8px;
}

.curated-row-title {
  font-weight: 600;
  font-size: 1.1rem;
  margin: 0;
  color: var(--text);
}

/* Horizontal scroll container with snap behavior */
.curated-row-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  padding: 4px 0 8px 0;
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

.curated-row-scroll::-webkit-scrollbar {
  height: 8px;
}

.curated-row-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.curated-row-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

.curated-row-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Items container with horizontal layout */
.curated-items-container {
  display: flex;
  gap: 12px;
  padding: 0 4px;
}

/* Individual curated items */
.curated-item {
  flex-shrink: 0;
  scroll-snap-align: start;
  width: 44vw;
  max-width: 200px;
  min-width: 150px;
  background: var(--color-surface);
  border-radius: 8px;
  padding: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.curated-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.curated-item:focus {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.curated-item img {
  width: 100%;
  height: auto;
  border-radius: 4px;
  aspect-ratio: 2/3;
  object-fit: cover;
}

.curated-item span {
  font-weight: 600;
  font-size: 0.9rem;
  line-height: 1.2;
  margin: 0;
  color: var(--text);
  text-align: center;
}

/* Card component styling within curated rows */
.curated-row .card {
  flex-shrink: 0;
  scroll-snap-align: start;
  width: 44vw;
  max-width: 200px;
  min-width: 150px;
  margin-right: 0;
}

/* Desktop widths */
@media (min-width: 769px) {
  .curated-item {
    width: 200px;
    min-width: 180px;
  }

  .curated-row .card {
    width: 200px;
    min-width: 180px;
  }
}

/* Mobile card widths for curated rows */
@media (max-width: var(--bp-mobile-lg)) {
  .curated-item {
    width: 44vw;
    min-width: 150px;
  }

  .curated-row .card {
    width: 44vw;
    min-width: 150px;
  }
}

@media (max-width: 480px) {
  .curated-item {
    width: 58vw;
    min-width: 140px;
  }

  .curated-row .card {
    width: 58vw;
    min-width: 140px;
  }
}

/* FINAL OVERRIDE - Remove all backgrounds from settings FAB */
button#btnSettings,
button#btnSettings.fab-left,
.fab-dock button#btnSettings,
.fab-dock button#btnSettings.fab-left,
button#btnSettings.fab-left.fab {
  background: transparent ;
  background-color: transparent ;
  background-image: none ;
  box-shadow: none ;
  border: none ;
  border-radius: 0 ;
  padding: 0 ;
  margin: 0 ;
  width: auto ;
  height: auto ;
  min-width: auto ;
  min-height: auto ;
}

button#btnSettings:hover,
button#btnSettings.fab-left:hover,
.fab-dock button#btnSettings:hover,
.fab-dock button#btnSettings.fab-left:hover,
button#btnSettings.fab-left.fab:hover {
  background: transparent ;
  background-color: transparent ;
  background-image: none ;
  box-shadow: none ;
  transform: scale(1.05);
  opacity: 0.8;
}

/* Remove Button Styling */
.unified-card-action-btn--remove {
  background-color: #dc3545 ;
  color: white ;
  border: 1px solid #dc3545 ;
}

.unified-card-action-btn--remove:hover {
  background-color: #c82333 ;
  border-color: #bd2130 ;
  transform: scale(1.05);
}

.unified-card-action-btn--remove .unified-card-action-icon {
  color: white ;
}

.unified-card-action-btn--remove .unified-card-action-label {
  color: white ;
}

/* Two-Column Action Layout */
.unified-card-actions-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 12px;
}

.unified-card-actions-left,
.unified-card-actions-right {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Compact Button Styling */
.unified-card-action-btn--compact {
  padding: 6px 8px ;
  font-size: 12px ;
  min-height: 32px ;
  display: flex ;
  align-items: center ;
  justify-content: center ;
  gap: 4px ;
}

.unified-card-action-btn--compact .unified-card-action-icon {
  font-size: 14px ;
}

.unified-card-action-btn--compact .unified-card-action-label {
  font-size: 11px ;
  font-weight: 500 ;
  white-space: nowrap ;
  overflow: hidden ;
  text-overflow: ellipsis ;
  max-width: 80px ;
}

/* Ensure buttons fit in container */
.unified-card-actions {
  overflow: visible ;
  max-height: none ;
}

/* Mobile responsiveness for compact buttons */
@media (max-width: var(--bp-mobile-lg)) {
  .unified-card-action-btn--compact {
    padding: 4px 6px ;
    font-size: 11px ;
    min-height: 28px ;
  }

  .unified-card-action-btn--compact .unified-card-action-label {
    font-size: 10px ;
    max-width: 60px ;
  }

  .unified-card-actions-grid {
    gap: 6px;
  }
}

/* ===== SHARING MODAL STYLES ===== */

/* Wide modal dialog for sharing */
.gm-dialog--wide {
  max-width: 800px;
  width: 90vw;
}

/* Sharing container */
.sharing-container {
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding: 0;
}

/* Sharing sections */
.sharing-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.sharing-section-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin: 0;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
}

/* Sharing tabs and options */
.sharing-tabs,
.sharing-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Custom checkbox styling */
.sharing-checkbox {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--card, #f7f7f9);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.sharing-checkbox:hover {
  background: var(--bg-elevated, #ffffff);
  border-color: var(--primary, #2563eb);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.sharing-checkbox input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

.checkmark {
  width: 20px;
  height: 20px;
  background: var(--bg, #ffffff);
  border: 2px solid var(--border, #e5e7eb);
  border-radius: 4px;
  position: relative;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.sharing-checkbox input[type="checkbox"]:checked + .checkmark {
  background: var(--primary, #2563eb);
  border-color: var(--primary, #2563eb);
}

.sharing-checkbox input[type="checkbox"]:checked + .checkmark::after {
  content: 'âœ“';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 12px;
  font-weight: bold;
}

.checkbox-label {
  font-weight: 500;
  color: var(--text);
  flex: 1;
}

.item-count {
  font-size: 0.9rem;
  color: var(--text-secondary, #666);
  background: var(--bg-elevated, #ffffff);
  padding: 4px 8px;
  border-radius: 12px;
  border: 1px solid var(--border, #e5e7eb);
}

/* Preview section */
.sharing-preview {
  background: var(--bg-elevated, #ffffff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 12px;
  overflow: hidden;
  min-height: 200px;
}

.preview-header {
  background: linear-gradient(135deg, var(--primary, #2563eb) 0%, var(--accent, #ff4c8d) 100%);
  color: white;
  padding: 16px 20px;
  text-align: center;
}

.preview-brand {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 4px;
}

.brand-icon {
  font-size: 1.5rem;
}

.brand-name {
  font-size: 1.3rem;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.preview-subtitle {
  font-size: 0.9rem;
  opacity: 0.9;
  font-weight: 500;
}

.preview-content {
  padding: 16px;
  max-height: 300px;
  overflow-y: auto;
}

.preview-placeholder {
  color: var(--text-secondary, #666);
  font-style: italic;
  text-align: center;
  padding: 40px 20px;
}

.preview-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid var(--border, #e5e7eb);
}

.preview-item:last-child {
  border-bottom: none;
}

.preview-item-icon {
  font-size: 1.2rem;
  width: 24px;
  text-align: center;
}

.preview-item-title {
  font-weight: 500;
  color: var(--text);
  flex: 1;
}

.preview-item-rating {
  font-size: 0.9rem;
  color: var(--text-secondary, #666);
}

.preview-section-title {
  font-weight: 600;
  color: var(--text);
  margin: 16px 0 8px 0;
  padding-bottom: 4px;
  border-bottom: 1px solid var(--border, #e5e7eb);
}

.preview-section-title:first-child {
  margin-top: 0;
}

/* Sharing actions */
.sharing-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  padding-top: 16px;
  border-top: 1px solid var(--border, #e5e7eb);
}

/* Share result modal */
.share-result-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.share-result-header {
  text-align: center;
}

.share-result-description {
  color: var(--text-secondary, #666);
  margin: 0;
  line-height: 1.5;
}

.share-result-content {
  position: relative;
}

.share-result-textarea {
  width: 100%;
  min-height: 300px;
  padding: 16px;
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 8px;
  background: var(--bg-elevated, #ffffff);
  color: var(--text);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.4;
  resize: vertical;
  outline: none;
  transition: border-color 0.2s ease;
}

.share-result-textarea:focus {
  border-color: var(--primary, #2563eb);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.share-result-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .gm-dialog--wide {
    width: 95vw;
    max-width: none;
  }
  
  .sharing-container {
    gap: 20px;
  }
  
  .sharing-checkbox {
    padding: 10px 12px;
  }
  
  .sharing-actions,
  .share-result-actions {
    flex-direction: column;
  }
  
  .sharing-actions .btn,
  .share-result-actions .btn {
    width: 100%;
  }
}

/* Dark mode support */
.dark-mode .sharing-checkbox {
  background: var(--card-dark, #2a2a2a);
  border-color: var(--border-dark, #404040);
}

.dark-mode .sharing-checkbox:hover {
  background: var(--bg-elevated-dark, #333333);
  border-color: var(--primary, #2563eb);
}

.dark-mode .checkmark {
  background: var(--bg-dark, #1a1a1a);
  border-color: var(--border-dark, #404040);
}

.dark-mode .item-count {
  background: var(--bg-elevated-dark, #333333);
  border-color: var(--border-dark, #404040);
  color: var(--text-secondary-dark, #999);
}

.dark-mode .sharing-preview {
  background: var(--bg-elevated-dark, #333333);
  border-color: var(--border-dark, #404040);
}

.dark-mode .share-result-textarea {
  background: var(--bg-elevated-dark, #333333);
  border-color: var(--border-dark, #404040);
  color: var(--text-dark, #ffffff);
}

```

## _legacy_v1\www\styles\home.css
```
/* H1: Layout variables - Now using unified card sizing system */
/* Card sizing is now handled by spacing-system.css */

/* === Home Frame Normalization =========================================== */
:root {
  /* Match the app frame's L/R padding. Update in one place if design changes. */
  --home-frame-gutter: 32px;
}

/* Remove upstream caps so Home can actually reach the frame width */
main#panels,
#homeSection,
.home-content {
  box-sizing: border-box;
  width: 100%;
  max-width: none;
}

/* Top-level group wrappers: fill width; zero inner L/R padding (equal specificity to main.css) */
#group-1-your-shows.home-group,
#group-2-community.home-group,
#group-3-for-you.home-group,
#group-4-theaters.home-group,
#group-5-feedback.home-group {
  box-sizing: border-box;
  width: 100%;
  max-width: none;
  margin-left: 0;
  margin-right: 0;
  padding-left: 0;
  padding-right: 0;
}

/* Panel gutter rules moved to home-layout.css */

/* Rail layout rules moved to home-layout.css for proper cascade control */

/* === Your Shows: actions layout (2Ã—2), centered ========================= */
#group-1-your-shows :is(.actions, .card-actions) {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  justify-items: center;
  align-items: center;
  padding: 8px 0;
}
#group-1-your-shows :is(.actions, .card-actions)
  :is(button, [role="button"], a.button) {
  width: 100%;
  min-width: 0;
  justify-content: center;
}
/* === End normalization =================================================== */

/* H1: Page container - Updated for frame normalization */
.home-content {
  /* max-width removed - now handled by frame normalization above */
  margin-inline: auto;
  padding-inline: var(--safe-gutter);
  padding-block: var(--section-gap);
}

/* H1.1: Quote bar positioned between search and tabs */
.quote-bar, #quote-bar {
  margin: 0 0 var(--space-xs) 0; /* H1.1: No gap above, minimal below */
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--space-sm);
  background-color: var(--bg-elevated, #f8f9fa);
  border: 1px solid var(--border, #ddd);
  display: block;
}

/* H1: Home groups - Visual styling only (layout moved to home-layout.css) */
.home-group {
  border-radius: 16px;
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  /* Layout properties moved to home-layout.css */
}

/* H1: Preview rows - Layout moved to home-layout.css */
/* Visual styling only preserved here */

/* H1: Card sizing alignment (use unified vars; do not hardcode px in other files) */
.preview-card,
.unified-card,
.tab-section .list-container .poster-card {
  width: var(--card-w);
  min-width: var(--card-w);
  max-width: var(--card-w);
}
.preview-card-poster,
.unified-card-poster {
  height: var(--card-h);
}

/* H1: Community two-column grid (desktop) / stack (mobile) */
.community-content {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: var(--row-gap);
  align-items: start;
}
@media (max-width: var(--bp-tablet)) {
  .community-content { grid-template-columns: 1fr; } /* H1 */
}

/* H1: Community left video is responsive */
.community-left iframe,
.community-left .video-frame,
.community-left .embed-responsive {
  width: 100%;
  aspect-ratio: 16 / 9;
  height: auto;
  display: block;
}

/* H1: Community right "games" grid */
.community-right #home-games,
.community-right .games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: var(--row-gap);
}

/* H1: Kill legacy width hacks on columns left by old CSS (scoped to home) */
.home-content .left-column,
.home-content .flickword-card {
  width: auto;
  max-width: none;
}

/* H1: Remove any forced order/width from bingeMeter in home */
.home-content #bingeMeter {
  order: 0;
  flex-basis: auto;
  display: block;
}

/* H1.1: home wrapper sizing */
#homeSection.home-content:not([hidden]) {
  display: block;              /* ensure it participates in normal flow */
  min-height: auto;            /* let content determine height naturally */
}
#panels { isolation: isolate; } /* guard against stray transforms creating new stacking/containing blocks */
/* Kill any accidental height caps on home area */
#homeSection { height: auto; max-height: none; overflow: visible; }

/* If a card-ish "page shell" wraps home content and has a shadow, make sure it grows */
#homeSection .page-shell, #homeSection .container, #homeSection .wrapper {
  min-height: 100%; height: auto; overflow: visible;
}

/* H1.1: Normalize vertical rhythm (even spacing between containers) */
/* Section spacing - REMOVED conflicting .home-group padding rule for frame normalization */
.home-content .home-group + .home-group { margin-top: var(--section-gap); }
#quote-bar, .quote-bar { margin: 0 0 var(--section-gap-lg); }

/* Remove legacy extra space from rows */
.home-content .preview-row,
.home-content .home-preview-row { 
  margin: 0; 
  /* Card styling handled by parent .home-group */
}
/* Rail layout rules moved to home-layout.css */

/* Ensure normal flow in the Your Shows group only */
#group-1-your-shows {
  display: block;
}

#group-1-your-shows > .home-preview-row {
  order: 0;
}

/* Style the Up Next row to match Currently Watching */
#group-1-your-shows #up-next-row.home-preview-row {
  margin: 16px 0;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* Currently Watching card actions grid */
.cw-card .action-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
}
.cw-card .action-grid .btn {
  width: 100%;
  min-height: 36px;
  font-weight: 600;
}

/* Next Up compact meta */
.nu-card .meta {
  font-size: 0.9rem;
  opacity: 0.85;
  margin-top: 8px;
}
.nu-card .meta .line { 
  margin-top: 2px; 
}

/* General card bits kept neutral; no TMDB link affordance */
.card .poster-wrap { 
  cursor: default; 
}

/* No surprise giant boxes */
#up-next-row, .up-next-row { min-height: 0; height: auto; }

/* H1.1: Header spacing - override main.css fixed positioning */
#appRoot > header.header, header.header, .header {
  padding: 24px 0;
  margin-bottom: 5px ; /* H1.1: Minimal space between header and search - force override */
  position: static ; /* H1.1: Make header scroll with page - force override */
  z-index: auto ; /* H1.1: Remove high z-index - force override */
  top: auto ; /* H1.1: Remove fixed positioning - force override */
  left: auto ; /* H1.1: Remove fixed positioning - force override */
  right: auto ; /* H1.1: Remove fixed positioning - force override */
  height: 160px ; /* H1.1: Set larger header height - force override */
  width: auto ; /* H1.1: Remove fixed width - force override */
  box-shadow: none ; /* H1.1: Remove fixed header shadow - force override */
  border-bottom: none; /* H1.1: Remove red border */
}

/* H1.1: Search bar sticky behavior */
.top-search, #search-container.top-search {
  position: sticky;
  top: var(--header-h, 120px); /* Stick below header */
  z-index: 1000;
  background-color: var(--bg, #fff);
  border-bottom: 1px solid var(--border, #ddd);
  margin-top: 20px; /* Add space between header and search bar */
  margin-bottom: 0; /* H1.1: Quote bar handles spacing */
}

/* H1.1: Override main.css margin-top: 130px rule with higher specificity */
#appRoot .top-search, #appRoot #search-container.top-search {
  margin-top: 0; /* H1.1: Force override of main.css 130px margin */
}

/* H1.1: Override main-container padding that creates gap between search and quote */
#appRoot.main-container {
  padding-bottom: 0; /* H1.1: Remove padding that creates gap */
}

/* H1.1: Force tabs close to quote bar with higher specificity */
#appRoot #navigation.tab-container, #appRoot .tab-container[role="tablist"] {
  margin-top: 2px; /* H1.1: Force minimal gap to quote bar */
}

/* H1.1: Tabs: even, tab-like, not sticky */
/* Scope to the nav container so we don't touch other tablists */
#navigation.tab-container, .tab-container[role="tablist"], [role="tablist"].tab-container {
  display: flex ; 
  gap: 8px; 
  align-items: flex-end;
  border-bottom: 1px solid var(--border, #ddd);
  padding: 8px 4px; 
  margin: 2px 0 20px 0; /* H1.1: Minimal top margin to quote bar, bottom margin for content */
  position: static ; /* H1.1: Force tabs to scroll with page */
  top: auto ; /* H1.1: Remove any sticky positioning */
  z-index: auto ; /* H1.1: Remove high z-index */
  height: auto ;
  min-height: 40px ;
  visibility: visible ;
  opacity: 1 ;
}
.tab-container [role="tab"], .tab-container .tab {
  display: inline-flex ; 
  align-items: center; 
  justify-content: center;
  padding: 8px 12px;
  border: 1px solid transparent;
  border-bottom: 2px solid transparent;
  border-radius: 8px 8px 0 0;
  min-width: 64px;
  font-weight: 600;
  cursor: pointer;
  height: auto ;
  min-height: 32px ;
  visibility: visible ;
  opacity: 1 ;
}
.tab-container [role="tab"].is-active,
.tab-container [aria-selected="true"],
.tab-container .tab.is-active {
  border-color: var(--border, #ddd);
  border-bottom-color: var(--primary, #2563eb);
  background: var(--bg-elevated, #fff);
  color: var(--text, #111);
}
/* Hover affordance */
.tab-container [role="tab"]:hover,
.tab-container .tab:hover { background: color-mix(in oklab, var(--bg-elevated,#fff) 90%, #000 10% / 6%); }

/* H1.1: Duplicate up-arrow: keep #scrollTopBtn, hide/remove any legacy arrow */
/* Common legacy selectors to neutralize; safe, layout-only */
.legacy-up, .up-arrow, .scroll-to-top, .fab .icon-up, .fab-up { display: none; }

/* H1.1: Guard against some ancestor creating a containing block that clips children */
/* If #appRoot or .panels accidentally has transform/contain set elsewhere, neutralize here */
#appRoot, #appRoot > .panels { transform: none; contain: none; }

/* H1.1: Let app root height be determined by content naturally */
#appRoot {
  height: auto;
  min-height: 100vh;
}


```

## _legacy_v1\www\styles\main.css
```
/* Flicklet - Main CSS Styles */

/* Tab System - Clean [hidden] rule - DOM state wins without shouting */
[hidden] { 
  display: none; 
}

/* Design tokens moved to design-tokens.css */

/* Notification System - Rules Compliant (v28.70+) */
.notification {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ffffff;
  border: 2px solid #3b82f6;
  border-radius: 12px;
  padding: 16px 24px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  z-index: 20000;
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.9);
  transition: all 0.3s ease;
  max-width: 400px;
  text-align: center;
}

.notification--visible {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.notification--success {
  border-color: #10b981;
}

.notification--error {
  border-color: #ef4444;
}

.notification--warning {
  border-color: #f59e0b;
}

.notification--info {
  border-color: #3b82f6;
}

.notification-message {
  font-size: 16px;
  font-weight: 500;
  color: #1f2937;
  margin: 0;
}

/* Quote Bar - Moved to card-system.css for standardization */

/* Home Groups - MOVED to home-layout.css */

/* Placeholder Messages */
.placeholder-message {
  text-align: center;
  color: var(--text-secondary, #666);
  font-style: italic;
  padding: 20px;
  background: var(--card);
  border-radius: 8px;
  border: 2px dashed var(--border);
}

/* Modal Utility Styles */
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  visibility: visible;
  opacity: 1;
}

.modal-content {
  background: white;
  border-radius: 8px;
  padding: 24px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}

.modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #999;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}

.modal-close:hover {
  background: #f5f5f5;
  color: #333;
}

/* Auth Modal Styles - Phase B: Class-based visibility */
.auth-modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999999; /* Highest z-index to ensure it's above everything */
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.auth-modal-backdrop.is-active {
  display: flex;
  opacity: 1;
  visibility: visible;
}

.auth-modal-content {
  background: white;
  border-radius: 12px;
  padding: 24px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  border: 3px solid #1976d2;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
  transform: scale(0.9) translateY(20px);
  transition: all 0.3s ease;
}

.auth-modal-backdrop.is-active .auth-modal-content {
  transform: scale(1) translateY(0);
}

.auth-modal-content h2 {
  margin: 0 0 16px;
  font-size: 20px;
  font-weight: 600;
  color: #1976d2;
  text-align: center;
}

.auth-modal-content p {
  margin: 0 0 20px;
  color: #666;
  text-align: center;
}

.auth-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.auth-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: background-color 0.2s;
}

.auth-button--google {
  background: #4285f4;
  color: white;
}

.auth-button--google:hover {
  background: #3367d6;
}

.auth-button--apple {
  background: #000;
  color: white;
}

.auth-button--apple:hover {
  background: #333;
}

.auth-button--email {
  background: #f5f5f5;
  color: #333;
  border: 1px solid #ddd;
}

.auth-button--email:hover {
  background: #e8e8e8;
}

.auth-button--primary {
  background: #1976d2;
  color: white;
}

.auth-button--primary:hover {
  background: #1565c0;
}

.auth-button--cancel {
  background: #f5f5f5;
  color: #333;
  border: 1px solid #ddd;
}

.auth-button--cancel:hover {
  background: #e8e8e8;
}

.auth-button--danger {
  background: #dc2626;
  color: white;
}

.auth-button--danger:hover {
  background: #b91c1c;
}

/* Signout Modal - Matches auth modal design */
.signout-modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 20000; /* Same as auth modal */
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.signout-modal-backdrop.is-active {
  display: flex;
  opacity: 1;
  visibility: visible;
}

.signout-modal {
  background: white;
  border-radius: 12px;
  padding: 32px;
  max-width: 400px;
  width: 100%;
  box-shadow:
    0 20px 25px -5px rgba(0, 0, 0, 0.1),
    0 10px 10px -5px rgba(0, 0, 0, 0.04);
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}

.signout-modal h2 {
  margin: 0 0 8px 0;
  font-size: 24px;
  font-weight: 600;
  color: #1f2937;
  text-align: center;
}

.signout-modal p {
  margin: 0 0 24px 0;
  color: #6b7280;
  text-align: center;
  font-size: 14px;
}

/* Mobile responsive for modals */
@media (max-width: var(--bp-mobile)) {
  .auth-modal-content,
  .signout-modal {
    margin: 16px;
    padding: 24px;
    max-width: none;
  }

  .auth-modal-content h2,
  .signout-modal h2 {
    font-size: 20px;
  }
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 20px;
}

/* Email Modal Styles */
.email-modal .form-group {
  margin-bottom: 16px;
}

.email-modal .form-group:last-of-type {
  margin-bottom: 20px;
}

.email-modal label {
  display: block;
  margin-bottom: 4px;
  font-weight: 500;
  color: #333;
}

.email-modal input {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
  box-sizing: border-box;
}

.email-modal input:focus {
  outline: none;
  border-color: #1976d2;
  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
}

.error-message {
  color: #d32f2f;
  margin-bottom: 16px;
  font-size: 14px;
}

.form-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

/* Badge System - Replaces JS style mutations */
.tab-badge {
  display: inline-block ;
  visibility: visible ;
  opacity: 1 ;
  font-size: var(--badge-font-size) ;
  background-color: var(--badge-bg) ;
  color: var(--badge-color) ;
  padding: var(--badge-padding) ;
  border-radius: var(--badge-border-radius) ;
  margin-left: var(--badge-margin-left) ;
  font-weight: var(--badge-font-weight) ;
  min-width: var(--badge-min-width) ;
  text-align: center ;
  line-height: var(--badge-line-height) ;
  position: relative ;
  z-index: var(--badge-z-index) ;
}

.tab-badge--hidden {
  display: none ;
}

.tab-badge--visible {
  display: inline-block ;
}

/* Left Snark Styling */
.left-snark {
  font-size: 16px;
  color: var(--text-secondary, #666);
  font-style: italic;
  text-align: left;
  margin: 4px 0;
  pointer-events: none;
  z-index: auto;
  font-weight: 500;
}

/* Provider Modal Styling */
.modal-backdrop {
  z-index: 10000 ;
}

.modal-backdrop .modal-content {
  z-index: 10001 ;
}

/* Feedback Card */
.feedback-card {
  background: var(--card);
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.feedback-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
  flex-wrap: wrap;
  max-width: 100%;
}

/* Responsive adjustments */
@media (max-width: var(--bp-mobile-lg)) {
  /* Home group layout moved to home-layout.css */

  .feedback-actions {
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }
}

* {
  box-sizing: border-box;
}

html,
body {
  height: var(--body-height);
}

body {
  font-family:
    Inter,
    system-ui,
    -apple-system,
    'Segoe UI',
    Roboto,
    Arial,
    sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  margin: 0;
  padding: 20px;
  color: var(--text);
  line-height: 1.5;
  min-height: var(--app-root-min-height);
  overflow-x: var(--app-root-overflow-x);
  /* Ensure sticky positioning works */
  overflow-y: var(--app-root-overflow-y);
  /* Reserve space so content isn't covered by floating buttons */
  padding-bottom: calc(env(safe-area-inset-bottom) + 120px);
}

.dark-mode {
  --bg: #1a1a1a;
  --text: #f5f5f5;
  --card: #2a2a2a;
  --surface: #1e1e1e;
  --s-4: 1rem;
  --r-2: 8px;
  --fs-0: 1rem;
  --shadow-1: 0 2px 4px rgba(0, 0, 0, 0.3);
  --border: #404040;
  --text-secondary: #b0b0b0;
  background: #ffffff; /* Override dark gradient with white */
}

.dark-mode .main-container {
  background: var(--bg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.dark-mode .top-search {
  background: var(--bg);
  border-color: var(--border);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
}

.dark-mode .tab-container {
  background: transparent;
  border-bottom-color: var(--border);
}

/* Dark mode tab styling */
.dark-mode .tab {
  color: var(--text-muted) ;
  background: transparent ;
}

.dark-mode .tab:hover {
  background: rgba(255, 255, 255, 0.1) ;
  color: var(--text) ;
}

.dark-mode .tab.is-active {
  background: transparent ;
  color: var(--text) ;
  border-bottom-color: var(--primary) ;
}

/* Dark mode section titles and headers */
.dark-mode .section-title,
.dark-mode .preview-row-title,
.dark-mode h2,
.dark-mode h3 {
  color: var(--text) ;
}

.dark-mode .preview-row-header h3 {
  color: var(--text) ;
}

/* Dark mode text elements */
.dark-mode .tab-badge {
  color: var(--text) ;
  background: rgba(255, 255, 255, 0.2) ;
}

.dark-mode .count {
  color: var(--text-secondary) ;
}

/* COMPREHENSIVE GLOBAL DARK MODE THEME */
/* Universal text color inheritance - fixes ALL text readability issues */
.dark-mode * {
  color: inherit ;
}

/* FORCE LIGHT THEME - Reset all colors to readable defaults */
:root {
  --bg: #ffffff ;
  --text: #1f2937 ;
  --fg: #1f2937 ;
  --fg-default: #1f2937 ;
  --fg-muted: #6b7280 ;
  --fg-subtle: #7f8c8d ;
  --fg-on-elevated: #111827 ;
  --text-secondary: #666 ;
  --card: #ffffff ;
  --border: #e5e7eb ;
  
  /* Spacing tokens for vertical rhythm */
  --stack: 16px;
  --stack-sm: 12px;
}

/* Home preview row wrappers - MOVED to home-layout.css */

/* Tab state management - home-only elements */
.home-only {
  display: none;
}

.tab-home .home-only {
  display: block;
}

/* Search visibility control - REMOVED: handled by tab activation system */

/* PART2A: Container-aware FAB positioning */
:root {
  --container-max: 1200px; /* tune if you use a different max */
  --container-pad: 16px;
  --fab-gap: 16px;
  --fab-size: 56px;
  --accent: #2563eb ;
  --primary: #e91e63 ;
  --surface: #f9f9f9 ;
  --bg-page: #ffffff ;
  --bg-elevated: #f7f7f9 ;
}

/* Force light theme on body */
body {
  background: #ffffff ;
  color: #1f2937 ;
}

/* Override any dark mode classes */
.dark-mode,
[data-theme="dark"],
[data-theme="mardi"] {
  --bg: #ffffff ;
  --text: #1f2937 ;
  --fg: #1f2937 ;
  --fg-default: #1f2937 ;
  --fg-muted: #6b7280 ;
  --fg-subtle: #7f8c8d ;
  --fg-on-elevated: #111827 ;
  --text-secondary: #666 ;
  --card: #ffffff ;
  --border: #e5e7eb ;
  --accent: #2563eb ;
  --primary: #e91e63 ;
  --surface: #f9f9f9 ;
  --bg-page: #ffffff ;
  --bg-elevated: #f7f7f9 ;
  background: #ffffff ;
  color: #1f2937 ;
}

/* Fix specific containers that use dark CSS variables */
.dark-mode .main-container,
.dark-mode .home-group,
.dark-mode .preview-card,
.dark-mode .unified-card,
.dark-mode .list-container {
  background: #ffffff;
}

/* FORCE TAB VISIBILITY - Ensure tabs are always visible */
.tab-container,
#navigation,
[role="tablist"] {
  display: flex;
  visibility: visible;
  opacity: 1;
  position: sticky;
  top: var(--header-h);
  z-index: 100;
  background: #ffffff;
  border-bottom: 1px solid #e5e7eb;
  height: 48px;
  margin: 0;
  padding: 0;
}

.tab-container .tab,
#navigation .tab,
[role="tablist"] .tab {
  display: flex;
  visibility: visible;
  opacity: 1;
  color: #1f2937;
  background: transparent;
  border: none;
  padding: 12px 16px;
  margin: 0;
  flex: 1 1 0;
  min-height: 44px;
  align-items: center;
  justify-content: center;
}

/* OVERRIDE SEARCH HIDING - Force tabs to always be visible */
.tab-container,
#navigation,
[role="tablist"] {
  display: flex;
  visibility: visible;
  opacity: 1;
  position: sticky;
  top: var(--header-h);
  z-index: 100;
  background: #ffffff;
  border-bottom: 1px solid #e5e7eb;
  height: 48px;
  margin: 0;
  padding: 0;
}

/* Handle .hidden class on tabs - simplified without  */
.tab.hidden {
  display: none;
}

/* Override any search-related hiding */
body.has-search .tab-container,
body.has-search #navigation,
body.has-search [role="tablist"],
#appRoot.has-search .tab-container,
#appRoot.has-search #navigation,
#appRoot.has-search [role="tablist"] {
  display: flex;
  visibility: visible;
  opacity: 1;
}

/* Base text elements */
.dark-mode body,
.dark-mode html {
  color: var(--text) ;
  background: #ffffff; /* Force white background */
}

/* All text elements inherit proper colors */
.dark-mode p,
.dark-mode span,
.dark-mode div,
.dark-mode h1,
.dark-mode h2,
.dark-mode h3,
.dark-mode h4,
.dark-mode h5,
.dark-mode h6,
.dark-mode a,
.dark-mode li,
.dark-mode td,
.dark-mode th,
.dark-mode label,
.dark-mode input,
.dark-mode textarea,
.dark-mode select {
  color: var(--text) ;
}

/* Secondary text elements */
.dark-mode .text-secondary,
.dark-mode .subtitle,
.dark-mode .description,
.dark-mode .meta,
.dark-mode .caption {
  color: var(--text-secondary) ;
}

/* Container backgrounds */
.dark-mode .container,
.dark-mode .wrapper,
.dark-mode .content,
.dark-mode .main,
.dark-mode .panel,
.dark-mode .box {
  background: var(--card) ;
  color: var(--text) ;
}

/* Row and scroll containers */
.dark-mode .row-inner,
.dark-mode .preview-row-container,
.dark-mode .scroll-container,
.dark-mode .list-container {
  color: var(--text) ;
}

/* COMPREHENSIVE OVERRIDE - Force all elements to use theme colors */
.dark-mode [style*='color'] {
  color: var(--text) ;
}

.dark-mode [style*='background'] {
  background: var(--card) ;
}

/* Specific overrides for common problematic elements */
.dark-mode .loading,
.dark-mode .error,
.dark-mode .success,
.dark-mode .info,
.dark-mode .warning {
  color: var(--text) ;
}

/* Form elements */
.dark-mode input[type='text'],
.dark-mode input[type='email'],
.dark-mode input[type='password'],
.dark-mode textarea {
  background: var(--card) ;
  color: var(--text) ;
  border-color: var(--border) ;
}

/* Links and interactive elements */
.dark-mode a {
  color: var(--accent) ;
}

.dark-mode a:hover {
  color: var(--text) ;
}

/* Movie card content - specific overrides for visible elements */
.dark-mode .movie-card,
.dark-mode .show-card,
.dark-mode .card-content,
.dark-mode .card-description,
.dark-mode .card-title,
.dark-mode .card-meta {
  color: var(--text) ;
}

.dark-mode .card-description {
  color: var(--text-secondary) ;
}

/* Theater section specific styling */
.dark-mode .theaters-near-me,
.dark-mode .theater-section,
.dark-mode .theater-content {
  background: var(--card) ;
  color: var(--text) ;
}

.dark-mode .theater-description {
  color: var(--text-secondary) ;
}

/* Movie overview descriptions - specific fix for now playing cards */
.dark-mode .movie-overview {
  color: var(--text-secondary) ;
}

.dark-mode .show-overview {
  color: var(--text-secondary) ;
}

/* Movie card elements - complete styling */
.dark-mode .movie-title {
  color: var(--text) ;
}

/* Additional title classes that might be used */
.dark-mode .card__title,
.dark-mode .card-title,
.dark-mode .show-title,
.dark-mode .preview-card-title {
  color: var(--text) ;
}

.dark-mode .movie-meta {
  color: var(--text) ;
}

.dark-mode .movie-rating {
  color: var(--text) ;
}

.dark-mode .movie-release {
  color: var(--text-secondary) ;
}

.dark-mode .search-input,
.dark-mode .genre-filter {
  background: var(--card);
  color: var(--text);
  border-color: var(--border);
}

.dark-mode .search-input:focus,
.dark-mode .genre-filter:focus {
  box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
}

.dark-mode .search-help {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
  color: var(--text-secondary);
}

.dark-mode .flickword-card {
  background: var(--card);
  border-color: var(--border);
}

.dark-mode .list-container {
  background: var(--card);
  border-color: var(--border);
}

/* MP-2.1: fence legacy card rules to desktop to avoid mobile collisions */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .dark-mode .show-card {
    background: var(--card);
    border-color: var(--border);
  }
}

.mardi .header {
  border-color: var(--mardi3) ;
}

.mardi .btn {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
}

.mardi .tab {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: #fff ;
}

body.mardi {
  background: linear-gradient(135deg, var(--mardi1), var(--mardi2)) ;
}

/* Mardi Gras Settings Tabs Styling */
.mardi .settings-tabs button {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
}

.mardi .settings-tabs button:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05) ;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

.mardi .settings-tabs button.active {
  background: linear-gradient(45deg, var(--mardi2), var(--mardi1)) ;
  border-color: var(--mardi3) ;
  box-shadow: 0 0 10px var(--mardi3) ;
}

/* Mardi Gras Settings Sections */
.mardi .settings-section {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  border: 2px solid var(--mardi2) ;
  border-radius: 10px ;
}

/* Mardi Gras Main Tabs */
.mardi .tab-container .tab {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
}

.mardi .tab-container .tab:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05); /* PART2C */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

.mardi .tab-container .tab.is-active {
  background: linear-gradient(45deg, var(--mardi2), var(--mardi1)) ;
  border-color: var(--mardi3) ;
  box-shadow: 0 0 10px var(--mardi3) ;
}

/* Mardi Gras Cards */
.mardi .card {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  border: 2px solid var(--mardi2) ;
  border-radius: 10px ;
}

.mardi .card:hover {
  border-color: var(--mardi3) ;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

/* Mardi Gras Buttons */
.mardi .btn.primary {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
}

.mardi .btn.primary:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05) ;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

/* Mardi Gras Game Boxes (FlickWord & Daily Trivia) */
.mardi .game-box {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.15), rgba(40, 167, 69, 0.15)) ;
  border: 3px solid var(--mardi2) ;
  border-radius: 15px ;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;
}

.mardi .game-box:hover {
  border-color: var(--mardi3) ;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3) ;
  transform: translateY(-2px) ;
}

.mardi .game-title {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  -webkit-background-clip: text ;
  -webkit-text-fill-color: transparent ;
  background-clip: text ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) ;
}

.mardi .game-play-btn {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
  border-radius: 8px ;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) ;
}

.mardi .game-play-btn:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05) ;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) ;
}

.mardi .game-stats {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  border: 1px solid var(--mardi2) ;
  border-radius: 8px ;
}

.mardi .stat-value {
  color: var(--mardi1) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2) ;
}

/* Mardi Gras FlickWord Card */
.mardi .flickword-card {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  border: 3px solid var(--mardi2) ;
  border-radius: 15px ;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;
}

.mardi .flickword-card:hover {
  border-color: var(--mardi3) ;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3) ;
  transform: translateY(-2px) ;
}

.mardi .flickword-title {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  -webkit-background-clip: text ;
  -webkit-text-fill-color: transparent ;
  background-clip: text ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) ;
}

.mardi .flickword-actions .btn {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
}

.mardi .flickword-actions .btn:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05) ;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

/* Mardi Gras Trivia Elements */
.mardi .trivia-card {
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  border: 3px solid var(--mardi2) ;
  border-radius: 15px ;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) ;
}

.mardi .trivia-card:hover {
  border-color: var(--mardi3) ;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3) ;
}

.mardi .trivia-head h2 {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  -webkit-background-clip: text ;
  -webkit-text-fill-color: transparent ;
  background-clip: text ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) ;
}

.mardi .trivia-choices li {
  border: 2px solid var(--mardi2) ;
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.05), rgba(40, 167, 69, 0.05)) ;
}

.mardi .trivia-choices li:hover {
  border-color: var(--mardi3) ;
  background: linear-gradient(135deg, rgba(106, 13, 173, 0.1), rgba(40, 167, 69, 0.1)) ;
  transform: scale(1.02) ;
}

.mardi .trivia-actions .btn {
  background: linear-gradient(45deg, var(--mardi1), var(--mardi3)) ;
  color: white ;
  border: 2px solid var(--mardi2) ;
  font-weight: bold ;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) ;
}

.mardi .trivia-actions .btn:hover {
  background: linear-gradient(45deg, var(--mardi3), var(--mardi1)) ;
  transform: scale(1.05) ;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) ;
}

.main-container {
  max-width: var(--page-max, 1200px);
  margin: 0 auto;
  background: var(--bg);
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  animation: containerSlideIn 0.8s ease-out;
  position: relative;
}

@keyframes containerSlideIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.header {
  border-bottom: none;
  padding: 24px 0;
  margin-bottom: 12px;
  height: 160px;
  animation: headerFadeIn 0.6s ease-out;
}

.header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 20px 24px; /* Increased padding for more spacious header */
}

.header-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  justify-self: center;
}

.user-section {
  justify-self: end;
}

@keyframes headerFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.header-left {
  flex: 1;
  max-width: 600px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.title {
  margin: 0;
  font-size: 2.1rem;
  color: var(--primary);
  font-weight: 800;
  letter-spacing: 0.2px;
}

.subtitle {
  margin: 2px 0 8px;
  color: #8a8a98;
  font-weight: 600;
}

.user-section {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

#langToggle {
  padding: 8px 10px;
  border-radius: 14px;
  border: 2px solid var(--border);
  background: var(--card);
  color: var(--text);
  font-weight: 700;
}

/* Mobile Header Layout - Hidden by default on desktop */
.mobile-header-layout {
  display: none;
}

/* Rating display styles for new card layout */
.star-display {
  color: #ddd;
  font-size: 1.1rem;
  transition: color 0.2s ease;
}

.star-display.active {
  color: #ffd43b;
}

.like-display,
.dislike-display {
  font-size: 1.1rem;
  opacity: 0.3;
  transition: opacity 0.2s ease;
}

.like-display.active,
.dislike-display.active {
  opacity: 1;
}

.rating-info {
  border: 1px solid var(--border);
}

/* Currently Watching Preview Row Styles - MOVED to home-layout.css */
/* Layout rules now handled by token-driven system */

.preview-row-header {
  margin-bottom: 8px;
}

.preview-row-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}

.preview-row-header .section-subtitle {
  margin: 4px 0 0 0;
  font-size: 0.9rem;
  color: var(--text-secondary);
  font-weight: 400;
}

.preview-row-container {
  overflow: hidden;
}

/* .preview-row-scroll layout rules moved to home-layout.css */

.preview-row-scroll::-webkit-scrollbar {
  height: 8px;
}

.preview-row-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.preview-row-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

.preview-card {
  flex: 0 0 var(--card-w); /* H1 - using unified card sizing */
  background: var(--bg);
  border-radius: 6px;
  border: 1px solid var(--border);
  overflow: hidden;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
  cursor: pointer;
  position: relative;
  display: flex ;
  flex-direction: column ;
  height: auto ;
  width: var(--card-w) ;
}

.preview-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.preview-card-poster {
  width: var(--card-w); /* H1 - using unified card sizing */
  height: var(--card-h); /* H1 - using unified card sizing */
  background: var(--border);
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}

.preview-card-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.preview-card-poster-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--border);
}

.preview-card-content {
  padding: 4px 6px ;
  flex: 1;
  display: flex ;
  flex-direction: column ;
  justify-content: center;
  min-width: 0;
  overflow: hidden;
}

.preview-card-title {
  font-size: 0.65rem ;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 1px 0 ;
  line-height: 1.1 ;
  display: -webkit-box;
  -webkit-line-clamp: 1 ;
  line-clamp: 1 ;
  -webkit-box-orient: vertical;
  overflow: hidden;
  white-space: nowrap;
}

.preview-card-year {
  font-size: 0.55rem ;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1 ;
}

.preview-card-status {
  position: absolute;
  top: 2px;
  right: 2px;
  background: var(--success);
  color: white;
  padding: 1px 4px ;
  border-radius: 4px ;
  font-size: 0.5rem ;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.2px;
}

.preview-card-actions {
  position: absolute;
  top: 2px;
  left: 2px;
  opacity: 0;
  transition: opacity 0.2s ease;
  display: flex;
  gap: 1px;
}

.preview-card:hover .preview-card-actions {
  opacity: 1;
}

.preview-action-btn {
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border: none;
  border-radius: 2px ;
  padding: 1px 2px ;
  font-size: 0.5rem ;
  cursor: pointer;
  transition: background 0.2s ease;
  min-width: 16px ;
  height: 16px ;
  display: flex;
  align-items: center;
  justify-content: center;
}

.preview-action-btn:hover {
  background: rgba(0, 0, 0, 0.9);
}

/* Dark mode adjustments for preview row - MOVED to home-layout.css */

.dark-mode .preview-card {
  background: var(--bg);
  border-color: var(--border);
}

.dark-mode .preview-card-poster {
  background: var(--border);
}

/* === UNIFIED CARD SYSTEM ===
   Unified card component for Home and Curated sections
   Desktop: 184px width, 276px height (2:3 aspect ratio)
   Mobile: 64px width, 96px height (2:3 aspect ratio)
   Features: 3 large labeled buttons, skeleton loader, branded placeholder
*/

/* Unified Card Base Styles */
.unified-card {
  flex: 0 0 var(--card-w); /* H1 - using unified card sizing */
  background: var(--bg);
  border-radius: 8px;
  border: 1px solid var(--border);
  overflow: hidden;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
  position: relative;
  display: flex ;
  flex-direction: column ;
  height: auto ;
  width: var(--card-w) ;
}

/* Detail variant for tabs - horizontal layout */
.unified-card--detail {
  flex-direction: row ;
  width: 100% ;
  max-width: 600px;
  min-width: 400px;
  height: 180px ;
  margin: 0 ;
}

.unified-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Poster Area */
.unified-card-poster {
  width: var(--card-w); /* H1 - using unified card sizing */
  height: var(--card-h); /* H1 - using unified card sizing */
  background: var(--border);
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
}

/* Detail variant poster - left side */
.unified-card--detail .unified-card-poster {
  width: 120px ;
  height: 180px ;
  flex-shrink: 0 ;
  border-radius: 0 ;
}

.unified-card-poster-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.unified-card-poster-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Skeleton Loader */
.unified-card-poster-skeleton {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Branded Placeholder */
.unified-card-poster-brand {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 2rem;
  color: var(--text-secondary);
  z-index: 2;
}

.unified-card-poster-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Action Buttons */
.unified-card-actions {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.3s ease;
  padding: 12px;
}

.unified-card:hover .unified-card-actions {
  opacity: 1;
}

/* Detail variant actions - right side */
.unified-card--detail .unified-card-actions {
  position: static;
  background: transparent;
  padding: 8px 0;
  opacity: 1;
  flex-direction: column;
  gap: 8px;
  align-items: stretch;
  justify-content: flex-start;
}

.unified-card-action-btn {
  background: rgba(255, 255, 255, 0.9);
  color: var(--text);
  border: none;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 120px;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.unified-card-action-btn:hover {
  background: rgba(255, 255, 255, 1);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.unified-card-action-btn:active {
  transform: translateY(0);
}

.unified-card-action-icon {
  font-size: 0.9rem;
}

.unified-card-action-label {
  font-size: 0.7rem;
  white-space: nowrap;
}

/* Content Area */
.unified-card-content {
  padding: 8px 6px;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 0;
  overflow: hidden;
  text-align: center;
}

/* Detail variant content - right side */
.unified-card--detail .unified-card-content {
  flex: 1;
  padding: 16px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-width: 0;
  overflow: hidden;
  text-align: left;
}

.unified-card-title {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 2px 0;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-align: center;
}

/* Detail variant title - larger */
.unified-card--detail .unified-card-title {
  font-size: 18px ;
  font-weight: 600 ;
  margin: 0 0 8px 0 ;
  line-height: 1.3 ;
  display: block;
  -webkit-line-clamp: initial;
  line-clamp: initial;
  -webkit-box-orient: initial;
  overflow: visible;
  text-align: left;
}

.unified-card-subtitle {
  font-size: 0.6rem;
  color: var(--text-secondary);
  margin: 0 0 4px 0;
  line-height: 1;
  text-align: center;
}

.unified-card-rating {
  font-size: 0.6rem;
  color: var(--accent);
  text-align: center;
  margin: 0;
}

/* Detail variant rating input */
.unified-card-rating-input {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 8px 0;
}

.unified-card-rating-input label {
  font-size: 0.8rem;
  color: var(--text-secondary);
  font-weight: 500;
}

.unified-card-rating-select {
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--bg);
  color: var(--text);
  font-size: 0.8rem;
  min-width: 120px;
}

/* Detail variant notes */
.unified-card-notes {
  margin: 8px 0;
}

.unified-card-notes label {
  display: block;
  font-size: 0.8rem;
  color: var(--text-secondary);
  font-weight: 500;
  margin-bottom: 4px;
}

.unified-card-note-input {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--bg);
  color: var(--text);
  font-size: 0.8rem;
  resize: vertical;
  min-height: 40px;
  font-family: inherit;
}

/* Pro action buttons */
.unified-card-action-btn--pro {
  background: linear-gradient(135deg, #ff6b6b, #ff8e8e) ;
  color: white ;
  border: 1px solid #ff6b6b ;
}

.unified-card-action-btn--pro:hover {
  background: linear-gradient(135deg, #ff5252, #ff7979) ;
}

/* Danger action buttons */
.unified-card-action-btn--danger {
  background: rgba(220, 53, 69, 0.9) ;
  color: white ;
}

.unified-card-action-btn--danger:hover {
  background: rgba(200, 35, 51, 0.95) ;
}

/* Episode Tracking Modal */
.episode-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.episode-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  cursor: pointer;
}

.episode-modal-dialog {
  position: relative;
  background: var(--bg);
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow: hidden;
}

.episode-modal-header {
  padding: 20px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.episode-modal-header h3 {
  margin: 0;
  color: var(--text);
  font-size: 1.2rem;
}

.episode-modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.episode-modal-close:hover {
  color: var(--text);
}

.episode-modal-body {
  padding: 20px;
}

.episode-progress {
  margin-bottom: 20px;
}

.episode-progress label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  color: var(--text);
}

.episode-select {
  width: 100%;
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
  color: var(--text);
  font-size: 1rem;
}

.episode-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.episode-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.episode-btn--primary {
  background: var(--primary);
  color: white;
}

.episode-btn--primary:hover {
  background: var(--primary-dark);
}

.episode-btn--secondary {
  background: var(--border);
  color: var(--text);
}

.episode-btn--secondary:hover {
  background: var(--text-secondary);
  color: white;
}

/* Back to Top Button */
.back-to-top {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transform: translateY(20px);
  pointer-events: none; /* Safe default: not interactive when invisible */
}

.back-to-top.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  pointer-events: auto; /* Interactive when visible */
}

.back-to-top:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

@media (max-width: var(--bp-mobile-lg)) {
  .back-to-top {
    bottom: 15px;
    right: 15px;
    width: 45px;
    height: 45px;
    font-size: 1rem;
  }
}

/* Drag and Drop Styles */
.unified-card.draggable {
  cursor: grab;
  transition: all 0.2s ease;
}

.unified-card.draggable:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.unified-card.dragging {
  opacity: 0.5;
  transform: rotate(5deg);
  cursor: grabbing;
  z-index: 1000;
}

.unified-card.drag-over {
  border: 2px dashed var(--primary);
  background: rgba(var(--primary-rgb), 0.1);
}

.unified-card.drag-over::before {
  content: 'Drop here';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--primary);
  color: white;
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
  z-index: 1001;
  pointer-events: none;
}

/* Mobile Adjustments */
@media (max-width: var(--bp-mobile-lg)) {
  .unified-card {
    width: var(--card-w-mobile); /* H1 - using unified mobile card sizing */
    max-width: var(--card-w-mobile); /* H1 - using unified mobile card sizing */
    min-width: var(--card-w-mobile); /* H1 - using unified mobile card sizing */
  }

  .unified-card-poster {
    width: var(--card-w-mobile); /* H1 - using unified mobile card sizing */
    height: var(--card-h-mobile); /* H1 - using unified mobile card sizing */
  }

  .unified-card-actions {
    padding: 8px;
    gap: 6px;
  }

  .unified-card-action-btn {
    padding: 6px 8px;
    font-size: 0.65rem;
    min-width: 80px;
  }

  .unified-card-action-label {
    font-size: 0.6rem;
  }

  .unified-card-title {
    font-size: 0.65rem;
  }

  .unified-card-subtitle {
    font-size: 0.55rem;
  }

  .unified-card-rating {
    font-size: 0.55rem;
  }

  /* Detail variant mobile adjustments */
  .unified-card--detail {
    flex-direction: column ;
    max-width: none ;
    min-width: auto ;
    width: 100% ;
    height: auto ;
  }

  .unified-card--detail .unified-card-poster {
    width: 80px ;
    height: 120px ;
    align-self: center ;
    margin-bottom: 12px ;
  }

  .unified-card--detail .unified-card-content {
    padding: 12px ;
    text-align: center ;
  }

  .unified-card--detail .unified-card-title {
    font-size: 16px ;
  }

  .unified-card--detail .unified-card-actions {
    justify-content: center ;
    flex-wrap: wrap ;
  }
}

/* Dark Mode Adjustments */
.dark-mode .unified-card {
  background: var(--card);
  border-color: var(--border);
}

.dark-mode .unified-card-poster {
  background: var(--border);
}

.dark-mode .unified-card-poster-placeholder {
  background: var(--border);
}

.dark-mode .unified-card-actions {
  background: rgba(0, 0, 0, 0.85);
}

.dark-mode .unified-card-action-btn {
  background: rgba(255, 255, 255, 0.9);
  color: var(--text);
}

.dark-mode .unified-card-action-btn:hover {
  background: rgba(255, 255, 255, 1);
}

/* === Currently Watching (STANDARD HOME PAGE CARD SIZE) ===
   This is the standard card size for all home page sections.
   Desktop: 184px width, 276px height (2:3 aspect ratio)
   Mobile: 64px width, 96px height (2:3 aspect ratio)
   Use these dimensions for all home page card sections.
*/

/* Card dimensions moved to design-tokens.css */

/* Aspect ratio enforcement to prevent CLS */
.show-poster,
.poster-placeholder,
.preview-card-poster,
.preview-card-poster img {
  aspect-ratio: 2 / 3;
  object-fit: cover;
}

/* Ensure aspect ratio is maintained during loading */
.show-poster[src=''],
.poster-placeholder:empty {
  aspect-ratio: 2 / 3;
  background: var(--border);
}

/* Scroll indicators for horizontal carousels */
.preview-row-scroll {
  position: relative;
}

.preview-row-scroll::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 30px;
  height: 100%;
  background: linear-gradient(to left, var(--bg) 0%, transparent 100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.preview-row-scroll.scrollable::after {
  opacity: 1;
}

/* Left scroll indicator */
.preview-row-scroll::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 30px;
  height: 100%;
  background: linear-gradient(to right, var(--bg) 0%, transparent 100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.preview-row-scroll.scrollable-left::before {
  opacity: 1;
}

/* Scroll indicator dots */
.scroll-indicators {
  display: flex;
  justify-content: center;
  gap: 4px;
  margin-top: 8px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.preview-row-container:hover .scroll-indicators {
  opacity: 1;
}

.scroll-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--border);
  cursor: pointer;
  transition: background 0.2s ease;
}

.scroll-dot.active {
  background: var(--primary);
}

.scroll-dot:hover {
  background: var(--accent);
}

/* === TAB CARDS HORIZONTAL LAYOUT ===
   Desktop: Horizontal layout (poster left, content right)
   Mobile: Vertical layout (poster top, content below)
   Design Spec: 120px Ã— 180px poster (desktop), 80px Ã— 120px (mobile)
*/

/* Tab section list containers - horizontal scrolling */
.tab-section .list-container {
  display: flex;
  flex-direction: row;
  gap: 16px;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  padding: 16px;
  align-items: stretch;
  scroll-behavior: smooth;
}

/* Scroll indicators for tab sections */
.tab-section .list-container::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 30px;
  height: 100%;
  background: linear-gradient(to left, var(--bg) 0%, transparent 100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.tab-section .list-container.scrollable::after {
  opacity: 1;
}

/* Left scroll indicator */
.tab-section .list-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 30px;
  height: 100%;
  background: linear-gradient(to right, var(--bg) 0%, transparent 100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.tab-section .list-container.scrollable-left::before {
  opacity: 1;
}

/* Individual tab cards - horizontal layout on desktop */
.tab-section .list-container .poster-card {
  flex: 0 0 auto;
  width: 100%;
  max-width: 600px;
  min-width: 400px;
  display: flex ;
  flex-direction: row ;
  height: auto ;
  margin: 0 ;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.2s ease;
}

/* Tab card poster section - left side on desktop */
.tab-section .list-container .poster-card .poster-card__poster {
  width: var(--tab-card-poster-width-desktop) ;
  height: var(--tab-card-poster-height-desktop) ;
  flex-shrink: 0 ;
  border-radius: 0 ;
  overflow: hidden;
  aspect-ratio: 2 / 3;
}

/* Tab card content section - right side on desktop */
.tab-section .list-container .poster-card .poster-card__content {
  flex: 1 ;
  padding: 16px ;
  display: flex ;
  flex-direction: column ;
  justify-content: space-between;
  min-width: 0;
  overflow: hidden;
}

/* Tab card title - larger for horizontal layout */
.tab-section .list-container .poster-card .poster-card__title {
  font-size: 18px ;
  font-weight: 600 ;
  margin: 0 0 8px 0 ;
  line-height: 1.3 ;
  color: var(--text) ;
}

/* Tab card meta information */
.tab-section .list-container .poster-card .poster-card__meta {
  font-size: 14px ;
  color: var(--text-secondary) ;
  margin: 0 0 12px 0 ;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Tab card rating - larger for horizontal layout */
.tab-section .list-container .poster-card .poster-card__rating {
  margin: 0 0 12px 0 ;
  font-size: 16px ;
}

/* Tab card actions - bottom aligned */
.tab-section .list-container .poster-card .poster-card__actions {
  margin-top: auto ;
  display: flex ;
  justify-content: space-between ;
  align-items: center ;
  gap: 12px ;
}

/* Tab card move buttons */
.tab-section .list-container .poster-card .poster-card__move-buttons {
  display: flex ;
  gap: 8px ;
  flex-wrap: wrap ;
}

/* Tab card move button styling */
.tab-section .list-container .poster-card .poster-card__move-buttons button {
  padding: 6px 12px ;
  font-size: 12px ;
  border-radius: 6px ;
  border: 1px solid var(--border) ;
  background: var(--surface) ;
  color: var(--text) ;
  cursor: pointer ;
  transition: all 0.2s ease ;
}

.tab-section .list-container .poster-card .poster-card__move-buttons button:hover {
  background: var(--primary) ;
  color: white ;
  border-color: var(--primary) ;
}

/* Tab card overflow button */
.tab-section .list-container .poster-card .poster-card__overflow-btn {
  padding: 8px ;
  border-radius: 6px ;
  border: 1px solid var(--border) ;
  background: var(--surface) ;
  color: var(--text) ;
  cursor: pointer ;
  transition: all 0.2s ease ;
}

.tab-section .list-container .poster-card .poster-card__overflow-btn:hover {
  background: var(--primary) ;
  color: white ;
  border-color: var(--primary) ;
}

/* Mobile layout - vertical cards */
@media (max-width: var(--bp-mobile-lg)) {
  .tab-section .list-container {
    flex-direction: column;
    gap: 12px;
    overflow-x: hidden;
    overflow-y: visible;
    padding: 12px;
  }

  .tab-section .list-container .poster-card {
    flex-direction: column ;
    max-width: none ;
    min-width: auto ;
    width: 100% ;
  }

  .tab-section .list-container .poster-card .poster-card__poster {
    width: var(--tab-card-poster-width-mobile) ;
    height: var(--tab-card-poster-height-mobile) ;
    align-self: center ;
    margin-bottom: 12px ;
  }

  .tab-section .list-container .poster-card .poster-card__content {
    padding: 12px ;
    text-align: center ;
  }

  .tab-section .list-container .poster-card .poster-card__title {
    font-size: 16px ;
  }

  .tab-section .list-container .poster-card .poster-card__meta {
    font-size: 12px ;
    justify-content: center ;
  }

  .tab-section .list-container .poster-card .poster-card__actions {
    justify-content: center ;
    flex-wrap: wrap ;
  }
}
.cw-row {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  padding-inline: 12px;
}

/* You reported this exact wrapper: <div id="currentlyWatchingScroll" class="preview-row-scroll row-inner"> */
/* #currentlyWatchingScroll layout rules moved to home-layout.css */

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner > * {
  flex: 0 0 auto;
  /* Width/min-width/max-width removed - controlled by home-layout.css */
  display: flex ;
  flex-direction: column ;
  border-radius: 8px;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster {
  width: var(--card-w) ; /* Standard home page card width */
  height: var(--home-card-height-desktop) ; /* Standard home page card height */
  flex-shrink: 0 ;
  border-radius: 6px;
  overflow: hidden;
  aspect-ratio: 2 / 3;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster img,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .poster,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .show-poster,
.cw-row
  #currentlyWatchingScroll.preview-row-scroll.row-inner
  .preview-card-poster
  .poster-placeholder {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
  aspect-ratio: 2 / 3;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-content {
  flex: 1 ;
  padding: 6px 4px;
  display: flex ;
  flex-direction: column ;
  justify-content: flex-start;
  min-width: 0;
  overflow: hidden;
  text-align: center;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-content,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .content {
  padding: 6px 6px 8px;
}
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-title {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 2px 0;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-align: center;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-year {
  font-size: 0.6rem;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1;
  text-align: center;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-title,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .title {
  font-size: 0.8rem;
  line-height: 1.1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-status {
  position: absolute;
  top: 4px;
  left: 4px;
  background: rgba(81, 207, 102, 0.95);
  color: white;
  padding: 2px 6px;
  border-radius: 6px;
  font-size: 0.5rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.2px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-stamp,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-pill {
  font-size: 0.65rem;
  padding: 2px 6px;
  border-radius: 999px;
  margin-top: 4px;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-actions {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
  margin-top: 6px;
}

/* V2 Cards Override - Force grid layout for V2 cards in currently watching */
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .card-actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .card-actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .actions,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .card-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 6px;
}

/* V2 Cards Action Grid Override */
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .action-grid-2x2,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .action-grid-2x2,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .action-grid-2x2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  width: 100%;
}

/* V2 Cards Action Row Override */
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card.v2 .action-row,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .cw-card.v2 .action-row,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .v2-home-cw .action-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions .btn,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .action-btn,
.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .more-btn {
  width: 22px;
  height: 22px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  border-radius: 6px;
  font-size: 12px;
  padding: 0;
}

@media (max-width: var(--bp-mobile-lg)) {
  .preview-card {
    width: var(--home-card-width-mobile) ;
    flex: 0 0 var(--home-card-width-mobile) ;
  }

  .preview-card-poster {
    width: var(--home-card-width-mobile) ; /* Using home card width mobile */
    height: var(--home-card-height-mobile) ; /* Using home card height mobile */
  }

  .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner > * {
    width: var(--home-card-width-mobile) ; /* Standard home page card width mobile */
    max-width: var(--home-card-width-mobile) ;
    min-width: var(--home-card-width-mobile) ;
  }

  .cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster {
    width: var(--home-card-width-mobile) ; /* Standard home page card width mobile */
    height: var(--home-card-height-mobile) ; /* Standard home page card height mobile */
  }
}

/* === Next Up This Week (scoped) === */
#up-next-row {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  padding-inline: 32px;
}

#up-next-row::-webkit-scrollbar {
  height: 8px;
}

#up-next-row::-webkit-scrollbar-track {
  background: transparent;
}

#up-next-row::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

/* #up-next-row .row-inner layout rules moved to home-layout.css */

/* Match Currently Watching sizing - width controlled by home-layout.css */
#up-next-row .row-inner > * {
  flex: 0 0 auto;
  /* Width/min-width/max-width removed - controlled by home-layout.css */
  display: flex;
  flex-direction: column;
  border-radius: 8px;
  position: relative;
}

/* Poster frame - width controlled by home-layout.css */
#up-next-row .row-inner .media {
  /* Width removed - controlled by home-layout.css */
  height: var(--home-card-height-desktop); /* Standard home page card height */
  border-radius: 6px;
  overflow: hidden;
  flex-shrink: 0;
}
#up-next-row .row-inner .media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Text content - match Currently Watching sizing */
#up-next-row .row-inner .meta {
  padding: 6px 6px 8px;
  font-size: 0.7rem; /* Match Currently Watching font size */
  font-weight: 600; /* Match Currently Watching font weight */
  line-height: 1.2;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: center; /* Match Currently Watching text alignment */
}

@media (max-width: var(--bp-mobile-lg)) {
  #up-next-row .row-inner > * {
    width: var(--home-card-width-mobile); /* Standard home page card width mobile */
    max-width: var(--home-card-width-mobile);
    min-width: var(--home-card-width-mobile);
  }

  #up-next-row .row-inner .media {
    width: var(--home-card-width-mobile); /* Standard home page card width mobile */
    height: var(--home-card-height-mobile); /* Standard home page card height mobile */
  }
}

/* === Community Spotlight (two-column) === */
#spotlight-row {
  padding-inline: 12px;
}

#spotlight-row .spotlight-grid {
  display: grid;
  grid-template-columns: minmax(200px, 0.625fr) 280px; /* video | info */
  gap: 12px;
  align-items: start;
}

/* Left video tile (taller aspect ratio) */
#spotlight-row .spotlight-video {
  position: relative;
  width: 100%;
  aspect-ratio: 4 / 3;
  border-radius: 10px;
  overflow: hidden;
  background: var(--surface-2, #111); /* fallback token */
}
#spotlight-row .spotlight-video iframe,
#spotlight-row .spotlight-video .thumb {
  width: 100%;
  height: 100%;
  display: block;
}

/* Right rotating info */
#spotlight-row .spotlight-info {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 200px; /* Ensure minimum height for proper layout */
}

#spotlight-row .spotlight-meta {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
  padding: 16px 0;
}

#spotlight-row .spotlight-title {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 8px;
  color: var(--text);
}
#spotlight-row .spotlight-credit {
  font-size: 0.9rem;
  opacity: 0.8;
  margin-bottom: 12px;
  color: var(--text-secondary, #666);
}
#spotlight-row .spotlight-desc {
  font-size: 0.9rem;
  line-height: 1.4;
  max-height: 4.2em; /* ~3 lines */
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text);
  margin-bottom: 16px;
}

#spotlight-row .spotlight-badges {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 16px;
}
#spotlight-row .badge {
  font-size: 0.7rem;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--surface-3, #222);
  color: var(--text);
}

#spotlight-row .spotlight-cta {
  margin-top: auto;
  padding-top: 16px;
  text-align: center;
}

#spotlight-row .spotlight-cta .btn {
  background: var(--primary, #e91e63);
  color: white;
  border: 2px solid var(--primary, #e91e63);
  padding: 12px 24px;
  font-size: 0.9rem;
  font-weight: 600;
  border-radius: 8px;
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#spotlight-row .spotlight-cta .btn:hover {
  background: var(--primary-dark, #c2185b);
  border-color: var(--primary-dark, #c2185b);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

#spotlight-row .spotlight-cta .btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Mobile: stack vertically, video on top */
@media (max-width: var(--bp-mobile-lg)) {
  #spotlight-row .spotlight-grid {
    grid-template-columns: 1fr;
  }
}

/* === Feedback Tile (scoped) === */
#feedback-row {
  padding-inline: 12px;
}

#feedback-row .feedback-card {
  display: grid;
  grid-template-columns: 40px 1fr auto;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 10px;
  background: var(--surface-2, #f8f9fa);
  border: 1px solid var(--border, #dee2e6);
  cursor: pointer;
  transition: all 0.2s ease;
}

#feedback-row .feedback-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-color: var(--primary, #e91e63);
}

#feedback-row .feedback-icon {
  font-size: 20px;
  line-height: 1;
  text-align: center;
}

#feedback-row .feedback-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text, #121212);
  margin-bottom: 2px;
}

#feedback-row .feedback-sub {
  font-size: 0.8rem;
  opacity: 0.85;
  color: var(--text-secondary, #666);
  line-height: 1.3;
}

#feedback-row .feedback-cta {
  font-size: 0.8rem;
  padding: 6px 12px;
  border-radius: 6px;
}

@media (max-width: var(--bp-mobile-lg)) {
  #feedback-row .feedback-card {
    grid-template-columns: 32px 1fr auto;
    padding: 10px;
    gap: 10px;
  }
  #feedback-row .feedback-title {
    font-size: 0.9rem;
  }
  #feedback-row .feedback-sub {
    font-size: 0.75rem;
  }
  #feedback-row .feedback-icon {
    font-size: 18px;
  }
}

/* === Header Realignment + Compact Controls === */

/* Reset inherited centering */
.header-bar {
  text-align: initial;
}

/* Desktop & tablet (â‰¥641px) */
@media (min-width: calc(var(--bp-mobile) + 1px)) {
  .header {
    height: 160px; /* Ensure desktop header height */
    padding: 24px 0; /* Ensure desktop header padding */
  }
  .header-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: nowrap;
    padding: 20px 24px; /* Increased padding for desktop */
  }
  .header-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1 1 auto;
    min-width: 0;
    justify-content: flex-start;
  }
  .header-right {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 0 0 auto;
    justify-content: flex-end;
    margin-left: auto;
    margin-top: 0;
  }
}

/* Mobile (â‰¤640px) */
@media (max-width: var(--bp-mobile)) {
  .header-bar {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }
  .header-left,
  .header-right {
    width: 100%;
    justify-content: center;
    align-items: center;
  }
  .header-right {
    margin-top: 6px;
  }
}

/* Compact controls */
.btn--sm {
  font-size: 0.9rem;
  line-height: 1.1;
  padding: 6px 10px;
  height: 36px;
  border-radius: 10px;
}
.select--sm {
  font-size: 0.9rem;
  line-height: 1.1;
  padding: 4px 10px;
  height: 36px;
  border-radius: 10px;
}
.header-right > * {
  white-space: nowrap;
}

/* Account Context Styling */
.account-context {
  font-size: 0.75rem;
  color: var(--text-secondary, #666);
  text-align: center;
  margin-bottom: 2px;
  min-height: 1em;
  opacity: 0.8;
}

/* Home section visibility is now handled by tab switching system */

/* Ensure Next Up section is visible */
#up-next-row {
  display: block ;
}

/* Home Group Styling - MOVED to home-layout.css */
/* Layout rules now handled by token-driven system in home-layout.css */
/* Visual styling (borders, shadows, radius) preserved in home.css */

/* COMMUNITY LAYOUT v14 â€” simplified three-section layout */

/* Two-column shell */
.community-content {
  display: flex;
  align-items: stretch; /* Make both columns same height */
  gap: clamp(16px, 2vw, 24px);
  width: 100%;
  max-width: 100%;
  min-height: 60vh; /* Use min-height instead of fixed height */
  overflow: visible; /* Allow content to expand */
}

/* Left: Empty Player Box */
.community-left {
  flex: 0 1 50%;
  max-width: 50%;
  min-width: 0;
  width: 100%;
  display: flex;
  flex-direction: column;
}

/* Player placeholder box */
.player-placeholder {
  width: 100%;
  height: 100%;
  background: var(--card);
  border: 2px dashed var(--border);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
}

.placeholder-content {
  text-align: center;
  color: var(--muted);
}

.placeholder-content h3 {
  margin: 0 0 8px 0;
  font-size: 18px;
  color: var(--text);
}

.placeholder-content p {
  margin: 0;
  font-size: 14px;
}

/* Make the spotlight container responsive */
.community-left .preview-row-container {
  width: 100%;
  max-width: 100%;
  overflow: hidden;
  height: auto; /* Let it size to content */
  flex-shrink: 0; /* Don't shrink */
}

.community-left .home-row-content {
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  height: auto; /* Let it size to content */
  flex-shrink: 0; /* Don't shrink */
}

/* Spotlight video container - responsive */
.community-left .spotlight-video {
  width: 100%;
  max-width: 100%;
  position: relative;
  overflow: hidden;
  height: auto; /* Let it size naturally */
  aspect-ratio: 9 / 16; /* Match the iframe aspect ratio */
  max-height: clamp(300px, 50vh, 500px); /* Constrain the container height */
  flex-shrink: 0; /* Don't shrink the container */
  display: block; /* Ensure it's a block element */
  line-height: 0; /* Remove any line-height spacing */
}

/* Community layout - MOVED to home-layout.css */
/* Layout rules now handled by token-driven system */

/* Override preview row header and container */
.community-left .preview-row-header,
.community-left .preview-row-container {
  padding: 0 ;
  margin: 0 ;
  height: auto ;
  line-height: 0 ;
}

/* Cap the visual height of vertical reels; width follows aspect-ratio */
.community-left iframe,
.community-left .video-frame,
.community-left .embed-responsive {
  display: block;
  width: 100% ;
  height: 100% ; /* Fill the container completely */
  aspect-ratio: 9 / 16; /* default vertical */
  max-height: clamp(300px, 50vh, 500px); /* More responsive to zoom */
  margin: 0; /* Remove any margins */
  border: 0;
  object-fit: cover; /* Fill container, maintain aspect ratio */
  transition: all 0.3s ease; /* Smooth transitions on zoom */
  position: absolute; /* Fill the container */
  top: 0;
  left: 0;
}

/* Optional: if a given video is landscape, add .landscape to the wrapper */
.community-left .landscape iframe {
  aspect-ratio: 16 / 9;
}

/* Right: Two Equal Sections using CSS Grid */
.community-right {
  flex: 0 1 50%;
  max-width: 50%;
  min-width: 300px;
  display: flex; /* no grid here */
  flex-direction: column;
  width: 100%;
  overflow: visible;
  align-self: stretch; /* stretch to match the row height */
}

/* Each section takes exactly 1/2 of the height */
.community-section {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  min-height: 300px; /* Reverted back to 300px - trivia was perfect */
  overflow-y: auto; /* Allow scrolling if content is too tall */
}

.section-content {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.section-content h4 {
  margin: 0 0 12px 0;
  font-size: 16px;
  color: var(--text);
  font-weight: 600;
}

.marquee-text {
  margin: 0;
  font-size: 13px;
  line-height: 1.4;
  color: var(--text);
  font-style: italic;
  flex: 1;
  overflow-y: auto;
}

/* FlickWord card styling - FlickFact feature removed */

/* Game-specific styling - compact for small containers */
.trivia-question {
  font-weight: 600;
  margin-bottom: 6px;
  color: var(--text);
  font-size: 11px;
  line-height: 1.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-height: 2.4em; /* Limit to 2 lines */
  overflow: hidden;
}

.trivia-choices {
  display: flex;
  flex-direction: column;
  gap: 3px;
  margin-bottom: 6px;
  flex: 1;
  overflow-y: auto;
  max-height: 120px; /* Limit height to prevent overflow */
}

.trivia-choices button,
.trivia-choices li,
.trivia-choices div {
  padding: 4px 6px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 3px;
  color: var(--text);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 10px;
  text-align: left;
  margin-bottom: 2px;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.2;
  min-height: 20px;
}

.trivia-choices button:hover,
.trivia-choices li:hover,
.trivia-choices div:hover {
  background: var(--accent);
  color: white;
}

.trivia-feedback {
  margin: 4px 0;
  font-weight: 500;
  font-size: 10px;
  line-height: 1.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-height: 2.4em; /* Limit to 2 lines */
  overflow: hidden;
}

.trivia-next-btn {
  padding: 4px 8px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  margin-top: 4px;
  font-size: 9px;
  display: block ;
  visibility: visible ;
  opacity: 1 ;
  width: 100%;
  min-height: 20px;
}

.trivia-stats {
  margin-top: 4px;
  font-size: 8px;
  color: var(--muted);
}

/* Ensure trivia content fits in container */
#triviaTile {
  display: flex;
  flex-direction: column;
  flex: 1; /* Fill available space */
  height: 100%;
  max-height: 100%;
  overflow: hidden;
}

.trivia-slot {
  display: flex;
  flex-direction: column;
  flex: 1;
  height: 100%;
  max-height: 100%;
  overflow: hidden;
}

/* Ensure FlickWord content fits in container */
#flickwordTile {
  display: flex;
  flex-direction: column;
  flex: 1; /* Fill available space */
  height: 100%;
  width: 100%; /* Fill full width */
}

.flickword-card {
  height: 100%;
  width: 100%; /* Fill full width */
  min-height: 150px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  flex: 1; /* Fill available space */
  padding: 20px; /* Add some internal padding */
}

/* FlickWord Teaser Styles */
.flickword-teaser {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border-radius: 8px;
  background: linear-gradient(135deg, var(--card) 0%, rgba(255, 255, 255, 0.05) 100%);
  border: 1px solid var(--border);
}

.flickword-teaser:hover {
  background: linear-gradient(135deg, var(--accent) 0%, rgba(255, 255, 255, 0.1) 100%);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.teaser-icon {
  font-size: 32px;
  margin-bottom: 8px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.teaser-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 4px;
}

.teaser-subtitle {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.teaser-stats {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
  font-size: 10px;
  color: var(--text-secondary);
}

.teaser-play-btn {
  background: var(--accent);
  color: white;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 11px;
  font-weight: 600;
  transition: all 0.2s ease;
}

.flickword-teaser:hover .teaser-play-btn {
  background: white;
  color: var(--accent);
}

/* FlickWord Modal Styles */
.flickword-modal {
  max-width: 90vw;
  max-height: 90vh;
  width: 600px;
}

.flickword-modal .modal-content {
  padding: 0;
  background: var(--bg);
  overflow: hidden;
}

.flickword-modal iframe {
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  width: 100%;
  height: 70vh;
  min-height: 500px;
}

/* FlickWord Game Styles (for embedded version) */
.flickword-game {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  font-size: 10px;
}

.fw-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.fw-header h4 {
  margin: 0;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
}

.fw-stats {
  display: flex;
  gap: 8px;
  font-size: 8px;
  color: var(--text-secondary);
}

.fw-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 2px;
  margin-bottom: 6px;
  flex: 1;
  max-height: 80px;
}

.fw-tile {
  width: 100%;
  aspect-ratio: 1;
  border: 1px solid var(--border);
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 600;
  background: var(--card);
  color: var(--text);
}

.fw-tile.correct {
  background: var(--success);
  color: white;
  border-color: var(--success);
}

.fw-tile.present {
  background: var(--warning);
  color: var(--text);
  border-color: var(--warning);
}

.fw-tile.absent {
  background: var(--text-secondary);
  color: white;
  border-color: var(--text-secondary);
}

.fw-keyboard {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-bottom: 6px;
}

.fw-kb-row {
  display: flex;
  gap: 1px;
  justify-content: center;
}

.fw-key {
  appearance: none;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  min-width: 16px;
  height: 20px;
  padding: 0 2px;
  border-radius: 3px;
  font-size: 8px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fw-key:hover {
  background: var(--accent);
  color: white;
}

.fw-key.correct {
  background: var(--success);
  color: white;
  border-color: var(--success);
}

.fw-key.present {
  background: var(--warning);
  color: var(--text);
  border-color: var(--warning);
}

.fw-key.absent {
  background: var(--text-secondary);
  color: white;
  border-color: var(--text-secondary);
}

.fw-key-back,
.fw-key-enter {
  min-width: 24px;
  font-size: 7px;
}

.fw-actions {
  display: flex;
  gap: 4px;
  justify-content: center;
}

.fw-btn {
  padding: 2px 6px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  border-radius: 3px;
  font-size: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.fw-btn:hover {
  background: var(--accent);
  color: white;
}

.fw-notification {
  position: absolute;
  top: 4px;
  left: 4px;
  right: 4px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 4px 6px;
  font-size: 8px;
  font-weight: 600;
  text-align: center;
  z-index: 10;
}

.fw-notification.error {
  border-color: var(--danger);
  color: var(--danger);
  background: rgba(239, 68, 68, 0.1);
}

.fw-notification.success {
  border-color: var(--success);
  color: var(--success);
  background: rgba(22, 163, 74, 0.1);
}

/* Explicit ordering (just in case DOM order isn't what we expect) */
.community-right .marquee-slot {
  order: 0;
  min-height: 36px;
}
.community-right .game-cards-wrapper {
  order: 1;
}

/* Game cards wrapper - keeps cards together at bottom */
.game-cards-wrapper {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 0 0 auto; /* Don't grow, maintain size */
}

/* Marquee content styling */
.marquee-content {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 8px;
}

.marquee-text {
  margin: 0;
  font-size: 14px;
  line-height: 1.5;
  color: var(--text);
  font-style: italic;
  text-align: left;
}

/* Game cards share height and don't crowd the top */
.flickword-section,
.trivia-section {
  margin: 0;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: clamp(12px, 1.5vw, 18px); /* Responsive padding */
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 0 0 auto; /* Don't grow/shrink, maintain fixed size */
  height: clamp(160px, 15vh, 200px); /* Responsive height */
  transition: all 0.3s ease; /* Smooth transitions on zoom */
}

/* Responsive stack */
@media (max-width: var(--bp-tablet)) {
  .community-content {
    flex-direction: column;
  }
  .community-left,
  .community-right {
    flex: 1 1 auto;
    max-width: 100%;
  }
  .community-left iframe {
    max-height: clamp(320px, 45vh, 480px);
  }
  .community-right .marquee-slot {
    min-height: 28px;
  }
  .flickword-section,
  .trivia-section {
    min-height: 170px;
  }
}

/* FlickWord and Trivia content will be styled by their respective systems */

/* Trivia Stats Panel */
.trivia-stats-panel {
  margin: 16px 0;
  padding: 16px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.stats-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.stats-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-radius: 8px;
  border: 1px solid var(--border);
  transition: all 0.2s ease;
}

.stats-row.basic-active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05));
  border-color: rgba(34, 197, 94, 0.3);
}

.stats-row.pro-active {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
  border-color: rgba(59, 130, 246, 0.3);
}

.stats-row.pro-locked {
  background: rgba(0, 0, 0, 0.02);
  border-color: var(--border);
  opacity: 0.6;
}

.stats-label {
  font-weight: 600;
  color: var(--text);
  font-size: 14px;
}

.stats-value {
  font-weight: 500;
  color: var(--text-secondary);
  font-size: 13px;
}

.stats-status {
  font-size: 12px;
  font-weight: 600;
  padding: 4px 8px;
  border-radius: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stats-row.basic-active .stats-status {
  background: rgba(34, 197, 94, 0.2);
  color: rgb(21, 128, 61);
}

.stats-row.pro-active .stats-status {
  background: rgba(59, 130, 246, 0.2);
  color: rgb(29, 78, 216);
}

.stats-row.pro-locked .stats-status {
  background: rgba(0, 0, 0, 0.1);
  color: var(--text-secondary);
}

.stats-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-top: 1px solid var(--border);
  margin-top: 8px;
}

.streak-info {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.upgrade-hint {
  font-size: 12px;
  color: var(--primary);
  font-weight: 600;
  background: rgba(233, 30, 99, 0.1);
  padding: 4px 8px;
  border-radius: 6px;
}

/* Dark mode adjustments for stats panel */
.dark-mode .trivia-stats-panel {
  background: var(--card);
  border-color: var(--border);
}

.dark-mode .stats-row.basic-active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.08));
}

.dark-mode .stats-row.pro-active {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.08));
}

.dark-mode .stats-row.pro-locked {
  background: rgba(255, 255, 255, 0.02);
}

/* Mobile responsive */
@media (max-width: var(--bp-mobile-lg)) {
  .community-content {
    flex-direction: column;
    gap: 16px;
  }

  .community-left,
  .community-right {
    flex: none;
  }
}

.group-header {
  margin-bottom: 16px;
}

.group-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin: 0;
  padding: 0 0 8px 0;
  border-bottom: 2px solid var(--primary);
  display: inline-block;
}

.group-divider {
  height: 1px;
  background: var(--border);
  margin: 16px 0;
  opacity: 0.6;
}

/* Desktop: Two neat sub-rows with divider */
@media (min-width: calc(var(--bp-mobile-lg) + 1px)) {
  /* Home group layout moved to home-layout.css */

  .group-divider {
    margin: 8px 0;
  }
}

/* Mobile: Stack vertically, carousels snap-scroll one card at a time */
@media (max-width: var(--bp-mobile-lg)) {
  /* Home group layout moved to home-layout.css */

  .group-title {
    font-size: 1.3rem;
    margin-bottom: 12px;
  }

  .group-divider {
    margin: 12px 0;
  }

  /* Home preview row styling moved to home-layout.css */

  /* Snap scroll for carousels on mobile - moved to home-layout.css */
}

/* Next Up section specific styling */
/* #up-next-row .preview-row-scroll layout rules moved to home-layout.css */

#up-next-row .preview-card {
  flex: 0 0 auto;
  /* Width/min-width/max-width removed - controlled by home-layout.css */
  display: flex;
  flex-direction: column;
  background: var(--bg);
  border-radius: 8px;
  border: 1px solid var(--border);
}

#up-next-row .preview-card-poster {
  width: var(--card-w) ;
  height: var(--home-card-height-desktop) ;
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

#up-next-row .preview-card-content {
  padding: 8px;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
}

#up-next-row .preview-card-title {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#up-next-row .preview-card-year {
  font-size: 0.7rem;
  color: var(--text-secondary);
  margin: 0;
}

#up-next-row .preview-card-status {
  position: absolute;
  top: 4px;
  right: 4px;
  background: var(--primary);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.6rem;
  font-weight: 600;
}

/* Mobile adjustments for Next Up */
@media (max-width: var(--bp-mobile-lg)) {
  #up-next-row .preview-card {
    width: var(--home-card-width-mobile) ;
    max-width: var(--home-card-width-mobile) ;
    min-width: var(--home-card-width-mobile) ;
  }

  #up-next-row .preview-card-poster {
    width: var(--home-card-width-mobile) ;
    height: var(--home-card-height-mobile) ;
  }

  #up-next-row .preview-card-title {
    font-size: 0.7rem;
  }

  #up-next-row .preview-card-year {
    font-size: 0.6rem;
  }
}

/* Collapsed section styling moved to home-layout.css */

/* === HOME LAYOUT RULES MOVED TO home-layout.css === */

/* PERMANENT OVERRIDE: Force action-row elements to be contents for 2x2 grid */
#homeSection .card.v2 .action-grid-2x2 .action-row,
#homeSection .cw-card.v2 .action-grid-2x2 .action-row,
#homeSection .v2-home-cw .action-grid-2x2 .action-row {
display: contents;
grid-template-columns: none;
gap: 0;
}

/* Fix button sizing - make them larger and more readable */
#homeSection .card.v2 .actions .btn,
#homeSection .cw-card.v2 .actions .btn,
#homeSection .v2-home-cw .actions .btn {
min-height: 44px;
padding: 8px 12px;
font-size: 12px;
line-height: 1.2;
}

/* NUCLEAR OPTION: Override ALL button sizing with maximum specificity */
#homeSection .actions .btn,
#homeSection .card-actions .btn,
#homeSection .action-grid-2x2 .btn,
#homeSection .action-row .btn {
  min-height: 44px;
  height: auto;
  padding: 8px 12px;
  font-size: 12px;
  line-height: 1.2;
}

/* Fix card spacing - ensure even spacing between cards */
#homeSection .preview-row-scroll.row-inner,
#homeSection #currentlyWatchingScroll {
  gap: 16px;
}

/* --- GAME TEASER COLUMN LAYOUT --- */
.home-games {
  display: contents;
}

/* Each card fills available width and splits height evenly */
#flickwordTile,
#triviaTile,
.home-games .game-card {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 16px 18px;
  border-radius: 16px;
  width: 100%;
  height: 100%;
  min-height: 0;
  box-sizing: border-box;
  position: relative;
  background: var(--card-bg, #fff);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
  border: 1px solid var(--card-bd, #eaeaea);
  cursor: pointer;
  overflow: hidden;
  transition:
    transform 0.18s ease,
    box-shadow 0.18s ease,
    border-color 0.18s ease;
  outline: none;
}
.game-card:hover,
.game-card:focus {
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.08);
  border-color: var(--brand-200, #d7e3ff);
}
.gc-bg {
  position: absolute;
  inset: -20%;
  background:
    radial-gradient(55% 55% at 70% 20%, rgba(120, 169, 255, 0.18) 0%, rgba(120, 169, 255, 0) 60%),
    linear-gradient(135deg, rgba(255, 255, 255, 0) 0%, rgba(120, 169, 255, 0.06) 100%);
  pointer-events: none;
}
/* Head and tagline tighter */
.gc-head {
  text-align: center;
  margin-bottom: 8px;
}
.gc-icon {
  font-size: 32px;
  line-height: 1;
}
.gc-title {
  margin: 4px 0;
  font-size: 1.1rem;
  font-weight: 700;
}
.gc-tagline {
  margin: 0;
  font-size: 0.9rem;
  color: var(--muted, #6b7280);
}

/* Stats row fills middle section */
.gc-stats {
  flex: 1;
  margin: 12px 0;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}
.gc-stats > div {
  display: flex;
  flex-direction: column;
  justify-content: center;
  border-radius: 10px;
  background: rgba(120, 169, 255, 0.06);
  border: 1px dashed rgba(120, 169, 255, 0.25);
  text-align: center;
  padding: 8px 6px;
}
.gc-stat-label {
  display: block;
  font-size: 0.75rem;
  color: var(--muted, #6b7280);
}
.gc-stat-val {
  font-weight: 700;
}

/* --- Teaser cards: compact CTA, consistent placement --- */
.home-games .game-card {
  position: relative;
}
.gc-cta {
  width: auto; /* no full-width bar */
  padding: 8px 12px;
  border-radius: 10px;
  font-size: 0.92rem;
  line-height: 1.1;
  align-self: flex-end; /* right-aligned within card */
  margin-top: 10px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--brand-500, #5a88ff), var(--brand-600, #3b6cff));
  color: #fff;
  border: 0;
  transition:
    filter 0.18s ease,
    transform 0.18s ease;
}
.game-card:hover .gc-cta {
  filter: brightness(1.05);
}
.game-card:active .gc-cta {
  transform: translateY(1px);
}

/* FlickWord Hero Image */
.flickword-hero {
  margin-bottom: 16px;
  text-align: center;
}

.flickword-hero-image {
  width: 100%;
  max-width: 200px;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  object-fit: cover;
}

.flickword-hero-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 200px;
  height: 120px;
  margin: 0 auto;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.flickword-hero-icon {
  font-size: 2.5rem;
  margin-bottom: 8px;
}

.flickword-hero-text {
  color: white;
  font-weight: 600;
  font-size: 1rem;
}

@media (max-width: var(--bp-mobile-lg)) {
  .flickword-hero-image,
  .flickword-hero-placeholder {
    max-width: 150px;
    height: 90px;
  }

  .flickword-hero-icon {
    font-size: 2rem;
  }

  .flickword-hero-text {
    font-size: 0.9rem;
  }
}

/* Enhanced FlickWord Stats Layout - Specific to FlickWord card */
#flickwordTile .game-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 8px;
}

#flickwordTile .game-stats .stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 4px;
}

#flickwordTile .game-stats .stat-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 2px;
}

#flickwordTile .game-stats .stat-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-primary, #1f2937);
  line-height: 1;
}

@media (max-width: var(--bp-mobile)) {
  #flickwordTile .game-stats {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }

  #flickwordTile .game-stats .stat-label {
    font-size: 0.7rem;
  }

  #flickwordTile .game-stats .stat-value {
    font-size: 1.1rem;
  }
}

/* Game Modals - Phase E: Fenced with lower z-index than auth */
.game-modal {
  position: fixed;
  inset: 0;
  z-index: 15000; /* Below auth modal (20000) but above other content */
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.game-modal[aria-hidden='false'] {
  display: flex;
}
.gm-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(2px);
  z-index: 1;
  pointer-events: auto;
}
/* --- Modal: make dialog a flexible column and the body fill the rest --- */
.game-modal .gm-dialog {
  width: min(1200px, 96vw);
  max-width: none;
  height: min(92vh, 900px);
  display: flex;
  flex-direction: column; /* header fixed, body grows */
  border-radius: 16px;
  background: var(--bg, #ffffff);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  z-index: 10001; /* Ensure it's above everything */
  position: relative;
  pointer-events: auto;
  overflow: hidden; /* Prevent content from spilling out */
  margin: auto; /* Center the modal */
}
.game-modal[aria-hidden='false'] .gm-dialog {
  transform: scale(1);
  opacity: 1;
}
.game-modal .gm-header {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 12px 14px;
  border-bottom: 1px solid var(--card-bd, #eaeaea);
}

.game-modal .gm-header h3 {
  font-size: 1.5rem;
  font-weight: 800;
  margin: 0;
  color: var(--text, #1f2937);
}

.game-modal .gm-close {
  position: relative ;
  right: auto ;
  top: auto ;
  transform: none ;
  font-size: 22px;
  line-height: 1;
  background: none;
  border: 0;
  cursor: pointer;
  margin-left: auto;
}

.game-modal .gm-body {
  flex: 1 1 auto;
  padding: 0;
  overflow: auto; /* Allow scrolling for content that doesn't fit */
  box-sizing: border-box;
  max-width: none; /* remove any stray 1000px caps */
  margin: 0; /* ensure full-width body */
  pointer-events: auto;
  min-height: 0; /* Allow flex shrinking */
}
.gm-placeholder {
  height: 60vh;
  min-height: 360px;
  display: grid;
  place-items: center;
  border: 2px dashed #d7e3ff;
  border-radius: 12px;
  color: #6b7280;
}

/* On smaller screens, cards shrink in height naturally */
@media (max-width: var(--bp-mobile-lg)) {
  .home-games {
    gap: 12px;
  }
  .home-games .game-card {
    min-height: 200px;
  }
}

/* The FlickWord mount area should fill the body */
#glickword-game, /* fallback if typo */
#flickword-game {
  height: 100%;
}

/* Game mount fills the body; iframe fills the mount */
#flickword-game,
#dailytrivia-game {
  height: 100%;
}

.gm-body iframe {
  display: block;
  width: 100%;
  height: 100%;
  border: 0;
  border-radius: 12px;
  max-width: none;
  pointer-events: auto;
} /* remove any width constraints */

/* Mobile fullscreen */
@media (max-width: var(--bp-mobile)) {
  .game-modal {
    padding: 0;
  }
  .game-modal .gm-dialog {
    width: 100svw;
    height: 100svh;
    max-height: 100svh;
    border-radius: 0;
  }
  .game-modal .gm-body {
    padding: 0;
  }
  .gm-body iframe {
    border-radius: 0;
  }
}

/* Tablet responsive */
@media (max-width: 768px) and (min-width: 641px) {
  .game-modal .gm-dialog {
    width: min(95vw, 800px);
    height: min(90vh, 700px);
  }
}

/* Draggable Modal Styles */
.gm-draggable {
  cursor: default;
  user-select: none;
  transition: transform 0.2s ease-out;
}

.gm-draggable.gm-dragging {
  cursor: grabbing;
  transition: none;
}

.gm-draggable.gm-resizing {
  cursor: nw-resize;
  transition: none;
}

.gm-drag-handle {
  cursor: grab;
  user-select: none;
}

.gm-drag-handle:active {
  cursor: grabbing;
}

.gm-resize-handle {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 20px;
  height: 20px;
  cursor: nw-resize;
  background: linear-gradient(-45deg, 
    transparent 30%, 
    var(--border, #e5e7eb) 30%, 
    var(--border, #e5e7eb) 40%, 
    transparent 40%, 
    transparent 60%, 
    var(--border, #e5e7eb) 60%, 
    var(--border, #e5e7eb) 70%, 
    transparent 70%
  );
  border-radius: 0 0 16px 0;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.gm-resize-handle:hover {
  opacity: 1;
  background: linear-gradient(-45deg, 
    transparent 30%, 
    var(--accent, #ff4c8d) 30%, 
    var(--accent, #ff4c8d) 40%, 
    transparent 40%, 
    transparent 60%, 
    var(--accent, #ff4c8d) 60%, 
    var(--accent, #ff4c8d) 70%, 
    transparent 70%
  );
}

/* Hide resize handle on mobile */
@media (max-width: var(--bp-mobile)) {
  .gm-resize-handle {
    display: none;
  }
}

/* Dark mode adjustments */
.dark-mode .game-card {
  background: var(--card);
  border-color: var(--border);
  color: var(--text);
}

.dark-mode .gc-tagline {
  color: var(--text-secondary);
}

.dark-mode .gc-stat-label {
  color: var(--text-secondary);
}

.dark-mode .gm-dialog {
  background: var(--card);
  border-color: var(--border);
  color: var(--text);
}

.dark-mode .gm-header {
  border-color: var(--border);
}

.dark-mode .gm-placeholder {
  border-color: var(--border);
  color: var(--text-secondary);
}

/* --- Tabs > Search layering fix (policy-safe, no sticky edits) --- */
html,
body {
  /* prevent global overflow from creating unwanted stacking contexts */
  overflow: visible;
  overscroll-behavior: none;
}

/* neutralize wrapper that was forcing hidden/auto overflow */
.supports-safe-area.a11y-v1.layout-mobile-fix.mobile.mobile-v1 {
  overflow: visible; /* PART2C */
  contain: none; /* PART2C */
}

/* belt-and-suspenders: make intended stacking explicit */
.tabs-rail,
.tab-container {
  position: relative;
  z-index: 100;
}
#searchResults,
.search-results {
  position: relative;
  z-index: 50;
}
/* --- end Tabs > Search layering fix --- */

/* Theme tokens moved to design-tokens.css */

/* Base usage */
body {
  background: var(--bg-page);
  color: var(--fg-default);
}

/* Utilities + small components (token-based) */
.u-fg {
  color: var(--fg-default);
}
.u-bg {
  background: var(--bg-elevated);
}
.u-fg-on {
  color: var(--fg-on-elevated);
}

.version-display {
  /* replaces inline #7f8c8d */
  font-size: 10px;
  margin-right: 8px;
  color: var(--fg-subtle);
}

.tab-version {
  font-size: 8px;
  margin-left: 8px;
  color: var(--fg-subtle);
  opacity: 0.7;
  font-weight: normal;
}
.meta-muted {
  /* replaces inline #666 italic */
  font-size: 0.8rem;
  font-style: italic;
  color: var(--fg-muted);
}
.card-surface {
  /* replaces inline background/border token usage */
  padding: 10px;
  border-radius: 8px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
}
.heading-subtle {
  /* replaces inline var(--text, #333) on h5 etc. */
  margin: 10px 0;
  font-size: 0.9rem;
  color: var(--fg-default);
}
/* Tabs/results already layered earlier â€” leave as-is */

/* Auth visibility utility */
[hidden] {
  display: none ;
}

/* Base readable font stack & sizing guard */
html,
body {
  font-family:
    system-ui,
    -apple-system,
    Segoe UI,
    Roboto,
    Helvetica,
    Arial,
    'Apple Color Emoji',
    'Segoe UI Emoji',
    'Segoe UI Symbol';
  font-size: 16px;
  line-height: 1.4;
}

/* Sign-in area (signed-out) */
.signin-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}
.signin-label {
  font-weight: 600;
  color: var(--fg-primary, #000);
  font-size: 0.875rem;
}

/* Account area (signed-in) */
.account-area {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.account-area .account-hint {
  font-size: 0.75rem;
  line-height: 1;
  opacity: 0.75;
  margin-right: 0.25rem; /* small nudge from the edge */
}
.account-area .account-name {
  font-weight: 600;
}
/* (removed separate .account-signout button; username now toggles sign-out) */
.user-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.user-initial {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-elevated);
  color: var(--fg-on-elevated);
  font-weight: 600;
  font-size: 12px;
}
.user-name {
  max-width: 18ch;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--fg-default);
  font-weight: 600;
}
.account-menu {
  position: absolute;
  margin-top: 6px;
  padding: 6px;
  background: var(--bg-elevated);
  color: var(--fg-on-elevated);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: 0 4px 18px rgba(0, 0, 0, 0.25);
  min-width: 140px;
  z-index: 2000;
}
.menu-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 8px 10px;
}
.menu-item:hover {
  background: var(--bg-page);
}

/* Layout Shell - Option A: Co-located tabs and panels */
:root {
  /* Use existing tokens if available; otherwise keep these fallbacks */
  --header-h: 160px; /* Updated to match increased header height */
  --tabs-h: 48px; /* update to your tab bar height */
}

/* Shell */
html,
body {
  height: var(--body-height);
}
#appRoot {
  height: auto; /* H1.1: Allow natural height based on content */
  min-height: auto; /* H1.1: Allow natural height based on content */
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  padding-bottom: calc(var(--fab-size, 56px) + var(--fab-gap, 16px)); /* Reserve space for fixed FAB dock */
}

/* Header sticks at top - force it to stay on top */
#appRoot > header.header {
  position: static;
  top: auto;
  left: auto;
  right: auto;
  z-index: auto; /* Let search bar be the sticky element */
  margin: 0; /* no collapsing gaps */
  height: 160px; /* Increased height to accommodate all elements */
  background: var(--bg, #ffffff); /* Ensure solid background */
  border-bottom: none; /* Remove red border */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add shadow for separation */
  width: 100%;
  padding: 24px 0; /* Increased padding for better spacing */
}

/* Search sticks under header when visible */
#appRoot > #search-container.top-search,
#appRoot > .top-search {
  position: sticky;
  top: var(--header-h, 160px); /* Stick below header */
  z-index: 1000; /* High z-index to stay above content */
  margin: 0;
  margin-top: 20px; /* Add space between header and search bar */
  margin-bottom: 20px; /* Consistent spacing between containers */
  background: var(--bg, #ffffff); /* Ensure solid background */
  padding: 16px 0; /* Add padding to make it visible */
  border-bottom: 1px solid var(--border, #e5e7eb); /* Visual separation */
  /* Match header width constraints */
  max-width: var(--page-max, 1200px);
  margin-left: auto;
  margin-right: auto;
  padding-left: 32px;
  padding-right: 32px;
}

/* Search row within search container - no need for sticky since container is sticky */
#desktop-search-row,
.search-row {
  position: relative;
  top: auto;
  z-index: auto;
  padding: 0 16px; /* Add horizontal padding */
  align-items: center;
  gap: 12px;
}

/* Tabs stick under search bar */
#appRoot > #navigation.tab-container,
#appRoot > .tab-container,
#appRoot > [role='tablist'] {
  position: sticky;
  top: calc(var(--header-h, 160px) + 80px); /* Below header + search bar + margin */
  z-index: 800; /* Below search bar but above content */
  margin: 0;
  margin-bottom: 20px; /* Consistent spacing between containers */
  height: var(--tabs-h);
  background: var(--bg); /* Ensure solid background */
  border-bottom: 1px solid var(--border); /* Visual separation */
}

/* Panels fill the rest; let window/body be the scroller so sticky works */
#appRoot > .panels {
  flex: 1 1 auto;
  overflow: var(--content-overflow); /* IMPORTANT: sticky parents must not be overflow:auto */
  padding: 12px 16px;
  box-sizing: border-box;
}

/* Quote Bar Styling - Updated to use design tokens */
.quote-bar {
  display: block;
  background: var(--bg, #ffffff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: var(--r-2, 8px);
  padding: var(--spacing-md, 12px) var(--spacing-lg, 16px);
  margin: var(--spacing-lg, 16px) 0 var(--spacing-sm, 8px) 0;
  text-align: center;
  color: var(--fg, #1f2937);
  min-height: 40px;
  font-size: var(--fs-0, 1rem);
  font-weight: normal;
  font-style: italic;
}

.quote-marquee {
  overflow: hidden;
  white-space: nowrap;
}

.quote-text {
  display: inline-block;
  animation: marquee 20s linear infinite;
  color: var(--fg, #1f2937);
  font-size: var(--fs-0, 1rem);
  font-weight: var(--font-weight-normal, normal);
  font-style: italic;
}

/* Override conflicting CSS rules with higher specificity */
#quote-bar .quote-text,
.quote-bar .quote-text {
  font-weight: normal;
  font-style: italic;
}

/* Marquee loaded state */
.marquee-loaded {
  opacity: 1;
  transition: opacity 0.3s ease;
}

@keyframes marquee {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

/* Tab panel visibility - single source of truth using hidden attribute */
.tab-section[hidden], .tab-panel[hidden] {
  display: none;
}

/* Visible tab sections styling */
.tab-section:not([hidden]), .tab-panel:not([hidden]) {
  margin: 0;
  margin-top: 20px; /* Perfect spacing - confirmed by user */
  position: relative;
  z-index: 1; /* Below header, search, and tabs */
  background: var(--bg, #ffffff); /* Ensure solid background */
}

.tab-section:not([hidden]) > *:first-child {
  margin-top: 0;
}

/* Small buffer when panels sit directly under tabs */
#appRoot > .tab-container + .panels {
  padding-top: 8px;
}

/* FAB positioning: Sticky bottom aligned to content container */
.fab-dock { 
  position: sticky; 
  bottom: var(--fab-gap);
  width: min(var(--container-max), 100%);
  margin-inline: auto;
  padding-inline: var(--container-pad);
  z-index: 50;
  pointer-events: none; /* clicks pass only to buttons inside */
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  gap: var(--fab-gap, 12px);
  align-items: flex-end;
}

/* PART3: Scroll-to-top control */
.scroll-top-btn {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 60;
  background: transparent;
  border: none;
  padding: 0;
  border-radius: 0;
  box-shadow: none;
  width: auto;
  height: auto;
  color: rgba(0, 0, 0, 0.3);
  opacity: 0; 
  visibility: hidden;
  transition: opacity .2s ease, visibility .2s ease, transform .08s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: normal;
}

/* Fix arrow color and content */
.scroll-top-btn::before {
  display: none;
}

.scroll-top-btn * {
  color: rgba(0, 0, 0, 0.3);
}
.scroll-top-btn.is-visible {
  opacity: 1; visibility: visible;
}
.scroll-top-btn:focus-visible {
  outline: 2px solid var(--primary, #2563eb);
  outline-offset: 2px;
}
.scroll-top-btn:active {
  transform: translateX(-50%) scale(.98);
}
@media (prefers-reduced-motion: reduce) {
  .scroll-top-btn { transition: none; }
}

/* Override conflicting FAB positioning from home.css */
.fab-dock .fab,
.fab-dock .fab-left,
.fab-dock .fab-stack {
  position: static;
  top: auto;
  right: auto;
  bottom: auto;
  left: auto;
  z-index: auto;
  flex: 0 0 auto;
  width: auto;
  max-width: none;
  pointer-events: auto;
}

/* Internal layout for fab-stack (contains multiple FABs) */
.fab-dock .fab-stack {
  display: flex;
  flex-direction: column;
  gap: 12px;
}




/* Remove purple circle from settings FAB - make it just a cog icon */
.fab-dock #btnSettings,
.fab-dock #btnSettings.fab-left {
  background: transparent;
  background-color: transparent;
  background-image: none;
  box-shadow: none;
  border: none;
  border-radius: 0;
  color: var(--text, #333);
  font-size: 24px;
  width: auto;
  height: auto;
  min-width: auto;
  min-height: auto;
  padding: 8px;
}

.fab-dock #btnSettings:hover,
.fab-dock #btnSettings.fab-left:hover {
  background: transparent;
  background-color: transparent;
  background-image: none;
  box-shadow: none;
  opacity: 0.8;
}

/* Tab Activation System - Home-only elements and search policy */

/* Home-only elements: hidden by default, shown only on home tab */
.home-only {
  display: none;
}

.tab-home .home-only {
  display: block;
}

/* Search policy: search rows only visible on tabs that allow search */
.top-search,
.search-row {
  display: block;
}

/* Ensure navigation is always visible */
#navigation,
.tab-container,
nav[role="tablist"] {
display: flex;
visibility: visible;
}

/* Ensure home section is visible by default - but allow tab switching */
/* Only apply when home section is the active tab and not hidden */
body.tab-home #homeSection:not([hidden]) {
  display: block;
  visibility: visible;
}

/* Default: show home section unless explicitly hidden by tab switching */
#homeSection {
  display: block;
  visibility: visible;
}

/* Only hide home section when other tabs are explicitly active */
body.tab-watching #homeSection,
body.tab-wishlist #homeSection,
body.tab-watched #homeSection,
body.tab-discover #homeSection,
body.tab-settings #homeSection {
display: none;
visibility: hidden;
}

.has-search .top-search,
.has-search .search-row {
  display: block;
}

.has-search .search-row {
  display: flex;
}


```

## _legacy_v1\www\styles\mobile.css
```
/* Flicklet - Mobile CSS Styles */

/* === MOBILE BOTTOM NAVIGATION BAR === */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  background: var(--bg, #ffffff);
  border-top: 1px solid var(--border, #e5e7eb);
  padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
  z-index: 1000;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.bottom-tab {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px 4px;
  background: none;
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 60px;
  position: relative;
  color: var(--text-secondary, #666);
  transform: scale(1);
}

.bottom-tab:hover {
  background: rgba(var(--primary-rgb, 59, 130, 246), 0.1);
  color: var(--primary, #3b82f6);
  transform: scale(1.05);
}

.bottom-tab.is-active {
  color: var(--primary, #3b82f6);
  background: rgba(var(--primary-rgb, 59, 130, 246), 0.15);
  transform: scale(1.1);
}

.bottom-tab.is-active::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 3px;
  background: var(--primary, #3b82f6);
  border-radius: 0 0 3px 3px;
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    width: 0;
    opacity: 0;
  }
  to {
    width: 24px;
    opacity: 1;
  }
}

.bottom-tab-icon {
  font-size: 20px;
  margin-bottom: 2px;
  line-height: 1;
  transition: all 0.3s ease;
}

.bottom-tab.is-active .bottom-tab-icon {
  transform: scale(1.2);
  filter: drop-shadow(0 2px 4px rgba(var(--primary-rgb, 59, 130, 246), 0.3));
}

.bottom-tab-label {
  font-size: 11px;
  font-weight: 500;
  line-height: 1.2;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  transition: all 0.3s ease;
}

.bottom-tab.is-active .bottom-tab-label {
  font-weight: 600;
  color: var(--primary, #3b82f6);
}

.bottom-tab-badge {
  position: absolute;
  top: 6px;
  right: 8px;
  background: var(--primary, #3b82f6);
  color: white;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  transition: all 0.3s ease;
  transform: scale(1);
}

.bottom-tab-badge:empty {
  display: none;
}

.bottom-tab.is-active .bottom-tab-badge {
  background: var(--primary, #3b82f6);
  transform: scale(1.1);
  box-shadow: 0 2px 8px rgba(var(--primary-rgb, 59, 130, 246), 0.4);
}

/* Badge pulse animation for new items */
.bottom-tab-badge.pulse {
  animation: badgePulse 0.6s ease-in-out;
}

@keyframes badgePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

/* Ripple animation for touch feedback */
@keyframes ripple {
  0% {
    width: 0;
    height: 0;
    opacity: 1;
  }
  100% {
    width: 100px;
    height: 100px;
    opacity: 0;
  }
}

/* Hide bottom nav on desktop */
@media (min-width: 769px) {
  .bottom-nav {
    display: none;
  }
}

/* Show bottom nav on mobile, hide top nav */
@media (max-width: 768px) {
  .bottom-nav {
    display: flex;
  }
  
  /* Hide top navigation on mobile */
  #navigation {
    display: none;
  }
  
  /* Add bottom padding to main content to prevent overlap */
  .main-container,
  .panels {
    padding-bottom: calc(76px + env(safe-area-inset-bottom));
  }
}

/* Extra small mobile devices */
@media (max-width: 480px) {
  .bottom-tab {
    min-height: 56px;
    padding: 6px 2px;
  }
  
  .bottom-tab-icon {
    font-size: 18px;
  }
  
  .bottom-tab-label {
    font-size: 10px;
  }
  
  .main-container,
  .panels {
    padding-bottom: calc(68px + env(safe-area-inset-bottom));
  }
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
  /* Mobile font size enforcement - WCAG AA compliance */
  body,
  html {
    font-size: 16px;
  }

  /* Base text elements - minimum 16px */
  p,
  span,
  div,
  a,
  button,
  input,
  select,
  textarea,
  label {
    font-size: 16px;
  }

  /* Smaller elements - minimum 12px */
  .badge,
  .count,
  .meta,
  .tag,
  .pill,
  .chip {
    font-size: 12px;
  }

  /* Headings maintain relative sizing but ensure minimums */
  h1 {
    font-size: max(2rem, 24px);
  }
  h2 {
    font-size: max(1.5rem, 20px);
  }
  h3 {
    font-size: max(1.25rem, 18px);
  }
  h4 {
    font-size: max(1.1rem, 16px);
  }
  h5,
  h6 {
    font-size: 16px;
  }
  /* Main container adjustments */
  .main-container {
    padding: 24px;
    margin: 10px;
    border-radius: 16px;
  }

  /* Header adjustments */
  .header {
    flex-direction: column;
    gap: 8px;
    padding: 24px 0;
    margin-bottom: 8px;
  }

  .title {
    font-size: 1.8rem;
    text-align: center;
  }

  .subtitle {
    text-align: center;
    font-size: 0.9rem;
  }

  .user-section {
    justify-content: center;
    width: 100%;
  }

  /* Search adjustments */
  .top-search {
    padding: 6px;
    margin: 6px 0;
    border-radius: 8px;
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--bg);
  }

  /* Mobile search tips - prevent wrapping and overlap */
  .top-search .search-help {
    position: relative ;
    top: auto ;
    left: auto ;
    font-size: 0.75rem ;
    line-height: 1.1 ;
    margin: 0 ;
    padding: 2px 4px ;
    background: rgba(0, 0, 0, 0.1) ;
    border-radius: 4px ;
    white-space: nowrap ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    max-width: 100% ;
  }

  /* Mobile search tips - truncate long text */
  .search-help span[data-i18n='search_tips'] {
    font-size: 0.75rem ;
    line-height: 1.1 ;
    display: inline-block ;
    max-width: 200px ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    white-space: nowrap ;
  }

  /* Also apply to mobile-v1 class */
  .mobile-v1 .top-search .search-help {
    position: relative ;
    top: auto ;
    left: auto ;
    font-size: 0.75rem ;
    line-height: 1.1 ;
    margin: 0 ;
    padding: 2px 4px ;
    background: rgba(0, 0, 0, 0.1) ;
    border-radius: 4px ;
    white-space: nowrap ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    max-width: 100% ;
  }

  .mobile-v1 .search-help span[data-i18n='search_tips'] {
    font-size: 0.75rem ;
    line-height: 1.1 ;
    display: inline-block ;
    max-width: 200px ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    white-space: nowrap ;
  }

  .search-row {
    display: flex ;
    flex-direction: row ; /* FIXED: Keep horizontal layout on mobile */
    gap: 8px ;
    margin-top: 0 ;
    align-items: stretch ; /* FIXED: Full width alignment */
  }

  /* Remove any gaps between search elements */
  .top-search > * {
    margin-bottom: 0 ;
  }

  .top-search .search-help + * {
    margin-top: 0 ;
  }

  .search-input {
    width: 100% ; /* FIXED: Full width on its own line */
    padding: 8px 12px ;
    font-size: 16px ; /* FIXED: Larger font for better mobile UX */
    min-height: 44px ; /* FIXED: Better touch target */
    margin: 0 ;
    border-radius: 8px ;
  }

  /* Button row - All Genres, Search, Clear on one row */
  .search-row .search-buttons-row {
    display: flex ;
    flex-direction: row ;
    gap: 8px ;
    align-items: center ;
    width: 100% ;
  }

  /* FIXED: Better horizontal layout for search controls */
  .search-row .search-btn,
  .search-row .clear-search-btn,
  .search-row .advanced-search-btn {
    flex: 0 0 auto ; /* FIXED: Don't grow, size to content */
    min-width: 80px ; /* FIXED: Minimum width for readability */
    padding: 8px 12px ; /* FIXED: Better padding */
    font-size: 14px ; /* FIXED: Larger font */
    min-height: 44px ; /* FIXED: Better touch target */
    height: 44px ;
    margin: 0 ;
    text-align: center ;
    border-radius: 8px ;
    white-space: nowrap ;
    overflow: hidden ;
    text-overflow: ellipsis ;
  }

  /* All Genres compact size */
  .search-row .genre-filter {
    flex: 0 0 auto ;
    min-width: 60px ;
    width: 60px ;
    max-width: 60px ;
  }

  /* Tab adjustments */
  .tab-container {
    padding: 6px;
    gap: 4px;
    margin: 2px 0 ;
  }

  /* Ensure mobile search and tabs are close together */
  .main-container .top-search + .tab-container {
    margin-top: 2px ;
  }

  .tab {
    padding: 8px 6px;
    font-size: 12px;
    min-height: 40px;
    min-width: 40px;
  }

  .tab .count {
    font-size: 10px;
    margin-left: 4px;
  }

  .show-poster {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }

  .poster-placeholder {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }

  .show-title {
    font-size: 1rem;
  }

  .show-meta {
    font-size: 0.8rem;
  }

  .show-overview {
    font-size: 0.9rem;
    -webkit-line-clamp: 2;
    line-clamp: 2; /* FIXED: Added standard property for compatibility */
  }

  /* Button adjustments */
  .btn {
    padding: 6px 12px;
    font-size: 12px;
    min-height: 40px;
    min-width: 40px;
  }

  .show-actions {
    gap: 6px;
  }

  .show-actions .btn {
    font-size: 11px;
    padding: 4px 8px;
  }

  /* List container adjustments */
  .list-container {
    padding: 8px;
    min-height: 60px;
  }

  /* FlickWord adjustments */
  .flickword-container {
    margin: 8px 0;
  }

  .flickword-card {
    padding: 12px;
    margin: 0;
  }

  .flickword-title {
    font-size: 14px;
  }

  .flickword-countdown {
    font-size: 11px;
    padding: 4px 8px;
  }

  .flickword-stats {
    flex-direction: column;
    gap: 8px;
  }

  .stat-item {
    min-width: auto;
    padding: 6px;
  }

  .stat-label {
    font-size: 10px;
  }

  .stat-value {
    font-size: 12px;
  }

  /* Feedback card adjustments */
  .feedback-card {
    padding: 10px;
    margin: 10px 0;
  }

  .feedback-form textarea {
    min-width: auto;
    width: 100%;
  }

  /* Modal adjustments */
  .modal {
    padding: 16px;
    margin: 10px;
  }

  .modal .modal-actions {
    flex-direction: column;
    gap: 8px;
  }

  /* Advanced search adjustments */
  .advanced-search-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .advanced-search-actions {
    flex-direction: column;
  }

  .year-range {
    flex-direction: column;
    gap: 4px;
  }

  .year-separator {
    display: none;
  }

  /* Floating buttons now handled by components.css */

  /* Hover effects moved to components.css */

  /* Hide desktop-specific elements on mobile */
  .desktop-only {
    display: none ;
  }

  /* Ensure proper touch targets */
  button,
  input[type='button'],
  input[type='submit'],
  input[type='reset'],
  select,
  .clickable {
    min-height: 44px;
    min-width: 44px;
  }

  /* Optimize for mobile scrolling */
  body {
    padding: 10px;
  }

  /* Ensure proper spacing for mobile */
  .section {
    margin: 15px 0;
  }

  .section-header h3 {
    font-size: 1.2rem;
  }

  /* Mobile-specific animations - now handled by MP-2.2 ANIMATION SCOPE */

  /* Safe-area insets for mobile devices */
  .main-container {
    padding-bottom: calc(env(safe-area-inset-bottom) + 80px) ;
  }

  /* FAB positioning with safe-area */
  .fab-dock {
    bottom: max(8px, env(safe-area-inset-bottom)) ;
    padding-left: max(16px, env(safe-area-inset-left)) ;
    padding-right: max(16px, env(safe-area-inset-right)) ;
  }

  /* Settings FAB - bottom left with safe-area */
  .fab-dock .fab-left {
    margin-left: 0 ;
    margin-bottom: 0 ;
  }

  /* Theme FABs - bottom right with safe-area */
  .fab-dock .fab-stack {
    margin-right: 0 ;
    margin-bottom: 0 ;
  }

  /* Ensure FABs are minimum 44x44px for touch targets */
  .fab,
  .fab-left {
    min-width: 44px ;
    min-height: 44px ;
    display: flex ;
    align-items: center ;
    justify-content: center ;
  }

  /* Card consistency improvements */
  .unified-card,
  .preview-card,
  .show-card {
    min-height: 120px ; /* Ensure minimum card height */
  }

  /* Poster aspect ratio enforcement */
  .unified-card-poster,
  .preview-card-poster,
  .show-poster,
  .poster-placeholder {
    aspect-ratio: 2 / 3 ;
    object-fit: cover ;
    min-height: 80px ; /* Minimum poster height */
  }

  /* Title clamping to 2 lines */
  .unified-card-title,
  .preview-card-title,
  .show-title {
    display: -webkit-box ;
    -webkit-line-clamp: 2 ;
    line-clamp: 2 ;
    -webkit-box-orient: vertical ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    line-height: 1.2 ;
    max-height: 2.4em ; /* 2 lines max */
  }

  /* Star rating visibility */
  .star-rating,
  .rating-container {
    display: flex ;
    align-items: center ;
    gap: 2px ;
    font-size: 12px ;
    margin: 4px 0 ;
    min-height: 16px ; /* Ensure rating row is visible */
  }

  .star-display {
    font-size: 12px ;
    line-height: 1 ;
  }

  /* Year and meta info on separate line */
  .unified-card-subtitle,
  .preview-card-year,
  .show-meta {
    font-size: 11px ;
    color: var(--text-secondary) ;
    margin: 2px 0 ;
    line-height: 1.1 ;
  }

  /* Ensure no overlapping content */
  .unified-card-content,
  .preview-card-content,
  .show-details {
    display: flex ;
    flex-direction: column ;
    gap: 4px ;
    min-height: 0 ;
    overflow: hidden ;
  }

  /* Section headers with proper gutters and emoji insets */
  .group-title,
  .preview-row-title,
  .section-title {
    padding-left: max(12px, env(safe-area-inset-left)) ;
    padding-right: max(12px, env(safe-area-inset-right)) ;
    margin-bottom: 12px ;
    font-size: 1.2rem ;
    font-weight: 600 ;
    display: flex ;
    align-items: center ;
    gap: 8px ;
  }

  /* Decorative emojis with proper insets */
  .group-title::before,
  .preview-row-title::before,
  .section-title::before {
    margin-right: 4px ;
    font-size: 1.1em ;
    flex-shrink: 0 ;
  }

  /* Count badges alignment */
  .count,
  .tab-badge {
    display: inline-flex ;
    align-items: center ;
    justify-content: center ;
    min-width: 20px ;
    height: 20px ;
    padding: 2px 6px ;
    font-size: 11px ;
    font-weight: 600 ;
    background: var(--primary) ;
    color: white ;
    border-radius: 10px ;
    margin-left: 8px ;
    flex-shrink: 0 ;
  }

  /* Ensure badges don't wrap */
  .group-title,
  .preview-row-title,
  .section-title {
    white-space: nowrap ;
    overflow: hidden ;
    text-overflow: ellipsis ;
  }

  /* Home group spacing */
  .home-group {
    margin-bottom: 24px;
    padding: 24px;
    border-radius: 16px;
  }

  /* Preview row spacing - mobile specific overrides */
  #group-1-your-shows .home-preview-row {
    margin: 12px 0;
    background: none;
    border: none;
    border-radius: 0;
    padding: 0;
    box-shadow: none;
  }

  /* Performance optimizations for mobile */
  .unified-card,
  .preview-card,
  .show-card {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) ; /* Lighter shadow */
    filter: none ; /* Remove heavy filters */
  }

  /* Disable confetti and heavy animations on mobile */
  .confetti,
  .celebration-animation {
    display: none ;
  }

  /* Reduce motion for better performance */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms ;
      animation-iteration-count: 1 ;
      transition-duration: 0.01ms ;
    }
  }

  /* Optimize scrolling performance */
  .preview-row-container,
  .carousel-container {
    will-change: transform ;
    transform: translateZ(0) ; /* Force hardware acceleration */
  }

  /* Reduce blur effects on mobile */
  .blur,
  .backdrop-blur {
    filter: none ;
    backdrop-filter: none ;
  }
}

/* Extra small mobile devices */
@media (max-width: 480px) {
  .main-container {
    padding: 12px;
    margin: 5px;
  }

  .title {
    font-size: 1.6rem;
  }

  .search-row {
    flex-direction: row ; /* FIXED: Keep horizontal layout even on very small screens */
    gap: 4px ;
  }

  .search-input {
    padding: 4px 6px ;
    font-size: 13px ;
    min-height: 32px ;
  }

  .genre-filter,
  .search-row .search-btn,
  .search-row .clear-search-btn,
  .search-row .advanced-search-btn {
    width: calc(25% - 3px) ;
    padding: 4px 2px ;
    font-size: 11px ;
    min-height: 32px ;
    height: 32px ;
  }

  .btn {
    padding: 5px 10px;
    font-size: 11px;
  }

  .show-poster {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }

  .poster-placeholder {
    width: var(--poster-w-mobile); /* Using centralized mobile poster width */
    height: var(--poster-h-mobile); /* Using centralized mobile poster height */
  }

  /* Floating buttons now handled by components.css */
}

/* Landscape mobile adjustments */
@media (max-width: 768px) and (orientation: landscape) {
  .header {
    flex-direction: row;
    align-items: center;
  }

  .search-row {
    gap: 6px ;
  }

  .search-input {
    width: 100%;
  }

  .genre-filter {
    width: 60px;
    min-width: 60px;
  }

  .search-row .search-btn,
  .search-row .clear-search-btn,
  .search-row .advanced-search-btn {
    min-width: 60px;
  }

  /* Floating buttons now handled by components.css */
}

/* === UNIFIED MOBILE CARD SYSTEM (â‰¤768px) === */
@media (max-width: 768px) {
  /* Mobile tokens using unified system */
  .mobile-v1 {
    --poster-w: var(--poster-w-mobile);
    --poster-h: var(--poster-h-mobile);
    --card-gap: var(--card-gap-mobile);
    --card-pad-y: var(--card-pad-y-mobile);
    --card-pad-x: var(--card-pad-x-mobile);
    --meta-title-size: var(--meta-title-size-mobile);
    --meta-line: var(--meta-line-mobile);
  }

  /* UNIFIED: Mobile card layout using consistent variables */
  .mobile-v1 .show-card {
    display: grid ;
    grid-template-columns: var(--poster-w-mobile) 1fr ;
    gap: var(--card-gap-mobile) ;
    padding: var(--card-pad-y-mobile) var(--card-pad-x-mobile) ;
    background: var(--card-bg);
    border: var(--card-border);
    width: 100% ;
    max-width: 100% ;
    border-radius: var(--card-radius);
    align-items: start;
    margin: 0 0 16px ;
    box-sizing: border-box ;
    box-shadow: var(--card-shadow);
    min-height: var(--poster-h-mobile);
  }

  /* UNIFIED: Fallback mobile layout for all cards */
  .show-card {
    display: grid ;
    grid-template-columns: var(--poster-w-mobile) 1fr ;
    gap: var(--card-gap-mobile) ;
    padding: var(--card-pad-y-mobile) var(--card-pad-x-mobile) ;
    background: var(--card-bg);
    border: var(--card-border);
    width: 100% ;
    max-width: 100% ;
    border-radius: var(--card-radius);
    align-items: start;
    margin: 0 0 16px ;
    box-sizing: border-box ;
    box-shadow: var(--card-shadow);
    min-height: var(--poster-h-mobile);
  }

  /* UNIFIED: Mobile details layout */
  .show-card .show-details {
    display: grid ;
    grid-template-rows: auto auto auto 1fr auto ;
    gap: 6px ;
    min-width: 0 ;
  }

  /* UNIFIED: Mobile actions styling */
  .show-card .show-actions {
    display: flex ;
    flex-direction: row ;
    flex-wrap: nowrap ;
    gap: 6px ;
    align-items: center ;
    margin-top: 8px ;
    justify-content: space-between ;
  }

  .show-card .show-actions .btn {
    flex: 1 ;
    min-width: 0 ;
    font-size: 11px ;
    padding: 6px 8px ;
    min-height: 32px ;
  }

  /* UNIFIED: Fallback mobile title and meta styling */
  .show-card .show-title {
    font-size: var(--meta-title-size-mobile);
    line-height: var(--meta-line-mobile) ;
    margin: 0 0 6px ;
    padding: 0 ;
    font-weight: 600;
    color: var(--color-text, #121212);
  }

  .show-card .show-meta {
    font-size: 13px;
    color: var(--color-text-secondary, #666);
    margin: 0 0 6px ;
    padding: 0 ;
    line-height: 1.3 ;
  }

  .show-card .show-overview {
    font-size: 14px;
    line-height: 1.4 ;
    margin: 0 0 8px ;
    padding: 0 ;
    color: var(--color-text, #121212);
  }

  /* UNIFIED: Mobile details layout with actions at bottom */
  .mobile-v1 .show-card .show-details {
    display: grid ;
    grid-template-rows: auto auto auto 1fr auto ;
    gap: 6px ;
    min-width: 0 ;
  }

  /* UNIFIED: Mobile actions styling */
  .mobile-v1 .show-card .show-actions {
    display: flex ;
    flex-direction: row ;
    flex-wrap: nowrap ;
    gap: 6px ;
    align-items: center ;
    margin-top: 8px ;
    justify-content: space-between ;
  }

  /* UNIFIED: Mobile poster styling */
  .mobile-v1 .show-card .poster-button {
    grid-column: 1;
    align-self: start;
  }

  .mobile-v1 .show-card .show-poster,
  .mobile-v1 .show-card .poster-placeholder {
    width: var(--poster-w-mobile);
    height: var(--poster-h-mobile);
    object-fit: cover;
    border-radius: var(--card-radius);
    display: block;
  }

  /* UNIFIED: Fallback mobile poster styling */
  .show-card .show-poster,
  .show-card .poster-placeholder {
    width: var(--poster-w-mobile);
    height: var(--poster-h-mobile);
    object-fit: cover;
    border-radius: var(--card-radius);
    display: block;
  }

  /* Meta/details */
  .mobile-v1 .show-card .show-details {
    grid-column: 2;
    min-width: 0 ;
    overflow: hidden ;
    align-self: start;
  }
  .mobile-v1 .show-card .show-title {
    font-size: var(--meta-title-size-mobile);
    line-height: var(--meta-line-mobile) ;
    margin: 0 0 6px ;
    padding: 0 ;
    overflow: hidden ;
    text-overflow: ellipsis ;
    font-weight: 600;
    color: var(--color-text, #121212);
  }

  .mobile-v1 .show-card .show-meta {
    font-size: 13px;
    color: var(--color-text-secondary, #666);
    margin: 0 0 6px ;
    padding: 0 ;
    line-height: 1.3 ;
  }
  .mobile-v1 .show-card .show-overview {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    line-clamp: 2; /* FIXED: Added standard property for compatibility */
    overflow: hidden ;
    text-overflow: ellipsis ;
    margin: 0 ;
    padding: 0 ;
    line-height: 1.2 ;
  }

  .mobile-v1 .show-card .show-actions .btn,
  .mobile-v1 .show-card .show-actions button {
    flex: 1 ;
    min-width: 0 ;
    min-height: 32px ; /* FIXED: Increased from 24px */
    padding: 6px 8px ; /* FIXED: Increased padding */
    font-size: 11px ; /* FIXED: Increased from 10px */
    margin: 0 ;
  }

  /* Sub-elements (bring parity back here) */
  .mobile-v1 .show-card .rating-container {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 0; /* Remove top margin */
    font-size: 12px; /* Smaller font */
  }
  .mobile-v1 .show-card .star-rating {
    display: inline-flex;
    gap: 1px; /* Reduced gap */
    font-size: 10px; /* Smaller stars */
  }
  .mobile-v1 .show-card .like-dislike {
    display: inline-flex;
    gap: 4px; /* Reduced gap */
    font-size: 10px; /* Smaller buttons */
  }

  /* FIXED: Mobile list container spacing */
  .mobile-v1 .list-container {
    padding: 8px ; /* FIXED: Increased from 4px */
    gap: 0 ;
  }

  /* UNIFIED: Card spacing using consistent margins */
  .mobile-v1 .show-card + .show-card {
    margin-top: 16px ;
  }

  .show-card + .show-card {
    margin-top: 16px ;
  }

  /* UNIFIED: List container spacing */
  .list-container {
    padding: 12px ;
    gap: 0 ;
  }

  /* Mobile-only animation (scoped + a11y) */
  @keyframes mobileCardSlideIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @media (prefers-reduced-motion: no-preference) {
    .mobile-v1 .show-card {
      animation: mobileCardSlideIn 0.28s ease-out;
    }
  }
  @media (prefers-reduced-motion: reduce) {
    .mobile-v1 .show-card {
      animation: none ;
    }
  }
}

/* === MP-2.2b CLEANUP NOTE ===
   Remove any other `.show-card` rules in this file that sit OUTSIDE the block above
   (especially unfenced 2-col grids or unfenced animation hooks). The single block
   above is the only valid source of truth for mobile cards. */

/* Mobile header fix: neutralize legacy grid and center title */
header.header {
  display: flex; /* PART2C */
  flex-direction: column ;
  align-items: center ;
  gap: 8px ;
  grid-template-columns: unset ; /* safety nuke */
}

header.header .app-title {
  flex: 1 1 auto ;
  text-align: center ;
  line-height: 1.2 ;
}

header.header .username-snark {
  min-width: 0; /* PART2C */
  width: 100%; /* PART2C */
  text-align: center ;
  order: 2 ; /* stack under title */
}

/* Notifications: minor mobile adjustments */
@media (max-width: 480px) {
  .toast {
    max-width: 96vw;
  }
  /* No overflow/transform on header or .top-search ancestors touched */
}

/* ========== STEP 7 mobile spacing + language placement ========== */
@media (max-width: 480px) {
  /* Tighten header -> search without touching sticky mechanics */
  .header {
    margin-bottom: 8px ;
  }
  .top-search {
    margin-top: 6px;
  } /* do not change position:sticky ancestors */

  /* Default: language inline with account button */
  .header[data-lang-layout='inline'] .account-controls {
    flex-wrap: nowrap;
    justify-content: center; /* titles centered above; controls centered below */
    gap: 8px;
  }
  .header[data-lang-layout='inline'] #accountBtn,
  .header[data-lang-layout='inline'] #langSelect {
    font-size: 14px;
  }

  /* Variant: language on its own row (under account button) */
  .header[data-lang-layout='row'] .account-controls {
    display: grid;
    grid-template-columns: 1fr; /* stack */
    row-gap: 6px;
    justify-items: center;
  }
  .header[data-lang-layout='row'] #langSelect {
    width: auto;
    min-width: 140px;
  }
}

/* Tablet/Desktop: push controls to right edge, keep tidy spacing */
@media (min-width: 481px) {
  .header .header-bar {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .header .account-controls {
    margin-left: auto; /* send to top-right */
  }
}

/* Curated rows: mobile spacing */
@media (max-width: 480px) {
  .curated-section .section-title {
    font-size: 1.05rem;
  }
  .curated-row {
    grid-auto-columns: 58vw;
  } /* wider cards on narrow phones */
}

```

## _legacy_v1\www\styles\your-shows.css
```
/**
 * Your Shows Layout System - v28.82
 * Unified CSS for Your Shows section with proper specificity hierarchy
 * Eliminates !important declarations and consolidates layout/visual rules
 */

/* === DESIGN TOKENS === */
:root {
  /* Frame gutters */
  --home-gutter: 16px;
  --home-frame-gutter: 32px;
  
  /* Rail sizing */
  --rail-col-w: 260px;
  --rail-col-w-sm: 200px;
  --rail-gap: 16px;
  
  /* Breakpoints (canonical) */
  --bp-xs: 480px;
  --bp-sm: 640px;
  --bp-md: 768px;
  --bp-lg: 1024px;
  --bp-xl: 1280px;
}

/* === FRAME NORMALIZATION === */
/* Remove upstream caps so Home can actually reach the frame width */
main#panels,
#homeSection,
.home-content {
  box-sizing: border-box;
  width: 100%;
  max-width: none;
}

/* Top-level group wrappers: fill width; zero inner L/R padding */
#group-1-your-shows.home-group,
#group-2-community.home-group,
#group-3-for-you.home-group,
#group-4-theaters.home-group {
  box-sizing: border-box;
  width: 100%;
  max-width: none;
  margin-left: 0;
  margin-right: 0;
  padding-left: var(--home-gutter, 32px);
  padding-right: var(--home-gutter, 32px);
}

/* === PANELS OWN THE SINGLE GUTTER === */
/* Apply 32px left/right padding to all Home panels */
#homeSection .home-preview-row,
#homeSection .section-content,
#group-1-your-shows section,
#group-2-community section {
  padding-left: var(--home-gutter, 32px);
  padding-right: var(--home-gutter, 32px);
}

/* === RAILS: GRID COLUMN-FLOW WITH ZERO PADDING === */
/* Deepest rails are grid with column flow, zero padding, scroll on X only */
:is(#group-1-your-shows,
    #group-2-community,
    #group-3-for-you,
    #group-4-theaters)
  :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll) {
  
  display: grid;
  grid-auto-flow: column;                   /* lay items leftâ†’right (RTL flips logically) */
  grid-auto-columns: var(--rail-col-w);
  gap: var(--rail-gap);
  padding: 0;                               /* zero rail padding */
  min-width: 0;
  overflow-x: auto;                         /* scroll on X only */
  overflow-y: hidden;
  scroll-snap-type: inline mandatory;
}


/* === DEEP RAIL GRID RULES === */
/* Cover both variants we saw: #currentlyWatchingScroll and .preview-row-scroll */
#homeSection #currentlyWatchingScroll,
#homeSection .preview-row-scroll {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: var(--rail-col-w, 224px);
  gap: var(--rail-gap, 12px);
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: inline mandatory;
  padding: 0;
}

#homeSection #currentlyWatchingScroll > *,
#homeSection .preview-row-scroll > * { 
  scroll-snap-align: start; 
}

/* Responsive rail sizing */
@media (max-width: var(--bp-md)) {
  :is(#group-1-your-shows,
      #group-2-community,
      #group-3-for-you)
    :is(.preview-row-container, .preview-row-scroll, .row-inner, #currentlyWatchingScroll) {
    grid-auto-columns: var(--rail-col-w-sm);
  }
  
}

/* === CARD SNAP TARGETS === */
/* Cards snap cleanly and don't exceed panel width */
#homeSection .card { 
  scroll-snap-align: start; 
  min-width: 0; 
}

#homeSection .card img, 
#homeSection .card picture { 
  display: block; 
  max-width: 100%; 
}

/* === YOUR SHOWS: ACTIONS LAYOUT (2Ã—2), CENTERED === */
#group-1-your-shows :is(.actions, .card-actions) {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  justify-items: center;
  align-items: center;
  padding: 8px 0;
}

#group-1-your-shows :is(.actions, .card-actions)
  :is(button, [role="button"], a.button) {
  width: 100%;
  min-width: 0;
  justify-content: center;
}

/* Container query: 2 columns when card is wide enough */
@container (min-width: 260px) {
  #homeSection :is(.actions, .card-actions) { 
    grid-template-columns: repeat(2, 1fr); 
  }
}

#homeSection :is(.actions, .card-actions) :is(button, [role="button"], a.button) {
  width: 100%;
  min-height: 36px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  justify-content: center;
}

/* Container query fallback for older browsers */
@supports not (container-type: inline-size) {
  #homeSection :is(.actions, .card-actions) { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 8px; 
  }
  
  #homeSection :is(.actions, .card-actions) > * { 
    flex: 1 1 150px; 
    min-height: 36px; 
  }
}

/* === HOME GROUPS VISUAL STYLING === */
.home-group {
  border-radius: 16px;
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

/* === YOUR SHOWS SPECIFIC STYLING === */
/* Ensure normal flow in the Your Shows group only */
#group-1-your-shows {
  display: block;
}

#group-1-your-shows > .home-preview-row {
  order: 0;
}

/* Style the Up Next row to match Currently Watching */
#group-1-your-shows #up-next-row.home-preview-row {
  margin: 16px 0;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 32px;  /* Fixed: use 32px to match home-layout.css */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* Currently Watching card actions grid */
.cw-card .action-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
}

.cw-card .action-grid .btn {
  width: 100%;
  min-height: 36px;
  font-weight: 600;
}

/* Next Up compact meta */
.nu-card .meta {
  font-size: 0.9rem;
  opacity: 0.85;
  margin-top: 8px;
}

.nu-card .meta .line { 
  margin-top: 2px; 
}

/* General card bits kept neutral; no TMDB link affordance */
.card .poster-wrap { 
  cursor: default; 
}

/* No surprise giant boxes */
#up-next-row, .up-next-row { 
  min-height: 0; 
  height: auto; 
}

/* === CARD SIZING ALIGNMENT === */
/* Card sizing alignment (use unified vars; do not hardcode px in other files) */
.preview-card,
.unified-card,
.tab-section .list-container .poster-card {
  width: var(--card-w);
  min-width: var(--card-w);
  max-width: var(--card-w);
}

.preview-card-poster,
.unified-card-poster {
  height: var(--card-h);
}

/* === VERTICAL RHYTHM === */
/* Normalize vertical rhythm (even spacing between containers) */
.home-content .home-group + .home-group { 
  margin-top: var(--section-gap); 
}

#quote-bar, .quote-bar { 
  margin: 0 0 var(--section-gap-lg); 
}

/* Remove legacy extra space from rows */
.home-content .preview-row,
.home-content .home-preview-row { 
  margin: 0; 
  /* Card styling handled by parent .home-group */
}

/* === SAFETY & RTL SUPPORT === */
/* Safety: prevent content from forcing tracks wider than panels */
#homeSection .preview-row-scroll * { 
  min-width: 0; 
}

/* RTL scroll behavior */
#homeSection .preview-row-scroll {
  scroll-behavior: smooth;
}

/* RTL-aware scroll indicators (if you have them) */
#homeSection .preview-row-scroll::before,
#homeSection .preview-row-scroll::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 20px;
  pointer-events: none;
  z-index: 1;
}

#homeSection .preview-row-scroll::before {
  left: 0;
  background: linear-gradient(to right, var(--bg, #fff), transparent);
}

#homeSection .preview-row-scroll::after {
  right: 0;
  background: linear-gradient(to left, var(--bg, #fff), transparent);
}

/* RTL flip scroll indicators */
[dir="rtl"] #homeSection .preview-row-scroll::before {
  left: auto;
  right: 0;
  background: linear-gradient(to left, var(--bg, #fff), transparent);
}

[dir="rtl"] #homeSection .preview-row-scroll::after {
  right: auto;
  left: 0;
  background: linear-gradient(to right, var(--bg, #fff), transparent);
}

/* === DARK MODE ADJUSTMENTS === */
/* Dark mode adjustments for preview row */
#group-1-your-shows .dark-mode .home-preview-row {
  background: none;
  border: none;
  border-radius: 0;
  padding: 0;
  box-shadow: none;
}

/* === COLLAPSED SECTIONS === */
/* Collapsed section styling for empty "Next Up" */
.home-preview-row.collapsed {
  padding: 8px 16px;
  min-height: auto;
}

.home-preview-row.collapsed .preview-row-container {
  display: none;
}

.home-preview-row.collapsed .preview-row-header {
  margin-bottom: 0;
}

.home-preview-row.collapsed .preview-row-title {
  font-size: 1rem;
  font-weight: 500;
  opacity: 0.7;
}

/* === MOBILE RESPONSIVE RULES === */
/* Mobile-specific adjustments without !important */
@media (max-width: var(--bp-sm)) {
  /* Preview row spacing for mobile */
  #group-1-your-shows .home-preview-row {
    margin: 12px 0;
    background: none;
    border: none;
    border-radius: 0;
    padding: 0;
    box-shadow: none;
  }

  /* Performance optimizations for mobile */
  .unified-card,
  .preview-card,
  .show-card {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); /* Lighter shadow */
    filter: none; /* Remove heavy filters */
  }

  /* Disable confetti and heavy animations on mobile */
  .confetti,
  .celebration-animation {
    display: none;
  }

  /* Reduce motion for better performance */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms;
      animation-iteration-count: 1;
      transition-duration: 0.01ms;
    }
  }

  /* Optimize scrolling performance */
  .preview-row-container,
  .carousel-container {
    will-change: transform;
    transform: translateZ(0); /* Force hardware acceleration */
  }

  /* Reduce blur effects on mobile */
  .blur,
  .backdrop-blur {
    filter: none;
    backdrop-filter: none;
  }
}

/* === LEGACY CLEANUP === */
/* Kill legacy width hacks on columns left by old CSS (scoped to home) */
.home-content .left-column,
.home-content .flickword-card {
  width: auto;
  max-width: none;
}

/* Remove any forced order/width from bingeMeter in home */
.home-content #bingeMeter {
  order: 0;
  flex-basis: auto;
  display: block;
}

/* Ensure no horizontal scroll on page container */

/* Home wrapper sizing */
#homeSection.home-content:not([hidden]) {
  display: block;              /* ensure it participates in normal flow */
  min-height: auto;            /* let content determine height naturally */
}

#panels { 
  isolation: isolate; /* guard against stray transforms creating new stacking/containing blocks */
}

/* Kill any accidental height caps on home area */
#homeSection { 
  height: auto; 
  max-height: none; 
  overflow: visible; 
}

/* If a card-ish "page shell" wraps home content and has a shadow, make sure it grows */
#homeSection .page-shell, 
#homeSection .container, 
#homeSection .wrapper {
  min-height: 100%; 
  height: auto; 
  overflow: visible;
}

/* Duplicate up-arrow: keep #scrollTopBtn, hide/remove any legacy arrow */
/* Common legacy selectors to neutralize; safe, layout-only */
.legacy-up, 
.up-arrow, 
.scroll-to-top, 
.fab .icon-up, 
.fab-up { 
  display: none; 
}

/* Guard against some ancestor creating a containing block that clips children */
/* If #appRoot or .panels accidentally has transform/contain set elsewhere, neutralize here */
#appRoot, 
#appRoot > .panels { 
  transform: none; 
  contain: none; 
}

/* Let app root height be determined by content naturally */
#appRoot {
  height: auto;
  min-height: 100vh;
}

```

## android\app\src\main\assets\public\assets\index-98a38141.css
```
.flickword-game{display:flex;flex-direction:column;gap:16px;padding:24px;max-width:450px;margin:0 auto}.fw-header{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.fw-header h3{font-size:18px;font-weight:700;color:var(--text, #ffffff);margin:0}.fw-stats{display:flex;gap:12px;font-size:12px;color:var(--muted, #888888)}.fw-streak,.fw-timer{font-weight:500}.fw-loading{display:flex;flex-direction:column;align-items:center;gap:16px;padding:32px 0}.fw-spinner{width:32px;height:32px;border:3px solid var(--line, #333333);border-top:3px solid var(--accent, #007AFF);border-radius:50%;animation:spin 1s linear infinite}.fw-loading p{color:var(--muted, #888888);font-size:14px;margin:0}.fw-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:4px;max-width:350px;margin:0 auto}.fw-tile{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;border:2px solid var(--line, #333333);border-radius:6px;background-color:var(--card, #1a1a1a);color:var(--text, #ffffff);transition:all .2s ease;min-height:50px;min-width:50px}.fw-tile.correct{background-color:#6aaa64;border-color:#6aaa64;color:#fff}.fw-tile.present{background-color:#c9b458;border-color:#c9b458;color:#fff}.fw-tile.absent{background-color:#787c7e;border-color:#787c7e;color:#fff}.fw-keyboard{display:flex;flex-direction:column;gap:6px;max-width:400px;margin:0 auto}.fw-kb-row{display:flex;gap:4px;justify-content:center}.fw-key{min-width:36px;height:48px;padding:0 8px;font-size:16px;font-weight:700;border:none;border-radius:6px;background-color:var(--btn, #333333);color:var(--text, #ffffff);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.fw-key:hover{background-color:var(--btn-hover, #444444)}.fw-key:active{transform:scale(.95)}.fw-key.correct{background-color:#6aaa64;color:#fff}.fw-key.present{background-color:#c9b458;color:#fff}.fw-key.absent{background-color:#787c7e;color:#fff}.fw-key-back,.fw-key-enter{min-width:60px;font-size:14px}.fw-actions{display:flex;gap:12px;justify-content:center;margin-top:16px}.fw-btn{padding:8px 16px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease}.fw-btn.fw-new-game{background-color:var(--accent, #007AFF);color:#fff}.fw-btn.fw-new-game:hover{background-color:var(--accent-hover, #0056CC)}.fw-btn.fw-close{background-color:var(--btn, #333333);color:var(--text, #ffffff)}.fw-btn.fw-close:hover{background-color:var(--btn-hover, #444444)}.fw-notification{position:fixed;top:20px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:8px;font-size:14px;font-weight:500;z-index:var(--z-nav);animation:notification-slide-in .3s ease-out}.fw-notification.success{background-color:#6aaa64;color:#fff}.fw-notification.error{background-color:#e74c3c;color:#fff}.fw-notification.info{background-color:var(--accent, #007AFF);color:#fff}@keyframes notification-slide-in{0%{opacity:0;transform:translate(-50%) translateY(-20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.fw-word-info{background-color:var(--card, #1a1a1a);border:1px solid var(--line, #333333);border-radius:8px;padding:12px;margin-bottom:16px}.fw-word-info p{margin:0;font-size:14px;color:var(--text, #ffffff)}.fw-word-info strong{color:var(--accent, #007AFF)}.game-stats-view{display:flex;flex-direction:column;gap:16px;padding:16px 0}.stats-actions{display:flex;gap:12px;justify-content:center}.btn-primary{padding:8px 16px;background-color:var(--accent, #007AFF);color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-primary:hover{background-color:var(--accent-hover, #0056CC)}.btn-secondary{padding:8px 16px;background-color:var(--btn, #333333);color:var(--text, #ffffff);border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-secondary:hover{background-color:var(--btn-hover, #444444)}@media (max-width: 480px){.flickword-game{max-width:400px;padding:20px}.fw-grid{max-width:320px;gap:3px}.fw-tile{font-size:22px;min-height:45px;min-width:45px}.fw-keyboard{max-width:360px}.fw-key{min-width:32px;height:42px;font-size:14px}.fw-key-back,.fw-key-enter{min-width:50px;font-size:12px}}@media (max-width: 320px){.fw-grid{max-width:280px;gap:2px}.fw-tile{font-size:20px;min-height:40px;min-width:40px}.fw-keyboard{max-width:300px}.fw-key{min-width:28px;height:38px;font-size:12px}.fw-key-back,.fw-key-enter{min-width:45px;font-size:11px}}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.-right-2{right:-.5rem}.-top-1{top:-.25rem}.-top-12{top:-3rem}.-top-2{top:-.5rem}.bottom-0{bottom:0}.bottom-20{bottom:5rem}.bottom-4{bottom:1rem}.left-0{left:0}.left-1\/2{left:50%}.left-4{left:1rem}.right-0{right:0}.right-1{right:.25rem}.right-1\.5{right:.375rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\.5{top:.375rem}.top-1\/4{top:25%}.top-2{top:.5rem}.top-4{top:1rem}.top-\[var\(--safe-top\,0px\)\]{top:var(--safe-top,0px)}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.ml-7{margin-left:1.75rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mt-0{margin-top:0}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-auto{margin-top:auto}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.line-clamp-3{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.aspect-\[16\/6\]{aspect-ratio:16/6}.aspect-\[2\/3\]{aspect-ratio:2/3}.aspect-video{aspect-ratio:16 / 9}.h-0\.5{height:.125rem}.h-1{height:.25rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-28{height:7rem}.h-3{height:.75rem}.h-32{height:8rem}.h-36{height:9rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\[231px\]{height:231px}.h-\[40px\]{height:40px}.h-\[80vh\]{height:80vh}.h-\[calc\(90vh-120px\)\]{height:calc(90vh - 120px)}.h-full{height:100%}.max-h-12{max-height:3rem}.max-h-16{max-height:4rem}.max-h-48{max-height:12rem}.max-h-60{max-height:15rem}.max-h-64{max-height:16rem}.max-h-72{max-height:18rem}.max-h-80{max-height:20rem}.max-h-96{max-height:24rem}.max-h-\[70vh\]{max-height:70vh}.max-h-\[75vh\]{max-height:75vh}.max-h-\[80svh\]{max-height:80svh}.max-h-\[90vh\]{max-height:90vh}.max-h-\[calc\(90vh-120px\)\]{max-height:calc(90vh - 120px)}.max-h-\[calc\(90vh-200px\)\]{max-height:calc(90vh - 200px)}.min-h-\[200px\]{min-height:200px}.min-h-\[60px\]{min-height:60px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-\[154px\]{width:154px}.w-\[200px\]{width:200px}.w-\[68px\]{width:68px}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[16px\]{min-width:16px}.min-w-\[240px\]{min-width:240px}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-\[420px\]{max-width:420px}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-screen-2xl{max-width:1536px}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-2{--tw-translate-y: -.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-6{--tw-translate-x: 1.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0\.5{--tw-translate-y: .125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-1{--tw-rotate: 1deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes ping{75%,to{transform:scale(2);opacity:0}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-wait{cursor:wait}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.snap-x{scroll-snap-type:x var(--tw-scroll-snap-strictness)}.snap-mandatory{--tw-scroll-snap-strictness: mandatory}.snap-start{scroll-snap-align:start}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-\[repeat\(auto-fill\,154px\)\]{grid-template-columns:repeat(auto-fill,154px)}.grid-cols-\[repeat\(auto-fill\,minmax\(154px\,1fr\)\)\]{grid-template-columns:repeat(auto-fill,minmax(154px,1fr))}.grid-rows-\[1fr_1fr\]{grid-template-rows:1fr 1fr}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-around{justify-content:space-around}.justify-items-center{justify-items:center}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.text-balance{text-wrap:balance}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:16px}.rounded-md{border-radius:12px}.rounded-xl{border-radius:.75rem}.rounded-b-2xl{border-bottom-right-radius:1rem;border-bottom-left-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-\[var\(--line\)\]{border-color:var(--line)}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-current{border-color:currentColor}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-green-700{--tw-border-opacity: 1;border-color:rgb(21 128 61 / var(--tw-border-opacity, 1))}.border-line{border-color:var(--line)}.border-neutral-600{--tw-border-opacity: 1;border-color:rgb(82 82 82 / var(--tw-border-opacity, 1))}.border-neutral-700{--tw-border-opacity: 1;border-color:rgb(64 64 64 / var(--tw-border-opacity, 1))}.border-neutral-700\/60{border-color:#40404099}.border-neutral-800\/50{border-color:#26262680}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white\/10{border-color:#ffffff1a}.border-white\/15{border-color:#ffffff26}.border-white\/5{border-color:#ffffff0d}.border-yellow-200{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.bg-\[var\(--btn\)\]{background-color:var(--btn)}.bg-accent{background-color:var(--accent)}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/60{background-color:#0009}.bg-black\/85{background-color:#000000d9}.bg-black\/90{background-color:#000000e6}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\/30{background-color:#3b82f64d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-900\/40{background-color:#1e3a8a66}.bg-card{background-color:var(--card)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:var(--muted)}.bg-neutral-600{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.bg-neutral-800\/40{background-color:#26262666}.bg-neutral-800\/80{background-color:#262626cc}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.bg-neutral-900\/70{background-color:#171717b3}.bg-neutral-900\/80{background-color:#171717cc}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity, 1))}.bg-neutral-950\/50{background-color:#0a0a0a80}.bg-neutral-950\/80{background-color:#0a0a0acc}.bg-pink-500{--tw-bg-opacity: 1;background-color:rgb(236 72 153 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity: .5}.bg-opacity-75{--tw-bg-opacity: .75}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.from-black{--tw-gradient-from: #000 var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-fuchsia-500{--tw-gradient-from: #d946ef var(--tw-gradient-from-position);--tw-gradient-to: rgb(217 70 239 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-black\/40{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(0 0 0 / .4) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #ec4899 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-amber-400{--tw-gradient-to: #fbbf24 var(--tw-gradient-to-position)}.to-black\/0{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:.25rem}.p-1\.5{padding:.375rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-0\.5{padding-left:.125rem;padding-right:.125rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-20{padding-bottom:5rem}.pb-4{padding-bottom:1rem}.pl-6{padding-left:1.5rem}.pr-12{padding-right:3rem}.pr-6{padding-right:1.5rem}.pr-\[100vw\]{padding-right:100vw}.pt-16{padding-top:4rem}.pt-2{padding-top:.5rem}.pt-24{padding-top:6rem}.pt-32{padding-top:8rem}.pt-4{padding-top:1rem}.pt-48{padding-top:12rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[length\:var\(--font-sm\,11px\)\]{font-size:var(--font-sm,11px)}.text-\[length\:var\(--font-sm\,12px\)\]{font-size:var(--font-sm,12px)}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-\[1\.05\]{line-height:1.05}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-wide{letter-spacing:.025em}.text-\[var\(--text\)\]{color:var(--text)}.text-accent{color:var(--accent)}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-neutral-100{--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1))}.text-neutral-200{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity, 1))}.text-neutral-300{--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.text-neutral-400{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity: 1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-red-900{--tw-text-opacity: 1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow-\[0_0_20px_rgba\(0\,0\,0\,0\.5\)\]{--tw-shadow: 0 0 20px rgba(0,0,0,.5);--tw-shadow-colored: 0 0 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity, 1))}.ring-blue-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.ring-opacity-50{--tw-ring-opacity: .5}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\[0_1px_0_rgba\(255\,255\,255\,0\.35\)\]{--tw-drop-shadow: drop-shadow(0 1px 0 rgba(255,255,255,.35));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[transform\,box-shadow\,background-color\]{transition-property:transform,box-shadow,background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-700{transition-duration:.7s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.\[text-wrap\:balance\]{text-wrap:balance}:root{--safe-top: env(safe-area-inset-top, 0px)}:root{color-scheme:dark;--bg: #0f1115;--card: #171a21;--muted: #a9b3c1;--text: #e6eaf0;--line: #242a33;--accent: #4da3ff;--btn: #232a34;--btn2: #1c222b;--shadow: 0 6px 24px rgba(0,0,0,.35)}[data-theme=light]{color-scheme:light;--bg: #ffffff;--card: #f8fafc;--muted: #64748b;--text: #1e293b;--line: #e2e8f0;--accent: #3b82f6;--btn: #f1f5f9;--btn2: #e2e8f0;--shadow: 0 6px 24px rgba(0,0,0,.1)}html,body,#root{height:100%;background:var(--bg);color:var(--text);transition:background-color .3s ease,color .3s ease}:root{--mobile-nav-height: 80px}@media (max-width: 1024px){html{height:100lvh;overflow:hidden}body{height:100lvh;margin:0;padding:0;overflow-y:auto;overflow-x:hidden}main{min-height:calc(100lvh - var(--mobile-nav-height));padding-bottom:var(--mobile-nav-height)}.mobile-nav{position:fixed;bottom:0;left:0;right:0;z-index:var(--z-nav);max-height:100lvh;display:flex;visibility:visible;opacity:1;transform:translateZ(0);-webkit-backface-visibility:hidden}}.poster-2x3{aspect-ratio:2 / 3}[data-cards]::-webkit-scrollbar{height:8px}[data-cards]::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:9999px}button:focus-visible{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}.btn{border-radius:.75rem;--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1));padding:.375rem .75rem;font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transition-timing-function:cubic-bezier(0,0,.2,1)}.btn:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1));--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.btn:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input:focus-visible{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}.game-modal{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--z-modal);display:flex;align-items:center;justify-content:center;padding:20px}.gm-dialog{position:fixed;background:var(--card, #171a21);border-radius:16px;box-shadow:0 20px 40px #0000004d;width:min(90vw,500px);max-width:500px;max-height:90vh;overflow:hidden;animation:modalFadeIn .3s ease-out;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column}.gm-draggable{transition:transform .1s ease-out}.gm-draggable:not(.gm-dragging){transition:transform .2s ease-out}.gm-drag-handle{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.gm-drag-handle:active{cursor:grabbing}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.gm-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--line, #242a33);background:var(--bg, #0f1115)}.gm-header h3{margin:0;font-size:1.25rem;font-weight:700;color:var(--text, #e6eaf0)}.gm-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--muted, #a9b3c1);padding:4px;border-radius:4px;transition:all .2s ease}.gm-close:hover{background:var(--line, #242a33);color:var(--text, #e6eaf0)}.gm-body{padding:16px;overflow:auto;display:flex;flex-direction:column;flex:1;min-height:0}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px}.stat-item{display:flex;flex-direction:column;align-items:center;padding:8px;background:var(--bg, #0f1115);border-radius:8px;border:1px solid var(--line, #242a33)}.stat-label{font-size:.75rem;font-weight:600;color:var(--muted, #a9b3c1);text-transform:uppercase;letter-spacing:.05em;margin-bottom:4px}.stat-value{font-size:1.25rem;font-weight:700;color:var(--text, #e6eaf0)}.game-stats-view{text-align:center}.stats-actions{display:flex;gap:12px;justify-content:center;margin-top:24px}.btn-primary{padding:12px 24px;background:linear-gradient(135deg,var(--accent, #4da3ff),#3b82f6);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .15s ease-out}.btn-primary:hover{transform:scale(1.05);box-shadow:0 4px 12px #4da3ff4d}.btn-primary:active{transform:scale(.95);box-shadow:inset 0 2px 4px #0003}.btn-secondary{padding:12px 24px;background:var(--card, #171a21);color:var(--text, #e6eaf0);border:1px solid var(--line, #242a33);border-radius:8px;font-weight:600;cursor:pointer;transition:all .15s ease-out}.btn-secondary:hover{background:var(--line, #242a33);transform:scale(1.05);box-shadow:0 2px 8px #0003}.btn-secondary:active{transform:scale(.95);box-shadow:inset 0 2px 4px #0003}.youtube-player-container{width:100%;display:flex;flex-direction:column;background:var(--card, #171a21);border-radius:12px;overflow:hidden}.control-btn{background:transparent;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;color:var(--text, #e6eaf0);font-size:.875rem;display:flex;align-items:center;justify-content:center}.rotation-active{color:var(--accent, #4da3ff)!important;font-weight:600}.rotation-inactive{color:var(--muted, #a9b3c1)}.player-loading{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--card, #171a21);color:var(--text, #e6eaf0)}.loading-spinner{width:40px;height:40px;border:3px solid var(--line, #242a33);border-top:3px solid var(--accent, #4da3ff);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.youtube-player{width:100%;height:100%}.youtube-player-error{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--card, #171a21);border-radius:12px}.error-content{text-align:center;color:var(--text, #e6eaf0)}.error-content h3{margin:0 0 12px;font-size:1.125rem;font-weight:700}.error-content p{margin:0 0 16px;color:var(--muted, #a9b3c1)}.retry-btn{background:var(--accent, #4da3ff);color:#fff;border:none;border-radius:8px;padding:10px 20px;font-weight:600;cursor:pointer;transition:all .2s ease}.retry-btn:hover{background:#3b82f6;transform:translateY(-1px)}.trivia-game{width:100%;height:100%;display:flex;flex-direction:column;padding:16px;background:transparent}.trivia-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--text, #e6eaf0)}.trivia-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-shrink:0}.trivia-header h3{margin:0;font-size:1.125rem;font-weight:700;color:var(--text, #e6eaf0)}.trivia-progress{display:flex;align-items:center;gap:12px;font-size:.875rem;color:var(--muted, #a9b3c1)}.progress-bar{width:100px;height:6px;background:var(--line, #242a33);border-radius:3px;overflow:hidden}.progress-fill{height:100%;background:var(--accent, #4da3ff);transition:width .3s ease}.trivia-question{margin-bottom:24px;flex-shrink:0}.question-meta{display:flex;gap:12px;margin-bottom:12px}.category,.difficulty{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.category{background:var(--accent, #4da3ff);color:#fff}.difficulty{background:var(--line, #242a33);color:var(--muted, #a9b3c1)}.trivia-question h4{margin:0;font-size:1.125rem;font-weight:600;color:var(--text, #e6eaf0);line-height:1.4}.trivia-options{display:flex;flex-direction:column;gap:12px;margin-bottom:20px;flex:1}.option-btn{padding:16px 20px;border:2px solid var(--line, #242a33);border-radius:8px;background:var(--card, #171a21);color:var(--text, #e6eaf0);font-size:.875rem;font-weight:500;text-align:left;cursor:pointer;transition:all .2s ease}.option-btn:hover:not(:disabled){border-color:var(--accent, #4da3ff);background:var(--bg, #0f1115)}.option-btn.correct{border-color:#20b265;background:rgba(32,178,101,.1);color:#20b265}.option-btn.incorrect{border-color:#ef4444;background:rgba(239,68,68,.1);color:#ef4444}.option-btn.disabled{opacity:.5;cursor:not-allowed}.trivia-explanation{padding:16px;background:var(--bg, #0f1115);border-radius:8px;border-left:4px solid var(--accent, #4da3ff);margin-bottom:20px;flex-shrink:0}.trivia-explanation p{margin:0;font-size:.875rem;color:var(--muted, #a9b3c1);line-height:1.4}.trivia-actions{display:flex;gap:12px;justify-content:center;flex-shrink:0}.trivia-completed{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:var(--text, #e6eaf0)}.trivia-completed h3{margin:0 0 24px;font-size:1.5rem;font-weight:700}.score-display{margin-bottom:24px}.score-circle{display:flex;flex-direction:column;align-items:center;justify-content:center;width:120px;height:120px;border:4px solid var(--line, #242a33);border-radius:50%;background:var(--card, #171a21)}.score-percentage{font-size:2rem;font-weight:700;margin-bottom:4px}.score-fraction{font-size:.875rem;color:var(--muted, #a9b3c1)}.score-message{margin-bottom:24px}.score-message p{margin:0;font-size:1rem;color:var(--text, #e6eaf0)}.completion-actions{display:flex;gap:12px;margin-bottom:20px}.pro-upsell{padding:12px 16px;background:rgba(77,163,255,.1);border:1px solid var(--accent, #4da3ff);border-radius:8px;max-width:300px}.pro-upsell p{margin:0;font-size:.875rem;color:var(--accent, #4da3ff);text-align:center}.trivia-stats{margin-top:8px}.trivia-stats .stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:0}.trivia-stats .stat-item{display:flex;flex-direction:column;align-items:center;padding:6px 4px;background:var(--bg, #0f1115);border-radius:6px;border:1px solid var(--line, #242a33)}.trivia-stats .stat-label{font-size:.625rem;font-weight:600;color:var(--muted, #a9b3c1);text-transform:uppercase;letter-spacing:.05em;margin-bottom:2px}.trivia-stats .stat-value{font-size:1rem;font-weight:700;color:var(--text, #e6eaf0)}.z-base{z-index:var(--z-base)}.z-nav{z-index:var(--z-nav)}.z-dropdown{z-index:var(--z-dropdown)}.z-overlay{z-index:var(--z-overlay)}.z-modal{z-index:var(--z-modal)}.z-toast{z-index:var(--z-toast)}.touch-pan-y{touch-action:pan-y}.touch-none{touch-action:none}.swipe-surface{touch-action:pan-y}.swipe-surface--own{touch-action:none}.placeholder\:text-neutral-500::-moz-placeholder{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.placeholder\:text-neutral-500::placeholder{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.hover\:-translate-y-0\.5:hover{--tw-translate-y: -.125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-\[1\.02\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:transform:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:bg-accent:hover{background-color:var(--accent)}.hover\:bg-blue-500\/30:hover{background-color:#3b82f64d}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-muted:hover{background-color:var(--muted)}.hover\:bg-neutral-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.hover\:bg-pink-600:hover{--tw-bg-opacity: 1;background-color:rgb(219 39 119 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/10:hover{background-color:#ffffff1a}.hover\:bg-yellow-600:hover{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.hover\:bg-opacity-10:hover{--tw-bg-opacity: .1}.hover\:bg-opacity-20:hover{--tw-bg-opacity: .2}.hover\:text-blue-300:hover{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.hover\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-neutral-200:hover{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:opacity-70:hover{opacity:.7}.hover\:opacity-80:hover{opacity:.8}.hover\:opacity-90:hover{opacity:.9}.hover\:shadow-\[0_0_30px_rgba\(0\,0\,0\,0\.8\)\]:hover{--tw-shadow: 0 0 30px rgba(0,0,0,.8);--tw-shadow-colored: 0 0 30px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-accent:focus{--tw-ring-color: var(--accent)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-opacity-50:focus{--tw-ring-opacity: .5}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-\[var\(--accent\)\]:focus-visible{--tw-ring-color: var(--accent)}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.active\:translate-y-0:active{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:shadow-inner:active{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:opacity-60:disabled{opacity:.6}@media (min-width: 640px){.sm\:block{display:block}.sm\:inline{display:inline}.sm\:h-10{height:2.5rem}.sm\:h-\[44px\]{height:44px}.sm\:w-\[72px\]{width:72px}.sm\:p-4{padding:1rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-6{padding-top:1.5rem;padding-bottom:1.5rem}.sm\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\:text-base{font-size:1rem;line-height:1.5rem}}@media (min-width: 768px){.md\:col-span-1{grid-column:span 1 / span 1}.md\:block{display:block}.md\:hidden{display:none}.md\:aspect-\[16\/5\]{aspect-ratio:16/5}.md\:min-w-\[360px\]{min-width:360px}.md\:max-w-\[560px\]{max-width:560px}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:p-5{padding:1.25rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-base{font-size:1rem;line-height:1.5rem}.md\:text-lg{font-size:1.125rem;line-height:1.75rem}}@media (min-width: 1024px){.lg\:bottom-24{bottom:6rem}.lg\:bottom-8{bottom:2rem}.lg\:left-8{left:2rem}.lg\:right-8{right:2rem}.lg\:block{display:block}.lg\:hidden{display:none}.lg\:aspect-\[16\/4\]{aspect-ratio:16/4}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:pb-0{padding-bottom:0}.lg\:text-6xl{font-size:3.75rem;line-height:1}}@media (prefers-color-scheme: dark){.dark\:border-blue-700{--tw-border-opacity: 1;border-color:rgb(29 78 216 / var(--tw-border-opacity, 1))}.dark\:border-blue-800{--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\:border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\:border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\:border-red-800{--tw-border-opacity: 1;border-color:rgb(153 27 27 / var(--tw-border-opacity, 1))}.dark\:border-yellow-800{--tw-border-opacity: 1;border-color:rgb(133 77 14 / var(--tw-border-opacity, 1))}.dark\:bg-blue-800\/30{background-color:#1e40af4d}.dark\:bg-blue-900{--tw-bg-opacity: 1;background-color:rgb(30 58 138 / var(--tw-bg-opacity, 1))}.dark\:bg-blue-900\/20{background-color:#1e3a8a33}.dark\:bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.dark\:bg-green-900\/20{background-color:#14532d33}.dark\:bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity, 1))}.dark\:bg-red-900\/20{background-color:#7f1d1d33}.dark\:bg-yellow-900\/20{background-color:#713f1233}.dark\:text-blue-100{--tw-text-opacity: 1;color:rgb(219 234 254 / var(--tw-text-opacity, 1))}.dark\:text-blue-200{--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.dark\:text-purple-200{--tw-text-opacity: 1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.dark\:text-red-100{--tw-text-opacity: 1;color:rgb(254 226 226 / var(--tw-text-opacity, 1))}.dark\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.dark\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\:text-yellow-200{--tw-text-opacity: 1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.dark\:hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-gray-200:hover{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}}@keyframes flicklet-scroll-x{0%{transform:translate3d(100%,0,0)}to{transform:translate3d(-100%,0,0)}}.f-marquee-rail{mask-image:linear-gradient(to right,transparent,black 8%,black 92%,transparent);-webkit-mask-image:linear-gradient(to right,transparent,black 8%,black 92%,transparent);position:relative;z-index:var(--z-base);overflow:hidden}.f-marquee-scroll{animation:flicklet-scroll-x var(--marquee-duration, 30s) linear infinite;will-change:transform}.f-marquee-rail[data-pause-on-hover=true]:hover .f-marquee-scroll{animation-play-state:paused}@media (prefers-reduced-motion: reduce){.f-marquee-scroll{animation:none}}html[data-density=compact][data-compact-mobile-v1=true]{--space-1: 4px;--space-2: 8px;--space-3: 12px;--space-4: 16px;--radius: 12px;--poster-w: 160px;--poster-h: calc(var(--poster-w) * 1.5);--font-sm: 13px;--font-md: 14.5px;--font-lg: 16.5px}html[data-compact-mobile-v1=true] [data-page=home]{--home-header-gap: var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] h1{margin-bottom:var(--home-header-gap)}html[data-compact-mobile-v1=true] [data-page=home] [data-rail]{padding-inline:var(--space-2, 8px);padding-block:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] [data-cards]{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=home] [data-rail] h2{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] .grid{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true][data-settings-sheet=true]{body {overflow: hidden;}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet-overlay{z-index:var(--z-nav);animation:settings-sheet-fade-in .2s ease-out}@keyframes settings-sheet-fade-in{0%{opacity:0}to{opacity:1}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{animation:settings-sheet-slide-up .3s ease-out;z-index:var(--z-modal);padding-top:var(--space-4, 16px);padding-bottom:env(safe-area-inset-bottom);--sheet-padding: var(--space-4, 16px);--sheet-gap: var(--space-3, 12px);--sheet-radius: var(--radius, 12px)}@keyframes settings-sheet-slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls{display:flex;background-color:var(--muted, #f5f5f5);border-radius:var(--radius, 12px);padding:var(--space-1, 4px);margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button{flex:1;padding:var(--space-2, 8px);border:none;border-radius:calc(var(--radius, 12px) - var(--space-1, 4px));background-color:transparent;color:var(--muted, #666666);font-size:var(--font-sm, 13px);font-weight:400;cursor:pointer;transition:all .2s ease}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button.active{background-color:var(--bg, #ffffff);color:var(--text, #000000);font-weight:700}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area{flex:1;overflow-y:auto;padding:0 var(--space-4, 16px) var(--space-4, 16px);scrollbar-width:thin;scrollbar-color:var(--muted, #cccccc) transparent}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar{width:4px}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar-track{background:transparent}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar-thumb{background-color:var(--muted, #cccccc);border-radius:2px}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet h2{font-size:var(--font-lg, 16.5px);font-weight:700;margin:0 0 var(--space-3, 12px) 0;color:var(--text, #000000)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet h3{font-size:var(--font-md, 14.5px);font-weight:600;margin:0 0 var(--space-2, 8px) 0;color:var(--text, #000000)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet p{font-size:var(--font-sm, 13px);color:var(--muted, #666666);margin:0 0 var(--space-2, 8px) 0;line-height:1.4}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet button:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}@supports (padding: max(0px)){html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{background-color:var(--bg, #1a1a1a);color:var(--text, #ffffff)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls{background-color:var(--muted, #333333)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button.active{background-color:var(--bg, #1a1a1a);color:var(--text, #ffffff)}}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--z-sheet, 20000);display:flex;align-items:flex-end;background:rgba(0,0,0,.4)}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true]>*{width:100%;max-height:calc(100svh - env(safe-area-inset-top) - env(safe-area-inset-bottom));background:var(--bg, #fff);border-top-left-radius:var(--radius, 12px);border-top-right-radius:var(--radius, 12px);overflow:hidden;transform:translateY(0)}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] main,html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] [data-sheet-body],html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] .sheet-body,html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] .content{flex:1 1 auto;min-height:1px;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;z-index:var(--z-sheet, 20000)}.settings-sheet .panel{display:flex;flex-direction:column;width:100%;height:100%;background:var(--bg, #111)}.settings-sheet [role=tablist]{display:flex;gap:var(--space-2, 8px);padding:var(--space-3, 12px) var(--space-4, 16px);border-bottom:1px solid color-mix(in oklab,white 10%,transparent)}.settings-sheet [role=tab]{padding:var(--space-2, 8px) var(--space-3, 12px);border-radius:var(--radius, 12px)}.settings-sheet [role=tab].is-active{outline:2px solid color-mix(in oklab,white 25%,transparent);outline-offset:2px}.settings-sheet [data-sheet-body]{padding:var(--space-4, 16px)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-actions-container{display:block}html[data-compact-mobile-v1=true][data-actions-split=true] .actions[data-testid=cardv2-actions],html[data-compact-mobile-v1=true][data-actions-split=true] .mobile-actions{display:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);font-weight:500;transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu{border-radius:var(--radius, 12px);box-shadow:0 4px 12px #00000026;animation:compact-menu-fade-in .2s ease-out}@keyframes compact-menu-fade-in{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button{padding:var(--space-3, 12px);font-size:var(--font-sm, 13px);transition:background-color .2s ease}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-container{border-radius:var(--radius, 12px);transition:all .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-content{transition:transform .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-actions{border-radius:0 var(--radius, 12px) var(--radius, 12px) 0;padding:var(--space-2, 8px);transition:transform .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);font-weight:500;min-width:80px;transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button:focus{outline:2px solid var(--bg, #ffffff);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-indicator{right:var(--space-2, 8px);transition:opacity .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-actions-container{padding:var(--space-2, 8px);position:relative;z-index:var(--z-base)}@media (max-width: 767px){html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-container{touch-action:pan-y}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{min-height:44px}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu{background-color:var(--bg, #1a1a1a);border-color:var(--line, #333333)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button{color:var(--text, #ffffff)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button:hover{background-color:var(--muted, #333333)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-content,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-actions,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-indicator{transition:none;animation:none}}html[data-compact-mobile-v1=true] [data-page=lists]{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] [data-page=lists] .space-y-0{gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-title{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;line-height:1.3;max-height:2.6em}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-subline{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;line-height:1.2;max-height:1.2em}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{width:var(--poster-w, 136px);height:var(--poster-h, calc(var(--poster-w, 136px) * 1.5));-o-object-fit:cover;object-fit:cover;border-radius:var(--radius, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-container{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-content{padding:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-actions{padding:var(--space-2, 8px);gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card .actions .mobile-actions,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card .actions .desktop-actions{display:none!important}html[data-compact-mobile-v1=true] [data-page=lists] .compact-actions-container{display:block}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{min-height:200px;padding:var(--space-6, 24px) var(--space-4, 16px);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state p{margin-bottom:var(--space-2, 8px);font-size:var(--font-md, 14.5px);line-height:1.4}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state .text-xs{font-size:var(--font-sm, 13px);line-height:1.3}html[data-compact-mobile-v1=true] [data-page=lists] .list-header{margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-header h1{font-size:var(--font-lg, 16.5px);margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls{gap:var(--space-2, 8px);margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls label{font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls select{padding:var(--space-1, 4px) var(--space-2, 8px);font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .grid{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector{margin-bottom:var(--space-4, 16px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector .flex-wrap{gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector button{padding:var(--space-2, 8px) var(--space-3, 12px);font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .scroll-to-top{bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom));right:var(--space-4, 16px)}@media (max-width: 767px){html[data-compact-mobile-v1=true] [data-page=lists] .space-y-0{gap:var(--space-1, 4px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-header,html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{width:var(--poster-w, 136px);height:var(--poster-h, calc(var(--poster-w, 136px) * 1.5))}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{min-height:150px;padding:var(--space-4, 16px) var(--space-3, 12px)}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{border:1px solid var(--line, #333333)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{border:2px solid var(--line, #000000)}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{border:1px solid var(--line, #000000);border-radius:var(--radius, 12px)}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true] *,html[data-compact-mobile-v1=true] *:before,html[data-compact-mobile-v1=true] *:after{transition:none!important;animation:none!important}html[data-compact-mobile-v1=true] .settings-sheet-overlay,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .swipe-row-content,html[data-compact-mobile-v1=true] .swipe-row-actions,html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{transition:none!important;animation:none!important}}html[data-compact-mobile-v1=true] .compact-primary-action:focus-visible,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus-visible,html[data-compact-mobile-v1=true] .settings-sheet button:focus-visible,html[data-compact-mobile-v1=true] .swipe-action-button:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .settings-sheet .segmented-controls button:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .settings-sheet button[aria-label="Close Settings"]:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-width:44px;min-height:44px;padding:var(--space-3, 12px)}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{padding:var(--space-3, 12px) var(--space-4, 16px)}html[data-compact-mobile-v1=true] .swipe-action-button{padding:var(--space-3, 12px) var(--space-4, 16px);min-width:80px}html[data-compact-mobile-v1=true] [data-swipe-active=true]{will-change:transform}html[data-compact-mobile-v1=true] .swipe-row-content:not([data-swipe-active=true]){will-change:auto}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card{box-shadow:0 1px 3px #0000001a;border:1px solid var(--line, #e0e0e0)}html[data-compact-mobile-v1=true] [data-rail] [data-cards]{contain:layout paint}html[data-compact-mobile-v1=true] .compact-actions-container,html[data-compact-mobile-v1=true] .swipe-row-container{contain:layout}html[data-compact-mobile-v1=true] .compact-primary-action{background-color:var(--accent, #007AFF);color:var(--bg, #ffffff);border:1px solid var(--accent, #007AFF)}html[data-compact-mobile-v1=true] .compact-primary-action:hover,html[data-compact-mobile-v1=true] .compact-primary-action:focus{background-color:var(--accent-hover, #0056CC);color:var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-trigger{background-color:var(--muted, #f5f5f5);color:var(--text, #000000);border:1px solid var(--line, #e0e0e0)}html[data-compact-mobile-v1=true] .compact-overflow-trigger:hover,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus{background-color:var(--muted-hover, #e5e5e5);color:var(--text, #000000)}html[data-compact-mobile-v1=true] .compact-overflow-menu button{color:var(--text, #000000);background-color:var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-menu button:hover{background-color:var(--muted, #f5f5f5);color:var(--text, #000000)}html[data-compact-mobile-v1=true] .swipe-action-button{background-color:var(--bg, #ffffff);color:var(--accent, #007AFF);border:1px solid var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .swipe-action-button:hover{background-color:var(--accent-hover, #0056CC);color:var(--bg, #ffffff)}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] .compact-overflow-trigger{background-color:var(--muted, #333333);color:var(--text, #ffffff);border-color:var(--line, #555555)}html[data-compact-mobile-v1=true] .compact-overflow-trigger:hover,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus{background-color:var(--muted-hover, #444444);color:var(--text, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-menu{background-color:var(--bg, #1a1a1a);border-color:var(--line, #333333)}html[data-compact-mobile-v1=true] .compact-overflow-menu button{color:var(--text, #ffffff);background-color:var(--bg, #1a1a1a)}html[data-compact-mobile-v1=true] .compact-overflow-menu button:hover{background-color:var(--muted, #333333);color:var(--text, #ffffff)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{border:2px solid currentColor}html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet{border:2px solid var(--line, #000000)}}@media (max-width: 767px){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-height:44px;min-width:44px}html[data-compact-mobile-v1=true] .swipe-row-container{contain:strict}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card{box-shadow:0 1px 2px #0000001a}}html[data-compact-mobile-v1=true]{--z-bottom-nav: 1000;--z-fab: 1200;--z-menu: 15000;--z-sheet: 20000}:root{--z-overlay: 9998;--z-modal: 9999}.auth-modal-overlay,.username-prompt-modal-overlay{z-index:var(--z-overlay)}.auth-modal-content,.username-prompt-modal-content{z-index:var(--z-modal)}html[data-compact-mobile-v1=true] [data-bottom-nav],html[data-compact-mobile-v1=true] .bottom-nav{z-index:var(--z-bottom-nav, 1000);padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .fixed.bottom-4,html[data-compact-mobile-v1=true] .fixed.bottom-8,html[data-compact-mobile-v1=true] button[aria-label="Open Settings"],html[data-compact-mobile-v1=true] button[aria-label*=theme],html[data-compact-mobile-v1=true] button[aria-label*=Theme]{z-index:var(--z-fab, 1200)}html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] [role=menu]{z-index:var(--z-menu, 15000)}html[data-compact-mobile-v1=true] .settings-sheet-overlay,html[data-compact-mobile-v1=true] .settings-sheet{z-index:var(--z-sheet, 20000)}html[data-compact-mobile-v1=true] .swipe-row-actions{z-index:var(--z-menu, 15000)}html[data-compact-mobile-v1=true] .settings-sheet .content-area{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .swipe-row-container{padding-bottom:max(var(--space-1, 4px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .mobile-tabs,html[data-compact-mobile-v1=true] [data-mobile-nav]{padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] main{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .rail{margin-bottom:max(var(--space-3, 12px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .compact-actions-container{padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .curated-card,html[data-compact-mobile-v1=true] .tab-card{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card,html[data-compact-mobile-v1=true] .swipe-row-container{position:relative;z-index:var(--z-base)}html[data-compact-mobile-v1=true] .swipe-row-content{position:relative;z-index:calc(var(--z-base) + 1)}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{position:relative;z-index:var(--z-base)}@media (max-width: 767px){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-height:44px;margin-bottom:var(--space-1, 4px)}html[data-compact-mobile-v1=true] .settings-sheet{padding-bottom:max(var(--space-6, 24px),env(safe-area-inset-bottom))}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .swipe-row-actions{border:2px solid var(--line, #000000)}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .swipe-row-content,html[data-compact-mobile-v1=true] .swipe-row-actions{transition:none}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] .settings-sheet .content-area{background-color:var(--bg, #1a1a1a)}}.sheet-overlay{background:color-mix(in oklab,black 55%,transparent);z-index:var(--z-overlay, 9998);touch-action:none}.sheet-container{z-index:var(--z-modal, 9999);background:var(--card);border:1px solid var(--line)}.sheet-body{overscroll-behavior:contain}[role=tabpanel][hidden]{display:none!important}html{scrollbar-gutter:stable both-edges}@media (max-width: 768px){.card-mobile{position:relative;background:var(--surface-0,#fff);border-radius:12px;padding:8px calc(48px + env(safe-area-inset-right,0px)) 8px 8px;margin:0 0 12px;box-shadow:none;overflow:hidden}.card-mobile .swipe-bg{position:absolute;top:0;right:0;bottom:0;left:0;z-index:var(--z-base);pointer-events:none}.card-mobile .swipe-bg .reveal{position:absolute;top:0;bottom:0;width:40%;opacity:0;transition:opacity .12s ease-out}.card-mobile .swipe-bg .left{left:0;background:#22c55e}.card-mobile .swipe-bg .right{right:0;background:#0ea5e9}.card-mobile.dragging .swipe-bg .reveal{opacity:.14}.card-mobile .swipe-bg .hint{position:absolute;top:50%;transform:translateY(-50%);padding:6px 10px;border-radius:9999px;font-weight:600;background:color-mix(in srgb,#000 8%,#fff);color:#111;opacity:0;transition:opacity .12s;pointer-events:none;white-space:nowrap}.card-mobile .swipe-bg .hint.left{left:12px}.card-mobile .swipe-bg .hint.right{right:12px}.card-mobile .hint{opacity:0;transition:opacity .12s}.card-mobile.drag-left .swipe-bg .hint.left,.card-mobile.drag-right .swipe-bg .hint.right{opacity:.95}.card-mobile .swipe-target{position:relative;z-index:calc(var(--z-base) + 1);will-change:transform;display:grid;grid-template-columns:112px 1fr;gap:8px;align-items:start;transition:transform .16s ease-out}.card-mobile.dragging .swipe-target{transition:none}.card-mobile.swipe-open .swipe-target{transform:translate3d(-120px,0,0)}.card-mobile .poster{grid-column:1;width:112px;height:auto;border-radius:8px;-o-object-fit:cover;object-fit:cover}.card-mobile .content{grid-column:2;display:grid;grid-template-rows:auto auto auto auto auto auto;row-gap:6px;overflow:hidden}.card-mobile .topline{display:grid;grid-template-columns:1fr auto;align-items:center;-moz-column-gap:8px;column-gap:8px}.card-mobile .title{font-weight:700;line-height:1.2}.card-mobile .btn-overflow{inline-size:32px;block-size:32px;border-radius:9999px;background:transparent;border:1px solid color-mix(in srgb,#000 12%,transparent);color:var(--text-muted, #666);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;line-height:1;margin-right:4px}.card-mobile .subline{font-size:12px;opacity:.8}.card-mobile .chips{display:flex;flex-wrap:wrap;gap:4px}.card-mobile .rating-row{display:flex;align-items:center;gap:8px;min-height:36px}.card-mobile .rating-label{font-size:12px;opacity:.85;font-weight:500}.card-mobile .stars{display:inline-flex;gap:4px;touch-action:none}.card-mobile .star{inline-size:32px;block-size:32px;border-radius:6px;background:transparent;border:1px solid color-mix(in srgb,#000 12%,transparent);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;color:#d1d5db;transition:all .12s ease-out}.card-mobile .star:before{content:"â˜†";font-size:22px;line-height:32px;display:block;text-align:center;color:#aaa}.card-mobile .star.filled{border-color:#f59e0b}.card-mobile .star.filled:before{content:"â˜…";color:#f59e0b}.card-mobile .star:hover{border-color:#f59e0b;background:color-mix(in srgb,#f59e0b 20%,transparent)}.card-mobile .avg{font-size:11px;opacity:.7;margin-left:4px}.card-mobile .summary{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;font-size:13px;line-height:1.4;color:var(--text-muted, #666)}.card-mobile .actions{display:grid;grid-template-columns:1fr auto;align-items:center;-moz-column-gap:8px;column-gap:8px}.card-mobile .providers{display:flex;flex-wrap:wrap;gap:4px}.card-mobile .provider-chip{display:inline-flex;align-items:center;padding:2px 8px;border-radius:9999px;font-size:12px;background:color-mix(in srgb,#000 6%,transparent);color:var(--text-muted, #666);text-decoration:none;border:1px solid color-mix(in srgb,#000 8%,transparent);transition:all .12s ease-out}.card-mobile .provider-chip:hover{background:color-mix(in srgb,#000 12%,transparent);border-color:color-mix(in srgb,#000 16%,transparent)}.card-mobile .btn-delete{justify-self:end;padding:6px 12px;border-radius:9999px;background:#ef4444;color:#fff;font-weight:700;line-height:1;border:none;cursor:pointer;font-size:12px;transition:all .12s ease-out}.card-mobile .btn-delete:hover{background:#dc2626}.card-mobile .drag-rail{position:absolute;top:0;right:0;bottom:0;width:36px;display:grid;place-items:center;background:transparent;color:var(--text-muted, #666);cursor:grab;z-index:calc(var(--z-base) + 3);border-left:1px solid color-mix(in srgb,#000 8%,transparent);touch-action:none;border:none;font-size:18px;line-height:1;opacity:.7;transition:all .12s ease-out}.card-mobile .drag-rail:hover{opacity:1;background:color-mix(in srgb,#000 4%,transparent)}.card-mobile .drag-rail:active{cursor:grabbing}.card-mobile .drag-rail:after{content:"â‹®â‹®";font-size:18px;line-height:1;opacity:.7}.card-mobile .swipe-row{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:calc(var(--z-base) + 2)}.card-mobile .swipe-row>.gesture-plane{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:auto;touch-action:pan-y;cursor:grab}.card-mobile .content .reveal,.card-mobile .chips .reveal{display:none!important}}

```

## apps\web\src\styles\flickword.css
```
/**
 * FlickWord Game Styles - Enhanced Version
 * Optimized for mobile 375px width without horizontal scroll
 * Features: CSS Custom Properties, Enhanced Animations, Accessibility, Theme Support
 */

/* ============================================
   CSS CUSTOM PROPERTIES (Design System)
   ============================================ */
:root {
  /* Color Palette - Light Mode (default) */
  --fw-color-correct: #6aaa64;
  --fw-color-present: #c9b458;
  --fw-color-absent: #787c7e;
  --fw-color-bg: var(--card, #1a1a1a);
  --fw-color-text: var(--text, #ffffff);
  --fw-color-border: var(--line, #333333);
  --fw-color-btn: var(--btn, #333333);
  --fw-color-btn-hover: var(--btn-hover, #444444);
  --fw-color-accent: var(--accent, #007AFF);
  
  /* Notification Colors */
  --fw-notification-success: #6aaa64;
  --fw-notification-error: #e74c3c;
  --fw-notification-info: var(--fw-color-accent);
  --fw-notification-warning: #f7c23c;
  
  /* Spacing System */
  --fw-spacing-xs: 4px;
  --fw-spacing-sm: 8px;
  --fw-spacing-md: 16px;
  --fw-spacing-lg: 24px;
  --fw-spacing-xl: 32px;
  
  /* Typography */
  --fw-font-size-tile: clamp(22px, 4.5vw, 32px);
  --fw-font-size-key: clamp(16px, 3.8vw, 20px);
  --fw-font-weight-normal: 400;
  --fw-font-weight-medium: 500;
  --fw-font-weight-bold: 700;
  
  /* Border Radius */
  --fw-radius-sm: 6px;
  --fw-radius-md: 8px;
  --fw-radius-lg: 12px;
  
  /* Shadows */
  --fw-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
  --fw-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
  --fw-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
  
  /* Animation Timing */
  --fw-animation-fast: 150ms;
  --fw-animation-normal: 300ms;
  --fw-animation-slow: 500ms;
  --fw-animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Container Constraints */
  --fw-grid-gap: clamp(4px, 1.2vw, 6px);
  --fw-tile-size: clamp(52px, 18vw, 72px);
  --fw-keyboard-max-width: 420px;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  :root {
    --fw-animation-fast: 0ms;
    --fw-animation-normal: 0ms;
    --fw-animation-slow: 0ms;
  }
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* ============================================
   BASE GAME CONTAINER
   ============================================ */
.flickword-game {
  display: flex;
  flex-direction: column;
  gap: var(--fw-spacing-md);
  padding: var(--fw-spacing-lg);
  width: 100%;
  max-width: 520px;
  margin: 0 auto;
  box-sizing: border-box;
  contain: layout style paint;
}

/* Game Header */
.fw-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
}

.fw-header h3 {
  font-size: 18px;
  font-weight: bold;
  color: var(--text, #ffffff);
  margin: 0;
}

.fw-stats {
  display: flex;
  gap: 12px;
  font-size: 12px;
  color: var(--muted, #888888);
}

.fw-streak, .fw-timer {
  font-weight: 500;
}

/* Loading State */
.fw-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 32px 0;
}

.fw-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--line, #333333);
  border-top: 3px solid var(--accent, #007AFF);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.fw-loading p {
  color: var(--muted, #888888);
  font-size: 14px;
  margin: 0;
}

/* Game Grid */
.fw-grid {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: var(--fw-grid-gap);
  width: fit-content; /* center by content width */
  max-width: 100%;
  margin: 0 auto;
  padding: 0 var(--fw-spacing-sm); /* small side padding for visual breathing room */
  box-sizing: border-box;
  contain: layout style;
}

.fw-tile {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fw-font-size-tile);
  font-weight: var(--fw-font-weight-bold);
  border: 2px solid var(--fw-color-border);
  border-radius: var(--fw-radius-md);
  background-color: var(--fw-color-bg);
  color: var(--fw-color-text);
  width: var(--fw-tile-size);
  min-width: var(--fw-tile-size);
  max-width: var(--fw-tile-size);
  box-sizing: border-box;
  contain: layout style paint;
  position: relative;
  transition: 
    background-color var(--fw-animation-normal) var(--fw-animation-timing),
    border-color var(--fw-animation-normal) var(--fw-animation-timing),
    color var(--fw-animation-normal) var(--fw-animation-timing),
    transform var(--fw-animation-normal) var(--fw-animation-timing);
  overflow: hidden;
}

/* Letter pop-in animation */
.fw-tile:not(:empty) {
  animation: tilePopIn var(--fw-animation-fast) var(--fw-animation-timing);
}

@keyframes tilePopIn {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Current row indicator */
.fw-tile-current {
  border-color: var(--fw-color-accent);
  box-shadow: 0 0 0 1px var(--fw-color-accent);
}

/* Reveal animation - flip effect */
.fw-tile-revealing {
  animation: tileReveal 0.6s var(--fw-animation-timing) forwards;
  animation-delay: var(--reveal-delay, 0ms);
}

@keyframes tileReveal {
  0% {
    transform: rotateX(0deg) scale(1);
  }
  50% {
    transform: rotateX(90deg) scale(0.95);
  }
  100% {
    transform: rotateX(0deg) scale(1);
  }
}

/* Shake animation for invalid input */
.fw-tile-shake {
  animation: tileShake 0.6s var(--fw-animation-timing);
}

@keyframes tileShake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

/* Reduced motion overrides */
@media (prefers-reduced-motion: reduce) {
  .fw-tile {
    transition: background-color var(--fw-animation-normal), 
                border-color var(--fw-animation-normal), 
                color var(--fw-animation-normal);
  }
  
  .fw-tile:not(:empty),
  .fw-tile-revealing,
  .fw-tile-shake {
    animation: none;
  }
  
  .fw-tile-revealing {
    transform: none !important;
  }
}

.fw-tile.correct {
  background-color: var(--fw-color-correct);
  border-color: var(--fw-color-correct);
  color: white;
  animation: correctReveal 0.6s var(--fw-animation-timing) forwards;
  animation-delay: var(--reveal-delay, 0ms);
}

.fw-tile.present {
  background-color: var(--fw-color-present);
  border-color: var(--fw-color-present);
  color: white;
  animation: presentReveal 0.6s var(--fw-animation-timing) forwards;
  animation-delay: var(--reveal-delay, 0ms);
}

.fw-tile.absent {
  background-color: var(--fw-color-absent);
  border-color: var(--fw-color-absent);
  color: white;
  animation: absentReveal 0.6s var(--fw-animation-timing) forwards;
  animation-delay: var(--reveal-delay, 0ms);
}

@keyframes correctReveal {
  0% {
    transform: scale(1) rotateY(0deg);
    background-color: var(--fw-color-bg);
  }
  50% {
    transform: scale(1.1) rotateY(180deg);
  }
  100% {
    transform: scale(1) rotateY(360deg);
    background-color: var(--fw-color-correct);
  }
}

@keyframes presentReveal {
  0% {
    transform: scale(1) rotateY(0deg);
    background-color: var(--fw-color-bg);
  }
  50% {
    transform: scale(1.05) rotateY(180deg);
  }
  100% {
    transform: scale(1) rotateY(360deg);
    background-color: var(--fw-color-present);
  }
}

@keyframes absentReveal {
  0% {
    transform: scale(1);
    background-color: var(--fw-color-bg);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
    background-color: var(--fw-color-absent);
  }
}

@media (prefers-reduced-motion: reduce) {
  .fw-tile.correct,
  .fw-tile.present,
  .fw-tile.absent {
    animation: none;
  }
}

/* Keyboard */
.fw-keyboard {
  display: flex;
  flex-direction: column;
  gap: clamp(6px, 1.5vw, 8px);
  --kb-gap: clamp(4px, 1.2vw, 8px);
  width: 100%;              /* fill modal content width */
  max-width: 420px;         /* ensure it never exceeds grid width visually */
  margin: 12px auto 0;      /* center below grid */
  padding: 0 12px;          /* symmetric side padding to avoid clipping */
  box-sizing: border-box;
  transform: none;          /* no shifts â€” stable on mobile & desktop */
}

/* Mobile-specific alignment tweaks only */
@media (min-width: 768px) {
  .fw-keyboard { max-width: 360px; padding: 0 6px; }
  .fw-grid { gap: 6px; }
  .fw-tile { width: 56px; min-width: 56px; font-size: 22px; border-radius: 8px; }
  .fw-kb-wrap { gap: 6px; }
  .fw-key { min-width: 38px; height: 48px; font-size: 13px; }
  .fw-key-back, .fw-key-enter { min-width: 56px; font-size: 12px; }
  /* Force visible change via scale to ensure no upstream size rules mask adjustments */
  .fw-keyboard { transform: scale(0.75); transform-origin: center bottom; }
}

.fw-kb-row { display: flex; justify-content: center; }
.fw-kb-wrap { display: flex; gap: var(--kb-gap); }

.fw-key {
  min-width: clamp(36px, 7.5vw, 56px);
  height: clamp(48px, 9vw, 64px);
  padding: 0 clamp(8px, 2vw, 12px);
  font-size: var(--fw-font-size-key);
  font-weight: var(--fw-font-weight-bold);
  border: none;
  border-radius: var(--fw-radius-md);
  background-color: var(--fw-color-btn);
  color: var(--fw-color-text);
  cursor: pointer;
  transition: 
    background-color var(--fw-animation-fast) var(--fw-animation-timing),
    transform var(--fw-animation-fast) var(--fw-animation-timing),
    box-shadow var(--fw-animation-fast) var(--fw-animation-timing);
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  contain: layout style paint;
  position: relative;
  touch-action: manipulation;
  user-select: none;
}

.fw-key:hover:not(:disabled) {
  background-color: var(--fw-color-btn-hover);
  box-shadow: var(--fw-shadow-sm);
}

.fw-key:active:not(:disabled) {
  transform: scale(0.95);
}

.fw-key:focus-visible {
  outline: 2px solid var(--fw-color-accent);
  outline-offset: 2px;
  border-radius: var(--fw-radius-sm);
}

.fw-key:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.fw-key.correct {
  background-color: var(--fw-color-correct);
  color: white;
  animation: keyReveal var(--fw-animation-normal) var(--fw-animation-timing);
}

.fw-key.present {
  background-color: var(--fw-color-present);
  color: white;
  animation: keyReveal var(--fw-animation-normal) var(--fw-animation-timing);
}

.fw-key.absent {
  background-color: var(--fw-color-absent);
  color: white;
  animation: keyReveal var(--fw-animation-normal) var(--fw-animation-timing);
}

@keyframes keyReveal {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .fw-key.correct,
  .fw-key.present,
  .fw-key.absent {
    animation: none;
  }
}

.fw-key-back, .fw-key-enter {
  min-width: clamp(64px, 12vw, 90px);
  font-size: clamp(14px, 3.4vw, 18px);
}

/* Actions */
.fw-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.fw-btn {
  padding: 8px 16px;
  font-size: 14px;
  font-weight: 500;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.fw-btn.fw-new-game {
  background-color: var(--accent, #007AFF);
  color: white;
}

.fw-btn.fw-new-game:hover {
  background-color: var(--accent-hover, #0056CC);
}

.fw-btn.fw-close {
  background-color: var(--btn, #333333);
  color: var(--text, #ffffff);
}

.fw-btn.fw-close:hover {
  background-color: var(--btn-hover, #444444);
}

/* ============================================
   ENHANCED TOAST NOTIFICATIONS
   ============================================ */
.fw-notifications-container {
  position: fixed;
  top: var(--fw-spacing-md);
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: var(--fw-spacing-sm);
  pointer-events: none;
  max-width: min(90vw, 400px);
}

.fw-notification {
  display: flex;
  align-items: center;
  gap: var(--fw-spacing-sm);
  padding: var(--fw-spacing-md) var(--fw-spacing-lg);
  border-radius: var(--fw-radius-md);
  font-size: 14px;
  font-weight: var(--fw-font-weight-medium);
  box-shadow: var(--fw-shadow-lg);
  pointer-events: auto;
  animation: notificationSlideIn var(--fw-animation-normal) var(--fw-animation-timing) forwards;
  position: relative;
  backdrop-filter: blur(8px);
}

.fw-notification-icon {
  font-size: 18px;
  line-height: 1;
  flex-shrink: 0;
}

.fw-notification-message {
  flex: 1;
}

.fw-notification-close {
  background: none;
  border: none;
  color: inherit;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  margin-left: var(--fw-spacing-sm);
  opacity: 0.7;
  transition: opacity var(--fw-animation-fast) var(--fw-animation-timing);
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fw-notification-close:hover,
.fw-notification-close:focus {
  opacity: 1;
  outline: 2px solid currentColor;
  outline-offset: 2px;
  border-radius: 2px;
}

.fw-notification-success {
  background-color: var(--fw-notification-success);
  color: white;
}

.fw-notification-error {
  background-color: var(--fw-notification-error);
  color: white;
}

.fw-notification-info {
  background-color: var(--fw-notification-info);
  color: white;
}

.fw-notification-warning {
  background-color: var(--fw-notification-warning);
  color: #000;
}

@keyframes notificationSlideIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

/* Notification exit animation */
.fw-notification[data-exiting] {
  animation: notificationSlideOut var(--fw-animation-fast) var(--fw-animation-timing) forwards;
}

@keyframes notificationSlideOut {
  from {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px) scale(0.95);
  }
}

@media (prefers-reduced-motion: reduce) {
  .fw-notification,
  .fw-notification[data-exiting] {
    animation: none;
  }
}

/* Word Info */
.fw-word-info {
  background-color: var(--card, #1a1a1a);
  border: 1px solid var(--line, #333333);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 16px;
}

.fw-word-info p {
  margin: 0;
  font-size: 14px;
  color: var(--text, #ffffff);
}

.fw-word-info strong {
  color: var(--accent, #007AFF);
}

/* Game Stats View */
.game-stats-view {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px 0;
}

.stats-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.btn-primary {
  padding: 8px 16px;
  background-color: var(--accent, #007AFF);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.btn-primary:hover {
  background-color: var(--accent-hover, #0056CC);
}

.btn-secondary {
  padding: 8px 16px;
  background-color: var(--btn, #333333);
  color: var(--text, #ffffff);
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.btn-secondary:hover {
  background-color: var(--btn-hover, #444444);
}

/* Responsive adjustments for very small screens */
@media (max-width: 480px) {
  .flickword-game {
    max-width: 400px;
    padding: 20px;
  }
  
  .fw-grid {
    max-width: 320px;
    gap: 3px;
  }
  
  .fw-tile {
    font-size: 22px;
    min-height: 45px;
    min-width: 45px;
  }
  
  .fw-keyboard {
    max-width: 360px;
  }
  
  .fw-key {
    min-width: 32px;
    height: 42px;
    font-size: 14px;
  }
  
  .fw-key-back, .fw-key-enter {
    min-width: 50px;
    font-size: 12px;
  }
}

@media (max-width: 320px) {
  .fw-grid {
    max-width: 280px;
    gap: 2px;
  }
  
  .fw-tile {
    font-size: 20px;
    min-height: 40px;
    min-width: 40px;
  }
  
  .fw-keyboard {
    max-width: 300px;
  }
  
  .fw-key {
    min-width: 28px;
    height: 38px;
    font-size: 12px;
  }
  
  .fw-key-back, .fw-key-enter {
    min-width: 45px;
    font-size: 11px;
  }
}
```

## dist\assets\main-DWuDBbLG.css
```
:root{--fg: #1f2937;--bg: #ffffff;--muted: #374151;--card: #ffffff;--border: #e5e7eb;--accent: #ff4c8d;--text-secondary: #374151;--placeholder: #6b7280;--badge-text: #1f2937;--meta-text: #374151}html,body{height:100%;margin:0;padding:0}body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);color:var(--text);line-height:1.5;min-height:100svh;overflow-x:hidden;overflow-y:visible}.main-container{max-width:1200px;margin:0 auto;padding:20px;background:var(--bg);border-radius:12px;box-shadow:0 4px 20px #0000001a;min-height:calc(100vh - 40px)}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--border)}.header-bar{display:flex;justify-content:space-between;align-items:center;width:100%}.header-left{flex:1;display:flex;flex-direction:column;align-items:flex-start}.header-center{flex:2;display:flex;align-items:center;justify-content:center;gap:12px}.header-right{flex:1;display:flex;align-items:center;justify-content:flex-end;gap:12px}.greeting-name{font-weight:600;color:var(--fg);font-size:1.1rem}.greeting-snark{font-size:.9rem;color:var(--muted);font-style:italic}.account-btn{padding:8px 16px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--fg);cursor:pointer;font-size:.9rem;transition:all .2s ease}.account-btn:hover{background:var(--border);border-color:var(--accent)}.title{font-size:2rem;font-weight:700;color:var(--fg);margin:0}.subtitle{font-size:1rem;color:var(--muted);margin:4px 0 0}.top-search{position:sticky;top:0;z-index:100;background:var(--bg);padding:16px;margin:16px 0;border-radius:12px;border:1px solid var(--border);box-shadow:0 2px 8px #0000001a}.search-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.search-input{flex:1;min-width:200px;padding:12px 16px;border:1px solid var(--border);border-radius:8px;font-size:16px;background:var(--bg);color:var(--fg)}.btn{padding:12px 24px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--fg);font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;min-height:44px;min-width:44px;display:inline-flex;align-items:center;justify-content:center}.btn:hover{background:var(--color-surface-2);border-color:var(--accent)}.btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.tab-container{display:flex;justify-content:space-evenly;align-items:center;flex-wrap:nowrap;gap:0;background:transparent;padding:0;border-radius:0;margin:16px 0 0;border:none;border-bottom:1px solid var(--border);position:relative;z-index:100;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none}.tab{padding:12px 24px;border:none;background:transparent;color:var(--muted);font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;border-bottom:2px solid transparent;min-height:44px;display:flex;align-items:center;justify-content:center}.tab.is-active{color:var(--fg);border-bottom-color:var(--accent)}.tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px}@media (max-width: 768px){.main-container{padding:16px;margin:10px}.header{flex-direction:column;gap:8px;text-align:center}.title{font-size:1.8rem}.search-row{flex-direction:column;gap:8px}.search-input{width:100%;min-width:auto}.tab-container{padding:0 16px}.tab{padding:8px 16px;font-size:14px}}:root{--space-xs: 4px;--space-sm: 8px;--space-md: 12px;--space-lg: 16px;--space-xl: 20px;--space-2xl: 24px;--space-3xl: 32px;--space-4xl: 40px;--space-5xl: 48px;--container-gutter: var(--space-lg);--container-max-width: 1200px;--section-gap: var(--space-2xl);--section-gap-lg: var(--space-3xl);--row-gap: var(--space-lg);--card-gap: var(--space-sm);--card-padding: var(--space-md);--card-padding-sm: var(--space-sm);--card-padding-lg: var(--space-lg);--button-padding: var(--space-sm) var(--space-md);--input-padding: var(--space-sm) var(--space-md);--card-w: 180px;--card-h: 270px;--card-w-mobile: 140px;--card-h-mobile: 210px;--card-w-desktop: 200px;--card-h-desktop: 300px;--card-w-large: 220px;--card-h-large: 330px;--poster-w: 120px;--poster-h: 180px;--poster-w-mobile: 80px;--poster-h-mobile: 120px;--poster-w-desktop: 140px;--poster-h-desktop: 210px;--mobile-section-gap: var(--space-xl);--mobile-row-gap: var(--space-md);--mobile-card-gap: var(--space-xs);--body-height: auto;--app-root-min-height: 100vh;--app-root-overflow-x: hidden;--app-root-overflow-y: visible;--content-overflow: visible;--safe-gutter: max(var(--container-gutter), env(safe-area-inset-left));--bp-mobile-xs: 375px;--bp-mobile-sm: 480px;--bp-mobile: 640px;--bp-mobile-lg: 768px;--bp-tablet: 900px;--bp-desktop: 1200px;--bp-desktop-lg: 1440px}@media (min-width: var(--bp-mobile-lg)){:root{--section-gap: var(--space-3xl);--row-gap: var(--space-xl);--card-gap: var(--space-md);--card-w: var(--card-w-desktop);--card-h: var(--card-h-desktop);--poster-w: var(--poster-w-desktop);--poster-h: var(--poster-h-desktop)}}@media (min-width: var(--bp-desktop)){:root{--container-gutter: var(--space-2xl);--card-w: var(--card-w-large);--card-h: var(--card-h-large)}}:root{--safe-gutter: max(var(--container-gutter), env(safe-area-inset-left));--safe-gutter-right: max(var(--container-gutter), env(safe-area-inset-right))}.spacing-xs{margin:var(--space-xs)}.spacing-sm{margin:var(--space-sm)}.spacing-md{margin:var(--space-md)}.spacing-lg{margin:var(--space-lg)}.spacing-xl{margin:var(--space-xl)}.padding-xs{padding:var(--space-xs)}.padding-sm{padding:var(--space-sm)}.padding-md{padding:var(--space-md)}.padding-lg{padding:var(--space-lg)}.padding-xl{padding:var(--space-xl)}.container{max-width:var(--container-max-width);margin-inline:auto;padding-inline:var(--safe-gutter)}.section{margin-bottom:var(--section-gap)}.section:last-child{margin-bottom:0}.row{display:flex;gap:var(--row-gap);margin-bottom:var(--space-lg)}@media (max-width: calc(var(--bp-mobile-lg) - 1px)){:root{--section-gap: var(--mobile-section-gap);--row-gap: var(--mobile-row-gap);--card-gap: var(--mobile-card-gap)}.container{padding-inline:var(--space-md)}}:root{--bg: #ffffff;--text: #121212;--primary: #e91e63;--card: #f7f7f9;--border: #dedee3;--success: #51cf66;--warning: #ffd43b;--danger: #f06292;--purple: #845ec2;--mardi1: #6a0dad;--mardi2: #28a745;--mardi3: #ffd43b;--focus: #1a73e8}body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:20px;color:var(--text);line-height:1.5;min-height:100svh;overflow-x:hidden;overflow-y:visible}.dark-mode{--bg: #1a1a1a;--text: #f5f5f5;--card: #2a2a2a;--border: #404040;--text-secondary: #b0b0b0;background:linear-gradient(135deg,#1e3a5f,#2d4a6b)}.main-container{max-width:1200px;margin:0 auto;background:var(--bg);border-radius:16px;padding:32px;box-shadow:0 8px 32px #0000001f;animation:containerSlideIn .8s ease-out}.header-left{flex:1;max-width:600px}.tab{flex:1;border:0;background:transparent;padding:12px 10px;border-radius:10px;font-weight:800;cursor:pointer;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.quote-flickword-container{flex-direction:column;gap:8px;justify-content:flex-start}.left-column,.quote-card,.flickword-card{flex:1;max-width:100%;min-width:auto;width:100%}}.btn{border:0;background:linear-gradient(45deg,var(--primary),var(--purple));color:#fff;border-radius:8px;padding:8px 16px;font-weight:600;font-size:13px;cursor:pointer;transition:all .2s ease;position:relative;overflow:hidden;letter-spacing:.3px;min-height:44px;min-width:44px;display:inline-flex;align-items:center;justify-content:center}.btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.btn:active{transform:translateY(0);box-shadow:0 2px 6px #0000004d}@keyframes notificationSlideIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}@keyframes notificationSlideOut{0%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.top-search{position:sticky;top:0;z-index:50;background:var(--bg);border:1px solid var(--border);border-radius:14px;padding:12px;margin:12px 0;box-shadow:0 6px 18px #0000000f;animation:searchSlideIn .7s ease-out .2s both}.search-row{display:grid;grid-template-columns:1fr 180px auto auto;gap:8px;align-items:center}@media (max-width: 768px){.search-row{display:flex;flex-direction:row;gap:8px;flex-wrap:wrap}.search-row .search-input{order:1}.search-row .genre-filter{order:2}.search-row .search-btn,.search-row .clear-search-btn{order:3;display:flex;width:auto;flex:0 0 auto;min-height:44px;min-width:80px}.search-row .genre-filter{order:2;display:flex;width:60px;flex:0 0 auto;min-height:44px;min-width:60px}.search-row .search-btn{margin-right:8px}.search-row .btn{margin:0;flex:0 0 auto}}.tab{flex:1;border:0;background:transparent;padding:10px 8px;border-radius:8px;font-weight:600;font-size:13px;cursor:pointer;transition:all .2s ease}.tab.is-active{background:linear-gradient(45deg,var(--primary),var(--purple));color:#fff}.tab-badge{background:#fff;color:var(--primary);border-radius:12px;padding:2px 8px;font-size:12px;margin-left:6px}.search-input{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:14px;width:100%;min-width:300px;min-height:44px}.genre-filter{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:14px;min-height:44px}.search-help{margin-bottom:8px;color:#888;font-size:11px;text-align:center;padding:6px 10px;background:#fff9;border-radius:8px;border:1px solid rgba(0,0,0,.1);opacity:.8;transition:opacity .2s ease}.onboarding-hint{position:relative;display:inline-block;cursor:help}.onboarding-hint:after{content:"?";display:inline-block;width:16px;height:16px;background:#9c27b01a;color:#9c27b0;border-radius:50%;text-align:center;line-height:16px;font-size:11px;font-weight:700;margin-left:6px;transition:all .2s ease}.onboarding-hint:hover:after{background:#9c27b033;transform:scale(1.1)}.tooltip{position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:#000c;color:#fff;padding:8px 12px;border-radius:6px;font-size:12px;white-space:nowrap;z-index:1000;opacity:0;visibility:hidden;transition:all .2s ease;margin-bottom:8px}.tooltip:after{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);border:4px solid transparent;border-top-color:#000c}.onboarding-hint:hover .tooltip,.keyboard-hint:hover .tooltip{opacity:1;visibility:visible}.keyboard-hint{display:inline-block;margin-left:8px;cursor:help;position:relative}.keyboard-hint:before{content:"âŒ¨ï¸";display:inline-block;width:18px;height:18px;background:#9c27b026;color:#9c27b0;border-radius:50%;text-align:center;line-height:18px;font-size:12px;font-weight:700;transition:all .2s ease;border:1px solid rgba(156,39,176,.2)}.keyboard-hint:hover:before{background:#9c27b040;transform:scale(1.1);border-color:#9c27b066}kbd{background:#f8f9fa;border:1px solid #dee2e6;border-radius:3px;box-shadow:0 1px #0003;color:#495057;display:inline-block;font-size:.85em;font-weight:700;line-height:1;padding:2px 4px;white-space:nowrap}.dark-mode kbd{background:#495057;border-color:#6c757d;color:#f8f9fa}.tab{transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.tab:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.tab.active{animation:tabActivate .4s ease-out}.btn{transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.search-input:focus{transform:scale(1.02);box-shadow:0 0 0 3px #9c27b01a;transition:all .2s ease;border-color:var(--primary)}.genre-filter:focus{transform:scale(1.02);box-shadow:0 0 0 3px #9c27b01a;border-color:var(--primary);transition:all .2s ease}.list-container{background:var(--card);border:3px solid var(--border);border-radius:12px;padding:12px;min-height:80px}.show-poster{width:var(--poster-w-desktop);height:var(--poster-h-desktop);border-radius:8px;object-fit:cover;cursor:pointer}.poster-placeholder{width:var(--poster-w-desktop);height:var(--poster-h-desktop);border-radius:8px;display:flex;align-items:center;justify-content:center;background:#e9e9ee;color:#777;font-size:12px}.show-details{display:grid;grid-template-rows:auto auto auto 1fr;gap:6px;min-width:0}.show-title-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-2);margin-bottom:4px}.show-title{margin:0;color:var(--primary);font-size:1.05rem;font-weight:900;display:flex;gap:8px;align-items:center;cursor:pointer;line-height:1.2;flex:1}.show-meta{color:#8a8a98;font-size:.88rem;display:flex;flex-wrap:wrap;gap:8px}.show-overview{font-size:.95rem;line-height:1.45;color:var(--text);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;line-clamp:3;overflow:hidden}.rating-container{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:6px}.star-rating .star{cursor:pointer;filter:grayscale(1)}.star-rating .star.active{filter:none}.series-pill{margin-left:auto;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:900;white-space:nowrap;border:1px solid transparent;flex-shrink:0}.series-pill.status-ongoing{background:#51cf6629;color:#2f9e44;border-color:#2f9e44}.series-pill.status-ended{background:#ff4d4f29;color:#d63031;border-color:#d63031}.series-pill.status-upcoming{background:#ffd43b29;color:#b08900;border-color:#b08900}.notification{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:100000;padding:16px 24px;border-radius:12px;color:#1f2937;font-weight:500;font-size:16px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:400px;min-width:250px;word-wrap:break-word;text-align:center;cursor:default;display:block;animation:fadeInScale .3s ease-out;border:1px solid #e5e7eb;background:#fff}.notification.success{background:#fff;border-left:4px solid #1976d2}.notification.error{background:#fff;border-left:4px solid #ef4444}.notification.warning{background:#fff;border-left:4px solid #f59e0b}.notification.info{background:#fff;border-left:4px solid #1976d2}@keyframes fadeInScale{0%{transform:translate(-50%,-50%) scale(.9);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}@keyframes fadeOutScale{0%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(.9);opacity:0}}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:#0000008c;display:none;align-items:center;justify-content:center;z-index:10000}.modal-backdrop.active,.modal-backdrop[style*="display: flex"],.modal-backdrop[style*="display:block"]{display:flex}.share-modal{text-align:left}.share-list-section{margin-bottom:20px;padding:15px;background:var(--card);border-radius:8px;border:1px solid var(--border)}.share-list-section h4{margin:0 0 15px;color:var(--primary);font-size:1.1rem}.share-items-list{display:flex;flex-direction:column;gap:8px}.share-item{display:flex;align-items:center;gap:10px;padding:8px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;transition:all .2s ease}.share-item:hover{background:var(--hover);border-color:var(--primary)}.share-item input[type=checkbox]{margin:0;transform:scale(1.2)}.share-item-info{flex:1;display:flex;flex-direction:column;gap:2px}.share-item-title{font-weight:600;color:var(--text)}.share-item-meta{font-size:.85rem;color:var(--text-secondary)}.select-all-controls{border:2px solid var(--primary)}.select-all-controls label{cursor:pointer;padding:5px 10px;border-radius:6px;transition:background .2s ease}.select-all-controls label:hover{background:var(--hover)}@media (max-width: 768px){body,.main-container{padding:16px}.search-row{display:flex;flex-direction:column;gap:8px}.search-input{width:100%;font-size:16px}.search-filters{display:flex;gap:8px}#genreFilter{flex:1}.search-container{background:var(--card);border:2px solid var(--primary);border-radius:14px;padding:12px;margin:14px 0}.search-container .btn{flex:1;min-height:44px}@media (max-width: 640px){.show-actions{display:flex;flex-direction:column;gap:8px}}@media (max-width: 640px){.show-actions .btn{display:block;width:100%;margin:0;box-sizing:border-box;text-align:center;white-space:normal;overflow:hidden;text-overflow:ellipsis;min-height:44px}}.show-poster,.poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}.show-title{font-size:1rem}.show-meta{font-size:.85rem}.show-overview{font-size:.9rem}.rating-container{gap:4px}.star-btn{padding:4px;min-width:32px}}@media (max-width: 428px){body,.main-container{padding:12px}.search-row{gap:6px}.search-input{padding:8px 10px}.btn{padding:8px 12px;font-size:14px}.show-poster,.poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}.show-title{font-size:.95rem}.show-meta{font-size:.8rem}.show-overview{font-size:.85rem}}@supports (padding: max(0px)){body{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right));padding-top:max(12px,env(safe-area-inset-top));padding-bottom:max(12px,env(safe-area-inset-bottom))}}.btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;touch-action:manipulation;-webkit-user-select:none;user-select:none}.btn:active{transform:scale(.98)}@media (min-width: 641px){.show-title,.show-meta,.rating-container,.show-actions{min-width:0;overflow-wrap:anywhere}.show-actions{display:flex;flex-wrap:wrap;gap:8px}.show-actions .btn{white-space:normal}}.star-btn{border:none;background:none;padding:2px;line-height:1;cursor:pointer;font-size:1.1rem}.header-bar{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;padding:8px 12px}.header-left{display:flex;align-items:baseline;gap:8px;flex:1 1 auto;min-width:260px}.header-right{display:flex;align-items:center;gap:8px;flex:0 0 auto}.brand{margin:0;font-size:2.1rem;color:var(--primary);font-weight:800;letter-spacing:.2px}.tagline{margin:0;color:#8a8a98;font-weight:600;font-size:1rem}@media (max-width: 900px){.brand{font-size:1.4rem}.tagline{font-size:.95rem;opacity:.9}}@media (max-width: 640px){.header-bar{justify-content:center}.header-left,.header-right{width:100%;justify-content:center}.header-right{margin-top:6px}}.user-btn{max-width:220px;text-overflow:ellipsis;overflow:hidden}:root{--fg: #1f2937;--bg: #ffffff;--muted: #374151;--card: #ffffff;--border: #e5e7eb;--accent: #ff4c8d;--color-primary-start: var(--accent);--color-primary-end: #9b4dff;--color-text: var(--fg);--color-muted: var(--muted);--color-surface: var(--bg);--color-surface-2: #f3f4f6;--color-border: var(--border);--color-danger: #ef4444;--text-secondary: #374151;--placeholder: #6b7280;--badge-text: #1f2937;--meta-text: #374151}.dark-mode{--fg: #f5f5f5;--bg: #1a1a1a;--muted: #b0b0b0;--card: #2a2a2a;--border: #404040;--accent: #ff4c8d;--color-text: var(--fg);--color-text-primary: var(--fg);--color-text-secondary: var(--muted);--color-muted: var(--muted);--color-surface: var(--bg);--color-surface-2: var(--card);--color-border: var(--border);--text-secondary: #d1d5db;--placeholder: #9ca3af;--badge-text: #f9fafb;--meta-text: #d1d5db}:root{--r: 12px;--gap-1: 4px;--gap-2: 8px;--gap-3: 12px;--gap-4: 16px;--gap-5: 20px;--skeleton-bg: #f3f4f6;--skeleton-shimmer: #e5e7eb;--skeleton-animation-duration: 1.5s;--fs-body: 14px;--fs-label: 16px;--fs-button: 16px;--fs-h3: 22px;--btn-h: 40px;--btn-radius: 10px;--z-header: 200;--z-modal: 1000;--z-overlay: 999}.btn{display:inline-flex;align-items:center;justify-content:center;height:var(--btn-h);padding:0 var(--gap-4);border-radius:var(--btn-radius);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);font-weight:600;text-decoration:none;cursor:pointer}.btn.primary{border:none;color:#fff;background:linear-gradient(90deg,var(--color-primary-start),var(--color-primary-end))}.btn.secondary{background:var(--color-surface-2)}.btn.ghost{background:transparent;border:1px solid var(--color-border)}.btn.danger{background:var(--color-danger);color:#fff;border:none}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0009;z-index:var(--z-overlay);display:none}.modal{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;z-index:var(--z-modal);pointer-events:none}.modal>.modal-card{pointer-events:auto;max-width:320px;width:calc(100% - 32px);background:var(--color-surface);border-radius:12px;padding:20px;box-shadow:0 10px 30px #00000040}:root{--space-1: 4px;--space-2: 8px;--space-3: 12px;--space-4: 16px;--space-5: 20px;--space-6: 24px;--radius-sm: 6px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px rgba(0, 0, 0, .1);--shadow-lg: 0 10px 15px rgba(0, 0, 0, .1);--shadow-xl: 0 20px 25px rgba(0, 0, 0, .1);--card-gap-desktop: 16px;--card-pad-y-desktop: 16px;--card-pad-x-desktop: 16px;--meta-title-size-desktop: 18px;--meta-line-desktop: 1.3;--card-gap-mobile: 12px;--card-pad-y-mobile: 12px;--card-pad-x-mobile: 16px;--meta-title-size-mobile: 16px;--meta-line-mobile: 1.2;--card-bg: var(--color-surface, #ffffff);--card-border: 1px solid var(--color-border, #e0e0e0);--card-radius: 8px;--card-shadow: 0 2px 8px rgba(0, 0, 0, .1)}.section{background:var(--color-surface, #ffffff);border-radius:var(--radius-xl, 16px);box-shadow:var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, .1));padding:var(--space-4, 16px);margin-block:var(--space-4, 16px);border:1px solid var(--color-border, #e1e5e9)}.section__header{display:flex;align-items:baseline;gap:var(--space-2, 8px);margin-bottom:var(--space-3, 12px);flex-wrap:wrap}.section__header h3{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary, #1a1a1a);line-height:1.3}.section__subtitle{margin:0;font-size:.875rem;color:var(--color-text-secondary, #6b7280);line-height:1.4;font-weight:400}.section__body{display:block}.section--community .section__body{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-4, 16px);align-items:start}.dark-mode .section{background:var(--card);border-color:var(--border);color:var(--text)}.dark-mode .section__header h3{color:var(--text)}.dark-mode .section__subtitle{color:var(--text-secondary)}.dark-mode .home-section,.dark-mode .home-section .section-title{color:var(--text)}.dark-mode .card{background:var(--card);border-color:var(--border);color:var(--text)}.dark-mode .card--compact{background:var(--card);border-color:var(--border)}.dark-mode .curated-sections,.dark-mode .curated-section .section-title{color:var(--text)}.dark-mode .curated-section .section-subtitle{color:var(--text-secondary)}.dark-mode .btn{background:var(--card);color:var(--text);border-color:var(--border)}.dark-mode .btn.primary{background:var(--accent);color:#fff;border:none}.dark-mode .badge{background:var(--accent);color:#fff}.dark-mode .feedback-link-card{background:var(--card);border-color:var(--border);color:var(--text)}.dark-mode .feedback-link-card p{color:var(--text-secondary)}.dark-mode .theaters-container{background:var(--card);color:var(--text)}.dark-mode .theaters-header h3{color:var(--text)}.dark-mode .theaters-info{background:var(--card);color:var(--text)}.dark-mode .theaters-meta h3{color:var(--text)}.dark-mode .theaters-meta p,.dark-mode .location-info{color:var(--text-secondary)}.dark-mode .theaters-badges{color:var(--text)}@media (max-width: var(--bp-mobile-lg)){.section--community .section__body{grid-template-columns:1fr;gap:var(--space-3, 12px)}}.row--personalized{margin:1rem 0}.row--personalized .row__header{margin-bottom:12px;padding:0 4px}.row--personalized .row__header h4{font-size:1.1rem;font-weight:700;color:var(--text);margin:0}.row--personalized .row__scroller{display:flex;overflow-x:auto;overflow-y:hidden;gap:12px;padding:4px 0;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.row--personalized .row__scroller::-webkit-scrollbar{height:8px}.row--personalized .row__scroller::-webkit-scrollbar-track{background:transparent}.row--personalized .row__scroller::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}.row--personalized .row__scroller>*{flex:0 0 auto;width:var(--home-card-width-desktop);max-width:var(--home-card-width-desktop);min-width:var(--home-card-width-desktop);display:flex;flex-direction:column;border-radius:8px}.row--ghost{margin:1rem 0;padding:1rem;background:var(--color-surface, #ffffff);border:1px solid var(--color-border, #e1e5e9);border-radius:8px;text-align:center}.row--ghost .row__header h4{font-size:1.1rem;font-weight:700;color:var(--text);margin:0 0 12px}.row--ghost .row__ghost-cards{display:flex;gap:12px;margin-bottom:16px;overflow-x:auto;padding:4px 0}.row--ghost .ghost-card{flex:0 0 auto;width:var(--home-card-width-desktop);height:var(--home-card-height-desktop);background:var(--color-border, #e1e5e9);border-radius:8px;animation:pulse 2s infinite}.row--ghost .row__cta{background:var(--primary, #e91e63);color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:.9rem;cursor:pointer;transition:background .2s ease}.row--ghost .row__cta:hover{background:var(--primary-dark, #c2185b)}@media (max-width: var(--bp-mobile-lg)){.row--personalized .row__scroller>*{width:var(--home-card-width-mobile);max-width:var(--home-card-width-mobile);min-width:var(--home-card-width-mobile)}.row--ghost .ghost-card{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}}.community-games-container{width:100%;height:100%}.community-games-grid{display:grid;grid-template-rows:1fr 1fr;gap:var(--space-3, 12px);height:100%}.game-box{background:var(--color-surface, #ffffff);border:1px solid var(--color-border, #e1e5e9);border-radius:var(--radius-lg, 12px);padding:var(--space-4, 16px);display:flex;flex-direction:column;transition:all .2s ease;box-shadow:var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, .1))}.game-box:hover{transform:translateY(-2px);box-shadow:var(--shadow-md, 0 4px 6px rgba(0, 0, 0, .1))}.game-header{margin-bottom:var(--space-3, 12px)}.game-title{margin:0;font-size:1.125rem;font-weight:600;color:var(--color-text-primary, #1a1a1a);line-height:1.3}.game-content{flex:1;display:flex;flex-direction:column;justify-content:space-between}.game-stats{display:flex;gap:var(--space-4, 16px);margin-bottom:var(--space-3, 12px)}.stat-item{display:flex;flex-direction:column;align-items:center;text-align:center}.stat-value{font-size:1.5rem;font-weight:700;color:var(--color-primary, #007bff);line-height:1;margin-bottom:var(--space-1, 4px)}.stat-label{font-size:.75rem;color:var(--color-text-secondary, #6b7280);text-transform:uppercase;letter-spacing:.05em;font-weight:500}.game-play-btn{background:var(--color-primary, #007bff);color:#fff;border:none;border-radius:var(--radius-md, 8px);padding:var(--space-2, 8px) var(--space-4, 16px);font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;min-height:36px}.game-play-btn:hover{background:var(--color-primary-dark, #0056b3);transform:translateY(-1px)}.game-play-btn:active{transform:translateY(0)}.game-trivia{border-left:4px solid #10b981}.game-flickword{border-left:4px solid #8b5cf6}@media (max-width: var(--bp-mobile-lg)){.community-games-grid{grid-template-rows:auto;grid-template-columns:1fr 1fr;gap:var(--space-2, 8px)}.game-box{padding:var(--space-3, 12px)}.game-title{font-size:1rem}.game-stats{gap:var(--space-2, 8px);margin-bottom:var(--space-2, 8px)}.stat-value{font-size:1.25rem}.stat-label{font-size:.6875rem}.game-play-btn{padding:var(--space-1, 4px) var(--space-3, 12px);font-size:.8125rem;min-height:32px}}@media (max-width: 480px){.game-box{padding:var(--space-2, 8px)}.game-title{font-size:.875rem}.stat-value{font-size:1.125rem}.stat-label{font-size:.625rem}}@media (max-width: var(--bp-mobile)){.section{padding:var(--space-3, 12px);margin-block:var(--space-3, 12px)}.section__header h3{font-size:1.125rem}.section__subtitle{font-size:.8125rem}}.feedback-link-section{margin:var(--space-4, 16px) 0}.feedback-link-card{background:var(--color-surface, #ffffff);border:1px solid var(--color-border, #e0e0e0);border-radius:var(--radius-lg, 12px);padding:var(--space-4, 16px);text-align:center;box-shadow:var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, .1));transition:all .2s ease}.feedback-link-card:hover{box-shadow:var(--shadow-md, 0 4px 6px rgba(0, 0, 0, .1));transform:translateY(-1px)}.feedback-link-card p{margin:0 0 var(--space-3, 12px) 0;color:var(--color-text-secondary, #666);font-size:.875rem}.feedback-link-card .btn{margin:0}.feedback-form{margin-top:var(--space-4, 16px)}.feedback-form .settings-textarea{width:100%;min-height:100px;resize:vertical}.feedback-form .btn{margin-top:var(--space-3, 12px)}@media (max-width: var(--bp-mobile)){.feedback-link-card{padding:var(--space-3, 12px)}.feedback-link-card p{font-size:.8125rem}}.base-poster-card{position:relative;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);transition:all .2s ease;cursor:pointer;overflow:hidden;display:flex;flex-direction:column;width:100%;aspect-ratio:2/3;padding:0;text-align:left;font-family:inherit}.base-poster-card:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.base-poster-card:focus-visible{outline:2px solid var(--color-primary-start);outline-offset:2px}.base-poster-card--disabled{opacity:.6;pointer-events:none}.base-poster-card--skeleton{pointer-events:none}.base-poster-card--empty{pointer-events:none;justify-content:center;align-items:center}.base-poster-card__poster{position:relative;width:100%;height:100%;background:var(--color-surface-2);overflow:hidden}.base-poster-card__poster img{width:100%;height:100%;object-fit:cover;display:block}.base-poster-card__placeholder{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--color-muted);background:var(--color-surface-2)}.base-poster-card__content{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,#000c);padding:var(--space-3);color:#fff}.base-poster-card__title{font-size:.9rem;font-weight:600;line-height:1.2;margin:0 0 var(--space-1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.base-poster-card__subline{font-size:.8rem;opacity:.9;margin:0 0 var(--space-1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.base-poster-card__rating{font-size:.8rem;color:#fbbf24;margin:0}.base-poster-card__overflow{position:absolute;bottom:var(--space-2);right:var(--space-2)}.base-poster-card__overflow-btn{background:#000000b3;border:none;border-radius:var(--radius-sm);padding:var(--space-1);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;width:24px;height:24px}.base-poster-card__overflow-btn:hover{background:#000000e6}.base-poster-card__overflow-dots{font-size:.8rem;font-weight:700;line-height:1}.base-poster-card__overflow-menu{position:absolute;bottom:100%;right:0;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-sm);box-shadow:var(--shadow-lg);min-width:120px;opacity:0;visibility:hidden;transform:translateY(4px);transition:all .2s ease;z-index:10}.base-poster-card__overflow-menu[aria-hidden=false]{opacity:1;visibility:visible;transform:translateY(0)}.base-poster-card__overflow-item{display:flex;align-items:center;gap:var(--space-2);padding:var(--space-2);border:none;background:none;width:100%;text-align:left;cursor:pointer;color:var(--color-text);transition:background-color .2s ease}.base-poster-card__overflow-item:hover{background:var(--color-surface-2)}.base-poster-card__overflow-icon{font-size:1rem;width:16px;text-align:center}.base-poster-card__overflow-label{flex:1;font-size:.9rem}.base-poster-card__skeleton-shimmer{background:linear-gradient(90deg,var(--color-surface-2) 25%,var(--color-surface) 50%,var(--color-surface-2) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}.base-poster-card__empty-content{text-align:center;color:var(--color-muted)}.base-poster-card__empty-icon{font-size:2rem;margin-bottom:var(--space-2)}.base-poster-card__empty-message{font-size:.9rem;margin:0}.flickword-tab__grid,.trivia-tab__grid{display:grid;gap:12px;padding:16px;max-width:1440px;margin:0 auto}@media (max-width: 375px){.flickword-tab__grid,.trivia-tab__grid{grid-template-columns:repeat(2,1fr);gap:12px;padding:16px}}@media (min-width: 376px) and (max-width: 599px){.flickword-tab__grid,.trivia-tab__grid{grid-template-columns:repeat(3,1fr);gap:12px;padding:16px}}@media (min-width: 600px) and (max-width: 899px){.flickword-tab__grid,.trivia-tab__grid{grid-template-columns:repeat(4,1fr);gap:16px;padding:24px}}@media (min-width: 900px) and (max-width: 1279px){.flickword-tab__grid,.trivia-tab__grid{grid-template-columns:repeat(5,1fr);gap:16px;padding:24px}}@media (min-width: 1280px){.flickword-tab__grid,.trivia-tab__grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;padding:24px}}.stats-card{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-4);box-shadow:var(--shadow-sm)}.stats-card__header{margin-bottom:var(--space-3)}.stats-card__title{font-size:1.1rem;font-weight:600;color:var(--color-text);margin:0}.stats-card__content{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-3)}.stats-card__stat{text-align:center}.stats-card__stat-value{font-size:1.5rem;font-weight:700;color:var(--color-primary-start);line-height:1;margin-bottom:var(--space-1)}.stats-card__stat-label{font-size:.8rem;color:var(--color-muted);text-transform:uppercase;letter-spacing:.5px}.stats-card__footer{margin-top:var(--space-3);padding-top:var(--space-3);border-top:1px solid var(--color-border)}.stats-card__last-played{font-size:.8rem;color:var(--color-muted);text-align:center}@media (max-width: var(--bp-mobile)){.stats-card{padding:var(--space-3)}.stats-card__content{gap:var(--space-2)}.stats-card__stat-value{font-size:1.25rem}.stats-card__stat-label{font-size:.7rem}}.flickword-tab{width:100%}.flickword-tab__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-6);padding:0 var(--space-4)}.flickword-tab__title{font-size:1.5rem;font-weight:700;color:var(--color-text);margin:0}.flickword-tab__hero{display:grid;grid-template-columns:1fr auto;gap:var(--space-6);margin-bottom:var(--space-6);padding:0 var(--space-4);align-items:center}.flickword-tab__hero-image{display:flex;justify-content:center}.flickword-tab__hero-image img{width:100%;max-width:480px;min-width:280px;height:auto;border-radius:var(--radius-md);box-shadow:var(--shadow-md)}.flickword-tab__hero-stats{flex-shrink:0}.flickword-tab__grid{margin-top:var(--space-4)}@media (max-width: var(--bp-mobile-lg)){.flickword-tab__header{padding:0 var(--space-3);margin-bottom:var(--space-4)}.flickword-tab__title{font-size:1.25rem}.flickword-tab__hero{grid-template-columns:1fr;gap:var(--space-4);padding:0 var(--space-3);margin-bottom:var(--space-4)}.flickword-tab__hero-image{order:2}.flickword-tab__hero-stats{order:1}}.trivia-tab{width:100%}.trivia-tab__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-6);padding:0 var(--space-4)}.trivia-tab__title{font-size:1.5rem;font-weight:700;color:var(--color-text);margin:0}.trivia-tab__grid{margin-top:var(--space-4)}@media (max-width: var(--bp-mobile-lg)){.trivia-tab__header{padding:0 var(--space-3);margin-bottom:var(--space-4)}.trivia-tab__title{font-size:1.25rem}}.game-tab-nav{display:flex;gap:var(--space-2);margin-bottom:var(--space-4);padding:0 var(--space-4);border-bottom:1px solid var(--color-border)}.game-tab-btn{background:none;border:none;padding:var(--space-3) var(--space-4);font-size:1rem;font-weight:600;color:var(--color-muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .2s ease}.game-tab-btn:hover{color:var(--color-text);background:var(--color-surface-2)}.game-tab-btn.active{color:var(--color-primary-start);border-bottom-color:var(--color-primary-start)}.game-tab{display:none}.game-tab.active{display:block}@media (max-width: var(--bp-mobile-lg)){.game-tab-nav{padding:0 var(--space-3);margin-bottom:var(--space-3)}.game-tab-btn{padding:var(--space-2) var(--space-3);font-size:.9rem}}.version-display{font-size:.75rem;font-weight:600;color:var(--color-muted);background:var(--color-surface-2);padding:2px 6px;border-radius:4px;margin-right:var(--space-2);display:inline-block}.card{position:relative;display:flex;flex-direction:column;background:var(--color-surface, var(--card));border:1px solid var(--color-border, var(--border));border-radius:var(--radius-lg, 8px);box-shadow:var(--shadow-sm);overflow:hidden;transition:all .2s ease}.card:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.card--compact{width:var(--card-w);height:var(--card-h);display:flex;flex-direction:column}.card--compact .card__poster{position:relative;width:100%;height:100%;aspect-ratio:2/3;border-radius:var(--radius-md);overflow:hidden;cursor:pointer;background:var(--color-surface-2)}.card--compact .card__poster img{width:100%;height:100%;object-fit:cover;display:block}.card--compact .card__poster-placeholder{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--color-muted);background:var(--color-surface-2)}.card--compact .card__overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(to bottom,transparent 0%,transparent 40%,rgba(0,0,0,.7) 100%);opacity:0;transition:opacity .2s ease;display:flex;align-items:flex-end;padding:var(--space-3)}.card--compact:hover .card__overlay{opacity:1}.card--compact .card__overlay-content{color:#fff;width:100%}.card--compact .card__title{font-size:.9rem;font-weight:600;line-height:1.2;margin:0 0 var(--space-1);display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.card--compact .card__subtitle{font-size:.8rem;opacity:.9;margin:0 0 var(--space-2)}.card--compact .card__rating{margin-bottom:var(--space-2)}.card--compact .card__stars{color:#fbbf24;font-size:.9rem}.card--compact .card__primary-action{width:100%;min-height:32px;padding:var(--space-1) var(--space-2);font-size:.8rem;border-radius:var(--radius-sm)}.card--expanded{display:grid;grid-template-columns:auto 1fr;gap:var(--space-3);padding:var(--space-3);min-height:120px}.card--expanded .card__poster{width:var(--poster-w-desktop);height:var(--poster-h-desktop);border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface-2);cursor:pointer}.card--expanded .card__poster img{width:100%;height:100%;object-fit:cover}.card--expanded .card__poster-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:var(--color-muted)}.card--expanded .card__content{display:flex;flex-direction:column;gap:var(--space-2);min-width:0}.card--expanded .card__title{font-size:1.1rem;font-weight:600;line-height:1.3;margin:0;color:var(--color-text)}.card--expanded .card__subtitle{font-size:.9rem;color:var(--color-muted);margin:0}.card--expanded .card__rating{margin:0}.card--expanded .card__stars{color:#fbbf24;font-size:1rem}.card--expanded .card__actions{display:flex;align-items:center;gap:var(--space-2);margin-top:auto}.card__title-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-2);margin-bottom:4px}.card__title-row .card__title{flex:1;margin:0;font-size:1.1rem;font-weight:600;line-height:1.3;color:var(--color-text)}.card__title-row .card__badge--status{flex-shrink:0;margin-left:auto}.card__badge{position:absolute;top:var(--space-2);left:var(--space-2);padding:var(--space-1) var(--space-2);border-radius:var(--radius-sm);font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;z-index:2}.card__badge--status{background:var(--color-primary-start);color:#fff;position:static;display:inline-block;margin-left:auto;font-size:.75rem;padding:2px 8px;border-radius:12px;font-weight:500;text-transform:none;letter-spacing:.3px}.program-status-badge{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:500;text-transform:none;letter-spacing:.3px;white-space:nowrap;flex-shrink:0;margin-left:auto;border:1px solid transparent;transition:all .2s ease}.program-status-badge.status-ended{background:#ff4d4f29;color:#d63031;border-color:#d63031}.program-status-badge.status-ongoing{background:#51cf6629;color:#2f9e44;border-color:#2f9e44}.program-status-badge.status-upcoming{background:#ffd43b29;color:#b08900;border-color:#b08900}@media (max-width: 480px){.program-status-badge{font-size:.7rem;padding:3px 6px;max-width:100%;overflow:hidden;text-overflow:ellipsis}.show-title-row{flex-direction:column;align-items:flex-start;gap:4px}.show-title-row .program-status-badge{margin-left:0;align-self:flex-end;order:2}.show-title-row .show-title{order:1;width:100%}}.card__badge--provider{top:auto;bottom:var(--space-2);left:auto;right:var(--space-2);background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border)}.card__more{position:relative}.card__more-btn{background:none;border:none;padding:var(--space-1);cursor:pointer;border-radius:var(--radius-sm);color:var(--color-muted);transition:all .2s ease;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.card__more-btn:hover{background:var(--color-surface-2);color:var(--color-text)}.card__more-btn:focus-visible{outline:2px solid var(--color-primary-start);outline-offset:2px}.card__more-dots{font-size:1.2rem;font-weight:700;line-height:1}.card__more-menu{position:absolute;top:100%;right:0;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);padding:var(--space-1);min-width:160px;z-index:10;transform:translateY(var(--space-1));opacity:0;visibility:hidden;transition:all .2s ease}.card__more-menu[aria-hidden=false]{opacity:1;visibility:visible;transform:translateY(0)}.card__more-item{display:flex;align-items:center;gap:var(--space-2);width:100%;padding:var(--space-2);background:none;border:none;border-radius:var(--radius-sm);cursor:pointer;font-size:.9rem;color:var(--color-text);text-align:left;transition:background-color .2s ease}.card__more-item:hover{background:var(--color-surface-2)}.card__more-item:focus-visible{outline:2px solid var(--color-primary-start);outline-offset:-2px}.card__more-icon{font-size:1rem;width:16px;text-align:center}.card__more-label{flex:1}@media (max-width: var(--bp-mobile)){.card--compact{width:var(--card-w-mobile);height:var(--card-h-mobile)}.card--compact .card__overlay{padding:var(--space-2)}.card--compact .card__title{font-size:.8rem}.card--compact .card__subtitle{font-size:.7rem}.card--compact .card__primary-action{min-height:28px;font-size:.7rem}.card--expanded{grid-template-columns:var(--poster-w-mobile) 1fr;gap:var(--space-2);padding:var(--space-2);min-height:var(--poster-h-mobile)}.card--expanded .card__poster{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}.card--expanded .card__title{font-size:1rem}.card--expanded .card__subtitle{font-size:.8rem}.show-poster,.poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile);aspect-ratio:2/3}.show-card{grid-template-columns:var(--poster-w-mobile) 1fr;min-height:var(--poster-h-mobile)}.show-card .show-title-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-2);margin-bottom:4px}.show-card .show-title{flex:1;margin:0}#watchingList,#wishlistList,#watchedList{display:flex;flex-direction:column;gap:12px}}.card:focus-visible{outline:2px solid var(--color-primary-start);outline-offset:2px}.card__poster:focus-visible{outline:2px solid var(--color-primary-start);outline-offset:2px}@media (min-width: calc(var(--bp-mobile) + 1px)){.show-card{display:grid;grid-template-columns:var(--poster-w-desktop) 1fr;gap:var(--card-gap-desktop);padding:var(--card-pad-y-desktop) var(--card-pad-x-desktop);background:var(--card-bg);border:var(--card-border);border-radius:var(--card-radius);box-shadow:var(--card-shadow);align-items:start;min-height:var(--poster-h-desktop)}.show-card .show-title-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-2);margin-bottom:4px}.show-card .show-title{font-size:var(--meta-title-size-desktop);line-height:var(--meta-line-desktop);margin:0;font-weight:700;color:var(--color-text, #121212);font-size:20px;flex:1}.show-card .show-meta{font-size:13px;color:var(--color-text-secondary, #888);margin:0 0 8px;line-height:1.4;font-weight:400}.show-card .program-status-badge{margin-left:auto;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:500;white-space:nowrap;border:1px solid transparent;flex-shrink:0}.show-card .program-status-badge.status-ongoing{background:#51cf6629;color:#2f9e44;border-color:#2f9e44}.show-card .program-status-badge.status-ended{background:#ff4d4f29;color:#d63031;border-color:#d63031}.show-card .program-status-badge.status-upcoming{background:#ffd43b29;color:#b08900;border-color:#b08900}.show-card .show-overview{font-size:15px;line-height:1.5;color:var(--color-text, #121212);margin:0 0 12px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.show-card+.show-card{margin-top:20px}#watchingList,#wishlistList,#watchedList{display:flex;flex-direction:column;gap:16px}}.tab-container{display:flex;justify-content:space-evenly;align-items:center;flex-wrap:nowrap;gap:0;background:transparent;padding:0;border-radius:0;margin:16px 0 0;border:none;animation:tabContainerSlideIn .8s ease-out .4s both;position:relative;z-index:100;overflow-x:auto;background:var(--bg);border-bottom:1px solid var(--border);scrollbar-width:none;-ms-overflow-style:none}.tab-container{display:flex}#searchResults{position:relative;z-index:50;margin-top:0;margin-bottom:16px;background:var(--card);border-radius:12px;padding:16px;border:1px solid var(--border)}.top-search+#searchResults{margin-top:8px}#searchResults+.tab-container{margin-top:8px}.tab-container::-webkit-scrollbar{display:none}.top-search+.tab-container{margin-top:4px}@keyframes tabContainerSlideIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}@media (prefers-reduced-motion: reduce){.tab-container{animation:none}}.tab{flex:1 1 0;border:0;background:transparent;padding:16px 20px;border-radius:0;font-weight:500;font-size:15px;cursor:pointer;min-height:48px;min-width:0;max-width:none;display:flex;align-items:center;justify-content:center;transition:all .2s ease;position:relative;overflow:hidden;white-space:nowrap;border-bottom:3px solid transparent;color:var(--text-muted)}.tab:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.tab:hover:before{left:100%}.tab:hover{background:#0000000d;color:var(--text)}.tab.is-active{background:transparent;color:var(--text);border-bottom-color:var(--primary);font-weight:600}@keyframes tabActivate{0%{transform:scale(.95)}50%{transform:scale(1.05)}to{transform:scale(1)}}.tab-badge{background:var(--text-muted);color:var(--bg);border-radius:10px;padding:2px 6px;font-size:11px;font-weight:600;margin-left:6px;min-width:16px;text-align:center;line-height:1.2;transition:all .2s ease;display:inline-block;visibility:visible;opacity:1}.tab.is-active .tab-badge{background:var(--primary);color:#fff}.btn{border:0;background:linear-gradient(45deg,var(--primary),var(--purple));color:#fff;border-radius:8px;padding:8px 16px;flex-shrink:0;font-weight:600;font-size:13px;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;letter-spacing:.3px;min-height:44px;min-width:44px;display:inline-flex;align-items:center;justify-content:center}.btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0003}.btn:active{transform:translateY(0);transition:transform .1s ease}.btn:focus{outline:3px solid var(--focus, #1a73e8);outline-offset:2px}.btn.secondary{background:linear-gradient(45deg,#737d8c,#57606f)}.btn.success{background:linear-gradient(45deg,#2ed573,#1dd1a1)}.btn.danger{background:linear-gradient(45deg,#f06292,#e91e63)}.top-search{position:sticky;top:0;z-index:50;background:var(--bg);border:1px solid var(--border);border-radius:14px;padding:12px;margin:12px 0;box-shadow:0 6px 18px #0000000f;animation:searchSlideIn .7s ease-out .2s both;-webkit-transform:translateZ(0);transform:translateZ(0)}@keyframes searchSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.search-row{position:relative;display:flex;flex-direction:row;gap:8px;align-items:center;flex-wrap:nowrap;padding-top:26px}.search-input{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:14px;flex:1;min-width:200px;min-height:44px;transition:all .2s ease}.search-input:focus{transform:scale(1.02);box-shadow:0 0 0 3px #9c27b01a;border-color:var(--primary)}.genre-filter{padding:8px 6px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:14px;min-height:44px;min-width:60px;width:60px;max-width:60px;flex-shrink:0;transition:all .2s ease;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left;direction:ltr}.genre-filter:focus{transform:scale(1.02);box-shadow:0 0 0 3px #9c27b01a;border-color:var(--primary)}.search-help{position:absolute;top:6px;left:14px;font-size:.9rem;line-height:1.2;font-style:italic;color:#ffffffa6;background:transparent;border:none;box-shadow:none;padding:0;margin:0;text-align:left;border-radius:0;pointer-events:auto;z-index:2;opacity:.7;transition:opacity .2s ease}html[data-theme=light] .search-help,.light-mode .search-help,html:not([data-theme=dark]) .search-help{color:#8a8a98;opacity:1}.search-help:hover{opacity:1}.onboarding-hint,.keyboard-hint{pointer-events:auto;cursor:help}.onboarding-hint:after,.keyboard-hint:before{pointer-events:auto}.tooltip{pointer-events:none;z-index:1000}body{border:none}.upcoming-episodes{margin-bottom:20px}.upcoming-episodes .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.upcoming-episodes .tag{background:#667eea;color:#fff;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.upcoming-episodes-list{display:flex;flex-direction:column;gap:8px}.upcoming-episode-item{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:12px;border-left:4px solid #667eea;margin-bottom:8px;box-shadow:0 2px 4px #0000000d;transition:all .2s ease}.upcoming-episode-item:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.upcoming-episode-item .show-info{flex:1;min-width:0}.upcoming-episode-item .show-name{font-weight:600;color:#2c3e50;font-size:14px;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.upcoming-episode-item .episode-info{font-size:12px;color:#6c757d;font-style:italic}.upcoming-episode-item .air-date{font-size:12px;color:#667eea;font-weight:500;text-align:right;background:#667eea1a;padding:4px 8px;border-radius:6px;white-space:nowrap;margin-left:12px}.no-episodes{text-align:center;color:#666;font-style:italic;padding:20px}.pro-features{display:flex;flex-direction:column;gap:12px}.pro-feature{display:flex;align-items:center;padding:12px;background:#f8f9fa;border-radius:8px;border-left:3px solid #dee2e6;transition:all .2s ease}.pro-feature.unlocked{border-left-color:#007bff;background:#f8f9ff;box-shadow:0 2px 4px #007bff1a}.pro-feature.locked{opacity:.7}.pro-feature-icon{font-size:20px;margin-right:12px;width:24px;text-align:center}.pro-feature-content{flex:1}.pro-feature-title{font-weight:600;color:#2c3e50;margin-bottom:2px}.pro-feature-desc{font-size:12px;color:#6c757d}.pro-feature-status{font-size:16px;margin-left:8px}.pro-actions{margin-top:16px;text-align:center}.streaming-horoscope,.feedback-card{border:none}.header{border-bottom:none}.welcome-message{position:fixed;top:20%;left:50%;transform:translate(-50%,-50%);font-size:2.2rem;font-weight:500;color:#e91e63;text-align:center;z-index:10000;opacity:1;transition:opacity .8s ease;pointer-events:none;max-width:90%;line-height:1.4;text-shadow:0 2px 8px rgba(233,30,99,.25);background:none;padding:0;border:none;border-radius:0;-webkit-backdrop-filter:none;backdrop-filter:none;box-shadow:none;animation:welcomePulse 2s ease-in-out infinite}html[data-theme=light] .welcome-message{color:#9c27b0;background:none;text-shadow:0 2px 8px rgba(156,39,176,.25)}.welcome-message.fade-out{opacity:0;transform:translate(-50%,-50%) scale(.95)}@keyframes welcomePulse{0%,to{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.02)}}@keyframes cardSlideIn{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}@media (min-width: 641px) and (prefers-reduced-motion: no-preference){.show-card{animation:cardSlideIn .25s ease-out}}@media (prefers-reduced-motion: reduce){.show-card{animation:none}}.show-poster{width:var(--poster-w);height:var(--poster-h);border-radius:var(--card-radius);object-fit:cover;cursor:pointer;transition:transform .2s ease}.card-more-menu{position:relative;display:inline-block;margin-top:8px}.card-more-btn{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;color:var(--color-muted, #666);transition:all .2s ease;min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center}.card-more-btn:hover{background:var(--color-surface-2, #f5f5f5);color:var(--color-text, #121212)}.card-more-btn:focus-visible{outline:2px solid var(--color-primary-start, #ff4c8d);outline-offset:2px}.card-more-dots{font-size:1.2rem;font-weight:700;line-height:1}.card-more-dropdown{position:absolute;top:100%;right:0;background:var(--color-surface, #ffffff);border:1px solid var(--color-border, #e5e7eb);border-radius:8px;box-shadow:0 4px 12px #00000026;padding:4px;min-width:140px;z-index:10;transform:translateY(4px);opacity:0;visibility:hidden;transition:all .2s ease}.card-more-dropdown[aria-hidden=false]{opacity:1;visibility:visible;transform:translateY(0)}.card-more-item{display:flex;align-items:center;gap:8px;width:100%;padding:8px 12px;border:none;background:none;text-align:left;cursor:pointer;border-radius:4px;color:var(--color-text, #121212);font-size:14px;transition:background-color .2s ease}.card-more-item:hover{background:var(--color-surface-2, #f5f5f5)}.card-more-item:focus-visible{outline:2px solid var(--color-primary-start, #ff4c8d);outline-offset:-2px}.card-more-icon{font-size:16px;width:20px;text-align:center}.card-more-label{font-weight:500}.card-pills{display:none}.show-poster:hover{transform:scale(1.02)}.poster-placeholder{width:var(--poster-w);height:var(--poster-h);border-radius:var(--card-radius);display:flex;align-items:center;justify-content:center;background:var(--color-surface-secondary, #f5f5f5);color:var(--color-text-secondary, #777);font-size:14px;border:2px dashed var(--color-border, #ddd)}.poster-button{background:none;border:none;padding:0;cursor:pointer;border-radius:var(--card-radius);overflow:hidden;transition:transform .2s ease}.poster-button:hover{transform:scale(1.02)}.poster-button:focus-visible{outline:2px solid var(--color-primary, #007bff);outline-offset:2px}@media (min-width: calc(var(--bp-mobile) + 1px)){.show-details{display:grid;grid-template-rows:auto auto auto 1fr auto;gap:6px;min-width:0}.show-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;align-items:center}}@media (min-width: calc(var(--bp-mobile) + 1px)){.show-title{margin:0;color:var(--primary);font-size:1.05rem;font-weight:900;display:flex;gap:8px;align-items:center;cursor:pointer;line-height:1.2;min-width:0;overflow-wrap:anywhere}}.show-meta{color:#8a8a98;font-size:.88rem;display:flex;flex-wrap:wrap;gap:8px;min-width:0;overflow-wrap:anywhere}.show-overview{font-size:.95rem;line-height:1.45;color:var(--text);display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.rating-container{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:6px;min-width:0;overflow-wrap:anywhere}.show-actions{display:flex;flex-wrap:wrap;gap:8px;min-width:0;overflow-wrap:anywhere}.show-actions .btn{white-space:normal}.star-rating{display:inline-flex;gap:2px}.star-btn{border:none;background:none;padding:2px;line-height:1;cursor:pointer;font-size:1.1rem;color:#333}.star-btn.active{filter:saturate(1.2) brightness(1.1);color:#06c;transform:scale(1.1);text-shadow:0 0 6px rgba(0,102,204,.6);font-weight:700;font-size:1.3rem}.list-container{background:var(--card);border:3px solid var(--border);border-radius:12px;padding:12px;min-height:80px;transition:all .3s ease}.list-container:empty:before{content:"No items yet. Start by searching for something!";display:block;text-align:center;color:#888;font-style:italic;padding:40px 20px;opacity:.7}.section{margin:20px 0}.section-header{margin-bottom:12px}.section-header h3{margin:0;display:flex;align-items:center;gap:8px}.count{background:var(--primary);color:#fff;border-radius:12px;padding:2px 8px;font-size:12px;margin-left:6px}.binge-banner{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;padding:12px 16px;border-radius:10px;margin:14px 0;text-align:center;animation:fadeout .4s ease 2.6s forwards}#bingeBanner{display:flex;align-items:center;gap:12px;padding:4px 0}#bingeBanner .binge-time{font-family:ui-monospace,Menlo,monospace;font-weight:900;color:#ffd43b}#bingeBanner .binge-label{color:#555}#bingeBanner .binge-cta{padding:8px 12px;font-size:.88rem;border-radius:16px;color:#fff;background:linear-gradient(45deg,#ff6b6b,#4ecdc4,#45b7d1,#96ceb4,#feca57,#ff9ff3,#54a0ff);background-size:400% 400%;animation:rainbow 3s ease-in-out infinite;border:2px solid rgba(255,255,255,.85)}@keyframes rainbow{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.empty-state{text-align:center;color:#666;padding:20px;font-style:italic}input,select,button{transition:all .2s ease}.skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}.skip-link:focus{position:fixed;left:8px;top:8px;width:auto;height:auto;padding:8px 12px;background:#000;color:#fff;z-index:1000;border-radius:6px;outline:3px solid #fff}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:normal;border:0}:focus-visible{outline:3px solid var(--focus, #1a73e8);outline-offset:2px}body.dark-mode :focus-visible{outline-color:#fff}button,input[type=button],input[type=submit],input[type=reset],select,.clickable{min-height:44px;min-width:44px}.btn.small{min-height:44px;min-width:44px;padding:8px 12px}.icon-btn{min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.loading{opacity:.6;pointer-events:none;position:relative}.loading:after{content:"";position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px 0 0 -10px;border:2px solid var(--border);border-top:2px solid var(--primary);border-radius:50%;animation:spin 1s linear infinite}.skeleton{background:linear-gradient(90deg,var(--border) 25%,var(--card) 50%,var(--border) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:4px}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.skeleton-card{height:120px;margin:8px 0;border-radius:8px}.skeleton-text{height:16px;margin:8px 0;width:80%}.skeleton-text.short{width:40%}.skeleton-button{height:44px;width:100px;border-radius:8px}.btn-loading,.btn.loading .btn-content{display:none}.btn.loading .btn-loading{display:inline-flex;align-items:center;gap:6px}.btn.loading{pointer-events:none;opacity:.8}.modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:#0000008c;display:none;align-items:center;justify-content:center;z-index:10000;margin:0;padding:0}.modal{background:var(--bg);color:var(--text);max-width:500px;width:90%;max-height:90vh;min-height:auto;border-radius:14px;border:2px solid var(--primary);padding:24px;box-shadow:0 20px 60px #0000004d;position:relative;overflow:visible;box-sizing:border-box;margin:auto;text-align:center}.modal h3{margin:0 0 10px;color:var(--primary);word-wrap:break-word;overflow-wrap:break-word}.modal .modal-actions{display:flex;justify-content:center;gap:8px;margin-top:14px;flex-wrap:wrap;overflow:visible;max-width:100%;padding:8px 0}.modal .modal-body{word-wrap:break-word;overflow-wrap:break-word;max-width:100%;overflow:hidden;text-align:center}.modal input[type=text],.modal .search-input{width:100%;max-width:300px;margin:0 auto;display:block;text-align:center}.modal-content-wrapper{text-align:center;margin-bottom:16px}.modal-instruction{margin-bottom:16px;color:var(--text);opacity:.8}.modal-input{width:100%;max-width:300px;padding:12px;border:2px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);font-size:16px;text-align:center;margin:0 auto;display:block;box-sizing:border-box}#settingsTab span,#settingsTab{display:none}:root{--fab-size: 50px;--fab-gap: 10px;--fab-rail-height: 80px}.fab-rail{position:sticky;bottom:max(16px,env(safe-area-inset-bottom));z-index:1000;height:var(--fab-rail-height);display:flex;align-items:center;justify-content:space-between;padding:0 20px;margin-top:20px;pointer-events:none}.fab-stack{display:flex;flex-direction:column;gap:var(--fab-gap);pointer-events:auto}.fab,.fab-left{position:static;display:grid;place-items:center;border:none;cursor:pointer;color:var(--text, #1f2937);font-size:24px;transition:all .2s ease;pointer-events:auto;background:none;box-shadow:none;border-radius:0;width:auto;height:auto;padding:0;margin:0}.fab:hover,.fab-left:hover{transform:scale(1.05);opacity:.8}@media (max-width: var(--bp-mobile-lg)){:root{--fab-size: 45px;--fab-rail-height: 70px}.fab-rail{padding:0 16px;bottom:max(12px,env(safe-area-inset-bottom))}}@media (min-width: 1200px){.fab-rail{padding:0}.fab-left{margin-left:-10px}.fab-stack{margin-right:-10px}}.fab,.fab-left{position:relative;background:none;border:none;width:auto;height:auto;border-radius:0;display:inline-flex;align-items:center;justify-content:center;box-shadow:none;padding:0;color:inherit;font-size:24px;line-height:1;cursor:pointer;transition:transform .08s ease,opacity .12s ease}.fab:hover,.fab-left:hover{opacity:.9}.fab:active,.fab-left:active{transform:translateY(1px)}.fab:focus-visible,.fab-left:focus-visible{outline:2px solid color-mix(in oklab,currentColor 50%,transparent);outline-offset:2px;border-radius:6px}@media (max-width: 1200px){.main-container{padding-bottom:calc(var(--fab-rail-height) + 20px)}}.tab[style*="display: none"]{display:none}.tab-section{position:relative}.fab-dock{position:sticky;bottom:0;display:flex;justify-content:space-between;align-items:flex-end;z-index:30;pointer-events:none;padding:0;padding-bottom:env(safe-area-inset-bottom,0);margin-top:20px;width:100%}.fab-dock .fab-left{pointer-events:auto;margin-right:auto}.fab-dock .fab-stack{display:flex;flex-direction:column;gap:12px;align-items:center;margin-left:auto}.fab-dock .fab{pointer-events:auto}@media (max-width: var(--bp-mobile)){.fab-dock{padding:0;bottom:0;gap:8px}.fab-dock .fab-stack{gap:10px}}.fab,.fab-left{position:relative}.fab-left,.fab-stack{display:none}.fab-dock .fab-left{display:block;background:none;box-shadow:none;border-radius:0}.fab-dock .fab-stack{display:flex}.fab-dock .fab{background:none;box-shadow:none;border-radius:0}#btnSettings{background:none;box-shadow:none;border-radius:0;border:none;padding:0;margin:0;width:auto;height:auto}#btnSettings:hover{background:none;box-shadow:none;transform:scale(1.05);opacity:.8}.fab-dock #btnSettings.fab-left{background:transparent;background-color:transparent;box-shadow:none;border:none;border-radius:0;padding:0;margin:0;width:auto;height:auto;min-width:auto;min-height:auto}.fab-dock #btnSettings.fab-left:hover{background:transparent;background-color:transparent;box-shadow:none;transform:scale(1.05);opacity:.8}.fab-dock #btnSettings.fab-left:active{background:transparent;background-color:transparent;box-shadow:none}.fab-dock #btnSettings.fab-left:focus{background:transparent;background-color:transparent;box-shadow:none;outline:2px solid color-mix(in oklab,currentColor 50%,transparent);outline-offset:2px}.tab.hidden{display:flex;visibility:visible;opacity:1;position:relative;width:32px;height:44px;min-width:32px;padding:0;margin:0;background:transparent;border:none;overflow:hidden;flex:0 0 32px;pointer-events:auto}.tab.hidden span,.tab.hidden .tab-badge{display:none;visibility:hidden;opacity:0}.tab[style*="visibility: hidden"]{display:none;visibility:hidden;opacity:0;position:absolute;left:-9999px;pointer-events:none;flex:0;width:0;height:0;margin:0;padding:0;overflow:hidden}@media (max-width: var(--bp-mobile-lg)){.tab-container{padding:0;margin:12px 0 0;justify-content:space-evenly}.tab{flex:1 1 0;padding:14px 8px;font-size:13px;min-width:0;min-height:44px}.tab-badge{font-size:10px;padding:1px 4px;margin-left:4px}}.tab-container .tab.hidden{display:none;opacity:1}@media (min-width: 769px){.tab-container .tab.hidden{display:none}}.pro-list{margin:8px 0 12px;padding-left:18px}.pro-list .lock{opacity:.7;margin-right:6px}body.is-pro .lock{display:none}.stats-grid{display:grid;grid-template-columns:repeat(5,minmax(90px,1fr));gap:10px}.stats-grid .stat{padding:10px;border:2px solid var(--border);border-radius:12px;text-align:center}.stats-grid .stat b{display:block;font-size:1.25rem;line-height:1.2}.stats-grid .stat span{font-size:.85rem;opacity:.8}@media (max-width: var(--bp-mobile)){.stats-grid{grid-template-columns:repeat(2,1fr)}}#notifAdvancedCard.disabled{opacity:.5;pointer-events:none}#notifAdvancedCard.disabled input,#notifAdvancedCard.disabled select{background-color:#f5f5f5;color:#999}:focus-visible{outline:2px solid #007acc;outline-offset:2px;border-radius:4px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}button:focus-visible,.btn:focus-visible{outline:2px solid #007acc;outline-offset:2px}.skel{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:skeleton-loading 1.5s infinite;border-radius:4px}.skel-card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px;box-shadow:0 2px 4px #0000001a}.skel-card .skel{height:20px;margin-bottom:8px}.skel-card .skel:first-child{height:24px;width:60%}.skel-card .skel:last-child{height:16px;width:40%}.skeleton-hidden{display:none}.fw-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;z-index:1000;display:flex;align-items:center;justify-content:center}.fw-modal-content{position:relative;background:#fff;border-radius:12px;width:98%;max-width:900px;height:95%;max-height:800px;box-shadow:0 4px 20px #0000004d;display:flex;flex-direction:column;overflow:hidden}.fw-modal-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #5a67d8;border-radius:12px 12px 0 0;cursor:move;-webkit-user-select:none;user-select:none}.fw-modal-title{font-weight:600;color:#fff;font-size:14px;text-shadow:0 1px 2px rgba(0,0,0,.2)}.fw-modal-controls{display:flex;gap:8px}.fw-control-btn{width:24px;height:24px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.fw-control-btn.minimize{background:#fbbf24;color:#000;box-shadow:0 2px 4px #0000001a}.fw-control-btn.minimize:hover{background:#f59e0b;transform:translateY(-1px)}.fw-control-btn.maximize{background:#10b981;color:#fff;box-shadow:0 2px 4px #0000001a}.fw-control-btn.maximize:hover{background:#059669;transform:translateY(-1px)}.fw-control-btn.close{background:#ef4444;color:#fff;box-shadow:0 2px 4px #0000001a}.fw-control-btn.close:hover{background:#dc2626;transform:translateY(-1px)}.fw-modal iframe{width:100%;flex:1;border:none;border-radius:0 0 12px 12px}.pro-badge{background:linear-gradient(135deg,#ff6b6b,orange);color:#fff;font-size:10px;font-weight:700;padding:2px 6px;border-radius:8px;text-transform:uppercase;letter-spacing:.5px;margin:2px auto 0;display:inline-block;box-shadow:0 1px 3px #0003}.locked{opacity:.6;position:relative;pointer-events:none}.locked:after{content:"ðŸ”’";position:absolute;top:4px;right:4px;font-size:12px;opacity:.8}[data-pro=true]:not(.pro-enabled){opacity:.6;position:relative;pointer-events:none}[data-pro=true]:not(.pro-enabled):after{content:"ðŸ”’";position:absolute;top:4px;right:4px;font-size:12px;opacity:.8}@media (max-width: var(--bp-mobile-lg)){.tab-container .tab.hidden{display:none;max-width:32px}}.search-tips{position:relative;display:flex;align-items:center}.search-tips-inline{position:relative;display:inline-flex;align-items:center;margin-left:8px}.tips-trigger{width:20px;height:20px;min-width:20px;min-height:20px;max-width:20px;max-height:20px;border-radius:50%;border:1px solid #666666;background:#f8f9fa;cursor:pointer;font-weight:700;line-height:1;display:inline-flex;align-items:center;justify-content:center;font-size:11px;transition:all .2s ease;color:#333;opacity:1;padding:0;margin:0}.tips-trigger:hover{background:#e9ecef;color:#333;border-color:#495057;transform:scale(1.1);opacity:1}.tips-trigger:focus-visible{outline:2px solid var(--primary)}.tips-pop[hidden]{display:none}.tips-pop{position:fixed;z-index:9999;width:min(320px,92vw);background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 10px 30px #00000040;padding:10px}.tips-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px}.tips-title{font-weight:600}.tips-close{background:none;border:0;font-size:20px;cursor:pointer;line-height:1}.tips-list{margin:0;padding-left:16px;display:grid;gap:6px}.tips-list code{background:#7f7f7f1f;padding:0 4px;border-radius:6px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace}.tips-actions{display:flex;align-items:center;justify-content:flex-end;margin-top:6px}.tips-dontshow{font-size:.9rem;opacity:.9;display:flex;align-items:center;gap:6px}@media (max-width: 480px){.tips-pop{width:92vw}}.pro-locked{position:relative}.pro-locked[aria-disabled=true]{opacity:.55;cursor:not-allowed}.pro-lock-tip{position:absolute;z-index:200;bottom:calc(100% + 6px);left:0;background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;box-shadow:0 6px 20px #00000040;padding:6px 8px;font-size:.9rem;white-space:nowrap;display:none}.pro-locked:hover .pro-lock-tip,.pro-locked:focus-within .pro-lock-tip{display:block}.badge-pro{margin-left:6px;font-size:.75rem;padding:2px 6px;border-radius:999px;border:1px solid var(--color-border);opacity:.85}.quote-flickword-container{display:flex;align-items:stretch;gap:16px;margin:12px 0;animation:flickwordSlideIn .9s ease-out .6s both;justify-content:space-between;width:100%}.left-column{display:flex;flex-direction:column;gap:12px;flex:0 0 48%;max-width:48%;width:48%;justify-content:space-between}.left-column>*{flex:1;display:flex;flex-direction:column}.quote-card{background:var(--card);border:2px solid var(--accent);border-radius:12px;padding:16px;margin:0;box-shadow:0 2px 8px #00000014;transition:all .3s ease;opacity:.9;width:100%}.quote-card:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.random-quote-card{background:var(--card);border:2px solid var(--accent);border-radius:12px;padding:16px;margin:0;box-shadow:0 2px 8px #00000014;transition:all .3s ease;opacity:.9;width:100%}.random-quote-card:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.flickword-card{background:var(--card);border:2px solid var(--primary);border-radius:12px;padding:16px;margin:0;box-shadow:0 2px 8px #00000014;transition:all .3s ease;opacity:.9;flex:0 0 48%;max-width:48%;min-width:300px;width:48%;align-self:stretch}@keyframes flickwordSlideIn{0%{opacity:0;transform:translateY(25px) scale(.95)}to{opacity:.9;transform:translateY(0) scale(1)}}.flickword-card:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.quote-title{margin:0 0 16px;font-size:16px;font-weight:600;color:var(--text);text-align:center}.quote-content{text-align:center}.quote-text{font-size:14px;font-style:italic;color:#333;font-weight:500;margin:0 0 8px;line-height:1.4}.quote-author{font-size:12px;color:var(--text-secondary);margin:0;font-weight:500}.flickword-title{margin:0 0 16px;font-size:18px;font-weight:700;color:var(--text);text-align:center}.flickword-timer-section{display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:20px}.flickword-countdown{background:var(--primary);color:#fff;padding:8px 12px;border-radius:12px;font-weight:700;font-size:14px;font-family:Courier New,monospace;border:none;text-align:center;display:inline-block;min-width:90px;box-shadow:0 2px 4px #0000001a;letter-spacing:.5px}.flickword-motivation{font-size:10px;color:var(--text-secondary);font-weight:500;text-align:center;margin:0;font-style:italic;opacity:.8;padding:0;background:transparent;border:none;line-height:1.3}.flickword-stats{display:flex;gap:8px;margin-bottom:20px;justify-content:space-between;width:100%}.stat-item{text-align:center;padding:12px 8px;background:var(--bg);border-radius:8px;flex:1;border:1px solid var(--border)}.stat-label{display:block;font-size:12px;color:var(--text-secondary);margin-bottom:4px;font-weight:500}.stat-value{display:block;font-size:14px;font-weight:600;color:var(--text)}.flickword-actions{text-align:center;display:flex;justify-content:center}@media (max-width: var(--bp-mobile-lg)){.quote-flickword-container{flex-direction:column;gap:8px;justify-content:flex-start}.left-column,.quote-card,.flickword-card{flex:1;max-width:100%;min-width:auto;width:100%}.flickword-stats{flex-direction:column;gap:12px}.stat-item{min-width:auto}.flickword-header{flex-direction:column;gap:12px;text-align:center}}@media (max-width: 428px){.quote-flickword-container{margin:8px 0;gap:6px}.left-column{gap:6px}.quote-card,.flickword-card{padding:12px;margin:0}.quote-title,.flickword-title{font-size:14px;margin-bottom:12px}.quote-text{font-size:13px}.quote-author{font-size:11px}}.stats{display:flex;flex-wrap:wrap;gap:12px;margin:14px 0}.stats .stat{display:none}.stat-num{font-size:1.8rem;color:var(--primary);font-weight:900}.stat-label{font-size:.72rem;color:#80808f;text-transform:uppercase;font-weight:900;letter-spacing:.6px}#bingeMeter{display:block;flex-basis:100%;order:0}.like-btn,.dislike-btn{padding:6px 12px;border-radius:14px;background:#dedee3;color:#444;border:1px solid #ccc;transition:all .2s ease;cursor:pointer;font-weight:500}.like-btn.active{background:linear-gradient(45deg,#2ed573,#1dd1a1);color:#fff;border-color:#1dd1a1;box-shadow:0 2px 4px #2ed5734d}.dislike-btn.active{background:linear-gradient(45deg,#ff4757,#ff3742);color:#fff;border-color:#ff3742;box-shadow:0 2px 4px #ff47574d}.file-input-label{display:flex;flex-direction:column;gap:4px;cursor:pointer}.file-input-label input[type=file]{cursor:pointer}.file-label{font-size:.85rem;color:#666;font-style:italic}.tag-filters{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}.tag-pill{padding:6px 10px;border-radius:999px;border:2px solid var(--border);background:var(--card);cursor:pointer;font-weight:700}.tag-pill.active{border-color:var(--primary);color:var(--primary)}.share-instructions{margin-top:4px;color:#666;font-size:11px;text-align:center}.btn-link{background:none;border:none;color:var(--primary);font-weight:900;text-decoration:underline;padding:0;cursor:pointer}.form-error{color:#b00020;margin-top:6px;font-size:.9rem}.feedback-card{background:var(--card);border:2px solid var(--primary);border-radius:14px;padding:12px;margin:14px 0}.feedback-form{margin-top:12px}.feedback-form .hidden{display:none}.feedback-form textarea{flex:1;min-width:200px}.feedback-subtitle{font-size:.9em;color:var(--text-secondary);text-align:center;margin:8px 0 16px;font-style:italic;opacity:.8}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.network-status{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:#22c55e1a;border:2px solid #22c55e;color:#22c55e;font-size:16px;transition:all .3s ease;cursor:help}.network-status.offline{background:#ef44441a;border-color:#ef4444;color:#ef4444}.network-status.slow{background:#f59e0b1a;border-color:#f59e0b;color:#f59e0b}.network-status:hover{transform:scale(1.1);box-shadow:0 2px 8px #00000026}.dark-mode .network-status{background:#22c55e33;border-color:#4ade80;color:#4ade80}.dark-mode .network-status.offline{background:#ef444433;border-color:#f87171;color:#f87171}.dark-mode .network-status.slow{background:#f59e0b33;border-color:#fbbf24;color:#fbbf24}.advanced-search-options{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-top:12px;box-shadow:0 4px 12px #0000001a;animation:slideDown .3s ease-out}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.advanced-search-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.search-filter-group{display:flex;flex-direction:column;gap:6px}.filter-label{font-size:12px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.year-range{display:flex;align-items:center;gap:8px}.year-input{flex:1;padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text);font-size:14px;min-height:40px}.year-separator{color:var(--text-secondary);font-weight:600;font-size:16px}.rating-filter,.media-type-filter,.sort-by-filter,.search-type-filter,.language-filter{padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text);font-size:14px;min-height:40px;cursor:pointer}.advanced-search-actions{display:flex;gap:12px;justify-content:flex-end;border-top:1px solid var(--border);padding-top:16px}@media (max-width: var(--bp-mobile-lg)){.advanced-search-grid{grid-template-columns:1fr;gap:12px}.advanced-search-actions{flex-direction:column}.year-range{flex-direction:column;gap:4px}.year-separator{display:none}}.active-filters{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:16px;animation:slideDown .3s ease-out}.active-filters-header{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-weight:600;color:var(--text-secondary)}.filter-icon{font-size:16px}.filter-title{font-size:14px;text-transform:uppercase;letter-spacing:.5px}.active-filters-list{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.filter-tag{background:var(--primary);color:#fff;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px}.filter-tag .remove-filter{background:none;border:none;color:#fff;cursor:pointer;font-size:14px;padding:0;width:16px;height:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s ease}.filter-tag .remove-filter:hover{background:#fff3}.clear-filters-btn{background:var(--danger);color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.clear-filters-btn:hover{background:#dc2626;transform:translateY(-1px)}.theme-toggle{position:relative;overflow:hidden;background:linear-gradient(45deg,#f8f9fa,#e9ecef);border:2px solid #dee2e6;color:#495057;transition:all .3s ease}.theme-toggle:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #00000026}.theme-toggle:active{transform:translateY(0) scale(1)}.dark-mode .theme-toggle{background:linear-gradient(45deg,#495057,#343a40);border-color:#6c757d;color:#f8f9fa}.dark-mode .theme-toggle:hover{box-shadow:0 6px 20px #0006}.list-container{transition:all .3s ease}@media (min-width: calc(var(--bp-mobile) + 1px)){.show-card{overflow:hidden}}@media (min-width: calc(var(--bp-mobile) + 1px)){.show-title,.show-meta,.rating-container,.show-actions{min-width:0;overflow-wrap:anywhere}}.poster-button{border:none;background:none;padding:0;margin:0;cursor:pointer;display:block}@media (prefers-reduced-motion: reduce){#bingeBanner .binge-cta{animation:none}}.notes-chip{display:inline-flex;align-items:center;gap:4px;padding:2px 6px;background:#9c27b01a;color:#9c27b0;border:1px solid rgba(156,39,176,.2);border-radius:12px;font-size:11px;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease;margin-top:4px}.notes-chip:hover{background:#9c27b026;border-color:#9c27b04d;transform:translateY(-1px)}.notes-chip:active{transform:translateY(0)}html[data-theme=dark] .notes-chip{background:#9c27b033;color:#bb86fc;border-color:#bb86fc4d}html[data-theme=dark] .notes-chip:hover{background:#9c27b040;border-color:#bb86fc66}.modal-backdrop[style*="display: flex"]{display:flex}@media (min-width: calc(var(--bp-mobile) + 1px)){.search-row{display:grid;grid-template-columns:minmax(380px,1fr) max-content max-content max-content;align-items:center;column-gap:12px;grid-auto-rows:44px}.search-row .search-controls{display:contents;margin-top:0}.search-row .search-input,.search-row #searchInput{grid-column:1 / 2;width:100%;grid-row:1}.search-row #genreFilter{grid-column:2 / 3;grid-row:1}.search-row #searchBtn{grid-column:3 / 4;grid-row:1}.search-row #clearSearchBtn{grid-column:4 / 5;grid-row:1}.search-row select,.search-row .btn{height:44px;min-height:44px;padding:0 14px;white-space:nowrap}}@media (max-width: var(--bp-mobile)){.search-container{display:block}.search-controls{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;margin-top:8px}.search-controls select{height:40px;min-width:0}.search-controls .btn{min-height:40px;padding:8px 12px;font-size:14px;display:flex;gap:6px}.search-controls .btn .label{display:inline}}@media (max-width: var(--bp-mobile)){.search-row .search-input{font-size:14px;padding:10px 12px}.search-row .btn{padding:8px 12px;font-size:14px}@media (max-width: 360px){.search-controls{grid-template-columns:1fr 1fr}.search-controls #clearSearchBtn{grid-column:2 / 3}}.nav-tiles{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:16px}.nav-tiles .nav-tile{min-height:80px;padding:16px}.nav-tiles .nav-tile h3{font-size:16px;margin-bottom:8px}.nav-tiles .nav-tile p{font-size:13px;line-height:1.4}#randomQuoteCard{display:none}#quoteCard{margin-bottom:16px}.container{max-width:100vw;padding:0 16px}.show-poster{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}.show-title{font-size:14px}.show-overview{font-size:12px;line-height:1.3}.settings-container .card{margin-bottom:16px;padding:16px}.settings-container .btn{width:100%;margin-bottom:8px}.stats-grid{grid-template-columns:1fr 1fr;gap:12px}.stat-box{padding:12px;text-align:center}.stat-number{font-size:20px;font-weight:700}.stat-label{font-size:12px;margin-top:4px}#fwModal{display:none}.header h1{text-align:center;margin:0 auto}.header .btn.secondary{background:linear-gradient(45deg,var(--primary),var(--purple));color:#fff;pointer-events:auto;z-index:10}.list-container{display:block}.tab{pointer-events:auto;z-index:10}.search-row .search-input{order:1;width:100%;margin-bottom:8px}.search-row .genre-filter{order:2;height:44px;min-width:60px;width:60px;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:8px 6px;margin-bottom:0}.search-controls{display:flex;justify-content:center;gap:12px;margin-top:8px;order:3}.search-controls .btn{display:flex;align-items:center;justify-content:center;gap:6px;min-height:40px;padding:8px 12px;font-size:14px;line-height:1;text-indent:0;overflow:visible;white-space:nowrap;-webkit-appearance:none;-moz-appearance:none;appearance:none;min-width:auto;width:auto}.search-controls .btn .icon{line-height:1;display:inline}.search-controls .btn .label{display:inline;visibility:visible;opacity:1}.search-controls .btn:before,.search-controls .btn:after{content:none;display:none}.show-card .star-rating{gap:2px}.show-card .star-btn{width:20px;height:20px;font-size:14px}.show-card .like-dislike{gap:4px}.show-card .like-btn,.show-card .dislike-btn{width:24px;height:24px;font-size:14px}@media (min-width: calc(var(--bp-mobile) + 1px)){body.condensed-list .show-card .right-actions .icon-btn{height:32px;width:32px;font-size:16px}body.condensed-list .show-card .show-overview{display:none}}}@media (min-width: calc(var(--bp-mobile) + 1px)){.top-search .search-row{display:grid;grid-template-columns:minmax(320px,1fr) max-content max-content max-content;align-items:center;column-gap:8px;flex-wrap:unset}.top-search .search-input{min-width:0;width:100%}.top-search .genre-filter{width:max-content;min-width:120px}}.modal-backdrop{visibility:hidden;opacity:0;transition:opacity .15s ease}.modal-backdrop[data-open=true]{visibility:visible;opacity:1}body.modal-open{overflow:hidden}.modal-backdrop .modal-dialog:focus{outline:none}.modal-backdrop .modal-dialog :focus-visible{outline:2px solid var(--focus-color, #2684ff);outline-offset:2px}body.condensed .show-card{padding:calc(var(--card-pad-y-desktop, 14px) * .6) calc(var(--card-pad-x-desktop, 14px) * .7);gap:calc(var(--card-gap-desktop, 16px) * .6)}@media (max-width: var(--bp-mobile)){body.condensed .show-card{padding:calc(var(--card-pad-y, 8px) * .6) calc(var(--card-pad-x, 12px) * .7);gap:calc(var(--card-gap, 8px) * .6)}}body.condensed .show-card .show-title{font-size:calc(var(--meta-title-size-desktop, 18px) * .9);line-height:calc(var(--meta-line-desktop, 1.3) * .95)}@media (max-width: var(--bp-mobile)){body.condensed .show-card .show-title{font-size:calc(var(--meta-title-size, 16px) * .9);line-height:calc(var(--meta-line, 1.2) * .95)}}body.condensed .show-card .show-overview{margin-top:0;opacity:.95}body.condensed .show-card .show-actions .btn,body.condensed .show-card .show-actions button{min-height:36px;padding:4px 0}body.condensed .show-card .show-meta,body.condensed .show-card .rating-container{margin:2px 0}body.condensed .icon,body.condensed [aria-hidden=true]{pointer-events:none}:root{--safe-top: 0px;--safe-bottom: 0px}body.supports-safe-area{--safe-top: env(safe-area-inset-top, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px)}.main-content,#homeTab .list-container,#watchingTab .list-container,#wishlistTab .list-container,#watchedTab .list-container,#discoverTab .list-container{padding-bottom:calc(16px + var(--safe-bottom))}.floating-action,.toast,.bottom-bar,.floating-toolbar{bottom:max(16px,calc(8px + var(--safe-bottom)))}.sticky-header,.app-header{top:var(--safe-top)}.app-container,.page,.tab-content{max-width:100%;overflow-x:hidden}body.a11y .show-card .show-actions .btn,body.a11y .show-card .show-actions button,body.a11y .toolbar .btn,body.a11y button,body.a11y .btn{min-height:40px}body.a11y .btn:focus-visible,body.a11y button:focus-visible,body.a11y [tabindex]:not([tabindex="-1"]):focus-visible{outline:2px solid var(--focus-color, #2684ff);outline-offset:2px;border-radius:6px}@media (max-width: var(--bp-mobile)){body.a11y .show-card .show-actions .btn,body.a11y .show-card .show-actions button{min-width:40px}}body.a11y .icon[aria-hidden=true]{pointer-events:none}body[data-theme=classic]{--bg: #1a1a1a;--text: #f5f5f5;--card: #2a2a2a;--border: #404040;--text-secondary: #b0b0b0;--primary: #2684ff;background:linear-gradient(135deg,#1e3a5f,#2d4a6b)}body[data-theme=sunset]{--bg: #1a0f0f;--text: #ffeae5;--card: #2a1a1a;--border: #4a2a2a;--text-secondary: #f5bdb2;--primary: #ff6b6b;background:linear-gradient(135deg,#4a1a1a,#6b2a2a)}body[data-theme=midnight]{--bg: #0f0f1a;--text: #e9f7ff;--card: #1a1a2a;--border: #2a2a4a;--text-secondary: #a9c6d6;--primary: #19b2ff;background:linear-gradient(135deg,#1a2a4a,#2a3a6b)}body[data-theme=forest]{--bg: #0f1a0f;--text: #e8ffee;--card: #1a2a1a;--border: #2a4a2a;--text-secondary: #b4d2bf;--primary: #2ecc71;background:linear-gradient(135deg,#1a4a1a,#2a6b2a)}.providers-row{display:flex;align-items:center;gap:6px;margin-top:6px;flex-wrap:wrap;opacity:.98}.providers-row .providers-label{font-size:12px;color:var(--muted, #9aa6b2);margin-right:4px}.provider-badge{display:inline-flex;align-items:center;justify-content:center;height:22px;min-width:22px;padding:0 6px;border-radius:6px;background:var(--card, #2a2a2a);color:var(--text, #f5f5f5);text-decoration:none;font-size:12px;line-height:1;border:1px solid var(--border, #404040);font-weight:500}.provider-badge img{width:18px;height:18px;object-fit:contain;border-radius:4px}.provider-badge:hover{filter:brightness(1.05)}.providers-row[data-locked="1"] .provider-badge{opacity:.25;pointer-events:none;filter:blur(1px);background:var(--bg, #1a1a1a);color:var(--muted, #9aa6b2);border-color:var(--border, #404040)}.providers-row[data-locked="1"] .provider-badge img{filter:blur(2px);opacity:.3}.providers-row .more-count{font-size:12px;opacity:.8;padding:0 4px}.extras-row{display:flex;align-items:center;gap:6px;margin-top:6px;flex-wrap:wrap;opacity:.98}.extras-row .extras-label{font-size:12px;color:var(--muted, #9aa6b2);margin-right:4px}.extra-chip{display:inline-flex;align-items:center;justify-content:center;height:22px;padding:0 8px;border-radius:6px;background:var(--bg-elev, #1a1f27);color:var(--text, #e6ecf2);font-size:12px;line-height:1;border:1px solid rgba(255,255,255,.06);text-decoration:none;white-space:nowrap}.extra-chip:hover{filter:brightness(1.05)}.extras-row[data-locked="1"] .extra-chip{opacity:.65;pointer-events:none}#upcomingEpisodes{display:none}.playlist-card{background:var(--bg-elev, #141a22);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:10px;margin:10px 0 14px}.playlist-card .video-embed{position:relative;width:100%;aspect-ratio:16 / 9;background:#000;border-radius:8px;overflow:hidden}.playlist-card .video-embed iframe{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;border:0}.playlist-card .video-meta{display:flex;align-items:center;gap:8px;margin-top:8px;flex-wrap:wrap}.playlist-card .video-title{font-size:14px;font-weight:700;line-height:1.25}.playlist-card .pill{display:inline-flex;align-items:center;height:22px;padding:0 8px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:var(--bg, #0b0e13);color:var(--muted, #a6b3c2);font-size:12px;line-height:1}.playlist-card .video-actions{margin-left:auto;display:inline-flex;gap:6px}.playlist-card .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.08);color:var(--text, #e6ecf2);padding:6px 8px;border-radius:6px;font-size:12px;line-height:1}.settings-tabs{display:flex;gap:var(--gap-2);padding:var(--gap-2) var(--gap-3);overflow-x:auto;border-bottom:1px solid var(--color-border);position:sticky;top:0;background:var(--color-surface);z-index:var(--z-header)}.settings-tabs button{flex:0 0 auto;padding:10px 12px;border-radius:999px;border:1px solid var(--color-border);background:var(--color-surface-2);font-weight:600}.settings-tabs button.active{border-color:transparent;color:#fff;background:linear-gradient(90deg,var(--color-primary-start),var(--color-primary-end))}.settings-section{padding:var(--gap-4);min-height:200px;margin-bottom:20px;display:none}.settings-container{max-width:800px;margin:0;padding:0 var(--gap-3)}.settings-section{display:none;padding:24px 0;min-height:400px}.settings-section.active{display:block}.settings-subsection{margin-bottom:32px;padding:0}.settings-subsection:last-child{margin-bottom:0}.settings-title{font-size:1.5rem;font-weight:700;color:var(--text);margin:0 0 8px;line-height:1.3}.settings-subtitle{font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 8px;line-height:1.3}.settings-description{font-size:.9rem;color:var(--text-secondary, #666);margin:0 0 16px;line-height:1.4}.settings-control-group{margin-bottom:20px}.settings-control-group:last-child{margin-bottom:0}.settings-label{display:block;font-size:.9rem;font-weight:500;color:var(--text);margin-bottom:8px;line-height:1.3}.settings-input-group{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.settings-input{padding:8px 12px;border:1px solid var(--border, #ddd);border-radius:6px;font-size:.9rem;background:var(--bg, #fff);color:var(--text);transition:all .2s ease;min-width:200px}.settings-input:focus{outline:none;border-color:var(--primary, #e91e63);box-shadow:0 0 0 3px #e91e631a}.settings-input-number{width:80px;min-width:80px;text-align:center}.settings-textarea{width:100%;padding:12px;border:1px solid var(--border, #ddd);border-radius:6px;font-size:.9rem;background:var(--bg, #fff);color:var(--text);font-family:inherit;resize:vertical;min-height:80px;transition:all .2s ease}.settings-textarea:focus{outline:none;border-color:var(--primary, #e91e63);box-shadow:0 0 0 3px #e91e631a}.settings-checkbox-label{display:flex;align-items:center;gap:8px;margin-bottom:12px;cursor:pointer;font-size:.9rem;line-height:1.3}.settings-checkbox{width:18px;height:18px;accent-color:var(--primary, #e91e63);cursor:pointer}.settings-checkbox-text{color:var(--text);-webkit-user-select:none;user-select:none}.settings-button-group{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px}.settings-hint{font-size:.8rem;color:var(--text-secondary, #888);margin:8px 0 0;line-height:1.3}.settings-status{font-size:.8rem;color:var(--success, #51cf66);font-weight:500}.settings-stats,.settings-pro-features{background:var(--card, #f7f7f9);border:1px solid var(--border, #dedee3);border-radius:8px;padding:16px;margin-top:8px}.settings-form{margin-top:16px}@media (max-width: var(--bp-mobile-lg)){.settings-container{padding:0 16px}.settings-section{padding:16px 0}.settings-subsection{margin-bottom:24px}.settings-title{font-size:1.3rem}.settings-input-group{flex-direction:column;align-items:stretch}.settings-input{min-width:auto;width:100%}.settings-button-group{flex-direction:column}.settings-button-group .btn{width:100%}}@media (max-width: 480px){.settings-tabs{padding:8px 16px;gap:8px}.settings-tabs button{padding:8px 12px;font-size:.85rem}.settings-container{padding:0 12px}.settings-section{padding:12px 0}.settings-subsection{margin-bottom:20px}}.playlist-section[data-mp=v2]{margin:14px 0 8px}.playlist-row{background:var(--bg-elev, #141a22);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:10px;margin-bottom:12px}.playlist-row .row-head{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}.playlist-row .row-title{font-weight:700;font-size:14px;line-height:1.25}.playlist-row .pill{display:inline-flex;align-items:center;height:22px;padding:0 8px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:var(--bg, #0b0e13);color:var(--muted, #a6b3c2);font-size:12px;line-height:1}.playlist-grid{display:grid;grid-template-columns:1fr;gap:8px}@media (min-width: calc(var(--bp-mobile) + 1px)){.playlist-grid{grid-template-columns:1.2fr 1fr}}.playlist-item{position:relative;background:#000;border-radius:8px;overflow:hidden;aspect-ratio:16/9;border:1px solid rgba(255,255,255,.08)}.playlist-item iframe{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;border:0}.playlist-list{display:flex;flex-direction:column;gap:6px}.playlist-link{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,.06);background:var(--bg, #0b0e13);text-decoration:none;color:var(--text, #e6ecf2);font-size:13px}.playlist-link:hover{filter:brightness(1.05)}.playlist-upsell{background:var(--bg-elev, #141a22);border:1px dashed rgba(255,255,255,.15);color:var(--muted, #a6b3c2);border-radius:10px;padding:10px;text-align:center;font-size:13px}.loading-skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading-shimmer 1.5s infinite;border-radius:8px}@keyframes loading-shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.section-loading{opacity:.6;pointer-events:none}.section-loading:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#ffffff1a;border-radius:inherit}.skeleton-card{height:200px;margin-bottom:16px}.skeleton-text{height:16px;margin-bottom:8px;border-radius:4px}.skeleton-text.short{width:60%}.skeleton-text.medium{width:80%}.skeleton-text.long{width:100%}#homeSection{min-height:400px}#homeSection .section{transition:opacity .2s ease-in-out}.section{animation:fadeInUp .3s ease-out}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.trivia-row{display:flex;align-items:center;gap:6px;margin-top:6px;flex-wrap:wrap;opacity:.98}.trivia-row .trivia-label{font-size:12px;color:var(--muted, #9aa6b2);margin-right:2px}.trivia-chip{display:inline-flex;align-items:center;gap:6px;height:22px;padding:0 8px;border-radius:999px;background:var(--bg-elev, #1a1f27);color:var(--text, #e6ecf2);border:1px solid rgba(255,255,255,.06);font-size:12px;line-height:1;white-space:nowrap}.trivia-chip .ic{opacity:.85}.trivia-row[data-locked="1"] .trivia-chip{opacity:.65}.trivia-row .nudge{font-size:12px;opacity:.8}.so-card{--so-gap: 8px}.so-card .card-header{display:flex;align-items:center;gap:6px;margin-bottom:var(--so-gap);flex-wrap:wrap}.so-card .card-header .h-title{font-weight:700;line-height:1.25;max-width:100%;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;font-size:14px}.so-card .card-header .h-meta{display:inline-flex;gap:6px;color:var(--muted, #9aa6b2);font-size:12px}.so-card .show-overview{margin-top:0;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;line-height:1.3;font-size:12px}.so-card .card-pills{display:flex;align-items:center;gap:6px;margin-top:var(--so-gap);flex-wrap:wrap}.so-card .pill{display:inline-flex;align-items:center;gap:6px;height:24px;padding:0 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);background:var(--bg-elev, #141a22);color:var(--text, #e6ecf2);font-size:12px;line-height:1;cursor:pointer}.so-card .pill[hidden]{display:none}.so-card .pill .ic{opacity:.9}.so-card .pill[aria-expanded=true]{filter:brightness(1.06)}.so-card .card-drawer{margin-top:var(--so-gap);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:8px;background:var(--bg, #0b0e13)}.so-card .card-drawer[hidden]{display:none}.so-card .providers-slot,.so-card .extras-slot,.so-card .trivia-slot{margin:6px 0}.so-card{--so-gap: 8px;--so-divider: rgba(0, 0, 0, .08);--so-card-pad-y: 10px}.so-card+.so-card{border-top:1px solid var(--so-divider);margin-top:10px;padding-top:var(--so-card-pad-y)}@media (min-width: calc(var(--bp-mobile) + 1px)){.so-card+.so-card{border-top-color:#0000001a}}.so-card .card-header{margin-bottom:var(--so-gap)}.so-card .card-pills,.so-card .card-drawer{margin-top:var(--so-gap)}.so-card .rating-container{margin:6px 0 0}:root{--card-bg: #fff}.so-card{background:var(--card-bg);border-radius:8px;padding:12px;box-shadow:0 1px 2px #00000014;margin-bottom:12px}.so-card+.so-card{border-top:none;margin-top:0;padding-top:0}.so-card .show-title{display:none}.so-card .card-header{margin-bottom:8px}.so-card .card-pills,.so-card .card-drawer{margin-top:8px}.so-card:nth-of-type(2n){background:color-mix(in srgb,var(--card-bg) 96%,#000 4%)}@media (prefers-color-scheme: dark){:root{--card-bg: #1e1f25}.so-card{box-shadow:0 1px 2px #00000073}.so-card:nth-of-type(2n){background:color-mix(in srgb,var(--card-bg) 96%,#fff 4%)}}.toast-region{position:fixed;inset:auto 16px max(16px,env(safe-area-inset-bottom)) 16px;display:grid;gap:8px;z-index:99999;pointer-events:none}@media (min-width: 769px){.toast-region{inset:16px 16px auto auto}}.toast{pointer-events:auto;max-width:92vw;background:#222;color:#fff;border-radius:12px;padding:10px 12px;box-shadow:0 6px 20px #00000040;display:flex;align-items:center;gap:10px;opacity:0;transform:translateY(10px);transition:transform .18s ease,opacity .18s ease;font-size:.95rem}.toast.show{opacity:1;transform:translateY(0)}.toast[data-type=success]{background:#1b5e20}.toast[data-type=info]{background:#2c3e50}.toast[data-type=error]{background:#b00020}.toast .msg{flex:1}.toast .close{margin-left:auto;background:transparent;border:0;color:inherit;font-size:18px;cursor:pointer;line-height:1}.banner-region{position:fixed;top:0;left:0;right:0;z-index:9998;width:100%}.banner{background:#ffe9cc;color:#5b3b00;padding:10px 12px;display:flex;align-items:center;gap:8px;border-bottom:1px solid rgba(0,0,0,.1);font-size:.95rem}.banner[data-type=error]{background:#ffe5e8;color:#7a0010}.banner .msg{flex:1}.banner .close{margin-left:auto;background:none;border:0;cursor:pointer;font-size:18px;line-height:1}body.has-banner{padding-top:50px}@media (prefers-reduced-motion: reduce){.toast{transition:none}}.header .header-bar{display:grid;grid-auto-rows:min-content;row-gap:6px}.header .app-title{line-height:1.15;margin:2px 0 0}.header .app-subtitle{line-height:1.2;margin:0 0 2px;opacity:.9}.account-controls{display:flex;align-items:center;gap:8px;margin-top:2px;margin-bottom:2px}.account-controls #accountBtn{min-height:40px;padding:0 12px}.account-controls #langSelect{min-height:40px;padding:0 10px;border-radius:10px;border:1px solid var(--color-border);background:var(--color-surface)}.curated-sections{display:flex;flex-direction:column;gap:16px;margin-top:12px}.curated-section{display:flex;flex-direction:column;gap:8px}.curated-section .section-header{display:flex;align-items:baseline;gap:8px}.curated-section .section-title{font-weight:600;font-size:1.1rem}.curated-section .section-subtitle{font-size:.9rem;opacity:.75}.curated-row{display:grid;grid-auto-flow:column;grid-auto-columns:44vw;gap:10px;overflow-x:auto;overscroll-behavior-x:contain;scroll-snap-type:x mandatory;padding:4px 2px 8px;-webkit-overflow-scrolling:touch}.curated-row::-webkit-scrollbar{height:8px}.curated-row::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}.curated-card{background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;padding:10px;width:180px;flex-shrink:0;scroll-snap-align:start;box-shadow:0 2px 8px #0000000f}.curated-card+.curated-card{margin-left:10px}.curated-card .poster{width:100%;aspect-ratio:2/3;border-radius:10px;overflow:hidden;background:#f2f2f2}.curated-card .poster img{width:100%;height:100%;object-fit:cover;display:block}.curated-card .poster.placeholder{background:linear-gradient(90deg,#eee,#f7f7f7,#eee)}.curated-card .title{font-size:.95rem;line-height:1.2;margin:8px 0 4px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.card-meta{margin-top:6px;font-size:.92rem;opacity:.9}.curated-card .stars{color:#fbbf24;margin-right:4px}.curated-card .votes{color:var(--color-muted);font-size:.85rem}.curated-card .actions{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}.curated-card .btn{padding:4px 8px;min-height:28px;font-size:.85rem}@media (min-width: 769px){.curated-row{grid-auto-columns:220px}}.curated-row .card{flex-shrink:0;scroll-snap-align:start;width:180px;margin-right:10px}.curated-row .card:last-child{margin-right:0}@media (max-width: var(--bp-mobile-lg)){.curated-row .card{width:44vw}}@media (max-width: 480px){.curated-row .card{width:58vw}}.trivia-card{margin-top:16px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 2px 8px #0000000f;padding:12px;display:grid;gap:10px}.trivia-head{display:flex;align-items:baseline;gap:10px}.trivia-head h2{font-size:1.1rem;margin:0}.trivia-stats{opacity:.8;font-size:.9rem}.trivia-body{display:grid;gap:10px}.trivia-question{font-weight:600;line-height:1.3}.trivia-choices{list-style:none;padding:0;margin:0;display:grid;gap:8px}.trivia-choices li{border:1px solid var(--color-border);border-radius:10px;padding:10px;cursor:pointer}.trivia-choices li[aria-selected=true]{outline:2px solid var(--primary)}.trivia-choices li.correct{background:#0f5e20;color:#fff;border-color:#0f5e20}.trivia-choices li.wrong{background:#7a0010;color:#fff;border-color:#7a0010}.trivia-feedback{min-height:1.2em;font-size:.95rem}.trivia-actions .btn{min-height:36px;padding:6px 10px}@media (max-width: 480px){.trivia-card{padding:10px}}.trivia-modal-content{text-align:left;max-width:500px}.trivia-modal-content .trivia-question{font-weight:600;margin-bottom:20px;font-size:16px;line-height:1.4;color:var(--text)}.trivia-modal-content .trivia-choices{display:grid;gap:8px;margin-bottom:20px}.trivia-choice-btn{padding:12px 16px;border:2px solid var(--border, #ddd);border-radius:8px;background:var(--card, #fff);color:var(--text, #333);cursor:pointer;text-align:left;transition:all .2s;font-size:14px;font-family:inherit}.trivia-choice-btn:hover{border-color:var(--primary);background:var(--primary-light, rgba(102, 126, 234, .1));transform:translateY(-1px)}.trivia-choice-btn:disabled{cursor:not-allowed;opacity:.7}.trivia-choice-btn[data-correct=true]{border-color:var(--primary)}.trivia-modal-content .trivia-feedback{min-height:24px;font-weight:500;text-align:center;margin-bottom:16px;font-size:14px}.trivia-modal-content .trivia-actions{display:flex;gap:8px;justify-content:center;margin-bottom:12px}.trivia-modal-content .trivia-stats{font-size:12px;color:var(--text-secondary, #666);text-align:center;margin-top:12px;opacity:.8}@media (max-width: var(--bp-mobile-lg)){.trivia-modal-content .trivia-question{font-size:15px}.trivia-choice-btn{padding:10px 14px;font-size:13px}}.spotlight-card{margin-top:16px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 2px 8px #0000000f;padding:12px;display:grid;gap:10px}.spotlight-head{display:flex;align-items:baseline;gap:10px}.spotlight-head h2{margin:0;font-size:1.1rem}.spotlight-date{opacity:.8;font-size:.9rem}.spotlight-media{position:relative;aspect-ratio:16/9;border-radius:10px;overflow:hidden;background:#000}.spotlight-media iframe,.spotlight-media video{width:100%;height:100%;display:block}.spotlight-meta{display:grid;gap:8px}.spotlight-title{font-weight:600}.spotlight-desc{opacity:.9;line-height:1.35}.spotlight-actions{display:flex;gap:8px}.spotlight-actions .btn{min-height:36px;padding:6px 10px}@media (max-width: 480px){.spotlight-card{padding:10px}}@media (prefers-reduced-motion: reduce){.spotlight-media{scroll-behavior:auto}}.series-block{margin-top:16px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 2px 8px #0000000f;padding:12px;display:grid;gap:10px}.series-head{display:flex;align-items:baseline;gap:10px;justify-content:space-between}.series-title{font-size:1.1rem;font-weight:600;margin:0}.series-meta{opacity:.85;font-size:.9rem}.seasons{display:grid;gap:8px}.season{border:1px solid var(--color-border);border-radius:10px;overflow:hidden;background:var(--color-surface)}.season-toggle{all:unset;display:flex;align-items:center;gap:10px;width:100%;cursor:pointer;padding:10px 12px}.season-toggle:focus-visible{outline:2px solid var(--primary);border-radius:6px}.season-toggle .name{font-weight:600}.season-toggle .count{opacity:.75;font-size:.9rem;margin-left:auto}.season-toggle .chev{transition:transform .15s ease}.season[aria-expanded=true] .chev{transform:rotate(90deg)}.episodes{display:none;padding:10px 12px 12px;border-top:1px solid var(--color-border);background:var(--color-surface-2, rgba(0, 0, 0, .02))}.season[aria-expanded=true] .episodes{display:grid;gap:8px}.episode{display:grid;gap:4px;grid-template-columns:auto 1fr}.episode .ep-no{min-width:28px;text-align:right;opacity:.75;padding-right:8px}.episode .ep-title{font-weight:500}.episode .ep-meta{opacity:.75;font-size:.9rem}.ep-actions{margin-top:4px;display:flex;gap:8px}.ep-actions .btn{min-height:30px;padding:4px 8px}.more-row{display:flex;align-items:center}.more-row .btn{margin-left:auto;min-height:34px;padding:6px 10px}@media (max-width: 480px){.series-block{padding:10px}}@media (prefers-reduced-motion: reduce){.season .chev{transition:none}}.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10000;display:grid;place-items:center}.modal-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#00000073}.modal-card{position:relative;width:min(560px,92vw);background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 10px 30px #00000059;padding:12px;display:grid;gap:10px}.modal-head{display:flex;align-items:center;gap:10px;justify-content:space-between}.icon-btn{background:none;border:0;cursor:pointer;font-size:22px;line-height:1}.modal-body{display:grid;gap:10px}.share-hint{opacity:.85}.share-url{width:100%;padding:10px;border:1px solid var(--color-border);border-radius:10px;font-family:inherit;font-size:.95rem}.share-actions{display:flex;gap:8px}.share-actions .btn{min-height:36px;padding:6px 10px}.share-feedback{min-height:1.2em;font-size:.95rem}.visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;border:0;padding:0;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap}@media (max-width: 480px){.modal-card{padding:10px}}.episode-modal-content{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}#episode-modal .modal{max-height:85vh;max-width:90vw;width:90vw;overflow:hidden;display:flex;flex-direction:column;padding:0}#episode-modal .modal-body{overflow:hidden;flex:1;display:flex;flex-direction:column;padding:0}#episode-modal .episode-seasons{flex:1;overflow-y:auto;max-height:100%;padding:16px;font-size:14px}#episode-modal .season-container{margin-bottom:12px;border:1px solid var(--color-border);border-radius:6px;overflow:hidden;background:var(--color-surface);font-size:13px}#episode-modal .season-header{padding:12px 16px;font-size:14px;font-weight:600}#episode-modal .season-episodes{max-height:250px;overflow-y:auto;font-size:12px}#episode-modal .episode-row{padding:8px 16px;font-size:12px;min-height:36px}#episode-modal .episode-info{font-size:12px}#episode-modal .episode-title{font-size:13px;font-weight:500;margin-bottom:2px}#episode-modal .episode-meta{font-size:11px;opacity:.7}#episode-modal .ep-actions .btn{font-size:11px;padding:4px 8px;min-height:28px}#episode-modal .episode-seasons::-webkit-scrollbar,#episode-modal .season-episodes::-webkit-scrollbar{width:8px}#episode-modal .episode-seasons::-webkit-scrollbar-track,#episode-modal .season-episodes::-webkit-scrollbar-track{background:var(--color-surface-2);border-radius:4px}#episode-modal .episode-seasons::-webkit-scrollbar-thumb,#episode-modal .season-episodes::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}#episode-modal .episode-seasons::-webkit-scrollbar-thumb:hover,#episode-modal .season-episodes::-webkit-scrollbar-thumb:hover{background:var(--color-muted)}#theaters-section{margin:20px 0;padding:20px;background:var(--color-surface);border-radius:12px;border:1px solid var(--color-border)}.theaters-container{width:100%;display:flex;flex-direction:column;margin-bottom:20px}.theaters-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid var(--color-border)}.theaters-header h3{margin:0;color:var(--color-text);font-size:18px}.theaters-list{flex:1;overflow-x:auto;overflow-y:hidden;display:flex;gap:16px;padding:8px;scroll-behavior:smooth}.theater-movie{background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;cursor:pointer;flex:0 0 200px;min-width:200px}.theater-movie:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.movie-poster{width:100%;height:200px;overflow:hidden;background:var(--color-surface-2);display:flex;align-items:center;justify-content:center;position:relative}.movie-poster img{width:100%;height:100%;object-fit:cover}.movie-poster-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--color-border);color:var(--color-muted);font-size:48px}.movie-info{padding:12px}.movie-title{margin:0 0 8px;font-size:14px;font-weight:600;color:var(--color-text);line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.movie-overview{margin:0 0 8px;font-size:12px;color:var(--color-muted);line-height:1.4;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.movie-meta{display:flex;justify-content:space-between;align-items:center;font-size:11px;color:var(--color-muted)}.movie-rating,.movie-release{font-weight:500}.theaters-info{display:grid;grid-template-columns:1fr 1fr;gap:20px;padding:20px;background:var(--color-surface-2);border-radius:8px;border:1px solid var(--color-border)}@media (max-width: var(--bp-mobile-lg)){.theaters-info{grid-template-columns:1fr;gap:16px}}.theaters-meta h3{margin:0 0 8px;color:var(--color-text);font-size:18px}.theaters-meta p{margin:0 0 12px;color:var(--color-muted);font-size:14px;line-height:1.4}.location-info{padding:8px 12px;background:var(--color-surface-2);border-radius:6px;font-size:13px;color:var(--color-text)}.theaters-cta{display:flex;flex-direction:column;gap:8px}.theaters-cta .btn{width:100%;justify-content:center}.theaters-badges{display:flex;gap:8px;flex-wrap:wrap}.theaters-badges .badge{background:var(--color-primary-start);color:#fff;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500}.no-movies{grid-column:1 / -1;text-align:center;padding:40px 20px;color:var(--color-muted)}.no-movies p{margin:0;font-size:14px}@media (max-width: var(--bp-mobile-lg)){.theaters-list{display:flex;flex-direction:row;overflow-x:auto;gap:12px;padding:8px}.movie-poster{height:150px}.movie-info{padding:8px}.movie-title{font-size:13px}.movie-overview{font-size:11px}}.episode-modal-header{flex-shrink:0;padding:20px;border-bottom:1px solid var(--color-border)}.episode-modal-body{flex:1;overflow-y:auto;padding:20px}.episode-progress{font-size:14px;color:var(--color-muted)}.episode-progress-bar{width:100%;height:4px;background:var(--color-border);border-radius:2px;margin-top:12px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,var(--color-primary-start),var(--color-primary-end));width:0%;transition:width .3s ease}.season-container{margin-bottom:20px;border:1px solid var(--color-border);border-radius:8px;overflow:hidden}.season-header{width:100%;padding:16px;background:var(--color-surface-2);border:none;text-align:left;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s ease}.season-header:hover{background:var(--color-border)}.season-episodes{background:var(--color-surface)}.episode-row{padding:12px 16px;border-bottom:1px solid var(--color-border);display:flex;align-items:center;gap:12px;cursor:pointer;transition:background-color .2s ease}.episode-row:hover{background:var(--color-surface-2)}.episode-row:focus{outline:2px solid var(--color-primary-start);outline-offset:-2px}.episode-info{flex:1}.episode-toggle{flex-shrink:0}.switch{position:relative;display:inline-block;width:44px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--color-border);transition:.3s;border-radius:24px}.slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}input:checked+.slider{background:linear-gradient(90deg,var(--color-primary-start),var(--color-primary-end))}input:checked+.slider:before{transform:translate(20px)}.slider:hover{background-color:var(--color-muted)}input:checked+.slider:hover{opacity:.8}.season-progress{width:100px;height:4px;background:var(--color-border);border-radius:2px;overflow:hidden}.season-progress-fill{height:100%;background:linear-gradient(90deg,var(--color-primary-start),var(--color-primary-end));transition:width .3s ease}.season-chevron{font-size:16px;color:var(--color-muted);transition:transform .2s ease}@media (prefers-color-scheme: dark){.episode-modal-header{background:#1a1a1a;border-bottom-color:#333}.episode-modal-body{background:#1a1a1a}.season-header{background:#2d2d2d;color:#fff}.season-header:hover{background:#3d3d3d}.season-episodes{background:#1a1a1a}.episode-row{border-bottom-color:#333;color:#fff}.episode-row:hover{background:#2d2d2d}}@media (max-width: var(--bp-mobile-lg)){.layout-mobile-fix .header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:8px;padding:8px 12px;min-height:auto}.layout-mobile-fix .header-left{display:flex;flex-direction:column;align-items:flex-start;gap:2px;order:1}.layout-mobile-fix .header-center{display:flex;flex-direction:column;align-items:center;gap:2px;order:2;flex:1}.layout-mobile-fix .header-right{display:flex;flex-direction:column;align-items:flex-end;gap:4px;order:3}.layout-mobile-fix .user-section{display:flex;flex-direction:column;align-items:flex-start;gap:2px}.layout-mobile-fix .username-snark{font-size:16px;line-height:1.2;margin:0;font-weight:500}.layout-mobile-fix .account-controls{display:flex;flex-direction:row;align-items:center;gap:6px}.layout-mobile-fix .title{font-size:1.4rem;line-height:1.1;margin:0}.layout-mobile-fix .subtitle{font-size:.75rem;line-height:1.1;margin:0}.layout-mobile-fix .pro-badge{font-size:.6rem;padding:2px 6px;margin:0}.layout-mobile-fix .top-search{padding:6px;margin:4px 0;border-radius:6px;position:sticky;top:0;z-index:100;background:var(--bg)}.layout-mobile-fix .search-row{display:flex;flex-direction:column;gap:4px}.layout-mobile-fix .search-input{width:100%;padding:6px 10px;font-size:13px;min-height:36px}.layout-mobile-fix .search-controls{display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.layout-mobile-fix .genre-filter{flex:0 0 auto;width:60px;min-width:60px;max-width:60px;padding:6px 8px;font-size:13px;min-height:36px}.layout-mobile-fix .search-btn{padding:6px 12px;font-size:13px;min-height:36px;min-width:60px}.layout-mobile-fix .tab-rail{display:flex;flex-wrap:wrap;gap:4px;padding:8px 0;justify-content:center}.layout-mobile-fix .tab-btn{flex:1;min-width:80px;padding:8px 12px;font-size:13px;min-height:44px;text-align:center}.layout-mobile-fix .row{margin:16px 0;padding:0 8px}.layout-mobile-fix .row-header{margin-bottom:12px;padding:0 4px}.layout-mobile-fix .row-title{font-size:1.1rem;margin-bottom:4px}.layout-mobile-fix .row-subtitle{font-size:.85rem}.layout-mobile-fix .row-inner{display:flex;overflow-x:auto;overflow-y:hidden;gap:12px;padding:4px 0;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.layout-mobile-fix .row-inner::-webkit-scrollbar{height:8px}.layout-mobile-fix .row-inner::-webkit-scrollbar-track{background:transparent}.layout-mobile-fix .row-inner::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}.layout-mobile-fix .card{flex:0 0 auto;min-width:150px;max-width:160px}.layout-mobile-fix .card--compact{min-width:150px;max-width:160px}.layout-mobile-fix .card__poster{width:100%;height:200px;aspect-ratio:2/3}.layout-mobile-fix .card__content{padding:8px}.layout-mobile-fix .card__title{font-size:.9rem;line-height:1.2;margin-bottom:4px}.layout-mobile-fix .card__subtitle{font-size:.8rem;line-height:1.2;margin-bottom:6px}.layout-mobile-fix .card__actions{gap:4px}.layout-mobile-fix .card__primary-action{padding:6px 12px;font-size:.8rem;min-height:32px}.layout-mobile-fix .card__more-btn{padding:6px;min-width:32px;min-height:32px}.layout-mobile-fix .card__more-menu{right:0;top:100%;min-width:140px;z-index:1000}.layout-mobile-fix .section{margin:12px 0;padding:0 8px}.layout-mobile-fix .section__header{margin-bottom:8px;padding:0 4px}.layout-mobile-fix .section__title{font-size:1.1rem;margin-bottom:2px}.layout-mobile-fix .section__subtitle{font-size:.8rem}.layout-mobile-fix .spotlight-grid{display:flex;flex-direction:column;gap:16px}.layout-mobile-fix .spotlight-video{width:100%;aspect-ratio:16/9;order:1}.layout-mobile-fix .spotlight-content{order:2;width:100%;padding:0}.layout-mobile-fix .spotlight-title{font-size:1.1rem;margin-bottom:8px}.layout-mobile-fix .spotlight-description{font-size:.9rem;line-height:1.4;margin-bottom:12px}.layout-mobile-fix .spotlight-cta{width:100%;padding:10px 16px;font-size:.9rem;min-height:44px}.layout-mobile-fix .feedback-card{padding:12px;margin:8px 0}.layout-mobile-fix .feedback-title{font-size:1rem;margin-bottom:8px}.layout-mobile-fix .feedback-description{font-size:.85rem;line-height:1.3;margin-bottom:12px}.layout-mobile-fix .feedback-cta{width:100%;padding:10px 16px;font-size:.9rem;min-height:44px}.layout-mobile-fix input[type=text],.layout-mobile-fix input[type=email],.layout-mobile-fix textarea,.layout-mobile-fix select{width:100%;padding:8px 12px;font-size:14px;min-height:44px}.layout-mobile-fix textarea{min-height:80px;resize:vertical}.layout-mobile-fix .btn{min-height:44px;padding:8px 16px;font-size:14px}.layout-mobile-fix .btn--full-width{width:100%}.layout-mobile-fix body,.layout-mobile-fix .main-container{overflow-x:hidden}}.skip-link{position:absolute;top:-40px;left:6px;background:var(--accent);color:#fff;padding:8px 16px;text-decoration:none;border-radius:4px;font-weight:600;font-size:14px;z-index:1000;transition:top .2s ease;box-shadow:0 2px 8px #0003}.skip-link:focus{top:6px;outline:2px solid white;outline-offset:2px}.skip-link:hover{background:var(--color-primary-dark, #c2185b);color:#fff}.dark-mode .skip-link{background:var(--accent);color:#fff}.dark-mode .skip-link:focus{outline:2px solid var(--accent);outline-offset:2px}.skeleton{background:var(--skeleton-bg);border-radius:4px;position:relative;overflow:hidden;animation:skeleton-pulse var(--skeleton-animation-duration) ease-in-out infinite}.skeleton:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,var(--skeleton-shimmer),transparent);animation:skeleton-shimmer var(--skeleton-animation-duration) ease-in-out infinite}@keyframes skeleton-pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes skeleton-shimmer{0%{left:-100%}to{left:100%}}.skeleton-card{width:100%;height:200px;border-radius:var(--r);margin-bottom:var(--gap-4)}.skeleton-poster{width:var(--poster-w);height:var(--poster-h);border-radius:6px;flex-shrink:0}.skeleton-poster-mobile{width:var(--poster-w-mobile);height:var(--poster-h-mobile);border-radius:6px;flex-shrink:0}.skeleton-text{height:16px;margin-bottom:var(--gap-2);border-radius:4px}.skeleton-text-large{height:20px;margin-bottom:var(--gap-3);border-radius:4px}.skeleton-text-small{height:12px;margin-bottom:var(--gap-1);border-radius:4px}.skeleton-button{height:36px;width:80px;border-radius:6px}.skeleton-preview-card{width:var(--home-card-width-desktop);height:var(--home-card-height-desktop);border-radius:8px;flex-shrink:0}.skeleton-preview-card-mobile{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile);border-radius:8px;flex-shrink:0}.skeleton-quote{height:60px;border-radius:var(--r);margin:var(--gap-3) 0}.skeleton-game-card{width:100%;height:280px;border-radius:var(--r);margin-bottom:var(--gap-4)}.skeleton-list-item{width:100%;height:80px;border-radius:var(--r);margin-bottom:var(--gap-3)}.dark-mode .skeleton{--skeleton-bg: #374151;--skeleton-shimmer: #4b5563}@media (prefers-reduced-motion: reduce){.skeleton{animation:none}.skeleton:before{animation:none}}.loading .skeleton{display:block}.loaded .skeleton{display:none}.skeleton-show-card{display:grid;grid-template-columns:var(--poster-w-desktop) 1fr;gap:var(--gap-4);padding:var(--gap-4);background:var(--card);border:1px solid var(--border);border-radius:var(--r);margin-bottom:var(--gap-4)}.card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.card--compact{flex-direction:row;align-items:center;padding:12px;gap:12px}.card--expanded{padding:16px}.card--poster{width:200px;min-height:300px}.card-poster{position:relative;width:100%;height:200px;overflow:hidden}.card--poster .card-poster{height:280px}.card-poster img{width:100%;height:100%;object-fit:cover}.card-poster-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--color-surface-2);color:var(--placeholder);font-size:2rem}.card-badges{position:absolute;top:8px;right:8px;display:flex;flex-direction:column;gap:4px}.card-badge{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;background:var(--accent);color:#fff}.card-badge--status{background:var(--accent)}.card-content{padding:12px;flex:1;display:flex;flex-direction:column;gap:8px}.card-title{font-size:16px;font-weight:600;color:var(--fg);margin:0;line-height:1.3}.card-subtitle{font-size:14px;color:var(--muted);margin:0}.card-rating{color:#fbbf24;font-size:14px}.card-primary-action{background:var(--accent);color:#fff;border:none;padding:8px 16px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:background .2s ease}.card-primary-action:hover{background:#e91e63}.card-overflow-actions{display:flex;gap:4px;margin-top:auto}.card-overflow-action{background:none;border:1px solid var(--border);padding:4px 8px;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s ease}.card-overflow-action:hover{background:var(--color-surface-2);border-color:var(--accent)}.card--disabled{opacity:.6;pointer-events:none}.skeleton-show-card-mobile{display:grid;grid-template-columns:var(--poster-w-mobile) 1fr;gap:var(--gap-3);padding:var(--gap-3);background:var(--card);border:1px solid var(--border);border-radius:var(--r);margin-bottom:var(--gap-3)}.skeleton-content{display:flex;flex-direction:column;gap:var(--gap-2)}.skeleton-actions{display:flex;gap:var(--gap-2);margin-top:auto}@media (max-width: var(--bp-mobile-lg)){.skeleton-show-card{grid-template-columns:var(--poster-w-mobile) 1fr;gap:var(--gap-3);padding:var(--gap-3)}.skeleton-preview-card{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}}.curated-sections{display:flex;flex-direction:column;gap:24px;margin-top:12px}.curated-row{display:flex;flex-direction:column;gap:12px}.curated-row-header{display:flex;align-items:baseline;gap:8px}.curated-row-title{font-weight:600;font-size:1.1rem;margin:0;color:var(--text)}.curated-row-scroll{overflow-x:auto;overflow-y:hidden;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;padding:4px 0 8px;scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.2) transparent}.curated-row-scroll::-webkit-scrollbar{height:8px}.curated-row-scroll::-webkit-scrollbar-track{background:transparent}.curated-row-scroll::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}.curated-row-scroll::-webkit-scrollbar-thumb:hover{background:#0000004d}.curated-items-container{display:flex;gap:12px;padding:0 4px}.curated-item{flex-shrink:0;scroll-snap-align:start;width:44vw;max-width:200px;min-width:150px;background:var(--color-surface);border-radius:8px;padding:8px;box-shadow:0 2px 4px #0000001a;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;display:flex;flex-direction:column;gap:8px}.curated-item:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.curated-item:focus{outline:2px solid var(--accent);outline-offset:2px}.curated-item img{width:100%;height:auto;border-radius:4px;aspect-ratio:2/3;object-fit:cover}.curated-item span{font-weight:600;font-size:.9rem;line-height:1.2;margin:0;color:var(--text);text-align:center}.curated-row .card{flex-shrink:0;scroll-snap-align:start;width:44vw;max-width:200px;min-width:150px;margin-right:0}@media (min-width: 769px){.curated-item,.curated-row .card{width:200px;min-width:180px}}@media (max-width: var(--bp-mobile-lg)){.curated-item,.curated-row .card{width:44vw;min-width:150px}}@media (max-width: 480px){.curated-item,.curated-row .card{width:58vw;min-width:140px}}button#btnSettings,button#btnSettings.fab-left,.fab-dock button#btnSettings,.fab-dock button#btnSettings.fab-left,button#btnSettings.fab-left.fab{background:transparent;background-color:transparent;background-image:none;box-shadow:none;border:none;border-radius:0;padding:0;margin:0;width:auto;height:auto;min-width:auto;min-height:auto}button#btnSettings:hover,button#btnSettings.fab-left:hover,.fab-dock button#btnSettings:hover,.fab-dock button#btnSettings.fab-left:hover,button#btnSettings.fab-left.fab:hover{background:transparent;background-color:transparent;background-image:none;box-shadow:none;transform:scale(1.05);opacity:.8}.unified-card-action-btn--remove{background-color:#dc3545;color:#fff;border:1px solid #dc3545}.unified-card-action-btn--remove:hover{background-color:#c82333;border-color:#bd2130;transform:scale(1.05)}.unified-card-action-btn--remove .unified-card-action-icon,.unified-card-action-btn--remove .unified-card-action-label{color:#fff}.unified-card-actions-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}.unified-card-actions-left,.unified-card-actions-right{display:flex;flex-direction:column;gap:4px}.unified-card-action-btn--compact{padding:6px 8px;font-size:12px;min-height:32px;display:flex;align-items:center;justify-content:center;gap:4px}.unified-card-action-btn--compact .unified-card-action-icon{font-size:14px}.unified-card-action-btn--compact .unified-card-action-label{font-size:11px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80px}.unified-card-actions{overflow:visible;max-height:none}@media (max-width: var(--bp-mobile-lg)){.unified-card-action-btn--compact{padding:4px 6px;font-size:11px;min-height:28px}.unified-card-action-btn--compact .unified-card-action-label{font-size:10px;max-width:60px}.unified-card-actions-grid{gap:6px}}@media (max-width: 768px){body,html,p,span,div,a,button,input,select,textarea,label{font-size:16px}.badge,.count,.meta,.tag,.pill,.chip{font-size:12px}h1{font-size:max(2rem,24px)}h2{font-size:max(1.5rem,20px)}h3{font-size:max(1.25rem,18px)}h4{font-size:max(1.1rem,16px)}h5,h6{font-size:16px}.main-container{padding:16px;margin:10px;border-radius:12px}.header{flex-direction:column;gap:8px;padding-bottom:12px;margin-bottom:8px}.title{font-size:1.8rem;text-align:center}.subtitle{text-align:center;font-size:.9rem}.user-section{justify-content:center;width:100%}.top-search{padding:6px;margin:6px 0;border-radius:8px;position:sticky;top:0;z-index:100;background:var(--bg)}.top-search .search-help{position:relative;top:auto;left:auto;font-size:.75rem;line-height:1.1;margin:0;padding:2px 4px;background:#0000001a;border-radius:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.search-help span[data-i18n=search_tips]{font-size:.75rem;line-height:1.1;display:inline-block;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mobile-v1 .top-search .search-help{position:relative;top:auto;left:auto;font-size:.75rem;line-height:1.1;margin:0;padding:2px 4px;background:#0000001a;border-radius:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.mobile-v1 .search-help span[data-i18n=search_tips]{font-size:.75rem;line-height:1.1;display:inline-block;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-row{display:flex;flex-direction:row;gap:8px;margin-top:0;align-items:stretch}.top-search>*{margin-bottom:0}.top-search .search-help+*{margin-top:0}.search-input{width:100%;padding:8px 12px;font-size:16px;min-height:44px;margin:0;border-radius:8px}.search-row .search-buttons-row{display:flex;flex-direction:row;gap:8px;align-items:center;width:100%}.search-row .search-btn,.search-row .clear-search-btn,.search-row .advanced-search-btn{flex:0 0 auto;min-width:80px;padding:8px 12px;font-size:14px;min-height:44px;height:44px;margin:0;text-align:center;border-radius:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-row .genre-filter{flex:0 0 auto;min-width:60px;width:60px;max-width:60px}.tab-container{padding:6px;gap:4px;margin:2px 0}.main-container .top-search+.tab-container{margin-top:2px}.tab{padding:8px 6px;font-size:12px;min-height:40px;min-width:40px}.tab .count{font-size:10px;margin-left:4px}.show-poster,.poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}.show-title{font-size:1rem}.show-meta{font-size:.8rem}.show-overview{font-size:.9rem;-webkit-line-clamp:2;line-clamp:2}.btn{padding:6px 12px;font-size:12px;min-height:40px;min-width:40px}.show-actions{gap:6px}.show-actions .btn{font-size:11px;padding:4px 8px}.list-container{padding:8px;min-height:60px}.flickword-container{margin:8px 0}.flickword-card{padding:12px;margin:0}.flickword-title{font-size:14px}.flickword-countdown{font-size:11px;padding:4px 8px}.flickword-stats{flex-direction:column;gap:8px}.stat-item{min-width:auto;padding:6px}.stat-label{font-size:10px}.stat-value{font-size:12px}.feedback-card{padding:10px;margin:10px 0}.feedback-form textarea{min-width:auto;width:100%}.modal{padding:16px;margin:10px}.modal .modal-actions{flex-direction:column;gap:8px}.advanced-search-grid{grid-template-columns:1fr;gap:12px}.advanced-search-actions{flex-direction:column}.year-range{flex-direction:column;gap:4px}.year-separator,.desktop-only{display:none}button,input[type=button],input[type=submit],input[type=reset],select,.clickable{min-height:44px;min-width:44px}body{padding:10px;overflow-x:hidden}.section{margin:15px 0}.section-header h3{font-size:1.2rem}.main-container{padding-bottom:calc(env(safe-area-inset-bottom) + 80px)}.fab-dock{bottom:max(8px,env(safe-area-inset-bottom));padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}.fab-dock .fab-left{margin-left:0;margin-bottom:0}.fab-dock .fab-stack{margin-right:0;margin-bottom:0}.fab,.fab-left{min-width:44px;min-height:44px;display:flex;align-items:center;justify-content:center}.unified-card,.preview-card,.show-card{min-height:120px}.unified-card-poster,.preview-card-poster,.show-poster,.poster-placeholder{aspect-ratio:2 / 3;object-fit:cover;min-height:80px}.unified-card-title,.preview-card-title,.show-title{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;line-height:1.2;max-height:2.4em}.star-rating,.rating-container{display:flex;align-items:center;gap:2px;font-size:12px;margin:4px 0;min-height:16px}.star-display{font-size:12px;line-height:1}.unified-card-subtitle,.preview-card-year,.show-meta{font-size:11px;color:var(--text-secondary);margin:2px 0;line-height:1.1}.unified-card-content,.preview-card-content,.show-details{display:flex;flex-direction:column;gap:4px;min-height:0;overflow:hidden}.group-title,.preview-row-title,.section-title{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right));margin-bottom:12px;font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:8px}.group-title:before,.preview-row-title:before,.section-title:before{margin-right:4px;font-size:1.1em;flex-shrink:0}.count,.tab-badge{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:2px 6px;font-size:11px;font-weight:600;background:var(--primary);color:#fff;border-radius:10px;margin-left:8px;flex-shrink:0}.group-title,.preview-row-title,.section-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.home-group{margin-bottom:24px;padding:16px;border-radius:12px}#group-1-your-shows .home-preview-row{margin:12px 0!important;background:none!important;border:none!important;border-radius:0!important;padding:0!important;box-shadow:none!important}.unified-card,.preview-card,.show-card{box-shadow:0 1px 3px #0000001a;filter:none}.confetti,.celebration-animation{display:none}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms;animation-iteration-count:1;transition-duration:.01ms}}.preview-row-container,.carousel-container{will-change:transform;transform:translateZ(0)}.blur,.backdrop-blur{filter:none;-webkit-backdrop-filter:none;backdrop-filter:none}}@media (max-width: 480px){.main-container{padding:12px;margin:5px}.title{font-size:1.6rem}.search-row{flex-direction:row;gap:4px}.search-input{padding:4px 6px;font-size:13px;min-height:32px}.genre-filter,.search-row .search-btn,.search-row .clear-search-btn,.search-row .advanced-search-btn{width:calc(25% - 3px);padding:4px 2px;font-size:11px;min-height:32px;height:32px}.btn{padding:5px 10px;font-size:11px}.show-poster,.poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile)}}@media (max-width: 768px) and (orientation: landscape){.header{flex-direction:row;align-items:center}.search-row{gap:6px}.search-input{width:100%}.genre-filter{width:60px;min-width:60px}.search-row .search-btn,.search-row .clear-search-btn,.search-row .advanced-search-btn{min-width:60px}}@media (max-width: 768px){.mobile-v1{--poster-w: var(--poster-w-mobile);--poster-h: var(--poster-h-mobile);--card-gap: var(--card-gap-mobile);--card-pad-y: var(--card-pad-y-mobile);--card-pad-x: var(--card-pad-x-mobile);--meta-title-size: var(--meta-title-size-mobile);--meta-line: var(--meta-line-mobile)}.mobile-v1 .show-card,.show-card{display:grid;grid-template-columns:var(--poster-w-mobile) 1fr;gap:var(--card-gap-mobile);padding:var(--card-pad-y-mobile) var(--card-pad-x-mobile);background:var(--card-bg);border:var(--card-border);width:100%;max-width:100%;border-radius:var(--card-radius);align-items:start;margin:0 0 16px;box-sizing:border-box;box-shadow:var(--card-shadow);min-height:var(--poster-h-mobile)}.show-card .show-details{display:grid;grid-template-rows:auto auto auto 1fr auto;gap:6px;min-width:0}.show-card .show-actions{display:flex;flex-direction:row;flex-wrap:nowrap;gap:6px;align-items:center;margin-top:8px;justify-content:space-between}.show-card .show-actions .btn{flex:1;min-width:0;font-size:11px;padding:6px 8px;min-height:32px}.show-card .show-title{font-size:var(--meta-title-size-mobile);line-height:var(--meta-line-mobile);margin:0 0 6px;padding:0;font-weight:600;color:var(--color-text, #121212)}.show-card .show-meta{font-size:13px;color:var(--color-text-secondary, #666);margin:0 0 6px;padding:0;line-height:1.3}.show-card .show-overview{font-size:14px;line-height:1.4;margin:0 0 8px;padding:0;color:var(--color-text, #121212)}.mobile-v1 .show-card .show-details{display:grid;grid-template-rows:auto auto auto 1fr auto;gap:6px;min-width:0}.mobile-v1 .show-card .show-actions{display:flex;flex-direction:row;flex-wrap:nowrap;gap:6px;align-items:center;margin-top:8px;justify-content:space-between}.mobile-v1 .show-card .poster-button{grid-column:1;align-self:start}.mobile-v1 .show-card .show-poster,.mobile-v1 .show-card .poster-placeholder,.show-card .show-poster,.show-card .poster-placeholder{width:var(--poster-w-mobile);height:var(--poster-h-mobile);object-fit:cover;border-radius:var(--card-radius);display:block}.mobile-v1 .show-card .show-details{grid-column:2;min-width:0;overflow:hidden;align-self:start}.mobile-v1 .show-card .show-title{font-size:var(--meta-title-size-mobile);line-height:var(--meta-line-mobile);margin:0 0 6px;padding:0;overflow:hidden;text-overflow:ellipsis;font-weight:600;color:var(--color-text, #121212)}.mobile-v1 .show-card .show-meta{font-size:13px;color:var(--color-text-secondary, #666);margin:0 0 6px;padding:0;line-height:1.3}.mobile-v1 .show-card .show-overview{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-clamp:2;overflow:hidden;text-overflow:ellipsis;margin:0;padding:0;line-height:1.2}.mobile-v1 .show-card .show-actions .btn,.mobile-v1 .show-card .show-actions button{flex:1;min-width:0;min-height:32px;padding:6px 8px;font-size:11px;margin:0}.mobile-v1 .show-card .rating-container{display:flex;align-items:center;gap:4px;margin:0;font-size:12px}.mobile-v1 .show-card .star-rating{display:inline-flex;gap:1px;font-size:10px}.mobile-v1 .show-card .like-dislike{display:inline-flex;gap:4px;font-size:10px}.mobile-v1 .list-container{padding:8px;gap:0}.mobile-v1 .show-card+.show-card{margin-top:16px}.show-card+.show-card{margin-top:16px}.list-container{padding:12px;gap:0}@keyframes mobileCardSlideIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@media (prefers-reduced-motion: no-preference){.mobile-v1 .show-card{animation:mobileCardSlideIn .28s ease-out}}@media (prefers-reduced-motion: reduce){.mobile-v1 .show-card{animation:none}}}header.header{display:flex;flex-direction:column;align-items:center;gap:8px;grid-template-columns:unset}header.header .app-title{flex:1 1 auto;text-align:center;line-height:1.2}header.header .username-snark{min-width:0;width:100%;text-align:center;order:2}@media (max-width: 480px){.toast{max-width:96vw}}@media (max-width: 480px){.header{margin-bottom:8px}.top-search{margin-top:6px}.header[data-lang-layout=inline] .account-controls{flex-wrap:nowrap;justify-content:center;gap:8px}.header[data-lang-layout=inline] #accountBtn,.header[data-lang-layout=inline] #langSelect{font-size:14px}.header[data-lang-layout=row] .account-controls{display:grid;grid-template-columns:1fr;row-gap:6px;justify-items:center}.header[data-lang-layout=row] #langSelect{width:auto;min-width:140px}}@media (min-width: 481px){.header .header-bar{display:flex;align-items:flex-end;gap:12px}.header .account-controls{margin-left:auto}}@media (max-width: 480px){.curated-section .section-title{font-size:1.05rem}.curated-row{grid-auto-columns:58vw}}.notification{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border:2px solid #3b82f6;border-radius:12px;padding:16px 24px;box-shadow:0 10px 25px #00000026;z-index:20000;opacity:0;transform:translate(-50%,-50%) scale(.9);transition:all .3s ease;max-width:400px;text-align:center}.notification--visible{opacity:1;transform:translate(-50%,-50%) scale(1)}.notification--success{border-color:#10b981}.notification--error{border-color:#ef4444}.notification--warning{border-color:#f59e0b}.notification--info{border-color:#3b82f6}.notification-message{font-size:16px;font-weight:500;color:#1f2937;margin:0}.home-group:last-child{margin-bottom:0}.placeholder-message{text-align:center;color:var(--text-secondary, #666);font-style:italic;padding:20px;background:var(--card);border-radius:8px;border:2px dashed var(--border)}.modal-backdrop{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;visibility:visible;opacity:1}.modal-content{background:#fff;border-radius:8px;padding:24px;max-width:400px;width:90%;box-shadow:0 4px 20px #00000026;position:relative;max-height:90vh;overflow-y:auto}.modal-close{position:absolute;top:12px;right:12px;background:none;border:none;font-size:20px;cursor:pointer;color:#999;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px}.modal-close:hover{background:#f5f5f5;color:#333}.auth-modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:20000;display:none;align-items:center;justify-content:center;padding:20px;opacity:0;visibility:hidden;transition:all .3s ease}.auth-modal-backdrop.is-active{display:flex;opacity:1;visibility:visible}.auth-modal-content{background:#fff;border-radius:12px;padding:24px;max-width:400px;width:90%;box-shadow:0 20px 40px #0000004d;border:3px solid #1976d2;position:relative;max-height:90vh;overflow-y:auto;transform:scale(.9) translateY(20px);transition:all .3s ease}.auth-modal-backdrop.is-active .auth-modal-content{transform:scale(1) translateY(0)}.auth-modal-content h2{margin:0 0 16px;font-size:20px;font-weight:600;color:#1976d2;text-align:center}.auth-modal-content p{margin:0 0 20px;color:#666;text-align:center}.auth-buttons{display:flex;flex-direction:column;gap:12px}.auth-button{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s}.auth-button--google{background:#4285f4;color:#fff}.auth-button--google:hover{background:#3367d6}.auth-button--apple{background:#000;color:#fff}.auth-button--apple:hover{background:#333}.auth-button--email{background:#f5f5f5;color:#333;border:1px solid #ddd}.auth-button--email:hover{background:#e8e8e8}.auth-button--primary{background:#1976d2;color:#fff}.auth-button--primary:hover{background:#1565c0}.auth-button--cancel{background:#f5f5f5;color:#333;border:1px solid #ddd}.auth-button--cancel:hover{background:#e8e8e8}.auth-button--danger{background:#dc2626;color:#fff}.auth-button--danger:hover{background:#b91c1c}.signout-modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:20000;display:none;align-items:center;justify-content:center;padding:20px;opacity:0;visibility:hidden;transition:all .3s ease}.signout-modal-backdrop.is-active{display:flex;opacity:1;visibility:visible}.signout-modal{background:#fff;border-radius:12px;padding:32px;max-width:400px;width:100%;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;position:relative;max-height:90vh;overflow-y:auto}.signout-modal h2{margin:0 0 8px;font-size:24px;font-weight:600;color:#1f2937;text-align:center}.signout-modal p{margin:0 0 24px;color:#6b7280;text-align:center;font-size:14px}@media (max-width: var(--bp-mobile)){.auth-modal-content,.signout-modal{margin:16px;padding:24px;max-width:none}.auth-modal-content h2,.signout-modal h2{font-size:20px}}.modal-actions{display:flex;justify-content:flex-end;margin-top:20px}.email-modal .form-group{margin-bottom:16px}.email-modal .form-group:last-of-type{margin-bottom:20px}.email-modal label{display:block;margin-bottom:4px;font-weight:500;color:#333}.email-modal input{width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.email-modal input:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 2px #1976d233}.error-message{color:#d32f2f;margin-bottom:16px;font-size:14px}.form-actions{display:flex;gap:8px;justify-content:flex-end}.tab-badge{display:inline-block;visibility:visible;opacity:1;font-size:var(--badge-font-size);background-color:var(--badge-bg);color:var(--badge-color);padding:var(--badge-padding);border-radius:var(--badge-border-radius);margin-left:var(--badge-margin-left);font-weight:var(--badge-font-weight);min-width:var(--badge-min-width);text-align:center;line-height:var(--badge-line-height);position:relative;z-index:var(--badge-z-index)}.tab-badge--hidden{display:none}.tab-badge--visible{display:inline-block}.left-snark{font-size:16px;color:var(--text-secondary, #666);font-style:italic;text-align:left;margin:4px 0;pointer-events:none;z-index:auto;font-weight:500}.modal-backdrop{z-index:10000}.modal-backdrop .modal-content{z-index:10001}.feedback-card{background:var(--card);border-radius:12px;padding:24px;text-align:center;box-shadow:0 4px 12px #0000001a}.feedback-actions{display:flex;gap:12px;justify-content:center;margin-top:16px;flex-wrap:wrap;max-width:100%}@media (max-width: var(--bp-mobile-lg)){.home-group{margin-bottom:24px}.feedback-actions{flex-direction:column;align-items:center;gap:8px}}*{box-sizing:border-box}body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:20px;color:var(--text);line-height:1.5;min-height:var(--app-root-min-height);overflow-x:var(--app-root-overflow-x);overflow-y:var(--app-root-overflow-y);padding-bottom:calc(env(safe-area-inset-bottom) + 120px)}.dark-mode{--bg: #1a1a1a;--text: #f5f5f5;--card: #2a2a2a;--surface: #1e1e1e;--s-4: 1rem;--r-2: 8px;--fs-0: 1rem;--shadow-1: 0 2px 4px rgba(0, 0, 0, .3);--border: #404040;--text-secondary: #b0b0b0;background:#fff}.dark-mode .main-container{background:var(--bg);box-shadow:0 8px 32px #0000004d}.dark-mode .top-search{background:var(--bg);border-color:var(--border);box-shadow:0 6px 18px #0003}.dark-mode .tab-container{background:transparent;border-bottom-color:var(--border)}.dark-mode .tab{color:var(--text-muted);background:transparent}.dark-mode .tab:hover{background:#ffffff1a;color:var(--text)}.dark-mode .tab.is-active{background:transparent;color:var(--text);border-bottom-color:var(--primary)}.dark-mode .section-title,.dark-mode .preview-row-title,.dark-mode h2,.dark-mode h3,.dark-mode .preview-row-header h3{color:var(--text)}.dark-mode .tab-badge{color:var(--text);background:#fff3}.dark-mode .count{color:var(--text-secondary)}.dark-mode *{color:inherit}:root{--bg: #ffffff ;--text: #1f2937 ;--fg: #1f2937 ;--fg-default: #1f2937 ;--fg-muted: #6b7280 ;--fg-subtle: #7f8c8d ;--fg-on-elevated: #111827 ;--text-secondary: #666 ;--card: #ffffff ;--border: #e5e7eb ;--stack: 16px;--stack-sm: 12px}.home-preview-row{margin:var(--stack) 0;padding:0}:root{--container-max: 1200px;--container-pad: 16px;--fab-gap: 16px;--fab-size: 56px;--accent: #2563eb ;--primary: #e91e63 ;--surface: #f9f9f9 ;--bg-page: #ffffff ;--bg-elevated: #f7f7f9 }body{background:#fff;color:#1f2937}.dark-mode,[data-theme=dark],[data-theme=mardi]{--bg: #ffffff ;--text: #1f2937 ;--fg: #1f2937 ;--fg-default: #1f2937 ;--fg-muted: #6b7280 ;--fg-subtle: #7f8c8d ;--fg-on-elevated: #111827 ;--text-secondary: #666 ;--card: #ffffff ;--border: #e5e7eb ;--accent: #2563eb ;--primary: #e91e63 ;--surface: #f9f9f9 ;--bg-page: #ffffff ;--bg-elevated: #f7f7f9 ;background:#fff;color:#1f2937}.dark-mode .main-container,.dark-mode .home-group,.dark-mode .preview-card,.dark-mode .unified-card,.dark-mode .list-container{background:#fff}.tab-container .tab,#navigation .tab,[role=tablist] .tab{display:flex;visibility:visible;opacity:1;color:#1f2937;background:transparent;border:none;padding:12px 16px;margin:0;flex:1 1 0;min-height:44px;align-items:center;justify-content:center}.tab-container,#navigation,[role=tablist]{display:flex;visibility:visible;opacity:1;position:sticky;top:var(--header-h);z-index:100;background:#fff;border-bottom:1px solid #e5e7eb;height:48px;margin:0;padding:0}.tab.hidden{display:none}body.has-search .tab-container,body.has-search #navigation,body.has-search [role=tablist],#appRoot.has-search .tab-container,#appRoot.has-search #navigation,#appRoot.has-search [role=tablist]{display:flex;visibility:visible;opacity:1}.dark-mode body,.dark-mode html{color:var(--text);background:#fff}.dark-mode p,.dark-mode span,.dark-mode div,.dark-mode h1,.dark-mode h2,.dark-mode h3,.dark-mode h4,.dark-mode h5,.dark-mode h6,.dark-mode a,.dark-mode li,.dark-mode td,.dark-mode th,.dark-mode label,.dark-mode input,.dark-mode textarea,.dark-mode select{color:var(--text)}.dark-mode .text-secondary,.dark-mode .subtitle,.dark-mode .description,.dark-mode .meta,.dark-mode .caption{color:var(--text-secondary)}.dark-mode .container,.dark-mode .wrapper,.dark-mode .content,.dark-mode .main,.dark-mode .panel,.dark-mode .box{background:var(--card);color:var(--text)}.dark-mode .row-inner,.dark-mode .preview-row-container,.dark-mode .scroll-container,.dark-mode .list-container,.dark-mode [style*=color]{color:var(--text)}.dark-mode [style*=background]{background:var(--card)}.dark-mode .loading,.dark-mode .error,.dark-mode .success,.dark-mode .info,.dark-mode .warning{color:var(--text)}.dark-mode input[type=text],.dark-mode input[type=email],.dark-mode input[type=password],.dark-mode textarea{background:var(--card);color:var(--text);border-color:var(--border)}.dark-mode a{color:var(--accent)}.dark-mode a:hover,.dark-mode .movie-card,.dark-mode .show-card,.dark-mode .card-content,.dark-mode .card-description,.dark-mode .card-title,.dark-mode .card-meta{color:var(--text)}.dark-mode .card-description{color:var(--text-secondary)}.dark-mode .theaters-near-me,.dark-mode .theater-section,.dark-mode .theater-content{background:var(--card);color:var(--text)}.dark-mode .theater-description,.dark-mode .movie-overview,.dark-mode .show-overview{color:var(--text-secondary)}.dark-mode .movie-title,.dark-mode .card__title,.dark-mode .card-title,.dark-mode .show-title,.dark-mode .preview-card-title,.dark-mode .movie-meta,.dark-mode .movie-rating{color:var(--text)}.dark-mode .movie-release{color:var(--text-secondary)}.dark-mode .search-input,.dark-mode .genre-filter{background:var(--card);color:var(--text);border-color:var(--border)}.dark-mode .search-input:focus,.dark-mode .genre-filter:focus{box-shadow:0 0 0 3px #9c27b033}.dark-mode .search-help{background:#ffffff1a;border-color:#fff3;color:var(--text-secondary)}.dark-mode .flickword-card,.dark-mode .list-container{background:var(--card);border-color:var(--border)}@media (min-width: calc(var(--bp-mobile) + 1px)){.dark-mode .show-card{background:var(--card);border-color:var(--border)}}.mardi .header{border-color:var(--mardi3)}.mardi .btn{background:linear-gradient(45deg,var(--mardi1),var(--mardi3))}.mardi .tab{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff}body.mardi{background:linear-gradient(135deg,var(--mardi1),var(--mardi2))}.mardi .settings-tabs button{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mardi .settings-tabs button:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.mardi .settings-tabs button.active{background:linear-gradient(45deg,var(--mardi2),var(--mardi1));border-color:var(--mardi3);box-shadow:0 0 10px var(--mardi3)}.mardi .settings-section{background:linear-gradient(135deg,#6a0dad1a,#28a7451a);border:2px solid var(--mardi2);border-radius:10px}.mardi .tab-container .tab{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mardi .tab-container .tab:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.mardi .tab-container .tab.is-active{background:linear-gradient(45deg,var(--mardi2),var(--mardi1));border-color:var(--mardi3);box-shadow:0 0 10px var(--mardi3)}.mardi .card{background:linear-gradient(135deg,#6a0dad1a,#28a7451a);border:2px solid var(--mardi2);border-radius:10px}.mardi .card:hover{border-color:var(--mardi3);box-shadow:0 4px 8px #0000004d}.mardi .btn.primary{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mardi .btn.primary:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.mardi .game-box{background:linear-gradient(135deg,#6a0dad26,#28a74526);border:3px solid var(--mardi2);border-radius:15px;box-shadow:0 4px 12px #0003}.mardi .game-box:hover{border-color:var(--mardi3);box-shadow:0 6px 16px #0000004d;transform:translateY(-2px)}.mardi .game-title{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.mardi .game-play-btn{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5);border-radius:8px;box-shadow:0 2px 6px #0003}.mardi .game-play-btn:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 12px #0000004d}.mardi .game-stats{background:linear-gradient(135deg,#6a0dad1a,#28a7451a);border:1px solid var(--mardi2);border-radius:8px}.mardi .stat-value{color:var(--mardi1);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.mardi .flickword-card{background:linear-gradient(135deg,#6a0dad1a,#28a7451a);border:3px solid var(--mardi2);border-radius:15px;box-shadow:0 4px 12px #0003}.mardi .flickword-card:hover{border-color:var(--mardi3);box-shadow:0 6px 16px #0000004d;transform:translateY(-2px)}.mardi .flickword-title{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.mardi .flickword-actions .btn{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mardi .flickword-actions .btn:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.mardi .trivia-card{background:linear-gradient(135deg,#6a0dad1a,#28a7451a);border:3px solid var(--mardi2);border-radius:15px;box-shadow:0 4px 12px #0003}.mardi .trivia-card:hover{border-color:var(--mardi3);box-shadow:0 6px 16px #0000004d}.mardi .trivia-head h2{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.mardi .trivia-choices li{border:2px solid var(--mardi2);background:linear-gradient(135deg,#6a0dad0d,#28a7450d)}.mardi .trivia-choices li:hover{border-color:var(--mardi3);background:linear-gradient(135deg,#6a0dad1a,#28a7451a);transform:scale(1.02)}.mardi .trivia-actions .btn{background:linear-gradient(45deg,var(--mardi1),var(--mardi3));color:#fff;border:2px solid var(--mardi2);font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.mardi .trivia-actions .btn:hover{background:linear-gradient(45deg,var(--mardi3),var(--mardi1));transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.main-container{max-width:var(--page-max);margin:0 auto;background:var(--bg);border-radius:16px;padding:32px;box-shadow:0 8px 32px #0000001f;animation:containerSlideIn .8s ease-out;position:relative}@keyframes containerSlideIn{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.header{border-bottom:2px solid var(--primary);padding-bottom:16px;margin-bottom:12px;animation:headerFadeIn .6s ease-out}.header-bar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px}.header-center{display:flex;flex-direction:column;align-items:center;text-align:center;justify-self:center}.user-section{justify-self:end}@keyframes headerFadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.header-left{flex:1;max-width:600px;display:flex;align-items:center;gap:8px}.header-right{display:flex;align-items:center;gap:8px;flex-shrink:0}.title{margin:0;font-size:2.1rem;color:var(--primary);font-weight:800;letter-spacing:.2px}.subtitle{margin:2px 0 8px;color:#8a8a98;font-weight:600}.user-section{display:flex;align-items:center;gap:10px;flex-wrap:wrap}#langToggle{padding:8px 10px;border-radius:14px;border:2px solid var(--border);background:var(--card);color:var(--text);font-weight:700}.mobile-header-layout{display:none}.star-display{color:#ddd;font-size:1.1rem;transition:color .2s ease}.star-display.active{color:#ffd43b}.like-display,.dislike-display{font-size:1.1rem;opacity:.3;transition:opacity .2s ease}.like-display.active,.dislike-display.active{opacity:1}.rating-info{border:1px solid var(--border)}#group-1-your-shows .home-preview-row,#group-1-your-shows #currentlyWatchingPreview.home-preview-row{margin:var(--stack) 0;background:none;border:none;border-radius:0;padding:0;box-shadow:none}.preview-row-header{margin-bottom:8px}.preview-row-title{margin:0;font-size:1.25rem;font-weight:700;color:var(--text);display:flex;align-items:center;gap:8px}.preview-row-header .section-subtitle{margin:4px 0 0;font-size:.9rem;color:var(--text-secondary);font-weight:400}.preview-row-container{overflow:hidden}.preview-row-scroll{display:flex;gap:16px;overflow-x:auto;overflow-y:hidden;padding-bottom:8px;scroll-behavior:smooth}.preview-row-scroll::-webkit-scrollbar{height:8px}.preview-row-scroll::-webkit-scrollbar-track{background:transparent}.preview-row-scroll::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}.preview-card{flex:0 0 var(--card-w);background:var(--bg);border-radius:6px;border:1px solid var(--border);overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;cursor:pointer;position:relative;display:flex;flex-direction:column;height:auto;width:var(--card-w)}.preview-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.preview-card-poster{width:var(--card-w);height:var(--card-h);background:var(--border);position:relative;overflow:hidden;flex-shrink:0}.preview-card-poster img{width:100%;height:100%;object-fit:cover;display:block}.preview-card-poster-placeholder{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--border)}.preview-card-content{padding:4px 6px;flex:1;display:flex;flex-direction:column;justify-content:center;min-width:0;overflow:hidden}.preview-card-title{font-size:.65rem;font-weight:600;color:var(--text);margin:0 0 1px;line-height:1.1;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;white-space:nowrap}.preview-card-year{font-size:.55rem;color:var(--text-secondary);margin:0;line-height:1}.preview-card-status{position:absolute;top:2px;right:2px;background:var(--success);color:#fff;padding:1px 4px;border-radius:4px;font-size:.5rem;font-weight:600;text-transform:uppercase;letter-spacing:.2px}.preview-card-actions{position:absolute;top:2px;left:2px;opacity:0;transition:opacity .2s ease;display:flex;gap:1px}.preview-card:hover .preview-card-actions{opacity:1}.preview-action-btn{background:#000000b3;color:#fff;border:none;border-radius:2px;padding:1px 2px;font-size:.5rem;cursor:pointer;transition:background .2s ease;min-width:16px;height:16px;display:flex;align-items:center;justify-content:center}.preview-action-btn:hover{background:#000000e6}#group-1-your-shows .dark-mode .home-preview-row{background:none;border:none;border-radius:0;padding:0;box-shadow:none}.dark-mode .preview-card{background:var(--bg);border-color:var(--border)}.dark-mode .preview-card-poster{background:var(--border)}.unified-card{flex:0 0 var(--card-w);background:var(--bg);border-radius:8px;border:1px solid var(--border);overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;position:relative;display:flex;flex-direction:column;height:auto;width:var(--card-w)}.unified-card--detail{flex-direction:row;width:100%;max-width:600px;min-width:400px;height:180px;margin:0}.unified-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.unified-card-poster{width:var(--card-w);height:var(--card-h);background:var(--border);position:relative;overflow:hidden;flex-shrink:0;cursor:pointer}.unified-card--detail .unified-card-poster{width:120px;height:180px;flex-shrink:0;border-radius:0}.unified-card-poster-container{width:100%;height:100%;position:relative}.unified-card-poster-image{width:100%;height:100%;object-fit:cover;display:block}.unified-card-poster-skeleton{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:skeleton-loading 1.5s infinite}@keyframes skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}.unified-card-poster-brand{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2rem;color:var(--text-secondary);z-index:2}.unified-card-poster-placeholder{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--border);display:flex;align-items:center;justify-content:center}.unified-card-actions{position:absolute;top:0;left:0;right:0;bottom:0;background:#000c;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;opacity:0;transition:opacity .3s ease;padding:12px}.unified-card:hover .unified-card-actions{opacity:1}.unified-card--detail .unified-card-actions{position:static;background:transparent;padding:8px 0;opacity:1;flex-direction:column;gap:8px;align-items:stretch;justify-content:flex-start}.unified-card-action-btn{background:#ffffffe6;color:var(--text);border:none;border-radius:6px;padding:8px 12px;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;min-width:120px;justify-content:center;box-shadow:0 2px 4px #0000001a}.unified-card-action-btn:hover{background:#fff;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.unified-card-action-btn:active{transform:translateY(0)}.unified-card-action-icon{font-size:.9rem}.unified-card-action-label{font-size:.7rem;white-space:nowrap}.unified-card-content{padding:8px 6px;flex:1;display:flex;flex-direction:column;justify-content:center;min-width:0;overflow:hidden;text-align:center}.unified-card--detail .unified-card-content{flex:1;padding:16px;display:flex;flex-direction:column;justify-content:space-between;min-width:0;overflow:hidden;text-align:left}.unified-card-title{font-size:.7rem;font-weight:600;color:var(--text);margin:0 0 2px;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-align:center}.unified-card--detail .unified-card-title{font-size:18px;font-weight:600;margin:0 0 8px;line-height:1.3;display:block;-webkit-line-clamp:initial;line-clamp:initial;-webkit-box-orient:initial;overflow:visible;text-align:left}.unified-card-subtitle{font-size:.6rem;color:var(--text-secondary);margin:0 0 4px;line-height:1;text-align:center}.unified-card-rating{font-size:.6rem;color:var(--accent);text-align:center;margin:0}.unified-card-rating-input{display:flex;align-items:center;gap:8px;margin:8px 0}.unified-card-rating-input label{font-size:.8rem;color:var(--text-secondary);font-weight:500}.unified-card-rating-select{padding:4px 8px;border:1px solid var(--border);border-radius:4px;background:var(--bg);color:var(--text);font-size:.8rem;min-width:120px}.unified-card-notes{margin:8px 0}.unified-card-notes label{display:block;font-size:.8rem;color:var(--text-secondary);font-weight:500;margin-bottom:4px}.unified-card-note-input{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:4px;background:var(--bg);color:var(--text);font-size:.8rem;resize:vertical;min-height:40px;font-family:inherit}.unified-card-action-btn--pro{background:linear-gradient(135deg,#ff6b6b,#ff8e8e);color:#fff;border:1px solid #ff6b6b}.unified-card-action-btn--pro:hover{background:linear-gradient(135deg,#ff5252,#ff7979)}.unified-card-action-btn--danger{background:#dc3545e6;color:#fff}.unified-card-action-btn--danger:hover{background:#c82333f2}.episode-modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;display:flex;align-items:center;justify-content:center}.episode-modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;cursor:pointer}.episode-modal-dialog{position:relative;background:var(--bg);border-radius:12px;box-shadow:0 20px 40px #0000004d;max-width:500px;width:90%;max-height:80vh;overflow:hidden}.episode-modal-header{padding:20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.episode-modal-header h3{margin:0;color:var(--text);font-size:1.2rem}.episode-modal-close{background:none;border:none;font-size:1.5rem;color:var(--text-secondary);cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.episode-modal-close:hover{color:var(--text)}.episode-modal-body{padding:20px}.episode-progress{margin-bottom:20px}.episode-progress label{display:block;margin-bottom:8px;font-weight:500;color:var(--text)}.episode-select{width:100%;padding:10px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text);font-size:1rem}.episode-actions{display:flex;gap:12px;flex-wrap:wrap}.episode-btn{padding:10px 20px;border:none;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s ease}.episode-btn--primary{background:var(--primary);color:#fff}.episode-btn--primary:hover{background:var(--primary-dark)}.episode-btn--secondary{background:var(--border);color:var(--text)}.episode-btn--secondary:hover{background:var(--text-secondary);color:#fff}.back-to-top{position:fixed;bottom:20px;right:20px;width:50px;height:50px;background:var(--primary);color:#fff;border:none;border-radius:50%;font-size:1.2rem;cursor:pointer;box-shadow:0 4px 12px #0003;transition:all .3s ease;z-index:1000;opacity:0;visibility:hidden;transform:translateY(20px);pointer-events:none}.back-to-top.visible{opacity:1;visibility:visible;transform:translateY(0);pointer-events:auto}.back-to-top:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}@media (max-width: var(--bp-mobile-lg)){.back-to-top{bottom:15px;right:15px;width:45px;height:45px;font-size:1rem}}.unified-card.draggable{cursor:grab;transition:all .2s ease}.unified-card.draggable:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0003}.unified-card.dragging{opacity:.5;transform:rotate(5deg);cursor:grabbing;z-index:1000}.unified-card.drag-over{border:2px dashed var(--primary);background:rgba(var(--primary-rgb),.1)}.unified-card.drag-over:before{content:"Drop here";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--primary);color:#fff;padding:8px 16px;border-radius:4px;font-size:.8rem;font-weight:500;z-index:1001;pointer-events:none}@media (max-width: var(--bp-mobile-lg)){.unified-card{width:var(--card-w-mobile);max-width:var(--card-w-mobile);min-width:var(--card-w-mobile)}.unified-card-poster{width:var(--card-w-mobile);height:var(--card-h-mobile)}.unified-card-actions{padding:8px;gap:6px}.unified-card-action-btn{padding:6px 8px;font-size:.65rem;min-width:80px}.unified-card-action-label{font-size:.6rem}.unified-card-title{font-size:.65rem}.unified-card-subtitle,.unified-card-rating{font-size:.55rem}.unified-card--detail{flex-direction:column;max-width:none;min-width:auto;width:100%;height:auto}.unified-card--detail .unified-card-poster{width:80px;height:120px;align-self:center;margin-bottom:12px}.unified-card--detail .unified-card-content{padding:12px;text-align:center}.unified-card--detail .unified-card-title{font-size:16px}.unified-card--detail .unified-card-actions{justify-content:center;flex-wrap:wrap}}.dark-mode .unified-card{background:var(--card);border-color:var(--border)}.dark-mode .unified-card-poster,.dark-mode .unified-card-poster-placeholder{background:var(--border)}.dark-mode .unified-card-actions{background:#000000d9}.dark-mode .unified-card-action-btn{background:#ffffffe6;color:var(--text)}.dark-mode .unified-card-action-btn:hover{background:#fff}.show-poster,.poster-placeholder,.preview-card-poster,.preview-card-poster img{aspect-ratio:2 / 3;object-fit:cover}.show-poster[src=""],.poster-placeholder:empty{aspect-ratio:2 / 3;background:var(--border)}.preview-row-scroll{position:relative}.preview-row-scroll:after{content:"";position:absolute;top:0;right:0;width:30px;height:100%;background:linear-gradient(to left,var(--bg) 0%,transparent 100%);pointer-events:none;opacity:0;transition:opacity .3s ease}.preview-row-scroll.scrollable:after{opacity:1}.preview-row-scroll:before{content:"";position:absolute;top:0;left:0;width:30px;height:100%;background:linear-gradient(to right,var(--bg) 0%,transparent 100%);pointer-events:none;opacity:0;transition:opacity .3s ease}.preview-row-scroll.scrollable-left:before{opacity:1}.scroll-indicators{display:flex;justify-content:center;gap:4px;margin-top:8px;opacity:0;transition:opacity .3s ease}.preview-row-container:hover .scroll-indicators{opacity:1}.scroll-dot{width:6px;height:6px;border-radius:50%;background:var(--border);cursor:pointer;transition:background .2s ease}.scroll-dot.active{background:var(--primary)}.scroll-dot:hover{background:var(--accent)}.tab-section .list-container{display:flex;flex-direction:row;gap:16px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain;padding:16px;align-items:stretch;scroll-behavior:smooth}.tab-section .list-container:after{content:"";position:absolute;top:0;right:0;width:30px;height:100%;background:linear-gradient(to left,var(--bg) 0%,transparent 100%);pointer-events:none;opacity:0;transition:opacity .3s ease}.tab-section .list-container.scrollable:after{opacity:1}.tab-section .list-container:before{content:"";position:absolute;top:0;left:0;width:30px;height:100%;background:linear-gradient(to right,var(--bg) 0%,transparent 100%);pointer-events:none;opacity:0;transition:opacity .3s ease}.tab-section .list-container.scrollable-left:before{opacity:1}.tab-section .list-container .poster-card{flex:0 0 auto;width:100%;max-width:600px;min-width:400px;display:flex;flex-direction:row;height:auto;margin:0;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .2s ease}.tab-section .list-container .poster-card .poster-card__poster{width:var(--tab-card-poster-width-desktop);height:var(--tab-card-poster-height-desktop);flex-shrink:0;border-radius:0;overflow:hidden;aspect-ratio:2 / 3}.tab-section .list-container .poster-card .poster-card__content{flex:1;padding:16px;display:flex;flex-direction:column;justify-content:space-between;min-width:0;overflow:hidden}.tab-section .list-container .poster-card .poster-card__title{font-size:18px;font-weight:600;margin:0 0 8px;line-height:1.3;color:var(--text)}.tab-section .list-container .poster-card .poster-card__meta{font-size:14px;color:var(--text-secondary);margin:0 0 12px;display:flex;align-items:center;gap:8px}.tab-section .list-container .poster-card .poster-card__rating{margin:0 0 12px;font-size:16px}.tab-section .list-container .poster-card .poster-card__actions{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:12px}.tab-section .list-container .poster-card .poster-card__move-buttons{display:flex;gap:8px;flex-wrap:wrap}.tab-section .list-container .poster-card .poster-card__move-buttons button{padding:6px 12px;font-size:12px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text);cursor:pointer;transition:all .2s ease}.tab-section .list-container .poster-card .poster-card__move-buttons button:hover{background:var(--primary);color:#fff;border-color:var(--primary)}.tab-section .list-container .poster-card .poster-card__overflow-btn{padding:8px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text);cursor:pointer;transition:all .2s ease}.tab-section .list-container .poster-card .poster-card__overflow-btn:hover{background:var(--primary);color:#fff;border-color:var(--primary)}@media (max-width: var(--bp-mobile-lg)){.tab-section .list-container{flex-direction:column;gap:12px;overflow-x:hidden;overflow-y:visible;padding:12px}.tab-section .list-container .poster-card{flex-direction:column;max-width:none;min-width:auto;width:100%}.tab-section .list-container .poster-card .poster-card__poster{width:var(--tab-card-poster-width-mobile);height:var(--tab-card-poster-height-mobile);align-self:center;margin-bottom:12px}.tab-section .list-container .poster-card .poster-card__content{padding:12px;text-align:center}.tab-section .list-container .poster-card .poster-card__title{font-size:16px}.tab-section .list-container .poster-card .poster-card__meta{font-size:12px;justify-content:center}.tab-section .list-container .poster-card .poster-card__actions{justify-content:center;flex-wrap:wrap}}.cw-row{overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain;padding-inline:12px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner{display:flex;flex-direction:row;align-items:stretch;gap:8px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner>*{flex:0 0 auto;width:var(--home-card-width-desktop);max-width:var(--home-card-width-desktop);min-width:var(--home-card-width-desktop);display:flex;flex-direction:column;border-radius:8px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster{width:var(--card-w);height:var(--home-card-height-desktop);flex-shrink:0;border-radius:6px;overflow:hidden;aspect-ratio:2 / 3}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster img,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .poster,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .show-poster,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster .poster-placeholder{width:100%;height:100%;object-fit:cover;border-radius:6px;aspect-ratio:2 / 3}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-content{flex:1;padding:6px 4px;display:flex;flex-direction:column;justify-content:flex-start;min-width:0;overflow:hidden;text-align:center}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-content,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .content{padding:6px 6px 8px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-title{font-size:.7rem;font-weight:600;color:var(--text);margin:0 0 2px;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-align:center}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-year{font-size:.6rem;color:var(--text-secondary);margin:0;line-height:1;text-align:center}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-title,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .title{font-size:.8rem;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-status{position:absolute;top:4px;left:4px;background:#51cf66f2;color:#fff;padding:2px 6px;border-radius:6px;font-size:.5rem;font-weight:600;text-transform:uppercase;letter-spacing:.2px;box-shadow:0 1px 3px #0000004d}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-stamp,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .status-pill{font-size:.65rem;padding:2px 6px;border-radius:999px;margin-top:4px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .card-actions{display:flex;gap:6px;margin-top:6px}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .actions .btn,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .action-btn,.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .more-btn{width:22px;height:22px;display:inline-flex;justify-content:center;align-items:center;border-radius:6px;font-size:12px;padding:0}@media (max-width: var(--bp-mobile-lg)){.preview-card{width:var(--home-card-width-mobile);flex:0 0 var(--home-card-width-mobile)}.preview-card-poster{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner>*{width:var(--home-card-width-mobile);max-width:var(--home-card-width-mobile);min-width:var(--home-card-width-mobile)}.cw-row #currentlyWatchingScroll.preview-row-scroll.row-inner .preview-card-poster{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}}#up-next-row{overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain;padding-inline:12px}#up-next-row::-webkit-scrollbar{height:8px}#up-next-row::-webkit-scrollbar-track{background:transparent}#up-next-row::-webkit-scrollbar-thumb{background:#0003;border-radius:8px}#up-next-row .row-inner{display:flex;flex-direction:row;align-items:stretch;gap:8px}#up-next-row .row-inner>*{flex:0 0 auto;width:var(--home-card-width-desktop);max-width:var(--home-card-width-desktop);min-width:var(--home-card-width-desktop);display:flex;flex-direction:column;border-radius:8px;position:relative}#up-next-row .row-inner .media{width:var(--home-card-width-desktop);height:var(--home-card-height-desktop);border-radius:6px;overflow:hidden;flex-shrink:0}#up-next-row .row-inner .media img{width:100%;height:100%;object-fit:cover;display:block}#up-next-row .row-inner .meta{padding:6px 6px 8px;font-size:.7rem;font-weight:600;line-height:1.2;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}@media (max-width: var(--bp-mobile-lg)){#up-next-row .row-inner>*{width:var(--home-card-width-mobile);max-width:var(--home-card-width-mobile);min-width:var(--home-card-width-mobile)}#up-next-row .row-inner .media{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}}#spotlight-row{padding-inline:12px}#spotlight-row .spotlight-grid{display:grid;grid-template-columns:minmax(200px,.625fr) 280px;gap:12px;align-items:start}#spotlight-row .spotlight-video{position:relative;width:100%;aspect-ratio:4 / 3;border-radius:10px;overflow:hidden;background:var(--surface-2, #111)}#spotlight-row .spotlight-video iframe,#spotlight-row .spotlight-video .thumb{width:100%;height:100%;display:block}#spotlight-row .spotlight-info{display:flex;flex-direction:column;height:100%;min-height:200px}#spotlight-row .spotlight-meta{flex:1;display:flex;flex-direction:column;justify-content:center;text-align:center;padding:16px 0}#spotlight-row .spotlight-title{font-size:1.1rem;font-weight:600;margin-bottom:8px;color:var(--text)}#spotlight-row .spotlight-credit{font-size:.9rem;opacity:.8;margin-bottom:12px;color:var(--text-secondary, #666)}#spotlight-row .spotlight-desc{font-size:.9rem;line-height:1.4;max-height:4.2em;overflow:hidden;text-overflow:ellipsis;color:var(--text);margin-bottom:16px}#spotlight-row .spotlight-badges{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-bottom:16px}#spotlight-row .badge{font-size:.7rem;padding:4px 8px;border-radius:999px;background:var(--surface-3, #222);color:var(--text)}#spotlight-row .spotlight-cta{margin-top:auto;padding-top:16px;text-align:center}#spotlight-row .spotlight-cta .btn{background:var(--primary, #e91e63);color:#fff;border:2px solid var(--primary, #e91e63);padding:12px 24px;font-size:.9rem;font-weight:600;border-radius:8px;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}#spotlight-row .spotlight-cta .btn:hover{background:var(--primary-dark, #c2185b);border-color:var(--primary-dark, #c2185b);transform:translateY(-1px);box-shadow:0 4px 8px #0003}#spotlight-row .spotlight-cta .btn:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}@media (max-width: var(--bp-mobile-lg)){#spotlight-row .spotlight-grid{grid-template-columns:1fr}}#feedback-row{padding-inline:12px}#feedback-row .feedback-card{display:grid;grid-template-columns:40px 1fr auto;align-items:center;gap:12px;padding:12px;border-radius:10px;background:var(--surface-2, #f8f9fa);border:1px solid var(--border, #dee2e6);cursor:pointer;transition:all .2s ease}#feedback-row .feedback-card:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a;border-color:var(--primary, #e91e63)}#feedback-row .feedback-icon{font-size:20px;line-height:1;text-align:center}#feedback-row .feedback-title{font-size:.95rem;font-weight:600;color:var(--text, #121212);margin-bottom:2px}#feedback-row .feedback-sub{font-size:.8rem;opacity:.85;color:var(--text-secondary, #666);line-height:1.3}#feedback-row .feedback-cta{font-size:.8rem;padding:6px 12px;border-radius:6px}@media (max-width: var(--bp-mobile-lg)){#feedback-row .feedback-card{grid-template-columns:32px 1fr auto;padding:10px;gap:10px}#feedback-row .feedback-title{font-size:.9rem}#feedback-row .feedback-sub{font-size:.75rem}#feedback-row .feedback-icon{font-size:18px}}.header-bar{text-align:initial}@media (min-width: calc(var(--bp-mobile) + 1px)){.header-bar{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:nowrap;padding:8px 12px}.header-left{display:flex;align-items:baseline;gap:8px;flex:1 1 auto;min-width:0;justify-content:flex-start}.header-right{display:flex;align-items:center;gap:8px;flex:0 0 auto;justify-content:flex-end;margin-left:auto;margin-top:0}}@media (max-width: var(--bp-mobile)){.header-bar{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.header-left,.header-right{width:100%;justify-content:center}.header-right{margin-top:6px}}.btn--sm{font-size:.9rem;line-height:1.1;padding:6px 10px;height:36px;border-radius:10px}.select--sm{font-size:.9rem;line-height:1.1;padding:4px 10px;height:36px;border-radius:10px}.header-right>*{white-space:nowrap}.account-context{font-size:.75rem;color:var(--text-secondary, #666);text-align:center;margin-bottom:2px;min-height:1em;opacity:.8}#up-next-row{display:block}.home-group{margin-bottom:32px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000d}#group-1-your-shows.home-group{background:none;border:none;border-radius:0;padding:0;box-shadow:none}.community-content{display:flex;align-items:stretch;gap:clamp(16px,2vw,24px);width:100%;max-width:100%;min-height:60vh;overflow:visible}.community-left{flex:0 1 50%;max-width:50%;min-width:0;width:100%;display:flex;flex-direction:column}.player-placeholder{width:100%;height:100%;background:var(--card);border:2px dashed var(--border);border-radius:12px;display:flex;align-items:center;justify-content:center;min-height:400px}.placeholder-content{text-align:center;color:var(--muted)}.placeholder-content h3{margin:0 0 8px;font-size:18px;color:var(--text)}.placeholder-content p{margin:0;font-size:14px}.community-left .preview-row-container{width:100%;max-width:100%;overflow:hidden;height:auto;flex-shrink:0}.community-left .home-row-content{width:100%;max-width:100%;display:flex;flex-direction:column;height:auto;flex-shrink:0}.community-left .spotlight-video{width:100%;max-width:100%;position:relative;overflow:hidden;height:auto;aspect-ratio:9 / 16;max-height:clamp(300px,50vh,500px);flex-shrink:0;display:block;line-height:0}.community-left .home-preview-row{padding:0;margin:0;height:auto;display:block;line-height:0}.community-left .preview-row-header,.community-left .preview-row-container{padding:0;margin:0;height:auto;line-height:0}.community-left iframe,.community-left .video-frame,.community-left .embed-responsive{display:block;width:100%;height:100%;aspect-ratio:9 / 16;max-height:clamp(300px,50vh,500px);margin:0;border:0;object-fit:cover;transition:all .3s ease;position:absolute;top:0;left:0}.community-left .landscape iframe{aspect-ratio:16 / 9}.community-right{flex:0 1 50%;max-width:50%;min-width:300px;display:flex;flex-direction:column;width:100%;overflow:visible;align-self:stretch}.community-section{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:16px;display:flex;flex-direction:column;min-height:300px;overflow-y:auto}.section-content{height:100%;display:flex;flex-direction:column}.section-content h4{margin:0 0 12px;font-size:16px;color:var(--text);font-weight:600}.marquee-text{margin:0;font-size:13px;line-height:1.4;color:var(--text);font-style:italic;flex:1;overflow-y:auto}.trivia-question{font-weight:600;margin-bottom:6px;color:var(--text);font-size:11px;line-height:1.2;word-wrap:break-word;overflow-wrap:break-word;max-height:2.4em;overflow:hidden}.trivia-choices{display:flex;flex-direction:column;gap:3px;margin-bottom:6px;flex:1;overflow-y:auto;max-height:120px}.trivia-choices button,.trivia-choices li,.trivia-choices div{padding:4px 6px;background:var(--card);border:1px solid var(--border);border-radius:3px;color:var(--text);cursor:pointer;transition:all .2s ease;font-size:10px;text-align:left;margin-bottom:2px;word-wrap:break-word;overflow-wrap:break-word;line-height:1.2;min-height:20px}.trivia-choices button:hover,.trivia-choices li:hover,.trivia-choices div:hover{background:var(--accent);color:#fff}.trivia-feedback{margin:4px 0;font-weight:500;font-size:10px;line-height:1.2;word-wrap:break-word;overflow-wrap:break-word;max-height:2.4em;overflow:hidden}.trivia-next-btn{padding:4px 8px;background:var(--accent);color:#fff;border:none;border-radius:3px;cursor:pointer;margin-top:4px;font-size:9px;display:block;visibility:visible;opacity:1;width:100%;min-height:20px}.trivia-stats{margin-top:4px;font-size:8px;color:var(--muted)}#triviaTile,.trivia-slot{display:flex;flex-direction:column;flex:1;height:100%;max-height:100%;overflow:hidden}#flickwordTile{display:flex;flex-direction:column;flex:1;height:100%;width:100%}.flickword-card{height:100%;width:100%;min-height:150px;display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;padding:20px}.flickword-teaser{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:12px;cursor:pointer;transition:all .3s ease;border-radius:8px;background:linear-gradient(135deg,var(--card) 0%,rgba(255,255,255,.05) 100%);border:1px solid var(--border)}.flickword-teaser:hover{background:linear-gradient(135deg,var(--accent) 0%,rgba(255,255,255,.1) 100%);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.teaser-icon{font-size:32px;margin-bottom:8px;animation:pulse 2s infinite}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.teaser-title{font-size:16px;font-weight:600;color:var(--text);margin-bottom:4px}.teaser-subtitle{font-size:12px;color:var(--text-secondary);margin-bottom:8px}.teaser-stats{display:flex;gap:12px;margin-bottom:12px;font-size:10px;color:var(--text-secondary)}.teaser-play-btn{background:var(--accent);color:#fff;padding:6px 12px;border-radius:16px;font-size:11px;font-weight:600;transition:all .2s ease}.flickword-teaser:hover .teaser-play-btn{background:#fff;color:var(--accent)}.flickword-modal{max-width:90vw;max-height:90vh;width:600px}.flickword-modal .modal-content{padding:0;background:var(--bg);overflow:hidden}.flickword-modal iframe{border-radius:8px;box-shadow:0 4px 12px #0000001a;width:100%;height:70vh;min-height:500px}.flickword-game{width:100%;height:100%;display:flex;flex-direction:column;font-size:10px}.fw-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.fw-header h4{margin:0;font-size:12px;font-weight:600;color:var(--text)}.fw-stats{display:flex;gap:8px;font-size:8px;color:var(--text-secondary)}.fw-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:2px;margin-bottom:6px;flex:1;max-height:80px}.fw-tile{width:100%;aspect-ratio:1;border:1px solid var(--border);border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;background:var(--card);color:var(--text)}.fw-tile.correct{background:var(--success);color:#fff;border-color:var(--success)}.fw-tile.present{background:var(--warning);color:var(--text);border-color:var(--warning)}.fw-tile.absent{background:var(--text-secondary);color:#fff;border-color:var(--text-secondary)}.fw-keyboard{display:flex;flex-direction:column;gap:2px;margin-bottom:6px}.fw-kb-row{display:flex;gap:1px;justify-content:center}.fw-key{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid var(--border);background:var(--card);color:var(--text);min-width:16px;height:20px;padding:0 2px;border-radius:3px;font-size:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center}.fw-key:hover{background:var(--accent);color:#fff}.fw-key.correct{background:var(--success);color:#fff;border-color:var(--success)}.fw-key.present{background:var(--warning);color:var(--text);border-color:var(--warning)}.fw-key.absent{background:var(--text-secondary);color:#fff;border-color:var(--text-secondary)}.fw-key-back,.fw-key-enter{min-width:24px;font-size:7px}.fw-actions{display:flex;gap:4px;justify-content:center}.fw-btn{padding:2px 6px;border:1px solid var(--border);background:var(--card);color:var(--text);border-radius:3px;font-size:8px;cursor:pointer;transition:all .2s ease}.fw-btn:hover{background:var(--accent);color:#fff}.fw-notification{position:absolute;top:4px;left:4px;right:4px;background:var(--card);border:1px solid var(--border);border-radius:3px;padding:4px 6px;font-size:8px;font-weight:600;text-align:center;z-index:10}.fw-notification.error{border-color:var(--danger);color:var(--danger);background:#ef44441a}.fw-notification.success{border-color:var(--success);color:var(--success);background:#16a34a1a}.community-right .marquee-slot{order:0;min-height:36px}.community-right .game-cards-wrapper{order:1}.game-cards-wrapper{display:flex;flex-direction:column;gap:12px;flex:0 0 auto}.marquee-content{background:#ffffff08;border:1px solid var(--border);border-radius:8px;padding:16px;margin-bottom:8px}.marquee-text{margin:0;font-size:14px;line-height:1.5;color:var(--text);font-style:italic;text-align:left}.flickword-section,.trivia-section{margin:0;background:#ffffff05;border:1px solid var(--border);border-radius:10px;padding:clamp(12px,1.5vw,18px);display:flex;flex-direction:column;justify-content:center;flex:0 0 auto;height:clamp(160px,15vh,200px);transition:all .3s ease}@media (max-width: var(--bp-tablet)){.community-content{flex-direction:column}.community-left,.community-right{flex:1 1 auto;max-width:100%}.community-left iframe{max-height:clamp(320px,45vh,480px)}.community-right .marquee-slot{min-height:28px}.flickword-section,.trivia-section{min-height:170px}}.trivia-stats-panel{margin:16px 0;padding:16px;background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px #0000000d}.stats-panel{display:flex;flex-direction:column;gap:12px}.stats-row{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-radius:8px;border:1px solid var(--border);transition:all .2s ease}.stats-row.basic-active{background:linear-gradient(135deg,#22c55e1a,#22c55e0d);border-color:#22c55e4d}.stats-row.pro-active{background:linear-gradient(135deg,#3b82f61a,#3b82f60d);border-color:#3b82f64d}.stats-row.pro-locked{background:#00000005;border-color:var(--border);opacity:.6}.stats-label{font-weight:600;color:var(--text);font-size:14px}.stats-value{font-weight:500;color:var(--text-secondary);font-size:13px}.stats-status{font-size:12px;font-weight:600;padding:4px 8px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.stats-row.basic-active .stats-status{background:#22c55e33;color:#15803d}.stats-row.pro-active .stats-status{background:#3b82f633;color:#1d4ed8}.stats-row.pro-locked .stats-status{background:#0000001a;color:var(--text-secondary)}.stats-summary{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-top:1px solid var(--border);margin-top:8px}.streak-info{font-size:13px;color:var(--text-secondary);font-weight:500}.upgrade-hint{font-size:12px;color:var(--primary);font-weight:600;background:#e91e631a;padding:4px 8px;border-radius:6px}.dark-mode .trivia-stats-panel{background:var(--card);border-color:var(--border)}.dark-mode .stats-row.basic-active{background:linear-gradient(135deg,#22c55e26,#22c55e14)}.dark-mode .stats-row.pro-active{background:linear-gradient(135deg,#3b82f626,#3b82f614)}.dark-mode .stats-row.pro-locked{background:#ffffff05}@media (max-width: var(--bp-mobile-lg)){.community-content{flex-direction:column;gap:16px}.community-left,.community-right{flex:none}}.group-header{margin-bottom:16px}.group-title{font-size:1.5rem;font-weight:700;color:var(--text);margin:0;padding:0 0 8px;border-bottom:2px solid var(--primary);display:inline-block}.group-divider{height:1px;background:var(--border);margin:16px 0;opacity:.6}@media (min-width: calc(var(--bp-mobile-lg) + 1px)){.home-group{display:flex;flex-direction:column;gap:0}.group-divider{margin:8px 0}}@media (max-width: var(--bp-mobile-lg)){.home-group{margin-bottom:24px;padding:16px}.group-title{font-size:1.3rem;margin-bottom:12px}.group-divider,.home-preview-row{margin:12px 0}.preview-row-scroll{scroll-snap-type:x mandatory;scroll-padding:16px}.preview-row-scroll>*{scroll-snap-align:start;scroll-snap-stop:always}}#up-next-row .preview-row-scroll{display:flex;gap:16px;overflow-x:auto;padding:8px 0;scroll-behavior:smooth}#up-next-row .preview-card{flex:0 0 auto;width:var(--home-card-width-desktop);max-width:var(--home-card-width-desktop);min-width:var(--home-card-width-desktop);display:flex;flex-direction:column;background:var(--bg);border-radius:8px;border:1px solid var(--border)}#up-next-row .preview-card-poster{width:var(--card-w);height:var(--home-card-height-desktop);border-radius:6px;overflow:hidden;position:relative}#up-next-row .preview-card-content{padding:8px;flex:1;display:flex;flex-direction:column;justify-content:center;text-align:center}#up-next-row .preview-card-title{font-size:.8rem;font-weight:600;color:var(--text);margin:0 0 4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#up-next-row .preview-card-year{font-size:.7rem;color:var(--text-secondary);margin:0}#up-next-row .preview-card-status{position:absolute;top:4px;right:4px;background:var(--primary);color:#fff;padding:2px 6px;border-radius:4px;font-size:.6rem;font-weight:600}@media (max-width: var(--bp-mobile-lg)){#up-next-row .preview-card{width:var(--home-card-width-mobile);max-width:var(--home-card-width-mobile);min-width:var(--home-card-width-mobile)}#up-next-row .preview-card-poster{width:var(--home-card-width-mobile);height:var(--home-card-height-mobile)}#up-next-row .preview-card-title{font-size:.7rem}#up-next-row .preview-card-year{font-size:.6rem}}.home-preview-row.collapsed{padding:8px 16px;min-height:auto}.home-preview-row.collapsed .preview-row-container{display:none}.home-preview-row.collapsed .preview-row-header{margin-bottom:0}.home-preview-row.collapsed .preview-row-title{font-size:1rem;font-weight:500;opacity:.7}.home-games{display:contents}#flickwordTile,#triviaTile,.home-games .game-card{display:flex;flex-direction:column;justify-content:space-between;padding:16px 18px;border-radius:16px;width:100%;height:100%;min-height:0;box-sizing:border-box;position:relative;background:var(--card-bg, #fff);box-shadow:0 1px 2px #0000000f;border:1px solid var(--card-bd, #eaeaea);cursor:pointer;overflow:hidden;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease;outline:none}.game-card:hover,.game-card:focus{transform:translateY(-2px);box-shadow:0 10px 24px #00000014;border-color:var(--brand-200, #d7e3ff)}.gc-bg{position:absolute;top:-20%;right:-20%;bottom:-20%;left:-20%;background:radial-gradient(55% 55% at 70% 20%,#78a9ff2e,#78a9ff00 60%),linear-gradient(135deg,#fff0,#78a9ff0f);pointer-events:none}.gc-head{text-align:center;margin-bottom:8px}.gc-icon{font-size:32px;line-height:1}.gc-title{margin:4px 0;font-size:1.1rem;font-weight:700}.gc-tagline{margin:0;font-size:.9rem;color:var(--muted, #6b7280)}.gc-stats{flex:1;margin:12px 0;display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.gc-stats>div{display:flex;flex-direction:column;justify-content:center;border-radius:10px;background:#78a9ff0f;border:1px dashed rgba(120,169,255,.25);text-align:center;padding:8px 6px}.gc-stat-label{display:block;font-size:.75rem;color:var(--muted, #6b7280)}.gc-stat-val{font-weight:700}.home-games .game-card{position:relative}.gc-cta{width:auto;padding:8px 12px;border-radius:10px;font-size:.92rem;line-height:1.1;align-self:flex-end;margin-top:10px;font-weight:700;background:linear-gradient(135deg,var(--brand-500, #5a88ff),var(--brand-600, #3b6cff));color:#fff;border:0;transition:filter .18s ease,transform .18s ease}.game-card:hover .gc-cta{filter:brightness(1.05)}.game-card:active .gc-cta{transform:translateY(1px)}.flickword-hero{margin-bottom:16px;text-align:center}.flickword-hero-image{width:100%;max-width:200px;height:auto;border-radius:8px;box-shadow:0 4px 8px #0000001a;object-fit:cover}.flickword-hero-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:200px;height:120px;margin:0 auto;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:8px;box-shadow:0 4px 8px #0000001a}.flickword-hero-icon{font-size:2.5rem;margin-bottom:8px}.flickword-hero-text{color:#fff;font-weight:600;font-size:1rem}@media (max-width: var(--bp-mobile-lg)){.flickword-hero-image,.flickword-hero-placeholder{max-width:150px;height:90px}.flickword-hero-icon{font-size:2rem}.flickword-hero-text{font-size:.9rem}}#flickwordTile .game-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:8px}#flickwordTile .game-stats .stat-item{display:flex;flex-direction:column;align-items:center;text-align:center;padding:4px}#flickwordTile .game-stats .stat-label{font-size:.75rem;font-weight:600;color:var(--text-muted, #6b7280);text-transform:uppercase;letter-spacing:.05em;margin-bottom:2px}#flickwordTile .game-stats .stat-value{font-size:1.25rem;font-weight:700;color:var(--text-primary, #1f2937);line-height:1}@media (max-width: var(--bp-mobile)){#flickwordTile .game-stats{grid-template-columns:repeat(2,1fr);gap:6px}#flickwordTile .game-stats .stat-label{font-size:.7rem}#flickwordTile .game-stats .stat-value{font-size:1.1rem}}.game-modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:15000;display:none;align-items:center;justify-content:center;padding:20px}.game-modal[aria-hidden=false]{display:flex}.gm-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:#00000073;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1;pointer-events:auto}.game-modal .gm-dialog{width:min(1200px,96vw);max-width:none;height:min(92vh,900px);display:flex;flex-direction:column;border-radius:16px;background:var(--bg, #ffffff);box-shadow:0 20px 40px #0000004d;z-index:10001;position:relative;pointer-events:auto;overflow:hidden}.game-modal[aria-hidden=false] .gm-dialog{transform:scale(1);opacity:1}.game-modal .gm-header{flex:0 0 auto;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;border-bottom:1px solid var(--card-bd, #eaeaea)}.game-modal .gm-header h3{font-size:1.5rem;font-weight:800;margin:0;color:var(--text, #1f2937)}.game-modal .gm-close{position:relative;right:auto;top:auto;transform:none;font-size:22px;line-height:1;background:none;border:0;cursor:pointer;margin-left:auto}.game-modal .gm-body{flex:1 1 auto;padding:0;overflow:auto;box-sizing:border-box;max-width:none;margin:0;pointer-events:auto;min-height:0}.gm-placeholder{height:60vh;min-height:360px;display:grid;place-items:center;border:2px dashed #d7e3ff;border-radius:12px;color:#6b7280}@media (max-width: var(--bp-mobile-lg)){.home-games{gap:12px}.home-games .game-card{min-height:200px}}#glickword-game,#flickword-game,#dailytrivia-game{height:100%}.gm-body iframe{display:block;width:100%;height:100%;border:0;border-radius:12px;max-width:none;pointer-events:auto}@media (max-width: var(--bp-mobile)){.game-modal{padding:0}.game-modal .gm-dialog{width:100svw;height:100svh;max-height:100svh;border-radius:0}.game-modal .gm-body{padding:0}.gm-body iframe{border-radius:0}}@media (max-width: 768px) and (min-width: 641px){.game-modal .gm-dialog{width:min(95vw,800px);height:min(90vh,700px)}}.dark-mode .game-card{background:var(--card);border-color:var(--border);color:var(--text)}.dark-mode .gc-tagline,.dark-mode .gc-stat-label{color:var(--text-secondary)}.dark-mode .gm-dialog{background:var(--card);border-color:var(--border);color:var(--text)}.dark-mode .gm-header{border-color:var(--border)}.dark-mode .gm-placeholder{border-color:var(--border);color:var(--text-secondary)}html,body{overflow:visible;overscroll-behavior:none}.supports-safe-area.a11y-v1.layout-mobile-fix.mobile.mobile-v1{overflow:visible;contain:none}.tabs-rail,.tab-container{position:relative;z-index:100}#searchResults,.search-results{position:relative;z-index:50}body{background:var(--bg-page);color:var(--fg-default)}.u-fg{color:var(--fg-default)}.u-bg{background:var(--bg-elevated)}.u-fg-on{color:var(--fg-on-elevated)}.version-display{font-size:10px;margin-right:8px;color:var(--fg-subtle)}.tab-version{font-size:8px;margin-left:8px;color:var(--fg-subtle);opacity:.7;font-weight:400}.meta-muted{font-size:.8rem;font-style:italic;color:var(--fg-muted)}.card-surface{padding:10px;border-radius:8px;background:var(--bg-elevated);border:1px solid var(--border)}.heading-subtle{margin:10px 0;font-size:.9rem;color:var(--fg-default)}[hidden]{display:none}html,body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:16px;line-height:1.4}.signin-area{display:flex;flex-direction:column;align-items:center;gap:.25rem}.signin-label{font-weight:600;color:var(--fg-primary, #000);font-size:.875rem}.account-area{display:flex;align-items:center;gap:.5rem}.account-area .account-hint{font-size:.75rem;line-height:1;opacity:.75;margin-right:.25rem}.account-area .account-name{font-weight:600}.user-btn{display:inline-flex;align-items:center;gap:8px}.user-initial{width:24px;height:24px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:var(--bg-elevated);color:var(--fg-on-elevated);font-weight:600;font-size:12px}.user-name{max-width:18ch;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--fg-default);font-weight:600}.account-menu{position:absolute;margin-top:6px;padding:6px;background:var(--bg-elevated);color:var(--fg-on-elevated);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 18px #00000040;min-width:140px;z-index:2000}.menu-item{display:block;width:100%;text-align:left;padding:8px 10px}.menu-item:hover{background:var(--bg-page)}:root{--header-h: 80px;--tabs-h: 48px}html,body{height:var(--body-height)}#appRoot{height:auto;min-height:auto;display:flex;flex-direction:column;box-sizing:border-box;padding-bottom:calc(var(--fab-size, 56px) + var(--fab-gap, 16px))}#appRoot>header.header{position:fixed;top:0;left:0;right:0;z-index:10000;margin:0;height:120px;background:var(--bg, #ffffff);border-bottom:2px solid var(--primary, #e91e63);box-shadow:0 2px 4px #0000001a;width:100%;padding:16px 0}#appRoot>#search-container.top-search,#appRoot>.top-search{position:sticky;top:0;z-index:10;margin:130px 0 20px;background:var(--bg, #ffffff);padding:16px 0;border-bottom:1px solid var(--border, #e5e7eb)}#desktop-search-row,.search-row{position:sticky;top:120px;z-index:95;padding:0 16px;align-items:center;gap:12px}#appRoot>#navigation.tab-container,#appRoot>.tab-container,#appRoot>[role=tablist]{position:sticky;top:120px;z-index:800;margin:120px 0 20px;height:var(--tabs-h);background:var(--bg);border-bottom:1px solid var(--border)}#appRoot.has-search>#navigation.tab-container,#appRoot.has-search>.tab-container,#appRoot.has-search>[role=tablist]{top:calc(var(--header-h) + var(--search-h, 0px))}#appRoot>.panels{flex:1 1 auto;overflow:var(--content-overflow);padding:12px 16px;box-sizing:border-box}.quote-bar{display:block!important;background:var(--bg, #ffffff)!important;border:1px solid var(--border, #e5e7eb)!important;border-radius:var(--r-2, 8px);padding:var(--spacing-md, 12px) var(--spacing-lg, 16px);margin:var(--spacing-lg, 16px) 0 var(--spacing-sm, 8px) 0;text-align:center;color:var(--fg, #1f2937)!important;min-height:40px;font-size:var(--fs-0, 1rem)!important;font-weight:400!important;font-style:italic}.quote-marquee{overflow:hidden;white-space:nowrap}.quote-text{display:inline-block!important;animation:marquee 20s linear infinite;color:var(--fg, #1f2937)!important;font-size:var(--fs-0, 1rem)!important;font-weight:var(--font-weight-normal, normal)!important;font-style:italic}#quote-bar .quote-text,.quote-bar .quote-text{font-weight:400!important;font-style:italic!important}.marquee-loaded{opacity:1;transition:opacity .3s ease}@keyframes marquee{0%{transform:translate(100%)}to{transform:translate(-100%)}}.tab-section[hidden],.tab-panel[hidden]{display:none}.tab-section:not([hidden]),.tab-panel:not([hidden]){margin:20px 0 0;position:relative;z-index:1;background:var(--bg, #ffffff)}.tab-section:not([hidden])>*:first-child{margin-top:0}#appRoot>.tab-container+.panels{padding-top:8px}.fab-dock{position:sticky;bottom:var(--fab-gap);width:min(var(--container-max),100%);margin-inline:auto;padding-inline:var(--container-pad);z-index:50;pointer-events:none;display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--fab-gap, 12px);align-items:flex-end}.scroll-top-btn{position:fixed;bottom:20px;left:50%;transform:translate(-50%);z-index:60;background:transparent;border:none;padding:0;border-radius:0;box-shadow:none;width:auto;height:auto;color:#0000004d;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease,transform .08s ease;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:400}.scroll-top-btn:before{display:none}.scroll-top-btn *{color:#0000004d}.scroll-top-btn.is-visible{opacity:1;visibility:visible}.scroll-top-btn:focus-visible{outline:2px solid var(--primary, #2563eb);outline-offset:2px}.scroll-top-btn:active{transform:translate(-50%) scale(.98)}@media (prefers-reduced-motion: reduce){.scroll-top-btn{transition:none}}.fab-dock .fab,.fab-dock .fab-left,.fab-dock .fab-stack{position:static;top:auto;right:auto;bottom:auto;left:auto;z-index:auto;flex:0 0 auto;width:auto;max-width:none;pointer-events:auto}.fab-dock .fab-stack{display:flex;flex-direction:column;gap:12px}.fab-dock #btnSettings,.fab-dock #btnSettings.fab-left{background:transparent;background-color:transparent;background-image:none;box-shadow:none;border:none;border-radius:0;color:var(--text, #333);font-size:24px;width:auto;height:auto;min-width:auto;min-height:auto;padding:8px}.fab-dock #btnSettings:hover,.fab-dock #btnSettings.fab-left:hover{background:transparent;background-color:transparent;background-image:none;box-shadow:none;opacity:.8}.home-only{display:none}.tab-home .home-only{display:block}.top-search,.search-row{display:none}.has-search .top-search,.has-search .search-row{display:block}.has-search .search-row{display:flex}.home-content{max-width:min(var(--container-max-width),100%);margin-inline:auto;padding-inline:var(--safe-gutter);padding-block:var(--section-gap)}.quote-bar,#quote-bar{margin:0 0 var(--space-xs) 0;padding:var(--space-sm) var(--space-md);border-radius:var(--space-sm);background-color:var(--bg-elevated, #f8f9fa);border:1px solid var(--border, #ddd);display:block}.home-group{margin-block:0 var(--section-gap);padding:var(--space-md);border-radius:var(--space-lg)}.home-group .preview-row{margin-block:var(--space-sm)}.preview-row-scroll,.row-inner,.home-preview-row .row-inner{display:flex;gap:var(--row-gap);overflow-x:auto;scroll-snap-type:x proximity;padding-block:var(--space-xs);-webkit-overflow-scrolling:touch}.preview-row-scroll>*,.row-inner>*{scroll-snap-align:start}.preview-card,.unified-card,.tab-section .list-container .poster-card{width:var(--card-w);min-width:var(--card-w);max-width:var(--card-w)}.preview-card-poster,.unified-card-poster{height:var(--card-h)}.community-content{display:grid;grid-template-columns:2fr 1fr;gap:var(--row-gap);align-items:start}@media (max-width: var(--bp-tablet)){.community-content{grid-template-columns:1fr}}.community-left iframe,.community-left .video-frame,.community-left .embed-responsive{width:100%;aspect-ratio:16 / 9;height:auto;display:block}.community-right #home-games,.community-right .games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:var(--row-gap)}.home-content .left-column,.home-content .flickword-card{width:auto;max-width:none}.home-content #bingeMeter{order:0;flex-basis:auto;display:block}html,body{overflow-x:hidden}#homeSection.home-content:not([hidden]){display:block;min-height:auto}#panels{isolation:isolate}#homeSection{height:auto;max-height:none;overflow:visible}#homeSection .page-shell,#homeSection .container,#homeSection .wrapper{min-height:100%;height:auto;overflow:visible}.home-content .home-group{margin:0 0 var(--section-gap);padding:12px;border-radius:10px}.home-content .home-group+.home-group{margin-top:var(--section-gap)}#quote-bar,.quote-bar{margin:0 0 var(--section-gap-lg)}.home-content .preview-row,.home-content .home-preview-row{margin:0}.home-content .preview-row-scroll,.home-content .row-inner{min-height:0;align-items:stretch}#group-1-your-shows{display:block}#group-1-your-shows>.home-preview-row{order:0}#group-1-your-shows #up-next-row.home-preview-row{margin:16px 0;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000d}.cw-card .action-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}.cw-card .action-grid .btn{width:100%;min-height:36px;font-weight:600}.nu-card .meta{font-size:.9rem;opacity:.85;margin-top:8px}.nu-card .meta .line{margin-top:2px}.card .poster-wrap{cursor:default}#up-next-row,.up-next-row{min-height:0;height:auto}#appRoot>header.header,header.header,.header{padding-bottom:20px;margin-bottom:5px;position:static;z-index:auto;top:auto;left:auto;right:auto;height:auto;width:auto;box-shadow:none;border-bottom:2px solid var(--primary, #e91e63)}.top-search,#search-container.top-search{position:sticky;top:0;z-index:1000;background-color:var(--bg, #fff);border-bottom:1px solid var(--border, #ddd);margin-top:0;margin-bottom:0}#appRoot .top-search,#appRoot #search-container.top-search{margin-top:0}#appRoot.main-container{padding-bottom:0}#appRoot #navigation.tab-container,#appRoot .tab-container[role=tablist]{margin-top:2px}#navigation.tab-container,.tab-container[role=tablist],[role=tablist].tab-container{display:flex;gap:8px;align-items:flex-end;border-bottom:1px solid var(--border, #ddd);padding:8px 4px;margin:2px 0 20px;position:static;top:auto;z-index:auto;height:auto;min-height:40px;visibility:visible;opacity:1}.tab-container [role=tab],.tab-container .tab{display:inline-flex;align-items:center;justify-content:center;padding:8px 12px;border:1px solid transparent;border-bottom:2px solid transparent;border-radius:8px 8px 0 0;min-width:64px;font-weight:600;cursor:pointer;height:auto;min-height:32px;visibility:visible;opacity:1}.tab-container [role=tab].is-active,.tab-container [aria-selected=true],.tab-container .tab.is-active{border-color:var(--border, #ddd);border-bottom-color:var(--primary, #2563eb);background:var(--bg-elevated, #fff);color:var(--text, #111)}.tab-container [role=tab]:hover,.tab-container .tab:hover{background:color-mix(in oklab,var(--bg-elevated,#fff) 90%,#000 10% / 6%)}.legacy-up,.up-arrow,.scroll-to-top,.fab .icon-up,.fab-up{display:none}#appRoot,#appRoot>.panels{transform:none;contain:none}#appRoot{height:auto;min-height:100vh}:root{--spacing-xs: 2px;--spacing-sm: 4px;--spacing-md: 8px;--spacing-lg: 16px;--spacing-xl: 24px;--spacing-2xl: 32px;--tab-container-margin-top: 4px;--tab-container-margin-bottom: 4px;--tab-container-padding: 8px;--tab-container-gap: 6px;--tab-container-mobile-padding: 6px;--tab-container-mobile-gap: 4px;--search-to-tab-spacing: 4px}.action-bar{display:flex;align-items:center;gap:8px;margin-top:12px;padding:8px 0;flex-wrap:wrap}.action-bar__primary{display:flex;align-items:center;gap:6px;flex:1;min-width:0}.action-bar__secondary{display:flex;align-items:center;gap:6px;flex-shrink:0}.action-btn{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border-radius:6px;border:1px solid var(--color-border, #e5e7eb);background:var(--color-surface, #ffffff);color:var(--color-text, #1f2937);font-size:14px;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease;white-space:nowrap;min-height:32px}.action-btn:hover{background:var(--color-surface-2, #f3f4f6);border-color:var(--color-border, #d1d5db);transform:translateY(-1px)}.action-btn:active{transform:translateY(0)}.action-btn--primary{background:linear-gradient(90deg,var(--color-primary-start, #ff4c8d),var(--color-primary-end, #9b4dff));color:#fff;border:none;font-weight:600;box-shadow:0 2px 4px #0000001a}.action-btn--primary:hover{background:linear-gradient(90deg,#e91e63,#8e24aa);box-shadow:0 4px 8px #00000026}.action-btn--secondary{background:var(--color-surface-2, #f3f4f6);color:var(--color-text, #6b7280);border-color:var(--color-border, #e5e7eb)}.action-btn--secondary:hover{background:var(--color-surface, #ffffff);color:var(--color-text, #374151);border-color:var(--color-border, #d1d5db)}.action-btn.danger{background:var(--color-danger, #ef4444);color:#fff;border:none}.action-btn.danger:hover{background:#dc2626;box-shadow:0 4px 8px #ef44444d}.action-icon{font-size:16px;line-height:1;flex-shrink:0}.action-label{font-size:13px;line-height:1.2}.action-overflow{position:relative;flex-shrink:0}.action-overflow-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:1px solid var(--color-border, #e5e7eb);background:var(--color-surface, #ffffff);color:var(--color-text, #6b7280);border-radius:6px;cursor:pointer;transition:all .2s ease}.action-overflow-btn:hover{background:var(--color-surface-2, #f3f4f6);color:var(--color-text, #374151);border-color:var(--color-border, #d1d5db)}.action-overflow-btn[aria-expanded=true]{background:var(--color-surface-2, #f3f4f6);border-color:var(--color-border, #d1d5db)}.action-overflow-dots{font-size:18px;line-height:1;font-weight:700;letter-spacing:2px}.action-overflow-menu{position:absolute;top:100%;right:0;margin-top:4px;min-width:160px;background:var(--color-surface, #ffffff);border:1px solid var(--color-border, #e5e7eb);border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:1000;opacity:0;visibility:hidden;transform:translateY(-8px);transition:all .2s ease}.action-overflow-menu[aria-hidden=false]{opacity:1;visibility:visible;transform:translateY(0)}.action-overflow-item{display:flex;align-items:center;gap:8px;width:100%;padding:8px 12px;border:none;background:none;color:var(--color-text, #374151);font-size:14px;text-align:left;cursor:pointer;transition:background-color .2s ease}.action-overflow-item:hover{background:var(--color-surface-2, #f3f4f6)}.action-overflow-item:first-child{border-radius:8px 8px 0 0}.action-overflow-item:last-child{border-radius:0 0 8px 8px}.action-overflow-item:only-child{border-radius:8px}.action-overflow-icon{font-size:16px;line-height:1;flex-shrink:0}.action-overflow-label{font-size:13px;line-height:1.2}@media (max-width: 768px){.action-bar{gap:6px;margin-top:8px;padding:6px 0}.action-bar__primary,.action-bar__secondary{gap:4px}.action-btn{padding:5px 10px;font-size:13px;min-height:30px}.action-label{font-size:12px}.action-bar__secondary{display:none}.action-overflow{display:block}.action-overflow-menu{position:fixed;top:auto;bottom:0;left:0;right:0;margin:0;border-radius:16px 16px 0 0;box-shadow:0 -4px 12px #00000026;transform:translateY(100%)}.action-overflow-menu[aria-hidden=false]{transform:translateY(0)}}.mobile-v1 .action-bar__secondary{display:none}.mobile-v1 .action-overflow{display:block}.mobile-v1 .action-overflow-menu{position:fixed;top:auto;bottom:0;left:0;right:0;margin:0;border-radius:16px 16px 0 0;box-shadow:0 -4px 12px #00000026;transform:translateY(100%)}.mobile-v1 .action-overflow-menu[aria-hidden=false]{transform:translateY(0)}.dark-mode .action-btn{background:var(--card, #2a2a2a);color:var(--text, #f5f5f5);border-color:var(--border, #404040)}.dark-mode .action-btn:hover{background:var(--card, #3a3a3a);border-color:var(--border, #505050)}.dark-mode .action-btn--secondary{background:var(--card, #2a2a2a);color:var(--text-secondary, #b0b0b0)}.dark-mode .action-btn--secondary:hover{background:var(--card, #3a3a3a);color:var(--text, #f5f5f5)}.dark-mode .action-overflow-btn{background:var(--card, #2a2a2a);color:var(--text-secondary, #b0b0b0);border-color:var(--border, #404040)}.dark-mode .action-overflow-btn:hover{background:var(--card, #3a3a3a);color:var(--text, #f5f5f5)}.dark-mode .action-overflow-menu{background:var(--card, #2a2a2a);border-color:var(--border, #404040)}.dark-mode .action-overflow-item{color:var(--text, #f5f5f5)}.dark-mode .action-overflow-item:hover{background:var(--card, #3a3a3a)}.action-btn:focus{outline:2px solid var(--focus, #1a73e8);outline-offset:2px}.action-overflow-btn:focus{outline:2px solid var(--focus, #1a73e8);outline-offset:2px}.action-overflow-item:focus{outline:2px solid var(--focus, #1a73e8);outline-offset:-2px}@media (prefers-contrast: high){.action-btn{border-width:2px}.action-btn--primary{border:2px solid #000000}.action-overflow-btn{border-width:2px}}@media (prefers-reduced-motion: reduce){.action-btn,.action-overflow-btn,.action-overflow-menu,.action-overflow-item{transition:none}}.modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:10000;display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;visibility:hidden;transition:all .3s ease}.modal-backdrop--visible{opacity:1;visibility:visible}.modal{background:#fff;border-radius:12px;box-shadow:0 20px 40px #0000004d;max-width:90vw;max-height:90vh;width:100%;display:flex;flex-direction:column;overflow:hidden;transform:scale(.9) translateY(20px);transition:all .3s ease}.modal-backdrop--visible .modal{transform:scale(1) translateY(0)}.modal__header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--border, #dedee3);background:var(--surface, #f9f9f9)}.modal__title{margin:0 16px 0 0;font-size:20px;font-weight:600;color:var(--text, #121212);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.modal__close{background:none;border:none;font-size:24px;color:var(--muted, #999);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s ease}.modal__close:hover{background:var(--surface, #f9f9f9);color:var(--text, #121212)}.modal__body{padding:24px;overflow-y:auto;flex:1;min-height:0}.modal__footer{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid var(--border, #dedee3);background:var(--surface, #f9f9f9)}.modal--episode-guide{max-width:600px;width:100%}.episode-guide{display:flex;flex-direction:column;gap:20px}.episode-guide__seasons{display:flex;align-items:center;gap:12px}.episode-guide__seasons label{font-weight:600;color:var(--text, #121212);white-space:nowrap}.episode-guide__select{padding:8px 12px;border:1px solid var(--border, #dedee3);border-radius:6px;background:#fff;font-size:14px;color:var(--text, #121212);min-width:150px}.episode-guide__select:focus{outline:none;border-color:var(--primary, #e91e63);box-shadow:0 0 0 2px #e91e6333}.episode-guide__episodes{max-height:400px;overflow-y:auto;border:1px solid var(--border, #dedee3);border-radius:8px;background:#fff}.episode-guide__loading,.episode-guide__error,.episode-guide__empty{padding:40px 20px;text-align:center;color:var(--muted, #999);font-style:italic}.episode-guide__error{color:var(--danger, #f06292)}.episode-guide__episode{display:grid;grid-template-columns:80px 1fr 100px 60px 100px;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--border, #dedee3);transition:background-color .2s ease}.episode-guide__episode:last-child{border-bottom:none}.episode-guide__episode:hover{background:var(--surface, #f9f9f9)}.episode-guide__episode--watched{background:var(--success-light, #d4edda);border-left:4px solid var(--success, #51cf66)}.episode-guide__episode-number{font-weight:600;color:var(--primary, #e91e63);font-size:12px;text-align:center}.episode-guide__episode-title{font-weight:500;color:var(--text, #121212);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.episode-guide__episode-date{font-size:12px;color:var(--muted, #999);text-align:center}.episode-guide__episode-rating{font-size:12px;color:var(--accent, #ffd43b);font-weight:600;text-align:center}.episode-guide__episode-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:12px;color:var(--text, #121212)}.episode-guide__episode-checkbox input[type=checkbox]{width:16px;height:16px;accent-color:var(--primary, #e91e63)}.episode-guide__episode-label{font-weight:500}.modal--notes{max-width:500px;width:100%}.notes-modal{display:flex;flex-direction:column;gap:12px}.notes-modal__label{font-weight:600;color:var(--text, #121212);margin-bottom:4px}.notes-modal__textarea{width:100%;padding:12px;border:1px solid var(--border, #dedee3);border-radius:8px;font-size:14px;font-family:inherit;line-height:1.5;color:var(--text, #121212);background:#fff;resize:vertical;min-height:120px;max-height:300px}.notes-modal__textarea:focus{outline:none;border-color:var(--primary, #e91e63);box-shadow:0 0 0 2px #e91e6333}.notes-modal__char-count{text-align:right;font-size:12px;color:var(--muted, #999)}@media (max-width: 767px){.modal-backdrop{padding:10px}.modal{max-width:100%;max-height:95vh}.modal__header{padding:16px 20px}.modal__title{font-size:18px}.modal__body{padding:20px}.modal__footer{padding:16px 20px;flex-direction:column;gap:8px}.modal__footer .btn{width:100%}.episode-guide__episode{grid-template-columns:60px 1fr 80px 50px 80px;gap:8px;padding:10px 12px}.episode-guide__episode-number{font-size:11px}.episode-guide__episode-title{font-size:13px}.episode-guide__episode-date,.episode-guide__episode-rating,.episode-guide__episode-checkbox{font-size:11px}.episode-guide__episode-checkbox input[type=checkbox]{width:14px;height:14px}.notes-modal__textarea{font-size:16px}}.modal--loading .modal__body{display:flex;align-items:center;justify-content:center;min-height:200px}.modal--loading .modal__body:after{content:"";width:32px;height:32px;border:3px solid var(--border, #dedee3);border-top:3px solid var(--primary, #e91e63);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion: reduce){.modal-backdrop,.modal{transition:none}.modal-backdrop--visible .modal{transform:none}}@media (prefers-contrast: high){.modal{border:2px solid var(--text, #121212)}.modal__header{border-bottom-width:2px}.modal__footer{border-top-width:2px}.episode-guide__episode{border-bottom-width:2px}.episode-guide__episode--watched{border-left-width:6px}}.modal:focus{outline:none}.modal__close:focus{outline:2px solid var(--primary, #e91e63);outline-offset:2px}.modal--slide-up{transform:translateY(100%)}.modal-backdrop--visible .modal--slide-up{transform:translateY(0)}.modal--slide-down{transform:translateY(-100%)}.modal-backdrop--visible .modal--slide-down{transform:translateY(0)}.modal--fade-in{transform:scale(1);opacity:0}.modal-backdrop--visible .modal--fade-in{opacity:1}.community-content{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);grid-auto-rows:1fr;gap:20px;padding:12px;width:100%;align-items:stretch}.community-left{grid-row:1 / span 2;display:flex;width:100%;min-width:0}.community-right{display:grid;grid-template-rows:repeat(2,1fr);gap:16px;width:100%;min-width:0}#community-player{display:flex;width:100%;padding:0}#community-player .c-card{height:100%;width:100%;min-width:0;display:flex;flex-direction:column;border:1px solid #e5e7eb;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 1px 3px #0000000f;outline:none}#community-player .c-card:focus{box-shadow:0 0 0 3px #3b82f680}#community-player .c-card header{padding:12px}#community-player .c-card .title{font-size:1rem;font-weight:700;margin:0 0 4px}#community-player .c-card .subtitle{color:#6b7280;margin:0}#community-player .c-card .media img,#community-player .c-card .media video{display:block;width:100%;aspect-ratio:2 / 3;object-fit:cover}#community-player .c-card .body{padding:12px;font-size:.95rem;color:#111827}#community-player .c-card .poll .bar{position:relative;height:28px;margin:6px 0;background:#f3f4f6;border-radius:8px;overflow:hidden}#community-player .c-card .poll .bar .meter{position:absolute;left:0;top:0;bottom:0;background:#d1d5db}#community-player .c-card .poll .bar .label,#community-player .c-card .poll .bar .pct{position:relative;z-index:1;padding:0 8px;font-size:.85rem}#community-player .c-card footer{padding:12px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #f3f4f6}#community-player .c-card .byline{display:flex;align-items:center;gap:8px}#community-player .c-card .avatar{width:24px;height:24px;border-radius:9999px;background:#e5e7eb}#community-player .c-card .wm{font-size:.75rem;color:#6b7280;border:1px solid #e5e7eb;padding:2px 6px;border-radius:9999px}#community-player .c-card .actions .cta{display:inline-block;padding:6px 10px;border-radius:10px;border:1px solid #111827;text-decoration:none;font-weight:600}#community-player .c-card .actions .cta.disabled{border-color:#d1d5db;color:#9ca3af;cursor:not-allowed}#community-player .c-empty{padding:16px;color:#6b7280}#community-player .c-card[data-watermark]:before{content:attr(data-watermark);position:absolute;margin:8px;padding:4px 8px;font-size:.7rem;background:#111827;color:#fff;border-radius:9999px}.home-group .card,#community-player .c-card{background:var(--card, #fff);border:1px solid var(--border, #e5e7eb);border-radius:12px;box-shadow:var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, .06))}@media (max-width: 768px){.community-content{grid-template-columns:1fr;gap:16px}.community-left{order:1;grid-row:auto}.community-right{order:2}}#group-2-community{--comm-gap: 16px;--comm-sticky-top: var(--header-offset, 64px)}#group-2-community .community-content{display:grid;gap:var(--comm-gap)}@media (max-width: 959px){#group-2-community .community-content{grid-template-columns:1fr}}@media (min-width: 960px){#group-2-community .community-content{grid-template-columns:minmax(0,2fr) minmax(280px,1fr);align-items:start}}@media (min-width: 960px){#group-2-community .community-left{position:sticky;top:var(--comm-sticky-top)}}#group-2-community .community-feed .community-card{margin-bottom:var(--comm-gap)}#group-2-community .community-player .player-viewport{display:block;width:100%;border-radius:12px;overflow:hidden}#group-2-community .community-player .player-caption{margin-top:8px;font-size:.95rem;opacity:.9}#group-2-community .community-player .player-controls{display:flex;gap:8px;margin-top:8px}#group-2-community .community-player .player-controls button{padding:6px 10px;border-radius:8px;border:1px solid var(--border, #ddd);background:var(--card, #fff);cursor:pointer}#group-2-community .community-player .player-controls button:focus-visible{outline:2px solid var(--primary, #6b5bff);outline-offset:2px}:root{--bg: #ffffff;--text: #121212;--surface: #f6f7fb;--card: #ffffff;--border: #e6e8f0;--accent: #6c5ce7;--accent-2: #00b894;--link: #2962ff;--btn-text: #ffffff;--shadow: 0 6px 20px rgba(0, 0, 0, .08)}body{background:var(--bg);color:var(--text);transition:background-color .3s ease,color .3s ease}body[data-theme=dark]{--bg: #0e0f13;--text: #eef2ff;--surface: #141720;--card: #1a1f2b;--border: #2a3142;--accent: #7c83ff;--accent-2: #00d1a0;--link: #7aa2ff;--btn-text: #0e0f13;--shadow: 0 6px 24px rgba(0, 0, 0, .35)}body[data-theme=light]{--bg: #ffffff;--text: #121212;--surface: #f6f7fb;--card: #ffffff;--border: #e6e8f0;--accent: #6c5ce7;--accent-2: #00b894;--link: #2962ff;--btn-text: #ffffff;--shadow: 0 6px 20px rgba(0, 0, 0, .08)}body[data-theme=system].system-dark{--bg: #0e0f13;--text: #eef2ff;--surface: #141720;--card: #1a1f2b;--border: #2a3142;--accent: #7c83ff;--accent-2: #00d1a0;--link: #7aa2ff;--btn-text: #0e0f13;--shadow: 0 6px 24px rgba(0, 0, 0, .35)}body[data-mardi=on]{--accent: #6a00ff;--accent-2: #16a34a;--link: #b45309}.card{background:var(--card);box-shadow:var(--shadow);border:1px solid var(--border);transition:background-color .3s ease,border-color .3s ease,box-shadow .3s ease}.button{background:var(--accent);color:var(--btn-text);transition:background-color .3s ease,color .3s ease}.button.secondary{background:var(--accent-2)}a{color:var(--link);transition:color .3s ease}.modal[hidden]{display:none}.modal{position:fixed;top:0;right:0;bottom:0;left:0;background:#00000073;display:grid;place-items:center;z-index:99999;pointer-events:auto}.modal-content{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:12px;width:min(560px,90vw);max-height:85vh;overflow:auto;box-shadow:var(--shadow);padding:16px 20px;pointer-events:auto;position:relative;z-index:100000;display:block;visibility:visible}.modal-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}.modal-section{margin-bottom:24px}.modal-section h3{margin:0 0 16px;font-size:1.2rem;font-weight:600}.field-group{display:grid;gap:8px;margin:10px 0 16px}.field-group label{display:flex;align-items:center;gap:8px;cursor:pointer;padding:8px;border-radius:6px;transition:background-color .2s ease}.field-group label:hover{background:var(--surface)}.field-group input[type=radio]{margin:0;pointer-events:auto;cursor:pointer}.switch{display:flex!important;align-items:center;gap:10px;padding:8px;border-radius:6px;transition:background-color .2s ease;visibility:visible!important;opacity:1!important}.switch:hover{background:var(--surface)}.switch input[type=checkbox]{margin:0;pointer-events:auto;cursor:pointer;display:inline-block!important;visibility:visible!important;opacity:1!important;width:16px!important;height:16px!important}.icon-btn{background:transparent;border:none;color:inherit;cursor:pointer;font-size:18px;padding:8px;border-radius:4px;transition:background-color .2s ease;pointer-events:auto}.icon-btn:hover{background:var(--surface)}#btnSettings.fab-left{background:var(--accent)!important;color:var(--btn-text)!important;border-radius:50%!important;width:50px!important;height:50px!important;display:grid!important;place-items:center!important;font-size:18px!important;transition:all .2s ease!important}#btnSettings.fab-left:hover{background:var(--accent-2)!important;transform:scale(1.05)!important;box-shadow:0 6px 16px #0003!important}#btnSettings.fab-left:focus{outline:2px solid var(--accent)!important;outline-offset:2px!important}:root{--bg: #ffffff;--text: #121212;--primary: #e91e63;--card: #f7f7f9;--border: #dedee3;--success: #51cf66;--warning: #ffd43b;--danger: #f06292;--purple: #845ec2;--focus: #1a73e8;--surface: #f9f9f9;--bg-page: #ffffff;--bg-elevated: #f7f7f9;--fg: #1f2937;--fg-default: #1f2937;--fg-muted: #6b7280;--fg-subtle: #7f8c8d;--fg-on-elevated: #111827;--text-secondary: #666;--accent: #2563eb;--s-4: 1rem;--spacing-xs: 2px;--spacing-sm: 4px;--spacing-md: 8px;--spacing-lg: 16px;--spacing-xl: 24px;--spacing-2xl: 32px;--r-2: 8px;--r: 12px;--fs-0: 1rem;--shadow-1: 0 2px 4px rgba(0, 0, 0, .1);--card-w: 180px;--card-h: 270px;--home-card-width-desktop: 184px;--home-card-height-desktop: 276px;--home-card-width-mobile: 64px;--home-card-height-mobile: 96px;--tab-card-poster-width-desktop: 120px;--tab-card-poster-height-desktop: 180px;--tab-card-poster-width-mobile: 80px;--tab-card-poster-height-mobile: 120px;--poster-w: 180px;--poster-h: 270px;--poster-w-mobile: 64px;--poster-h-mobile: 96px;--card-gap: 16px;--card-gap-mobile: 12px;--card-pad-y: 12px;--card-pad-y-mobile: 8px;--card-pad-x: 16px;--card-pad-x-mobile: 12px;--meta-title-size: 14px;--meta-title-size-mobile: 12px;--meta-line: 1.2;--meta-line-mobile: 1.1;--badge-bg: #e91e63;--badge-color: white;--badge-font-size: 11px;--badge-padding: 2px 6px;--badge-border-radius: 10px;--badge-margin-left: 6px;--badge-font-weight: 600;--badge-min-width: 16px;--badge-line-height: 1.2;--badge-z-index: 1;--fab-size: 50px;--fab-gap: 10px;--fab-rail-height: 80px;--safe-top: 0px;--safe-bottom: 0px;--safe-left: 0px;--safe-right: 0px;--card-bg: #fff;--mardi1: #6a0dad;--mardi2: #28a745;--mardi3: #ffd43b}:root[data-theme=light]{--bg-page: #ffffff;--bg-elevated: #f7f7f9;--fg-default: #1f2937;--fg-muted: #6b7280;--fg-subtle: #7f8c8d;--fg-on-elevated: #111827;--border: #e5e7eb;--accent: #2563eb}:root[data-theme=dark]{--bg-page: #0b0f14;--bg-elevated: #111827;--fg-default: #e5e7eb;--fg-muted: #9ca3af;--fg-subtle: #9aa2a6;--fg-on-elevated: #f9fafb;--border: #243140;--accent: #60a5fa;--bg: #121212;--surface: #1e1e1e;--text: #f5f5f5;--primary: #0066ff;--shadow-1: 0 2px 4px rgba(0, 0, 0, .3)}:root[data-theme=mardi]{--bg-page: #0f1024;--bg-elevated: #17183a;--fg-default: #f2f2fb;--fg-muted: #c9caf2;--fg-subtle: #b3b7ff;--fg-on-elevated: #ffffff;--border: #31337a;--accent: #ffbf00}@media (prefers-color-scheme: dark){:root{--card-bg: #1e1f25}}@media (max-width: 768px){:root{--fab-size: 45px;--fab-rail-height: 70px;--poster-w: var(--poster-w-mobile);--poster-h: var(--poster-h-mobile);--card-gap: var(--card-gap-mobile);--card-pad-y: var(--card-pad-y-mobile);--card-pad-x: var(--card-pad-x-mobile);--meta-title-size: var(--meta-title-size-mobile);--meta-line: var(--meta-line-mobile)}}:root{--safe-top: env(safe-area-inset-top);--safe-bottom: env(safe-area-inset-bottom)}html,body{height:100%}body{min-height:100dvh;padding-top:var(--safe-top);padding-bottom:var(--safe-bottom);-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;overflow-x:hidden}.top-search{position:sticky;top:calc(var(--safe-top) + 0px);z-index:1000;background:inherit;margin:0;border-radius:0;box-shadow:none;padding:8px 12px}#desktop-search-row,.search-row{display:flex;flex-direction:row;gap:8px;align-items:center;flex-wrap:wrap}.search-input,.search-area-input,#search,#genreSelect,.search-area-genre{width:100%;min-height:44px;font-size:16px}.search-buttons-row,.search-area-search,.search-area-clear{display:flex;flex-direction:row;gap:8px;align-items:center}.search-buttons-row .btn,#searchBtn,#clearSearchBtn,.search-btn,.clear-search-btn{flex:0 0 auto;min-width:80px;min-height:44px;line-height:1.1}.genre-filter{flex:0 0 auto;min-width:60px;width:60px;min-height:44px;line-height:1.1}.search-buttons-row .btn+.btn{margin-top:0}button,.tab,.fab,.icon-btn,.settings-checkbox-label,.select,.search-btn{min-height:44px;min-width:44px}.tab,.group-title,.preview-row-title,h1,h2,h3,h4{word-break:normal;overflow-wrap:anywhere}.list-container,.home-section,.preview-row-scroll,#curatedSections{display:grid;grid-template-columns:1fr;gap:12px;overflow:hidden;content-visibility:auto;contain-intrinsic-size:1px 320px}@media (min-width: 390px){.list-container,.home-section{grid-template-columns:1fr 1fr}}.card img,.poster,.tile img,.row-inner img{aspect-ratio:2/3;height:auto;width:100%;object-fit:cover;display:block}@media (hover: none){.card:hover,.btn:hover{transform:none;filter:none}}main,.tab-section,#homeSection{scroll-padding-top:calc(var(--safe-top) + 64px)}.fab,.fab-left,.fab-stack{bottom:calc(16px + var(--safe-bottom))}.main-container,#appRoot,body,html{max-width:100%}body{min-height:100dvh;padding-top:env(safe-area-inset-top,0);padding-bottom:env(safe-area-inset-bottom,0)}@media (min-width: 769px){body{padding-top:0;padding-bottom:0}}main,.tab-section,#homeSection{scroll-padding-top:64px}@media (max-width: 768px){main,.tab-section,#homeSection{scroll-padding-top:calc(env(safe-area-inset-top,0) + 64px)}}@media (min-width: 769px){html,body{padding-top:0;padding-bottom:0}}header,.top-header,.header-bar{margin-top:0}.settings-error{color:#b91c1c;font-size:.85rem;margin-top:4px}@media (min-width: 769px){html,body,main,.app,.app-root,.page,.content,.container,.shell,#appRoot{padding-top:0;margin-top:0}header,.top-header,.header-bar,.app-header{margin-top:0}.tab-section:first-of-type{margin-top:20px}}.top-search{margin-top:0;padding-top:8px;padding-bottom:8px}.pro-locked{opacity:.6;cursor:not-allowed}:root{--tab-accent: #0ea5e9;--tab-text: #111827;--tab-muted: #6b7280;--tab-edge: #e5e7eb;--badge-bg: #f3f4f6}nav#navigation.tabs{display:flex;justify-content:center;gap:.25rem;padding:.25rem .5rem;border-bottom:1px solid var(--tab-edge);margin-top:0;position:static;top:auto;z-index:auto;height:auto;margin-bottom:0}nav#navigation.tabs:before,nav#navigation.tabs:after{content:""}nav#navigation.tabs .tab{display:inline-flex;align-items:center;gap:.5rem;padding:.45rem .8rem;border:1px solid var(--tab-edge);border-radius:.6rem;background:#fff;color:var(--tab-text);text-decoration:none;line-height:1;transition:background .15s ease,color .15s ease,border-color .15s ease,box-shadow .15s ease;cursor:pointer;visibility:visible;opacity:1;min-height:44px;min-width:auto}nav#navigation.tabs .tab:hover,nav#navigation.tabs .tab:focus-visible{border-color:#cbd5e1;box-shadow:0 0 0 3px #0ea5e926}nav#navigation.tabs .tab.is-active{background:var(--tab-accent);border-color:var(--tab-accent);color:#fff}nav#navigation.tabs .tab-label{white-space:nowrap;color:inherit;opacity:1;visibility:visible;display:inline}nav#navigation.tabs .badge{min-width:1.25rem;height:1.25rem;padding:0 .4rem;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;font-size:.72rem;font-weight:700;line-height:1;background:var(--badge-bg);color:var(--tab-muted);border:1px solid var(--tab-edge)}nav#navigation.tabs .tab.is-active .badge{background:#ffffff2e;border-color:#ffffff59;color:#fff}nav#navigation.tabs .tab.is-active .tab-label{color:#fff;opacity:1;visibility:visible;display:inline}.dark-mode nav#navigation.tabs .tab{background:#fff;color:var(--tab-text)}.dark-mode nav#navigation.tabs .tab:hover{background:#fff;color:var(--tab-text)}.dark-mode nav#navigation.tabs .tab.is-active{background:var(--tab-accent);color:#fff}@media (max-width: 480px){nav#navigation.tabs .tab{padding:.4rem .6rem}nav#navigation.tabs .tab-label{font-size:.95rem}}.card.v2{position:relative;border-radius:14px;box-shadow:0 6px 24px #00000059;transition:transform .2s ease;margin-bottom:16px}.card.v2:hover{transform:translateY(-2px)}.card.v2{background:var(--surface, #171a21);border:1px solid var(--border, #242a33);color:var(--fg, #e6eaf0)}.light-mode .card.v2{background:var(--surface, #ffffff);border:1px solid var(--border, #e5e7eb);color:var(--fg, #1f2937);box-shadow:0 6px 24px #0000001a}.card.v2.v2-home-cw,.card.v2.v2-home-nextup,.card.v2.v2-home-curated{display:flex!important;flex-direction:column!important;align-items:center;padding:12px;min-width:200px;max-width:200px}.card.v2.v2-tab-card,.card.v2.v2-tab-card.card,.card.v2.v2-tab-card.card.card,body .card.v2.v2-tab-card,html body .card.v2.v2-tab-card,html body .card.v2.v2-tab-card.card,html body .card.v2.v2-tab-card.card.card,html body .card.v2.v2-tab-card.card.card.card{display:flex!important;flex-direction:row!important;padding:16px;gap:16px}.card.v2.v2-search-card,.card.v2.v2-search-card.card,.card.v2.v2-search-card.card.card,body .card.v2.v2-search-card,html body .card.v2.v2-search-card,html body .card.v2.v2-search-card.card,html body .card.v2.v2-search-card.card.card,html body .card.v2.v2-search-card.card.card.card{display:flex!important;flex-direction:row!important;padding:14px 16px;gap:16px}.card.v2.v2-tab-card,.card.v2.v2-search-card,.card.v2[class*=v2-tab],.card.v2[class*=v2-search]{display:flex!important;flex-direction:row!important}.list-container:has(.card.v2){display:flex!important;flex-direction:column!important;gap:16px!important;overflow-x:visible!important;overflow-y:visible!important}.card.v2 .poster-wrap{aspect-ratio:2/3;background:var(--muted-bg, #0b0d12);border-radius:10px;overflow:hidden;position:relative}.light-mode .card.v2 .poster-wrap{background:var(--muted-bg, #f3f4f6)}.card.v2.v2-home-cw .poster-wrap,.card.v2.v2-home-nextup .poster-wrap,.card.v2.v2-home-curated .poster-wrap{width:100%;margin-bottom:8px}.card.v2.v2-tab-card .poster-wrap{flex:0 0 160px!important;width:160px!important;height:240px!important}.card.v2.v2-search-card .poster-wrap{flex:0 0 120px!important;width:120px!important;height:180px!important}.card.v2 .poster-wrap img{width:100%;height:100%;object-fit:cover}.card.v2 .card-content{flex:1 1 auto;min-width:0;display:flex;flex-direction:column;gap:8px}.card.v2.v2-home-cw .card-content,.card.v2.v2-home-nextup .card-content,.card.v2.v2-home-curated .card-content{text-align:center;width:100%}.card.v2.v2-tab-card .card-content,.card.v2.v2-search-card .card-content{text-align:left;justify-content:flex-start;align-items:flex-start}.card.v2 .title{font-weight:700;font-size:16px;color:var(--fg, #e6eaf0);margin:0;line-height:1.2}.light-mode .card.v2 .title{color:var(--fg, #1f2937)}.card.v2 .meta{color:var(--fg-muted, #a9b3c1);font-size:12px;margin:0}.light-mode .card.v2 .meta{color:var(--fg-muted, #6b7280)}.card.v2 .next-air,.card.v2 .where-to-watch{color:var(--accent, #4da3ff);font-size:12px;text-align:center}.card.v2 .curator-blurb{color:var(--fg-muted, #a9b3c1);font-size:12px;text-align:center;max-height:3.2em;overflow:hidden;margin-bottom:8px}.light-mode .card.v2 .curator-blurb{color:var(--fg-muted, #6b7280)}.card.v2 .actions{margin-top:auto;display:flex;flex-direction:column;gap:6px}.card.v2.v2-tab-card .actions,.card.v2.v2-search-card .actions{align-items:flex-start!important;justify-content:flex-start!important;text-align:left!important}.card.v2.v2-tab-card .card-content,.card.v2.v2-search-card .card-content{text-align:left!important;justify-content:flex-start!important;align-items:flex-start!important}.card.v2.v2-tab-card .free-actions,.card.v2.v2-search-card .free-actions,.card.v2.v2-tab-card .pro-actions,.card.v2.v2-search-card .pro-actions{justify-content:flex-start!important;align-items:flex-start!important}.card.v2 .free-actions{display:flex;flex-wrap:wrap;gap:8px;padding:8px;border-radius:8px;border:1px dashed var(--border, #242a33)}.card.v2 .pro-actions{display:flex;flex-wrap:wrap;gap:8px;padding:8px;border-radius:8px;border:1px dashed var(--pro, #f0b90b)}.card.v2 .action-grid-2x2{display:grid;grid-template-columns:1fr 1fr;gap:8px;width:100%}.card.v2 .action-row{display:grid;grid-template-columns:1fr 1fr;gap:8px}.card.v2 .btn{background:var(--btn-bg, #232a34);color:var(--fg, #e6eaf0);border:1px solid var(--border, #242a33);padding:6px 8px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .2s ease}.card.v2 .btn:hover{background:var(--btn-hover, #2a3441);transform:translateY(-1px)}.light-mode .card.v2 .btn{background:var(--btn-bg, #f3f4f6);color:var(--fg, #1f2937);border:1px solid var(--border, #e5e7eb)}.light-mode .card.v2 .btn:hover{background:var(--btn-hover, #e5e7eb)}.card.v2 .btn--pro-outline{border-color:var(--pro, #f0b90b);color:var(--pro, #f0b90b);background:transparent}.card.v2 .btn--pro-outline:hover{background:var(--pro, #f0b90b);color:var(--fg, #1f2937)}.card.v2 .delete-btn{position:absolute;top:8px;right:8px;background:#802626;color:#fff;border:none;padding:4px 8px;border-radius:6px;cursor:pointer;font-size:11px}.card.v2 .delete-btn:hover{background:#a03030}.card.v2 .drag-handle{position:absolute;top:50%;right:0;transform:translateY(-50%);cursor:grab;font-size:18px;color:var(--fg-muted, #a9b3c1);padding:4px}.card.v2 .drag-handle:hover{color:var(--fg, #e6eaf0)}.light-mode .card.v2 .drag-handle{color:var(--fg-muted, #6b7280)}.light-mode .card.v2 .drag-handle:hover{color:var(--fg, #1f2937)}.card.v2 .user-rating{display:flex;align-items:center;gap:4px;margin:6px 0}.card.v2 .user-rating .star{font-size:20px;color:var(--accent, #4da3ff);cursor:pointer;transition:color .2s ease}.card.v2 .user-rating .star.filled{color:var(--accent, #4da3ff)}.card.v2 .user-rating .star:hover{color:var(--accent-hover, #66b3ff)}.card.v2 .user-rating .rating-label{color:var(--fg-muted, #a9b3c1);font-size:12px;margin-left:4px}.light-mode .card.v2 .user-rating .rating-label{color:var(--fg-muted, #6b7280)}.card.v2 .status-badges{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:6px}.card.v2 .badge{border:1px solid var(--border, #242a33);border-radius:6px;padding:2px 6px;font-size:11px;color:var(--fg-muted, #a9b3c1)}.light-mode .card.v2 .badge{border-color:var(--border, #e5e7eb);color:var(--fg-muted, #6b7280)}.card.v2 .badge.pro{border-color:var(--pro, #f0b90b);color:var(--pro, #f0b90b)}.search-card.v2 .date,.cw-card.v2 .date,.curated-card.v2 .date{color:#a9b3c1;font-size:12px;margin:0}.light-mode .search-card.v2 .date,.light-mode .cw-card.v2 .date,.light-mode .curated-card.v2 .date{color:#6b7280}.search-card.v2 .actions,.cw-card.v2 .actions,.curated-card.v2 .actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}.search-card.v2 .actions button,.cw-card.v2 .actions button,.curated-card.v2 .actions button{background:#232a34;color:#e6eaf0;border:1px solid #242a33;padding:6px 10px;border-radius:8px;font-size:12px;cursor:pointer;transition:background .15s ease}.light-mode .search-card.v2 .actions button,.light-mode .cw-card.v2 .actions button,.light-mode .curated-card.v2 .actions button{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.search-card.v2 .actions button:hover:not([disabled]),.cw-card.v2 .actions button:hover:not([disabled]),.curated-card.v2 .actions button:hover:not([disabled]){background:#2a3441}.light-mode .search-card.v2 .actions button:hover:not([disabled]),.light-mode .cw-card.v2 .actions button:hover:not([disabled]),.light-mode .curated-card.v2 .actions button:hover:not([disabled]){background:#e5e7eb}.search-card.v2 .actions button[disabled],.cw-card.v2 .actions button[disabled],.curated-card.v2 .actions button[disabled]{opacity:.5;cursor:not-allowed}.cw-card.v2.preview-variant{max-width:300px;margin-bottom:12px}.cw-card.v2.preview-variant .poster-wrap{flex:0 0 80px;aspect-ratio:2/3}.cw-card.v2.preview-variant .actions{margin-top:8px}.cw-card.v2.preview-variant .actions .preview-action{font-size:10px;padding:4px 8px;margin:2px}.media-grid{display:grid;grid-template-columns:1fr;gap:16px}.list-container:has(.media-card){display:grid;grid-template-columns:1fr;gap:16px}.media-card{display:flex;flex-direction:row;background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:12px;box-shadow:0 2px 8px #0000000f;transition:box-shadow .15s ease,transform .15s ease;gap:16px}.media-card:hover{transform:translateY(-1px);box-shadow:0 6px 18px #00000014}.poster{width:180px;flex:0 0 180px;aspect-ratio:2/3;border-radius:10px;object-fit:cover;background:#f3f4f6}.card-body{flex:1 1 auto;min-width:0;display:flex;flex-direction:column}.title{margin-top:0;font-weight:600;font-size:16px;line-height:1.25;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.description{margin-top:8px;font-size:14px;color:#6b7280;line-height:1.4;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.sub{margin-top:6px;color:#6b7280;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pill{font-size:12px;padding:2px 8px;border-radius:999px;background:#f3f4f6;border:1px solid #e5e7eb;color:#374151}.meta{display:flex;gap:6px;align-items:center;margin-top:8px;flex-wrap:wrap}.rating{margin-top:8px;display:inline-flex;gap:2px}.star{width:20px;height:20px;border:none;background:none;padding:0;cursor:pointer}.star svg{width:100%;height:100%}.star[data-active=true] path{fill:#f59e0b}.star[data-active=false] path{fill:#e5e7eb}.actions{margin-top:auto;display:flex;flex-direction:row;align-items:center;gap:8px;flex-wrap:wrap}.btn{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;font-size:13px;color:#111827}.btn:hover{border-color:#cbd5e1}.btn.locked{color:#9ca3af;border-style:dashed;cursor:not-allowed;position:relative}.btn.locked .icon{opacity:.6}.btn.locked:hover:after{content:"Pro feature";position:absolute;bottom:100%;left:0;transform:translateY(-6px);background:#111827;color:#fff;font-size:12px;padding:4px 6px;border-radius:6px;white-space:nowrap}.btn[data-action=delete-item]{border-color:#fca5a5}.btn[data-action=delete-item]:hover{background:#fee2e2;border-color:#ef4444}.hint{margin-top:8px;font-size:12px;color:#9ca3af}@media (max-width: 640px){.media-grid{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}.media-card{flex-direction:column}.poster{width:100%;flex:0 0 auto}.title{font-size:15px}.actions{gap:6px;flex-wrap:wrap}.btn{padding:6px;font-size:12px}.btn .label{display:none}}.cw-card.v2.vertical,.curated-card.v2.vertical,.next-up-card.v2.vertical{display:flex;flex-direction:column;align-items:center;min-width:200px;max-width:200px;min-height:auto;padding:12px}.next-up-card.v2.vertical,.curated-card.v2.vertical{min-width:220px;max-width:220px}.search-card.v2.horizontal,.cw-card.v2.horizontal,.curated-card.v2.horizontal{display:flex;flex-direction:row;min-height:120px;gap:16px}.cw-card.v2.horizontal .poster-wrap{flex:0 0 160px}.search-card.v2.horizontal .poster-wrap{flex:0 0 120px}.card-content{flex:1 1 auto;min-width:0;display:flex;flex-direction:column;gap:8px}.cw-card.v2.vertical .card-content,.curated-card.v2.vertical .card-content,.next-up-card.v2.vertical .card-content{width:100%;text-align:center}.meta{color:#a9b3c1;font-size:12px;margin:0}.light-mode .meta{color:#6b7280}.next-air{color:#4da3ff;font-size:12px;text-align:center;margin-top:4px}.where-to-watch{color:#4da3ff;font-size:12px;margin:4px 0 6px;text-align:center}.curator-blurb{color:#a9b3c1;font-size:12px;text-align:center;max-height:3.2em;overflow:hidden;margin-bottom:8px;line-height:1.4}.light-mode .curator-blurb{color:#6b7280}.overview{color:#a9b3c1;font-size:13px;margin:6px 0 10px;max-height:3.2em;overflow:hidden;line-height:1.4}.light-mode .overview{color:#6b7280}.status-badges{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:6px}.badge{border:1px solid #242a33;border-radius:6px;padding:2px 6px;font-size:11px;color:#a9b3c1}.badge.new{background:#10b981;color:#fff;border-color:#10b981}.badge.trending{background:#f59e0b;color:#fff;border-color:#f59e0b}.badge.returning{background:#3b82f6;color:#fff;border-color:#3b82f6}.badge.ended{background:#6b7280;color:#fff;border-color:#6b7280}.badge.cancelled{background:#ef4444;color:#fff;border-color:#ef4444}.light-mode .badge{border-color:#d1d5db;color:#6b7280}.user-rating{display:flex;align-items:center;gap:4px;margin:6px 0}.user-rating .star{font-size:20px;color:#4da3ff;cursor:pointer;transition:color .2s ease}.user-rating .star.filled{color:#fbbf24}.user-rating .star:hover{color:#f59e0b}.user-rating .rating-label{font-size:12px;color:#a9b3c1;margin-left:4px}.light-mode .user-rating .rating-label{color:#6b7280}.progress-summary{color:#a9b3c1;font-size:12px;margin:6px 0}.light-mode .progress-summary{color:#6b7280}.action-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px;width:100%}.action-row{display:flex;gap:8px}.pro-actions{display:flex;flex-wrap:wrap;gap:8px;padding:8px;border-radius:8px;border:1px dashed #f0b90b;margin-top:6px}.pro-actions button{background:transparent;color:#f0b90b;border:1px solid #f0b90b}.pro-actions button:hover{background:#f0b90b1a}.delete-btn{position:absolute;top:8px;right:8px;background:#802626;color:#fff;border:none;padding:4px 8px;border-radius:6px;cursor:pointer;font-size:11px;transition:background .2s ease}.delete-btn:hover{background:#991b1b}.drag-handle{position:absolute;top:50%;right:0;transform:translateY(-50%);cursor:grab;font-size:18px;color:#a9b3c1;padding:4px;-webkit-user-select:none;user-select:none}.drag-handle:hover{color:#e6eaf0}.light-mode .drag-handle{color:#6b7280}.light-mode .drag-handle:hover{color:#374151}.poster-wrap a{display:block;width:100%;height:100%;text-decoration:none}.poster-wrap a:hover{opacity:.9}@media (max-width: 640px){.cw-card.v2.vertical,.curated-card.v2.vertical,.next-up-card.v2.vertical{min-width:180px;max-width:180px}.next-up-card.v2.vertical,.curated-card.v2.vertical{min-width:200px;max-width:200px}.action-grid,.action-row{gap:6px}}

```

## ios\App\App\public\assets\index-98a38141.css
```
.flickword-game{display:flex;flex-direction:column;gap:16px;padding:24px;max-width:450px;margin:0 auto}.fw-header{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.fw-header h3{font-size:18px;font-weight:700;color:var(--text, #ffffff);margin:0}.fw-stats{display:flex;gap:12px;font-size:12px;color:var(--muted, #888888)}.fw-streak,.fw-timer{font-weight:500}.fw-loading{display:flex;flex-direction:column;align-items:center;gap:16px;padding:32px 0}.fw-spinner{width:32px;height:32px;border:3px solid var(--line, #333333);border-top:3px solid var(--accent, #007AFF);border-radius:50%;animation:spin 1s linear infinite}.fw-loading p{color:var(--muted, #888888);font-size:14px;margin:0}.fw-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:4px;max-width:350px;margin:0 auto}.fw-tile{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;border:2px solid var(--line, #333333);border-radius:6px;background-color:var(--card, #1a1a1a);color:var(--text, #ffffff);transition:all .2s ease;min-height:50px;min-width:50px}.fw-tile.correct{background-color:#6aaa64;border-color:#6aaa64;color:#fff}.fw-tile.present{background-color:#c9b458;border-color:#c9b458;color:#fff}.fw-tile.absent{background-color:#787c7e;border-color:#787c7e;color:#fff}.fw-keyboard{display:flex;flex-direction:column;gap:6px;max-width:400px;margin:0 auto}.fw-kb-row{display:flex;gap:4px;justify-content:center}.fw-key{min-width:36px;height:48px;padding:0 8px;font-size:16px;font-weight:700;border:none;border-radius:6px;background-color:var(--btn, #333333);color:var(--text, #ffffff);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.fw-key:hover{background-color:var(--btn-hover, #444444)}.fw-key:active{transform:scale(.95)}.fw-key.correct{background-color:#6aaa64;color:#fff}.fw-key.present{background-color:#c9b458;color:#fff}.fw-key.absent{background-color:#787c7e;color:#fff}.fw-key-back,.fw-key-enter{min-width:60px;font-size:14px}.fw-actions{display:flex;gap:12px;justify-content:center;margin-top:16px}.fw-btn{padding:8px 16px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease}.fw-btn.fw-new-game{background-color:var(--accent, #007AFF);color:#fff}.fw-btn.fw-new-game:hover{background-color:var(--accent-hover, #0056CC)}.fw-btn.fw-close{background-color:var(--btn, #333333);color:var(--text, #ffffff)}.fw-btn.fw-close:hover{background-color:var(--btn-hover, #444444)}.fw-notification{position:fixed;top:20px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:8px;font-size:14px;font-weight:500;z-index:var(--z-nav);animation:notification-slide-in .3s ease-out}.fw-notification.success{background-color:#6aaa64;color:#fff}.fw-notification.error{background-color:#e74c3c;color:#fff}.fw-notification.info{background-color:var(--accent, #007AFF);color:#fff}@keyframes notification-slide-in{0%{opacity:0;transform:translate(-50%) translateY(-20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.fw-word-info{background-color:var(--card, #1a1a1a);border:1px solid var(--line, #333333);border-radius:8px;padding:12px;margin-bottom:16px}.fw-word-info p{margin:0;font-size:14px;color:var(--text, #ffffff)}.fw-word-info strong{color:var(--accent, #007AFF)}.game-stats-view{display:flex;flex-direction:column;gap:16px;padding:16px 0}.stats-actions{display:flex;gap:12px;justify-content:center}.btn-primary{padding:8px 16px;background-color:var(--accent, #007AFF);color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-primary:hover{background-color:var(--accent-hover, #0056CC)}.btn-secondary{padding:8px 16px;background-color:var(--btn, #333333);color:var(--text, #ffffff);border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-secondary:hover{background-color:var(--btn-hover, #444444)}@media (max-width: 480px){.flickword-game{max-width:400px;padding:20px}.fw-grid{max-width:320px;gap:3px}.fw-tile{font-size:22px;min-height:45px;min-width:45px}.fw-keyboard{max-width:360px}.fw-key{min-width:32px;height:42px;font-size:14px}.fw-key-back,.fw-key-enter{min-width:50px;font-size:12px}}@media (max-width: 320px){.fw-grid{max-width:280px;gap:2px}.fw-tile{font-size:20px;min-height:40px;min-width:40px}.fw-keyboard{max-width:300px}.fw-key{min-width:28px;height:38px;font-size:12px}.fw-key-back,.fw-key-enter{min-width:45px;font-size:11px}}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.-right-2{right:-.5rem}.-top-1{top:-.25rem}.-top-12{top:-3rem}.-top-2{top:-.5rem}.bottom-0{bottom:0}.bottom-20{bottom:5rem}.bottom-4{bottom:1rem}.left-0{left:0}.left-1\/2{left:50%}.left-4{left:1rem}.right-0{right:0}.right-1{right:.25rem}.right-1\.5{right:.375rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\.5{top:.375rem}.top-1\/4{top:25%}.top-2{top:.5rem}.top-4{top:1rem}.top-\[var\(--safe-top\,0px\)\]{top:var(--safe-top,0px)}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.ml-7{margin-left:1.75rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mt-0{margin-top:0}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-auto{margin-top:auto}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.line-clamp-3{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.aspect-\[16\/6\]{aspect-ratio:16/6}.aspect-\[2\/3\]{aspect-ratio:2/3}.aspect-video{aspect-ratio:16 / 9}.h-0\.5{height:.125rem}.h-1{height:.25rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-28{height:7rem}.h-3{height:.75rem}.h-32{height:8rem}.h-36{height:9rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\[231px\]{height:231px}.h-\[40px\]{height:40px}.h-\[80vh\]{height:80vh}.h-\[calc\(90vh-120px\)\]{height:calc(90vh - 120px)}.h-full{height:100%}.max-h-12{max-height:3rem}.max-h-16{max-height:4rem}.max-h-48{max-height:12rem}.max-h-60{max-height:15rem}.max-h-64{max-height:16rem}.max-h-72{max-height:18rem}.max-h-80{max-height:20rem}.max-h-96{max-height:24rem}.max-h-\[70vh\]{max-height:70vh}.max-h-\[75vh\]{max-height:75vh}.max-h-\[80svh\]{max-height:80svh}.max-h-\[90vh\]{max-height:90vh}.max-h-\[calc\(90vh-120px\)\]{max-height:calc(90vh - 120px)}.max-h-\[calc\(90vh-200px\)\]{max-height:calc(90vh - 200px)}.min-h-\[200px\]{min-height:200px}.min-h-\[60px\]{min-height:60px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-\[154px\]{width:154px}.w-\[200px\]{width:200px}.w-\[68px\]{width:68px}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[16px\]{min-width:16px}.min-w-\[240px\]{min-width:240px}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-\[420px\]{max-width:420px}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-screen-2xl{max-width:1536px}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-2{--tw-translate-y: -.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-6{--tw-translate-x: 1.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0\.5{--tw-translate-y: .125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-1{--tw-rotate: 1deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes ping{75%,to{transform:scale(2);opacity:0}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-wait{cursor:wait}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.snap-x{scroll-snap-type:x var(--tw-scroll-snap-strictness)}.snap-mandatory{--tw-scroll-snap-strictness: mandatory}.snap-start{scroll-snap-align:start}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-\[repeat\(auto-fill\,154px\)\]{grid-template-columns:repeat(auto-fill,154px)}.grid-cols-\[repeat\(auto-fill\,minmax\(154px\,1fr\)\)\]{grid-template-columns:repeat(auto-fill,minmax(154px,1fr))}.grid-rows-\[1fr_1fr\]{grid-template-rows:1fr 1fr}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-around{justify-content:space-around}.justify-items-center{justify-items:center}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.text-balance{text-wrap:balance}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:16px}.rounded-md{border-radius:12px}.rounded-xl{border-radius:.75rem}.rounded-b-2xl{border-bottom-right-radius:1rem;border-bottom-left-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-\[var\(--line\)\]{border-color:var(--line)}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-current{border-color:currentColor}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-green-700{--tw-border-opacity: 1;border-color:rgb(21 128 61 / var(--tw-border-opacity, 1))}.border-line{border-color:var(--line)}.border-neutral-600{--tw-border-opacity: 1;border-color:rgb(82 82 82 / var(--tw-border-opacity, 1))}.border-neutral-700{--tw-border-opacity: 1;border-color:rgb(64 64 64 / var(--tw-border-opacity, 1))}.border-neutral-700\/60{border-color:#40404099}.border-neutral-800\/50{border-color:#26262680}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white\/10{border-color:#ffffff1a}.border-white\/15{border-color:#ffffff26}.border-white\/5{border-color:#ffffff0d}.border-yellow-200{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.bg-\[var\(--btn\)\]{background-color:var(--btn)}.bg-accent{background-color:var(--accent)}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/60{background-color:#0009}.bg-black\/85{background-color:#000000d9}.bg-black\/90{background-color:#000000e6}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\/30{background-color:#3b82f64d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-900\/40{background-color:#1e3a8a66}.bg-card{background-color:var(--card)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:var(--muted)}.bg-neutral-600{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.bg-neutral-800\/40{background-color:#26262666}.bg-neutral-800\/80{background-color:#262626cc}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.bg-neutral-900\/70{background-color:#171717b3}.bg-neutral-900\/80{background-color:#171717cc}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity, 1))}.bg-neutral-950\/50{background-color:#0a0a0a80}.bg-neutral-950\/80{background-color:#0a0a0acc}.bg-pink-500{--tw-bg-opacity: 1;background-color:rgb(236 72 153 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity: .5}.bg-opacity-75{--tw-bg-opacity: .75}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.from-black{--tw-gradient-from: #000 var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-fuchsia-500{--tw-gradient-from: #d946ef var(--tw-gradient-from-position);--tw-gradient-to: rgb(217 70 239 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-black\/40{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(0 0 0 / .4) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #ec4899 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-amber-400{--tw-gradient-to: #fbbf24 var(--tw-gradient-to-position)}.to-black\/0{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:.25rem}.p-1\.5{padding:.375rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-0\.5{padding-left:.125rem;padding-right:.125rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-20{padding-bottom:5rem}.pb-4{padding-bottom:1rem}.pl-6{padding-left:1.5rem}.pr-12{padding-right:3rem}.pr-6{padding-right:1.5rem}.pr-\[100vw\]{padding-right:100vw}.pt-16{padding-top:4rem}.pt-2{padding-top:.5rem}.pt-24{padding-top:6rem}.pt-32{padding-top:8rem}.pt-4{padding-top:1rem}.pt-48{padding-top:12rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[length\:var\(--font-sm\,11px\)\]{font-size:var(--font-sm,11px)}.text-\[length\:var\(--font-sm\,12px\)\]{font-size:var(--font-sm,12px)}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-\[1\.05\]{line-height:1.05}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-wide{letter-spacing:.025em}.text-\[var\(--text\)\]{color:var(--text)}.text-accent{color:var(--accent)}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-neutral-100{--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1))}.text-neutral-200{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity, 1))}.text-neutral-300{--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.text-neutral-400{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity: 1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-red-900{--tw-text-opacity: 1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow-\[0_0_20px_rgba\(0\,0\,0\,0\.5\)\]{--tw-shadow: 0 0 20px rgba(0,0,0,.5);--tw-shadow-colored: 0 0 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity, 1))}.ring-blue-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.ring-opacity-50{--tw-ring-opacity: .5}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\[0_1px_0_rgba\(255\,255\,255\,0\.35\)\]{--tw-drop-shadow: drop-shadow(0 1px 0 rgba(255,255,255,.35));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[transform\,box-shadow\,background-color\]{transition-property:transform,box-shadow,background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-700{transition-duration:.7s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.\[text-wrap\:balance\]{text-wrap:balance}:root{--safe-top: env(safe-area-inset-top, 0px)}:root{color-scheme:dark;--bg: #0f1115;--card: #171a21;--muted: #a9b3c1;--text: #e6eaf0;--line: #242a33;--accent: #4da3ff;--btn: #232a34;--btn2: #1c222b;--shadow: 0 6px 24px rgba(0,0,0,.35)}[data-theme=light]{color-scheme:light;--bg: #ffffff;--card: #f8fafc;--muted: #64748b;--text: #1e293b;--line: #e2e8f0;--accent: #3b82f6;--btn: #f1f5f9;--btn2: #e2e8f0;--shadow: 0 6px 24px rgba(0,0,0,.1)}html,body,#root{height:100%;background:var(--bg);color:var(--text);transition:background-color .3s ease,color .3s ease}:root{--mobile-nav-height: 80px}@media (max-width: 1024px){html{height:100lvh;overflow:hidden}body{height:100lvh;margin:0;padding:0;overflow-y:auto;overflow-x:hidden}main{min-height:calc(100lvh - var(--mobile-nav-height));padding-bottom:var(--mobile-nav-height)}.mobile-nav{position:fixed;bottom:0;left:0;right:0;z-index:var(--z-nav);max-height:100lvh;display:flex;visibility:visible;opacity:1;transform:translateZ(0);-webkit-backface-visibility:hidden}}.poster-2x3{aspect-ratio:2 / 3}[data-cards]::-webkit-scrollbar{height:8px}[data-cards]::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:9999px}button:focus-visible{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}.btn{border-radius:.75rem;--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1));padding:.375rem .75rem;font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transition-timing-function:cubic-bezier(0,0,.2,1)}.btn:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1));--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.btn:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input:focus-visible{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}.game-modal{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--z-modal);display:flex;align-items:center;justify-content:center;padding:20px}.gm-dialog{position:fixed;background:var(--card, #171a21);border-radius:16px;box-shadow:0 20px 40px #0000004d;width:min(90vw,500px);max-width:500px;max-height:90vh;overflow:hidden;animation:modalFadeIn .3s ease-out;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column}.gm-draggable{transition:transform .1s ease-out}.gm-draggable:not(.gm-dragging){transition:transform .2s ease-out}.gm-drag-handle{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.gm-drag-handle:active{cursor:grabbing}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.gm-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--line, #242a33);background:var(--bg, #0f1115)}.gm-header h3{margin:0;font-size:1.25rem;font-weight:700;color:var(--text, #e6eaf0)}.gm-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--muted, #a9b3c1);padding:4px;border-radius:4px;transition:all .2s ease}.gm-close:hover{background:var(--line, #242a33);color:var(--text, #e6eaf0)}.gm-body{padding:16px;overflow:auto;display:flex;flex-direction:column;flex:1;min-height:0}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px}.stat-item{display:flex;flex-direction:column;align-items:center;padding:8px;background:var(--bg, #0f1115);border-radius:8px;border:1px solid var(--line, #242a33)}.stat-label{font-size:.75rem;font-weight:600;color:var(--muted, #a9b3c1);text-transform:uppercase;letter-spacing:.05em;margin-bottom:4px}.stat-value{font-size:1.25rem;font-weight:700;color:var(--text, #e6eaf0)}.game-stats-view{text-align:center}.stats-actions{display:flex;gap:12px;justify-content:center;margin-top:24px}.btn-primary{padding:12px 24px;background:linear-gradient(135deg,var(--accent, #4da3ff),#3b82f6);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .15s ease-out}.btn-primary:hover{transform:scale(1.05);box-shadow:0 4px 12px #4da3ff4d}.btn-primary:active{transform:scale(.95);box-shadow:inset 0 2px 4px #0003}.btn-secondary{padding:12px 24px;background:var(--card, #171a21);color:var(--text, #e6eaf0);border:1px solid var(--line, #242a33);border-radius:8px;font-weight:600;cursor:pointer;transition:all .15s ease-out}.btn-secondary:hover{background:var(--line, #242a33);transform:scale(1.05);box-shadow:0 2px 8px #0003}.btn-secondary:active{transform:scale(.95);box-shadow:inset 0 2px 4px #0003}.youtube-player-container{width:100%;display:flex;flex-direction:column;background:var(--card, #171a21);border-radius:12px;overflow:hidden}.control-btn{background:transparent;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;color:var(--text, #e6eaf0);font-size:.875rem;display:flex;align-items:center;justify-content:center}.rotation-active{color:var(--accent, #4da3ff)!important;font-weight:600}.rotation-inactive{color:var(--muted, #a9b3c1)}.player-loading{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--card, #171a21);color:var(--text, #e6eaf0)}.loading-spinner{width:40px;height:40px;border:3px solid var(--line, #242a33);border-top:3px solid var(--accent, #4da3ff);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.youtube-player{width:100%;height:100%}.youtube-player-error{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--card, #171a21);border-radius:12px}.error-content{text-align:center;color:var(--text, #e6eaf0)}.error-content h3{margin:0 0 12px;font-size:1.125rem;font-weight:700}.error-content p{margin:0 0 16px;color:var(--muted, #a9b3c1)}.retry-btn{background:var(--accent, #4da3ff);color:#fff;border:none;border-radius:8px;padding:10px 20px;font-weight:600;cursor:pointer;transition:all .2s ease}.retry-btn:hover{background:#3b82f6;transform:translateY(-1px)}.trivia-game{width:100%;height:100%;display:flex;flex-direction:column;padding:16px;background:transparent}.trivia-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--text, #e6eaf0)}.trivia-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-shrink:0}.trivia-header h3{margin:0;font-size:1.125rem;font-weight:700;color:var(--text, #e6eaf0)}.trivia-progress{display:flex;align-items:center;gap:12px;font-size:.875rem;color:var(--muted, #a9b3c1)}.progress-bar{width:100px;height:6px;background:var(--line, #242a33);border-radius:3px;overflow:hidden}.progress-fill{height:100%;background:var(--accent, #4da3ff);transition:width .3s ease}.trivia-question{margin-bottom:24px;flex-shrink:0}.question-meta{display:flex;gap:12px;margin-bottom:12px}.category,.difficulty{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.category{background:var(--accent, #4da3ff);color:#fff}.difficulty{background:var(--line, #242a33);color:var(--muted, #a9b3c1)}.trivia-question h4{margin:0;font-size:1.125rem;font-weight:600;color:var(--text, #e6eaf0);line-height:1.4}.trivia-options{display:flex;flex-direction:column;gap:12px;margin-bottom:20px;flex:1}.option-btn{padding:16px 20px;border:2px solid var(--line, #242a33);border-radius:8px;background:var(--card, #171a21);color:var(--text, #e6eaf0);font-size:.875rem;font-weight:500;text-align:left;cursor:pointer;transition:all .2s ease}.option-btn:hover:not(:disabled){border-color:var(--accent, #4da3ff);background:var(--bg, #0f1115)}.option-btn.correct{border-color:#20b265;background:rgba(32,178,101,.1);color:#20b265}.option-btn.incorrect{border-color:#ef4444;background:rgba(239,68,68,.1);color:#ef4444}.option-btn.disabled{opacity:.5;cursor:not-allowed}.trivia-explanation{padding:16px;background:var(--bg, #0f1115);border-radius:8px;border-left:4px solid var(--accent, #4da3ff);margin-bottom:20px;flex-shrink:0}.trivia-explanation p{margin:0;font-size:.875rem;color:var(--muted, #a9b3c1);line-height:1.4}.trivia-actions{display:flex;gap:12px;justify-content:center;flex-shrink:0}.trivia-completed{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:var(--text, #e6eaf0)}.trivia-completed h3{margin:0 0 24px;font-size:1.5rem;font-weight:700}.score-display{margin-bottom:24px}.score-circle{display:flex;flex-direction:column;align-items:center;justify-content:center;width:120px;height:120px;border:4px solid var(--line, #242a33);border-radius:50%;background:var(--card, #171a21)}.score-percentage{font-size:2rem;font-weight:700;margin-bottom:4px}.score-fraction{font-size:.875rem;color:var(--muted, #a9b3c1)}.score-message{margin-bottom:24px}.score-message p{margin:0;font-size:1rem;color:var(--text, #e6eaf0)}.completion-actions{display:flex;gap:12px;margin-bottom:20px}.pro-upsell{padding:12px 16px;background:rgba(77,163,255,.1);border:1px solid var(--accent, #4da3ff);border-radius:8px;max-width:300px}.pro-upsell p{margin:0;font-size:.875rem;color:var(--accent, #4da3ff);text-align:center}.trivia-stats{margin-top:8px}.trivia-stats .stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:0}.trivia-stats .stat-item{display:flex;flex-direction:column;align-items:center;padding:6px 4px;background:var(--bg, #0f1115);border-radius:6px;border:1px solid var(--line, #242a33)}.trivia-stats .stat-label{font-size:.625rem;font-weight:600;color:var(--muted, #a9b3c1);text-transform:uppercase;letter-spacing:.05em;margin-bottom:2px}.trivia-stats .stat-value{font-size:1rem;font-weight:700;color:var(--text, #e6eaf0)}.z-base{z-index:var(--z-base)}.z-nav{z-index:var(--z-nav)}.z-dropdown{z-index:var(--z-dropdown)}.z-overlay{z-index:var(--z-overlay)}.z-modal{z-index:var(--z-modal)}.z-toast{z-index:var(--z-toast)}.touch-pan-y{touch-action:pan-y}.touch-none{touch-action:none}.swipe-surface{touch-action:pan-y}.swipe-surface--own{touch-action:none}.placeholder\:text-neutral-500::-moz-placeholder{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.placeholder\:text-neutral-500::placeholder{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.hover\:-translate-y-0\.5:hover{--tw-translate-y: -.125rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-\[1\.02\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:transform:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:bg-accent:hover{background-color:var(--accent)}.hover\:bg-blue-500\/30:hover{background-color:#3b82f64d}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-muted:hover{background-color:var(--muted)}.hover\:bg-neutral-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.hover\:bg-pink-600:hover{--tw-bg-opacity: 1;background-color:rgb(219 39 119 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/10:hover{background-color:#ffffff1a}.hover\:bg-yellow-600:hover{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.hover\:bg-opacity-10:hover{--tw-bg-opacity: .1}.hover\:bg-opacity-20:hover{--tw-bg-opacity: .2}.hover\:text-blue-300:hover{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.hover\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-neutral-200:hover{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:opacity-70:hover{opacity:.7}.hover\:opacity-80:hover{opacity:.8}.hover\:opacity-90:hover{opacity:.9}.hover\:shadow-\[0_0_30px_rgba\(0\,0\,0\,0\.8\)\]:hover{--tw-shadow: 0 0 30px rgba(0,0,0,.8);--tw-shadow-colored: 0 0 30px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-accent:focus{--tw-ring-color: var(--accent)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-opacity-50:focus{--tw-ring-opacity: .5}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-\[var\(--accent\)\]:focus-visible{--tw-ring-color: var(--accent)}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.active\:translate-y-0:active{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:shadow-inner:active{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:opacity-60:disabled{opacity:.6}@media (min-width: 640px){.sm\:block{display:block}.sm\:inline{display:inline}.sm\:h-10{height:2.5rem}.sm\:h-\[44px\]{height:44px}.sm\:w-\[72px\]{width:72px}.sm\:p-4{padding:1rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-6{padding-top:1.5rem;padding-bottom:1.5rem}.sm\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\:text-base{font-size:1rem;line-height:1.5rem}}@media (min-width: 768px){.md\:col-span-1{grid-column:span 1 / span 1}.md\:block{display:block}.md\:hidden{display:none}.md\:aspect-\[16\/5\]{aspect-ratio:16/5}.md\:min-w-\[360px\]{min-width:360px}.md\:max-w-\[560px\]{max-width:560px}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:p-5{padding:1.25rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-base{font-size:1rem;line-height:1.5rem}.md\:text-lg{font-size:1.125rem;line-height:1.75rem}}@media (min-width: 1024px){.lg\:bottom-24{bottom:6rem}.lg\:bottom-8{bottom:2rem}.lg\:left-8{left:2rem}.lg\:right-8{right:2rem}.lg\:block{display:block}.lg\:hidden{display:none}.lg\:aspect-\[16\/4\]{aspect-ratio:16/4}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:pb-0{padding-bottom:0}.lg\:text-6xl{font-size:3.75rem;line-height:1}}@media (prefers-color-scheme: dark){.dark\:border-blue-700{--tw-border-opacity: 1;border-color:rgb(29 78 216 / var(--tw-border-opacity, 1))}.dark\:border-blue-800{--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\:border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\:border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\:border-red-800{--tw-border-opacity: 1;border-color:rgb(153 27 27 / var(--tw-border-opacity, 1))}.dark\:border-yellow-800{--tw-border-opacity: 1;border-color:rgb(133 77 14 / var(--tw-border-opacity, 1))}.dark\:bg-blue-800\/30{background-color:#1e40af4d}.dark\:bg-blue-900{--tw-bg-opacity: 1;background-color:rgb(30 58 138 / var(--tw-bg-opacity, 1))}.dark\:bg-blue-900\/20{background-color:#1e3a8a33}.dark\:bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.dark\:bg-green-900\/20{background-color:#14532d33}.dark\:bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity, 1))}.dark\:bg-red-900\/20{background-color:#7f1d1d33}.dark\:bg-yellow-900\/20{background-color:#713f1233}.dark\:text-blue-100{--tw-text-opacity: 1;color:rgb(219 234 254 / var(--tw-text-opacity, 1))}.dark\:text-blue-200{--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.dark\:text-purple-200{--tw-text-opacity: 1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.dark\:text-red-100{--tw-text-opacity: 1;color:rgb(254 226 226 / var(--tw-text-opacity, 1))}.dark\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.dark\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\:text-yellow-200{--tw-text-opacity: 1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.dark\:hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-gray-200:hover{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}}@keyframes flicklet-scroll-x{0%{transform:translate3d(100%,0,0)}to{transform:translate3d(-100%,0,0)}}.f-marquee-rail{mask-image:linear-gradient(to right,transparent,black 8%,black 92%,transparent);-webkit-mask-image:linear-gradient(to right,transparent,black 8%,black 92%,transparent);position:relative;z-index:var(--z-base);overflow:hidden}.f-marquee-scroll{animation:flicklet-scroll-x var(--marquee-duration, 30s) linear infinite;will-change:transform}.f-marquee-rail[data-pause-on-hover=true]:hover .f-marquee-scroll{animation-play-state:paused}@media (prefers-reduced-motion: reduce){.f-marquee-scroll{animation:none}}html[data-density=compact][data-compact-mobile-v1=true]{--space-1: 4px;--space-2: 8px;--space-3: 12px;--space-4: 16px;--radius: 12px;--poster-w: 160px;--poster-h: calc(var(--poster-w) * 1.5);--font-sm: 13px;--font-md: 14.5px;--font-lg: 16.5px}html[data-compact-mobile-v1=true] [data-page=home]{--home-header-gap: var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] h1{margin-bottom:var(--home-header-gap)}html[data-compact-mobile-v1=true] [data-page=home] [data-rail]{padding-inline:var(--space-2, 8px);padding-block:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] [data-cards]{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=home] [data-rail] h2{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=home] .grid{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true][data-settings-sheet=true]{body {overflow: hidden;}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet-overlay{z-index:var(--z-nav);animation:settings-sheet-fade-in .2s ease-out}@keyframes settings-sheet-fade-in{0%{opacity:0}to{opacity:1}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{animation:settings-sheet-slide-up .3s ease-out;z-index:var(--z-modal);padding-top:var(--space-4, 16px);padding-bottom:env(safe-area-inset-bottom);--sheet-padding: var(--space-4, 16px);--sheet-gap: var(--space-3, 12px);--sheet-radius: var(--radius, 12px)}@keyframes settings-sheet-slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls{display:flex;background-color:var(--muted, #f5f5f5);border-radius:var(--radius, 12px);padding:var(--space-1, 4px);margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button{flex:1;padding:var(--space-2, 8px);border:none;border-radius:calc(var(--radius, 12px) - var(--space-1, 4px));background-color:transparent;color:var(--muted, #666666);font-size:var(--font-sm, 13px);font-weight:400;cursor:pointer;transition:all .2s ease}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button.active{background-color:var(--bg, #ffffff);color:var(--text, #000000);font-weight:700}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area{flex:1;overflow-y:auto;padding:0 var(--space-4, 16px) var(--space-4, 16px);scrollbar-width:thin;scrollbar-color:var(--muted, #cccccc) transparent}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar{width:4px}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar-track{background:transparent}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .content-area::-webkit-scrollbar-thumb{background-color:var(--muted, #cccccc);border-radius:2px}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet h2{font-size:var(--font-lg, 16.5px);font-weight:700;margin:0 0 var(--space-3, 12px) 0;color:var(--text, #000000)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet h3{font-size:var(--font-md, 14.5px);font-weight:600;margin:0 0 var(--space-2, 8px) 0;color:var(--text, #000000)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet p{font-size:var(--font-sm, 13px);color:var(--muted, #666666);margin:0 0 var(--space-2, 8px) 0;line-height:1.4}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet button:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}@supports (padding: max(0px)){html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{background-color:var(--bg, #1a1a1a);color:var(--text, #ffffff)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls{background-color:var(--muted, #333333)}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet .segmented-controls button.active{background-color:var(--bg, #1a1a1a);color:var(--text, #ffffff)}}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--z-sheet, 20000);display:flex;align-items:flex-end;background:rgba(0,0,0,.4)}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true]>*{width:100%;max-height:calc(100svh - env(safe-area-inset-top) - env(safe-area-inset-bottom));background:var(--bg, #fff);border-top-left-radius:var(--radius, 12px);border-top-right-radius:var(--radius, 12px);overflow:hidden;transform:translateY(0)}html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] main,html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] [data-sheet-body],html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] .sheet-body,html[data-compact-mobile-v1=true][data-settings-sheet=true] [role=dialog][aria-modal=true] .content{flex:1 1 auto;min-height:1px;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true][data-settings-sheet=true] .settings-sheet{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;z-index:var(--z-sheet, 20000)}.settings-sheet .panel{display:flex;flex-direction:column;width:100%;height:100%;background:var(--bg, #111)}.settings-sheet [role=tablist]{display:flex;gap:var(--space-2, 8px);padding:var(--space-3, 12px) var(--space-4, 16px);border-bottom:1px solid color-mix(in oklab,white 10%,transparent)}.settings-sheet [role=tab]{padding:var(--space-2, 8px) var(--space-3, 12px);border-radius:var(--radius, 12px)}.settings-sheet [role=tab].is-active{outline:2px solid color-mix(in oklab,white 25%,transparent);outline-offset:2px}.settings-sheet [data-sheet-body]{padding:var(--space-4, 16px)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-actions-container{display:block}html[data-compact-mobile-v1=true][data-actions-split=true] .actions[data-testid=cardv2-actions],html[data-compact-mobile-v1=true][data-actions-split=true] .mobile-actions{display:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);font-weight:500;transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger:focus{outline:2px solid var(--accent, #007AFF);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu{border-radius:var(--radius, 12px);box-shadow:0 4px 12px #00000026;animation:compact-menu-fade-in .2s ease-out}@keyframes compact-menu-fade-in{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button{padding:var(--space-3, 12px);font-size:var(--font-sm, 13px);transition:background-color .2s ease}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-container{border-radius:var(--radius, 12px);transition:all .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-content{transition:transform .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-actions{border-radius:0 var(--radius, 12px) var(--radius, 12px) 0;padding:var(--space-2, 8px);transition:transform .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{padding:var(--space-2, 8px);border-radius:var(--radius, 12px);font-size:var(--font-sm, 13px);font-weight:500;min-width:80px;transition:all .2s ease;outline:none}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button:focus{outline:2px solid var(--bg, #ffffff);outline-offset:2px}html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-indicator{right:var(--space-2, 8px);transition:opacity .3s ease-out}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-actions-container{padding:var(--space-2, 8px);position:relative;z-index:var(--z-base)}@media (max-width: 767px){html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-container{touch-action:pan-y}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{min-height:44px}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu{background-color:var(--bg, #1a1a1a);border-color:var(--line, #333333)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button{color:var(--text, #ffffff)}html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu button:hover{background-color:var(--muted, #333333)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true][data-actions-split=true] .compact-primary-action,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true][data-actions-split=true] .compact-overflow-menu,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-content,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-row-actions,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-action-button,html[data-compact-mobile-v1=true][data-actions-split=true] .swipe-indicator{transition:none;animation:none}}html[data-compact-mobile-v1=true] [data-page=lists]{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] [data-page=lists] .space-y-0{gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-title{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;line-height:1.3;max-height:2.6em}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-subline{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;line-height:1.2;max-height:1.2em}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{width:var(--poster-w, 136px);height:var(--poster-h, calc(var(--poster-w, 136px) * 1.5));-o-object-fit:cover;object-fit:cover;border-radius:var(--radius, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-container{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-content{padding:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .swipe-row-actions{padding:var(--space-2, 8px);gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card .actions .mobile-actions,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card .actions .desktop-actions{display:none!important}html[data-compact-mobile-v1=true] [data-page=lists] .compact-actions-container{display:block}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{min-height:200px;padding:var(--space-6, 24px) var(--space-4, 16px);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state p{margin-bottom:var(--space-2, 8px);font-size:var(--font-md, 14.5px);line-height:1.4}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state .text-xs{font-size:var(--font-sm, 13px);line-height:1.3}html[data-compact-mobile-v1=true] [data-page=lists] .list-header{margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-header h1{font-size:var(--font-lg, 16.5px);margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls{gap:var(--space-2, 8px);margin-bottom:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls label{font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls select{padding:var(--space-1, 4px) var(--space-2, 8px);font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .grid{gap:var(--space-3, 12px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector{margin-bottom:var(--space-4, 16px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector .flex-wrap{gap:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-selector button{padding:var(--space-2, 8px) var(--space-3, 12px);font-size:var(--font-sm, 13px)}html[data-compact-mobile-v1=true] [data-page=lists] .scroll-to-top{bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom));right:var(--space-4, 16px)}@media (max-width: 767px){html[data-compact-mobile-v1=true] [data-page=lists] .space-y-0{gap:var(--space-1, 4px)}html[data-compact-mobile-v1=true] [data-page=lists] .list-header,html[data-compact-mobile-v1=true] [data-page=lists] .tag-controls{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{width:var(--poster-w, 136px);height:var(--poster-h, calc(var(--poster-w, 136px) * 1.5))}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{min-height:150px;padding:var(--space-4, 16px) var(--space-3, 12px)}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{border:1px solid var(--line, #333333)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] [data-page=lists] .tab-card-poster,html[data-compact-mobile-v1=true] [data-page=lists] .tab-card img{border:2px solid var(--line, #000000)}html[data-compact-mobile-v1=true] [data-page=lists] .empty-state{border:1px solid var(--line, #000000);border-radius:var(--radius, 12px)}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true] *,html[data-compact-mobile-v1=true] *:before,html[data-compact-mobile-v1=true] *:after{transition:none!important;animation:none!important}html[data-compact-mobile-v1=true] .settings-sheet-overlay,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .swipe-row-content,html[data-compact-mobile-v1=true] .swipe-row-actions,html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{transition:none!important;animation:none!important}}html[data-compact-mobile-v1=true] .compact-primary-action:focus-visible,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus-visible,html[data-compact-mobile-v1=true] .settings-sheet button:focus-visible,html[data-compact-mobile-v1=true] .swipe-action-button:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .settings-sheet .segmented-controls button:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .settings-sheet button[aria-label="Close Settings"]:focus-visible{outline:2px solid var(--accent, #007AFF);outline-offset:2px;box-shadow:0 0 0 4px #007aff33}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-width:44px;min-height:44px;padding:var(--space-3, 12px)}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{padding:var(--space-3, 12px) var(--space-4, 16px)}html[data-compact-mobile-v1=true] .swipe-action-button{padding:var(--space-3, 12px) var(--space-4, 16px);min-width:80px}html[data-compact-mobile-v1=true] [data-swipe-active=true]{will-change:transform}html[data-compact-mobile-v1=true] .swipe-row-content:not([data-swipe-active=true]){will-change:auto}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card{box-shadow:0 1px 3px #0000001a;border:1px solid var(--line, #e0e0e0)}html[data-compact-mobile-v1=true] [data-rail] [data-cards]{contain:layout paint}html[data-compact-mobile-v1=true] .compact-actions-container,html[data-compact-mobile-v1=true] .swipe-row-container{contain:layout}html[data-compact-mobile-v1=true] .compact-primary-action{background-color:var(--accent, #007AFF);color:var(--bg, #ffffff);border:1px solid var(--accent, #007AFF)}html[data-compact-mobile-v1=true] .compact-primary-action:hover,html[data-compact-mobile-v1=true] .compact-primary-action:focus{background-color:var(--accent-hover, #0056CC);color:var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-trigger{background-color:var(--muted, #f5f5f5);color:var(--text, #000000);border:1px solid var(--line, #e0e0e0)}html[data-compact-mobile-v1=true] .compact-overflow-trigger:hover,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus{background-color:var(--muted-hover, #e5e5e5);color:var(--text, #000000)}html[data-compact-mobile-v1=true] .compact-overflow-menu button{color:var(--text, #000000);background-color:var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-menu button:hover{background-color:var(--muted, #f5f5f5);color:var(--text, #000000)}html[data-compact-mobile-v1=true] .swipe-action-button{background-color:var(--bg, #ffffff);color:var(--accent, #007AFF);border:1px solid var(--bg, #ffffff)}html[data-compact-mobile-v1=true] .swipe-action-button:hover{background-color:var(--accent-hover, #0056CC);color:var(--bg, #ffffff)}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] .compact-overflow-trigger{background-color:var(--muted, #333333);color:var(--text, #ffffff);border-color:var(--line, #555555)}html[data-compact-mobile-v1=true] .compact-overflow-trigger:hover,html[data-compact-mobile-v1=true] .compact-overflow-trigger:focus{background-color:var(--muted-hover, #444444);color:var(--text, #ffffff)}html[data-compact-mobile-v1=true] .compact-overflow-menu{background-color:var(--bg, #1a1a1a);border-color:var(--line, #333333)}html[data-compact-mobile-v1=true] .compact-overflow-menu button{color:var(--text, #ffffff);background-color:var(--bg, #1a1a1a)}html[data-compact-mobile-v1=true] .compact-overflow-menu button:hover{background-color:var(--muted, #333333);color:var(--text, #ffffff)}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{border:2px solid currentColor}html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet{border:2px solid var(--line, #000000)}}@media (max-width: 767px){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-height:44px;min-width:44px}html[data-compact-mobile-v1=true] .swipe-row-container{contain:strict}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card{box-shadow:0 1px 2px #0000001a}}html[data-compact-mobile-v1=true]{--z-bottom-nav: 1000;--z-fab: 1200;--z-menu: 15000;--z-sheet: 20000}:root{--z-overlay: 9998;--z-modal: 9999}.auth-modal-overlay,.username-prompt-modal-overlay{z-index:var(--z-overlay)}.auth-modal-content,.username-prompt-modal-content{z-index:var(--z-modal)}html[data-compact-mobile-v1=true] [data-bottom-nav],html[data-compact-mobile-v1=true] .bottom-nav{z-index:var(--z-bottom-nav, 1000);padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .fixed.bottom-4,html[data-compact-mobile-v1=true] .fixed.bottom-8,html[data-compact-mobile-v1=true] button[aria-label="Open Settings"],html[data-compact-mobile-v1=true] button[aria-label*=theme],html[data-compact-mobile-v1=true] button[aria-label*=Theme]{z-index:var(--z-fab, 1200)}html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] [role=menu]{z-index:var(--z-menu, 15000)}html[data-compact-mobile-v1=true] .settings-sheet-overlay,html[data-compact-mobile-v1=true] .settings-sheet{z-index:var(--z-sheet, 20000)}html[data-compact-mobile-v1=true] .swipe-row-actions{z-index:var(--z-menu, 15000)}html[data-compact-mobile-v1=true] .settings-sheet .content-area{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .swipe-row-container{padding-bottom:max(var(--space-1, 4px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .mobile-tabs,html[data-compact-mobile-v1=true] [data-mobile-nav]{padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] main{padding-bottom:max(var(--space-4, 16px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .rail{margin-bottom:max(var(--space-3, 12px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .compact-actions-container{padding-bottom:max(var(--space-2, 8px),env(safe-area-inset-bottom))}html[data-compact-mobile-v1=true] .curated-card,html[data-compact-mobile-v1=true] .tab-card{margin-bottom:var(--space-2, 8px)}html[data-compact-mobile-v1=true] .curated-card.v2,html[data-compact-mobile-v1=true] .tab-card,html[data-compact-mobile-v1=true] .swipe-row-container{position:relative;z-index:var(--z-base)}html[data-compact-mobile-v1=true] .swipe-row-content{position:relative;z-index:calc(var(--z-base) + 1)}html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger{position:relative;z-index:var(--z-base)}@media (max-width: 767px){html[data-compact-mobile-v1=true] .compact-primary-action,html[data-compact-mobile-v1=true] .compact-overflow-trigger,html[data-compact-mobile-v1=true] .swipe-action-button{min-height:44px;margin-bottom:var(--space-1, 4px)}html[data-compact-mobile-v1=true] .settings-sheet{padding-bottom:max(var(--space-6, 24px),env(safe-area-inset-bottom))}}@media (prefers-contrast: high){html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .swipe-row-actions{border:2px solid var(--line, #000000)}}@media (prefers-reduced-motion: reduce){html[data-compact-mobile-v1=true] .compact-overflow-menu,html[data-compact-mobile-v1=true] .settings-sheet,html[data-compact-mobile-v1=true] .swipe-row-content,html[data-compact-mobile-v1=true] .swipe-row-actions{transition:none}}@media (prefers-color-scheme: dark){html[data-compact-mobile-v1=true] .settings-sheet .content-area{background-color:var(--bg, #1a1a1a)}}.sheet-overlay{background:color-mix(in oklab,black 55%,transparent);z-index:var(--z-overlay, 9998);touch-action:none}.sheet-container{z-index:var(--z-modal, 9999);background:var(--card);border:1px solid var(--line)}.sheet-body{overscroll-behavior:contain}[role=tabpanel][hidden]{display:none!important}html{scrollbar-gutter:stable both-edges}@media (max-width: 768px){.card-mobile{position:relative;background:var(--surface-0,#fff);border-radius:12px;padding:8px calc(48px + env(safe-area-inset-right,0px)) 8px 8px;margin:0 0 12px;box-shadow:none;overflow:hidden}.card-mobile .swipe-bg{position:absolute;top:0;right:0;bottom:0;left:0;z-index:var(--z-base);pointer-events:none}.card-mobile .swipe-bg .reveal{position:absolute;top:0;bottom:0;width:40%;opacity:0;transition:opacity .12s ease-out}.card-mobile .swipe-bg .left{left:0;background:#22c55e}.card-mobile .swipe-bg .right{right:0;background:#0ea5e9}.card-mobile.dragging .swipe-bg .reveal{opacity:.14}.card-mobile .swipe-bg .hint{position:absolute;top:50%;transform:translateY(-50%);padding:6px 10px;border-radius:9999px;font-weight:600;background:color-mix(in srgb,#000 8%,#fff);color:#111;opacity:0;transition:opacity .12s;pointer-events:none;white-space:nowrap}.card-mobile .swipe-bg .hint.left{left:12px}.card-mobile .swipe-bg .hint.right{right:12px}.card-mobile .hint{opacity:0;transition:opacity .12s}.card-mobile.drag-left .swipe-bg .hint.left,.card-mobile.drag-right .swipe-bg .hint.right{opacity:.95}.card-mobile .swipe-target{position:relative;z-index:calc(var(--z-base) + 1);will-change:transform;display:grid;grid-template-columns:112px 1fr;gap:8px;align-items:start;transition:transform .16s ease-out}.card-mobile.dragging .swipe-target{transition:none}.card-mobile.swipe-open .swipe-target{transform:translate3d(-120px,0,0)}.card-mobile .poster{grid-column:1;width:112px;height:auto;border-radius:8px;-o-object-fit:cover;object-fit:cover}.card-mobile .content{grid-column:2;display:grid;grid-template-rows:auto auto auto auto auto auto;row-gap:6px;overflow:hidden}.card-mobile .topline{display:grid;grid-template-columns:1fr auto;align-items:center;-moz-column-gap:8px;column-gap:8px}.card-mobile .title{font-weight:700;line-height:1.2}.card-mobile .btn-overflow{inline-size:32px;block-size:32px;border-radius:9999px;background:transparent;border:1px solid color-mix(in srgb,#000 12%,transparent);color:var(--text-muted, #666);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;line-height:1;margin-right:4px}.card-mobile .subline{font-size:12px;opacity:.8}.card-mobile .chips{display:flex;flex-wrap:wrap;gap:4px}.card-mobile .rating-row{display:flex;align-items:center;gap:8px;min-height:36px}.card-mobile .rating-label{font-size:12px;opacity:.85;font-weight:500}.card-mobile .stars{display:inline-flex;gap:4px;touch-action:none}.card-mobile .star{inline-size:32px;block-size:32px;border-radius:6px;background:transparent;border:1px solid color-mix(in srgb,#000 12%,transparent);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;color:#d1d5db;transition:all .12s ease-out}.card-mobile .star:before{content:"â˜†";font-size:22px;line-height:32px;display:block;text-align:center;color:#aaa}.card-mobile .star.filled{border-color:#f59e0b}.card-mobile .star.filled:before{content:"â˜…";color:#f59e0b}.card-mobile .star:hover{border-color:#f59e0b;background:color-mix(in srgb,#f59e0b 20%,transparent)}.card-mobile .avg{font-size:11px;opacity:.7;margin-left:4px}.card-mobile .summary{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;font-size:13px;line-height:1.4;color:var(--text-muted, #666)}.card-mobile .actions{display:grid;grid-template-columns:1fr auto;align-items:center;-moz-column-gap:8px;column-gap:8px}.card-mobile .providers{display:flex;flex-wrap:wrap;gap:4px}.card-mobile .provider-chip{display:inline-flex;align-items:center;padding:2px 8px;border-radius:9999px;font-size:12px;background:color-mix(in srgb,#000 6%,transparent);color:var(--text-muted, #666);text-decoration:none;border:1px solid color-mix(in srgb,#000 8%,transparent);transition:all .12s ease-out}.card-mobile .provider-chip:hover{background:color-mix(in srgb,#000 12%,transparent);border-color:color-mix(in srgb,#000 16%,transparent)}.card-mobile .btn-delete{justify-self:end;padding:6px 12px;border-radius:9999px;background:#ef4444;color:#fff;font-weight:700;line-height:1;border:none;cursor:pointer;font-size:12px;transition:all .12s ease-out}.card-mobile .btn-delete:hover{background:#dc2626}.card-mobile .drag-rail{position:absolute;top:0;right:0;bottom:0;width:36px;display:grid;place-items:center;background:transparent;color:var(--text-muted, #666);cursor:grab;z-index:calc(var(--z-base) + 3);border-left:1px solid color-mix(in srgb,#000 8%,transparent);touch-action:none;border:none;font-size:18px;line-height:1;opacity:.7;transition:all .12s ease-out}.card-mobile .drag-rail:hover{opacity:1;background:color-mix(in srgb,#000 4%,transparent)}.card-mobile .drag-rail:active{cursor:grabbing}.card-mobile .drag-rail:after{content:"â‹®â‹®";font-size:18px;line-height:1;opacity:.7}.card-mobile .swipe-row{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:calc(var(--z-base) + 2)}.card-mobile .swipe-row>.gesture-plane{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:auto;touch-action:pan-y;cursor:grab}.card-mobile .content .reveal,.card-mobile .chips .reveal{display:none!important}}

```

# Tests
*9 file(s)*


## apps\web\test-api-integrations.js
```
// Test script for API integrations
// Run this in browser console to test both games' API integrations

async function testFlickWordAPI() {
  console.log('ðŸŽ¯ Testing FlickWord API...');
  try {
    // Import the function dynamically
    const { getFreshWord } = await import('./src/lib/dailyWordApi.ts');
    const wordData = await getFreshWord();
    console.log('âœ… FlickWord Fresh API Success:', wordData);
    return true;
  } catch (error) {
    console.error('âŒ FlickWord API Failed:', error);
    return false;
  }
}

async function testTriviaAPI() {
  console.log('ðŸ§  Testing Trivia API...');
  try {
    // Import the function dynamically
    const { getFreshTrivia } = await import('./src/lib/triviaApi.ts');
    const triviaData = await getFreshTrivia();
    console.log('âœ… Trivia Fresh API Success:', triviaData);
    return true;
  } catch (error) {
    console.error('âŒ Trivia API Failed:', error);
    return false;
  }
}

async function testBothAPIs() {
  console.log('ðŸš€ Testing both game APIs with fresh content...');
  const flickwordResult = await testFlickWordAPI();
  const triviaResult = await testTriviaAPI();
  
  console.log('ðŸ“Š Results:', {
    flickword: flickwordResult ? 'âœ… Fresh Online' : 'âŒ Offline',
    trivia: triviaResult ? 'âœ… Fresh Online' : 'âŒ Offline'
  });
  
  return { flickword: flickwordResult, trivia: triviaResult };
}

function clearCachesAndTest() {
  console.log('ðŸ—‘ï¸ Clearing caches and testing fresh content...');
  
  // Clear caches
  try {
    localStorage.removeItem('flicklet:daily-word');
    localStorage.removeItem('flicklet:daily-trivia');
    console.log('âœ… Caches cleared');
  } catch (error) {
    console.warn('âŒ Failed to clear caches:', error);
  }
  
  // Test fresh content
  setTimeout(() => {
    testBothAPIs();
  }, 1000);
}

// Export for console testing
window.testGameAPIs = testBothAPIs;
window.testFlickWordAPI = testFlickWordAPI;
window.testTriviaAPI = testTriviaAPI;
window.clearCachesAndTest = clearCachesAndTest;

console.log('ðŸ§ª Fresh API Test functions loaded. Run clearCachesAndTest() to clear caches and test fresh content.');

```

## FLICKWORD_VALIDATION_TEST_GUIDE.md
```
# FlickWord Validation Testing Guide

## Quick Manual Testing Steps

### 1. Start the Development Server

```bash
cd apps/web
npm run dev
```

The app should start at `http://localhost:8888`

### 2. Open the FlickWord Game

1. Navigate to `http://localhost:8888`
2. Open browser console (F12 or Right-click â†’ Inspect â†’ Console)
3. Either:
   - Click the FlickWord game button/icon in the UI, OR
   - Type in console: `window.openFlickWordModal()`

### 3. Test Word Validation (Manual)

Try typing these words in the game and pressing Enter:

**Should be REJECTED (show error notification):**
- `hollo` âŒ
- `heres` âŒ
- `xyzab` âŒ
- `abcde` âŒ

**Should be ACCEPTED (process the guess):**
- `hello` âœ…
- `world` âœ…
- `house` âœ…
- `water` âœ…
- `light` âœ…

### 4. Test via Browser Console

Open browser console and run:

```javascript
// Import validation function
const { validateWord } = await import('/src/lib/words/validateWord.ts');

// Test non-words (should reject)
console.log('Testing "hollo":', await validateWord('hollo')); // Should be { valid: false }
console.log('Testing "heres":', await validateWord('heres')); // Should be { valid: false }

// Test common words (should accept)
console.log('Testing "hello":', await validateWord('hello')); // Should be { valid: true }
console.log('Testing "world":', await validateWord('world')); // Should be { valid: true }
```

### 5. Check Daily Word Selection

```javascript
const { getTodaysWord } = await import('/src/lib/dailyWordApi.ts');
const wordData = await getTodaysWord();
console.log('Today\'s word:', wordData.word);
console.log('Is it a common word?', wordData.word.toLowerCase()); // Should be a familiar word
```

### 6. Verify Common Words List

```javascript
const { isCommonWord } = await import('/src/lib/words/commonWords.ts');
console.log('hollo in common words?', isCommonWord('hollo')); // false
console.log('heres in common words?', isCommonWord('heres')); // false
console.log('hello in common words?', isCommonWord('hello')); // true
console.log('world in common words?', isCommonWord('world')); // true
```

## Expected Results

âœ… **PASS Criteria:**
- "hollo" is rejected with error notification
- "heres" is rejected with error notification
- Common words like "hello", "world", "house" are accepted
- Daily word is from the common words list
- No console errors during validation
- Game remains playable and enjoyable

âŒ **FAIL Criteria:**
- "hollo" or "heres" are accepted as valid
- Common words are rejected
- Console shows validation errors
- Game becomes unplayable

## Browser Console Test Script

Copy and paste this into the browser console:

```javascript
async function testFlickWordValidation() {
  console.log('ðŸ§ª Testing FlickWord Validation...\n');
  
  const { validateWord } = await import('/src/lib/words/validateWord.ts');
  const { isCommonWord } = await import('/src/lib/words/commonWords.ts');
  
  const tests = [
    { word: 'hollo', expected: false, desc: 'Non-word "hollo"' },
    { word: 'heres', expected: false, desc: 'Non-word "heres"' },
    { word: 'hello', expected: true, desc: 'Common word "hello"' },
    { word: 'world', expected: true, desc: 'Common word "world"' },
    { word: 'house', expected: true, desc: 'Common word "house"' },
  ];
  
  for (const test of tests) {
    const result = await validateWord(test.word);
    const passed = result.valid === test.expected;
    const icon = passed ? 'âœ…' : 'âŒ';
    console.log(`${icon} ${test.desc}: ${result.valid ? 'ACCEPTED' : 'REJECTED'} (expected: ${test.expected ? 'ACCEPT' : 'REJECT'})`);
  }
  
  console.log('\nðŸ“Š Common Words Check:');
  console.log('hollo:', isCommonWord('hollo')); // false
  console.log('heres:', isCommonWord('heres')); // false
  console.log('hello:', isCommonWord('hello')); // true
}

testFlickWordValidation();
```

## Visual Testing Checklist

- [ ] Open FlickWord game modal
- [ ] Type "hollo" â†’ Should show error notification "Not a valid word."
- [ ] Type "heres" â†’ Should show error notification "Not a valid word."
- [ ] Type "hello" â†’ Should accept and process the guess
- [ ] Type "world" â†’ Should accept and process the guess
- [ ] Check that daily word is a familiar, common word
- [ ] Verify tile animations work correctly
- [ ] Verify keyboard highlights work correctly
- [ ] Test that game completion works
- [ ] Check stats are saved correctly

## Performance Testing

Monitor the browser console for:
- No excessive validation calls
- Validation completes quickly (<100ms per word)
- No memory leaks during extended play
- Smooth animations (60fps)

## Accessibility Testing

- [ ] Screen reader can announce game state
- [ ] Keyboard navigation works
- [ ] Focus management is correct
- [ ] ARIA labels are present




```

## test-flickword-debug.js
```
// Comprehensive test script for FlickWord game debugging
// Run this in browser console after the app loads

async function testFlickWordGame() {
  console.log('ðŸ§ª Testing FlickWord Game - Comprehensive Debug...');
  
  // Test 1: Check if the word "couch" is valid
  console.log('\n1. Testing word validation for "couch"...');
  try {
    const { validateWord } = await import('/src/lib/dailyWordApi.ts');
    const isValid = await validateWord('couch');
    console.log('   "couch" is valid:', isValid);
  } catch (error) {
    console.error('   Validation error:', error);
  }
  
  // Test 2: Check if the word "COUCH" (uppercase) is valid
  console.log('\n2. Testing word validation for "COUCH"...');
  try {
    const { validateWord } = await import('/src/lib/dailyWordApi.ts');
    const isValid = await validateWord('COUCH');
    console.log('   "COUCH" is valid:', isValid);
  } catch (error) {
    console.error('   Validation error:', error);
  }
  
  // Test 3: Test common words
  console.log('\n3. Testing common words...');
  const testWords = ['hello', 'world', 'house', 'water', 'light', 'night', 'music', 'dance'];
  try {
    const { validateWord } = await import('/src/lib/dailyWordApi.ts');
    for (const word of testWords) {
      const isValid = await validateWord(word);
      console.log(`   "${word}" is valid:`, isValid);
    }
  } catch (error) {
    console.error('   Validation error:', error);
  }
  
  // Test 4: Check today's word loading
  console.log('\n4. Testing today\'s word loading...');
  try {
    const { getTodaysWord } = await import('/src/lib/dailyWordApi.ts');
    const wordData = await getTodaysWord();
    console.log('   Today\'s word:', wordData.word);
    console.log('   Definition:', wordData.definition);
    console.log('   Difficulty:', wordData.difficulty);
  } catch (error) {
    console.error('   Word loading error:', error);
  }
  
  // Test 5: Check localStorage cache
  console.log('\n5. Checking localStorage cache...');
  try {
    const cached = localStorage.getItem('flicklet:daily-word');
    if (cached) {
      const parsed = JSON.parse(cached);
      console.log('   Cached word:', parsed.word);
      console.log('   Cached date:', parsed.date);
    } else {
      console.log('   No cached word found');
    }
  } catch (error) {
    console.error('   Cache error:', error);
  }
  
  // Test 6: Test game modal opening
  console.log('\n6. Testing game modal...');
  if (typeof window.openFlickWordModal === 'function') {
    console.log('   Opening FlickWord modal...');
    window.openFlickWordModal();
    
    // Wait a bit then close
    setTimeout(() => {
      if (typeof window.closeFlickWordModal === 'function') {
        console.log('   Closing FlickWord modal...');
        window.closeFlickWordModal();
      }
    }, 3000);
  } else {
    console.log('   openFlickWordModal function not available');
  }
  
  console.log('\nâœ… FlickWord game test complete!');
  console.log('\nðŸ“ Instructions:');
  console.log('1. Open the FlickWord game');
  console.log('2. Type "couch" and press Enter');
  console.log('3. Check the browser console for debug logs');
  console.log('4. The word should now be accepted and processed');
}

// Run the test
testFlickWordGame();

```

## test-flickword-validation.js
```
/**
 * Quick test script for FlickWord word validation
 * Run this in browser console when the app is loaded at localhost:8888
 */

async function testFlickWordValidation() {
  console.log('ðŸ§ª Testing FlickWord Word Validation...\n');

  // Import the validation function
  const { validateWord } = await import('./apps/web/src/lib/words/validateWord.ts');
  const { isCommonWord } = await import('./apps/web/src/lib/words/commonWords.ts');

  const testCases = [
    // Non-words that should be REJECTED
    { word: 'hollo', shouldAccept: false, description: 'Non-word "hollo"' },
    { word: 'heres', shouldAccept: false, description: 'Non-word "heres"' },
    { word: 'xyzab', shouldAccept: false, description: 'Random letters' },
    { word: 'abcde', shouldAccept: false, description: 'Non-word sequence' },
    
    // Common words that should be ACCEPTED
    { word: 'hello', shouldAccept: true, description: 'Common word "hello"' },
    { word: 'world', shouldAccept: true, description: 'Common word "world"' },
    { word: 'house', shouldAccept: true, description: 'Common word "house"' },
    { word: 'about', shouldAccept: true, description: 'Common word "about"' },
    { word: 'water', shouldAccept: true, description: 'Common word "water"' },
    
    // Edge cases
    { word: 'HELLO', shouldAccept: true, description: 'Uppercase should normalize' },
    { word: 'HeLLo', shouldAccept: true, description: 'Mixed case should normalize' },
    { word: 'abcd', shouldAccept: false, description: 'Too short' },
    { word: 'abcdef', shouldAccept: false, description: 'Too long' },
  ];

  console.log('Testing word validation:\n');
  let passCount = 0;
  let failCount = 0;

  for (const test of testCases) {
    try {
      const result = await validateWord(test.word);
      const passed = result.valid === test.shouldAccept;
      
      if (passed) {
        console.log(`âœ… PASS: ${test.description}`);
        console.log(`   "${test.word}" â†’ ${result.valid ? 'ACCEPTED' : 'REJECTED'} (expected: ${test.shouldAccept ? 'ACCEPT' : 'REJECT'})`);
        passCount++;
      } else {
        console.log(`âŒ FAIL: ${test.description}`);
        console.log(`   "${test.word}" â†’ ${result.valid ? 'ACCEPTED' : 'REJECTED'} (expected: ${test.shouldAccept ? 'ACCEPT' : 'REJECT'})`);
        console.log(`   Reason: ${result.reason || 'none'}, Source: ${result.source}`);
        failCount++;
      }
    } catch (error) {
      console.log(`âŒ ERROR: ${test.description}`);
      console.log(`   "${test.word}" â†’ Error: ${error.message}`);
      failCount++;
    }
  }

  console.log('\nðŸ“Š Summary:');
  console.log(`   Passed: ${passCount}`);
  console.log(`   Failed: ${failCount}`);
  console.log(`   Total: ${testCases.length}`);

  if (failCount === 0) {
    console.log('\nðŸŽ‰ All tests passed!');
  } else {
    console.log('\nâš ï¸ Some tests failed - please review');
  }
}

// Test common words directly
function testCommonWordsList() {
  console.log('\nðŸ§ª Testing Common Words List...\n');
  
  const { isCommonWord } = require('./apps/web/src/lib/words/commonWords.ts');
  
  const wordsToCheck = ['hollo', 'heres', 'hello', 'world', 'house'];
  
  wordsToCheck.forEach(word => {
    const isCommon = isCommonWord(word);
    console.log(`${isCommon ? 'âœ…' : 'âŒ'} "${word}" â†’ ${isCommon ? 'IN list' : 'NOT in list'}`);
  });
}

// Auto-run if in browser console
if (typeof window !== 'undefined') {
  console.log('ðŸ“ Test functions available:');
  console.log('   - testFlickWordValidation() - Test word validation');
  console.log('   - testCommonWordsList() - Test common words list');
  console.log('\nðŸ’¡ Run: await testFlickWordValidation()');
} else {
  // Node.js context
  testFlickWordValidation();
}




```

## test-games-integration.js
```
// Test script to verify games are working
// Run this in browser console after the app loads

async function testGamesIntegration() {
  console.log('ðŸ§ª Testing Games Integration...');
  
  // Test 1: Check if global functions are available
  console.log('1. Checking global functions...');
  const hasOpenFlickWord = typeof window.openFlickWordModal === 'function';
  const hasCloseFlickWord = typeof window.closeFlickWordModal === 'function';
  console.log('   openFlickWordModal:', hasOpenFlickWord);
  console.log('   closeFlickWordModal:', hasCloseFlickWord);
  
  // Test 2: Check if daily word API works
  console.log('2. Testing daily word API...');
  try {
    // Import the API function dynamically
    const { getTodaysWord } = await import('/src/lib/dailyWordApi.ts');
    const wordData = await getTodaysWord();
    console.log('   Today\'s word:', wordData.word);
    console.log('   Definition:', wordData.definition);
    console.log('   Difficulty:', wordData.difficulty);
  } catch (error) {
    console.error('   API Error:', error);
  }
  
  // Test 3: Check if word validation works
  console.log('3. Testing word validation...');
  try {
    const { validateWord } = await import('/src/lib/dailyWordApi.ts');
    const isValid = await validateWord('hello');
    console.log('   "hello" is valid:', isValid);
  } catch (error) {
    console.error('   Validation Error:', error);
  }
  
  // Test 4: Check localStorage cache
  console.log('4. Checking localStorage cache...');
  try {
    const cached = localStorage.getItem('flicklet:daily-word');
    if (cached) {
      const parsed = JSON.parse(cached);
      console.log('   Cached word:', parsed.word);
      console.log('   Cached date:', parsed.date);
    } else {
      console.log('   No cached word found');
    }
  } catch (error) {
    console.error('   Cache Error:', error);
  }
  
  // Test 5: Try to open the game modal
  console.log('5. Testing game modal...');
  if (hasOpenFlickWord) {
    console.log('   Opening FlickWord modal...');
    window.openFlickWordModal();
    
    // Close it after 2 seconds
    setTimeout(() => {
      if (hasCloseFlickWord) {
        console.log('   Closing FlickWord modal...');
        window.closeFlickWordModal();
      }
    }, 2000);
  }
  
  console.log('âœ… Games integration test complete!');
}

// Run the test
testGamesIntegration();

```

## tests\manual\PHASE_1_TEST_CHECKLIST.md
```
# Phase 1 Test Checklist - Scroll Lock Safety Improvements

**Phase:** 1 - Scroll Lock Safety Improvements  
**Feature Flag:** `flag:scroll-lock-safety`  
**Date:** _______________  
**Tester:** _______________  
**Browser/Device:** _______________

---

## Pre-Test Setup

- [ ] Feature flag is enabled: `localStorage.setItem('flag:scroll-lock-safety', 'true')`
- [ ] Scroll logging enabled (optional): `localStorage.setItem('flag:scroll-logging', 'true')`
- [ ] Page refreshed after flags enabled
- [ ] Browser console open for error checking
- [ ] Test device/emulator ready

**Verify Setup:**
```javascript
// In browser console:
isFeatureEnabled('scroll-lock-safety')  // Should return true
window.scrollFeatures.list()  // Verify flag shows as enabled
```

---

## Test Cases

### Test 1: Single Modal
**Expected:** Background page does NOT scroll, modal content CAN scroll, page returns to original position

**Steps:**
1. Note current scroll position (scrollY value from console: `window.scrollY`)
2. Open Episode Tracking modal
3. Try to scroll background page (should NOT move)
4. Scroll modal content if it has scrollable content (should work)
5. Close modal
6. Verify page is at original scroll position
7. Repeat 5 times with same modal
8. Test with Settings modal
9. Test with FlickWord modal
10. Test with Trivia modal

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Scroll Position Verification:**
| Attempt | Starting Position | After Close | Correct? | Notes |
|---------|-------------------|-------------|----------|-------|
| 1       |                   |             |          |       |
| 2       |                   |             |          |       |
| 3       |                   |             |          |       |
| 4       |                   |             |          |       |
| 5       |                   |             |          |       |

**Notes:**
```
(Record any issues, unexpected behavior, scroll position mismatches)
```

---

### Test 2: Rapid Modal Open/Close
**Expected:** No scroll position jumps, all modals work correctly

**Steps:**
1. Note starting scroll position: `window.scrollY`
2. Open Episode Tracking modal
3. Immediately close it
4. Immediately open Settings modal
5. Immediately close it
6. Open FlickWord modal
7. Close it
8. Verify page is at original scroll position

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Starting: `window.scrollY = _____`
- After Test: `window.scrollY = _____`
- Match: âœ… Yes / âŒ No (difference: _____ px)

**Notes:**
```
(Record any position jumps, modal issues, errors)
```

---

### Test 3: Modal During Page Scroll
**Expected:** Scroll position preserved exactly when modal opens during scroll

**Steps:**
1. Scroll page down to approximately 50% (note exact position)
2. Open Episode Tracking modal
3. Scroll modal content (if applicable)
4. Close modal
5. Verify page is EXACTLY where it was before opening modal

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Before Modal: `window.scrollY = _____`
- After Modal: `window.scrollY = _____`
- Exact Match: âœ… Yes / âŒ No (difference: _____ px)

**Test at Different Positions:**
| Position | Before | After | Match? | Notes |
|----------|--------|-------|--------|-------|
| 25% down |        |       |        |       |
| 50% down |        |       |        |       |
| 75% down |        |       |        |       |
| Near bottom |      |       |        |       |

**Notes:**
```
(Record exact positions and any mismatches)
```

---

### Test 4: Navigation During Modal
**Expected:** Graceful handling, no errors, no scroll position issues

**Steps:**
1. Open Settings modal
2. While modal is open, check if background page can be interacted with
3. If possible, try to navigate (check if navigation is blocked)
4. Refresh page (if needed to test)
5. Verify no scroll position errors in console
6. Verify modal handles gracefully

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Console Errors:**
- [ ] No errors
- [ ] Errors found: (list below)
  ```
  (Paste errors here)
  ```

**Notes:**
```
(Record behavior, any issues with navigation or refresh)
```

---

### Test 5: Multiple Modals (if supported)
**Expected:** Proper locking/unlocking chain, only one modal locked at a time

**Steps:**
1. Open Episode Tracking modal
2. Check if another modal can be opened (if app allows)
3. If yes, try to open Settings modal
4. Verify scroll lock behavior (should be locked for active modal)
5. Close active modal
6. Verify unlock works correctly
7. Close remaining modal if any
8. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial / âŒ Not Applicable

**Notes:**
```
(Record behavior with multiple modals, if applicable)
```

---

### Test 6: Keyboard Opening (Mobile)
**Expected:** Keyboard doesn't break scroll lock, scroll position correct

**Steps:**
1. On mobile device, scroll page to middle
2. Open Episode Tracking modal (or Settings modal)
3. Tap text input field
4. Keyboard appears
5. Verify background page does NOT scroll (try scrolling it)
6. Close/dismiss keyboard
7. Verify modal still scrollable (if it has scrollable content)
8. Close modal
9. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial / âŒ Not Mobile

**Mobile Device:** _________________

**Notes:**
```
(Mobile-specific issues, keyboard behavior, scroll position)
```

---

## Regression Tests

### Existing Functionality Still Works
- [ ] Main page scrolling still works
- [ ] Card swipes still work
- [ ] Modal content scrolling still works
- [ ] All modals open/close correctly

**Notes:**
```
(Any regressions found?)
```

---

## Console Checks

### Scroll Lock State (Dev Tools)
```javascript
// Check scroll lock state
window.getScrollLockState?.()  // If exposed
```

- [ ] No console errors related to scroll lock
- [ ] No warnings about scroll lock
- [ ] Scroll logger works (if enabled)

### Console Errors
- [ ] No errors
- [ ] Errors found:
  ```
  (Paste errors here)
  ```

---

## Performance

- [ ] No performance regression observed
- [ ] Modal open/close feels smooth
- [ ] Scroll position restoration is instant
- [ ] No jank or stuttering

---

## Browser Compatibility

### iOS Safari (if available)
- [ ] All tests pass
- [ ] Issues found: _________________________________

### Chrome Android
- [ ] All tests pass
- [ ] Issues found: _________________________________

### Desktop (touch emulation)
- [ ] All tests pass
- [ ] Issues found: _________________________________

---

## Overall Assessment

**Phase Status:** âœ… Ready to Proceed / âŒ Needs Fixes / âš ï¸ Minor Issues

**Summary:**
```
(Overall assessment, major issues, blockers)
```

**Critical Issues Found:**
1. 
2. 
3. 

**Minor Issues:**
1. 
2. 
3. 

---

## Sign-Off

- [ ] All 6 test cases passed
- [ ] No regressions found
- [ ] Performance acceptable
- [ ] Console clean (no errors)
- [ ] Ready for Phase 2

**Approved by:** _______________  
**Date:** _______________

---

## Debugging Tips

If tests fail, check:

1. **Scroll position mismatch:**
   ```javascript
   // Before opening modal
   const before = window.scrollY;
   // After closing modal
   const after = window.scrollY;
   console.log('Position difference:', Math.abs(after - before));
   ```

2. **Scroll lock state:**
   ```javascript
   // Check if scroll is actually locked
   const bodyStyle = window.getComputedStyle(document.body);
   console.log('Body position:', bodyStyle.position);
   console.log('Body overflow:', bodyStyle.overflow);
   ```

3. **Enable verbose logging:**
   ```javascript
   localStorage.setItem('flag:scroll-logging', 'true');
   window.scrollLogger?.setLevel('debug');
   // Refresh page, then test
   window.scrollLogger?.getLogs();
   ```


```

## tests\manual\PHASE_3_TEST_CHECKLIST.md
```
# Phase 3 Test Checklist - iOS Safari Scroll Lock Fixes

**Phase:** 3 - iOS Safari Scroll Lock Fixes  
**Feature Flag:** `flag:ios-scroll-fix` (iOS devices only)  
**Date:** _______________  
**Tester:** _______________  
**Browser/Device:** iOS Safari (iPhone/iPad)

**âš ï¸ IMPORTANT: These tests MUST be run on actual iOS Safari device. Desktop Safari or iOS Chrome will NOT work.**

---

## Pre-Test Setup

- [ ] Testing on actual iOS Safari device (iPhone or iPad)
- [ ] Feature flag is enabled: `localStorage.setItem('flag:ios-scroll-fix', 'true')`
- [ ] Phase 1 flag also enabled: `localStorage.setItem('flag:scroll-lock-safety', 'true')`
- [ ] Scroll logging enabled (optional): `localStorage.setItem('flag:scroll-logging', 'true')`
- [ ] Page refreshed after flags enabled
- [ ] Browser console open (if possible via Mac Safari Web Inspector)
- [ ] Device ready for testing

**Verify Setup:**
```javascript
// In browser console (via Safari Web Inspector):
isFeatureEnabled('ios-scroll-fix')  // Should return true
// Check device:
navigator.userAgent  // Should show Safari on iOS
```

---

## Test Cases

### Test 1: iOS Safari Modal Lock
**Expected:** Background page is COMPLETELY locked, position preserved exactly

**Steps:**
1. On iOS Safari device, scroll page down (note position: `window.scrollY`)
2. Open Episode Tracking modal
3. Try to scroll background page (drag up/down on background)
4. Verify background page does NOT move AT ALL
5. Scroll modal content (if it has scrollable content)
6. Close modal
7. Verify page returns to EXACT scroll position

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Before Modal: `window.scrollY = _____`
- After Modal: `window.scrollY = _____`
- Exact Match: âœ… Yes / âŒ No (difference: _____ px)

**Observations:**
- [ ] Background completely locked (zero movement)
- [ ] Modal scrolls correctly
- [ ] Position preserved exactly
- [ ] No visual jumps or glitches

**Notes:**
```
(Record any issues, background scroll leakage, position mismatches)
```

---

### Test 2: iOS Keyboard Interaction
**Expected:** Keyboard doesn't break scroll lock, position preserved

**Steps:**
1. On iOS Safari, scroll page down
2. Open Episode Tracking modal (or Settings modal with text input)
3. Tap a text input field
4. Keyboard slides up
5. Try to scroll background page while keyboard is open
6. Verify background is STILL locked (try scrolling it)
7. Dismiss keyboard (tap outside or close button)
8. Verify modal still scrollable (if applicable)
9. Close modal
10. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Before Modal: `window.scrollY = _____`
- After Keyboard: Background locked? âœ… Yes / âŒ No
- After Modal Close: `window.scrollY = _____`
- Position Match: âœ… Yes / âŒ No (difference: _____ px)

**Observations:**
- [ ] Keyboard doesn't break scroll lock
- [ ] Background stays locked during keyboard
- [ ] Position preserved after keyboard dismiss
- [ ] No visual glitches during keyboard animation

**Notes:**
```
(Record keyboard behavior, any lock failures, position issues)
```

---

### Test 3: iOS Orientation Change
**Expected:** Orientation change handled gracefully, scroll position preserved

**Steps:**
1. On iOS device, scroll page down (note position)
2. Open Episode Tracking modal
3. Rotate device from portrait to landscape (or vice versa)
4. Wait for rotation to complete
5. Verify modal stays locked (background doesn't scroll)
6. Verify scroll position preserved after rotation
7. Rotate back to original orientation
8. Verify still locked, position preserved
9. Close modal
10. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Before Modal: `window.scrollY = _____`
- After Rotation 1: Locked? âœ… Yes / âŒ No
- After Rotation 2: Locked? âœ… Yes / âŒ No
- After Modal Close: `window.scrollY = _____`
- Position Match: âœ… Yes / âŒ No (difference: _____ px)

**Observations:**
- [ ] Modal stays locked during rotation
- [ ] Position preserved after each rotation
- [ ] No visual glitches
- [ ] Smooth rotation handling

**Notes:**
```
(Record rotation behavior, any lock failures, position jumps)
```

---

### Test 4: iOS Momentum Scroll
**Expected:** Momentum scroll handled, position correct

**Steps:**
1. On iOS device, quickly flick scroll page (momentum scroll)
2. While page is still momentum scrolling, open Episode Tracking modal
3. Verify modal opens immediately
4. Verify background locks (momentum should stop)
5. Close modal
6. Verify scroll position correct (accounting for momentum that occurred)

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Before Flick: `window.scrollY = _____`
- Momentum started: Yes / No
- Modal opened during momentum: Yes / No
- After Modal Close: `window.scrollY = _____`
- Position reasonable: âœ… Yes / âŒ No

**Observations:**
- [ ] Momentum scroll stops when modal opens
- [ ] Modal opens immediately (not delayed by momentum)
- [ ] Position is reasonable (may not be exact due to momentum, but should be close)
- [ ] No visual glitches

**Notes:**
```
(Record momentum scroll handling, any delays, position accuracy)
```

---

### Test 5: iOS Multiple Modals
**Expected:** Smooth modal transitions, no scroll jumps

**Steps:**
1. Open Episode Tracking modal
2. Note scroll position
3. Close modal
4. Immediately open Settings modal
5. Verify no scroll jumps between modals
6. Close Settings modal
7. Immediately open FlickWord modal
8. Verify no scroll jumps
9. Close FlickWord modal
10. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Position Check:**
- Starting: `window.scrollY = _____`
- After Modal 1: `window.scrollY = _____`
- After Modal 2: `window.scrollY = _____`
- After Modal 3: `window.scrollY = _____`
- Final Match: âœ… Yes / âŒ No

**Observations:**
- [ ] No scroll jumps between modals
- [ ] Smooth transitions
- [ ] Position preserved throughout
- [ ] All modals work correctly

**Notes:**
```
(Record modal transitions, any jumps, position issues)
```

---

### Test 6: iOS Safari Toolbar
**Expected:** Toolbar state doesn't affect scroll lock

**Steps:**
1. Scroll page down (toolbar hides automatically)
2. Open Episode Tracking modal
3. Verify lock works (background doesn't scroll)
4. While modal open, scroll page up (if possible) to show toolbar
5. Verify lock still works
6. Close modal
7. Verify scroll position correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Toolbar States Tested:**
- [ ] Toolbar hidden when modal opened
- [ ] Toolbar shown when modal opened
- [ ] Toolbar state change during modal

**Observations:**
- [ ] Lock works regardless of toolbar state
- [ ] Position preserved
- [ ] No visual glitches with toolbar animations

**Notes:**
```
(Record toolbar behavior, any lock failures related to toolbar)
```

---

## Regression Tests

### Non-iOS Browsers Still Work
- [ ] Test on Chrome Android (should use standard lock, not iOS fix)
- [ ] Test on Firefox Mobile (should use standard lock)
- [ ] Test on Desktop Safari (should use standard lock)
- [ ] Verify non-iOS browsers unaffected by iOS fixes

**Notes:**
```
(Any issues on non-iOS browsers?)
```

---

## Console Checks

### iOS-Specific Logging
- [ ] Open Safari Web Inspector (on Mac, connect iOS device)
- [ ] Check console for iOS-specific log messages
- [ ] Verify "iOS-specific lock applied" messages (if logging enabled)
- [ ] No errors related to iOS fixes

### Errors
- [ ] No console errors
- [ ] Errors found:
  ```
  (Paste errors here)
  ```

---

## Performance

- [ ] No performance regression on iOS
- [ ] Modal open/close feels smooth
- [ ] Scroll position restoration is quick
- [ ] No jank during keyboard animations
- [ ] No jank during orientation changes

---

## iOS-Specific Edge Cases

### Safe Area Handling
- [ ] Test on iPhone with notch (safe area insets)
- [ ] Verify scroll calculations account for safe areas
- [ ] Position restored correctly with safe areas

### Visual Viewport API
- [ ] Visual Viewport API supported? âœ… Yes / âŒ No
- [ ] Viewport resize handling works
- [ ] Keyboard handling uses Visual Viewport

---

## Overall Assessment

**Phase Status:** âœ… Ready to Proceed / âŒ Needs Fixes / âš ï¸ Minor Issues

**Summary:**
```
(Overall assessment, iOS-specific issues found)
```

**Critical iOS Issues:**
1. 
2. 
3. 

**Minor Issues:**
1. 
2. 
3. 

---

## Sign-Off

- [ ] All 6 iOS-specific tests pass
- [ ] Non-iOS browsers unaffected
- [ ] Performance acceptable
- [ ] Console clean (no errors)
- [ ] Ready for Phase 4

**Approved by:** _______________  
**Date:** _______________  
**Device Tested:** iPhone / iPad (specify model): _______________

---

## Debugging Tips for iOS

If tests fail on iOS:

1. **Enable verbose logging:**
   ```javascript
   localStorage.setItem('flag:scroll-logging', 'true');
   localStorage.setItem('flag:scroll-lock-safety', 'true');
   // Refresh page
   ```

2. **Check iOS detection:**
   ```javascript
   // Should return true on iOS Safari:
   navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')
   navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('CriOS')
   ```

3. **Check Visual Viewport:**
   ```javascript
   // Should exist on iOS Safari 13+
   window.visualViewport !== undefined
   window.visualViewport?.height
   ```

4. **Monitor scroll position:**
   ```javascript
   // Before opening modal
   const before = window.scrollY;
   // After closing modal
   const after = window.scrollY;
   console.log('Position difference:', Math.abs(after - before));
   ```

---

## Notes

**âš ï¸ Critical:** These tests MUST be run on actual iOS Safari. Desktop Safari or iOS Chrome will NOT trigger iOS-specific fixes.

**Visual Viewport API:**
- Available on iOS Safari 13+
- May not be available on older iOS versions
- Fallback handling should work


```

## tests\manual\PHASE_4_TEST_CHECKLIST.md
```
# Phase 4 Test Checklist - Modal Scroll Isolation Improvements

**Phase:** 4 - Modal Scroll Isolation Improvements  
**Feature Flag:** `flag:modal-scroll-isolation`  
**Date:** _______________  
**Tester:** _______________  
**Browser/Device:** _______________

---

## Pre-Test Setup

- [ ] Feature flag is enabled: `localStorage.setItem('flag:modal-scroll-isolation', 'true')`
- [ ] Phase 1 flag also enabled: `localStorage.setItem('flag:scroll-lock-safety', 'true')` (recommended)
- [ ] Page refreshed after flags enabled
- [ ] Browser console open for debugging
- [ ] Device ready for testing

**Verify Setup:**
```javascript
// In browser console:
isFeatureEnabled('modal-scroll-isolation')  // Should return true
window.modalScrollIsolation?.isModalIsolationEnabled()  // Should return true
```

---

## Test Cases

### Test 1: Modal Scroll Boundaries

**Expected:** Modal scroll boundaries respected, no background scroll during overscroll attempts

**Steps:**
1. Open Episode Tracking modal (or any modal with scrollable content)
2. Scroll modal content to the very top
3. Try to scroll past the top (drag/scroll upward beyond limit)
4. Verify NO background page scroll happens at all
5. Scroll modal content to the very bottom
6. Try to scroll past the bottom (drag/scroll downward beyond limit)
7. Verify NO background page scroll happens at all

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Observations:**
- [ ] Top boundary prevents background scroll
- [ ] Bottom boundary prevents background scroll
- [ ] Modal scroll still works normally (within boundaries)
- [ ] No visual glitches or jumps

**Notes:**
```
(Record any overscroll leakage, boundary issues)
```

---

### Test 2: Fast Scroll in Modal

**Expected:** Background absolutely locked during rapid modal scrolling

**Steps:**
1. Open Episode Tracking modal (or modal with lots of scrollable content)
2. Rapidly scroll up and down in the modal content (fast flick scrolling)
3. While rapidly scrolling, observe the background page
4. Verify background page stays COMPLETELY still (zero movement)
5. Continue rapid scrolling for 10-15 seconds
6. Verify background never moves, even slightly

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Observations:**
- [ ] Background completely locked during fast scroll
- [ ] No visual movement of background at all
- [ ] Modal scroll remains smooth
- [ ] No performance issues

**Notes:**
```
(Record any background scroll leakage during fast scrolling)
```

---

### Test 3: Modal Touch Edge Cases

**Expected:** Edge touches don't affect background, smooth transitions

**Steps:**
1. Open any modal
2. Touch near the edge of the modal (where background overlay is visible)
3. Drag your finger toward the background area (outside modal)
4. Verify background does NOT scroll at all
5. Drag your finger back into the modal area
6. Continue scrolling the modal content
7. Verify modal scrolling still works normally

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Observations:**
- [ ] Touching near edges doesn't scroll background
- [ ] Dragging to background area doesn't scroll background
- [ ] Modal scroll works when dragging back into modal
- [ ] Smooth transition between edge and modal area

**Notes:**
```
(Record edge case behavior, any background scroll from edge touches)
```

---

### Test 4: Nested Scrollable Areas

**Expected:** Nested scrolling works independently, background locked

**Steps:**
1. Open modal with nested scrollable content (if available)
   - If none exist, scroll a modal that has scrollable sections within scrollable modal
2. Scroll the inner scrollable area
3. Verify inner area scrolls independently
4. Scroll the outer modal area
5. Verify outer area scrolls independently
6. Verify background never scrolls during any of this
7. Test scrolling both simultaneously if possible

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Observations:**
- [ ] Inner scrollable area works independently
- [ ] Outer modal area works independently
- [ ] Background never scrolls
- [ ] No scroll conflicts between nested areas

**Notes:**
```
(Record nested scrolling behavior, any conflicts or background scroll)
```

---

### Test 5: Modal with Keyboard

**Expected:** Keyboard handling doesn't break scroll lock

**Steps:**
1. Open Settings modal (or any modal with text input)
2. Scroll modal to bottom
3. Tap a text input field at the bottom
4. Keyboard slides up
5. Input moves into view (normal behavior - this is OK)
6. While keyboard is open, try to scroll the background page
7. Verify background is STILL locked (doesn't scroll)
8. Try scrolling modal content (if still possible)
9. Close keyboard
10. Close modal
11. Verify scroll position is correct

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Observations:**
- [ ] Background stays locked during keyboard
- [ ] Modal scrolling still works with keyboard (if applicable)
- [ ] Position preserved after keyboard dismiss
- [ ] Position correct after modal close
- [ ] No visual glitches during keyboard animations

**Notes:**
```
(Record keyboard behavior, any lock failures, position issues)
```

---

### Test 6: Modal Scroll Performance

**Expected:** Smooth scrolling, no performance regression

**Steps:**
1. Open Episode Tracking modal (has lots of content)
2. Rapidly scroll through all the content
3. Scroll up and down repeatedly
4. Verify smooth 60fps scrolling (check visually - should be smooth)
5. Verify no jank or stuttering
6. Verify background still locked throughout (check after scrolling)
7. Open and close modal multiple times while scrolling rapidly

**Result:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Performance Check:**
- [ ] Smooth scrolling (60fps feel)
- [ ] No jank or stuttering
- [ ] No performance regression vs. before
- [ ] Background locked throughout
- [ ] No memory leaks (check with dev tools if possible)

**Notes:**
```
(Record performance issues, jank, stuttering, any regressions)
```

---

## Regression Tests

### Other Modals Still Work
- [ ] Test Settings modal (if different implementation)
- [ ] Test FlickWord modal
- [ ] Test Trivia modal
- [ ] Test Auth modal
- [ ] Test Help modal
- [ ] Verify all modals still open/close correctly
- [ ] Verify all modals have scroll isolation when enabled

**Notes:**
```
(Any issues with other modals?)
```

---

## Console Checks

### Debugging
- [ ] Check console for any errors related to modal scroll isolation
- [ ] Verify no warnings about preventDefault on passive listeners
- [ ] Check that isolation utilities are accessible:
  ```javascript
  window.modalScrollIsolation?.isModalIsolationEnabled()  // Should return true
  ```

### Errors
- [ ] No console errors
- [ ] Errors found:
  ```
  (Paste errors here)
  ```

---

## Cross-Browser Testing

- [ ] Chrome Desktop
- [ ] Firefox Desktop
- [ ] Safari Desktop (if available)
- [ ] Chrome Mobile (Android)
- [ ] Safari Mobile (iOS) - Note: May interact with Phase 3 iOS fixes
- [ ] Firefox Mobile (if applicable)

**Notes:**
```
(Any browser-specific issues?)
```

---

## Overall Assessment

**Phase Status:** âœ… Ready to Proceed / âŒ Needs Fixes / âš ï¸ Minor Issues

**Summary:**
```
(Overall assessment, modal scroll isolation issues found)
```

**Critical Issues:**
1. 
2. 
3. 

**Minor Issues:**
1. 
2. 
3. 

---

## Sign-Off

- [ ] All 6 modal scroll isolation tests pass
- [ ] Regression tests pass (other modals work)
- [ ] Performance acceptable
- [ ] Console clean (no errors)
- [ ] Cross-browser testing complete
- [ ] Ready for Phase 5

**Approved by:** _______________  
**Date:** _______________

---

## Debugging Tips

If tests fail:

1. **Enable verbose logging:**
   ```javascript
   localStorage.setItem('flag:scroll-logging', 'true');
   localStorage.setItem('flag:modal-scroll-isolation', 'true');
   localStorage.setItem('flag:scroll-lock-safety', 'true');
   // Refresh page
   ```

2. **Check modal isolation state:**
   ```javascript
   // Check if isolation is enabled
   window.modalScrollIsolation?.isModalIsolationEnabled()
   
   // Manually apply isolation to a modal (for testing)
   const modal = document.querySelector('[class*="modal"]');
   const overlay = document.querySelector('[class*="overlay"], [class*="backdrop"]');
   window.modalScrollIsolation?.applyModalScrollIsolation(modal, overlay);
   ```

3. **Verify overscroll-behavior CSS:**
   ```javascript
   // Check if CSS is applied
   const modalContent = document.querySelector('[class*="content"]');
   getComputedStyle(modalContent).overscrollBehavior  // Should be 'contain'
   ```

4. **Monitor scroll events:**
   ```javascript
   // Check if background scrolls during modal
   let backgroundScrollY = window.scrollY;
   // Open modal, scroll modal
   console.log('Background scroll change:', window.scrollY - backgroundScrollY);  // Should be 0
   ```

---

## Notes

**Modal Components Updated:**
- EpisodeTrackingModal (example implementation)
- Other modals can be updated similarly using `useModalScrollIsolation` hook

**Integration with Other Phases:**
- Phase 1 (scroll lock safety) should be enabled for best results
- Phase 3 (iOS fixes) may interact with modal isolation - test on iOS
- Phase 4 isolation works independently but benefits from Phase 1 safety improvements


```

## tests\manual\scroll-swipe-baseline.md
```
# Scroll & Swipe Baseline Behavior Documentation

**Date:** 2025-01-15  
**Purpose:** Document current behavior BEFORE any fixes are applied  
**Phase:** 0 - Foundation

---

## Test Environment

- **Browser:** _________________
- **Device:** _________________
- **OS Version:** _________________
- **Screen Size:** _________________
- **Orientation:** _________________

---

## Baseline Test Results

### Test 1: Main Page Vertical Scroll
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Open app on mobile device
2. Scroll page vertically up and down
3. Observe scroll behavior

**Observed Behavior:**
- [ ] Scrolls smoothly
- [ ] Scrolls with momentum (iOS)
- [ ] Scrolls without jank
- [ ] Can reach top of page
- [ ] Can reach bottom of page

**Notes:**
```
(Record any issues, quirks, or observations)
```

---

### Test 2: Card Horizontal Swipe
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Find a swipeable card
2. Swipe horizontally left
3. Swipe horizontally right
4. Observe behavior

**Observed Behavior:**
- [ ] Horizontal swipe works
- [ ] Page does NOT scroll vertically during horizontal swipe
- [ ] Page DOES scroll if swipe is more vertical than horizontal
- [ ] Swipe gestures are responsive
- [ ] Swipe animations are smooth

**Notes:**
```
(Record any issues, quirks, or observations)
```

---

### Test 3: Modal Background Scroll Lock
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Scroll page down to middle
2. Open any modal (Episode Tracking, Settings, FlickWord, Trivia)
3. Try to scroll background page
4. Observe behavior

**Observed Behavior:**
- [ ] Background page does NOT scroll when modal is open
- [ ] Background page DOES scroll (issue!)
- [ ] Background scrolls partially (partial lock)
- [ ] Scroll position preserved when modal closes
- [ ] Scroll position jumps when modal closes (issue!)

**Tested Modals:**
- [ ] Episode Tracking Modal
- [ ] Settings Modal
- [ ] FlickWord Modal
- [ ] Trivia Modal

**Notes:**
```
(Record which modals have issues and what the issues are)
```

---

### Test 4: Modal Content Scroll
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Open modal with scrollable content
2. Scroll content inside modal
3. Observe behavior

**Observed Behavior:**
- [ ] Modal content scrolls smoothly
- [ ] Background stays locked during modal scroll
- [ ] Modal scroll reaches top
- [ ] Modal scroll reaches bottom
- [ ] Overscroll doesn't affect background (iOS)

**Tested Modals:**
- [ ] Episode Tracking Modal (has scrollable content)
- [ ] Settings Modal (has scrollable content)

**Notes:**
```
(Record any scroll issues inside modals)
```

---

### Test 5: Modal Close & Scroll Position Restoration
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Scroll page to specific position (note the position)
2. Open modal
3. Scroll modal content (if applicable)
4. Close modal
5. Verify page is at original scroll position

**Observed Behavior:**
- [ ] Returns to exact original position
- [ ] Returns to wrong position (issue!)
- [ ] Jumps to top of page (issue!)
- [ ] Jumps to bottom of page (issue!)
- [ ] Position is close but not exact (partial)

**Test Results:**
| Starting Position | After Close | Correct? |
|------------------|-------------|----------|
| Scroll 25% down  |             |          |
| Scroll 50% down  |             |          |
| Scroll 75% down  |             |          |
| Scroll to bottom |             |          |

**Notes:**
```
(Record exact positions and issues)
```

---

### Test 6: Pull-to-Refresh (if applicable)
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial / âŒ Not Available

**Steps:**
1. Scroll page to very top
2. Pull down from top
3. Observe refresh behavior

**Observed Behavior:**
- [ ] Pull-to-refresh exists
- [ ] Pull-to-refresh triggers correctly
- [ ] Page doesn't scroll during pull
- [ ] Page DOES scroll during pull (issue!)
- [ ] Refresh indicator appears
- [ ] Smooth release animation

**Notes:**
```
(Record if pull-to-refresh exists and how it behaves)
```

---

### Test 7: iOS Safari Specific (iOS devices only)
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial / âŒ Not iOS

**Steps:**
1. Open modal
2. Tap text input (keyboard appears)
3. Try to scroll background
4. Dismiss keyboard
5. Close modal
6. Verify scroll position

**Observed Behavior:**
- [ ] Keyboard doesn't break scroll lock
- [ ] Keyboard DOES break scroll lock (issue!)
- [ ] Scroll position correct after keyboard dismiss
- [ ] Scroll position wrong after keyboard dismiss (issue!)
- [ ] Toolbar animations don't affect scroll lock

**Notes:**
```
(iOS Safari specific issues)
```

---

### Test 8: Rapid Modal Open/Close
**Status:** âœ… Pass / âŒ Fail / âš ï¸ Partial

**Steps:**
1. Open modal A
2. Immediately close it
3. Immediately open modal B
4. Close modal B
5. Verify scroll position

**Observed Behavior:**
- [ ] All modals work correctly
- [ ] Scroll position preserved
- [ ] No scroll jumps between modals
- [ ] Modals fail after rapid open/close (issue!)

**Notes:**
```
(Rapid interaction issues)
```

---

## Known Issues Summary

List all issues found during baseline testing:

1. **Issue:** _________________________________
   - **Frequency:** Always / Sometimes / Rare
   - **Severity:** Critical / High / Medium / Low
   - **Affected Components:** ________________

2. **Issue:** _________________________________
   - **Frequency:** Always / Sometimes / Rare
   - **Severity:** Critical / High / Medium / Low
   - **Affected Components:** ________________

3. **Issue:** _________________________________
   - **Frequency:** Always / Sometimes / Rare
   - **Severity:** Critical / High / Medium / Low
   - **Affected Components:** ________________

---

## Performance Notes

- Scroll smoothness: Excellent / Good / Fair / Poor
- Touch responsiveness: Excellent / Good / Fair / Poor
- Animation smoothness: Excellent / Good / Fair / Poor
- Any jank observed: Yes / No (describe if yes)

---

## Browser-Specific Observations

### iOS Safari
- [ ] Tested
- **Issues:** _________________________________

### Chrome Android
- [ ] Tested
- **Issues:** _________________________________

### Firefox Mobile
- [ ] Tested
- **Issues:** _________________________________

### Other Browser
- [ ] Tested
- **Issues:** _________________________________

---

## Next Steps

After completing baseline documentation:
1. Review all issues found
2. Prioritize issues for fixing
3. Proceed to Phase 1 with this baseline as reference


```

# Quick Stats
| Term | File Count |
|------|------------|
| FlickWord | 87 |
| FlickTrivia | 2 |
| flickword | 87 |
| flicktrivia | 2 |

# Summary
Total files analyzed: 87

_Report generated at C:\Users\likes\AppData\Local\Temp\flick_games_audit.md _
