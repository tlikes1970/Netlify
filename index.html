<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brutally Honest TV & Movie Tracker</title>
  <style>
    :root {
      --bg: #fff; --text: #000; --primary: #ff6b6b; --card: #f9f9f9; --border: #ddd;
      --success: #51cf66; --warning: #ffd43b; --danger: #ff6b6b; --purple: #845ec2;
    }
    
    body { 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: var(--text); margin: 0; padding: 20px; min-height: 100vh;
      animation: subtle-pulse 10s ease-in-out infinite;
    }
    
    @keyframes subtle-pulse {
      0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
      50% { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); }
    }
    
    .dark-mode { 
      --bg: #1a1a1a; --text: #f5f5f5; --card: #2d2d2d; --border: #444;
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;
      animation: dark-pulse 8s ease-in-out infinite;
    }
    
    @keyframes dark-pulse {
      0%, 100% { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important; }
      50% { background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%) !important; }
    }
    
    .main-container {
      max-width: 1200px; margin: 0 auto; background: var(--bg); 
      border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      backdrop-filter: blur(10px); border: 2px solid rgba(255,255,255,0.1);
    }
    
    .header { 
      display: flex; justify-content: space-between; align-items: center; 
      padding: 20px 0; border-bottom: 3px dashed var(--primary); margin-bottom: 30px;
      position: relative;
    }
    
    .header::after {
      content: "üíÄ"; position: absolute; right: 100px; top: 15px; 
      font-size: 24px; animation: spin 3s linear infinite;
    }
    
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    
    .title { 
      font-size: 2.5em; font-weight: bold; color: var(--primary); 
      text-shadow: 3px 3px 0px var(--purple); margin: 0;
      animation: bounce 2s ease-in-out infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    .user-section {
      display: flex; align-items: center; gap: 15px;
    }
    
    .name-input {
      padding: 12px; border: 2px solid var(--primary); border-radius: 25px;
      background: var(--card); color: var(--text); font-weight: bold;
      transition: all 0.3s ease; position: relative;
    }
    
    .name-input:focus {
      outline: none; border-color: var(--purple); 
      box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
      transform: scale(1.05);
    }
    
    .tab-container { 
      display: flex; background: var(--card); border-radius: 15px; 
      padding: 8px; margin: 30px 0; box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .tab { 
      flex: 1; padding: 15px 25px; border: none; background: transparent; 
      color: var(--text); cursor: pointer; border-radius: 10px; font-weight: bold;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); font-size: 16px;
      position: relative; overflow: hidden;
    }
    
    .tab::before {
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }
    
    .tab:hover::before { left: 100%; }
    
    .tab.active { 
      background: linear-gradient(45deg, var(--primary), var(--purple)); 
      color: white; transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .tab:hover { transform: translateY(-3px) scale(1.02); }
    
    button { 
      margin: 5px; padding: 12px 20px; border: none; border-radius: 25px; 
      background: linear-gradient(45deg, var(--primary), var(--purple)); 
      color: white; cursor: pointer; font-weight: bold; font-size: 14px;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position: relative; overflow: hidden;
    }
    
    button::before {
      content: ''; position: absolute; top: 50%; left: 50%;
      width: 0; height: 0; background: rgba(255,255,255,0.3);
      transition: all 0.3s ease; border-radius: 50%;
      transform: translate(-50%, -50%);
    }
    
    button:hover::before { width: 300px; height: 300px; }
    
    button:hover { 
      transform: translateY(-5px) scale(1.05); 
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    
    button:active { transform: translateY(-2px) scale(0.98); }
    
    button:disabled { 
      background: #666; cursor: not-allowed; transform: none;
      opacity: 0.6;
    }
    
    button.danger { background: linear-gradient(45deg, #ff4757, #ff3742); }
    button.success { background: linear-gradient(45deg, #2ed573, #1dd1a1); }
    button.secondary { background: linear-gradient(45deg, #747d8c, #57606f); }
    
    .search-container { 
      background: var(--card); padding: 25px; border-radius: 20px; 
      margin: 30px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 2px solid var(--primary); position: relative; overflow: hidden;
    }
    
    .search-container::before {
      content: 'üîç'; position: absolute; top: 10px; right: 15px; 
      font-size: 24px; opacity: 0.3;
    }
    
    input, select { 
      padding: 12px 15px; margin: 5px; border: 2px solid var(--border); 
      border-radius: 15px; background: var(--bg); color: var(--text);
      transition: all 0.3s ease; font-weight: 500;
    }
    
    input:focus, select:focus { 
      outline: none; border-color: var(--primary); 
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
      transform: scale(1.02);
    }
    
    .section { margin: 40px 0; }
    
    .section h3 { 
      color: var(--primary); margin-bottom: 20px; font-size: 1.8em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1); position: relative;
    }
    
    .count { 
      background: linear-gradient(45deg, var(--primary), var(--purple)); 
      color: white; padding: 5px 12px; border-radius: 20px; 
      font-size: 14px; font-weight: bold; margin-left: 10px;
      animation: pulse-count 2s ease-in-out infinite;
    }
    
    @keyframes pulse-count {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .list-container { 
      background: var(--card); border-radius: 15px; padding: 20px; 
      min-height: 80px; border: 3px dashed var(--border);
      transition: all 0.3s ease; position: relative;
    }
    
    .list-container:hover { 
      border-color: var(--primary); 
      box-shadow: 0 5px 20px rgba(255, 107, 107, 0.2);
    }
    
    .show-card { 
      display: flex; border: 2px solid var(--border); 
      border-radius: 15px; padding: 20px; margin: 15px 0; 
      background: var(--bg); box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position: relative; overflow: hidden;
    }
    
    .show-card::before {
      content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px;
      background: linear-gradient(45deg, var(--primary), var(--purple), var(--primary));
      z-index: -1; border-radius: 15px; opacity: 0; transition: opacity 0.3s ease;
    }
    
    .show-card:hover { 
      transform: translateY(-10px) scale(1.02); 
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    
    .show-card:hover::before { opacity: 1; }
    
    .show-poster { 
      width: 90px; height: 135px; border-radius: 10px; 
      object-fit: cover; margin-right: 20px; transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .show-poster:hover { transform: scale(1.05) rotate(2deg); }
    
    .poster-placeholder { 
      width: 90px; height: 135px; background: linear-gradient(45deg, #f0f0f0, #e0e0e0); 
      border-radius: 10px; display: flex; align-items: center; justify-content: center; 
      margin-right: 20px; color: #999; font-size: 12px; font-weight: bold;
      animation: placeholder-pulse 2s ease-in-out infinite;
    }
    
    @keyframes placeholder-pulse {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }
    
    .show-details { flex: 1; }
    
    .show-title { 
      font-size: 20px; font-weight: bold; margin: 0 0 10px 0; 
      cursor: pointer; transition: all 0.3s ease;
    }
    
    .show-title:hover { 
      color: var(--primary); transform: scale(1.02);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .show-meta { 
      color: #666; font-size: 14px; margin-bottom: 12px; 
      font-weight: 500;
    }
    
    .show-overview { 
      font-size: 14px; line-height: 1.6; margin-bottom: 15px; 
      max-height: 60px; overflow: hidden; cursor: pointer;
      transition: all 0.3s ease; position: relative;
    }
    
    .show-overview.expanded { max-height: none; }
    
    .show-overview:hover { color: var(--primary); }
    
    .show-actions { 
      display: flex; gap: 10px; flex-wrap: wrap; align-items: center; 
      margin-top: 15px;
    }
    
    .show-actions button { padding: 8px 15px; font-size: 12px; }
    
    .show-actions input { 
      max-width: 140px; padding: 8px 12px; font-size: 12px; 
    }
    
    .favorite.active { 
      background: linear-gradient(45deg, #ffd700, #ffed4e); 
      color: #000; animation: favorite-glow 1s ease-in-out infinite;
    }
    
    @keyframes favorite-glow {
      0%, 100% { box-shadow: 0 0 5px #ffd700; }
      50% { box-shadow: 0 0 20px #ffd700; }
    }
    
    .empty-state { 
      text-align: center; color: #666; padding: 40px 20px; 
      font-style: italic; font-size: 18px; position: relative;
    }
    
    .sassy-empty { 
      animation: sassy-bounce 3s ease-in-out infinite;
      font-weight: bold; color: var(--primary);
    }
    
    @keyframes sassy-bounce {
      0%, 100% { transform: rotate(-2deg); }
      50% { transform: rotate(2deg); }
    }
    
    .stats { 
      display: flex; gap: 20px; margin: 30px 0; flex-wrap: wrap;
    }
    
    .stat { 
      background: linear-gradient(135deg, var(--card), rgba(255,255,255,0.1)); 
      padding: 20px; border-radius: 15px; text-align: center; flex: 1; 
      min-width: 140px; border: 2px solid var(--primary);
      transition: all 0.3s ease; position: relative; overflow: hidden;
    }
    
    .stat::before {
      content: ''; position: absolute; top: -50%; left: -50%; 
      width: 200%; height: 200%; background: conic-gradient(transparent, rgba(255,107,107,0.1), transparent);
      animation: stat-rotate 4s linear infinite; z-index: 0;
    }
    
    @keyframes stat-rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .stat > * { position: relative; z-index: 1; }
    
    .stat:hover { 
      transform: translateY(-8px) scale(1.05); 
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }
    
    .stat-num { 
      font-size: 2.5em; font-weight: bold; color: var(--primary); 
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .stat-label { 
      font-size: 12px; color: #666; font-weight: bold; 
      text-transform: uppercase; letter-spacing: 1px;
    }
    
    .notification {
      position: fixed; top: 20px; right: 20px; z-index: 1000;
      padding: 15px 25px; border-radius: 10px; color: white;
      font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: slide-in 0.5s ease, slide-out 0.5s ease 2.5s forwards;
    }
    
    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slide-out {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .notification.success { background: var(--success); }
    .notification.error { background: var(--danger); }
    .notification.warning { background: var(--warning); color: #000; }
    
    .loading-container {
      text-align: center; padding: 40px; position: relative;
    }
    
    .loading-spinner {
      width: 50px; height: 50px; border: 5px solid var(--border);
      border-top: 5px solid var(--primary); border-radius: 50%;
      animation: spin-fast 1s linear infinite; margin: 0 auto 20px;
    }
    
    @keyframes spin-fast {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-weight: bold; color: var(--primary); font-size: 16px;
      animation: loading-pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes loading-pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    .easter-egg {
      position: fixed; bottom: 20px; right: 80px; 
      background: var(--purple); color: white; padding: 12px; 
      border-radius: 50%; cursor: pointer; z-index: 1000;
      transition: all 0.3s ease; font-size: 18px; width: 50px; height: 50px;
      display: flex; align-items: center; justify-content: center;
    }
    
    .easter-egg:hover {
      transform: scale(1.2) rotate(180deg);
      box-shadow: 0 5px 20px rgba(132, 94, 194, 0.5);
    }
    
    .feedback-button {
      position: fixed; bottom: 20px; right: 20px; 
      background: var(--primary); color: white; padding: 15px; 
      border-radius: 50%; cursor: pointer; z-index: 1001;
      transition: all 0.3s ease; font-size: 20px; width: 60px; height: 60px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
      animation: feedback-pulse 3s ease-in-out infinite;
    }
    
    @keyframes feedback-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); box-shadow: 0 6px 25px rgba(255, 107, 107, 0.5); }
    }
    
    .feedback-button:hover {
      transform: scale(1.2);
      box-shadow: 0 8px 30px rgba(255, 107, 107, 0.5);
    }
    
    .feedback-modal {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
      background: rgba(0,0,0,0.8); z-index: 2000; 
      display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(5px);
    }
    
    .feedback-content {
      background: var(--bg); border-radius: 20px; 
      max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      border: 2px solid var(--primary);
    }
    
    .feedback-header {
      padding: 25px 25px 0; display: flex; justify-content: space-between; 
      align-items: center; border-bottom: 2px dashed var(--primary); margin-bottom: 20px;
    }
    
    .feedback-header h3 {
      margin: 0; color: var(--primary); font-size: 1.5em;
    }
    
    .close-btn {
      background: none; border: none; font-size: 24px; 
      cursor: pointer; color: var(--text); padding: 5px;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      transform: rotate(90deg); color: var(--danger);
    }
    
    .feedback-body {
      padding: 0 25px 25px;
    }
    
    .feedback-body p {
      margin: 15px 0; color: var(--text);
    }
    
    .feedback-body textarea {
      width: 100%; height: 120px; padding: 15px; 
      border: 2px solid var(--border); border-radius: 10px; 
      background: var(--card); color: var(--text); resize: vertical;
      font-family: inherit; font-size: 14px;
    }
    
    .feedback-body textarea:focus {
      outline: none; border-color: var(--primary);
      box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
    }
    
    .feedback-rating {
      margin: 20px 0;
    }
    
    .rating-buttons {
      display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px;
    }
    
    .rating-btn {
      padding: 8px 12px; font-size: 14px; border-radius: 20px;
      background: var(--card); color: var(--text); border: 2px solid var(--border);
      transition: all 0.3s ease; cursor: pointer;
    }
    
    .rating-btn:hover, .rating-btn.selected {
      background: var(--primary); color: white; border-color: var(--primary);
      transform: scale(1.05);
    }
    
    .feedback-submit {
      width: 100%; margin: 15px 0; padding: 15px;
      font-size: 16px; font-weight: bold;
    }
    
    .admin-button {
      position: fixed; bottom: 90px; right: 20px; 
      background: #ffd700; color: #000; padding: 12px; 
      border-radius: 50%; cursor: pointer; z-index: 1001;
      transition: all 0.3s ease; font-size: 20px; width: 50px; height: 50px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 20px rgba(255, 215, 0, 0.4);
      animation: admin-glow 2s ease-in-out infinite;
    }
    
    @keyframes admin-glow {
      0%, 100% { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.4); }
      50% { box-shadow: 0 6px 30px rgba(255, 215, 0, 0.8); }
    }
    
    .admin-button:hover {
      transform: scale(1.2) rotate(15deg);
    }
    
    .admin-modal {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
      background: rgba(0,0,0,0.9); z-index: 3000; 
      display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(10px);
    }
    
    .admin-content {
      background: var(--bg); border-radius: 20px; 
      max-width: 800px; width: 95%; max-height: 90vh; overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 3px solid #ffd700;
    }
    
    .admin-header {
      padding: 25px 25px 0; display: flex; justify-content: space-between; 
      align-items: center; border-bottom: 2px dashed #ffd700; margin-bottom: 20px;
    }
    
    .admin-header h3 {
      margin: 0; color: #ffd700; font-size: 1.8em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .admin-body {
      padding: 0 25px 25px;
    }
    
    .admin-stats {
      display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;
    }
    
    .stat-item {
      background: var(--card); padding: 20px; border-radius: 15px; 
      text-align: center; flex: 1; min-width: 120px;
      border: 2px solid #ffd700;
    }
    
    .stat-item strong {
      display: block; font-size: 2em; color: #ffd700; margin-bottom: 5px;
    }
    
    .stat-item span {
      font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px;
    }
    
    .admin-actions {
      display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;
    }
    
    .admin-actions button {
      flex: 1; padding: 15px; font-size: 16px; font-weight: bold;
    }
    
    .feedback-list {
      max-height: 400px; overflow-y: auto;
    }
    
    .feedback-list h4 {
      color: var(--primary); margin-bottom: 15px; font-size: 1.3em;
    }
    
    .feedback-item {
      background: var(--card); padding: 15px; border-radius: 10px; 
      margin-bottom: 15px; border-left: 4px solid var(--primary);
    }
    
    .feedback-meta {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 10px; font-size: 12px; color: #666;
    }
    
    .feedback-rating {
      font-size: 14px; font-weight: bold;
    }
    
    .feedback-rating.rating-1 { color: #ff4757; }
    .feedback-rating.rating-2 { color: #ff6b6b; }
    .feedback-rating.rating-3 { color: #ffa502; }
    .feedback-rating.rating-4 { color: #2ed573; }
    .feedback-rating.rating-5 { color: #1dd1a1; }
    
    .feedback-text {
      color: var(--text); line-height: 1.5; font-style: italic;
    }
    
    .tip-bubble {
      position: fixed; bottom: 80px; right: 20px; z-index: 1000;
      background: var(--purple); color: white; padding: 15px 20px;
      border-radius: 20px; max-width: 250px; font-size: 14px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
      animation: bubble-bounce 0.5s ease;
    }
    
    @keyframes bubble-bounce {
      0% { transform: scale(0) translateY(20px); opacity: 0; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }
    
    @media (max-width: 768px) {
      .main-container { padding: 15px; margin: 10px; }
      .show-card { flex-direction: column; padding: 15px; }
      .show-poster, .poster-placeholder { 
        width: 70px; height: 105px; margin: 0 auto 15px auto; 
      }
      .stats { gap: 10px; }
      .stat { min-width: 100px; padding: 15px; }
      .title { font-size: 2em; }
      .header { flex-direction: column; gap: 15px; }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="header">
      <h1 class="title" id="welcomeText">Brutally Honest Tracker</h1>
      <div class="user-section">
        <input type="text" id="displayNameInput" class="name-input" placeholder="Enter your streaming alias...">
        <button id="darkModeToggle">üåô Go Dark Like Your Soul</button>
      </div>
    </div>

    <div class="tab-container">
      <button id="tvTab" class="tab active">üì∫ TV Shows</button>
      <button id="movieTab" class="tab">üé¨ Movies</button>
    </div>

    <div class="search-container">
      <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
        <input type="text" id="searchInput" placeholder="Search for something you'll actually finish..." style="flex: 1; min-width: 200px;">
        <select id="genreFilter"><option value="">All Genres (Good Luck)</option></select>
        <button id="searchBtn">üîç Find My Next Obsession</button>
        <button id="clearSearchBtn" class="secondary" style="display: none;">‚úñÔ∏è Clear</button>
      </div>
      <div style="display: flex; gap: 10px; align-items: center;">
        <button id="prevPageBtn" disabled>‚Üê Previous</button>
        <span id="pageInfo" style="font-weight: bold; color: var(--primary);">Page 1</span>
        <button id="nextPageBtn" disabled>Next ‚Üí</button>
      </div>
    </div>

    <div id="searchResults" class="section" style="display: none;">
      <h3>üéØ Search Results <span class="count" id="resultsCount">0</span></h3>
      <div id="searchResultsList" class="list-container"></div>
    </div>

    <div class="stats">
      <div class="stat">
        <div class="stat-num" id="watchingCount">0</div>
        <div class="stat-label">Currently Watching</div>
      </div>
      <div class="stat">
        <div class="stat-num" id="wishlistCount">0</div>
        <div class="stat-label">Will Probably Never Watch</div>
      </div>
      <div class="stat">
        <div class="stat-num" id="totalCount">0</div>
        <div class="stat-label">Total Commitment Issues</div>
      </div>
    </div>

    <div id="tvSection">
      <div class="section">
        <h3>üì∫ Currently Watching <span class="count" id="tvWatchingCount">0</span></h3>
        <div id="tvWatchingList" class="list-container">
          <div class="empty-state sassy-empty">No shows yet? What are you, productive or something? üôÑ</div>
        </div>
      </div>
      <div class="section">
        <h3>üîñ Want to Watch <span class="count" id="tvWishlistCount">0</span></h3>
        <div id="tvWishlistList" class="list-container">
          <div class="empty-state sassy-empty">Your wishlist is emptier than a Netflix comedy special üíÄ</div>
        </div>
      </div>
    </div>

    <div id="movieSection" style="display: none;">
      <div class="section">
        <h3>üé¨ Currently Watching <span class="count" id="movieWatchingCount">0</span></h3>
        <div id="movieWatchingList" class="list-container">
          <div class="empty-state sassy-empty">No movies? Are you allergic to entertainment? ü§î</div>
        </div>
      </div>
      <div class="section">
        <h3>üîñ Want to Watch <span class="count" id="movieWishlistCount">0</span></h3>
        <div id="movieWishlistList" class="list-container">
          <div class="empty-state sassy-empty">Congrats! You're watching... absolutely nothing. Revolutionary. üèÜ</div>
        </div>
      </div>
    </div>

    <div style="background: var(--card); padding: 25px; border-radius: 20px; margin: 40px 0; border: 2px solid var(--primary);">
      <h3 style="color: var(--primary); margin-top: 0;">üíæ Backup Your Questionable Taste</h3>
      <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
        <input type="file" id="importFile" accept=".json" style="max-width: 200px;">
        <button id="exportBtn" class="success">üì§ Export My Shame</button>
        <button id="clearAllBtn" class="danger">üóëÔ∏è Delete Everything (Nuclear Option)</button>
      </div>
    </div>
  </div>

  <div class="easter-egg" id="easterEgg">üé≠</div>
  
  <div class="feedback-button" id="feedbackBtn">üí¨</div>
  
  <!-- Secret Admin Button (triple-click the title to reveal) -->
  <div class="admin-button" id="adminBtn" style="display: none;">üëë</div>
  
  <!-- Admin Panel Modal -->
  <div class="admin-modal" id="adminModal" style="display: none;">
    <div class="admin-content">
      <div class="admin-header">
        <h3>üëë Secret Admin Panel</h3>
        <button class="close-btn" id="closeAdmin">‚úï</button>
      </div>
      <div class="admin-body">
        <div class="admin-stats">
          <div class="stat-item">
            <strong id="totalFeedback">0</strong>
            <span>Total Feedback</span>
          </div>
          <div class="stat-item">
            <strong id="avgRating">0</strong>
            <span>Avg Rating</span>
          </div>
          <div class="stat-item">
            <strong id="latestFeedback">Never</strong>
            <span>Latest Submission</span>
          </div>
        </div>
        
        <div class="admin-actions">
          <button id="exportFeedback" class="success">üì§ Export All Feedback</button>
          <button id="clearFeedback" class="danger">üóëÔ∏è Clear All Feedback</button>
        </div>
        
        <div class="feedback-list">
          <h4>Recent Feedback:</h4>
          <div id="feedbackItems"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="feedback-modal" id="feedbackModal" style="display: none;">
    <div class="feedback-content">
      <div class="feedback-header">
        <h3>üéØ Your Brutally Honest Feedback</h3>
        <button class="close-btn" id="closeFeedback">‚úï</button>
      </div>
      <div class="feedback-body">
        <p><strong>Help make this app less terrible!</strong> üòà</p>
        <textarea id="feedbackText" placeholder="What confused you? What's missing? What would make you actually pay for this? Be brutally honest..."></textarea>
        <div class="feedback-rating">
          <p><strong>Overall experience:</strong></p>
          <div class="rating-buttons">
            <button class="rating-btn" data-rating="1">üò§ Terrible</button>
            <button class="rating-btn" data-rating="2">üòï Meh</button>
            <button class="rating-btn" data-rating="3">üôÇ Decent</button>
            <button class="rating-btn" data-rating="4">üòç Love it</button>
            <button class="rating-btn" data-rating="5">ü§Ø Mind blown</button>
          </div>
        </div>
        <button id="submitFeedback" class="feedback-submit">üì§ Submit Feedback</button>
        <p class="feedback-note">Or email: feedback@yourdomain.com</p>
      </div>
    </div>
  </div>

  <script>
    /*
     * TV & Movie Tracker v1.0
     * Copyright (c) 2025 - All Rights Reserved
     * Unauthorized copying, distribution, or modification prohibited
     * This application is protected by intellectual property laws
     */
    
    // Obfuscated configuration
    const _0x4e8b=['https://image.tmdb.org/t/p/w200','/.netlify/functions/tmdb','https://corsproxy.io/?'];
    const TMDB_IMG_BASE=_0x4e8b[0],API_BASE=_0x4e8b[1],CORS_PROXY=_0x4e8b[2];
    
    let currentPage = 1, currentTab = 'tv', searchCache = [];
    
    const appData = {
      tv: { watching: [], wishlist: [] },
      movies: { watching: [], wishlist: [] },
      settings: { theme: 'light', displayName: '' }
    };

    // Anti-tampering check
    const _0x2f9a = () => {
      if(window.location.hostname !== 'zippy-meerkat-329c02.netlify.app' && 
         !window.location.hostname.includes('localhost') && 
         !window.location.hostname.includes('127.0.0.1')) {
        console.warn('‚ö†Ô∏è  Unauthorized deployment detected');
        return false;
      }
      return true;
    };

    // Sarcastic messages (obfuscated)
    const _0x8c4d = [
      "Finding shows you'll probably abandon after 2 episodes...",
      "Searching the depths of entertainment mediocrity...",
      "Loading... (This is taking longer than your last relationship)",
      "Fetching content that'll judge your life choices...",
      "Retrieving shows you'll add but never watch..."
    ];

    const _0x9d5e = {
      tv: {
        10759: "Action & Adventure (Because your life lacks both)",
        16: "Animation (For your inner child that refuses to grow up)",
        35: "Comedy (Your life isn't funny enough)",
        80: "Crime (Living vicariously through fictional criminals)",
        99: "Documentary (Pretending to be intellectual)",
        18: "Drama (More drama than your personal life)",
        10765: "Sci-Fi & Fantasy (Escaping reality since forever)"
      },
      movies: {
        28: "Action (Compensating for your sedentary lifestyle)",
        12: "Adventure (The closest you'll get to leaving your couch)",
        16: "Animation (Adulting is overrated)",
        35: "Comedy (Desperately seeking laughter)",
        80: "Crime (Your darkest fantasies)",
        99: "Documentary (Fake intellectual vibes)",
        18: "Drama (Emotional masochism)",
        14: "Fantasy (Reality is disappointing)",
        27: "Horror (Because your life isn't scary enough)",
        878: "Science Fiction (Future's looking bleak anyway)"
      }
    };

    const _0x3e7f = [
      "Pro tip: Having 500 items in your wishlist doesn't count as productivity! üéØ",
      "Fun fact: 'I'll watch it later' is the most common lie in streaming! ü§•",
      "Reality check: You have more shows bookmarked than days in the year! üìÖ",
      "Hot take: Your 'Currently Watching' list is more fiction than fantasy movies! üìö",
      "Reminder: Netflix doesn't pay you to collect shows like Pok√©mon cards! üÉè"
    ];

    // Initialize with domain check
    document.addEventListener('DOMContentLoaded', () => {
      if (!_0x2f9a()) return;
      loadAppData();
      setupEventListeners();
      loadGenres();
      updateUI();
      setupEasterEgg();
      setupSecretAdmin();
    });

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 3000);
    }

    function getRandomLoadingMessage() {
      return _0x8c4d[Math.floor(Math.random() * _0x8c4d.length)];
    }

    function createLoadingElement() {
      return `<div class="loading-container"><div class="loading-spinner"></div><div class="loading-text">${getRandomLoadingMessage()}</div></div>`;
    }

    function loadAppData() {
      const saved = localStorage.getItem('tvMovieTrackerData');
      if (saved) {
        try {
          Object.assign(appData, JSON.parse(saved));
        } catch (e) {
          console.error('Error loading data:', e);
          showNotification("Failed to load your data. Starting fresh! üî•", 'warning');
        }
      }
      
      if (appData.settings.theme === 'dark') {
        document.body.classList.add('dark-mode');
      }
      
      if (appData.settings.displayName) {
        document.getElementById('displayNameInput').value = appData.settings.displayName;
        document.getElementById('welcomeText').textContent = `${appData.settings.displayName}'s Chaos`;
      }
    }

    function saveAppData() {
      localStorage.setItem('tvMovieTrackerData', JSON.stringify(appData));
    }

    function setupEventListeners() {
      document.getElementById('darkModeToggle').onclick = () => {
        document.body.classList.toggle('dark-mode');
        appData.settings.theme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
        const isDark = document.body.classList.contains('dark-mode');
        document.getElementById('darkModeToggle').textContent = isDark ? '‚òÄÔ∏è Embrace The Light' : 'üåô Go Dark Like Your Soul';
        saveAppData();
        showNotification(isDark ? "Welcome to the dark side üòà" : "Returning to the light, coward? ‚òÄÔ∏è", 'success');
      };
      
      document.getElementById('displayNameInput').oninput = (e) => {
        appData.settings.displayName = e.target.value;
        document.getElementById('welcomeText').textContent = 
          e.target.value ? `${e.target.value}'s Chaos` : 'Brutally Honest Tracker';
        saveAppData();
      };
      
      document.getElementById('tvTab').onclick = () => switchTab('tv');
      document.getElementById('movieTab').onclick = () => switchTab('movies');
      
      document.getElementById('searchBtn').onclick = performSearch;
      document.getElementById('searchInput').onkeydown = (e) => {
        if (e.key === 'Enter') performSearch();
      };
      
      // Clear search functionality
      document.getElementById('clearSearchBtn').onclick = clearSearch;
      document.getElementById('searchInput').oninput = () => {
        const hasContent = document.getElementById('searchInput').value.trim() || 
                          document.getElementById('genreFilter').value;
        document.getElementById('clearSearchBtn').style.display = hasContent ? 'inline-block' : 'none';
      };
      document.getElementById('genreFilter').onchange = () => {
        const hasContent = document.getElementById('searchInput').value.trim() || 
                          document.getElementById('genreFilter').value;
        document.getElementById('clearSearchBtn').style.display = hasContent ? 'inline-block' : 'none';
      };
      
      document.getElementById('prevPageBtn').onclick = () => {
        if (currentPage > 1) {
          currentPage--;
          performSearch();
        }
      };
      
      document.getElementById('nextPageBtn').onclick = () => {
        currentPage++;
        performSearch();
      };
      
      document.getElementById('exportBtn').onclick = exportData;
      document.getElementById('importFile').onchange = importData;
      document.getElementById('clearAllBtn').onclick = () => {
        if (confirm('Are you SURE you want to delete everything? This nuclear option cannot be undone! üí•')) {
          appData.tv = { watching: [], wishlist: [] };
          appData.movies = { watching: [], wishlist: [] };
          saveAppData();
          updateUI();
          showNotification("Boom! Everything deleted. Hope you're happy! üíÄ", 'error');
        }
      };
    }

    function setupEasterEgg() {
      let clickCount = 0;
      document.getElementById('easterEgg').onclick = () => {
        clickCount++;
        if (clickCount % 3 === 0) {
          showRandomTip();
        }
      };
      
      // Feedback modal functionality
      const feedbackBtn = document.getElementById('feedbackBtn');
      const feedbackModal = document.getElementById('feedbackModal');
      const closeFeedback = document.getElementById('closeFeedback');
      const submitFeedback = document.getElementById('submitFeedback');
      const ratingBtns = document.querySelectorAll('.rating-btn');
      
      let selectedRating = 0;
      
      feedbackBtn.onclick = () => {
        feedbackModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };
      
      closeFeedback.onclick = () => {
        feedbackModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      };
      
      // Close on background click
      feedbackModal.onclick = (e) => {
        if (e.target === feedbackModal) {
          feedbackModal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      };
      
      // Rating selection
      ratingBtns.forEach(btn => {
        btn.onclick = () => {
          ratingBtns.forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          selectedRating = parseInt(btn.dataset.rating);
        };
      });
      
      // Submit feedback
      submitFeedback.onclick = () => {
        const feedbackText = document.getElementById('feedbackText').value.trim();
        
        if (!feedbackText && selectedRating === 0) {
          showNotification('Come on, give us SOMETHING to work with! üôÑ', 'warning');
          return;
        }
        
        // Store feedback locally for now (later: send to server)
        const feedback = {
          text: feedbackText,
          rating: selectedRating,
          timestamp: new Date().toISOString(),
          url: window.location.href
        };
        
        // Save to localStorage for now
        const existingFeedback = JSON.parse(localStorage.getItem('userFeedback') || '[]');
        existingFeedback.push(feedback);
        localStorage.setItem('userFeedback', JSON.stringify(existingFeedback));
        
        // Show success and close modal
        showNotification('Feedback submitted! We\'ll try not to disappoint you further! üéØ', 'success');
        feedbackModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        
        // Clear form
        document.getElementById('feedbackText').value = '';
        ratingBtns.forEach(b => b.classList.remove('selected'));
        selectedRating = 0;
      };
    }

    function setupSecretAdmin() {
      const title = document.getElementById('welcomeText');
      const adminBtn = document.getElementById('adminBtn');
      const adminModal = document.getElementById('adminModal');
      const closeAdmin = document.getElementById('closeAdmin');
      
      let clickCount = 0;
      let clickTimer = null;
      
      // Triple-click title to reveal admin button
      title.onclick = () => {
        clickCount++;
        clearTimeout(clickTimer);
        
        if (clickCount === 3) {
          adminBtn.style.display = 'flex';
          showNotification('üëë Admin mode activated!', 'success');
          clickCount = 0;
        } else {
          clickTimer = setTimeout(() => { clickCount = 0; }, 1000);
        }
      };
      
      // Admin button click
      adminBtn.onclick = () => {
        loadAdminData();
        adminModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };
      
      // Close admin modal
      closeAdmin.onclick = () => {
        adminModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      };
      
      adminModal.onclick = (e) => {
        if (e.target === adminModal) {
          adminModal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      };
      
      // Admin actions
      document.getElementById('exportFeedback').onclick = exportAllFeedback;
      document.getElementById('clearFeedback').onclick = () => {
        if (confirm('üö® DELETE ALL FEEDBACK? This cannot be undone!')) {
          localStorage.removeItem('userFeedback');
          loadAdminData();
          showNotification('All feedback deleted! üíÄ', 'success');
        }
      };
    }
    
    function loadAdminData() {
      const feedback = JSON.parse(localStorage.getItem('userFeedback') || '[]');
      
      // Update stats
      document.getElementById('totalFeedback').textContent = feedback.length;
      
      if (feedback.length > 0) {
        const ratings = feedback.filter(f => f.rating > 0).map(f => f.rating);
        const avgRating = ratings.length > 0 ? (ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(1) : 'N/A';
        document.getElementById('avgRating').textContent = avgRating;
        
        const latest = new Date(feedback[feedback.length - 1].timestamp);
        document.getElementById('latestFeedback').textContent = latest.toLocaleDateString() + ' ' + latest.toLocaleTimeString();
      } else {
        document.getElementById('avgRating').textContent = 'N/A';
        document.getElementById('latestFeedback').textContent = 'Never';
      }
      
      // Load feedback items (most recent first)
      const feedbackContainer = document.getElementById('feedbackItems');
      if (feedback.length === 0) {
        feedbackContainer.innerHTML = '<p style="text-align: center; color: #666; font-style: italic;">No feedback yet. Get those Reddit posts going! üöÄ</p>';
        return;
      }
      
      feedbackContainer.innerHTML = '';
      feedback.slice().reverse().slice(0, 10).forEach(item => {
        const feedbackItem = document.createElement('div');
        feedbackItem.className = 'feedback-item';
        
        const ratingText = item.rating > 0 ? getRatingText(item.rating) : 'No rating';
        const timestamp = new Date(item.timestamp).toLocaleDateString() + ' ' + new Date(item.timestamp).toLocaleTimeString();
        
        feedbackItem.innerHTML = `
          <div class="feedback-meta">
            <span class="feedback-rating rating-${item.rating}">${ratingText}</span>
            <span>${timestamp}</span>
          </div>
          <div class="feedback-text">${item.text || '<em>No text provided</em>'}</div>
        `;
        
        feedbackContainer.appendChild(feedbackItem);
      });
      
      if (feedback.length > 10) {
        const moreItem = document.createElement('p');
        moreItem.style.textAlign = 'center';
        moreItem.style.color = '#666';
        moreItem.style.fontStyle = 'italic';
        moreItem.textContent = `... and ${feedback.length - 10} more entries`;
        feedbackContainer.appendChild(moreItem);
      }
    }
    
    function getRatingText(rating) {
      const ratingTexts = {
        1: 'üò§ Terrible',
        2: 'üòï Meh', 
        3: 'üôÇ Decent',
        4: 'üòç Love it',
        5: 'ü§Ø Mind blown'
      };
      return ratingTexts[rating] || 'Unknown';
    }
    
    function exportAllFeedback() {
      const feedback = JSON.parse(localStorage.getItem('userFeedback') || '[]');
      
      if (feedback.length === 0) {
        showNotification('No feedback to export! üì≠', 'warning');
        return;
      }
      
      // Create CSV format
      const headers = ['Timestamp', 'Rating', 'Feedback Text', 'URL'];
      const csvContent = [
        headers.join(','),
        ...feedback.map(item => [
          item.timestamp,
          item.rating || 'N/A',
          `"${(item.text || '').replace(/"/g, '""')}"`, // Escape quotes for CSV
          item.url || ''
        ].join(','))
      ].join('\n');
      
      // Download CSV
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `feedback-export-${new Date().toISOString().split('T')[0]}.csv`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification(`Exported ${feedback.length} feedback entries! üìä`, 'success');
    }

    function clearSearch() {
      document.getElementById('searchInput').value = '';
      document.getElementById('genreFilter').value = '';
      document.getElementById('clearSearchBtn').style.display = 'none';
      document.getElementById('searchResults').style.display = 'none';
      currentPage = 1;
      document.getElementById('pageInfo').textContent = 'Page 1';
      document.getElementById('prevPageBtn').disabled = true;
      document.getElementById('nextPageBtn').disabled = true;
      searchCache = [];
      showNotification('Search cleared! Back to square one! üîÑ', 'success');
    }

    function showRandomTip() {
      const tip = _0x3e7f[Math.floor(Math.random() * _0x3e7f.length)];
      const bubble = document.createElement('div');
      bubble.className = 'tip-bubble';
      bubble.textContent = tip;
      document.body.appendChild(bubble);
      
      setTimeout(() => {
        if (bubble.parentNode) bubble.parentNode.removeChild(bubble);
      }, 4000);
    }

    function switchTab(tab) {
      currentTab = tab;
      document.getElementById('tvTab').className = `tab ${tab === 'tv' ? 'active' : ''}`;
      document.getElementById('movieTab').className = `tab ${tab === 'movies' ? 'active' : ''}`;
      document.getElementById('tvSection').style.display = tab === 'tv' ? 'block' : 'none';
      document.getElementById('movieSection').style.display = tab === 'movies' ? 'block' : 'none';
      
      currentPage = 1;
      document.getElementById('searchResults').style.display = 'none';
      loadGenres();
      updateUI();
      
      const tabType = tab === 'tv' ? 'TV shows' : 'movies';
      showNotification(`Switched to ${tabType}. Let the binge-planning begin! üì∫`, 'success');
    }

    async function loadGenres() {
      const type = currentTab === 'tv' ? 'tv' : 'movie';
      try {
        let response = await fetch(`${API_BASE}?endpoint=genre/${type}/list`);
        
        if (!response.ok && response.status === 404) {
          console.log('Netlify function not found, using CORS proxy');
          const apiUrl = `https://api.themoviedb.org/3/genre/${type}/list?api_key=b7247bb415b50f25b5e35e2566430b96`;
          response = await fetch(CORS_PROXY + encodeURIComponent(apiUrl));
        }
        
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const data = await response.json();
        const select = document.getElementById('genreFilter');
        select.innerHTML = '<option value="">All Genres (Good Luck)</option>';
        
        if (data.genres && data.genres.length > 0) {
          data.genres.forEach(genre => {
            const sassyName = _0x9d5e[currentTab][genre.id] || genre.name;
            select.innerHTML += `<option value="${genre.id}">${sassyName}</option>`;
          });
        }
      } catch (error) {
        console.error('Error loading genres:', error);
        const select = document.getElementById('genreFilter');
        const fallbackGenres = currentTab === 'tv' ? 
          [{id: 10759, name: 'Action & Adventure (Because your life lacks both)'}, {id: 16, name: 'Animation (For your inner child)'}, {id: 35, name: 'Comedy (Your life isn\'t funny enough)'}, {id: 80, name: 'Crime (Living vicariously)'}, {id: 99, name: 'Documentary (Pretending to be smart)'}, {id: 18, name: 'Drama (More drama than your life)'}, {id: 10765, name: 'Sci-Fi & Fantasy (Escaping reality)'}] :
          [{id: 28, name: 'Action (Compensating for couch life)'}, {id: 12, name: 'Adventure (Closest to leaving home)'}, {id: 16, name: 'Animation (Adulting is overrated)'}, {id: 35, name: 'Comedy (Desperately seeking laughs)'}, {id: 80, name: 'Crime (Your darkest fantasies)'}, {id: 99, name: 'Documentary (Fake intellectual vibes)'}, {id: 18, name: 'Drama (Emotional masochism)'}, {id: 14, name: 'Fantasy (Reality is disappointing)'}, {id: 27, name: 'Horror (Life isn\'t scary enough)'}, {id: 878, name: 'Science Fiction (Future looks bleak)'}];
        
        select.innerHTML = '<option value="">All Genres (Good Luck)</option>';
        fallbackGenres.forEach(genre => {
          select.innerHTML += `<option value="${genre.id}">${genre.name}</option>`;
        });
      }
    }

    async function performSearch() {
      const query = document.getElementById('searchInput').value.trim();
      const genre = document.getElementById('genreFilter').value;
      
      if (!query && !genre) {
        showNotification('Please enter a search term or select a genre, genius! ü§î', 'warning');
        return;
      }
      
      const container = document.getElementById('searchResultsList');
      container.innerHTML = createLoadingElement();
      document.getElementById('searchResults').style.display = 'block';
      
      try {
        const results = await fetchShowData(query, currentPage, genre);
        searchCache = results;
        displaySearchResults(results);
        updatePagination();
        
        if (results.length === 0) {
          showNotification('No results found. Try lowering your standards! üìâ', 'warning');
        } else {
          showNotification(`Found ${results.length} options for your viewing pleasure! üéØ`, 'success');
        }
      } catch (error) {
        container.innerHTML = `<div style="color: red; text-align: center; padding: 40px; font-weight: bold;">Search failed: ${error.message}<br><br>Maybe try turning it off and on again? ü§∑‚Äç‚ôÇÔ∏è</div>`;
        showNotification('Search failed. The internet is judging you! üåê', 'error');
      }
    }

    async function fetchShowData(query, page = 1, genreFilter = '') {
      if (!_0x2f9a()) throw new Error('Unauthorized access');
      
      const type = currentTab === 'tv' ? 'tv' : 'movie';
      let endpoint = `search/${type}`;
      let params = `endpoint=${endpoint}&page=${page}`;
      
      if (query) params += `&query=${encodeURIComponent(query)}`;
      if (genreFilter && !query) {
        endpoint = `discover/${type}`;
        params = `endpoint=${endpoint}&page=${page}&genre=${genreFilter}`;
      }
      
      try {
        const response = await fetch(`${API_BASE}?${params}`);
        
        if (!response.ok) {
          throw new Error(`Search service unavailable (${response.status}). Please try again later.`);
        }
        
        const data = await response.json();
        return data.results || [];
      } catch (error) {
        console.error('Fetch error:', error);
        throw new Error('Search temporarily unavailable. Our servers are probably binge-watching something! üì∫');
      }
    }

    function displaySearchResults(results) {
      const container = document.getElementById('searchResultsList');
      document.getElementById('resultsCount').textContent = results.length;
      
      if (results.length === 0) {
        container.innerHTML = '<div class="empty-state sassy-empty">No results found. Maybe try something that actually exists? ü§®</div>';
        return;
      }
      
      container.innerHTML = '';
      results.forEach(item => {
        const card = createShowCard(item, true);
        container.appendChild(card);
      });
    }

    function createShowCard(item, isSearchResult = false) {
      const card = document.createElement('div');
      card.className = 'show-card';
      
      const title = item.name || item.title || 'Unknown Title';
      const date = item.first_air_date || item.release_date || '';
      const rating = item.vote_average ? item.vote_average.toFixed(1) : 'N/A';
      const overview = item.overview || 'No description available.';
      
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      const isInWatching = appData[category].watching.some(show => show.id === item.id);
      const isInWishlist = appData[category].wishlist.some(show => show.id === item.id);
      
      const posterHtml = item.poster_path ? 
        `<img src="${TMDB_IMG_BASE}${item.poster_path}" alt="${title}" class="show-poster">` : 
        `<div class="poster-placeholder">No Image<br>Available üì∑</div>`;
      
      const actionsHtml = isSearchResult ? `
        <button onclick="addToList(${JSON.stringify(item).replace(/"/g, '&quot;')}, 'watching')" ${isInWatching ? 'disabled' : ''}>
          ${isInWatching ? '‚úì Already Watching' : '‚ñ∂Ô∏è Start Watching'}
        </button>
        <button onclick="addToList(${JSON.stringify(item).replace(/"/g, '&quot;')}, 'wishlist')" ${isInWishlist ? 'disabled' : ''}>
          ${isInWishlist ? '‚úì In Wishlist' : 'üîñ I\'ll Never Watch This'}
        </button>
      ` : `
        <button onclick="moveItem(${item.id}, 'watching')" ${isInWatching ? 'disabled' : ''}>‚Üí Currently Watching</button>
        <button onclick="moveItem(${item.id}, 'wishlist')" ${isInWishlist ? 'disabled' : ''}>‚Üí Wishlist of Shame</button>
        <button class="favorite ${item.favorite ? 'active' : ''}" onclick="toggleFavorite(${item.id})">‚≠ê ${item.favorite ? 'Favorited' : 'Favorite'}</button>
        <button class="danger" onclick="removeItem(${item.id})">üóëÔ∏è Bye Felicia</button>
        <input type="text" placeholder="Progress notes..." value="${item.progress || ''}" onchange="updateProgress(${item.id}, this.value)">
      `;
      
      card.innerHTML = `
        ${posterHtml}
        <div class="show-details">
          <h4 class="show-title">${title}</h4>
          <div class="show-meta">‚≠ê ${rating} ${date ? `‚Ä¢ ${date.split('-')[0]}` : ''}</div>
          <div class="show-overview" onclick="this.classList.toggle('expanded')">${overview}</div>
          <div class="show-actions">${actionsHtml}</div>
        </div>
      `;
      
      return card;
    }

    function addToList(item, listType) {
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      const newItem = {
        id: item.id,
        title: item.name || item.title,
        overview: item.overview,
        poster_path: item.poster_path,
        date: item.first_air_date || item.release_date,
        rating: item.vote_average,
        date_added: new Date().toISOString(),
        progress: '',
        favorite: false
      };
      
      if (!appData[category][listType].some(show => show.id === item.id)) {
        appData[category][listType].push(newItem);
        saveAppData();
        updateUI();
        performSearch();
        
        const listName = listType === 'watching' ? 'Currently Watching' : 'Wishlist of Shame';
        showNotification(`Added "${newItem.title}" to ${listName}! üéâ`, 'success');
      } else {
        showNotification('Already on your list, genius! üôÑ', 'warning');
      }
    }

    function moveItem(itemId, newListType) {
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      let item = null;
      let fromList = null;
      
      if (appData[category].watching.find(s => s.id === itemId)) {
        item = appData[category].watching.find(s => s.id === itemId);
        fromList = 'watching';
      } else if (appData[category].wishlist.find(s => s.id === itemId)) {
        item = appData[category].wishlist.find(s => s.id === itemId);
        fromList = 'wishlist';
      }
      
      if (item && fromList !== newListType) {
        appData[category][fromList] = appData[category][fromList].filter(s => s.id !== itemId);
        appData[category][newListType].push(item);
        saveAppData();
        updateUI();
        
        const fromName = fromList === 'watching' ? 'Currently Watching' : 'Wishlist';
        const toName = newListType === 'watching' ? 'Currently Watching' : 'Wishlist';
        showNotification(`Moved "${item.title}" from ${fromName} to ${toName}! üì¶`, 'success');
      }
    }

    function removeItem(itemId) {
      if (confirm('Remove this item? It\'s probably for the best... üóëÔ∏è')) {
        const category = currentTab === 'tv' ? 'tv' : 'movies';
        const item = appData[category].watching.find(s => s.id === itemId) || 
                     appData[category].wishlist.find(s => s.id === itemId);
        
        appData[category].watching = appData[category].watching.filter(s => s.id !== itemId);
        appData[category].wishlist = appData[category].wishlist.filter(s => s.id !== itemId);
        saveAppData();
        updateUI();
        
        showNotification(`"${item?.title || 'Item'}" has been yeeted into the void! üöÄ`, 'success');
      }
    }

    function toggleFavorite(itemId) {
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      let item = appData[category].watching.find(s => s.id === itemId) || 
                 appData[category].wishlist.find(s => s.id === itemId);
      if (item) {
        item.favorite = !item.favorite;
        saveAppData();
        updateUI();
        
        const action = item.favorite ? 'favorited' : 'unfavorited';
        showNotification(`${item.title} ${action}! ${item.favorite ? '‚≠ê' : 'üíî'}`, 'success');
      }
    }

    function updateProgress(itemId, progress) {
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      let item = appData[category].watching.find(s => s.id === itemId) || 
                 appData[category].wishlist.find(s => s.id === itemId);
      if (item) {
        item.progress = progress;
        saveAppData();
      }
    }

    function updateUI() {
      const category = currentTab === 'tv' ? 'tv' : 'movies';
      const watching = appData[category].watching;
      const wishlist = appData[category].wishlist;
      
      const watchingContainer = document.getElementById(currentTab === 'tv' ? 'tvWatchingList' : 'movieWatchingList');
      if (watching.length === 0) {
        const emptyMessages = currentTab === 'tv' ? 
          'No shows yet? What are you, productive or something? üôÑ' :
          'No movies? Are you allergic to entertainment? ü§î';
        watchingContainer.innerHTML = `<div class="empty-state sassy-empty">${emptyMessages}</div>`;
      } else {
        watchingContainer.innerHTML = '';
        watching.forEach(item => {
          watchingContainer.appendChild(createShowCard(item, false));
        });
      }
      
      const wishlistContainer = document.getElementById(currentTab === 'tv' ? 'tvWishlistList' : 'movieWishlistList');
      if (wishlist.length === 0) {
        const emptyMessages = currentTab === 'tv' ? 
          'Your wishlist is emptier than a Netflix comedy special üíÄ' :
          'Congrats! You\'re watching... absolutely nothing. Revolutionary. üèÜ';
        wishlistContainer.innerHTML = `<div class="empty-state sassy-empty">${emptyMessages}</div>`;
      } else {
        wishlistContainer.innerHTML = '';
        wishlist.forEach(item => {
          wishlistContainer.appendChild(createShowCard(item, false));
        });
      }
      
      document.getElementById(currentTab === 'tv' ? 'tvWatchingCount' : 'movieWatchingCount').textContent = watching.length;
      document.getElementById(currentTab === 'tv' ? 'tvWishlistCount' : 'movieWishlistCount').textContent = wishlist.length;
      
      const totalWatching = appData.tv.watching.length + appData.movies.watching.length;
      const totalWishlist = appData.tv.wishlist.length + appData.movies.wishlist.length;
      document.getElementById('watchingCount').textContent = totalWatching;
      document.getElementById('wishlistCount').textContent = totalWishlist;
      document.getElementById('totalCount').textContent = totalWatching + totalWishlist;
    }

    function updatePagination() {
      document.getElementById('pageInfo').textContent = `Page ${currentPage}`;
      document.getElementById('prevPageBtn').disabled = currentPage === 1;
      document.getElementById('nextPageBtn').disabled = searchCache.length < 20;
    }

    function exportData() {
      const blob = new Blob([JSON.stringify(appData, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `questionable-taste-backup-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification('Your questionable taste has been exported! üì§', 'success');
    }

    function importData(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(event) {
        try {
          const imported = JSON.parse(event.target.result);
          if (confirm('Import data? This will overwrite your current collection of digital hoarding! üíæ')) {
            Object.assign(appData, imported);
            saveAppData();
            updateUI();
            showNotification('Data imported! Your taste is still questionable! üéâ', 'success');
          }
        } catch (error) {
          showNotification('Invalid file format. Even your backups are broken! üí•', 'error');
        }
      };
      reader.readAsText(file);
    }
  </script>
</body>
</html>