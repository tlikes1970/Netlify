[functions]
directory = "apps/web/netlify/functions"

[build]
# Build the React app from apps/web directory
base = "apps/web"
command = "npm run build"
publish = "dist"

[build.environment]
NODE_VERSION = "18"

[dev]
# Run the Vite app inside apps/web
command = "npm run dev --prefix apps/web"
targetPort = 5173
publish = "apps/web"

# Optional pretty URLs for functions
[[redirects]]
from = "/api/*"
to = "/.netlify/functions/:splat"
status = 200
