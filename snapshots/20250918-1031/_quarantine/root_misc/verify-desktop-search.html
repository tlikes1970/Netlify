<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop Search Row Verification</title>
    <style>
        body { margin: 20px; font-family: Arial, sans-serif; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .pass { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button { margin: 5px; padding: 8px 16px; }
        #viewport-info { font-weight: bold; margin: 10px 0; }
        
        /* Simulate the actual search row structure from the app */
        .top-search {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #dee2e6;
        }
        
        .search-row {
            position: relative;
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: nowrap;
            padding-top: 26px;
        }
        
        .search-input {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: white;
            color: #333;
            min-width: 300px;
        }
        
        .genre-filter {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: white;
            color: #333;
        }
        
        .btn {
            padding: 8px 16px;
            border: 1px solid #007bff;
            background: #007bff;
            color: white;
            border-radius: 8px;
            cursor: pointer;
        }
        
        /* Our new CSS rule - exactly as implemented */
        @media (min-width: 641px) {
            .top-search .search-row {
                display: grid !important;
                grid-template-columns: minmax(320px, 1fr) max-content max-content max-content !important;
                align-items: center !important;
                column-gap: 8px !important;
                flex-wrap: unset !important;
            }

            .top-search .search-input {
                min-width: 0 !important;
                width: 100% !important;
            }

            .top-search .genre-filter {
                width: max-content !important;
                min-width: 120px !important;
            }
        }
    </style>
</head>
<body>
    <h1>Desktop Search Row Verification</h1>
    
    <div id="viewport-info">Viewport Width: <span id="viewport-width"></span>px</div>
    
    <div id="test-results"></div>
    
    <div class="top-search">
        <div class="search-row">
            <input class="search-input" placeholder="Search for shows and movies" />
            <select class="genre-filter">
                <option>All Genres</option>
                <option>Action</option>
                <option>Comedy</option>
            </select>
            <button class="btn search-btn">Search</button>
            <button class="btn clear-search-btn">Clear</button>
        </div>
    </div>
    
    <div>
        <button onclick="testDesktop()">Test Desktop (1200px)</button>
        <button onclick="testMobile()">Test Mobile (375px)</button>
        <button onclick="testEdge()">Test Edge (641px)</button>
        <button onclick="testWide()">Test Wide (1920px)</button>
        <button onclick="runAllTests()">Run All Tests</button>
    </div>

    <script>
        function updateViewportInfo() {
            document.getElementById('viewport-width').textContent = window.innerWidth;
        }

        function addTestResult(message, passed) {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${passed ? 'pass' : 'fail'}`;
            div.textContent = message;
            results.appendChild(div);
        }

        function addInfo(message) {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = 'test-result info';
            div.textContent = message;
            results.appendChild(div);
        }

        function testDesktop() {
            document.body.style.width = '1200px';
            window.dispatchEvent(new Event('resize'));
            updateViewportInfo();
            
            const searchRow = document.querySelector('.search-row');
            const searchInput = document.querySelector('.search-input');
            const genreFilter = document.querySelector('.genre-filter');
            
            const display = getComputedStyle(searchRow).display;
            const gridTemplateColumns = getComputedStyle(searchRow).gridTemplateColumns;
            const inputMinWidth = getComputedStyle(searchInput).minWidth;
            const genreWidth = getComputedStyle(genreFilter).width;
            
            addTestResult(`Desktop (1200px): display=${display}`, display === 'grid');
            addTestResult(`Grid template: ${gridTemplateColumns}`, gridTemplateColumns.includes('px'));
            addTestResult(`Input min-width: ${inputMinWidth}`, inputMinWidth === '0px');
            addTestResult(`Genre width: ${genreWidth}`, genreWidth !== 'auto');
        }

        function testMobile() {
            document.body.style.width = '375px';
            window.dispatchEvent(new Event('resize'));
            updateViewportInfo();
            
            const searchRow = document.querySelector('.search-row');
            const display = getComputedStyle(searchRow).display;
            
            addTestResult(`Mobile (375px): display=${display} - ${display === 'flex' ? 'PASS' : 'FAIL'}`, display === 'flex');
        }

        function testEdge() {
            document.body.style.width = '641px';
            window.dispatchEvent(new Event('resize'));
            updateViewportInfo();
            
            const searchRow = document.querySelector('.search-row');
            const display = getComputedStyle(searchRow).display;
            const gridTemplateColumns = getComputedStyle(searchRow).gridTemplateColumns;
            
            addTestResult(`Edge (641px): display=${display}`, display === 'grid');
            addTestResult(`Grid template: ${gridTemplateColumns}`, gridTemplateColumns.includes('px'));
        }

        function testWide() {
            document.body.style.width = '1920px';
            window.dispatchEvent(new Event('resize'));
            updateViewportInfo();
            
            const searchRow = document.querySelector('.search-row');
            const display = getComputedStyle(searchRow).display;
            const gridTemplateColumns = getComputedStyle(searchRow).gridTemplateColumns;
            
            addTestResult(`Wide (1920px): display=${display}`, display === 'grid');
            addTestResult(`Grid template: ${gridTemplateColumns}`, gridTemplateColumns.includes('px'));
        }

        function runAllTests() {
            document.getElementById('test-results').innerHTML = '';
            addInfo('Running all desktop search row tests...');
            
            testDesktop();
            testMobile();
            testEdge();
            testWide();
            
            addInfo('All tests completed!');
        }

        // Initialize
        updateViewportInfo();
        addInfo('Desktop Search Row Verification Page Loaded');
        
        // Run initial test
        testDesktop();
    </script>
</body>
</html>
