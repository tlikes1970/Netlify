/* ============== Internationalization (i18n) ============== */

const I18N = {
  en: {
    go_dark: "üåô Go Dark",
    go_light: "‚òÄÔ∏è Go Light",
    app_title: "Flicklet",
    subtitle: "TV & Movie Tracker",
    binge_total: "Total Binge Time",
    currently_watching: "Currently Watching",
    want_to_watch: "Want to Watch",
    already_watched: "Already Watched",
    streaming_on: "Streaming",
    clear: "Clear",
    series_complete: "Series Complete",
    coming_soon: "Coming Soon",
    currently_airing: "Currently Airing",
    next: "Next",
    last: "Last",
    start: "Start",
    because_you_liked: "Because you liked",
    search_placeholder: "Search for shows or movies...",
    search_tips: "Search tips: Use * for wildcards (e.g., \"marvel*\" for Marvel shows)",
    welcome_message: "Welcome to Flicklet! Start by searching for a show or movie you love.",
    all_genres: "All Genres",
    search: "Search",
    notes_tags: "Notes/Tags",
    remove: "Remove",
    your_rating: "Your Rating",
    welcome_title: "Welcome! What should we call you?",
    welcome_subtitle: "This will personalize your headers and stats.",
    display_name: "Display name",
    save: "Save",
    sign_in_title: "Sign in to sync",
    sign_in_subtitle: "Sign in to back up your lists and sync across devices.",
    continue_google: "Continue with Google",
    email_signin: "Email Sign-In",
    sign_out: "Sign Out",
    home: "Home",
    discover: "Discover",
    settings: "Settings",
    general: "General",
    general_description: "Manage your account and basic preferences",
    display_name: "Display Name",
    my_statistics: "My Statistics",
    not_interested_management: "Not Interested Management",
    not_interested_description: "Manage shows and movies you've marked as not interested",
    manage_not_interested_list: "Manage Not Interested List",
    notifications: "Notifications",
    notifications_description: "Choose which types of notifications you'd like to receive",
    episode_alerts: "Upcoming episode alerts",
    weekly_discover: "Weekly discover picks",
    monthly_digest: "Monthly stats digest",
    layout_settings: "Layout Settings",
    layout_description: "Customize how your lists and cards are displayed",
    condensed_list_view: "Condensed list view (more items per screen)",
    show_posters: "Show movie/TV show posters",
    dark_mode: "Dark mode (auto-detect system preference)",
    home_page_lists: "Home Page TV/Movie Lists",
    data_management: "Data Management",
    data_description: "Export, import, or reset your data",
    export_json: "Export JSON",
    import_json: "Import JSON",
    extra_trivia_pro: "Extra Trivia (Pro)",
    export_csv_pro: "Export CSV (Pro)",
    reset_all_data: "Reset All Data",
    data_hint: "Export saves flicklet-export.json to your device's Downloads/Files. Import accepts a valid Flicklet export.",
    pro_features: "Pro Features",
    pro_description: "Unlock advanced features and premium content with Flicklet Pro",
    preview_pro_features: "Preview Pro Features",
    pro_hint: "Toggle Pro features on/off to see what's available",
    pro_features_include: "Pro Features Include:",
    share_your_thoughts: "Share Your Thoughts",
    feedback_working: "Share your thoughts! Give us app feedback, tell us what's working (or not), share a quote for our rotation, make a confession, or just vent. We're listening!",
    your_message: "Your Message",
    feedback_placeholder: "Share your thoughts, feedback, quotes, or just vent! We're listening.",
    share_it: "Share It!",
    no_items: "No items.",
    no_description: "No description.",
    already_in_list: "Already in {list}.",
    moved_to: "Moved to {list}.",
    added_to: "Added to {list}.",
    feedback: "Share Your Thoughts",
    feedback_placeholder: "Share your thoughts, feedback, quotes, confessions, or just vent here...",
    send: "Share It!",
    search_results: "Search Results",
    no_results: "No results",
    searching: "Searching...",
    advanced: "Advanced",
    search_failed: "Search failed",
    search_results_cleared: "Search results cleared due to language change.",
    please_search_again: "Please search again to see results in the new language.",
    episode_alerts: "Episode alerts",
    weekly_discover: "Weekly discover picks",
    monthly_digest: "Monthly stats digest",
    backup_import: "Backup & Import",
    nuclear_option: "Nuclear Option",
    share_this_list: "Share This List",
    share_selected: "Select Items to Share",
    share_link: "Share link",
    share_instructions: "Click to select which shows and movies to share",
    choose_file: "Choose File",
    no_file_chosen: "No file chosen",
    upcoming_episode: "Upcoming episode",
    welcome: "Welcome",
    theme: "Theme",
    theme_description: "Switch between different visual themes for the app.",
    mardi_gras_mode: "Mardi Gras mode",
    sign_in_account: "Sign in / Account",
    language: "Language",
    search_for_shows: "Search for shows or movies...",
    currently_watching_count: "Currently Watching",
    want_to_watch_count: "Want to Watch",
    already_watched_count: "Already Watched",
    discover_description: "Recommendations based on your likes and ratings.",
    settings_description: "Application settings",
    display_name_placeholder: "Display name",
    save_name: "Save",
    pro_simulate: "Pro (simulate)",
    notifications: "Notifications",
    stats: "Stats",
    total_items: "Total items",
    watching_count: "Watching",
    wishlist_count: "Wishlist",
    watched_count: "Watched",
    top_genres: "Top Genres",
    average_rating: "Average Rating",
    loading: "Loading...",
    failed_to_load: "Failed to load",
    not_enough_signals: "Not enough signals yet. Like or rate a few items first.",
    recommendations_failed: "Failed to load recommendations.",
    // New strings from recent updates
    auth_system_unavailable: "Authentication system is not available. Please refresh the page.",
    signed_in_successfully: "Signed in successfully",
    error_loading_user_data: "Error loading user data. Please try again.",
    auth_system_error: "Authentication system error. Please refresh the page.",
    firestore_not_available: "Firestore not available",
    no_displayname_field: "No displayName field to remove",
    what_should_we_call_you: "What should we call you?",
    your_handle: "Your handle",
    enter_key: "Enter",
    account: "Account",
    user: "User",
    sign_in_account_title: "Sign in / Account",
    signed_in_as: "Signed in as",
    click_to_sign_out: "Sign out here",
    unknown_data_action: "Unknown data-action",
    auth_system_loading: "Authentication system is loading. Please try again in a moment.",
    sign_in_to_sync: "Sign in to sync",
    sign_in_subtitle_text: "Sign in to back up your lists and sync across devices.",
    google_signin_unavailable: "Google sign-in is not available. Please refresh the page.",
    apple_signin_unavailable: "Apple sign-in is not available. Please refresh the page.",
    email_signin_unavailable: "Email sign-in is not available. Please refresh the page.",
    unable_to_show_signin: "Unable to show sign-in modal. Please refresh the page.",
    signin_system_not_ready: "Sign-in system is not ready. Please refresh the page.",
    unknown: "Unknown",
    sign_out_confirmation: "Sign out as",
    email_label: "Email",
    signed_out_successfully: "Signed out successfully",
    sign_out_failed: "Sign out failed",
    not_interested: "Not Interested",
    language_changed_to: "Language changed to {lang}"
  },
  es: {
    go_dark: "üåô Modo Oscuro",
    go_light: "‚òÄÔ∏è Modo Claro",
    app_title: "Flicklet",
    subtitle: "Rastreador de TV y Pel√≠culas",
    binge_total: "Tiempo Total de Marat√≥n",
    currently_watching: "Viendo Actualmente",
    want_to_watch: "Quiero Ver",
    already_watched: "Ya Visto",
    streaming_on: "Transmitiendo",
    clear: "Limpiar",
    series_complete: "Serie Completa",
    coming_soon: "Pr√≥ximamente",
    currently_airing: "Transmiti√©ndose Actualmente",
    next: "Siguiente",
    last: "√öltimo",
    start: "Comenzar",
    because_you_liked: "Porque te gust√≥",
    search_placeholder: "Buscar series o pel√≠culas...",
    search_tips: "Consejos de b√∫squeda: Usa * para comodines (ej., \"marvel*\" para series de Marvel)",
    welcome_message: "¬°Bienvenido a Flicklet! Comienza buscando una serie o pel√≠cula que te guste.",
    all_genres: "Todos los G√©neros",
    search: "Buscar",
    notes_tags: "Notas/Etiquetas",
    remove: "Eliminar",
    your_rating: "Tu Calificaci√≥n",
    welcome_title: "¬°Bienvenido! ¬øC√≥mo deber√≠amos llamarte?",
    welcome_subtitle: "Esto personalizar√° tus encabezados y estad√≠sticas.",
    display_name: "Nombre de pantalla",
    save: "Guardar",
    sign_in_title: "Inicia sesi√≥n para sincronizar",
    sign_in_subtitle: "Inicia sesi√≥n para respaldar tus listas y sincronizar entre dispositivos.",
    continue_google: "Continuar con Google",
    email_signin: "Inicio de Sesi√≥n por Email",
    sign_out: "Cerrar Sesi√≥n",
    home: "Inicio",
    discover: "Descubrir",
    settings: "Configuraci√≥n",
    general: "General",
    general_description: "Gestiona tu cuenta y preferencias b√°sicas",
    display_name: "Nombre para Mostrar",
    my_statistics: "Mis Estad√≠sticas",
    not_interested_management: "Gesti√≥n de No Interesado",
    not_interested_description: "Gestiona programas y pel√≠culas que has marcado como no interesado",
    manage_not_interested_list: "Gestionar Lista de No Interesado",
    notifications: "Notificaciones",
    notifications_description: "Elige qu√© tipos de notificaciones quieres recibir",
    episode_alerts: "Alertas de episodios pr√≥ximos",
    weekly_discover: "Descubrimientos semanales",
    monthly_digest: "Resumen mensual de estad√≠sticas",
    layout_settings: "Configuraci√≥n de Dise√±o",
    layout_description: "Personaliza c√≥mo se muestran tus listas y tarjetas",
    condensed_list_view: "Vista de lista condensada (m√°s elementos por pantalla)",
    show_posters: "Mostrar carteles de pel√≠culas/programas de TV",
    dark_mode: "Modo oscuro (detectar autom√°ticamente preferencia del sistema)",
    home_page_lists: "Listas de TV/Pel√≠culas de la P√°gina Principal",
    data_management: "Gesti√≥n de Datos",
    data_description: "Exportar, importar o restablecer tus datos",
    export_json: "Exportar JSON",
    import_json: "Importar JSON",
    extra_trivia_pro: "Trivia Extra (Pro)",
    export_csv_pro: "Exportar CSV (Pro)",
    reset_all_data: "Restablecer Todos los Datos",
    data_hint: "La exportaci√≥n guarda flicklet-export.json en la carpeta Descargas/Archivos de tu dispositivo. La importaci√≥n acepta una exportaci√≥n v√°lida de Flicklet.",
    pro_features: "Caracter√≠sticas Pro",
    pro_description: "Desbloquea caracter√≠sticas avanzadas y contenido premium con Flicklet Pro",
    preview_pro_features: "Vista Previa de Caracter√≠sticas Pro",
    pro_hint: "Activa/desactiva las caracter√≠sticas Pro para ver qu√© est√° disponible",
    pro_features_include: "Las Caracter√≠sticas Pro Incluyen:",
    share_your_thoughts: "Comparte Tus Pensamientos",
    feedback_working: "¬°Comparte tus pensamientos! Danos retroalimentaci√≥n de la app, cu√©ntanos qu√© funciona (o no), comparte una cita para nuestra rotaci√≥n, haz una confesi√≥n, o simplemente desah√≥gate. ¬°Estamos escuchando!",
    your_message: "Tu Mensaje",
    feedback_placeholder: "¬°Comparte tus pensamientos, retroalimentaci√≥n, citas, o simplemente desah√≥gate! Estamos escuchando.",
    share_it: "¬°Comp√°rtelo!",
    no_items: "No hay elementos.",
    no_description: "Sin descripci√≥n.",
    already_in_list: "Ya est√° en {list}.",
    moved_to: "Movido a {list}.",
    added_to: "Agregado a {list}.",
    feedback: "Comparte Tus Pensamientos",
    feedback_placeholder: "Comparte tus pensamientos, comentarios, citas, confesiones o simplemente desah√≥gate aqu√≠...",
    send: "¬°Comp√°rtelo!",
    search_results: "Resultados de B√∫squeda",
    no_results: "Sin resultados",
    searching: "Buscando...",
    advanced: "Avanzado",
    search_failed: "B√∫squeda fallida",
    search_results_cleared: "Resultados de b√∫squeda limpiados debido al cambio de idioma.",
    please_search_again: "Por favor busca nuevamente para ver resultados en el nuevo idioma.",
    episode_alerts: "Alertas de episodios",
    weekly_discover: "Descubrimientos semanales",
    monthly_digest: "Resumen mensual de estad√≠sticas",
    backup_import: "Respaldo e Importaci√≥n",
    nuclear_option: "Opci√≥n Nuclear",
    share_this_list: "Compartir Esta Lista",
    share_selected: "Seleccionar Elementos para Compartir",
    share_link: "Compartir enlace",
    share_instructions: "Haz clic para seleccionar qu√© series y pel√≠culas compartir",
    choose_file: "Elegir Archivo",
    no_file_chosen: "Ning√∫n archivo elegido",
    upcoming_episode: "Episodio pr√≥ximo",
    welcome: "Bienvenido",
    theme: "Tema",
    theme_description: "Cambiar entre diferentes temas visuales para la aplicaci√≥n.",
    mardi_gras_mode: "Modo Mardi Gras",
    sign_in_account: "Iniciar sesi√≥n / Cuenta",
    language: "Idioma",
    search_for_shows: "Buscar series o pel√≠culas...",
    currently_watching_count: "Viendo Actualmente",
    want_to_watch_count: "Quiero Ver",
    already_watched_count: "Ya Visto",
    discover_description: "Recomendaciones basadas en tus gustos y calificaciones.",
    settings_description: "Configuraci√≥n de la aplicaci√≥n",
    display_name_placeholder: "Nombre de pantalla",
    save_name: "Guardar",
    pro_simulate: "Pro (simular)",
    notifications: "Notificaciones",
    stats: "Estad√≠sticas",
    total_items: "Total de elementos",
    watching_count: "Viendo",
    wishlist_count: "Lista de Deseos",
    watched_count: "Visto",
    top_genres: "G√©neros Principales",
    average_rating: "Calificaci√≥n Promedio",
    loading: "Cargando...",
    failed_to_load: "Error al cargar",
    not_enough_signals: "A√∫n no hay suficientes se√±ales. Dale like o califica algunos elementos primero.",
    recommendations_failed: "Error al cargar recomendaciones.",
    // New strings from recent updates
    auth_system_unavailable: "El sistema de autenticaci√≥n no est√° disponible. Por favor, actualiza la p√°gina.",
    signed_in_successfully: "Inicio de sesi√≥n exitoso",
    error_loading_user_data: "Error al cargar datos del usuario. Por favor, int√©ntalo de nuevo.",
    auth_system_error: "Error del sistema de autenticaci√≥n. Por favor, actualiza la p√°gina.",
    firestore_not_available: "Firestore no disponible",
    no_displayname_field: "No hay campo displayName que eliminar",
    what_should_we_call_you: "¬øC√≥mo deber√≠amos llamarte?",
    your_handle: "Tu nombre de usuario",
    enter_key: "Entrar",
    account: "Cuenta",
    user: "Usuario",
    sign_in_account_title: "Iniciar sesi√≥n / Cuenta",
    signed_in_as: "Conectado como",
    click_to_sign_out: "Cerrar sesi√≥n aqu√≠",
    unknown_data_action: "Acci√≥n de datos desconocida",
    auth_system_loading: "El sistema de autenticaci√≥n se est√° cargando. Por favor, int√©ntalo en un momento.",
    sign_in_to_sync: "Iniciar sesi√≥n para sincronizar",
    sign_in_subtitle_text: "Inicia sesi√≥n para respaldar tus listas y sincronizar entre dispositivos.",
    google_signin_unavailable: "El inicio de sesi√≥n con Google no est√° disponible. Por favor, actualiza la p√°gina.",
    apple_signin_unavailable: "El inicio de sesi√≥n con Apple no est√° disponible. Por favor, actualiza la p√°gina.",
    email_signin_unavailable: "El inicio de sesi√≥n por email no est√° disponible. Por favor, actualiza la p√°gina.",
    unable_to_show_signin: "No se puede mostrar el modal de inicio de sesi√≥n. Por favor, actualiza la p√°gina.",
    signin_system_not_ready: "El sistema de inicio de sesi√≥n no est√° listo. Por favor, actualiza la p√°gina.",
    unknown: "Desconocido",
    sign_out_confirmation: "Cerrar sesi√≥n como",
    email_label: "Email",
    signed_out_successfully: "Sesi√≥n cerrada exitosamente",
    sign_out_failed: "Error al cerrar sesi√≥n",
    not_interested: "No me interesa",
    language_changed_to: "Idioma cambiado a {lang}"
  }
};

// Translation function
function t(key, lang = 'en') {
  const translations = I18N[lang] || I18N.en;
  return translations[key] || key;
}

// Comprehensive translation application
function applyTranslations(lang = 'en') {
  console.log('üåç Applying translations for language:', lang);
  
  // Apply to data-i18n elements
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      el.textContent = translation;
    }
  });
  
  // Apply to placeholder elements
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      el.placeholder = translation;
    }
  });
  
  // Apply to title attributes
  document.querySelectorAll('[data-i18n-title]').forEach(el => {
    const key = el.getAttribute('data-i18n-title');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      el.title = translation;
    }
  });
  
  // Apply to aria-label attributes
  document.querySelectorAll('[data-i18n-aria-label]').forEach(el => {
    const key = el.getAttribute('data-i18n-aria-label');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      el.setAttribute('aria-label', translation);
    }
  });
  
  console.log('‚úÖ Translations applied successfully');
}

// Make functions globally accessible
if (typeof window !== 'undefined') {
  window.I18N = I18N;
  window.t = t;
  window.applyTranslations = applyTranslations;
}

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { I18N, t, applyTranslations };
}

