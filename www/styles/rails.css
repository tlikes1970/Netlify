/* === Canonical home rails === */
:root {
  --rail-gap: 16px;
  --cw-col: 200px;       /* currently watching */
  --curated-col: 220px;  /* curated */
}

/* The outer shell never clips - override conflicting rules with higher specificity */
#homeSection .home-preview-row .preview-row-container,
#currentlyWatchingPreview .preview-row-container,
#curated-section .preview-row-container,
#homeSection #currentlyWatchingPreview .preview-row-container,
#homeSection #curated-section .preview-row-container {
  overflow: visible;
}

/* Rail scaffolding stays */
.home-preview-row .row-inner,
.home-preview-row .preview-row-scroll,
#curated-section .curated-row-scroll,
#curatedSections .curated-row-scroll {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: var(--rail-col, 200px);
  gap: var(--rail-gap, 16px);
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-gutter: stable both-edges;
  padding-bottom: 8px;
}

/* Row-specific columns */
#currentlyWatchingPreview .row-inner,
#currentlyWatchingPreview .preview-row-scroll { 
  --rail-col: var(--cw-col, 200px); 
}

#curated-section .curated-row-scroll,
#curatedSections .curated-row-scroll { 
  --rail-col: var(--curated-col, 220px); 
}

/* ===== curated card v2 contract (scoped) ===== */

.card.v2.v2-home-curated.curated-card {
  display: grid;
  grid-template-rows: auto 1fr;
  gap: var(--card-gap, 8px);
  width: var(--curated-col, 220px);
}

.card.v2.v2-home-curated .poster-wrap {
  width: 100%;
  aspect-ratio: 2 / 3;
  overflow: hidden;
  border-radius: 10px;
}

.card.v2.v2-home-curated .poster-wrap > img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}

/* 2x2 action grid, resilient to legacy .actions rules */
.card.v2.v2-home-curated .ccv2-actions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-auto-rows: 36px;
  gap: 8px;
  margin-top: 6px;
}

.card.v2.v2-home-curated .ccv2-actions > .ccv2-spacer {
  border: 1px solid transparent;
  border-radius: 10px;
  visibility: hidden;
}

/* === Curated cards: match the mock layout === */
/* scope: curated rail only */
#curated-section .card.v2.v2-home-curated.curated-card,
#curatedSections .card.v2.v2-home-curated.curated-card,
[data-section="curated"] .card.v2.v2-home-curated.curated-card,
[data-rail="curated"] .card.v2.v2-home-curated.curated-card {
  min-width: 220px;
  max-width: 220px;
  background: var(--card, #171a21);
  border: 1px solid var(--line, #242a33);
  border-radius: 14px;
  box-shadow: var(--shadow, 0 6px 24px rgba(0,0,0,.35));
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* poster: your DOM uses <div.poster-wrap><img></div>; mock used .poster bg */
#curated-section .card.v2.v2-home-curated .poster-wrap,
#curatedSections .card.v2.v2-home-curated .poster-wrap,
[data-section="curated"] .card.v2.v2-home-curated .poster-wrap,
[data-rail="curated"] .card.v2.v2-home-curated .poster-wrap {
  width: 100%;
  aspect-ratio: 2 / 3;
  overflow: hidden;
  border-radius: 10px;
  margin-bottom: 8px; /* match mock spacing */
}
#curated-section .card.v2.v2-home-curated .poster-wrap > img,
#curatedSections .card.v2.v2-home-curated .poster-wrap > img,
[data-section="curated"] .card.v2.v2-home-curated .poster-wrap > img,
[data-rail="curated"] .card.v2.v2-home-curated .poster-wrap > img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* title + meta to mirror mock's sizing/centering */
#curated-section .card.v2.v2-home-curated .home-title,
#curatedSections .card.v2.v2-home-curated .home-title,
[data-section="curated"] .card.v2.v2-home-curated .home-title,
[data-rail="curated"] .card.v2.v2-home-curated .home-title {
  font-weight: 700;
  font-size: 14px;
  margin: 0 0 4px;
  text-align: center;
}
#curated-section .card.v2.v2-home-curated .home-meta,
#curatedSections .card.v2.v2-home-curated .home-meta,
[data-section="curated"] .card.v2.v2-home-curated .home-meta,
[data-rail="curated"] .card.v2.v2-home-curated .home-meta {
  color: var(--muted, #a9b3c1);
  font-size: 12px;
  margin: 0 0 8px;
  text-align: center;
}

/* actions: behave like the mock's .row2 2x2 grid, with single-button full-width */
#curated-section .card.v2.v2-home-curated .ccv2-actions,
#curatedSections .card.v2.v2-home-curated .ccv2-actions,
[data-section="curated"] .card.v2.v2-home-curated .ccv2-actions,
[data-rail="curated"] .card.v2.v2-home-curated .ccv2-actions {
  /* light reset in case legacy .actions leaked in */
  all: revert;         /* reset without destroying color variables */
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
  width: 100%;
}
/* if exactly one actionable child (buttons or anchors), make it full-width */
#curated-section .card.v2.v2-home-curated .ccv2-actions:has(> button:nth-of-type(1):only-of-type),
#curatedSections .card.v2.v2-home-curated .ccv2-actions:has(> a.button:nth-of-type(1):only-of-type),
[data-section="curated"] .card.v2.v2-home-curated .ccv2-actions:has(> button:nth-of-type(1):only-of-type),
[data-rail="curated"] .card.v2.v2-home-curated .ccv2-actions:has(> a.button:nth-of-type(1):only-of-type) {
  grid-template-columns: 1fr;
}

/* button look to match mock */
#curated-section .card.v2.v2-home-curated .ccv2-actions > button,
#curatedSections .card.v2.v2-home-curated .ccv2-actions > button,
[data-section="curated"] .card.v2.v2-home-curated .ccv2-actions > button,
[data-rail="curated"] .card.v2.v2-home-curated .ccv2-actions > button,
#curated-section .card.v2.v2-home-curated .ccv2-actions > a.button,
#curatedSections .card.v2.v2-home-curated .ccv2-actions > a.button,
[data-section="curated"] .card.v2.v2-home-curated .ccv2-actions > a.button,
[data-rail="curated"] .card.v2.v2-home-curated .ccv2-actions > a.button {
  background: var(--btn, #232a34);
  color: var(--text, #e6eaf0);
  border: 1px solid var(--line, #242a33);
  padding: 6px 8px;
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
  width: 100%;
  min-width: 0;
}

/* curated rail scroller parity with mock */
#curated-section .curated-row-scroll,
#curatedSections .curated-row-scroll,
[data-section="curated"] .curated-row-scroll,
[data-rail="curated"] .curated-row-scroll {
  /* Use grid system from earlier definition - no override needed */
}

/* ==== Curated cards: style what actually exists ==== */
#curatedSections .curated-card.v2 {
  min-width: 220px;
  max-width: 220px;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: var(--card, #171a21);
  border: 1px solid var(--line, #242a33);
  border-radius: 14px;
  box-shadow: var(--shadow, 0 6px 24px rgba(0,0,0,.35));
  padding: 12px;
}

/* poster */
#curatedSections .curated-card.v2 .poster-wrap {
  width: 100%;
  aspect-ratio: 2 / 3;
  overflow: hidden;
  border-radius: 10px;
  margin-bottom: 8px;
}
#curatedSections .curated-card.v2 .poster-wrap > img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* title/meta (use whatever classes you actually output) */
#curatedSections .curated-card.v2 .home-title {
  font-weight: 700;
  font-size: 14px;
  margin: 0 0 4px;
  text-align: center;
}
#curatedSections .curated-card.v2 .home-meta {
  color: var(--muted, #a9b3c1);
  font-size: 12px;
  margin: 0 0 8px;
  text-align: center;
}

/* actions: nuke legacy layout ONLY here, then force 2x2 grid */
#curatedSections .curated-card.v2 .actions {
  all: revert;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-auto-rows: 36px;
  gap: 8px;
  margin-top: 8px;
  width: 100%;
}

/* if exactly one real action, make it full width */
#curatedSections .curated-card.v2 .actions:has(> button:nth-of-type(1):only-of-type),
#curatedSections .curated-card.v2 .actions:has(> a.button:nth-of-type(1):only-of-type) {
  grid-template-columns: 1fr;
}

/* button look */
#curatedSections .curated-card.v2 .actions > button,
#curatedSections .curated-card.v2 .actions > a.button {
  background: var(--btn, #232a34);
  color: var(--text, #e6eaf0);
  border: 1px solid var(--line, #242a33);
  padding: 6px 8px;
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
  width: 100%;
  min-width: 0;
}

/* rail scroll behavior parity */
#curatedSections .curated-row-scroll {
  /* Use grid system from earlier definition - no override needed */
}